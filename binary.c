//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/tmux.c#L251
void main(undefined8 param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4,
         undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,int param_9,
         char **param_10,undefined8 param_11,char *param_12,undefined8 param_13,undefined8 param_14)

{
  char cVar1;
  int iVar2;
  __uid_t _Var3;
  char *pcVar4;
  char *pcVar5;
  ulong *puVar6;
  int *piVar7;
  long lVar8;
  char *pcVar9;
  char *__s;
  size_t sVar10;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined *unaff_RBX;
  undefined *puVar11;
  char **ppcVar12;
  undefined8 uVar13;
  uint unaff_R13D;
  char *unaff_R14;
  long *unaff_R15;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 uVar14;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Da_11;
  undefined4 extraout_XMM0_Da_12;
  undefined4 extraout_XMM0_Da_13;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Da_14;
  undefined4 extraout_XMM0_Da_15;
  undefined4 extraout_XMM0_Da_16;
  undefined4 extraout_XMM0_Da_17;
  undefined4 extraout_XMM0_Da_18;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar16;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined4 extraout_XMM0_Db_09;
  undefined4 uVar17;
  undefined4 extraout_XMM0_Db_10;
  undefined4 extraout_XMM0_Db_11;
  undefined4 extraout_XMM0_Db_12;
  undefined auVar18 [16];
  undefined in_stack_ffffffffffffdef8;
  char *local_2100;
  int local_20f4;
  char *local_20e8;
  char *local_20e0;
  stat local_20d8;
  char local_2048 [4096];
  char local_1048 [4104];
  undefined8 local_40;
  
  local_40 = *(undefined8 *)(in_FS_OFFSET + 0x28);
  pcVar4 = setlocale(0,"en_US.UTF-8");
  if ((pcVar4 == (char *)0x0) && (pcVar4 = setlocale(0,"C.UTF-8"), pcVar4 == (char *)0x0)) {
    pcVar4 = setlocale(0,"");
    uVar14 = (undefined4)param_2;
    if (pcVar4 != (char *)0x0) {
      pcVar4 = nl_langinfo(0xe);
      iVar2 = strcasecmp(pcVar4,"UTF-8");
      if ((iVar2 != 0) && (iVar2 = strcasecmp(pcVar4,"UTF8"), iVar2 != 0)) {
        pcVar5 = "need UTF-8 locale (LC_CTYPE) but have %s";
        errx(1,"need UTF-8 locale (LC_CTYPE) but have %s",pcVar4);
        goto LAB_00123edd;
      }
      goto LAB_00123c9d;
    }
    pcVar5 = "invalid LC_ALL, LC_CTYPE or LANG";
    errx(1);
LAB_001240ee:
    pcVar4 = getenv("TMUX");
    if (((pcVar4 != (char *)0x0) && (*pcVar4 != '\0')) && (*pcVar4 != ',')) {
      xstrdup(CONCAT44(extraout_XMM0_Db_07,extraout_XMM0_Da_11),uVar14,param_3,param_4,param_5,
              param_6,param_7,param_8,pcVar4,pcVar5,extraout_RDX_05,param_12,param_13,param_14);
      sVar10 = strcspn(__s,",");
      __s[sVar10] = '\0';
      unaff_R14 = __s;
      goto LAB_00124099;
    }
    pcVar4 = "default";
  }
  else {
LAB_00123c9d:
    setlocale(2,"");
    unaff_RBX = &DAT_001809f4;
    tzset();
    cVar1 = **param_10;
    unaff_R15 = (long *)0x0;
    unaff_R14 = (char *)0x0;
    tmate_catch_sigsegv();
    local_2100 = (char *)0x0;
    pcVar4 = (char *)(ulong)((uint)(cVar1 == '-') * 2 | 0x30000);
    while (pcVar5 = (char *)param_10,
          iVar2 = BSDgetopt(param_9,(long)param_10,"h2c:CdFf:lL:qS:uUVvk:n:r:a:"), iVar2 != -1) {
      if (iVar2 - 0x32U < 0x45) {
                    // WARNING: Could not recover jumptable at 0x00123d10. Too many branches
                    // WARNING: Treating indirect jump as call
        (*(code *)(unaff_RBX + *(int *)(unaff_RBX + (ulong)(iVar2 - 0x32U) * 4)))();
        return;
      }
LAB_00123d13:
      usage();
      log_add_level();
    }
LAB_00123edd:
    unaff_R13D = (uint)pcVar4;
    local_20f4 = BSDoptind;
    param_9 = param_9 - BSDoptind;
    if ((unaff_R15 != (long *)0x0) && (param_9 != 0)) goto LAB_00123d13;
    pcVar4 = getenv("TMUX");
    uVar16 = extraout_RDX;
    uVar14 = extraout_XMM0_Da;
    if (pcVar4 == (char *)0x0) {
      pcVar4 = getenv("LC_ALL");
      if ((((pcVar4 == (char *)0x0) || (*pcVar4 == '\0')) &&
          ((pcVar4 = getenv("LC_CTYPE"), pcVar4 == (char *)0x0 || (*pcVar4 == '\0')))) &&
         ((pcVar4 = getenv("LANG"), pcVar4 == (char *)0x0 || (*pcVar4 == '\0')))) {
        pcVar4 = "";
      }
      pcVar5 = "UTF-8";
      pcVar9 = strcasestr(pcVar4,"UTF-8");
      uVar16 = extraout_RDX_06;
      uVar14 = extraout_XMM0_Da_14;
      if (pcVar9 != (char *)0x0) goto LAB_00123f0d;
      pcVar5 = &DAT_00180965;
      pcVar4 = strcasestr(pcVar4,"UTF8");
      uVar16 = extraout_RDX_07;
      uVar14 = extraout_XMM0_Da_15;
      if (pcVar4 != (char *)0x0) goto LAB_00123f0d;
    }
    else {
LAB_00123f0d:
      unaff_R13D = unaff_R13D | 0x10000;
    }
    uVar13 = 0;
    auVar18 = hooks_create(uVar14,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                           pcVar5,uVar16,param_12,param_13,param_14);
    global_hooks = auVar18._0_8_;
    auVar18 = environ_create(extraout_XMM0_Da_00,(int)param_2,param_3,param_4,param_5,param_6,
                             param_7,param_8,uVar13,pcVar5,auVar18._8_8_,param_12,param_13,param_14)
    ;
    uVar16 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01);
    pcVar4 = *environ;
    ppcVar12 = environ;
    while( true ) {
      global_environ = auVar18._0_8_;
      if (pcVar4 == (char *)0x0) break;
      ppcVar12 = ppcVar12 + 1;
      uVar16 = environ_put(uVar16,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           global_environ,pcVar4,auVar18._8_8_,param_12,param_13,param_14);
      auVar18._8_8_ = extraout_RDX_00;
      auVar18._0_8_ = global_environ;
      pcVar4 = *ppcVar12;
    }
    pcVar4 = local_2048;
    puVar11 = (undefined *)0x1000;
    pcVar5 = getcwd(pcVar4,0x1000);
    uVar16 = extraout_RDX_01;
    uVar14 = extraout_XMM0_Da_02;
    if (pcVar5 != (char *)0x0) {
      puVar11 = &DAT_001809a2;
      uVar14 = environ_set(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_02),(int)param_2,param_3,
                           param_4,param_5,param_6,param_7,param_8,global_environ,"PWD","%s",pcVar4,
                           param_13,param_14,in_stack_ffffffffffffdef8);
      uVar16 = extraout_RDX_02;
    }
    auVar18 = options_create(uVar14,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                             puVar11,uVar16,pcVar4,param_13,param_14);
    ppcVar12 = auVar18._0_8_;
    global_options = ppcVar12;
    uVar14 = options_table_populate_tree
                       (CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8,1,ppcVar12,auVar18._8_8_,pcVar4,param_13,
                        param_14);
    auVar18 = options_create(uVar14,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                             ppcVar12,extraout_RDX_03,pcVar4,param_13,param_14);
    global_s_options = auVar18._0_8_;
    options_table_populate_tree
              (CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_04),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,2,global_s_options,auVar18._8_8_,pcVar4,param_13,param_14);
    param_12 = getshell();
    pcVar4 = "default-shell";
    options_set_string(extraout_XMM0_Da_05,(int)param_2,param_3,param_4,param_5,param_6,param_7,
                       param_8,global_s_options,"default-shell","%s",param_12,param_13,param_14,
                       in_stack_ffffffffffffdef8);
    auVar18 = options_create(extraout_XMM0_Da_06,(int)param_2,param_3,param_4,param_5,param_6,
                             param_7,param_8,0,pcVar4,extraout_RDX_04,param_12,param_13,param_14);
    pcVar5 = auVar18._0_8_;
    uVar14 = (undefined4)param_2;
    global_w_options = (char **)pcVar5;
    options_table_populate_tree
              (CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_07),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,3,(char **)pcVar5,auVar18._8_8_,param_12,param_13,param_14);
    pcVar4 = getenv("VISUAL");
    if ((pcVar4 != (char *)0x0) || (pcVar4 = getenv("EDITOR"), pcVar4 != (char *)0x0)) {
      pcVar5 = strrchr(pcVar4,0x2f);
      if (pcVar5 != (char *)0x0) {
        pcVar4 = pcVar5 + 1;
      }
      pcVar4 = strstr(pcVar4,"vi");
      options_set_number(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_08),uVar14,param_3,param_4,
                         param_5,param_6,param_7,param_8,global_s_options,"status-keys",
                         (char *)(ulong)(pcVar4 != (char *)0x0),param_12,param_13,param_14);
      pcVar5 = "mode-keys";
      options_set_number(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_09),uVar14,param_3,param_4,
                         param_5,param_6,param_7,param_8,global_w_options,"mode-keys",
                         (char *)(ulong)(pcVar4 != (char *)0x0),param_12,param_13,param_14);
    }
    if (((ulong)local_2100 | (ulong)unaff_R14) == 0) goto LAB_001240ee;
    pcVar4 = local_2100;
    if (unaff_R14 != (char *)0x0) goto LAB_00124099;
  }
  _Var3 = getuid();
  pcVar5 = getenv("TMUX_TMPDIR");
  if ((pcVar5 == (char *)0x0) || (*pcVar5 == '\0')) {
    xasprintf(CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_12),uVar14,param_3,param_4,param_5,
              param_6,param_7,param_8,(long *)&local_20e8,"%s/tmate-%u","/tmp/",(ulong)_Var3,
              param_13,param_14,in_stack_ffffffffffffdef8);
  }
  else {
    xasprintf(CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_12),uVar14,param_3,param_4,param_5,
              param_6,param_7,param_8,(long *)&local_20e8,"%s/tmate-%u",pcVar5,(ulong)_Var3,param_13
              ,param_14,in_stack_ffffffffffffdef8);
  }
  iVar2 = mkdir(local_20e8,0x1c0);
  if (((iVar2 == 0) || (piVar7 = __errno_location(), *piVar7 == 0x11)) &&
     (iVar2 = __lxstat(1,local_20e8,&local_20d8), iVar2 == 0)) {
    if ((local_20d8.st_mode & 0xf000) == 0x4000) {
      if ((_Var3 == local_20d8.st_uid) && ((local_20d8.st_mode & 7) == 0)) {
        if (local_2100 == (char *)0x0) {
          lVar8 = __realpath_chk(local_20e8,local_1048,0x1000);
          uVar15 = extraout_XMM0_Da_16;
          uVar17 = extraout_XMM0_Db_10;
          if (lVar8 == 0) {
            strlcpy(local_1048,local_20e8,0x1000);
            uVar15 = extraout_XMM0_Da_18;
            uVar17 = extraout_XMM0_Db_12;
          }
          xasprintf(CONCAT44(uVar17,uVar15),uVar14,param_3,param_4,param_5,param_6,param_7,param_8,
                    (long *)&local_20e0,"%s/%s",local_1048,"XXXXXX",param_13,param_14,
                    in_stack_ffffffffffffdef8);
          mktemp(local_20e0);
        }
        else {
          lVar8 = __realpath_chk(local_20e8,local_1048,0x1000);
          uVar15 = extraout_XMM0_Da_13;
          uVar17 = extraout_XMM0_Db_09;
          if (lVar8 == 0) {
            strlcpy(local_1048,local_20e8,0x1000);
            uVar15 = extraout_XMM0_Da_17;
            uVar17 = extraout_XMM0_Db_11;
          }
          xasprintf(CONCAT44(uVar17,uVar15),uVar14,param_3,param_4,param_5,param_6,param_7,param_8,
                    (long *)&local_20e0,"%s/%s",local_1048,pcVar4,param_13,param_14,
                    in_stack_ffffffffffffdef8);
        }
        unaff_R14 = local_20e0;
        if (local_20e0 != (char *)0x0) {
LAB_00124099:
          socket_path = unaff_R14;
          free(local_2100);
          puVar6 = (ulong *)event_init();
          iVar2 = client_main(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_10),uVar14,param_3,
                              param_4,param_5,param_6,param_7,param_8,puVar6,param_9,
                              param_10 + local_20f4,unaff_R13D,unaff_R15,param_14);
                    // WARNING: Subroutine does not return
          exit(iVar2);
        }
        goto LAB_00124218;
      }
      piVar7 = __errno_location();
      *piVar7 = 0xd;
    }
    else {
      piVar7 = __errno_location();
      *piVar7 = 0x14;
    }
  }
  piVar7 = __errno_location();
  iVar2 = *piVar7;
  free(local_20e8);
  *piVar7 = iVar2;
LAB_00124218:
  piVar7 = __errno_location();
  pcVar4 = strerror(*piVar7);
  __fprintf_chk(stderr,1,"can\'t create socket: %s\n",pcVar4);
                    // WARNING: Subroutine does not return
  exit(1);
}



void processEntry _start(undefined8 param_1,undefined8 param_2)

{
  undefined auStack_8 [8];
  
  __libc_start_main(main,param_2,&stack0x00000008,__libc_csu_init,__libc_csu_fini,param_1,auStack_8)
  ;
  do {
                    // WARNING: Do nothing block with infinite loop
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x00124423)
// WARNING: Removing unreachable block (ram,0x0012442f)

void FUN_00124410(void)

{
  return;
}



// WARNING: Removing unreachable block (ram,0x00124464)
// WARNING: Removing unreachable block (ram,0x00124470)

void FUN_00124440(void)

{
  return;
}



void _FINI_0(void)

{
  if (DAT_0019e7a8 != '\0') {
    return;
  }
  __cxa_finalize(PTR_LOOP_0019e008);
  FUN_00124410();
  DAT_0019e7a8 = 1;
  return;
}



void _INIT_0(void)

{
  FUN_00124440();
  return;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
void alerts_run_hook(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,long param_10,uint param_11,ulong param_12,ulong param_13,
                    ulong param_14)

{
  long lVar1;
  undefined8 uVar2;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined in_stack_ffffffffffffff98;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = cmd_find_from_winlink
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (undefined8 *)&stack0xffffffffffffff98,param_9,param_10,param_12,param_13,
                     param_14);
  if ((int)uVar2 == 0) {
    uVar2 = extraout_XMM0_Qa;
    if ((param_11 & 1) != 0) {
      hooks_run(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                *(char ***)(param_9 + 0x100),0,(long)&stack0xffffffffffffff98,"alert-bell",param_13,
                param_14,in_stack_ffffffffffffff98);
      uVar2 = extraout_XMM0_Qa_01;
    }
    if ((param_11 & 8) != 0) {
      hooks_run(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                *(char ***)(param_9 + 0x100),0,(long)&stack0xffffffffffffff98,"alert-silence",
                param_13,param_14,in_stack_ffffffffffffff98);
      uVar2 = extraout_XMM0_Qa_00;
    }
    if ((param_11 & 2) != 0) {
      hooks_run(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                *(char ***)(param_9 + 0x100),0,(long)&stack0xffffffffffffff98,"alert-activity",
                param_13,param_14,in_stack_ffffffffffffff98);
    }
  }
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
byte alerts_enabled(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,byte param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  if ((param_10 & 1) != 0) {
    return 1;
  }
  if ((param_10 & 2) != 0) {
    pcVar1 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(param_9 + 0x188),"monitor-activity",param_11,param_12,
                                param_13,param_14);
    param_11 = extraout_RDX;
    param_1 = extraout_XMM0_Qa;
    if (pcVar1 != (char *)0x0) {
      return 1;
    }
  }
  if ((param_10 & 8) == 0) {
    return param_10 & 8;
  }
  pcVar1 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(param_9 + 0x188),"monitor-silence",param_11,param_12,
                              param_13,param_14);
  return pcVar1 != (char *)0x0;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
void alerts_reset(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  char *pcVar3;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  param_9[0x60] = param_9[0x60] & 0xfffffff7;
  uVar2 = event_del(param_9 + 0x28);
  pcVar3 = options_get_number(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(param_9 + 0x62),"monitor-silence",extraout_RDX,param_12,
                              param_13,param_14);
  log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "@%u alerts timer reset %u",(ulong)*param_9,pcVar3,param_13,param_14,(char)pcVar3);
  if (pcVar3 != (char *)0x0) {
    event_add(param_9 + 0x28,&stack0xffffffffffffffc8);
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
void alerts_reset_all(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  undefined8 uVar1;
  undefined8 uVar2;
  uint *puVar3;
  undefined8 in_RCX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar4;
  undefined8 in_R8;
  undefined8 in_R9;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  uVar4 = 0xffffffff;
  puVar3 = (uint *)windows_RB_MINMAX(&windows,-1);
  uVar1 = extraout_RDX;
  uVar2 = extraout_XMM0_Qa;
  while (puVar3 != (uint *)0x0) {
    alerts_reset(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar3,uVar4,uVar1,
                 in_RCX,in_R8,in_R9);
    puVar3 = (uint *)windows_RB_NEXT((long)puVar3);
    uVar1 = extraout_RDX_00;
    uVar2 = extraout_XMM0_Qa_00;
  }
  return;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
void alerts_queue(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 uint *param_9,ulong param_10,undefined8 param_11,undefined8 param_12,uint *param_13
                 ,undefined8 param_14)

{
  undefined8 uVar1;
  byte bVar2;
  int iVar3;
  undefined7 extraout_var;
  ulong uVar4;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar5;
  
  if ((*(byte *)(param_9 + 0x60) & 2) != 0) {
    alerts_reset(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                 param_11,param_12,param_13,param_14);
  }
  iVar3 = event_initialized(param_9 + 0x28);
  uVar5 = extraout_XMM0_Da;
  if (iVar3 == 0) {
    param_13 = param_9;
    uVar5 = event_set(param_9 + 0x28,0xffffffff,0,alerts_timer);
  }
  if (alerts_fired == 0) {
    param_9[0x60] = param_9[0x60] | (uint)param_10;
    uVar4 = param_10 & 0xffffffff;
    uVar1 = log_emit(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                     "@%u alerts flags added %#x",(ulong)*param_9,uVar4,param_13,param_14,unaff_BL);
    bVar2 = alerts_enabled(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)param_9,(byte)param_10,extraout_RDX,uVar4,param_13,param_14);
    if ((int)CONCAT71(extraout_var,bVar2) != 0) {
      log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "alerts check queued (by @%u)",(ulong)*param_9,uVar4,param_13,param_14,unaff_BL);
      event_once(0xffffffff,1,alerts_callback,0,0);
      alerts_fired = 1;
      return;
    }
  }
  return;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
void alerts_timer(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,uint *param_11,undefined8 param_12,
                 uint *param_13,undefined8 param_14)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined1 unaff_BPL;
  char *pcVar2;
  
  pcVar2 = "@%u alerts timer expired";
  uVar1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "@%u alerts timer expired",(ulong)*param_11,param_12,param_13,param_14,unaff_BPL)
  ;
  uVar1 = alerts_reset(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,pcVar2
                       ,extraout_RDX,param_12,param_13,param_14);
  alerts_queue(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,8,
               extraout_RDX_00,param_12,param_13,param_14);
  return;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
uint alerts_check_bell(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
                      long param_13,undefined8 param_14)

{
  long lVar1;
  uint *puVar2;
  long lVar3;
  uint uVar4;
  int iVar5;
  char *pcVar6;
  ulong uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar8;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  uint uVar9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 uVar10;
  undefined in_stack_ffffffffffffffb8;
  
  lVar1 = *(long *)(param_10 + 2);
  uVar9 = *(uint *)(lVar1 + 0x180) & 1;
  if (uVar9 == 0) {
    return 0;
  }
  puVar2 = *(uint **)(param_9 + 0xe0);
  uVar4 = *(uint *)(lVar1 + 0x180) & 0xfffffffe;
  if (puVar2 != param_10) {
    param_10[0xe] = param_10[0xe] | 1;
    *(uint *)(lVar1 + 0x180) = uVar4;
    if (*(long *)(puVar2 + 2) != lVar1) goto LAB_00124898;
  }
  *(uint *)(lVar1 + 0x180) = uVar4;
LAB_00124898:
  pcVar6 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(param_9 + 0x108),"bell-action",puVar2,param_12,param_13,
                              param_14);
  iVar5 = (int)pcVar6;
  if (iVar5 == 0) {
    return 0;
  }
  pcVar6 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                              param_5,param_6,param_7,param_8,*(char ***)(param_9 + 0x108),
                              "visual-bell",extraout_RDX,param_12,param_13,param_14);
  uVar10 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
  uVar7 = (ulong)pcVar6 & 0xffffffff;
  uVar8 = extraout_RDX_00;
  lVar3 = clients;
  do {
    if (lVar3 == 0) {
      return uVar9;
    }
    if ((*(long *)(lVar3 + 0x598) == param_9) && ((*(byte *)(lVar3 + 0x421) & 0x20) == 0)) {
      if ((int)pcVar6 == 0) {
        if (iVar5 == 2) {
          if (*(long *)(*(long *)(param_9 + 0xe0) + 8) == lVar1) goto LAB_0012497a;
        }
        else if (iVar5 == 3) {
          if (*(long *)(*(long *)(param_9 + 0xe0) + 8) != lVar1) goto LAB_0012497a;
        }
        else if (iVar5 == 1) {
LAB_0012497a:
          uVar10 = tty_putcode((int)uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               lVar3 + 0xe0,3,uVar8,uVar7,param_13,param_14);
          uVar8 = extraout_RDX_02;
        }
      }
      else if (iVar5 == 2) {
        if (*(long *)(*(long *)(param_9 + 0xe0) + 8) == lVar1) {
          uVar10 = status_message_set(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                      ,lVar3,"Bell in current window",uVar8,uVar7,param_13,param_14,
                                      in_stack_ffffffffffffffb8);
          uVar8 = extraout_RDX_03;
        }
      }
      else if ((iVar5 == 1) || ((iVar5 == 3 && (*(long *)(*(long *)(param_9 + 0xe0) + 8) != lVar1)))
              ) {
        uVar10 = status_message_set(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    lVar3,"Bell in window %d",(ulong)*param_10,uVar7,param_13,
                                    param_14,in_stack_ffffffffffffffb8);
        uVar8 = extraout_RDX_01;
      }
    }
    lVar3 = *(long *)(lVar3 + 0x5c0);
  } while( true );
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
void alerts_ring_bell(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  long *plVar1;
  undefined8 extraout_RDX;
  long lVar2;
  
  lVar2 = clients;
  if (clients != 0) {
    do {
      while ((*(long *)(lVar2 + 0x598) != param_9 || ((*(byte *)(lVar2 + 0x421) & 0x20) != 0))) {
        plVar1 = (long *)(lVar2 + 0x5c0);
        lVar2 = *plVar1;
        if (*plVar1 == 0) {
          return;
        }
      }
      param_1 = tty_putcode(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            lVar2 + 0xe0,3,param_11,param_12,param_13,param_14);
      plVar1 = (long *)(lVar2 + 0x5c0);
      param_11 = extraout_RDX;
      lVar2 = *plVar1;
    } while (*plVar1 != 0);
  }
  return;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
undefined8
alerts_check_activity
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          uint *param_10,undefined8 param_11,undefined8 param_12,long param_13,undefined8 param_14)

{
  long lVar1;
  char *pcVar2;
  uint *puVar3;
  uint uVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar5;
  undefined8 extraout_RDX_01;
  char *pcVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined8 uVar7;
  undefined in_stack_ffffffffffffffd8;
  
  lVar1 = *(long *)(param_10 + 2);
  puVar3 = *(uint **)(param_9 + 0xe0);
  if (*(long *)(puVar3 + 2) == lVar1) {
    *(uint *)(lVar1 + 0x180) = *(uint *)(lVar1 + 0x180) & 0xfffffffd;
  }
  else {
    uVar4 = *(uint *)(lVar1 + 0x180) & 2;
    if (uVar4 != 0) {
      if ((((*(byte *)(param_10 + 0xe) & 2) == 0) && (puVar3 != param_10)) &&
         (pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                      param_8,*(char ***)(lVar1 + 0x188),"monitor-activity",
                                      (ulong)uVar4,puVar3,param_13,param_14), pcVar2 != (char *)0x0)
         ) {
        pcVar6 = "bell-on-alert";
        pcVar2 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                    param_4,param_5,param_6,param_7,param_8,
                                    *(char ***)(param_9 + 0x108),"bell-on-alert",extraout_RDX,puVar3
                                    ,param_13,param_14);
        uVar7 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
        uVar5 = extraout_RDX_00;
        if (pcVar2 != (char *)0x0) {
          uVar7 = alerts_ring_bell(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,
                                   param_7,param_8,param_9,pcVar6,extraout_RDX_00,puVar3,param_13,
                                   param_14);
          uVar5 = extraout_RDX_01;
        }
        param_10[0xe] = param_10[0xe] | 2;
        pcVar2 = options_get_number(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    *(char ***)(param_9 + 0x108),"visual-activity",uVar5,puVar3,
                                    param_13,param_14);
        uVar7 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
        lVar1 = clients;
        if (pcVar2 != (char *)0x0) {
          for (; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x5c0)) {
            if (param_9 == *(long *)(lVar1 + 0x598)) {
              uVar7 = status_message_set(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,
                                         param_8,lVar1,"Activity in window %d",(ulong)*param_10,
                                         puVar3,param_13,param_14,in_stack_ffffffffffffffd8);
            }
          }
        }
        return 2;
      }
      return 0;
    }
  }
  return 0;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
undefined8
alerts_check_silence
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          uint *param_10,undefined8 param_11,undefined8 param_12,long param_13,undefined8 param_14)

{
  long lVar1;
  char *pcVar2;
  uint *puVar3;
  uint uVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar5;
  undefined8 extraout_RDX_01;
  char *pcVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined8 uVar7;
  undefined in_stack_ffffffffffffffd8;
  
  lVar1 = *(long *)(param_10 + 2);
  puVar3 = *(uint **)(param_9 + 0xe0);
  if (*(long *)(puVar3 + 2) == lVar1) {
    *(uint *)(lVar1 + 0x180) = *(uint *)(lVar1 + 0x180) & 0xfffffff7;
  }
  else {
    uVar4 = *(uint *)(lVar1 + 0x180) & 8;
    if (uVar4 != 0) {
      if ((((*(byte *)(param_10 + 0xe) & 4) == 0) && (puVar3 != param_10)) &&
         (pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                      param_8,*(char ***)(lVar1 + 0x188),"monitor-silence",
                                      (ulong)uVar4,puVar3,param_13,param_14), pcVar2 != (char *)0x0)
         ) {
        pcVar6 = "bell-on-alert";
        pcVar2 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                    param_4,param_5,param_6,param_7,param_8,
                                    *(char ***)(param_9 + 0x108),"bell-on-alert",extraout_RDX,puVar3
                                    ,param_13,param_14);
        uVar7 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
        uVar5 = extraout_RDX_00;
        if (pcVar2 != (char *)0x0) {
          uVar7 = alerts_ring_bell(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,
                                   param_7,param_8,param_9,pcVar6,extraout_RDX_00,puVar3,param_13,
                                   param_14);
          uVar5 = extraout_RDX_01;
        }
        param_10[0xe] = param_10[0xe] | 4;
        pcVar2 = options_get_number(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    *(char ***)(param_9 + 0x108),"visual-silence",uVar5,puVar3,
                                    param_13,param_14);
        uVar7 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
        lVar1 = clients;
        if (pcVar2 != (char *)0x0) {
          for (; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x5c0)) {
            if (param_9 == *(long *)(lVar1 + 0x598)) {
              uVar7 = status_message_set(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,
                                         param_8,lVar1,"Silence in window %d",(ulong)*param_10,
                                         puVar3,param_13,param_14,in_stack_ffffffffffffffd8);
            }
          }
        }
        return 8;
      }
      return 0;
    }
  }
  return 0;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
uint alerts_check_all(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,uint *param_10,undefined8 param_11,ulong param_12,ulong param_13,
                     ulong param_14)

{
  uint uVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  
  uVar1 = alerts_check_bell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            param_10,param_11,param_12,param_13,param_14);
  uVar2 = alerts_check_activity
                    (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9,param_10,extraout_RDX,param_12,param_13,param_14);
  uVar3 = alerts_check_silence
                    (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9,param_10,extraout_RDX_00,param_12,param_13,param_14);
  uVar1 = (uint)uVar3 | uVar1 | (uint)uVar2;
  if (uVar1 == 0) {
    return uVar1;
  }
  alerts_run_hook(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  param_9,(long)param_10,uVar1,param_12,param_13,param_14);
  server_status_session(param_9);
  return uVar1;
}


//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
void alerts_callback(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  uint uVar1;
  uint uVar2;
  uint *puVar3;
  long lVar4;
  uint *puVar5;
  ulong in_RCX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar6;
  undefined8 extraout_RDX_01;
  ulong in_R8;
  ulong in_R9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Db_01;
  
  puVar3 = (uint *)windows_RB_MINMAX(&windows,-1);
  do {
    if (puVar3 == (uint *)0x0) {
      alerts_fired = 0;
      return;
    }
    for (lVar4 = sessions_RB_MINMAX(&sessions,-1); lVar4 != 0; lVar4 = sessions_RB_NEXT(lVar4)) {
      puVar5 = (uint *)winlinks_RB_MINMAX((long *)(lVar4 + 0xf8),-1);
      uVar6 = extraout_RDX;
      uVar7 = extraout_XMM0_Da;
      uVar8 = extraout_XMM0_Db;
      while (puVar5 != (uint *)0x0) {
        while (*(uint **)(puVar5 + 2) != puVar3) {
          puVar5 = (uint *)winlinks_RB_NEXT((long)puVar5);
          uVar6 = extraout_RDX_00;
          uVar7 = extraout_XMM0_Da_00;
          uVar8 = extraout_XMM0_Db_00;
          if (puVar5 == (uint *)0x0) goto LAB_00124dee;
        }
        uVar1 = puVar3[0x60];
        uVar2 = alerts_check_all(CONCAT44(uVar8,uVar7),param_2,param_3,param_4,param_5,param_6,
                                 param_7,param_8,lVar4,puVar5,uVar6,in_RCX,in_R8,in_R9);
        in_RCX = (ulong)*puVar5;
        in_R9 = (ulong)uVar2;
        in_R8 = (ulong)*puVar3;
        log_emit(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "%s:%d @%u alerts check, alerts %#x, flags %#x",*(undefined8 *)(lVar4 + 8),in_RCX,
                 in_R8,in_R9,(char)uVar1);
        puVar5 = (uint *)winlinks_RB_NEXT((long)puVar5);
        uVar6 = extraout_RDX_01;
        uVar7 = extraout_XMM0_Da_02;
        uVar8 = extraout_XMM0_Db_01;
      }
LAB_00124dee:
    }
    puVar3 = (uint *)windows_RB_NEXT((long)puVar3);
  } while( true );
}

//https://github.com/tmate-io/tmate/blob/ac919516f4f1b10ec928e20b3a5034d18f609d68/alerts.c#L32
void alerts_check_session
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,ulong param_13,
               ulong param_14)

{
  undefined8 uVar1;
  undefined8 uVar2;
  uint *puVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  puVar3 = (uint *)winlinks_RB_MINMAX((long *)(param_9 + 0xf8),-1);
  uVar1 = extraout_RDX;
  uVar2 = extraout_XMM0_Qa;
  while (puVar3 != (uint *)0x0) {
    alerts_check_all(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,puVar3,
                     uVar1,param_12,param_13,param_14);
    puVar3 = (uint *)winlinks_RB_NEXT((long)puVar3);
    uVar1 = extraout_RDX_00;
    uVar2 = extraout_XMM0_Qa_00;
  }
  return;
}



void FUN_00124e90(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 char **param_9,long *param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14,undefined param_15)

{
  long lVar1;
  char in_AL;
  int iVar2;
  char *pcVar3;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  char *local_f0;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [24];
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  
  if (in_AL != '\0') {
    local_98._8_8_ = in_XMM0_Qb;
    local_98._0_8_ = param_1;
    local_88._4_12_ = in_register_00001224;
    local_88._0_4_ = param_2;
    local_78._4_12_ = in_register_00001244;
    local_78._0_4_ = param_3;
    local_68._4_12_ = in_register_00001264;
    local_68._0_4_ = param_4;
    local_58._4_12_ = in_register_00001284;
    local_58._0_4_ = param_5;
    local_48._4_12_ = in_register_000012a4;
    local_48._0_4_ = param_6;
    local_38._4_12_ = in_register_000012c4;
    local_38._0_4_ = param_7;
    local_28._4_12_ = in_register_000012e4;
    local_28._0_4_ = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &param_15;
  local_e8 = 0x18;
  local_d8 = local_c8;
  local_e4 = 0x30;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  iVar2 = xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long *)&local_f0,param_11,&local_e8,param_12,param_13,param_14);
  pcVar3 = *param_9;
  lVar1 = *param_10;
  *param_10 = iVar2 + lVar1;
  pcVar3 = (char *)xrealloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                            ,pcVar3,iVar2 + lVar1,extraout_RDX,param_12,param_13,param_14);
  lVar1 = *param_10;
  *param_9 = pcVar3;
  strlcat(pcVar3,local_f0,lVar1);
  free(local_f0);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void args_tree_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_00124f98:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x20);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x28) != 1)) {
        *(undefined4 *)(*param_1 + 0x28) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x20);
      lVar3 = *(long *)(lVar2 + 0x10);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x18);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x28) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x18) == param_2) {
          lVar3 = *(long *)(param_2 + 0x10);
          *(long *)(lVar1 + 0x18) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x20) = lVar2;
            lVar3 = lVar2;
LAB_001251b7:
            *(long *)(lVar3 + 0x10) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x20) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x20);
            *(long *)(param_2 + 0x20) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x10) == lVar1) goto LAB_001251b7;
              *(long *)(lVar3 + 0x18) = param_2;
            }
          }
          *(long *)(param_2 + 0x10) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x10);
          *(long *)(lVar1 + 0x20) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x28) = 0;
        lVar1 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar2 + 0x28) = 1;
        *(long *)(lVar2 + 0x10) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x20) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x20);
        *(long *)(lVar3 + 0x20) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x10) == lVar2) {
          *(long *)(lVar1 + 0x10) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x18) = lVar3;
        }
        *(long *)(lVar3 + 0x18) = lVar2;
        *(long *)(lVar2 + 0x20) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x28) = 0;
        *(undefined4 *)(lVar1 + 0x28) = 0;
        *(undefined4 *)(lVar2 + 0x28) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x28) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x10) == param_2) {
        lVar3 = *(long *)(param_2 + 0x18);
        *(long *)(lVar1 + 0x10) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x20) = lVar2;
          lVar3 = lVar2;
LAB_001250be:
          if (*(long *)(lVar3 + 0x10) == lVar1) {
            *(long *)(lVar3 + 0x10) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x18) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x20) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x20);
          *(long *)(param_2 + 0x20) = lVar3;
          if (lVar3 != 0) goto LAB_001250be;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x18) = lVar1;
        *(long *)(lVar1 + 0x20) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x28) = 0;
      lVar1 = *(long *)(lVar2 + 0x18);
      *(undefined4 *)(lVar2 + 0x28) = 1;
      lVar3 = *(long *)(lVar1 + 0x10);
      *(long *)(lVar2 + 0x18) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x20) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x20);
      *(long *)(lVar1 + 0x20) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x10) == lVar2) {
        *(long *)(lVar3 + 0x10) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x18) = lVar1;
      }
      *(long *)(lVar1 + 0x10) = lVar2;
      *(long *)(lVar2 + 0x20) = lVar1;
      goto LAB_00124f98;
    }
    *(undefined4 *)(lVar3 + 0x28) = 0;
    *(undefined4 *)(lVar1 + 0x28) = 0;
    *(undefined4 *)(lVar2 + 0x28) = 1;
    param_2 = lVar2;
  } while( true );
}



void args_tree_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_00125265(param_1,param_2,param_3);
  return;
}



void FUN_00125265(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x28) != 0)) goto LAB_0012531b;
    if (*param_1 == param_3) goto joined_r0x0012545e;
    lVar2 = *(long *)(param_2 + 0x10);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x28) == 1) {
        lVar1 = *(long *)(lVar2 + 0x18);
        *(undefined4 *)(lVar2 + 0x28) = 0;
        *(undefined4 *)(param_2 + 0x28) = 1;
        *(long *)(param_2 + 0x10) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x20) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x20);
        *(long *)(lVar2 + 0x20) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x20) + 0x10) == param_2) {
          *(long *)(lVar3 + 0x10) = lVar2;
          lVar1 = *(long *)(param_2 + 0x10);
        }
        else {
          *(long *)(lVar3 + 0x18) = lVar2;
        }
        *(long *)(lVar2 + 0x18) = param_2;
        *(long *)(param_2 + 0x20) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x10);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x28) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x18);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x28) == 0)) goto LAB_00125254;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x28) != 0)) goto LAB_00125402;
        lVar2 = *(long *)(lVar3 + 0x10);
        *(undefined4 *)(lVar3 + 0x28) = 0;
        *(undefined4 *)(lVar1 + 0x28) = 1;
        *(long *)(lVar1 + 0x18) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x20) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x20);
        *(long *)(lVar3 + 0x20) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x10) == lVar1) {
          *(long *)(lVar2 + 0x10) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        *(long *)(lVar3 + 0x10) = lVar1;
        *(long *)(lVar1 + 0x20) = lVar3;
        lVar3 = *(long *)(param_2 + 0x10);
        lVar2 = *(long *)(lVar3 + 0x10);
        *(undefined4 *)(lVar3 + 0x28) = *(undefined4 *)(param_2 + 0x28);
        *(undefined4 *)(param_2 + 0x28) = 0;
        if (lVar2 != 0) goto LAB_00125415;
      }
      else {
LAB_00125402:
        lVar3 = *(long *)(param_2 + 0x10);
        *(undefined4 *)(lVar1 + 0x28) = *(undefined4 *)(param_2 + 0x28);
        *(undefined4 *)(param_2 + 0x28) = 0;
LAB_00125415:
        *(undefined4 *)(lVar2 + 0x28) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x18);
      *(long *)(param_2 + 0x10) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x20) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x20);
      *(long *)(lVar3 + 0x20) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x20) + 0x10) == param_2) {
        *(long *)(lVar2 + 0x10) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x18) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x18) = param_2;
      *(long *)(param_2 + 0x20) = lVar3;
      goto joined_r0x0012545e;
    }
    lVar2 = *(long *)(param_2 + 0x18);
    lVar3 = *(long *)(lVar2 + 0x10);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x28) == 1) {
      *(undefined4 *)(lVar2 + 0x28) = 0;
      *(undefined4 *)(param_2 + 0x28) = 1;
      *(long *)(param_2 + 0x18) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x20) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x20);
      *(long *)(lVar2 + 0x20) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x10) == param_2) {
        *(long *)(lVar4 + 0x10) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x18) = lVar2;
        lVar1 = *(long *)(param_2 + 0x18);
      }
      *(long *)(lVar2 + 0x10) = param_2;
      lVar3 = *(long *)(lVar1 + 0x10);
      *(long *)(param_2 + 0x20) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x28) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x18);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x28) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x28) = 0;
        *(undefined4 *)(lVar1 + 0x28) = 1;
        *(long *)(lVar1 + 0x10) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x20) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x20);
        *(long *)(lVar3 + 0x20) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x10) == lVar1) {
          *(long *)(lVar2 + 0x10) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        *(long *)(lVar3 + 0x18) = lVar1;
        lVar4 = *(long *)(param_2 + 0x18);
        *(long *)(lVar1 + 0x20) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x18);
        *(undefined4 *)(lVar4 + 0x28) = *(undefined4 *)(param_2 + 0x28);
        *(undefined4 *)(param_2 + 0x28) = 0;
        if (lVar2 != 0) goto LAB_001252d0;
        goto LAB_001252d7;
      }
LAB_001252bf:
      lVar4 = *(long *)(param_2 + 0x18);
      *(undefined4 *)(lVar1 + 0x28) = *(undefined4 *)(param_2 + 0x28);
      *(undefined4 *)(param_2 + 0x28) = 0;
LAB_001252d0:
      *(undefined4 *)(lVar2 + 0x28) = 0;
LAB_001252d7:
      lVar2 = *(long *)(lVar4 + 0x10);
      *(long *)(param_2 + 0x18) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x20) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x20);
      *(long *)(lVar4 + 0x20) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x10) == param_2) {
        *(long *)(lVar2 + 0x10) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x18) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x10) = param_2;
      *(long *)(param_2 + 0x20) = lVar4;
joined_r0x0012545e:
      if (param_3 == 0) {
        return;
      }
LAB_0012531b:
      *(undefined4 *)(param_3 + 0x28) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x18);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x28) != 0)) goto LAB_001252bf;
LAB_00125254:
    *(undefined4 *)(lVar1 + 0x28) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x20);
  } while( true );
}



long args_tree_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x18);
  if (*(long *)(param_2 + 0x10) == 0) {
    lVar7 = *(long *)(param_2 + 0x20);
    iVar4 = *(int *)(param_2 + 0x28);
    if (lVar6 != 0) goto LAB_0012568c;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x10);
      } while (*(long *)(lVar5 + 0x10) != 0);
      lVar7 = *(long *)(lVar5 + 0x20);
      lVar6 = *(long *)(lVar5 + 0x18);
      iVar4 = *(int *)(lVar5 + 0x28);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x20) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x20);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x10) == lVar5) {
        *(long *)(lVar7 + 0x10) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x18) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x14);
      uVar2 = *(undefined4 *)(param_2 + 0x18);
      uVar3 = *(undefined4 *)(param_2 + 0x1c);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x10) = *(undefined4 *)(param_2 + 0x10);
      *(undefined4 *)(lVar5 + 0x14) = uVar1;
      *(undefined4 *)(lVar5 + 0x18) = uVar2;
      *(undefined4 *)(lVar5 + 0x1c) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x24);
      uVar2 = *(undefined4 *)(param_2 + 0x28);
      uVar3 = *(undefined4 *)(param_2 + 0x2c);
      *(undefined4 *)(lVar5 + 0x20) = *(undefined4 *)(param_2 + 0x20);
      *(undefined4 *)(lVar5 + 0x24) = uVar1;
      *(undefined4 *)(lVar5 + 0x28) = uVar2;
      *(undefined4 *)(lVar5 + 0x2c) = uVar3;
      lVar8 = *(long *)(param_2 + 0x20);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x10) == param_2) {
        *(long *)(lVar8 + 0x10) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x18) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x10) + 0x20) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x18) != 0) {
        *(long *)(*(long *)(param_2 + 0x18) + 0x20) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x20)) {
      }
      goto joined_r0x001256a1;
    }
    lVar7 = *(long *)(param_2 + 0x20);
    iVar4 = *(int *)(param_2 + 0x28);
    lVar6 = *(long *)(param_2 + 0x10);
LAB_0012568c:
    *(long *)(lVar6 + 0x20) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x10) == param_2) {
    *(long *)(lVar7 + 0x10) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x18) = lVar6;
  }
joined_r0x001256a1:
  if (iVar4 == 0) {
    args_tree_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



byte * args_tree_RB_INSERT(byte **param_1,byte *param_2)

{
  byte *pbVar1;
  byte *pbVar2;
  int iVar3;
  
  if (*param_1 == (byte *)0x0) {
    *(undefined8 *)(param_2 + 0x20) = 0;
    *(undefined8 *)(param_2 + 0x18) = 0;
    *(undefined8 *)(param_2 + 0x10) = 0;
    *(undefined4 *)(param_2 + 0x28) = 1;
    *param_1 = param_2;
  }
  else {
    pbVar1 = *param_1;
    do {
      pbVar2 = pbVar1;
      iVar3 = (uint)*param_2 - (uint)*pbVar2;
      if (iVar3 < 0) {
        pbVar1 = *(byte **)(pbVar2 + 0x10);
      }
      else {
        if ((uint)*param_2 == (uint)*pbVar2) {
          return pbVar2;
        }
        pbVar1 = *(byte **)(pbVar2 + 0x18);
      }
    } while (pbVar1 != (byte *)0x0);
    *(byte **)(param_2 + 0x20) = pbVar2;
    *(undefined8 *)(param_2 + 0x18) = 0;
    *(undefined8 *)(param_2 + 0x10) = 0;
    *(undefined4 *)(param_2 + 0x28) = 1;
    if (iVar3 < 0) {
      *(byte **)(pbVar2 + 0x10) = param_2;
    }
    else {
      *(byte **)(pbVar2 + 0x18) = param_2;
    }
  }
  args_tree_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (byte *)0x0;
}



void args_tree_RB_FIND(byte **param_1,byte *param_2)

{
  byte *pbVar1;
  
  pbVar1 = *param_1;
  if (pbVar1 != (byte *)0x0) {
    do {
      while (-1 < (int)((uint)*param_2 - (uint)*pbVar1)) {
        if ((uint)*param_2 == (uint)*pbVar1) {
          return;
        }
        pbVar1 = *(byte **)(pbVar1 + 0x18);
        if (pbVar1 == (byte *)0x0) {
          return;
        }
      }
      pbVar1 = *(byte **)(pbVar1 + 0x10);
    } while (pbVar1 != (byte *)0x0);
  }
  return;
}



byte * args_tree_RB_NFIND(byte **param_1,byte *param_2)

{
  byte *pbVar1;
  byte *pbVar2;
  byte *pbVar3;
  
  if (*param_1 == (byte *)0x0) {
    pbVar3 = (byte *)0x0;
  }
  else {
    pbVar1 = *param_1;
    pbVar3 = (byte *)0x0;
    do {
      while (pbVar2 = pbVar1, (int)((uint)*param_2 - (uint)*pbVar2) < 0) {
        pbVar1 = *(byte **)(pbVar2 + 0x10);
        pbVar3 = pbVar2;
        if (*(byte **)(pbVar2 + 0x10) == (byte *)0x0) {
          return pbVar2;
        }
      }
      if ((uint)*param_2 == (uint)*pbVar2) {
        return pbVar2;
      }
      pbVar1 = *(byte **)(pbVar2 + 0x18);
    } while (*(byte **)(pbVar2 + 0x18) != (byte *)0x0);
  }
  return pbVar3;
}



long args_tree_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x18);
  if (*(long *)(param_1 + 0x18) == 0) {
    lVar2 = *(long *)(param_1 + 0x20);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x10) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x18))) {
      while (lVar1 = *(long *)(lVar2 + 0x20), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x18);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x10);
    } while (*(long *)(lVar2 + 0x10) != 0);
  }
  return lVar2;
}



long args_tree_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x10);
  if (*(long *)(param_1 + 0x10) == 0) {
    lVar2 = *(long *)(param_1 + 0x20);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x18) != param_1)) &&
       (*(long *)(lVar2 + 0x10) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x20), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x10) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x18);
    } while (*(long *)(lVar2 + 0x18) != 0);
  }
  return lVar2;
}



long args_tree_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x18);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x10);
    }
  }
  return lVar2;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
int args_cmp(byte *param_1,byte *param_2)

{
  return (uint)*param_1 - (uint)*param_2;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
long args_create(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                int param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14,undefined8 param_15,undefined param_16)

{
  long lVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 extraout_RAX;
  ulong uVar5;
  char **ppcVar6;
  long lVar7;
  undefined8 uVar8;
  undefined8 *puVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar10;
  undefined auVar11 [16];
  uint local_78;
  char **local_70;
  char *local_58 [4];
  undefined8 local_38;
  undefined8 local_30;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  local_58[1] = (char *)param_10;
  local_58[2] = (char *)param_11;
  local_58[3] = (char *)param_12;
  local_38 = param_13;
  local_30 = param_14;
  auVar11 = xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x18,param_11,
                    param_12,param_13,param_14);
  lVar3 = auVar11._0_8_;
  *(int *)(lVar3 + 8) = param_9;
  if (param_9 == 0) {
    *(undefined8 *)(lVar3 + 0x10) = 0;
  }
  else {
    uVar8 = 8;
    uVar4 = xcalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    (long)param_9,8,auVar11._8_8_,param_12,param_13,param_14);
    uVar10 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00);
    local_78 = 8;
    *(undefined8 *)(lVar3 + 0x10) = uVar4;
    local_70 = (char **)&param_15;
    if (0 < param_9) {
      lVar7 = 0;
      do {
        uVar5 = (ulong)local_78;
        if (local_78 < 0x30) {
          local_78 = local_78 + 8;
          ppcVar6 = (char **)((long)local_58 + uVar5);
        }
        else {
          ppcVar6 = local_70;
          local_70 = local_70 + 1;
        }
        lVar2 = *(long *)(lVar3 + 0x10);
        uVar10 = xstrdup(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*ppcVar6,
                         uVar8,ppcVar6,param_12,param_13,param_14);
        puVar9 = (undefined8 *)(lVar2 + lVar7);
        lVar7 = lVar7 + 8;
        *puVar9 = extraout_RAX;
      } while (lVar7 != (ulong)(param_9 - 1) * 8 + 8);
    }
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
void args_find(byte **param_1,byte param_2)

{
  byte *pbVar1;
  
  pbVar1 = *param_1;
  do {
    if (pbVar1 == (byte *)0x0) {
      return;
    }
    while (-1 < (int)((uint)param_2 - (uint)*pbVar1)) {
      if ((uint)param_2 == (uint)*pbVar1) {
        return;
      }
      pbVar1 = *(byte **)(pbVar1 + 0x18);
      if (pbVar1 == (byte *)0x0) {
        return;
      }
    }
    pbVar1 = *(byte **)(pbVar1 + 0x10);
  } while( true );
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
void args_free(void **param_1)

{
  void *pvVar1;
  void *__ptr;
  
  cmd_free_argv(*(int *)(param_1 + 1),(void **)param_1[2]);
  pvVar1 = *param_1;
  if (*param_1 != (void *)0x0) {
    do {
      __ptr = pvVar1;
      pvVar1 = *(void **)((long)__ptr + 0x10);
    } while (pvVar1 != (void *)0x0);
    do {
      pvVar1 = (void *)args_tree_RB_NEXT((long)__ptr);
      args_tree_RB_REMOVE((long *)param_1,(long)__ptr);
      free(*(void **)((long)__ptr + 8));
      free(__ptr);
      __ptr = pvVar1;
    } while (pvVar1 != (void *)0x0);
  }
  free(param_1);
  return;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
char * args_print(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 byte **param_9,undefined8 param_10,undefined8 param_11,char *param_12,
                 undefined8 param_13,undefined8 param_14)

{
  byte *pbVar1;
  char *pcVar2;
  byte *pbVar3;
  char *pcVar4;
  char *pcVar5;
  long lVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Db_04;
  undefined8 uVar8;
  undefined in_stack_ffffffffffffffa8;
  long local_50;
  char *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_50 = 1;
  pcVar2 = (char *)xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,1,
                           param_11,param_12,param_13,param_14);
  pbVar1 = *param_9;
  uVar7 = extraout_XMM0_Da;
  uVar9 = extraout_XMM0_Db;
  local_48 = pcVar2;
  if (*param_9 != (byte *)0x0) {
    do {
      pbVar3 = pbVar1;
      pbVar1 = *(byte **)(pbVar3 + 0x10);
    } while (*(byte **)(pbVar3 + 0x10) != (byte *)0x0);
    do {
      while (uVar8 = CONCAT44(uVar9,uVar7), *(long *)(pbVar3 + 8) == 0) {
        if (*pcVar2 == '\0') {
          uVar8 = FUN_00124e90(CONCAT44(uVar9,uVar7),param_2,param_3,param_4,param_5,param_6,param_7
                               ,param_8,&local_48,&local_50,&DAT_0017ca8a,param_12,param_13,pcVar2,
                               in_stack_ffffffffffffffa8);
        }
        param_12 = (char *)(ulong)*pbVar3;
        FUN_00124e90(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_48,
                     &local_50,&DAT_00179c56,param_12,param_13,pcVar2,in_stack_ffffffffffffffa8);
        pcVar2 = local_48;
        pbVar3 = (byte *)args_tree_RB_NEXT((long)pbVar3);
        uVar7 = extraout_XMM0_Da_01;
        uVar9 = extraout_XMM0_Db_01;
        if (pbVar3 == (byte *)0x0) goto LAB_00125c03;
      }
      pbVar3 = (byte *)args_tree_RB_NEXT((long)pbVar3);
      uVar7 = extraout_XMM0_Da_00;
      uVar9 = extraout_XMM0_Db_00;
    } while (pbVar3 != (byte *)0x0);
LAB_00125c03:
    pbVar1 = *param_9;
    if (*param_9 != (byte *)0x0) {
      do {
        pbVar3 = pbVar1;
        pbVar1 = *(byte **)(pbVar3 + 0x10);
      } while (*(byte **)(pbVar3 + 0x10) != (byte *)0x0);
      do {
        if (*(long *)(pbVar3 + 8) != 0) {
          if (*pcVar2 == '\0') {
            FUN_00124e90(CONCAT44(uVar9,uVar7),param_2,param_3,param_4,param_5,param_6,param_7,
                         param_8,&local_48,&local_50,&DAT_00177187,(ulong)*pbVar3,param_13,pcVar2,
                         in_stack_ffffffffffffffa8);
          }
          else {
            FUN_00124e90(CONCAT44(uVar9,uVar7),param_2,param_3,param_4,param_5,param_6,param_7,
                         param_8,&local_48,&local_50,&DAT_00177186,(ulong)*pbVar3,param_13,pcVar2,
                         in_stack_ffffffffffffffa8);
          }
          param_12 = *(char **)(pbVar3 + 8);
          pcVar4 = strchr(param_12,0x20);
          pcVar5 = "\"%s\"";
          if (pcVar4 == (char *)0x0) {
            pcVar5 = "%s";
          }
          FUN_00124e90(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,&local_48,&local_50,pcVar5,param_12,param_13,
                       pcVar2,in_stack_ffffffffffffffa8);
          pcVar2 = local_48;
        }
        pbVar3 = (byte *)args_tree_RB_NEXT((long)pbVar3);
        uVar7 = extraout_XMM0_Da_03;
        uVar9 = extraout_XMM0_Db_03;
      } while (pbVar3 != (byte *)0x0);
    }
  }
  uVar8 = CONCAT44(uVar9,uVar7);
  if (0 < *(int *)(param_9 + 1)) {
    lVar6 = 0;
    do {
      while( true ) {
        if (*pcVar2 != '\0') {
          FUN_00124e90(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_48,
                       &local_50,&DAT_00178815,param_12,param_13,pcVar2,in_stack_ffffffffffffffa8);
        }
        param_12 = *(char **)(param_9[2] + lVar6 * 8);
        pcVar4 = strchr(param_12,0x20);
        if (pcVar4 == (char *)0x0) break;
        uVar8 = FUN_00124e90(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,param_3,
                             param_4,param_5,param_6,param_7,param_8,&local_48,&local_50,
                             &DAT_0017b5d5,param_12,param_13,pcVar2,in_stack_ffffffffffffffa8);
        lVar6 = lVar6 + 1;
        pcVar2 = local_48;
        if (*(int *)(param_9 + 1) <= (int)lVar6) goto LAB_00125d72;
      }
      uVar8 = FUN_00124e90(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,param_3,param_4
                           ,param_5,param_6,param_7,param_8,&local_48,&local_50,"%s",param_12,
                           param_13,pcVar2,in_stack_ffffffffffffffa8);
      lVar6 = lVar6 + 1;
      pcVar2 = local_48;
    } while ((int)lVar6 < *(int *)(param_9 + 1));
  }
LAB_00125d72:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return pcVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
undefined8 args_has(byte **param_1,byte param_2)

{
  byte *pbVar1;
  
  pbVar1 = *param_1;
  if (pbVar1 == (byte *)0x0) {
    return 0;
  }
  while( true ) {
    while ((int)((uint)param_2 - (uint)*pbVar1) < 0) {
      pbVar1 = *(byte **)(pbVar1 + 0x10);
      if (pbVar1 == (byte *)0x0) {
        return 0;
      }
    }
    if ((uint)param_2 == (uint)*pbVar1) break;
    pbVar1 = *(byte **)(pbVar1 + 0x18);
    if (pbVar1 == (byte *)0x0) {
      return 0;
    }
  }
  return 1;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
void args_set(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             byte **param_9,byte *param_10,char *param_11,ulong param_12,undefined8 param_13,
             undefined8 param_14)

{
  byte *pbVar1;
  undefined8 extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar2;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar3;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar4;
  
  pbVar1 = *param_9;
  if (pbVar1 != (byte *)0x0) {
    param_12 = (ulong)param_10 & 0xff;
    do {
      while ((int)((uint)param_12 - (uint)*pbVar1) < 0) {
        pbVar1 = *(byte **)(pbVar1 + 0x10);
        if (pbVar1 == (byte *)0x0) goto LAB_00125e43;
      }
      if ((uint)param_12 == (uint)*pbVar1) {
        free(*(void **)(pbVar1 + 8));
        *(undefined8 *)(pbVar1 + 8) = 0;
        uVar2 = extraout_RDX_00;
        uVar3 = extraout_XMM0_Da_00;
        uVar4 = extraout_XMM0_Db_00;
        goto LAB_00125e79;
      }
      pbVar1 = *(byte **)(pbVar1 + 0x18);
    } while (pbVar1 != (byte *)0x0);
  }
LAB_00125e43:
  pbVar1 = (byte *)xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x30,
                           param_11,param_12,param_13,param_14);
  *pbVar1 = (byte)param_10;
  param_10 = pbVar1;
  args_tree_RB_INSERT(param_9,pbVar1);
  uVar2 = extraout_RDX;
  uVar3 = extraout_XMM0_Da;
  uVar4 = extraout_XMM0_Db;
LAB_00125e79:
  if (param_11 != (char *)0x0) {
    xstrdup(CONCAT44(uVar4,uVar3),param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
            param_10,uVar2,param_12,param_13,param_14);
    *(undefined8 *)(pbVar1 + 8) = extraout_RAX;
  }
  return;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
byte ** args_parse(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  char *param_9,int param_10,long param_11,ulong param_12,undefined8 param_13,
                  undefined8 param_14)

{
  uint __c;
  byte **ppbVar1;
  char *pcVar2;
  long lVar3;
  byte *pbVar4;
  undefined8 extraout_RDX;
  int iVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  
  ppbVar1 = (byte **)xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x18,
                             param_11,param_12,param_13,param_14);
  BSDoptreset = 1;
  BSDoptind = 1;
  while( true ) {
    do {
      __c = BSDgetopt(param_10,param_11,param_9);
      if (__c == 0xffffffff) {
        lVar3 = (long)BSDoptind;
        iVar5 = param_10 - BSDoptind;
        *(int *)(ppbVar1 + 1) = iVar5;
        pbVar4 = (byte *)cmd_copy_argv(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,
                                       param_7,param_8,iVar5,param_11 + lVar3 * 8,extraout_RDX,
                                       param_12,param_13,param_14);
        ppbVar1[2] = pbVar4;
        return ppbVar1;
      }
    } while ((int)__c < 0);
    if (__c == 0x3f) break;
    pcVar2 = strchr(param_9,__c);
    if (pcVar2 == (char *)0x0) break;
    args_set(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppbVar1,
             (byte *)(ulong)(__c & 0xff),BSDoptarg,param_12,param_13,param_14);
  }
  args_free(ppbVar1);
  return (byte **)0x0;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
undefined8 args_get(byte **param_1,byte param_2)

{
  byte *pbVar1;
  
  pbVar1 = *param_1;
  if (pbVar1 == (byte *)0x0) {
    return 0;
  }
  while( true ) {
    while ((int)((uint)param_2 - (uint)*pbVar1) < 0) {
      pbVar1 = *(byte **)(pbVar1 + 0x10);
      if (pbVar1 == (byte *)0x0) {
        return 0;
      }
    }
    if ((uint)param_2 == (uint)*pbVar1) break;
    pbVar1 = *(byte **)(pbVar1 + 0x18);
    if (pbVar1 == (byte *)0x0) {
      return 0;
    }
  }
  return *(undefined8 *)(pbVar1 + 8);
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/arguments.c#L892
longlong args_strtonum(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      byte **param_9,undefined *param_10,undefined *param_11,undefined *param_12,
                      undefined8 *param_13,undefined *param_14)

{
  byte bVar1;
  undefined *puVar2;
  byte *pbVar3;
  undefined8 uVar4;
  longlong lVar5;
  char **ppcVar6;
  undefined *puVar7;
  undefined *extraout_RDX;
  undefined *puVar8;
  undefined8 *puVar9;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  char *local_18;
  long local_10;
  
  ppcVar6 = &local_18;
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  pbVar3 = *param_9;
  puVar2 = param_12;
  puVar7 = param_11;
  puVar8 = param_10;
  puVar9 = param_13;
  if (pbVar3 != (byte *)0x0) {
    puVar8 = (undefined *)((ulong)param_10 & 0xff);
    do {
      while( true ) {
        bVar1 = *pbVar3;
        puVar2 = (undefined *)(ulong)bVar1;
        puVar7 = param_12;
        param_14 = param_11;
        if (-1 < (int)((uint)puVar8 - (uint)bVar1)) break;
        pbVar3 = *(byte **)(pbVar3 + 0x10);
        if (pbVar3 == (byte *)0x0) goto LAB_00125ffb;
      }
      if ((uint)puVar8 == (uint)bVar1) {
        lVar5 = strtonum(*(char **)(pbVar3 + 8),(long)param_11,(long)param_12,&local_18);
        puVar7 = extraout_RDX;
        param_1 = extraout_XMM0_Qa;
        if (local_18 != (char *)0x0) goto LAB_00126002;
        *param_13 = 0;
        goto LAB_0012602f;
      }
      pbVar3 = *(byte **)(pbVar3 + 0x18);
    } while (pbVar3 != (byte *)0x0);
  }
LAB_00125ffb:
  param_11 = puVar8;
  ppcVar6 = (char **)puVar2;
  local_18 = "missing";
LAB_00126002:
  uVar4 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_18,param_11,
                  puVar7,ppcVar6,puVar9,param_14);
  *param_13 = uVar4;
  lVar5 = 0;
LAB_0012602f:
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/attributes.c#L56
undefined *
attributes_tostring(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   byte param_9)

{
  int iVar1;
  char *pcVar2;
  undefined uVar3;
  undefined *puVar4;
  char *pcVar5;
  
  if (param_9 != 0) {
    pcVar2 = "";
    uVar3 = 0xa6;
    if ((param_9 & 8) == 0) {
      uVar3 = 0xc0;
    }
    pcVar5 = "underscore,";
    if ((param_9 & 4) == 0) {
      pcVar5 = "";
    }
    puVar4 = &DAT_001771b9;
    if ((param_9 & 2) == 0) {
      puVar4 = &DAT_001816c0;
    }
    if ((param_9 & 1) != 0) {
      pcVar2 = "bright,";
    }
    iVar1 = xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_0019e7c0,
                      0x80,"%s%s%s%s%s%s%s",pcVar2,puVar4,pcVar5,uVar3);
    if ((long)iVar1 != 0) {
      (&DAT_0019e7bf)[iVar1] = 0;
    }
    return &DAT_0019e7c0;
  }
  return "none";
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/attributes.c#L56
uint attributes_fromstring(char *param_1)

{
  uint uVar1;
  int iVar2;
  size_t sVar3;
  size_t sVar4;
  char *pcVar5;
  long in_FS_OFFSET;
  undefined4 local_44;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_44 = 0x7c2c20;
  if (*param_1 != '\0') {
    sVar3 = strcspn(param_1,(char *)&local_44);
    if (sVar3 != 0) {
      sVar4 = strlen(param_1);
      pcVar5 = strchr((char *)&local_44,(int)param_1[sVar4 - 1]);
      if (pcVar5 == (char *)0x0) {
        uVar1 = strcasecmp(param_1,"default");
        if ((uVar1 != 0) && (uVar1 = strcasecmp(param_1,"none"), uVar1 != 0)) {
          uVar1 = 0;
          do {
            if (sVar3 == 6) {
              iVar2 = strncasecmp(param_1,"bright",6);
              if (iVar2 == 0) {
LAB_001262d8:
                uVar1 = uVar1 | 1;
              }
              else {
                iVar2 = strncasecmp(param_1,"hidden",6);
                if (iVar2 != 0) goto LAB_001262ac;
                uVar1 = uVar1 | 0x20;
              }
            }
            else {
              if (sVar3 == 4) {
                iVar2 = strncasecmp(param_1,"bold",4);
                if (iVar2 == 0) goto LAB_001262d8;
                goto LAB_001262ac;
              }
              if (sVar3 == 3) {
                iVar2 = strncasecmp(param_1,"dim",3);
                if (iVar2 != 0) goto LAB_001262ac;
                uVar1 = uVar1 | 2;
              }
              else if (sVar3 == 10) {
                iVar2 = strncasecmp(param_1,"underscore",10);
                if (iVar2 != 0) goto LAB_001262ac;
                uVar1 = uVar1 | 4;
              }
              else if (sVar3 == 5) {
                iVar2 = strncasecmp(param_1,"blink",5);
                if (iVar2 != 0) goto LAB_001262ac;
                uVar1 = uVar1 | 8;
              }
              else {
                if (sVar3 != 7) goto LAB_001262ac;
                iVar2 = strncasecmp(param_1,"reverse",7);
                if (iVar2 == 0) {
                  uVar1 = uVar1 | 0x10;
                }
                else {
                  iVar2 = strncasecmp(param_1,"italics",7);
                  if (iVar2 != 0) goto LAB_001262ac;
                  uVar1 = uVar1 | 0x40;
                }
              }
            }
            sVar4 = strspn(param_1 + sVar3,(char *)&local_44);
            param_1 = param_1 + sVar3 + sVar4;
            if (*param_1 == '\0') break;
            sVar3 = strcspn(param_1,(char *)&local_44);
          } while( true );
        }
        goto LAB_001262b1;
      }
    }
  }
LAB_001262ac:
  uVar1 = 0xffffffff;
LAB_001262b1:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar1;
}



void FUN_00126380(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,size_t param_14)

{
  uint *puVar1;
  undefined8 extraout_RDX;
  uint uVar2;
  ulong uVar3;
  undefined1 *puVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined8 uVar5;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffd8;
  
  puVar4 = window_copy_mode;
  puVar1 = *(uint **)(*(long *)(*(long *)(param_9 + 0xe0) + 8) + 0x138);
  window_pane_set_mode((long)puVar1,(undefined **)window_copy_mode);
  uVar5 = window_copy_init_for_output
                    (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long)puVar1,puVar4,extraout_RDX,param_12,param_13,param_14);
  if (cfg_ncauses != 0) {
    uVar2 = 0;
    do {
      uVar3 = (ulong)uVar2;
      uVar2 = uVar2 + 1;
      window_copy_add(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar1,"%s",
                      *(undefined8 *)((long)cfg_causes + uVar3 * 8),param_12,param_13,param_14,
                      in_stack_ffffffffffffffd8);
      free(*(void **)((long)cfg_causes + uVar3 * 8));
      uVar5 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00);
    } while (uVar2 < cfg_ncauses);
  }
  free(cfg_causes);
  cfg_causes = (void *)0x0;
  cfg_ncauses = 0;
  return;
}



void cfg_default_done(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     undefined8 param_9,undefined8 param_10,undefined8 param_11,char *param_12,
                     undefined8 param_13,size_t param_14)

{
  long lVar1;
  undefined8 extraout_RDX;
  undefined8 unaff_RBX;
  ulong uVar2;
  undefined8 uVar3;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  cfg_references = cfg_references + -1;
  if (cfg_references != 0) {
    return;
  }
  cfg_finished = 1;
  uVar3 = tmate_load_cli_options(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  uVar4 = tmate_session_start(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                              param_10,extraout_RDX,param_12,param_13,param_14);
  if ((tmate_foreground != 0) && (param_12 = (char *)(ulong)cfg_ncauses, cfg_ncauses != 0)) {
    uVar2 = 0;
    while( true ) {
      if (cfg_ncauses <= (uint)uVar2) break;
      log_emit(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,"%s",
               *(undefined8 *)((long)cfg_causes + uVar2 * 8),param_12,param_13,param_14,
               (char)unaff_RBX);
      free(*(void **)((long)cfg_causes + uVar2 * 8));
      uVar2 = (ulong)((uint)uVar2 + 1);
      uVar4 = extraout_XMM0_Da_02;
    }
    free(cfg_causes);
    cfg_causes = (void *)0x0;
    cfg_ncauses = 0;
                    // WARNING: Subroutine does not return
    exit(1);
  }
  if (sessions != 0) {
    uVar3 = 0xffffffff;
    lVar1 = sessions_RB_MINMAX(&sessions,-1);
    if ((lVar1 != 0) && (cfg_ncauses != 0)) {
      FUN_00126380(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,lVar1,uVar3,(ulong)cfg_ncauses,param_12,param_13,param_14
                  );
    }
  }
  cmdq_free(cfg_cmd_q);
  cfg_cmd_q = (int *)0x0;
  if (cfg_client != 0) {
    uVar4 = extraout_XMM0_Da_00;
    if (*(long *)(*(int **)(cfg_client + 0x5b0) + 6) != 0) {
      cmdq_continue(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,*(int **)(cfg_client + 0x5b0));
      uVar4 = extraout_XMM0_Da_01;
    }
    server_client_unref(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,cfg_client);
    cfg_client = 0;
  }
  return;
}



void set_cfg_file(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 char *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  free(cfg_file);
  cfg_file = (void *)xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,param_9,param_10,extraout_RDX,param_12,param_13,param_14);
  return;
}



void cfg_add_cause(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14,undefined param_15)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined4 uVar1;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  long local_e0;
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [8];
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._8_8_ = in_XMM0_Qb;
    local_88._0_8_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_d8 = 8;
  local_c8 = local_b8;
  local_d4 = 0x30;
  local_b0 = param_10;
  local_a8 = param_11;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  uVar1 = xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_e0,
                     param_9,&local_d8,param_12,param_13,param_14);
  cfg_ncauses = cfg_ncauses + 1;
  cfg_causes = xreallocarray(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             cfg_causes,(ulong)cfg_ncauses,8,param_12,param_13,param_14);
  *(long *)(cfg_causes + (ulong)(cfg_ncauses - 1) * 8) = local_e0;
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int load_cfg(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
            char *param_9,long param_10,long *param_11,undefined8 param_12,undefined8 param_13,
            undefined8 param_14)

{
  int iVar1;
  FILE *__stream;
  uint *__ptr;
  ushort **ppuVar2;
  int *piVar3;
  char *pcVar4;
  byte *pbVar5;
  uint *puVar6;
  undefined8 uVar7;
  void **ppvVar8;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined in_stack_ffffffffffffff88;
  int local_74;
  ulong local_60;
  void *local_58;
  int *local_50;
  undefined2 local_43;
  undefined local_41;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_43 = 0x5c5c;
  local_41 = 0;
  local_60 = 0;
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"loading %s",param_9,
           param_12,param_13,param_14,in_stack_ffffffffffffff88);
  __stream = fopen(param_9,"rb");
  if (__stream == (FILE *)0x0) {
    piVar3 = __errno_location();
    pcVar4 = strerror(*piVar3);
    xasprintf(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,param_11,"%s: %s",param_9,pcVar4,param_13,param_14,
              in_stack_ffffffffffffff88);
    local_74 = -1;
  }
  else {
    local_74 = 0;
    while( true ) {
      uVar7 = 0;
      __ptr = fparseln(__stream,(long *)0x0,(long *)&local_60,(char *)&local_43,0);
      if (__ptr == (uint *)0x0) break;
      log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: %s",
               param_9,__ptr,uVar7,param_14,in_stack_ffffffffffffff88);
      ppuVar2 = __ctype_b_loc();
      puVar6 = __ptr;
      while ((*(byte *)((long)*ppuVar2 + (ulong)*(byte *)puVar6 * 2 + 1) & 0x20) != 0) {
        puVar6 = (uint *)((long)puVar6 + 1);
      }
      if (*(byte *)puVar6 == 0) {
        free(__ptr);
      }
      else {
        pbVar5 = (byte *)(local_60 & 0xffffffff);
        ppvVar8 = &local_58;
        iVar1 = cmd_string_parse(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,
                                 param_4,param_5,param_6,param_7,param_8,(char *)puVar6,&local_50,
                                 param_9,pbVar5,(long *)&local_58,param_14);
        if (iVar1 == 0) {
          free(__ptr);
          if (local_50 != (int *)0x0) {
            cmdq_append(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        param_10,local_50,(undefined4 *)0x0,pbVar5,ppvVar8,param_14);
            cmd_list_free(local_50);
            local_74 = local_74 + 1;
          }
        }
        else {
          free(__ptr);
          if (local_58 != (void *)0x0) {
            cfg_add_cause(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,"%s:%zu: %s",param_9,local_60,local_58,
                          ppvVar8,param_14,in_stack_ffffffffffffff88);
            free(local_58);
          }
        }
      }
    }
    fclose(__stream);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_74;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void start_cfg(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
              undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int iVar2;
  int *piVar3;
  char *pcVar4;
  long lVar5;
  code *pcVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  void *__ptr;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  __ptr = (void *)0x0;
  cfg_cmd_q = cmdq_new(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,param_10,
                       param_11,param_12,param_13,param_14);
  pcVar6 = cfg_default_done;
  cfg_finished = 0;
  cfg_cmd_q[0x23] = cfg_default_done;
  cfg_references = 1;
  cfg_client = clients;
  if (clients != 0) {
    *(int *)(clients + 0x5b8) = *(int *)(clients + 0x5b8) + 1;
  }
  iVar2 = access("/etc/tmux.conf",4);
  if (iVar2 == 0) {
    iVar2 = load_cfg(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "/etc/tmux.conf",(long)cfg_cmd_q,(long *)&stack0xffffffffffffffe8,pcVar6,
                     param_13,param_14);
    uVar7 = extraout_XMM0_Da_07;
    if (iVar2 == -1) {
      uVar7 = cfg_add_cause(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_07),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,"%s: %s","/etc/tmux.conf",__ptr,
                            pcVar6,param_13,param_14,(char)__ptr);
    }
  }
  else {
    piVar3 = __errno_location();
    uVar7 = extraout_XMM0_Da_00;
    if (*piVar3 != 2) {
      pcVar4 = strerror(*piVar3);
      uVar7 = cfg_add_cause(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,"%s: %s","/etc/tmux.conf",pcVar4
                            ,pcVar6,param_13,param_14,(char)__ptr);
    }
  }
  if (cfg_file == (char *)0x0) {
    lVar5 = find_home();
    uVar7 = extraout_XMM0_Da_04;
    if (lVar5 != 0) {
      xasprintf(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_04),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,(long *)&cfg_file,"%s/.tmate.conf",lVar5,pcVar6,param_13,
                param_14,(char)__ptr);
      iVar2 = access(cfg_file,4);
      uVar7 = extraout_XMM0_Da_05;
      if ((iVar2 != 0) && (piVar3 = __errno_location(), uVar7 = extraout_XMM0_Da_06, *piVar3 == 2))
      {
        free(cfg_file);
        cfg_file = (char *)0x0;
        goto LAB_00126953;
      }
    }
    if (cfg_file == (char *)0x0) goto LAB_00126953;
  }
  iVar2 = load_cfg(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,cfg_file,
                   (long)cfg_cmd_q,(long *)&stack0xffffffffffffffe8,pcVar6,param_13,param_14);
  if (iVar2 == -1) {
    cfg_add_cause(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,"%s: %s",cfg_file,__ptr,pcVar6,param_13,param_14,
                  (char)__ptr);
  }
LAB_00126953:
  free(__ptr);
  cmdq_continue(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,(int *)cfg_cmd_q);
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cfg_print_causes(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                     undefined8 param_13,size_t param_14)

{
  uint uVar1;
  ulong uVar2;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffffd8;
  
  if (cfg_ncauses != 0) {
    uVar1 = 0;
    do {
      uVar2 = (ulong)uVar1;
      uVar1 = uVar1 + 1;
      cmdq_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,"%s",
                 *(undefined8 *)((long)cfg_causes + uVar2 * 8),param_12,param_13,param_14,
                 in_stack_ffffffffffffffd8);
      free(*(void **)((long)cfg_causes + uVar2 * 8));
      param_1 = extraout_XMM0_Qa;
    } while (uVar1 < cfg_ncauses);
  }
  free(cfg_causes);
  cfg_causes = (void *)0x0;
  cfg_ncauses = 0;
  return;
}



void cfg_show_causes(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                    undefined8 param_13,size_t param_14)

{
  if ((param_9 != 0) && (cfg_ncauses != 0)) {
    FUN_00126380(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                 param_11,param_12,param_13,param_14);
    return;
  }
  return;
}



void FUN_00126b50(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  undefined1 in_stack_00000008;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,"%s",param_9,param_12,
           param_13,param_14,in_stack_00000008);
  return;
}



void client_stdin_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  int *piVar1;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar2;
  ssize_t local_2018;
  undefined local_2010 [8192];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_2018 = read(0,local_2010,0x2000);
  uVar2 = extraout_XMM0_Da;
  if (local_2018 < 0) {
    piVar1 = __errno_location();
    if ((*piVar1 == 4) || (uVar2 = extraout_XMM0_Da_00, *piVar1 == 0xb)) goto LAB_00126bf4;
  }
  proc_send(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,0xd4,
            0xffffffff,&local_2018,0x2008,in_R9);
  if (local_2018 < 1) {
    event_del(client_stdin);
  }
LAB_00126bf4:
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void client_signal(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  int param_9)

{
  int iVar1;
  long lVar2;
  undefined8 extraout_RDX;
  sigaction *__act;
  sigaction *psVar3;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined in_stack_ffffffffffffff48;
  int local_ac;
  sigaction local_a8;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_9 == 0x11) {
    waitpid(-1,&local_ac,1);
  }
  else if (client_attached == 0) {
    if (param_9 == 0xf) {
      proc_exit(client_proc);
    }
  }
  else if (param_9 == 0x12) {
    __act = &local_a8;
    psVar3 = __act;
    for (lVar2 = 0x13; lVar2 != 0; lVar2 = lVar2 + -1) {
      (psVar3->__sigaction_handler).sa_handler = (__sighandler_t)0x0;
      psVar3 = (sigaction *)&psVar3->sa_mask;
    }
    sigemptyset(&local_a8.sa_mask);
    local_a8.sa_flags = 0x10000000;
    local_a8.__sigaction_handler = (_union_1457)0x1;
    iVar1 = sigaction(0x14,__act,(sigaction *)0x0);
    if (iVar1 != 0) {
                    // WARNING: Subroutine does not return
      fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
            "sigaction failed",__act,extraout_RDX,lVar2,in_R8,in_R9,in_stack_ffffffffffffff48);
    }
    proc_send(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,
              0xd8,0xffffffff,(void *)0x0,0,in_R9);
  }
  else if (param_9 < 0x13) {
    if (param_9 == 1) {
      client_exitreason = 3;
    }
    else {
      if (param_9 != 0xf) goto LAB_00126cb5;
      client_exitreason = 4;
    }
    client_exitval = 1;
    proc_send(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,0xcd,
              0xffffffff,(void *)0x0,0,in_R9);
  }
  else if (param_9 == 0x1c) {
    proc_send(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,0xd0,
              0xffffffff,(void *)0x0,0,in_R9);
  }
LAB_00126cb5:
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int client_get_lock(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   char *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  int __fd;
  int iVar1;
  int *piVar2;
  char *pcVar3;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined in_stack_ffffffffffffffe8;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"lock file is %s",
           param_9,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
  __fd = open(param_9,0x41,0x180);
  if (__fd == -1) {
    piVar2 = __errno_location();
    pcVar3 = strerror(*piVar2);
    log_emit(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "open failed: %s",pcVar3,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
  }
  else {
    iVar1 = flock(__fd,6);
    if (iVar1 == -1) {
      piVar2 = __errno_location();
      pcVar3 = strerror(*piVar2);
      log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "flock failed: %s",pcVar3,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
      if (*piVar2 != 0xb) {
        return __fd;
      }
      do {
        iVar1 = flock(__fd,2);
        if (iVar1 != -1) break;
      } while (*piVar2 == 4);
      close(__fd);
      __fd = -2;
    }
    else {
      log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "flock succeeded",extraout_RDX,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
    }
  }
  return __fd;
}



uint client_connect(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   ulong *param_9,char *param_10,int param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  bool bVar1;
  uint __fd;
  int iVar2;
  uint __fd_00;
  uint uVar3;
  char *pcVar4;
  int *piVar5;
  long lVar6;
  undefined8 uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  sockaddr *psVar8;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar10;
  undefined in_stack_ffffffffffffff18;
  char *local_c0;
  sockaddr local_b8 [7];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_c0 = (char *)0x0;
  psVar8 = local_b8;
  for (lVar6 = 0xd; lVar6 != 0; lVar6 = lVar6 + -1) {
    psVar8->sa_family = 0;
    psVar8->sa_data[0] = '\0';
    psVar8->sa_data[1] = '\0';
    psVar8->sa_data[2] = '\0';
    psVar8->sa_data[3] = '\0';
    psVar8->sa_data[4] = '\0';
    psVar8->sa_data[5] = '\0';
    psVar8 = (sockaddr *)(psVar8->sa_data + 6);
  }
  uVar7 = 1;
  local_b8[0].sa_family = 1;
  *(undefined2 *)(psVar8->sa_data + 2) = 0;
  psVar8->sa_family = 0;
  psVar8->sa_data[0] = '\0';
  psVar8->sa_data[1] = '\0';
  pcVar4 = strlcpy(local_b8[0].sa_data,param_10,0x6c);
  if ((char *)0x6b < pcVar4) {
    piVar5 = __errno_location();
    uVar3 = 0xffffffff;
    *piVar5 = 0x24;
LAB_00127094:
    if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    return uVar3;
  }
  bVar1 = false;
  __fd_00 = 0xffffffff;
  log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"socket is %s"
           ,param_10,uVar7,param_13,param_14,in_stack_ffffffffffffff18);
LAB_00126f68:
  __fd = socket(1,1,0);
  uVar3 = __fd;
  if (__fd != 0xffffffff) {
    log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "trying connect",extraout_RDX,uVar7,param_13,param_14,in_stack_ffffffffffffff18);
    iVar2 = connect(__fd,local_b8,0x6e);
    if (iVar2 == -1) {
      piVar5 = __errno_location();
      pcVar4 = strerror(*piVar5);
      log_emit(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "connect failed: %s",pcVar4,uVar7,param_13,param_14,in_stack_ffffffffffffff18);
      if ((*piVar5 == 0x6f || *piVar5 == 2) && (param_11 != 0)) {
        close(__fd);
        if (!bVar1) {
          pcVar4 = "%s.lock";
          uVar9 = xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_02),param_2,param_3,param_4,
                            param_5,param_6,param_7,param_8,(long *)&local_c0,"%s.lock",param_10,
                            uVar7,param_13,param_14,in_stack_ffffffffffffff18);
          __fd_00 = client_get_lock(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    local_c0,pcVar4,extraout_RDX_00,uVar7,param_13,param_14);
          uVar9 = extraout_XMM0_Da_03;
          if ((int)__fd_00 < 0) goto code_r0x0012702d;
          goto LAB_0012705f;
        }
        uVar9 = extraout_XMM0_Da_02;
        uVar10 = extraout_XMM0_Db;
        if ((((int)__fd_00 < 0) ||
            (iVar2 = unlink(param_10), uVar9 = extraout_XMM0_Da_05, uVar10 = extraout_XMM0_Db_00,
            iVar2 == 0)) || (*piVar5 == 2)) {
          bVar1 = true;
          uVar3 = server_start(CONCAT44(uVar10,uVar9),param_2,param_3,param_4,param_5,param_6,
                               param_7,param_8,param_9,__fd_00,local_c0,uVar7,param_13,param_14);
          goto LAB_001270c3;
        }
        uVar3 = 0xffffffff;
        free(local_c0);
        close(__fd_00);
      }
      else {
        if (bVar1) {
          free(local_c0);
          close(__fd_00);
        }
        uVar3 = 0xffffffff;
        close(__fd);
      }
    }
    else {
LAB_001270c3:
      if (((int)__fd_00 < 0) || (!bVar1)) {
        setblocking(uVar3,0);
      }
      else {
        free(local_c0);
        close(__fd_00);
        setblocking(uVar3,0);
      }
    }
  }
  goto LAB_00127094;
code_r0x0012702d:
  log_emit(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "didn\'t get lock (%d)",(ulong)__fd_00,uVar7,param_13,param_14,in_stack_ffffffffffffff18)
  ;
  free(local_c0);
  local_c0 = (char *)0x0;
  uVar9 = extraout_XMM0_Da_04;
  if (__fd_00 != 0xfffffffe) {
LAB_0012705f:
    bVar1 = true;
    log_emit(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"got lock (%d)",
             (ulong)__fd_00,uVar7,param_13,param_14,in_stack_ffffffffffffff18);
  }
  goto LAB_00126f68;
}



char * client_exit_message(undefined4 param_1,undefined4 param_2,undefined4 param_3,
                          undefined4 param_4,undefined4 param_5,undefined4 param_6,
                          undefined4 param_7,undefined4 param_8)

{
  char *pcVar1;
  undefined8 in_R8;
  undefined8 in_R9;
  undefined1 in_stack_fffffffffffffff8;
  
  switch(client_exitreason) {
  case 0:
    return "unknown reason";
  case 1:
    pcVar1 = "detached (from session %s)";
    if (client_exitsession == 0) {
      return "detached";
    }
    break;
  case 2:
    if (client_exitsession == 0) {
      return "detached and SIGHUP";
    }
    pcVar1 = "detached and SIGHUP (from session %s)";
    break;
  case 3:
    return "lost tty";
  case 4:
    return "terminated";
  case 5:
    return "lost server";
  case 6:
    return "exited";
  case 7:
    return "server exited";
  default:
    return "unknown reason";
  }
  xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_0019e860,0x100,
            pcVar1,client_exitsession,in_R8,in_R9,in_stack_fffffffffffffff8);
  return &DAT_0019e860;
}



int run_headless_command
              (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              int param_9,long param_10,ulong param_11,undefined *param_12,undefined8 param_13,
              undefined8 param_14)

{
  undefined8 *puVar1;
  int *piVar2;
  undefined8 uVar3;
  uint uVar4;
  void *__ptr;
  long *plVar5;
  int iVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  long local_38;
  long local_30;
  
  plVar5 = &local_38;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  puVar1 = cmdq_new(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,param_10,
                    param_11,param_12,param_13,param_14);
  uVar3 = 0;
  piVar2 = cmd_list_parse(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          param_9,param_10,(char *)0x0,0,&local_38,param_14);
  if (piVar2 == (int *)0x0) {
    iVar6 = -1;
    if (param_12 != (undefined *)0x0) {
      (*(code *)param_12)(local_38);
    }
  }
  else {
    cmdq_run(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             (int *)puVar1,piVar2,(undefined4 *)0x0,uVar3,plVar5,param_14);
    cmd_list_free(piVar2);
    iVar6 = 0;
    cmdq_free((int *)puVar1);
    if ((param_11 & 1) == 0) {
      uVar4 = 0;
      iVar6 = -(uint)(cfg_ncauses != 0);
      if (cfg_ncauses != 0) {
        do {
          __ptr = *(void **)((long)cfg_causes + (ulong)uVar4 * 8);
          if (param_12 != (undefined *)0x0) {
            (*(code *)param_12)();
            __ptr = *(void **)((long)cfg_causes + (ulong)uVar4 * 8);
          }
          free(__ptr);
          uVar4 = uVar4 + 1;
        } while (uVar4 < cfg_ncauses);
      }
      free(cfg_causes);
      cfg_causes = (void *)0x0;
      cfg_ncauses = 0;
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar6;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void run_initial_client_cmd
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  int iVar1;
  char **ppcVar2;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  char *local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_18 = "new-session";
  ppcVar2 = (char **)DAT_0019e960;
  iVar1 = DAT_0019e968;
  if (DAT_0019e968 == 0) {
    iVar1 = 1;
    ppcVar2 = &local_18;
  }
  iVar1 = run_headless_command
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,iVar1,
                     (long)ppcVar2,0,FUN_00126b50,in_R8,in_R9);
  if (-1 < iVar1) {
    if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
                    // WARNING: Subroutine does not return
  exit(1);
}



void client_send_identify
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               char *param_9,char *param_10)

{
  char **ppcVar1;
  uint uVar2;
  char *__s;
  size_t sVar3;
  char **ppcVar4;
  undefined8 uVar5;
  long lVar6;
  undefined8 in_R9;
  char *pcVar7;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 uVar8;
  undefined uVar9;
  __pid_t local_34;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar8 = client_flags;
  proc_send(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,100,
            0xffffffff,&stack0xffffffffffffffc8,4,in_R9);
  uVar9 = (undefined)uVar8;
  __s = getenv("TERM");
  lVar6 = 1;
  pcVar7 = "";
  uVar8 = extraout_XMM0_Da;
  if (__s != (char *)0x0) {
    sVar3 = strlen(__s);
    lVar6 = sVar3 + 1;
    pcVar7 = __s;
    uVar8 = extraout_XMM0_Da_00;
  }
  proc_send(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,0x65,
            0xffffffff,pcVar7,lVar6,in_R9);
  sVar3 = strlen(param_9);
  proc_send(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,
            0x66,0xffffffff,param_9,sVar3 + 1,in_R9);
  sVar3 = strlen(param_10);
  lVar6 = sVar3 + 1;
  uVar5 = 0x6c;
  proc_send(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,
            0x6c,0xffffffff,param_10,lVar6,in_R9);
  uVar2 = dup(0);
  if (uVar2 == 0xffffffff) {
                    // WARNING: Subroutine does not return
    fatal(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"dup failed",
          uVar5,(ulong)uVar2,param_10,lVar6,in_R9,uVar9);
  }
  proc_send(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,
            0x68,uVar2,(void *)0x0,0,in_R9);
  local_34 = getpid();
  proc_send(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,
            0x6b,0xffffffff,&local_34,4,in_R9);
  pcVar7 = *environ;
  uVar8 = extraout_XMM0_Da_05;
  ppcVar4 = environ;
  lVar6 = client_peer;
  while (pcVar7 != (char *)0x0) {
    sVar3 = strlen(pcVar7);
    uVar8 = extraout_XMM0_Da_06;
    if (sVar3 + 1 < 0x3ff1) {
      proc_send(extraout_XMM0_Da_06,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar6,
                0x69,0xffffffff,pcVar7,sVar3 + 1,in_R9);
      lVar6 = client_peer;
      uVar8 = extraout_XMM0_Da_07;
    }
    ppcVar1 = ppcVar4 + 1;
    ppcVar4 = ppcVar4 + 1;
    pcVar7 = *ppcVar1;
  }
  proc_send(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar6,0x6a,0xffffffff,
            (void *)0x0,0,in_R9);
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4
client_main(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
           undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
           ulong *param_9,int param_10,char **param_11,uint param_12,long *param_13,
           undefined8 param_14)

{
  char *__s;
  undefined **ppuVar1;
  bool bVar2;
  uint uVar3;
  int iVar4;
  speed_t sVar5;
  __pid_t __pid;
  int iVar6;
  char *pcVar7;
  char *pcVar8;
  size_t sVar9;
  int *piVar10;
  undefined8 uVar11;
  code *pcVar12;
  long *plVar13;
  uint uVar14;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  char **ppcVar15;
  termios *ptVar16;
  termios *__termios_p;
  undefined1 *puVar17;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar18;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined in_stack_ffffffffffffef18;
  long local_10d0;
  termios local_10c8;
  termios local_1088;
  char local_1048 [4104];
  long local_40;
  
  uVar3 = 1;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  puVar17 = (undefined1 *)param_13;
  DAT_0019e960 = param_11;
  DAT_0019e968 = param_10;
  signal(0x11,(__sighandler_t)0x1);
  uVar11 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  iVar6 = 0xd1;
  client_flags = param_12;
  if (param_13 == (long *)0x0) {
    if (param_10 == 0) {
LAB_001278a8:
      iVar6 = 200;
      pcVar7 = getenv("TMUX");
      uVar11 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_04);
      if (pcVar7 != (char *)0x0) {
        fwrite("sessions should be nested with care, unset $TMUX to force\n",1,0x3a,stderr);
        uVar18 = 1;
        goto LAB_00127870;
      }
    }
    else {
      puVar17 = (undefined1 *)&local_10d0;
      piVar10 = cmd_list_parse(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,param_10,(long)param_11,(char *)0x0,0,(long *)puVar17,
                               param_14);
      if (piVar10 == (int *)0x0) {
        __fprintf_chk(stderr,1,"%s\n",local_10d0);
        uVar18 = 1;
        goto LAB_00127870;
      }
      plVar13 = *(long **)(piVar10 + 2);
      if (plVar13 == (long *)0x0) {
        iVar6 = 200;
        uVar3 = 0;
        uVar11 = cmd_list_free(piVar10);
      }
      else {
        bVar2 = false;
        uVar3 = 0;
        puVar17 = cmd_new_session_entry;
        do {
          ppuVar1 = (undefined **)*plVar13;
          uVar14 = *(uint *)((long)ppuVar1 + 0x34) & 1;
          if (uVar14 != 0) {
            uVar3 = uVar14;
          }
          if ((ppuVar1 == &cmd_attach_session_entry) ||
             (ppuVar1 == (undefined **)cmd_new_session_entry)) {
            bVar2 = true;
          }
          plVar13 = (long *)plVar13[4];
        } while (plVar13 != (long *)0x0);
        uVar11 = cmd_list_free(piVar10);
        if (bVar2) goto LAB_001278a8;
        iVar6 = 200;
      }
    }
  }
  pcVar12 = client_signal;
  client_proc = proc_start(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"client",
                           param_9,0,client_signal,puVar17,param_14);
  uVar3 = client_connect(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,param_9,socket_path,uVar3,pcVar12,puVar17,
                         param_14);
  if (uVar3 == 0xffffffff) {
    piVar10 = __errno_location();
    iVar6 = *piVar10;
    if (iVar6 == 0x6f) {
      __fprintf_chk(stderr,1,"no server running on %s\n",socket_path);
      uVar18 = 1;
    }
    else if (iVar6 == 2) {
      fwrite("You must specify a socket name with -S. For example: \n  tmate -S /tmp/tmate.sock new-session -d\n  tmate -S /tmp/tmate.sock wait tmate-ready\n"
             ,1,0x8c,stderr);
      uVar18 = 1;
    }
    else {
      pcVar7 = strerror(iVar6);
      __fprintf_chk(stderr,1,"error connecting to %s (%s)\n",socket_path,pcVar7);
      uVar18 = 1;
    }
    goto LAB_00127870;
  }
  client_peer = proc_add_peer(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,client_proc,uVar3,client_dispatch,param_13,puVar17,param_14);
  pcVar7 = getcwd(local_1048,0x1000);
  if ((pcVar7 == (char *)0x0) && (pcVar7 = (char *)find_home(), pcVar7 == (char *)0x0)) {
    pcVar7 = "/";
  }
  pcVar8 = ttyname(0);
  if (pcVar8 == (char *)0x0) {
    pcVar8 = "";
  }
  options_free(global_options);
  options_free(global_s_options);
  options_free(global_w_options);
  environ_free(global_environ);
  setblocking(0,0);
  __termios_p = (termios *)0x0;
  pcVar12 = client_stdin_callback;
  uVar18 = event_set(client_stdin,0,0x12);
  if ((client_flags & 0x4000) != 0) {
    __termios_p = &local_1088;
    ptVar16 = __termios_p;
    iVar4 = tcgetattr(0,__termios_p);
    if (iVar4 != 0) {
                    // WARNING: Subroutine does not return
      fatal(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
            "tcgetattr failed",ptVar16,extraout_RDX,pcVar12,__termios_p,param_14,
            in_stack_ffffffffffffef18);
    }
    cfmakeraw(&local_10c8);
    pcVar12 = (code *)0x100;
    local_10c8.c_cc[5] = '\0';
    local_10c8.c_cc[6] = '\x01';
    local_10c8.c_iflag = 0x900;
    local_10c8.c_oflag = 5;
    local_10c8.c_cflag = 0x4b0;
    sVar5 = cfgetispeed(__termios_p);
    cfsetispeed(&local_10c8,sVar5);
    sVar5 = cfgetospeed(__termios_p);
    cfsetospeed(&local_10c8,sVar5);
    tcsetattr(0,0,&local_10c8);
    uVar18 = extraout_XMM0_Da_03;
  }
  uVar18 = client_send_identify
                     (uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,pcVar8,pcVar7);
  if (iVar6 == 200) {
    if (param_10 < 1) {
      ptVar16 = (termios *)0x4;
      pcVar8 = (char *)0x0;
      uVar11 = extraout_RDX_00;
    }
    else {
      pcVar8 = (char *)0x0;
      ppcVar15 = param_11;
      do {
        __s = *ppcVar15;
        ppcVar15 = ppcVar15 + 1;
        sVar9 = strlen(__s);
        pcVar8 = pcVar8 + sVar9 + 1;
      } while (param_11 + (ulong)(param_10 - 1) + 1 != ppcVar15);
      ptVar16 = (termios *)(pcVar8 + 4);
      uVar11 = extraout_RDX_01;
      uVar18 = extraout_XMM0_Da_05;
    }
    piVar10 = (int *)xmalloc(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (size_t)ptVar16,pcVar7,uVar11,pcVar12,__termios_p,param_14);
    *piVar10 = param_10;
    uVar11 = cmd_pack_argv(param_10,param_11,(char *)(piVar10 + 1),pcVar8);
    if ((int)uVar11 != 0) {
      fwrite("command too long\n",1,0x11,stderr);
      free(piVar10);
      uVar18 = 1;
      goto LAB_00127870;
    }
    pcVar12 = (code *)piVar10;
    iVar6 = proc_send(extraout_XMM0_Da_06,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      (long)client_peer,200,0xffffffff,piVar10,ptVar16,param_14);
    if (iVar6 != 0) {
      fwrite("failed to send command\n",1,0x17,stderr);
      free(piVar10);
      uVar18 = 1;
      goto LAB_00127870;
    }
    free(piVar10);
    uVar11 = extraout_RDX_02;
    uVar18 = extraout_XMM0_Da_07;
  }
  else {
    uVar11 = extraout_RDX_00;
    ptVar16 = __termios_p;
    if (iVar6 == 0xd1) {
      ptVar16 = (termios *)0x0;
      pcVar12 = (code *)0x0;
      proc_send(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)client_peer,
                0xd1,0xffffffff,(void *)0x0,0,param_14);
      uVar11 = extraout_RDX_03;
      uVar18 = extraout_XMM0_Da_08;
    }
  }
  uVar18 = proc_loop(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_proc,
                     (undefined *)0x0,uVar11,pcVar12,ptVar16,param_14);
  if (client_attached == 0) {
    if ((client_flags & 0x4000) == 0) {
      if (client_exitreason != 0) {
        pcVar7 = client_exit_message(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8)
        ;
        __fprintf_chk(stderr,1,"%s\n",pcVar7);
      }
    }
    else {
      if (client_exitreason == 0) {
        __printf_chk(1,"%%exit\n");
      }
      else {
        pcVar7 = client_exit_message(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8)
        ;
        __printf_chk(1,"%%exit %s\n",pcVar7);
      }
      __printf_chk(1,&DAT_00177407);
      tcsetattr(1,2,&local_1088);
    }
  }
  else {
    if (client_exitreason != 0) {
      pcVar7 = client_exit_message(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
      __printf_chk(1,"[%s]\n",pcVar7);
    }
    __pid = getppid();
    if ((client_exittype == 0xca) && (1 < __pid)) {
      kill(__pid,1);
    }
  }
  setblocking(0,1);
  uVar18 = client_exitval;
LAB_00127870:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar18;
}



void client_write(int param_1,void *param_2,size_t param_3)

{
  ssize_t sVar1;
  int *piVar2;
  
  if (param_3 != 0) {
    do {
      while( true ) {
        sVar1 = write(param_1,param_2,param_3);
        if (sVar1 != -1) break;
        piVar2 = __errno_location();
        if ((*piVar2 != 4) && (*piVar2 != 0xb)) {
          return;
        }
      }
      param_2 = (void *)((long)param_2 + sVar1);
      param_3 = param_3 - sVar1;
    } while (param_3 != 0);
  }
  return;
}



void client_exec(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                char *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  undefined8 uVar2;
  char *pcVar3;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffd8;
  undefined7 uStack_27;
  
  uVar2 = param_10;
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"shell %s, command %s",
           param_9,param_10,param_13,param_14,in_stack_ffffffffffffffd8);
  pcVar1 = strrchr(param_9,0x2f);
  pcVar3 = param_9;
  if ((pcVar1 != (char *)0x0) && (pcVar1[1] != '\0')) {
    pcVar3 = pcVar1 + 1;
  }
  if (((byte)client_flags & 2) == 0) {
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,(long *)&stack0xffffffffffffffd8,"%s",pcVar3,uVar2,param_13,param_14,
              in_stack_ffffffffffffffd8);
  }
  else {
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,(long *)&stack0xffffffffffffffd8,&DAT_0017741f,pcVar3,uVar2,param_13,
              param_14,in_stack_ffffffffffffffd8);
  }
  setenv("SHELL",param_9,1);
  setblocking(0,1);
  setblocking(1,1);
  setblocking(2,1);
  closefrom(3);
  pcVar3 = (char *)CONCAT71(uStack_27,in_stack_ffffffffffffffd8);
  uVar2 = 0;
  execl(param_9,pcVar3,&DAT_00177429);
                    // WARNING: Subroutine does not return
  fatal(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"execl failed",
        pcVar3,extraout_RDX,param_10,uVar2,param_14,in_stack_ffffffffffffffd8);
}



void client_dispatch_wait
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               int *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12)

{
  undefined4 *__src;
  uint uVar1;
  undefined8 extraout_RDX;
  ulong uVar2;
  long lVar3;
  long in_FS_OFFSET;
  undefined4 uVar4;
  undefined1 in_stack_ffffffffffffdfd8;
  size_t local_2018;
  undefined local_2010 [8192];
  long local_10;
  
  uVar4 = (undefined4)param_1;
  uVar2 = (ulong)*(ushort *)(param_9 + 1);
  __src = *(undefined4 **)(param_9 + 6);
  lVar3 = uVar2 - 0x10;
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if (*param_9 == 0xc) {
    if (lVar3 != 0) {
                    // WARNING: Subroutine does not return
      fatalx(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_VERSION size",
             param_10,param_11,param_12,uVar2,lVar3,in_stack_ffffffffffffdfd8);
    }
    __fprintf_chk(stderr,1,"protocol version mismatch (client %d, server %u)\n",8,
                  *(undefined *)(param_9 + 2));
    client_exitval = 1;
    proc_exit(client_proc);
  }
  else {
    switch(*param_9) {
    case 0xc9:
    case 0xca:
      proc_send(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,0xcd,
                0xffffffff,(void *)0x0,0,lVar3);
      break;
    case 0xcb:
    case 0xd2:
      uVar1 = *(ushort *)(param_9 + 1) & 0xfffffffb;
      if ((short)uVar1 != 0x10) {
                    // WARNING: Subroutine does not return
        fatalx(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_EXIT size",
               param_10,&switchD_00127e80::switchdataD_0017767c,(ulong)uVar1,uVar2,lVar3,
               in_stack_ffffffffffffdfd8);
      }
      if (lVar3 == 4) {
        client_exitval = *__src;
      }
    case 0xcc:
      proc_exit(client_proc);
      break;
    case 0xcf:
      if (lVar3 != 0) {
                    // WARNING: Subroutine does not return
        fatalx(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_READY size",
               param_10,&switchD_00127e80::switchdataD_0017767c,param_12,uVar2,lVar3,
               in_stack_ffffffffffffdfd8);
      }
      uVar4 = event_del(client_stdin);
      client_attached = 1;
      proc_send(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,0xd0,
                0xffffffff,(void *)0x0,0,lVar3);
      break;
    case 0xd1:
      if ((lVar3 == 0) || (*(char *)((long)__src + (uVar2 - 0x11)) != '\0')) {
                    // WARNING: Subroutine does not return
        fatalx(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_SHELL string",
               param_10,&switchD_00127e80::switchdataD_0017767c,param_12,uVar2,lVar3,
               in_stack_ffffffffffffdfd8);
      }
      uVar4 = clear_signals(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0);
      client_exec(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(char *)__src,
                  param_10,extraout_RDX,param_12,uVar2,lVar3);
      goto LAB_00128041;
    case 0xd3:
      if (lVar3 != 0x2008) {
                    // WARNING: Subroutine does not return
        fatalx(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_STDERR size",
               param_10,&switchD_00127e80::switchdataD_0017767c,param_12,uVar2,lVar3,
               in_stack_ffffffffffffdfd8);
      }
      memcpy(&local_2018,__src,0x2008);
      client_write(2,local_2010,local_2018);
      break;
    case 0xd4:
      if (lVar3 != 0) {
                    // WARNING: Subroutine does not return
        fatalx(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_STDIN size",
               param_10,&switchD_00127e80::switchdataD_0017767c,param_12,uVar2,lVar3,
               in_stack_ffffffffffffdfd8);
      }
      event_add(client_stdin,0);
      break;
    case 0xd5:
      if (lVar3 != 0x2008) {
                    // WARNING: Subroutine does not return
        fatalx(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_STDOUT size",
               param_10,&switchD_00127e80::switchdataD_0017767c,param_12,uVar2,lVar3,
               in_stack_ffffffffffffdfd8);
      }
      memcpy(&local_2018,__src,0x2008);
      client_write(1,local_2010,local_2018);
    }
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
LAB_00128041:
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void client_dispatch_attached
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               int *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  __pid_t __pid;
  uint uVar2;
  long lVar3;
  undefined8 extraout_RDX;
  ulong uVar4;
  undefined *puVar5;
  undefined8 *puVar6;
  char *__command;
  long in_FS_OFFSET;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined in_stack_ffffffffffffff48;
  undefined uVar8;
  sigset_t local_b0;
  int local_30;
  long local_20;
  
  uVar7 = (undefined4)param_1;
  puVar5 = &stack0xffffffffffffff48;
  __command = *(char **)(param_9 + 6);
  uVar4 = (ulong)*(ushort *)(param_9 + 1);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  lVar3 = (long)&switchD_001280ea::switchdataD_001776b0 +
          (long)(int)(&switchD_001280ea::switchdataD_001776b0)[*param_9 - 0xc9];
  switch(*param_9) {
  case 0xc9:
  case 0xca:
    if ((uVar4 == 0x10) || (__command[uVar4 - 0x11] != '\0')) {
                    // WARNING: Subroutine does not return
      fatalx(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_DETACH string",
             uVar4,lVar3,param_12,__command,param_14,in_stack_ffffffffffffff48);
    }
    client_exitsession =
         xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__command,uVar4,
                 lVar3,param_12,__command,param_14);
    client_exittype = *param_9;
    client_exitreason = (client_exittype == 0xca) + 1;
    proc_send(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              client_peer,0xcd,0xffffffff,(void *)0x0,0,param_14);
    break;
  case 0xcb:
    uVar2 = *(ushort *)(param_9 + 1) & 0xfffffffb;
    if ((short)uVar2 != 0x10) {
                    // WARNING: Subroutine does not return
      fatalx(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_EXIT size",uVar4
             ,lVar3,(ulong)uVar2,__command,param_14,in_stack_ffffffffffffff48);
    }
    proc_send(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,0xcd,
              0xffffffff,(void *)0x0,0,param_14);
    client_exitreason = 6;
    break;
  case 0xcc:
    if (uVar4 != 0x10) {
                    // WARNING: Subroutine does not return
      fatalx(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_EXITED size",
             uVar4,lVar3,param_12,__command,param_14,in_stack_ffffffffffffff48);
    }
    proc_exit(client_proc);
    break;
  case 0xce:
    if ((uVar4 == 0x10) || (__command[uVar4 - 0x11] != '\0')) {
                    // WARNING: Subroutine does not return
      fatalx(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_LOCK string",
             uVar4,lVar3,param_12,__command,param_14,in_stack_ffffffffffffff48);
    }
    system(__command);
    proc_send(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,
              0xd7,0xffffffff,(void *)0x0,0,param_14);
    break;
  case 0xd2:
    if (uVar4 != 0x10) {
                    // WARNING: Subroutine does not return
      fatalx(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_SHUTDOWN size",
             uVar4,lVar3,param_12,__command,param_14,in_stack_ffffffffffffff48);
    }
    proc_send(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,client_peer,0xcd,
              0xffffffff,(void *)0x0,0,param_14);
    client_exitreason = 7;
    client_exitval = 1;
    break;
  case 0xd6:
    if (uVar4 != 0x10) {
                    // WARNING: Subroutine does not return
      fatalx(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_SUSPEND size",
             uVar4,lVar3,param_12,__command,param_14,in_stack_ffffffffffffff48);
    }
    puVar6 = (undefined8 *)&stack0xffffffffffffff48;
    for (lVar3 = 0x13; lVar3 != 0; lVar3 = lVar3 + -1) {
      *puVar6 = 0;
      puVar6 = puVar6 + 1;
    }
    sigemptyset(&local_b0);
    local_30 = 0x10000000;
    uVar8 = 0;
    iVar1 = sigaction(0x14,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
    if (iVar1 != 0) {
                    // WARNING: Subroutine does not return
      fatal(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
            "sigaction failed",puVar5,extraout_RDX,lVar3,__command,param_14,uVar8);
    }
    __pid = getpid();
    kill(__pid,0x14);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void client_dispatch(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    int *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                    undefined8 param_13,undefined8 param_14)

{
  if (param_9 == (int *)0x0) {
    client_exitreason = 5;
    client_exitval = 1;
    proc_exit(client_proc);
    return;
  }
  if (client_attached != 0) {
    client_dispatch_attached
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
               param_11,param_12,param_13,param_14);
    return;
  }
  client_dispatch_wait
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             param_11,param_12);
  return;
}



ulong cmd_attach_session(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,uint param_10,ulong param_11,uint *param_12,long *param_13,
                        char **param_14)

{
  uint *puVar1;
  int iVar2;
  ulong uVar3;
  uint **ppuVar4;
  char *pcVar5;
  char *pcVar6;
  uint *puVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  ulong extraout_RDX_08;
  undefined8 extraout_RDX_09;
  ulong extraout_RDX_10;
  undefined8 uVar8;
  long *plVar9;
  long *plVar10;
  int iVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar13;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 uVar16;
  undefined8 uVar14;
  undefined8 uVar15;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined uVar17;
  uint **ppuVar18;
  void *local_48;
  long local_40;
  
  plVar10 = *(long **)(param_9 + 8);
  iVar11 = (int)param_13;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (sessions == 0) {
    uVar12 = 0xffffffff;
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,"no sessions"
               ,param_11,(ulong)param_12,(long)param_13,param_14,(char)param_12);
  }
  else {
    uVar12 = 0;
    if (plVar10 != (long *)0x0) {
      puVar1 = *(uint **)(param_9 + 0xa0);
      puVar7 = *(uint **)(param_9 + 0xa8);
      plVar9 = *(long **)(param_9 + 0xb8);
      ppuVar18 = (uint **)param_12;
      uVar3 = server_client_check_nested((long)plVar10);
      uVar12 = uVar3 & 0xffffffff;
      if ((int)uVar3 == 0) {
        uVar15 = extraout_RDX;
        uVar13 = extraout_XMM0_Da;
        uVar16 = extraout_XMM0_Db;
        if (puVar7 != (uint *)0x0) {
          if (plVar9 != (long *)0x0) {
            window_set_active_pane(plVar9[1],(long)plVar9);
            uVar15 = extraout_RDX_00;
            uVar13 = extraout_XMM0_Da_00;
            uVar16 = extraout_XMM0_Db_00;
          }
          session_set_current(CONCAT44(uVar16,uVar13),param_2,param_3,param_4,param_5,param_6,
                              param_7,param_8,(long)puVar1,(long)puVar7,uVar15,param_12,
                              (uint *)param_13,param_14);
          uVar15 = extraout_RDX_01;
          uVar13 = extraout_XMM0_Da_01;
          uVar16 = extraout_XMM0_Db_01;
        }
        pcVar5 = (char *)param_12;
        ppuVar4 = ppuVar18;
        if (ppuVar18 != (uint **)0x0) {
          ppuVar4 = (uint **)format_create(CONCAT44(uVar16,uVar13),param_2,param_3,param_4,param_5,
                                           param_6,param_7,param_8,param_9,0,uVar15,
                                           (undefined *)param_12,param_13,param_14);
          uVar15 = format_defaults(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3
                                   ,param_4,param_5,param_6,param_7,param_8,ppuVar4,(long)plVar10,
                                   puVar1,puVar7,(uint *)plVar9,param_14);
          pcVar5 = format_expand(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 (long *)ppuVar4,(char *)ppuVar18,extraout_RDX_02,puVar7,plVar9,
                                 param_14);
          format_free(ppuVar4);
          free(*(void **)(puVar1 + 4));
          *(char **)(puVar1 + 4) = pcVar5;
          pcVar5 = (char *)puVar7;
          uVar15 = extraout_RDX_03;
          param_13 = plVar9;
          uVar13 = extraout_XMM0_Da_03;
          uVar16 = extraout_XMM0_Db_03;
        }
        uVar14 = CONCAT44(uVar16,uVar13);
        if (plVar10[0xb3] == 0) {
          iVar2 = server_client_open(CONCAT44(uVar16,uVar13),param_2,param_3,param_4,param_5,param_6
                                     ,param_7,param_8,(long)plVar10,(long *)&local_48);
          uVar15 = CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_05);
          uVar17 = SUB81(ppuVar4,0);
          if (iVar2 != 0) {
            uVar12 = 0xffffffff;
            cmdq_error(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_05),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_9,"open terminal failed: %s",local_48,
                       (ulong)pcVar5,(long)param_13,param_14,uVar17);
            free(local_48);
            goto LAB_00128516;
          }
          pcVar5 = (char *)(param_11 & 0xffffffff);
          if ((int)param_11 != 0) {
            *(uint *)(plVar10 + 0x84) = *(uint *)(plVar10 + 0x84) | 0x800;
          }
          uVar3 = (ulong)param_10;
          plVar9 = clients;
          if (param_10 != 0) {
            for (; uVar17 = SUB81(ppuVar4,0), plVar9 != (long *)0x0; plVar9 = (long *)plVar9[0xb8])
            {
              if (((uint *)plVar9[0xb3] == puVar1) && (plVar10 != plVar9)) {
                uVar15 = server_client_detach
                                   (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    plVar9,0xc9,uVar3,pcVar5,param_13,param_14);
                uVar3 = extraout_RDX_08;
              }
            }
          }
          if (iVar11 == 0) {
            pcVar6 = options_get_string(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,
                                        param_8,*(char ***)(puVar1 + 0x42),"update-environment",
                                        uVar3,pcVar5,param_13,param_14);
            uVar15 = environ_update(CONCAT44(extraout_XMM0_Db_07,extraout_XMM0_Da_07),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,pcVar6,
                                    (char **)plVar10[0x17],*(char ***)(puVar1 + 0x48),pcVar5,
                                    param_13,param_14);
            uVar3 = extraout_RDX_10;
          }
          plVar10[0xb3] = (long)puVar1;
          uVar14 = 0;
          uVar15 = server_client_set_key_table
                             (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (long)plVar10,(char *)0x0,uVar3,pcVar5,param_13,param_14);
          uVar13 = status_timer_start(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                      ,(long)plVar10,uVar14,extraout_RDX_09,pcVar5,(long)param_13,
                                      param_14);
          notify_attached_session_changed
                    (uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(uint *)plVar10)
          ;
          session_update_activity(puVar1);
          gettimeofday((timeval *)(puVar1 + 10),(__timezone_ptr_t)0x0);
          uVar15 = server_redraw_client((long)plVar10);
          *(uint *)(*(long *)(puVar1 + 0x38) + 0x38) =
               *(uint *)(*(long *)(puVar1 + 0x38) + 0x38) & 0xfffffff8;
          if ((*(byte *)((long)plVar10 + 0x421) & 0x20) == 0) {
            param_13 = (long *)0x0;
            proc_send((int)uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*plVar10,
                      0xcf,0xffffffff,(void *)0x0,0,param_14);
            uVar15 = CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_08);
          }
          pcVar5 = "client-attached";
          hooks_run(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(char ***)(plVar10[0xb3] + 0x100),plVar10,0,"client-attached",param_13,param_14
                    ,uVar17);
          uVar15 = CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_06);
          *(undefined4 *)(param_9 + 0x10) = 0;
        }
        else {
          plVar9 = clients;
          if (param_10 != 0) {
            for (; plVar9 != (long *)0x0; plVar9 = (long *)plVar9[0xb8]) {
              if (((uint *)plVar9[0xb3] == puVar1) && (plVar10 != plVar9)) {
                uVar14 = server_client_detach
                                   (uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    plVar9,0xc9,uVar15,pcVar5,param_13,param_14);
                uVar15 = extraout_RDX_04;
              }
            }
          }
          if (iVar11 == 0) {
            pcVar6 = options_get_string(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,
                                        param_8,*(char ***)(puVar1 + 0x42),"update-environment",
                                        uVar15,pcVar5,param_13,param_14);
            uVar14 = environ_update(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,pcVar6,
                                    (char **)plVar10[0x17],*(char ***)(puVar1 + 0x48),pcVar5,
                                    param_13,param_14);
            uVar15 = extraout_RDX_07;
          }
          plVar10[0xb3] = (long)puVar1;
          uVar8 = 0;
          uVar15 = server_client_set_key_table
                             (uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (long)plVar10,(char *)0x0,uVar15,pcVar5,param_13,param_14);
          uVar13 = status_timer_start(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                      ,(long)plVar10,uVar8,extraout_RDX_05,pcVar5,(long)param_13,
                                      param_14);
          notify_attached_session_changed
                    (uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(uint *)plVar10)
          ;
          session_update_activity(puVar1);
          plVar9 = (long *)0x0;
          gettimeofday((timeval *)(puVar1 + 10),(__timezone_ptr_t)0x0);
          uVar15 = server_redraw_client((long)plVar10);
          *(uint *)(*(long *)(puVar1 + 0x38) + 0x38) =
               *(uint *)(*(long *)(puVar1 + 0x38) + 0x38) & 0xfffffff8;
          plVar10 = plVar9;
        }
        uVar15 = recalculate_sizes(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
        alerts_check_session
                  (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)puVar1,
                   plVar10,extraout_RDX_06,(ulong)pcVar5,(ulong)param_13,(ulong)param_14);
        server_update_socket();
      }
      else {
        uVar12 = 0xffffffff;
        cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,param_9,
                   "sessions should be nested with care, unset $TMUX to force",extraout_RDX,
                   (ulong)param_12,(long)param_13,param_14,(char)ppuVar18);
      }
    }
  }
LAB_00128516:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar12;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmd_attach_session_exec
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10)

{
  byte **ppbVar1;
  ulong uVar2;
  uint *puVar3;
  ulong uVar4;
  undefined8 uVar5;
  char **in_R9;
  undefined8 extraout_XMM0_Qa;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  uVar2 = args_has(ppbVar1,0x45);
  puVar3 = (uint *)args_get(ppbVar1,99);
  uVar4 = args_has(ppbVar1,0x72);
  uVar5 = args_has(ppbVar1,100);
  cmd_attach_session(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_10,(uint)uVar5,uVar4 & 0xffffffff,puVar3,(long *)(uVar2 & 0xffffffff),
                     in_R9);
  return;
}



undefined8
cmd_bind_key_mode_table
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,ulong param_11,ulong param_12,long param_13,undefined8 param_14)

{
  int iVar1;
  byte **ppbVar2;
  long lVar3;
  ulong **ppuVar4;
  uint uVar5;
  char *pcVar6;
  undefined1 *puVar7;
  undefined8 uVar8;
  char *extraout_RAX;
  ulong *puVar9;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong *puVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Db_02;
  undefined auVar13 [16];
  undefined in_stack_ffffffffffffff88;
  
  puVar10 = (ulong *)&stack0xffffffffffffff88;
  ppbVar2 = *(byte ***)(param_9 + 8);
  lVar3 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar6 = (char *)args_get(ppbVar2,0x74);
  puVar7 = mode_key_findtable(pcVar6);
  if (puVar7 == (undefined1 *)0x0) {
    cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,param_10,"unknown key table: %s",pcVar6,param_12,param_13,param_14,
               in_stack_ffffffffffffff88);
    uVar8 = 0xffffffff;
    goto LAB_001288ac;
  }
  uVar5 = mode_key_fromstring(*(undefined4 **)(puVar7 + 8),*(char **)(ppbVar2[2] + 8));
  if (uVar5 == 0) {
    cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_10,"unknown command: %s",
               *(undefined8 *)(ppbVar2[2] + 8),param_12,param_13,param_14,in_stack_ffffffffffffff88)
    ;
    uVar8 = 0xffffffff;
    goto LAB_001288ac;
  }
  iVar1 = *(int *)(ppbVar2 + 1);
  if (uVar5 == 0x37) {
    if (iVar1 != 3) {
      cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"no argument given",extraout_RDX,param_12,param_13
                 ,param_14,in_stack_ffffffffffffff88);
      uVar8 = 0xffffffff;
      goto LAB_001288ac;
    }
    pcVar6 = *(char **)(ppbVar2[2] + 0x10);
  }
  else {
    if (uVar5 < 0x38) {
      if (uVar5 == 0x32) goto LAB_00128815;
LAB_00128855:
      if (iVar1 != 2) {
        cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"no argument allowed",extraout_RDX,param_12,
                   param_13,param_14,in_stack_ffffffffffffff88);
        uVar8 = 0xffffffff;
        goto LAB_001288ac;
      }
    }
    else {
      if ((uVar5 != 0x3a) && (uVar5 != 0x5c)) goto LAB_00128855;
LAB_00128815:
      if (iVar1 != 2) {
        pcVar6 = *(char **)(ppbVar2[2] + 0x10);
        if (((*pcVar6 != '-') || (pcVar6[1] != 'x')) || (pcVar6[2] != '\0')) {
          cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_10,"unknown argument",extraout_RDX,
                     param_12,param_13,param_14,in_stack_ffffffffffffff88);
          uVar8 = 0xffffffff;
          goto LAB_001288ac;
        }
        goto LAB_00128861;
      }
    }
    pcVar6 = (char *)0x0;
  }
LAB_00128861:
  uVar8 = args_has(ppbVar2,99);
  auVar13 = mode_key_tree_RB_FIND(*(ulong ***)(puVar7 + 0x10),(ulong *)&stack0xffffffffffffff88);
  uVar11 = extraout_XMM0_Da_01;
  uVar12 = extraout_XMM0_Db_01;
  if (auVar13._0_8_ == 0) {
    puVar9 = (ulong *)xmalloc(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,0x38,puVar10,auVar13._8_8_,param_12,param_13,param_14);
    ppuVar4 = *(ulong ***)(puVar7 + 0x10);
    *puVar9 = param_11;
    *(uint *)(puVar9 + 1) = (uint)((int)uVar8 != 0);
    puVar10 = puVar9;
    mode_key_tree_RB_INSERT(ppuVar4,puVar9);
    auVar13._8_8_ = extraout_RDX_00;
    auVar13._0_8_ = puVar9;
    uVar11 = extraout_XMM0_Da_02;
    uVar12 = extraout_XMM0_Db_02;
  }
  *(uint *)(auVar13._0_8_ + 0xc) = uVar5;
  if (pcVar6 != (char *)0x0) {
    xstrdup(CONCAT44(uVar12,uVar11),param_2,param_3,param_4,param_5,param_6,param_7,param_8,pcVar6,
            puVar10,auVar13._8_8_,param_12,param_13,param_14);
    pcVar6 = extraout_RAX;
  }
  *(char **)(auVar13._0_8_ + 0x10) = pcVar6;
  uVar8 = 0;
LAB_001288ac:
  if (lVar3 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar8;
}



ulong cmd_bind_key_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
                       undefined8 param_14)

{
  byte **ppbVar1;
  long lVar2;
  undefined8 uVar3;
  ulong uVar4;
  ulong uVar5;
  int *piVar6;
  undefined8 extraout_RDX;
  char *pcVar7;
  undefined *puVar8;
  ulong uVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined in_stack_ffffffffffffffb8;
  undefined7 uStack_47;
  
  puVar8 = &stack0xffffffffffffffb8;
  ppbVar1 = *(byte ***)(param_9 + 8);
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  uVar3 = args_has(ppbVar1,0x74);
  if ((int)uVar3 == 0) {
    if (*(int *)(ppbVar1 + 1) < 2) goto LAB_00128b0a;
  }
  else if (1 < *(int *)(ppbVar1 + 1) - 2U) {
LAB_00128b0a:
    uVar9 = 0xffffffff;
    cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,param_10,"not enough arguments",extraout_RDX,param_12,param_13,
               param_14,in_stack_ffffffffffffffb8);
    goto LAB_00128abb;
  }
  uVar4 = key_string_lookup_string
                    (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                     param_6,param_7,param_8,*(byte **)ppbVar1[2]);
  if ((uVar4 & 0xfffffffeffffffff) == 0xfffe00000000) {
    uVar9 = 0xffffffff;
    cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_10,"unknown key: %s",*(undefined8 *)ppbVar1[2],param_12
               ,param_13,param_14,in_stack_ffffffffffffffb8);
  }
  else {
    uVar5 = args_has(ppbVar1,0x74);
    uVar9 = uVar5 & 0xffffffff;
    if ((int)uVar5 == 0) {
      uVar3 = args_has(ppbVar1,0x54);
      if ((int)uVar3 == 0) {
        pcVar7 = "root";
        uVar3 = args_has(ppbVar1,0x6e);
        uVar10 = extraout_XMM0_Da_02;
        if ((int)uVar3 == 0) {
          pcVar7 = "prefix";
        }
      }
      else {
        pcVar7 = (char *)args_get(ppbVar1,0x54);
        uVar10 = extraout_XMM0_Da_05;
      }
      uVar5 = 0;
      piVar6 = cmd_list_parse(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(int *)(ppbVar1 + 1) + -1,(long)(ppbVar1[2] + 8),(char *)0x0,0,
                              (long *)&stack0xffffffffffffffb8,param_14);
      if (piVar6 == (int *)0x0) {
        uVar9 = 0xffffffff;
        cmdq_error(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"%s",
                   CONCAT71(uStack_47,in_stack_ffffffffffffffb8),uVar5,(long)puVar8,param_14,
                   in_stack_ffffffffffffffb8);
        free((void *)CONCAT71(uStack_47,in_stack_ffffffffffffffb8));
      }
      else {
        uVar5 = args_has(ppbVar1,0x72);
        key_bindings_add(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,pcVar7,uVar4,uVar5 & 0xffffffff,
                         (ulong)piVar6,puVar8,param_14);
      }
    }
    else {
      uVar9 = cmd_bind_key_mode_table
                        (CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,param_9,param_10,uVar4,param_12,param_13,
                         param_14);
      uVar9 = uVar9 & 0xffffffff;
    }
  }
LAB_00128abb:
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar9;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
cmd_break_pane_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   undefined8 param_9,long param_10,undefined8 param_11,ulong param_12,long param_13
                   ,undefined8 param_14)

{
  undefined1 in_stack_fffffffffffffff8;
  
  cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "break pane is not supported with tmate",param_11,param_12,param_13,param_14,
             in_stack_fffffffffffffff8);
  return 0xffffffff;
}



long cmd_capture_pane_append
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,long *param_10,void *param_11,size_t param_12,undefined8 param_13,
               undefined8 param_14)

{
  long lVar1;
  
  lVar1 = xrealloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                   param_12 + 1 + *param_10,param_11,param_12,param_13,param_14);
  memcpy((void *)(*param_10 + lVar1),param_11,param_12);
  *param_10 = *param_10 + param_12;
  return lVar1;
}



long cmd_capture_pane_pending
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               byte **param_9,long param_10,long *param_11,undefined8 param_12,undefined8 param_13,
               undefined8 param_14)

{
  char cVar1;
  long lVar2;
  void *pvVar3;
  ulong uVar4;
  long extraout_RAX;
  size_t sVar5;
  ulong uVar6;
  long extraout_RAX_00;
  undefined8 extraout_RDX;
  undefined8 uVar7;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined auVar9 [16];
  undefined in_stack_ffffffffffffffb8;
  char local_45;
  undefined local_44;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = input_pending(param_10);
  if (lVar2 == 0) {
    xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
            param_7,param_8,"",param_10,extraout_RDX,param_12,param_13,param_14);
    lVar2 = extraout_RAX_00;
  }
  else {
    uVar7 = 0xffffffffffffffff;
    pvVar3 = (void *)evbuffer_pullup(lVar2);
    auVar9 = evbuffer_get_length(lVar2);
    uVar4 = auVar9._0_8_;
    xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
            param_6,param_7,param_8,"",uVar7,auVar9._8_8_,param_12,param_13,param_14);
    uVar7 = args_has(param_9,0x43);
    if ((int)uVar7 == 0) {
      lVar2 = cmd_capture_pane_append
                        (extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,extraout_RAX,param_11,pvVar3,uVar4,param_13,param_14);
    }
    else {
      lVar2 = extraout_RAX;
      if (uVar4 != 0) {
        uVar6 = 0;
        uVar8 = extraout_XMM0_Da_01;
        do {
          cVar1 = *(char *)((long)pvVar3 + uVar6);
          if (cVar1 < ' ') {
            xsnprintf(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_45,5,
                      "\\%03hho",(ulong)(uint)(int)cVar1,param_13,param_14,in_stack_ffffffffffffffb8
                     );
          }
          else {
            local_44 = 0;
            local_45 = cVar1;
          }
          sVar5 = strlen(&local_45);
          lVar2 = cmd_capture_pane_append
                            (extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,lVar2,param_11,&local_45,sVar5,param_13,param_14);
          uVar6 = (ulong)((int)uVar6 + 1);
          uVar8 = extraout_XMM0_Da_03;
        } while (uVar6 < uVar4);
      }
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long cmd_capture_pane_history
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               byte **param_9,long param_10,long param_11,long *param_12,long param_13,
               undefined *param_14)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  undefined8 uVar4;
  char *pcVar5;
  ulong uVar6;
  ulong uVar7;
  size_t sVar8;
  long lVar9;
  long lVar10;
  longlong lVar11;
  long extraout_RAX;
  long *plVar12;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint uVar13;
  uint uVar14;
  ulong uVar15;
  undefined8 uVar16;
  undefined8 *puVar17;
  ulong uVar18;
  long lVar19;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined in_stack_ffffffffffffff88;
  uint local_74;
  undefined8 local_50;
  void *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_50 = 0;
  uVar1 = *(undefined4 *)(*(long *)(param_11 + 0x150) + 4);
  plVar12 = param_12;
  uVar4 = args_has(param_9,0x61);
  if ((int)uVar4 == 0) {
    lVar19 = *(long *)(param_11 + 0x150);
  }
  else {
    lVar19 = *(long *)(param_11 + 0x1c8);
    if (lVar19 == 0) {
      uVar16 = 0x71;
      uVar4 = args_has(param_9,0x71);
      if ((int)uVar4 == 0) {
        lVar9 = 0;
        cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"no alternate screen",extraout_RDX_00,
                   (ulong)plVar12,param_13,param_14,in_stack_ffffffffffffff88);
      }
      else {
        xstrdup(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,"",uVar16,extraout_RDX_00,plVar12,param_13,param_14);
        lVar9 = extraout_RAX;
      }
      goto LAB_00128f06;
    }
  }
  pcVar5 = (char *)args_get(param_9,0x53);
  if (((pcVar5 == (char *)0x0) || (*pcVar5 != '-')) || (uVar15 = 0, pcVar5[1] != '\0')) {
    lVar11 = args_strtonum(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_9,(undefined *)0x53,
                           (undefined *)0xffffffff80000000,(undefined *)0x7fff,&local_48,param_14);
    if (local_48 == (void *)0x0) {
      uVar13 = *(uint *)(lVar19 + 0xc);
      iVar3 = (int)lVar11;
      if ((-1 < iVar3) || (uVar14 = 0, (uint)-iVar3 <= uVar13)) {
        uVar14 = uVar13 + iVar3;
      }
    }
    else {
      uVar14 = *(uint *)(lVar19 + 0xc);
      free(local_48);
      uVar13 = *(uint *)(lVar19 + 0xc);
    }
    uVar13 = (uVar13 - 1) + *(int *)(lVar19 + 8);
    if (uVar13 <= uVar14) {
      uVar14 = uVar13;
    }
    uVar15 = (ulong)uVar14;
  }
  pcVar5 = (char *)args_get(param_9,0x45);
  if (((pcVar5 == (char *)0x0) || (*pcVar5 != '-')) || (pcVar5[1] != '\0')) {
    lVar11 = args_strtonum(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4
                           ,param_5,param_6,param_7,param_8,param_9,(undefined *)0x45,
                           (undefined *)0xffffffff80000000,(undefined *)0x7fff,&local_48,param_14);
    if (local_48 == (void *)0x0) {
      uVar13 = *(uint *)(lVar19 + 0xc);
      iVar3 = (int)lVar11;
      if ((-1 < iVar3) || (local_74 = 0, (uint)-iVar3 <= uVar13)) {
        local_74 = uVar13 + iVar3;
      }
    }
    else {
      iVar3 = *(int *)(lVar19 + 8);
      iVar2 = *(int *)(lVar19 + 0xc);
      free(local_48);
      uVar13 = *(uint *)(lVar19 + 0xc);
      local_74 = (iVar3 + iVar2) - 1;
    }
    uVar13 = (uVar13 - 1) + *(int *)(lVar19 + 8);
    if (uVar13 <= local_74) {
      local_74 = uVar13;
    }
  }
  else {
    local_74 = (*(int *)(lVar19 + 8) + *(int *)(lVar19 + 0xc)) - 1;
  }
  uVar13 = (uint)uVar15;
  if (local_74 < uVar13) {
    uVar15 = (ulong)local_74;
    local_74 = uVar13;
  }
  uVar6 = args_has(param_9,0x65);
  uVar7 = args_has(param_9,0x43);
  uVar4 = args_has(param_9,0x4a);
  lVar9 = 0;
  do {
    uVar18 = uVar6 & 0xffffffff;
    puVar17 = &local_50;
    pcVar5 = (char *)grid_string_cells(lVar19,0,uVar15,uVar1,&local_50,uVar18,uVar7 & 0xffffffff,
                                       (int)uVar4 == 0);
    sVar8 = strlen(pcVar5);
    lVar9 = cmd_capture_pane_append
                      (extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       lVar9,param_12,pcVar5,sVar8,puVar17,uVar18);
    lVar10 = grid_peek_line(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,lVar19,uVar15,extraout_RDX,sVar8,puVar17,uVar18);
    if (((int)uVar4 == 0) || ((*(byte *)(lVar10 + 0x18) & 1) == 0)) {
      lVar10 = *param_12;
      *param_12 = lVar10 + 1;
      *(undefined *)(lVar9 + lVar10) = 10;
    }
    uVar13 = (int)uVar15 + 1;
    uVar15 = (ulong)uVar13;
    free(pcVar5);
  } while (uVar13 <= local_74);
LAB_00128f06:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return lVar9;
}



undefined8
cmd_capture_pane_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,void **param_12,long param_13,void **param_14)

{
  byte **ppbVar1;
  long lVar2;
  long *plVar3;
  undefined8 uVar4;
  void *__ptr;
  undefined8 uVar5;
  char *pcVar6;
  void **ppvVar7;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined in_stack_ffffffffffffffb8;
  void *local_40;
  void *local_38;
  long local_30;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  lVar2 = *(long *)(param_10 + 0xb8);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_38 = (void *)0x0;
  uVar4 = args_has(ppbVar1,0x50);
  if ((int)uVar4 == 0) {
    param_12 = &local_38;
    __ptr = (void *)cmd_capture_pane_history
                              (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,ppbVar1,param_10,lVar2,(long *)param_12,param_13,
                               (undefined *)param_14);
  }
  else {
    __ptr = (void *)cmd_capture_pane_pending
                              (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,ppbVar1,lVar2,(long *)&local_38,param_12,param_13,param_14);
  }
  if (__ptr == (void *)0x0) {
    uVar4 = 0xffffffff;
  }
  else {
    uVar4 = args_has(ppbVar1,0x70);
    if ((int)uVar4 == 0) {
      uVar5 = args_has(ppbVar1,0x62);
      pcVar6 = (char *)0x0;
      uVar4 = extraout_XMM0_Qa_02;
      if ((int)uVar5 != 0) {
        pcVar6 = (char *)args_get(ppbVar1,0x62);
        uVar4 = extraout_XMM0_Qa_04;
      }
      ppvVar7 = &local_40;
      uVar4 = paste_set(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__ptr,local_38
                        ,pcVar6,ppvVar7,param_13,param_14);
      if ((int)uVar4 != 0) {
        cmdq_error(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"%s",local_40,(ulong)ppvVar7,param_13,param_14,in_stack_ffffffffffffffb8
                  );
        free(local_40);
        free(__ptr);
        uVar4 = 0xffffffff;
      }
    }
    else {
      plVar3 = *(long **)(param_10 + 8);
      if ((plVar3 == (long *)0x0) ||
         ((plVar3[0xb3] != 0 && ((*(byte *)((long)plVar3 + 0x421) & 0x20) == 0)))) {
        cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"can\'t write to stdout",extraout_RDX,(ulong)param_12,param_13,param_14,
                   in_stack_ffffffffffffffb8);
        free(__ptr);
        uVar4 = 0xffffffff;
      }
      else {
        evbuffer_add(plVar3[0x53],__ptr,local_38);
        free(__ptr);
        uVar5 = args_has(ppbVar1,0x50);
        uVar4 = extraout_XMM0_Qa_01;
        if (((int)uVar5 != 0) && (local_38 != (void *)0x0)) {
          uVar4 = evbuffer_add(plVar3[0x53],"\n",1);
        }
        server_client_push_stdout
                  (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar3);
        uVar4 = 0;
      }
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4
cmd_choose_buffer_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined *param_12,long *param_13,char **param_14)

{
  long lVar1;
  long lVar2;
  char *pcVar3;
  long lVar4;
  undefined8 uVar5;
  char *extraout_RAX;
  long *plVar6;
  long extraout_RAX_00;
  char *pcVar7;
  byte **ppbVar8;
  char *extraout_RAX_01;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  int iVar9;
  undefined1 *puVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined in_stack_ffffffffffffff98;
  char *local_60;
  undefined4 local_4c;
  char *local_48;
  long local_40;
  
  lVar1 = *(long *)(param_10 + 0x80);
  ppbVar8 = *(byte ***)(param_9 + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = *(long *)(param_10 + 0xa8);
  if (lVar1 == 0) {
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "no client available",param_11,(ulong)param_12,(long)param_13,param_14,
               in_stack_ffffffffffffff98);
    local_4c = 0xffffffff;
  }
  else {
    pcVar3 = (char *)args_get(ppbVar8,0x46);
    if (pcVar3 == (char *)0x0) {
      pcVar3 = "#{buffer_name}: #{buffer_size} bytes: #{buffer_sample}";
    }
    lVar4 = paste_get_top((undefined8 *)0x0);
    if (lVar4 != 0) {
      puVar10 = window_choose_mode;
      uVar5 = window_pane_set_mode
                        (*(long *)(*(long *)(lVar2 + 8) + 0x138),(undefined **)window_choose_mode);
      if ((int)uVar5 == 0) {
        if (*(int *)(ppbVar8 + 1) == 0) {
          xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,"paste-buffer -b \'%%\'",puVar10,extraout_RDX,param_12,
                  param_13,param_14);
          local_60 = extraout_RAX_01;
        }
        else {
          xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,*(char **)ppbVar8[2],puVar10,extraout_RDX,param_12,
                  param_13,param_14);
          local_60 = extraout_RAX;
        }
        iVar9 = 0;
        ppbVar8 = (byte **)0x0;
        while( true ) {
          ppbVar8 = (byte **)paste_walk((long)ppbVar8);
          if (ppbVar8 == (byte **)0x0) break;
          lVar4 = lVar1;
          plVar6 = window_choose_data_create
                             (extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,0,lVar1,*(long *)(lVar1 + 0x598),param_12,param_13,param_14);
          *(int *)(plVar6 + 2) = iVar9;
          iVar9 = iVar9 + 1;
          uVar5 = xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,pcVar3,lVar4,extraout_RDX_00,param_12,
                          param_13,param_14);
          plVar6[6] = extraout_RAX_00;
          format_defaults_paste_buffer
                    (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar6[7],ppbVar8
                     ,extraout_RDX_01,param_12,param_13,param_14);
          uVar5 = paste_buffer_name((long)ppbVar8);
          uVar5 = xasprintf(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,(long *)&local_48,"%s",uVar5,
                            param_12,param_13,param_14,in_stack_ffffffffffffff98);
          pcVar7 = cmd_template_replace
                             (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_60
                              ,local_48,1,param_12,param_13,param_14);
          plVar6[8] = (long)pcVar7;
          free(local_48);
          window_choose_add(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,
                            *(long *)(*(long *)(lVar2 + 8) + 0x138),(long)plVar6,extraout_RDX_02,
                            param_12,param_13,param_14);
        }
        free(local_60);
        window_choose_ready(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,*(long *)(*(long *)(lVar2 + 8) + 0x138),0,(undefined *)0x0,
                            param_12,param_13,param_14);
        local_4c = 0;
        goto LAB_00129408;
      }
    }
    local_4c = 0;
  }
LAB_00129408:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_4c;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4
cmd_choose_client_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,ulong param_12,long *param_13,undefined8 param_14)

{
  long lVar1;
  byte **ppbVar2;
  long lVar3;
  undefined8 uVar4;
  char *pcVar5;
  char *pcVar6;
  char *extraout_RAX;
  long *plVar7;
  long extraout_RAX_00;
  char *pcVar8;
  char *extraout_RAX_01;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long lVar9;
  char **ppcVar10;
  char **ppcVar11;
  long lVar12;
  uint uVar13;
  char **ppcVar15;
  char *__ptr;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 local_3c;
  char **ppcVar14;
  
  lVar1 = *(long *)(param_10 + 0x80);
  ppbVar2 = *(byte ***)(param_9 + 8);
  lVar3 = *(long *)(param_10 + 0xa8);
  if (lVar1 == 0) {
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "no client available",param_11,param_12,(long)param_13,param_14,(char)param_10);
    local_3c = 0xffffffff;
  }
  else {
    uVar4 = window_pane_set_mode
                      (*(long *)(*(long *)(lVar3 + 8) + 0x138),(undefined **)window_choose_mode);
    if ((int)uVar4 == 0) {
      uVar4 = 0x46;
      pcVar5 = (char *)args_get(ppbVar2,0x46);
      pcVar6 = 
      "#{client_tty}: #{session_name} [#{client_width}x#{client_height} #{client_termname}]#{?client_utf8, (utf8),}#{?client_readonly, (ro),} (last used #{t:client_activity})"
      ;
      if (pcVar5 != (char *)0x0) {
        pcVar6 = pcVar5;
      }
      if (*(int *)(ppbVar2 + 1) == 0) {
        uVar16 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,"detach-client -t \'%%\'",uVar4,extraout_RDX,
                         pcVar5,param_13,param_14);
        __ptr = extraout_RAX_01;
      }
      else {
        uVar16 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,*(char **)ppbVar2[2],uVar4,extraout_RDX,pcVar5,
                         param_13,param_14);
        __ptr = extraout_RAX;
      }
      ppcVar14 = (char **)0x0;
      uVar13 = 0;
      if (clients != 0) {
        lVar9 = clients;
        ppcVar10 = (char **)0x0;
        ppcVar15 = ppcVar14;
        do {
          ppcVar11 = ppcVar10;
          if ((*(long *)(lVar9 + 0x598) != 0) && (*(long *)(lVar9 + 0xe8) != 0)) {
            if (*(long *)(param_10 + 8) == lVar9) {
              ppcVar15 = ppcVar10;
            }
            lVar12 = lVar1;
            plVar7 = window_choose_data_create
                               (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                                lVar1,*(long *)(lVar1 + 0x598),pcVar5,param_13,ppcVar14);
            *(int *)(plVar7 + 2) = (int)ppcVar10;
            uVar4 = xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,pcVar6,lVar12,extraout_RDX_00,
                            pcVar5,param_13,ppcVar14);
            plVar7[6] = extraout_RAX_00;
            ppcVar11 = (char **)(ulong)((int)ppcVar10 + 1);
            uVar4 = format_add(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               plVar7[7],"line","%u",ppcVar10,param_13,ppcVar14,(char)param_10);
            param_13 = (long *)0x0;
            pcVar5 = (char *)0x0;
            uVar4 = format_defaults(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    (uint **)plVar7[7],lVar9,(uint *)0x0,(uint *)0x0,(uint *)0x0,
                                    ppcVar14);
            pcVar8 = cmd_template_replace
                               (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__ptr,
                                *(char **)(lVar9 + 0xe8),1,pcVar5,param_13,ppcVar14);
            plVar7[8] = (long)pcVar8;
            uVar16 = window_choose_add(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,
                                       param_3,param_4,param_5,param_6,param_7,param_8,
                                       *(long *)(*(long *)(lVar3 + 8) + 0x138),(long)plVar7,
                                       extraout_RDX_01,pcVar5,param_13,ppcVar14);
          }
          lVar9 = *(long *)(lVar9 + 0x5c0);
          ppcVar10 = ppcVar11;
        } while (lVar9 != 0);
        uVar13 = (uint)ppcVar15;
      }
      free(__ptr);
      window_choose_ready(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,*(long *)(*(long *)(lVar3 + 8) + 0x138),uVar13,
                          cmd_choose_client_callback,pcVar5,param_13,(ulong)uVar13);
      local_3c = 0;
    }
    else {
      local_3c = 0;
    }
  }
  return local_3c;
}



void cmd_choose_client_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  long lVar1;
  int iVar2;
  
  if (((param_9 != (long *)0x0) && ((*(byte *)(*param_9 + 0x421) & 2) == 0)) && (clients != 0)) {
    iVar2 = 0;
    lVar1 = clients;
    while (*(int *)(param_9 + 2) != iVar2) {
      lVar1 = *(long *)(lVar1 + 0x5c0);
      iVar2 = iVar2 + 1;
      if (lVar1 == 0) {
        return;
      }
    }
    if (*(long *)(lVar1 + 0x598) != 0) {
      window_choose_data_run
                (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
      return;
    }
  }
  return;
}



undefined4
cmd_choose_tree_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9,
          long param_10,undefined8 param_11,undefined8 param_12,char *param_13,char **param_14)

{
  uint *puVar1;
  long lVar2;
  byte **ppbVar3;
  long lVar4;
  bool bVar5;
  bool bVar6;
  byte bVar7;
  undefined8 uVar8;
  ulong uVar9;
  char *pcVar10;
  uint *puVar11;
  uint *puVar12;
  long lVar13;
  uint *puVar14;
  undefined *puVar15;
  char *extraout_RAX;
  undefined8 extraout_RDX;
  undefined1 *puVar16;
  undefined8 extraout_RDX_00;
  undefined8 uVar17;
  undefined8 extraout_RDX_01;
  uint uVar18;
  uint uVar19;
  uint *puVar20;
  uint uVar21;
  long in_FS_OFFSET;
  bool bVar22;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 uVar23;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar24;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined in_stack_ffffffffffffff48;
  long *local_b0;
  char *local_98;
  uint local_80;
  uint local_7c;
  char *local_78;
  uint *local_70;
  undefined4 local_64;
  char **local_58;
  char *local_50;
  char *local_48;
  long local_40;
  
  puVar1 = *(uint **)(param_10 + 0xa0);
  lVar2 = *(long *)(param_10 + 0xa8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  ppbVar3 = (byte **)param_9[1];
  lVar4 = *(long *)(param_10 + 0x80);
  if (lVar4 == 0) {
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "no client available",param_11,(ulong)puVar1,(long)param_13,param_14,
               in_stack_ffffffffffffff48);
    local_64 = 0xffffffff;
    goto LAB_001298a0;
  }
  puVar11 = puVar1;
  uVar8 = window_pane_set_mode
                    (*(long *)(*(long *)(lVar2 + 8) + 0x138),(undefined **)window_choose_mode);
  if ((int)uVar8 == 0) {
    if ((undefined1 *)*param_9 == cmd_choose_session_entry) {
      puVar12 = (uint *)args_get(ppbVar3,0x46);
      local_70 = (uint *)
                 "#{session_name}: #{session_windows} windows#{?session_grouped, (group ,}#{session_group}#{?session_grouped,),}#{?session_attached, (attached),}"
      ;
      if (puVar12 != (uint *)0x0) {
        local_70 = puVar12;
      }
      local_78 = "switch-client -t \'%%\'";
      if (*(int *)(ppbVar3 + 1) != 0) {
        local_78 = *(char **)ppbVar3[2];
      }
      local_98 = (char *)0x0;
      uVar18 = 1;
      bVar22 = true;
      goto LAB_00129926;
    }
    if ((undefined1 *)*param_9 == cmd_choose_window_entry) {
      uVar8 = 0x46;
      pcVar10 = (char *)args_get(ppbVar3,0x46);
      param_14 = (char **)(ulong)*(uint *)(ppbVar3 + 1);
      if (pcVar10 == (char *)0x0) {
        pcVar10 = "#{window_index}: #{window_name}#{window_flags} \"#{pane_title}\"";
      }
      local_98 = "select-window -t \'%%\'";
      if (*(uint *)(ppbVar3 + 1) != 0) {
        local_98 = *(char **)ppbVar3[2];
      }
      local_78 = (char *)0x0;
      uVar18 = 0;
      local_70 = (uint *)0x0;
      local_7c = 1;
      uVar17 = extraout_RDX_00;
      uVar23 = extraout_XMM0_Da_08;
      uVar24 = extraout_XMM0_Db_04;
LAB_00129cb0:
      uVar17 = xstrdup(CONCAT44(uVar24,uVar23),param_2,param_3,param_4,param_5,param_6,param_7,
                       param_8,pcVar10,uVar8,uVar17,puVar11,param_13,param_14);
      bVar7 = 1;
      local_50 = extraout_RAX;
      local_48 = (char *)xstrdup(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 pcVar10,uVar8,extraout_RDX_01,puVar11,param_13,param_14);
      bVar5 = false;
      bVar22 = false;
    }
    else {
      uVar9 = args_has(ppbVar3,0x77);
      local_7c = (uint)uVar9;
      uVar8 = args_has(ppbVar3,0x73);
      uVar18 = (uint)uVar8;
      pcVar10 = (char *)args_get(ppbVar3,0x62);
      local_78 = "switch-client -t \'%%\'";
      if (pcVar10 != (char *)0x0) {
        local_78 = pcVar10;
      }
      pcVar10 = (char *)args_get(ppbVar3,99);
      local_98 = "select-window -t \'%%\'";
      if (pcVar10 != (char *)0x0) {
        local_98 = pcVar10;
      }
      puVar11 = (uint *)args_get(ppbVar3,0x53);
      uVar8 = 0x57;
      local_70 = (uint *)
                 "#{session_name}: #{session_windows} windows#{?session_grouped, (group ,}#{session_group}#{?session_grouped,),}#{?session_attached, (attached),}"
      ;
      if (puVar11 != (uint *)0x0) {
        local_70 = puVar11;
      }
      pcVar10 = (char *)args_get(ppbVar3,0x57);
      if (pcVar10 == (char *)0x0) {
        pcVar10 = "#{window_index}: #{window_name}#{window_flags} \"#{pane_title}\"";
      }
      if ((local_7c | uVar18) == 0) {
        local_7c = 1;
        uVar18 = 1;
LAB_00129853:
        uVar8 = xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,(long *)&local_50,&DAT_00177c81,pcVar10,
                          puVar11,param_13,param_14,in_stack_ffffffffffffff48);
        bVar7 = 1;
        xasprintf(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)&local_48,
                  &DAT_00177c8b,pcVar10,puVar11,param_13,param_14,in_stack_ffffffffffffff48);
        bVar5 = true;
        bVar22 = true;
      }
      else {
        bVar22 = uVar18 != 0;
        if (local_7c != 0) {
          if (bVar22) goto LAB_00129853;
          param_13 = (char *)(uVar9 & 0xffffffff);
          uVar17 = extraout_RDX;
          uVar23 = extraout_XMM0_Da;
          uVar24 = extraout_XMM0_Db;
          if (local_7c != 0) goto LAB_00129cb0;
        }
LAB_00129926:
        local_48 = (char *)0x0;
        bVar7 = 0;
        local_50 = (char *)0x0;
        local_7c = 0;
        bVar5 = false;
      }
    }
    puVar12 = (uint *)sessions_RB_MINMAX(&sessions,-1);
    if (puVar12 != (uint *)0x0) {
      puVar20 = (uint *)0xffffffff;
      local_80 = 0xffffffff;
      local_b0 = (long *)0x0;
      bVar6 = (bool)(uVar18 == 0 & bVar7);
      uVar23 = extraout_XMM0_Da_00;
LAB_001299b3:
      uVar18 = (int)puVar20 + 1;
      puVar20 = (uint *)(ulong)uVar18;
      if (bVar6) {
        if (puVar1 == puVar12) goto LAB_00129a90;
      }
      else {
        param_14 = (char **)(ulong)uVar18;
        puVar11 = local_70;
        param_13 = local_78;
        local_b0 = window_choose_add_session
                             (uVar23,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(long *)(*(long *)(lVar2 + 8) + 0x138),lVar4,puVar12,(char *)local_70
                              ,local_78,(ulong)param_14);
        if ((local_7c == 0) && (bVar22)) {
          if (puVar1 == puVar12) {
            local_80 = uVar18;
          }
          puVar12 = (uint *)sessions_RB_NEXT((long)puVar12);
          uVar23 = extraout_XMM0_Da_02;
          goto joined_r0x00129a1c;
        }
LAB_00129a90:
        uVar18 = 0xffffffff;
        lVar13 = winlinks_RB_MINMAX((long *)(puVar12 + 0x3e),-1);
        while (lVar13 != 0) {
          lVar13 = winlinks_RB_NEXT(lVar13);
          uVar18 = uVar18 + 1;
        }
        puVar14 = (uint *)winlinks_RB_MINMAX((long *)(puVar12 + 0x3e),-1);
        if (puVar14 != (uint *)0x0) {
          puVar15 = &DAT_001816c0;
          uVar21 = 0xffffffff;
          if (local_b0 != (long *)0x0) {
            puVar15 = &DAT_001816bd;
          }
          uVar23 = extraout_XMM0_Da_05;
          uVar24 = extraout_XMM0_Db_01;
          do {
            while( true ) {
              uVar21 = uVar21 + 1;
              uVar19 = ((int)puVar20 + 1) - (uint)!bVar5;
              puVar20 = (uint *)(ulong)uVar19;
              if (((*(uint **)(puVar12 + 0x38) == puVar14) && (puVar1 == puVar12)) &&
                 (local_80 = uVar19, bVar6)) {
                local_80 = uVar21;
              }
              if (local_b0 == (long *)0x0) {
                puVar16 = &DAT_001816c0;
              }
              else {
                puVar16 = (undefined1 *)local_b0[8];
              }
              uVar23 = xasprintf(CONCAT44(uVar24,uVar23),param_2,param_3,param_4,param_5,param_6,
                                 param_7,param_8,(long *)&local_58,"%s %s %s",puVar16,puVar15,
                                 local_98,param_14,in_stack_ffffffffffffff48);
              param_13 = local_48;
              if (uVar18 != uVar21) {
                param_13 = local_50;
              }
              lVar13 = *(long *)(*(long *)(lVar2 + 8) + 0x138);
              param_14 = local_58;
              if (!bVar6) break;
              puVar11 = puVar14;
              window_choose_add_window
                        (uVar23,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar13,lVar4
                         ,puVar12,puVar14,param_13,local_58,uVar21);
              free(local_58);
              puVar14 = (uint *)winlinks_RB_NEXT((long)puVar14);
              uVar23 = extraout_XMM0_Da_07;
              uVar24 = extraout_XMM0_Db_03;
              if (puVar14 == (uint *)0x0) goto LAB_00129a20;
            }
            puVar11 = puVar20;
            window_choose_add_window
                      (uVar23,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar13,lVar4,
                       puVar12,puVar14,param_13,local_58,uVar19);
            free(local_58);
            puVar14 = (uint *)winlinks_RB_NEXT((long)puVar14);
            uVar23 = extraout_XMM0_Da_06;
            uVar24 = extraout_XMM0_Db_02;
          } while (puVar14 != (uint *)0x0);
          goto LAB_001299a3;
        }
        if (bVar6) goto LAB_00129a20;
      }
LAB_001299a3:
      puVar12 = (uint *)sessions_RB_NEXT((long)puVar12);
      uVar23 = extraout_XMM0_Da_01;
joined_r0x00129a1c:
      if (puVar12 == (uint *)0x0) goto LAB_00129a20;
      goto LAB_001299b3;
    }
    local_80 = 0xffffffff;
LAB_00129a20:
    free(local_50);
    free(local_48);
    window_choose_ready(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(long *)(*(long *)(lVar2 + 8) + 0x138),local_80,(undefined *)0x0,puVar11,
                        param_13,param_14);
    uVar8 = args_has(ppbVar3,0x75);
    if ((int)uVar8 != 0) {
      uVar8 = window_choose_expand_all
                        (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_04),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,*(long *)(*(long *)(lVar2 + 8) + 0x138));
      window_choose_set_current
                (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 *(long *)(*(long *)(lVar2 + 8) + 0x138),local_80);
      local_64 = 0;
      goto LAB_001298a0;
    }
  }
  local_64 = 0;
LAB_001298a0:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return local_64;
}



undefined8
cmd_clear_history_exec
          (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
          undefined8 param_9,long param_10,undefined8 param_11,undefined8 param_12,
          undefined8 param_13,undefined8 param_14)

{
  uint *puVar1;
  long lVar2;
  undefined8 extraout_RDX;
  undefined4 uVar3;
  
  puVar1 = *(uint **)(param_10 + 0xb8);
  lVar2 = *(long *)(puVar1 + 0x54);
  if (*(undefined1 **)(puVar1 + 0x7a) != window_copy_mode) {
    grid_clear_history(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                       param_10,param_11,param_12,param_13,param_14);
    return 0;
  }
  uVar3 = window_pane_reset_mode(puVar1);
  grid_clear_history(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,param_10,
                     extraout_RDX,param_12,param_13,param_14);
  return 0;
}



undefined8
cmd_command_prompt_exec
          (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,char *param_12,undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  byte **ppbVar4;
  long *plVar5;
  long extraout_RAX;
  char *pcVar6;
  long extraout_RAX_00;
  long extraout_RAX_01;
  long extraout_RAX_02;
  size_t sVar7;
  long lVar8;
  char *extraout_RAX_03;
  long extraout_RAX_04;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar9;
  undefined *puVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined auVar13 [16];
  char *in_stack_ffffffffffffffc8;
  
  lVar2 = *(long *)(param_10 + 0x80);
  lVar3 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(lVar2 + 0x550) == 0) {
    ppbVar4 = *(byte ***)(param_9 + 8);
    auVar13 = xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x38,param_10,
                      param_11,param_12,param_13,param_14);
    plVar5 = auVar13._0_8_;
    uVar1 = *(uint *)(ppbVar4 + 1);
    *plVar5 = lVar2;
    *(undefined4 *)(plVar5 + 6) = 1;
    plVar5[1] = 0;
    plVar5[2] = 0;
    plVar5[3] = 0;
    plVar5[4] = 0;
    plVar5[5] = 0;
    if (uVar1 == 0) {
      xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,"%1",(ulong)uVar1,auVar13._8_8_,param_12,param_13,param_14);
      plVar5[5] = extraout_RAX;
    }
    else {
      xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,*(char **)ppbVar4[2],(ulong)uVar1,auVar13._8_8_,param_12,param_13,
              param_14);
      plVar5[5] = extraout_RAX_02;
    }
    uVar9 = 0x70;
    pcVar6 = (char *)args_get(ppbVar4,0x70);
    if (pcVar6 == (char *)0x0) {
      param_12 = (char *)(ulong)*(uint *)(ppbVar4 + 1);
      if (*(uint *)(ppbVar4 + 1) == 0) {
        xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,":",uVar9,extraout_RDX,param_12,param_13,param_14);
        plVar5[4] = extraout_RAX_04;
        lVar8 = extraout_RAX_04;
      }
      else {
        param_12 = (char *)plVar5[5];
        sVar7 = strcspn(param_12," ,");
        xasprintf(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,plVar5 + 4,"(%.*s) ",sVar7,param_12,param_13,param_14,
                  (char)in_stack_ffffffffffffffc8);
        lVar8 = plVar5[4];
      }
      plVar5[3] = lVar8;
      puVar10 = &DAT_00177cdb;
      pcVar6 = strsep((char **)(plVar5 + 3),",");
      xstrdup(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_05),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,pcVar6,puVar10,extraout_RDX_00,param_12,param_13,param_14);
      in_stack_ffffffffffffffc8 = extraout_RAX_03;
    }
    else {
      xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,pcVar6,uVar9,extraout_RDX,param_12,param_13,param_14);
      plVar5[4] = extraout_RAX_00;
      plVar5[3] = extraout_RAX_00;
      pcVar6 = strsep((char **)(plVar5 + 3),",");
      xasprintf(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,(long *)&stack0xffffffffffffffc8,&DAT_00177cd6,pcVar6,
                param_12,param_13,param_14,(char)in_stack_ffffffffffffffc8);
    }
    uVar9 = 0x49;
    pcVar6 = (char *)args_get(ppbVar4,0x49);
    uVar11 = extraout_XMM0_Da_02;
    uVar12 = extraout_XMM0_Db_02;
    if (pcVar6 != (char *)0x0) {
      xstrdup(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,pcVar6,uVar9,pcVar6,param_12,param_13,param_14);
      plVar5[1] = extraout_RAX_01;
      plVar5[2] = extraout_RAX_01;
      pcVar6 = strsep((char **)(plVar5 + 2),",");
      uVar11 = extraout_XMM0_Da_03;
      uVar12 = extraout_XMM0_Db_03;
    }
    status_prompt_set(CONCAT44(uVar12,uVar11),param_2,param_3,param_4,param_5,param_6,param_7,
                      param_8,lVar2,in_stack_ffffffffffffffc8,pcVar6,cmd_command_prompt_callback,
                      cmd_command_prompt_free,plVar5,0);
    free(in_stack_ffffffffffffffc8);
  }
  if (lVar3 == *(long *)(in_FS_OFFSET + 0x28)) {
    return 0;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmd_command_prompt_free(void *param_1)

{
  free(*(void **)((long)param_1 + 8));
  free(*(void **)((long)param_1 + 0x20));
  free(*(void **)((long)param_1 + 0x28));
  free(param_1);
  return;
}



bool cmd_command_prompt_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,char *param_10,undefined8 param_11,undefined *param_12,
               undefined8 param_13,char **param_14)

{
  long lVar1;
  byte *pbVar2;
  int iVar3;
  char *pcVar4;
  char *pcVar5;
  __int32_t **pp_Var6;
  undefined8 uVar7;
  byte **ppbVar8;
  long in_FS_OFFSET;
  bool bVar9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined in_stack_ffffffffffffffc8;
  int *local_30;
  byte *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 != (char *)0x0) {
    lVar1 = *param_9;
    pcVar4 = cmd_template_replace
                       (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (char *)param_9[5],param_10,*(int *)(param_9 + 6),param_12,param_13,param_14
                       );
    free((void *)param_9[5]);
    param_9[5] = (long)pcVar4;
    pcVar5 = strsep((char **)(param_9 + 3),",");
    if (pcVar5 != (char *)0x0) {
      xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
                param_7,param_8,(long *)&local_28,&DAT_00177cd6,pcVar5,param_12,param_13,param_14,
                in_stack_ffffffffffffffc8);
      pcVar4 = strsep((char **)(param_9 + 2),",");
      status_prompt_update
                (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,lVar1,(char *)local_28,pcVar4,param_12,param_13,param_14);
      free(local_28);
      *(int *)(param_9 + 6) = *(int *)(param_9 + 6) + 1;
      bVar9 = true;
      goto LAB_0012a065;
    }
    uVar7 = 0;
    ppbVar8 = &local_28;
    iVar3 = cmd_string_parse(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                             param_5,param_6,param_7,param_8,pcVar4,&local_30,(char *)0x0,
                             (byte *)0x0,(long *)ppbVar8,param_14);
    pbVar2 = local_28;
    if (iVar3 == 0) {
      cmdq_run(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               *(int **)(lVar1 + 0x5b0),local_30,(undefined4 *)0x0,uVar7,ppbVar8,param_14);
      cmd_list_free(local_30);
      bVar9 = *(code **)(lVar1 + 0x568) != cmd_command_prompt_callback;
      goto LAB_0012a065;
    }
    if (local_28 != (byte *)0x0) {
      pp_Var6 = __ctype_toupper_loc();
      *pbVar2 = (byte)(*pp_Var6)[*pbVar2];
      status_message_set(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,lVar1,"%s",local_28,uVar7,(long)ppbVar8,
                         param_14,in_stack_ffffffffffffffc8);
      free(local_28);
    }
  }
  bVar9 = false;
LAB_0012a065:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return bVar9;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
cmd_confirm_before_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  byte **ppbVar1;
  long lVar2;
  long lVar3;
  undefined8 *puVar4;
  undefined8 extraout_RAX;
  char *__ptr;
  char *pcVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar6;
  char *pcVar7;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined auVar9 [16];
  undefined in_stack_ffffffffffffffb8;
  char *local_40;
  char *local_38;
  long local_30;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  lVar2 = *(long *)(param_10 + 0x80);
  uVar6 = 0x70;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  lVar3 = args_get(ppbVar1,0x70);
  if (lVar3 == 0) {
    xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
            param_7,param_8,*(char **)ppbVar1[2],uVar6,extraout_RDX,param_12,param_13,param_14);
    local_38 = __ptr;
    pcVar5 = strsep(&local_38," \t");
    pcVar7 = "Confirm \'%s\'? (y/n) ";
    xasprintf(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,(long *)&local_40,"Confirm \'%s\'? (y/n) ",pcVar5,param_12,
              param_13,param_14,in_stack_ffffffffffffffb8);
    free(__ptr);
    uVar6 = extraout_RDX_01;
    uVar8 = extraout_XMM0_Da_02;
  }
  else {
    pcVar7 = "%s ";
    uVar8 = xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                      param_6,param_7,param_8,(long *)&local_40,&DAT_00177cd6,lVar3,param_12,
                      param_13,param_14,in_stack_ffffffffffffffb8);
    uVar6 = extraout_RDX_00;
  }
  auVar9 = xmalloc(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x10,pcVar7,uVar6,
                   param_12,param_13,param_14);
  puVar4 = auVar9._0_8_;
  uVar6 = xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,*(char **)ppbVar1[2],pcVar7,auVar9._8_8_,param_12,param_13
                  ,param_14);
  puVar4[1] = lVar2;
  *puVar4 = extraout_RAX;
  *(int *)(lVar2 + 0x5b8) = *(int *)(lVar2 + 0x5b8) + 1;
  status_prompt_set(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,local_40,
                    (char *)0x0,cmd_confirm_before_callback,cmd_confirm_before_free,puVar4,1);
  free(local_40);
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return 0;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
cmd_confirm_before_callback
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,char **param_9
          ,byte *param_10)

{
  byte bVar1;
  char *pcVar2;
  int iVar3;
  __int32_t **pp_Var4;
  ulong uVar5;
  void **ppvVar6;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined in_stack_ffffffffffffffb8;
  int *local_40;
  void *local_38;
  long local_30;
  
  pcVar2 = param_9[1];
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if ((((pcVar2[0x421] & 2U) == 0) && (param_10 != (byte *)0x0)) && (bVar1 = *param_10, bVar1 != 0))
  {
    pp_Var4 = __ctype_tolower_loc();
    if (((*pp_Var4)[bVar1] == 0x79) && (param_10[1] == 0)) {
      uVar5 = 0;
      ppvVar6 = &local_38;
      iVar3 = cmd_string_parse(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                               param_5,param_6,param_7,param_8,*param_9,&local_40,(char *)0x0,
                               (byte *)0x0,(long *)ppvVar6,in_R9);
      if (iVar3 == 0) {
        cmdq_run(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 *(int **)(pcVar2 + 0x5b0),local_40,(undefined4 *)0x0,uVar5,ppvVar6,in_R9);
        cmd_list_free(local_40);
      }
      else if (local_38 != (void *)0x0) {
        cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,*(long *)(pcVar2 + 0x5b0),"%s",local_38,uVar5,
                   (long)ppvVar6,in_R9,in_stack_ffffffffffffffb8);
        free(local_38);
      }
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return 0;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmd_confirm_before_free
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               void **param_9)

{
  server_client_unref(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      (long)param_9[1]);
  free(*param_9);
  free(param_9);
  return;
}



undefined8
cmd_copy_mode_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long *param_9,long param_10,undefined8 param_11,undefined8 param_12,char *param_13
                  ,size_t param_14)

{
  byte **ppbVar1;
  long lVar2;
  undefined8 uVar3;
  ulong uVar4;
  uint *puVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  int *local_48;
  long local_40;
  
  ppbVar1 = (byte **)param_9[1];
  lVar2 = *(long *)(param_10 + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  puVar5 = *(uint **)(param_10 + 0xb8);
  uVar3 = args_has(ppbVar1,0x4d);
  if (((int)uVar3 == 0) ||
     (((puVar5 = (uint *)cmd_mouse_pane((int *)(*(long *)(param_10 + 0x28) + 8),&local_48,
                                        (long *)0x0), lVar2 != 0 && (puVar5 != (uint *)0x0)) &&
      (*(int **)(lVar2 + 0x598) == local_48)))) {
    if ((undefined1 *)*param_9 == cmd_clock_mode_entry) {
      window_pane_set_mode((long)puVar5,(undefined **)window_clock_mode);
    }
    else {
      if (*(undefined1 **)(puVar5 + 0x7a) != window_copy_mode) {
        uVar3 = window_pane_set_mode((long)puVar5,(undefined **)window_copy_mode);
        if ((int)uVar3 != 0) goto LAB_0012a442;
        uVar4 = args_has((byte **)param_9[1],0x65);
        window_copy_init_from_pane
                  (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar5,
                   uVar4 & 0xffffffff,extraout_RDX,param_12,param_13,param_14);
      }
      uVar3 = args_has(ppbVar1,0x4d);
      if ((int)uVar3 != 0) {
        if ((*(undefined1 **)(puVar5 + 0x7a) != window_copy_mode) &&
           (*(undefined1 **)(puVar5 + 0x7a) != (undefined1 *)0x0)) goto LAB_0012a442;
        window_copy_start_drag
                  (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,lVar2,(int *)(*(long *)(param_10 + 0x28) + 8));
      }
      if (*(undefined1 **)(puVar5 + 0x7a) == window_copy_mode) {
        uVar6 = 0x75;
        uVar3 = args_has((byte **)param_9[1],0x75);
        if ((int)uVar3 != 0) {
          window_copy_pageup(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,(long)puVar5,uVar6,extraout_RDX_00,param_12,param_13,param_14);
        }
      }
    }
  }
LAB_0012a442:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return 0;
}



ulong cmd_detach_client_exec
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long *param_9,long param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  byte **ppbVar1;
  long lVar2;
  long *plVar3;
  undefined8 uVar4;
  ulong uVar5;
  undefined8 uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  long *plVar7;
  uint uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 uVar10;
  
  plVar7 = *(long **)(param_10 + 0x80);
  if ((undefined1 *)*param_9 == cmd_suspend_client_entry) {
    uVar9 = tty_stop_tty(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)(plVar7 + 0x1c));
    *(uint *)(plVar7 + 0x84) = *(uint *)(plVar7 + 0x84) | 0x40;
    proc_send(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*plVar7,0xd6,0xffffffff,
              (void *)0x0,0,param_14);
    return 0;
  }
  ppbVar1 = (byte **)param_9[1];
  uVar4 = args_has(ppbVar1,0x50);
  uVar5 = args_has(ppbVar1,0x73);
  uVar10 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  uVar8 = ((int)uVar4 != 0) + 0xc9;
  if ((int)uVar5 == 0) {
    uVar6 = args_has(ppbVar1,0x61);
    uVar10 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
    uVar4 = extraout_RDX_00;
    plVar3 = clients;
    if ((int)uVar6 != 0) {
      for (; plVar3 != (long *)0x0; plVar3 = (long *)plVar3[0xb8]) {
        if ((plVar3[0xb3] != 0) && (plVar7 != plVar3)) {
          uVar10 = server_client_detach
                             (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar3,
                              uVar8,uVar4,param_12,param_13,param_14);
          uVar4 = extraout_RDX_01;
        }
      }
      return uVar5 & 0xffffffff;
    }
    server_client_detach
              (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,plVar7,uVar8,extraout_RDX_00,param_12,param_13,param_14);
  }
  else {
    lVar2 = *(long *)(param_10 + 0xe0);
    uVar4 = extraout_RDX;
    for (plVar7 = clients; plVar7 != (long *)0x0; plVar7 = (long *)plVar7[0xb8]) {
      while (plVar7[0xb3] == lVar2) {
        uVar10 = server_client_detach
                           (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar7,
                            uVar8,uVar4,param_12,param_13,param_14);
        plVar7 = (long *)plVar7[0xb8];
        uVar4 = extraout_RDX_02;
        if (plVar7 == (long *)0x0) {
          return 2;
        }
      }
    }
  }
  return 2;
}



undefined8
cmd_display_message_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined *param_12,long param_13,char **param_14)

{
  byte **ppbVar1;
  long lVar2;
  uint *puVar3;
  undefined8 uVar4;
  char *pcVar5;
  uint **ppuVar6;
  time_t tVar7;
  tm *ptVar8;
  undefined8 extraout_RDX;
  long *plVar9;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined in_stack_ffffffffffffffa8;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  ptVar8 = *(tm **)(param_10 + 0xa8);
  lVar2 = *(long *)(param_10 + 0x80);
  puVar3 = *(uint **)(param_10 + 0xa0);
  plVar9 = *(long **)(param_10 + 0xb8);
  uVar4 = args_has(ppbVar1,0x46);
  if (((int)uVar4 == 0) || (*(uint *)(ppbVar1 + 1) == 0)) {
    pcVar5 = (char *)args_get(ppbVar1,0x46);
    if (*(int *)(ppbVar1 + 1) != 0) {
      pcVar5 = *(char **)ppbVar1[2];
    }
    if (pcVar5 == (char *)0x0) {
      pcVar5 = 
      "[#{session_name}] #{window_index}:#{window_name}, current pane #{pane_index} - (%H:%M %d-%b-%y)"
      ;
    }
    ppuVar6 = (uint **)format_create(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,
                                     param_7,param_8,param_10,0,extraout_RDX,param_12,param_13,
                                     param_14);
    format_defaults(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    ppuVar6,lVar2,puVar3,(uint *)ptVar8,(uint *)plVar9,param_14);
    tVar7 = time((time_t *)0x0);
    pcVar5 = format_expand_time(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,(long *)ppuVar6,pcVar5,tVar7,ptVar8,plVar9,param_14);
    uVar4 = args_has(*(byte ***)(param_9 + 8),0x70);
    if ((int)uVar4 == 0) {
      status_message_set(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,lVar2,"%s",pcVar5,ptVar8,(long)plVar9,param_14,in_stack_ffffffffffffffa8);
    }
    else {
      cmdq_print(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_10,"%s",pcVar5,ptVar8,plVar9,(size_t)param_14,in_stack_ffffffffffffffa8);
    }
    free(pcVar5);
    format_free(ppuVar6);
    uVar4 = 0;
  }
  else {
    cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "only one of -F or argument must be given",(ulong)*(uint *)(ppbVar1 + 1),
               (ulong)param_12,param_13,param_14,in_stack_ffffffffffffffa8);
    uVar4 = 0xffffffff;
  }
  return uVar4;
}



undefined8
cmd_display_panes_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
          undefined8 param_9,long param_10,undefined8 param_11,undefined8 param_12,
          undefined8 param_13,undefined8 param_14)

{
  server_set_identify(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      *(long *)(param_10 + 0x80),param_10,param_11,param_12,param_13,param_14);
  return 0;
}



long FUN_0012a7d0(void)

{
  bool bVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  lVar4 = 0;
  lVar2 = clients;
  if (clients != 0) {
    do {
      while (lVar3 = lVar2, *(long *)(lVar3 + 0x598) != 0) {
        if (lVar4 != 0) {
          if (*(long *)(lVar3 + 0xa8) == *(long *)(lVar4 + 0xa8)) {
            bVar1 = *(long *)(lVar4 + 0xb0) < *(long *)(lVar3 + 0xb0);
          }
          else {
            bVar1 = *(long *)(lVar4 + 0xa8) < *(long *)(lVar3 + 0xa8);
          }
          if (bVar1) {
            lVar4 = lVar3;
          }
          break;
        }
        lVar2 = *(long *)(lVar3 + 0x5c0);
        lVar4 = lVar3;
        if (*(long *)(lVar3 + 0x5c0) == 0) {
          return lVar3;
        }
      }
      lVar2 = *(long *)(lVar3 + 0x5c0);
    } while (*(long *)(lVar3 + 0x5c0) != 0);
  }
  return lVar4;
}



int * cmd_find_try_TMUX(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,long param_10)

{
  int iVar1;
  __pid_t _Var2;
  long lVar3;
  int *piVar4;
  undefined8 uVar5;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined in_stack_fffffffffffffec8;
  uint local_134;
  long local_130;
  undefined local_128 [264];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  lVar3 = environ_find(*(char ***)(param_9 + 0xb8),"TMUX");
  if (lVar3 != 0) {
    iVar1 = __isoc99_sscanf(*(undefined8 *)(lVar3 + 8),"%255[^,],%lld,%d",local_128,&local_130,
                            &local_134);
    if (iVar1 == 3) {
      _Var2 = getpid();
      if (_Var2 == local_130) {
        log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "client %p TMUX is %s (session @%u)",param_9,*(undefined8 *)(lVar3 + 8),
                 (ulong)local_134,in_R9,in_stack_fffffffffffffec8);
        piVar4 = session_find_by_id(local_134);
        if (piVar4 != (int *)0x0) {
          if (param_10 == 0) goto LAB_0012a913;
          uVar5 = session_has((long)piVar4,param_10);
          if ((int)uVar5 != 0) goto LAB_0012a913;
        }
      }
    }
  }
  piVar4 = (int *)0x0;
LAB_0012a913:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return piVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



bool cmd_find_client_better(long param_1,long param_2)

{
  if (param_2 == 0) {
    return true;
  }
  if (*(long *)(param_1 + 0xa8) != *(long *)(param_2 + 0xa8)) {
    return *(long *)(param_2 + 0xa8) < *(long *)(param_1 + 0xa8);
  }
  return *(long *)(param_2 + 0xb0) < *(long *)(param_1 + 0xb0);
}



long cmd_find_best_client(long *param_1,int param_2)

{
  long *plVar1;
  long lVar2;
  bool bVar3;
  long lVar4;
  long lVar5;
  
  if (param_1 != (long *)0x0) {
    if (param_2 == 0) {
      lVar5 = 0;
    }
    else {
      lVar5 = 0;
      plVar1 = param_1 + (param_2 - 1);
      while( true ) {
        lVar2 = *param_1;
        lVar4 = lVar5;
        if ((*(long *)(lVar2 + 0x598) != 0) && (lVar4 = lVar2, lVar5 != 0)) {
          if (*(long *)(lVar2 + 0xa8) == *(long *)(lVar5 + 0xa8)) {
            bVar3 = *(long *)(lVar5 + 0xb0) < *(long *)(lVar2 + 0xb0);
          }
          else {
            bVar3 = *(long *)(lVar5 + 0xa8) < *(long *)(lVar2 + 0xa8);
          }
          lVar4 = lVar5;
          if (bVar3) {
            lVar4 = lVar2;
          }
        }
        lVar5 = lVar4;
        if (param_1 == plVar1) break;
        param_1 = param_1 + 1;
      }
    }
    return lVar5;
  }
  lVar5 = FUN_0012a7d0();
  return lVar5;
}



uint cmd_find_session_better(long param_1,long param_2,uint param_3)

{
  uint uVar1;
  
  if (param_2 == 0) {
    return 1;
  }
  if ((param_3 & 1) != 0) {
    uVar1 = *(uint *)(param_1 + 0x110) & 1;
    if ((*(byte *)(param_2 + 0x110) & 1) == 0) {
      if (uVar1 != 0) {
        return uVar1;
      }
    }
    else if (uVar1 == 0) {
      return 0;
    }
  }
  if (*(long *)(param_1 + 0x38) == *(long *)(param_2 + 0x38)) {
    return (uint)(*(long *)(param_2 + 0x40) < *(long *)(param_1 + 0x40));
  }
  return (uint)(*(long *)(param_2 + 0x38) < *(long *)(param_1 + 0x38));
}



long FUN_0012aa80(uint param_1)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  
  lVar2 = sessions_RB_MINMAX(&sessions,-1);
  if (lVar2 != 0) {
    lVar3 = 0;
    do {
      uVar1 = cmd_find_session_better(lVar2,lVar3,param_1);
      if (uVar1 != 0) {
        lVar3 = lVar2;
      }
      lVar2 = sessions_RB_NEXT(lVar2);
    } while (lVar2 != 0);
    return lVar3;
  }
  return 0;
}



long cmd_find_best_session(long *param_1,int param_2,uint param_3)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  ulong uVar4;
  long *plVar5;
  
  uVar4 = (ulong)param_3;
  if (param_1 == (long *)0x0) {
    lVar2 = FUN_0012aa80(param_3);
    return lVar2;
  }
  if (param_2 != 0) {
    lVar2 = 0;
    plVar5 = param_1 + (ulong)(param_2 - 1) + 1;
    do {
      lVar3 = *param_1;
      uVar1 = cmd_find_session_better(lVar3,lVar2,(uint)uVar4);
      if (uVar1 != 0) {
        lVar2 = lVar3;
      }
      param_1 = param_1 + 1;
    } while (param_1 != plVar5);
    return lVar2;
  }
  return 0;
}



undefined8 cmd_find_best_winlink_with_window(long param_1)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  
  puVar2 = *(undefined4 **)(*(long *)(param_1 + 0x18) + 0xe0);
  if (*(long *)(puVar2 + 2) != *(long *)(param_1 + 0x28)) {
    puVar2 = (undefined4 *)winlinks_RB_MINMAX((long *)(*(long *)(param_1 + 0x18) + 0xf8),-1);
    while( true ) {
      if (puVar2 == (undefined4 *)0x0) {
        return 0xffffffff;
      }
      if (*(long *)(puVar2 + 2) == *(long *)(param_1 + 0x28)) break;
      puVar2 = (undefined4 *)winlinks_RB_NEXT((long)puVar2);
    }
  }
  uVar1 = *puVar2;
  *(undefined4 **)(param_1 + 0x20) = puVar2;
  *(undefined4 *)(param_1 + 0x38) = uVar1;
  return 0;
}



undefined8
cmd_find_best_session_with_window
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  int *piVar1;
  long *__ptr;
  undefined8 uVar2;
  long *plVar3;
  long lVar4;
  uint uVar5;
  ulong uVar6;
  undefined4 extraout_XMM0_Da;
  
  if ((*param_9 != 0) && (lVar4 = *(long *)(*param_9 + 8), lVar4 != 0)) {
    piVar1 = cmd_find_try_TMUX(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar4
                               ,param_9[5]);
    param_9[3] = (long)piVar1;
    if (piVar1 != (int *)0x0) goto LAB_0012ac7b;
  }
  __ptr = (long *)sessions_RB_MINMAX(&sessions,-1);
  if (__ptr != (long *)0x0) {
    uVar6 = 0;
    plVar3 = __ptr;
    __ptr = (long *)0x0;
    do {
      uVar2 = session_has((long)plVar3,param_9[5]);
      if ((int)uVar2 != 0) {
        uVar5 = (int)uVar6 + 1;
        __ptr = (long *)xreallocarray(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,
                                      param_7,param_8,__ptr,(ulong)uVar5,8,param_12,param_13,
                                      param_14);
        __ptr[uVar6] = (long)plVar3;
        uVar6 = (ulong)uVar5;
      }
      plVar3 = (long *)sessions_RB_NEXT((long)plVar3);
    } while (plVar3 != (long *)0x0);
    if ((int)uVar6 != 0) {
      lVar4 = cmd_find_best_session(__ptr,(int)uVar6,*(uint *)(param_9 + 1));
      param_9[3] = lVar4;
      if (lVar4 != 0) {
        free(__ptr);
LAB_0012ac7b:
        uVar2 = cmd_find_best_winlink_with_window((long)param_9);
        return uVar2;
      }
    }
  }
  free(__ptr);
  return 0xffffffff;
}



undefined8
cmd_find_current_session_with_client
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9,
          undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  int iVar3;
  long lVar4;
  undefined8 uVar5;
  int *piVar6;
  undefined8 extraout_RDX;
  char *__s2;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  
  lVar4 = *param_9;
  if (lVar4 == 0) {
    param_9[3] = 0;
  }
  else {
    if (*(long *)(*(long *)(lVar4 + 8) + 0xe8) == 0) {
      param_9[3] = 0;
    }
    else {
      lVar4 = window_pane_tree_RB_MINMAX(&all_window_panes,-1);
      param_1 = extraout_XMM0_Qa;
      while (lVar4 != 0) {
        __s2 = *(char **)(*(long *)(*param_9 + 8) + 0xe8);
        iVar3 = strcmp((char *)(lVar4 + 0x54),__s2);
        if (iVar3 == 0) {
          param_9[5] = *(long *)(lVar4 + 8);
          uVar5 = cmd_find_best_session_with_window
                            (extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,param_9,__s2,extraout_RDX,param_12,param_13,param_14);
          param_1 = extraout_XMM0_Qa_02;
          if ((int)uVar5 == 0) {
            puVar2 = *(undefined4 **)(param_9[3] + 0xe0);
            uVar1 = *puVar2;
            param_9[4] = (long)puVar2;
            lVar4 = *(long *)(puVar2 + 2);
            *(undefined4 *)(param_9 + 7) = uVar1;
            param_9[5] = lVar4;
            param_9[6] = *(long *)(lVar4 + 0x138);
            return uVar5;
          }
          break;
        }
        lVar4 = window_pane_tree_RB_NEXT(lVar4);
        param_1 = extraout_XMM0_Qa_00;
      }
      lVar4 = *param_9;
      param_9[3] = 0;
      if (lVar4 == 0) goto LAB_0012ad84;
    }
    piVar6 = cmd_find_try_TMUX(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               *(long *)(lVar4 + 8),0);
    param_9[3] = (long)piVar6;
    if (piVar6 != (int *)0x0) goto LAB_0012ad95;
  }
LAB_0012ad84:
  piVar6 = (int *)FUN_0012aa80(*(uint *)(param_9 + 1));
  param_9[3] = (long)piVar6;
  if (piVar6 == (int *)0x0) {
    return 0xffffffff;
  }
LAB_0012ad95:
  puVar2 = *(undefined4 **)(piVar6 + 0x38);
  uVar1 = *puVar2;
  param_9[4] = (long)puVar2;
  lVar4 = *(long *)(puVar2 + 2);
  *(undefined4 *)(param_9 + 7) = uVar1;
  param_9[5] = lVar4;
  param_9[6] = *(long *)(lVar4 + 0x138);
  return 0;
}



undefined8
cmd_find_current_session
          (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  long lVar3;
  undefined8 uVar4;
  long lVar5;
  undefined8 extraout_RDX;
  undefined1 unaff_BPL;
  char *pcVar6;
  char *pcVar7;
  undefined8 in_R9;
  
  if ((*param_9 == 0) || (lVar5 = *(long *)(*param_9 + 8), lVar5 == 0)) {
    lVar3 = FUN_0012aa80(*(uint *)(param_9 + 1));
    param_9[3] = lVar3;
    if (lVar3 == 0) {
      return 0xffffffff;
    }
  }
  else {
    pcVar7 = "";
    if (*(long *)(lVar5 + 0x598) != 0) {
      pcVar7 = " (with session)";
    }
    pcVar6 = "%s: have client %p%s";
    uVar4 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                     "%s: have client %p%s","cmd_find_current_session",lVar5,pcVar7,in_R9,unaff_BPL)
    ;
    lVar3 = *(long *)(*(long *)(*param_9 + 8) + 0x598);
    if (lVar3 == 0) {
      uVar4 = cmd_find_current_session_with_client
                        (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         pcVar6,extraout_RDX,lVar5,pcVar7,in_R9);
      return uVar4;
    }
    param_9[3] = lVar3;
  }
  puVar2 = *(undefined4 **)(lVar3 + 0xe0);
  uVar1 = *puVar2;
  param_9[4] = (long)puVar2;
  lVar5 = *(long *)(puVar2 + 2);
  *(undefined4 *)(param_9 + 7) = uVar1;
  param_9[5] = lVar5;
  param_9[6] = *(long *)(lVar5 + 0x138);
  return 0;
}



long cmd_find_current_client
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  uint *puVar1;
  undefined8 uVar2;
  long *__ptr;
  long lVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined8 uVar7;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffff78;
  long local_78;
  undefined local_70 [16];
  undefined local_60 [16];
  undefined local_50 [16];
  undefined8 local_40;
  long local_30;
  
  lVar3 = *(long *)(param_9 + 8);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if ((lVar3 == 0) || (*(long *)(lVar3 + 0x598) == 0)) {
    local_70 = (undefined  [16])0x0;
    local_40 = 0xffffffff;
    local_60 = (undefined  [16])0x0;
    local_50 = (undefined  [16])0x0;
    local_78 = param_9;
    uVar2 = cmd_find_current_session
                      (0,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_78);
    lVar3 = 0;
    if ((int)uVar2 == 0) {
      puVar1 = (uint *)local_60._0_8_;
      uVar2 = *(undefined8 *)(local_60._0_8_ + 8);
      uVar4 = (ulong)*(uint *)local_60._0_8_;
      uVar7 = log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                       "%s: current session $%u %s","cmd_find_current_client",uVar4,uVar2,in_R9,
                       in_stack_ffffffffffffff78);
      if ((*(byte *)(puVar1 + 0x44) & 1) == 0) {
        __ptr = (long *)0x0;
        if (clients != 0) {
          lVar3 = clients;
          uVar5 = 0;
          do {
            while (puVar1 == *(uint **)(lVar3 + 0x598)) {
              uVar6 = (ulong)((int)uVar5 + 1);
              __ptr = (long *)xreallocarray((int)uVar7,param_2,param_3,param_4,param_5,param_6,
                                            param_7,param_8,__ptr,uVar6,8,uVar4,uVar2,in_R9);
              __ptr[uVar5] = lVar3;
              lVar3 = *(long *)(lVar3 + 0x5c0);
              uVar5 = uVar6;
              uVar7 = extraout_XMM0_Qa;
              if (lVar3 == 0) goto LAB_0012afd3;
            }
            lVar3 = *(long *)(lVar3 + 0x5c0);
          } while (lVar3 != 0);
LAB_0012afd3:
          if ((int)uVar5 != 0) {
            lVar3 = cmd_find_best_client(__ptr,(int)uVar5);
            if (lVar3 != 0) {
              free(__ptr);
              goto LAB_0012b000;
            }
          }
        }
        free(__ptr);
      }
      lVar3 = FUN_0012a7d0();
    }
  }
  else {
    log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "%s: using cmdq %p client %p","cmd_find_current_client",param_9,lVar3,in_R9,
             in_stack_ffffffffffffff78);
    lVar3 = *(long *)(param_9 + 8);
  }
LAB_0012b000:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char * cmd_find_map_table(char **param_1,char *param_2)

{
  int iVar1;
  ulong uVar2;
  char **ppcVar3;
  char *__s2;
  
  __s2 = *param_1;
  if (__s2 != (char *)0x0) {
    uVar2 = 0;
    ppcVar3 = param_1;
    do {
      iVar1 = strcmp(param_2,__s2);
      if (iVar1 == 0) {
        return ppcVar3[1];
      }
      uVar2 = (ulong)((int)uVar2 + 1);
      ppcVar3 = param_1 + uVar2 * 2;
      __s2 = *ppcVar3;
    } while (__s2 != (char *)0x0);
  }
  return param_2;
}



uint cmd_find_get_window_with_session
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  long lVar2;
  int iVar3;
  long lVar4;
  undefined4 *puVar5;
  int *piVar6;
  undefined8 uVar7;
  ulong uVar8;
  size_t __n;
  longlong lVar9;
  char cVar10;
  byte bVar11;
  undefined8 extraout_RDX;
  uint uVar12;
  uint uVar13;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined in_stack_ffffffffffffffc8;
  undefined7 uStack_37;
  
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: %s",
           "cmd_find_get_window_with_session",param_10,param_13,param_14,in_stack_ffffffffffffffc8);
  lVar4 = *(long *)(param_9 + 0x18);
  uVar13 = *(uint *)(param_9 + 8);
  piVar6 = *(int **)(lVar4 + 0xe0);
  uVar12 = uVar13 & 0x20;
  uVar7 = *(undefined8 *)(piVar6 + 2);
  *(int **)(param_9 + 0x20) = piVar6;
  *(undefined8 *)(param_9 + 0x28) = uVar7;
  cVar10 = *param_10;
  if (cVar10 == '@') {
    piVar6 = window_find_by_id_str(param_10);
    *(int **)(param_9 + 0x28) = piVar6;
    if ((piVar6 != (int *)0x0) &&
       (uVar7 = session_has(*(long *)(param_9 + 0x18),(long)piVar6), (int)uVar7 != 0)) {
      uVar7 = cmd_find_best_winlink_with_window(param_9);
      uVar13 = (uint)uVar7;
      goto LAB_0012b188;
    }
    goto LAB_0012b390;
  }
  bVar11 = cVar10 - 0x2bU & 0xfd;
  if (uVar12 == 0) {
    if (bVar11 == 0) {
      iVar3 = 1;
      if (param_10[1] != '\0') {
        lVar9 = strtonum(param_10 + 1,1,0x7fffffff,(char **)0x0);
        lVar4 = *(long *)(param_9 + 0x18);
        uVar13 = *(uint *)(param_9 + 8);
        cVar10 = *param_10;
        iVar3 = (int)lVar9;
        piVar6 = *(int **)(lVar4 + 0xe0);
      }
      if ((uVar13 & 4) != 0) {
        iVar1 = *piVar6;
        if (cVar10 == '+') {
          if (iVar3 <= 0x7fffffff - iVar1) {
            uVar13 = 0;
            *(int *)(param_9 + 0x38) = iVar3 + iVar1;
            goto LAB_0012b188;
          }
        }
        else if (iVar1 <= iVar3) {
          uVar13 = 0;
          *(int *)(param_9 + 0x38) = iVar1 - iVar3;
          goto LAB_0012b188;
        }
        goto LAB_0012b390;
      }
      if (cVar10 == '+') {
        puVar5 = (undefined4 *)winlink_next_by_number((long)piVar6,lVar4,iVar3);
        *(undefined4 **)(param_9 + 0x20) = puVar5;
      }
      else {
        puVar5 = (undefined4 *)winlink_previous_by_number((long)piVar6,lVar4,iVar3);
        *(undefined4 **)(param_9 + 0x20) = puVar5;
      }
      uVar13 = 0;
      if (puVar5 == (undefined4 *)0x0) goto LAB_0012b280;
    }
    else {
LAB_0012b280:
      cVar10 = *param_10;
      if ((cVar10 == '!') && (param_10[1] == '\0')) {
        puVar5 = *(undefined4 **)(*(long *)(param_9 + 0x18) + 0xe8);
        *(undefined4 **)(param_9 + 0x20) = puVar5;
joined_r0x0012b38a:
        uVar13 = 0;
      }
      else {
        if ((cVar10 == '^') && (param_10[1] == '\0')) {
          puVar5 = (undefined4 *)winlinks_RB_MINMAX((long *)(*(long *)(param_9 + 0x18) + 0xf8),-1);
          *(undefined4 **)(param_9 + 0x20) = puVar5;
          goto joined_r0x0012b38a;
        }
        if ((cVar10 != '$') || (uVar13 = (uint)(byte)param_10[1], param_10[1] != 0)) {
          bVar11 = *param_10 - 0x2bU & 0xfd;
          goto LAB_0012b1d0;
        }
        puVar5 = (undefined4 *)winlinks_RB_MINMAX((long *)(*(long *)(param_9 + 0x18) + 0xf8),1);
        *(undefined4 **)(param_9 + 0x20) = puVar5;
      }
      if (puVar5 == (undefined4 *)0x0) {
LAB_0012b390:
        uVar13 = 0xffffffff;
        goto LAB_0012b188;
      }
    }
    uVar7 = *(undefined8 *)(puVar5 + 2);
    *(undefined4 *)(param_9 + 0x38) = *puVar5;
    *(undefined8 *)(param_9 + 0x28) = uVar7;
  }
  else {
LAB_0012b1d0:
    if ((bVar11 != 0) &&
       (uVar8 = strtonum(param_10,0,0x7fffffff,(char **)&stack0xffffffffffffffc8),
       CONCAT71(uStack_37,in_stack_ffffffffffffffc8) == 0)) {
      if ((*(uint *)(param_9 + 8) & 4) != 0) {
        *(int *)(param_9 + 0x38) = (int)uVar8;
        uVar13 = 0;
        goto LAB_0012b188;
      }
      lVar4 = winlink_find_by_index
                        (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (int **)(*(long *)(param_9 + 0x18) + 0xf8),uVar8 & 0xffffffff,extraout_RDX,
                         *(long *)(param_9 + 0x18),param_13,param_14);
      *(long *)(param_9 + 0x20) = lVar4;
      if (lVar4 != 0) {
        *(undefined8 *)(param_9 + 0x28) = *(undefined8 *)(lVar4 + 8);
        uVar13 = 0;
        goto LAB_0012b188;
      }
    }
    *(undefined8 *)(param_9 + 0x20) = 0;
    for (lVar4 = winlinks_RB_MINMAX((long *)(*(long *)(param_9 + 0x18) + 0xf8),-1); lVar4 != 0;
        lVar4 = winlinks_RB_NEXT(lVar4)) {
      iVar3 = strcmp(param_10,*(char **)(*(long *)(lVar4 + 8) + 8));
      if (iVar3 == 0) {
        if (*(long *)(param_9 + 0x20) != 0) goto LAB_0012b390;
        *(long *)(param_9 + 0x20) = lVar4;
      }
    }
    puVar5 = *(undefined4 **)(param_9 + 0x20);
    if (puVar5 == (undefined4 *)0x0) {
      if (uVar12 != 0) goto LAB_0012b390;
      for (lVar4 = winlinks_RB_MINMAX((long *)(*(long *)(param_9 + 0x18) + 0xf8),-1); lVar4 != 0;
          lVar4 = winlinks_RB_NEXT(lVar4)) {
        __n = strlen(param_10);
        iVar3 = strncmp(param_10,*(char **)(*(long *)(lVar4 + 8) + 8),__n);
        if (iVar3 == 0) {
          if (*(long *)(param_9 + 0x20) != 0) goto LAB_0012b390;
          *(long *)(param_9 + 0x20) = lVar4;
        }
      }
      puVar5 = *(undefined4 **)(param_9 + 0x20);
      if (puVar5 == (undefined4 *)0x0) {
        for (lVar4 = winlinks_RB_MINMAX((long *)(*(long *)(param_9 + 0x18) + 0xf8),-1); lVar4 != 0;
            lVar4 = winlinks_RB_NEXT(lVar4)) {
          iVar3 = fnmatch(param_10,*(char **)(*(long *)(lVar4 + 8) + 8),0);
          if (iVar3 == 0) {
            if (*(long *)(param_9 + 0x20) != 0) goto LAB_0012b390;
            *(long *)(param_9 + 0x20) = lVar4;
          }
        }
        puVar5 = *(undefined4 **)(param_9 + 0x20);
        if (puVar5 == (undefined4 *)0x0) goto LAB_0012b390;
      }
    }
    uVar7 = *(undefined8 *)(puVar5 + 2);
    uVar13 = 0;
    *(undefined4 *)(param_9 + 0x38) = *puVar5;
    *(undefined8 *)(param_9 + 0x28) = uVar7;
  }
LAB_0012b188:
  if (lVar2 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar13;
}



void cmd_find_get_window_with_pane
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  undefined1 unaff_BPL;
  char *pcVar2;
  
  pcVar2 = "%s";
  uVar1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s",
                   "cmd_find_get_window_with_pane",param_12,param_13,param_14,unaff_BPL);
  param_9[5] = *(long *)(param_9[6] + 8);
  cmd_find_best_session_with_window
            (uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,pcVar2,
             extraout_RDX,param_12,param_13,param_14);
  return;
}



uint cmd_find_get_pane_with_window
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,byte *param_10,undefined8 param_11,undefined8 param_12,ulong param_13,
               undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  int *piVar3;
  longlong lVar4;
  ulong uVar5;
  long extraout_RAX;
  long lVar6;
  undefined *puVar7;
  byte bVar8;
  undefined8 extraout_RDX;
  byte *pbVar9;
  byte *pbVar10;
  long in_FS_OFFSET;
  bool bVar11;
  bool bVar12;
  bool bVar13;
  byte bVar14;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffd8;
  undefined7 uStack_27;
  
  bVar14 = 0;
  puVar7 = &stack0xffffffffffffffd8;
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  uVar15 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: %s",
                    "cmd_find_get_pane_with_window",param_10,param_13,param_14,
                    in_stack_ffffffffffffffd8);
  bVar8 = *param_10;
  if (bVar8 == 0x25) {
    piVar3 = window_pane_find_by_id_str((char *)param_10);
    *(int **)(param_9 + 0x30) = piVar3;
    if (piVar3 != (int *)0x0) {
      uVar2 = -(uint)(*(long *)(piVar3 + 2) != *(long *)(param_9 + 0x28));
      goto LAB_0012b5fe;
    }
LAB_0012b80d:
    uVar2 = 0xffffffff;
  }
  else {
    bVar11 = *param_10 < 0x21;
    bVar13 = *param_10 == 0x21;
    if (bVar13) {
      uVar2 = (uint)param_10[1];
      bVar11 = false;
      bVar13 = param_10[1] == 0;
      if (bVar13) {
        lVar6 = *(long *)(*(long *)(param_9 + 0x28) + 0x140);
        if (lVar6 != 0) {
          *(long *)(param_9 + 0x30) = lVar6;
          goto LAB_0012b5fe;
        }
        goto LAB_0012b80d;
      }
    }
    lVar6 = 8;
    pbVar9 = param_10;
    pbVar10 = (byte *)"{up-of}";
    do {
      if (lVar6 == 0) break;
      lVar6 = lVar6 + -1;
      bVar11 = *pbVar9 < *pbVar10;
      bVar13 = *pbVar9 == *pbVar10;
      pbVar9 = pbVar9 + (ulong)bVar14 * -2 + 1;
      pbVar10 = pbVar10 + (ulong)bVar14 * -2 + 1;
    } while (bVar13);
    bVar12 = false;
    bVar11 = (!bVar11 && !bVar13) == bVar11;
    if (bVar11) {
      lVar6 = window_pane_find_up(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  *(long *)(*(long *)(param_9 + 0x28) + 0x138));
    }
    else {
      lVar6 = 10;
      pbVar9 = param_10;
      pbVar10 = (byte *)"{down-of}";
      do {
        if (lVar6 == 0) break;
        lVar6 = lVar6 + -1;
        bVar12 = *pbVar9 < *pbVar10;
        bVar11 = *pbVar9 == *pbVar10;
        pbVar9 = pbVar9 + (ulong)bVar14 * -2 + 1;
        pbVar10 = pbVar10 + (ulong)bVar14 * -2 + 1;
      } while (bVar11);
      bVar13 = false;
      bVar11 = (!bVar12 && !bVar11) == bVar12;
      if (bVar11) {
        lVar6 = window_pane_find_down
                          (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           *(long *)(*(long *)(param_9 + 0x28) + 0x138));
      }
      else {
        lVar6 = 10;
        pbVar9 = param_10;
        pbVar10 = (byte *)"{left-of}";
        do {
          if (lVar6 == 0) break;
          lVar6 = lVar6 + -1;
          bVar13 = *pbVar9 < *pbVar10;
          bVar11 = *pbVar9 == *pbVar10;
          pbVar9 = pbVar9 + (ulong)bVar14 * -2 + 1;
          pbVar10 = pbVar10 + (ulong)bVar14 * -2 + 1;
        } while (bVar11);
        bVar12 = false;
        bVar11 = (!bVar13 && !bVar11) == bVar13;
        if (bVar11) {
          lVar6 = window_pane_find_left
                            (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(long *)(*(long *)(param_9 + 0x28) + 0x138));
        }
        else {
          lVar6 = 0xb;
          pbVar9 = param_10;
          pbVar10 = (byte *)"{right-of}";
          do {
            if (lVar6 == 0) break;
            lVar6 = lVar6 + -1;
            bVar12 = *pbVar9 < *pbVar10;
            bVar11 = *pbVar9 == *pbVar10;
            pbVar9 = pbVar9 + (ulong)bVar14 * -2 + 1;
            pbVar10 = pbVar10 + (ulong)bVar14 * -2 + 1;
          } while (bVar11);
          if ((!bVar12 && !bVar11) == bVar12) {
            lVar6 = window_pane_find_right
                              (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               *(long *)(*(long *)(param_9 + 0x28) + 0x138));
          }
          else {
            if ((bVar8 - 0x2b & 0xfd) == 0) {
              param_13 = 1;
              if (param_10[1] != 0) {
                uVar5 = strtonum((char *)(param_10 + 1),1,0x7fffffff,(char **)0x0);
                bVar8 = *param_10;
                param_13 = uVar5 & 0xffffffff;
              }
              lVar6 = *(long *)(param_9 + 0x28);
              if (bVar8 == 0x2b) {
                lVar6 = window_pane_next_by_number(lVar6,*(long *)(lVar6 + 0x138),(int)param_13);
                *(long *)(param_9 + 0x30) = lVar6;
              }
              else {
                lVar6 = window_pane_previous_by_number(lVar6,*(long *)(lVar6 + 0x138),(int)param_13)
                ;
                *(long *)(param_9 + 0x30) = lVar6;
              }
              if (lVar6 != 0) {
                uVar2 = 0;
                goto LAB_0012b5fe;
              }
            }
            lVar4 = strtonum((char *)param_10,0,0x7fffffff,(char **)&stack0xffffffffffffffd8);
            if (CONCAT71(uStack_27,in_stack_ffffffffffffffd8) == 0) {
              window_pane_at_index
                        (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,*(long *)(param_9 + 0x28),(uint)lVar4,extraout_RDX
                         ,puVar7,param_13,param_14);
              *(long *)(param_9 + 0x30) = extraout_RAX;
              if (extraout_RAX != 0) {
                uVar2 = 0;
                goto LAB_0012b5fe;
              }
            }
            lVar6 = window_find_string(*(long *)(param_9 + 0x28),(char *)param_10);
          }
        }
      }
    }
    *(long *)(param_9 + 0x30) = lVar6;
    uVar2 = -(uint)(lVar6 == 0);
  }
LAB_0012b5fe:
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong cmd_find_get_pane_with_session
                (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,byte *param_10,undefined8 param_11,undefined8 param_12,ulong param_13,
                undefined8 param_14)

{
  uint *puVar1;
  undefined8 uVar2;
  uint uVar3;
  undefined4 extraout_var;
  int *piVar4;
  ulong uVar5;
  byte *pbVar6;
  undefined4 uVar7;
  undefined1 in_stack_ffffffffffffffe8;
  
  pbVar6 = param_10;
  uVar7 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: %s",
                   "cmd_find_get_pane_with_session",param_10,param_13,param_14,
                   in_stack_ffffffffffffffe8);
  if (*param_10 != 0x25) {
    puVar1 = *(uint **)(*(long *)(param_9 + 0x18) + 0xe0);
    uVar3 = *puVar1;
    *(uint **)(param_9 + 0x20) = puVar1;
    uVar2 = *(undefined8 *)(puVar1 + 2);
    *(uint *)(param_9 + 0x38) = uVar3;
    *(undefined8 *)(param_9 + 0x28) = uVar2;
    uVar3 = cmd_find_get_pane_with_window
                      (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       param_10,(ulong)uVar3,pbVar6,param_13,param_14);
    return CONCAT44(extraout_var,uVar3);
  }
  piVar4 = window_pane_find_by_id_str((char *)param_10);
  *(int **)(param_9 + 0x30) = piVar4;
  if (piVar4 != (int *)0x0) {
    *(undefined8 *)(param_9 + 0x28) = *(undefined8 *)(piVar4 + 2);
    uVar5 = cmd_find_best_winlink_with_window(param_9);
    return uVar5;
  }
  return 0xffffffff;
}



void cmd_find_clear_state(undefined8 *param_1,undefined8 param_2,undefined4 param_3)

{
  param_1[7] = 0;
  *(undefined (*) [16])(param_1 + 1) = (undefined  [16])0x0;
  *param_1 = param_2;
  *(undefined4 *)(param_1 + 1) = param_3;
  *(undefined4 *)(param_1 + 7) = 0xffffffff;
  *(undefined (*) [16])(param_1 + 3) = (undefined  [16])0x0;
  *(undefined (*) [16])(param_1 + 5) = (undefined  [16])0x0;
  return;
}



bool cmd_find_valid_state(long param_1)

{
  bool bVar1;
  undefined8 uVar2;
  long lVar3;
  
  if ((((*(long *)(param_1 + 0x18) != 0) && (*(long *)(param_1 + 0x20) != 0)) &&
      (*(long *)(param_1 + 0x28) != 0)) &&
     ((*(long *)(param_1 + 0x30) != 0 &&
      (uVar2 = session_alive(*(long *)(param_1 + 0x18)), (int)uVar2 != 0)))) {
    for (lVar3 = winlinks_RB_MINMAX((long *)(*(long *)(param_1 + 0x18) + 0xf8),-1); lVar3 != 0;
        lVar3 = winlinks_RB_NEXT(lVar3)) {
      if ((*(long *)(lVar3 + 8) == *(long *)(param_1 + 0x28)) &&
         (*(long *)(param_1 + 0x20) == lVar3)) {
        lVar3 = window_has_pane(*(long *)(param_1 + 0x28),*(long *)(param_1 + 0x30));
        if ((int)lVar3 == 0) {
          return false;
        }
        bVar1 = window_pane_visible(*(long *)(param_1 + 0x30));
        return bVar1;
      }
    }
  }
  return false;
}



void cmd_find_copy_state(long param_1,long param_2)

{
  *(undefined8 *)(param_1 + 0x18) = *(undefined8 *)(param_2 + 0x18);
  *(undefined8 *)(param_1 + 0x20) = *(undefined8 *)(param_2 + 0x20);
  *(undefined4 *)(param_1 + 0x38) = *(undefined4 *)(param_2 + 0x38);
  *(undefined8 *)(param_1 + 0x28) = *(undefined8 *)(param_2 + 0x28);
  *(undefined8 *)(param_1 + 0x30) = *(undefined8 *)(param_2 + 0x30);
  return;
}



void cmd_find_log_state(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,long param_10,undefined8 param_11,ulong param_12,
                       ulong param_13,ulong param_14)

{
  uint uVar1;
  uint *puVar2;
  uint *puVar3;
  undefined4 uVar4;
  undefined1 in_stack_00000008;
  undefined in_stack_ffffffffffffffe8;
  
  if (*(uint **)(param_10 + 0x18) == (uint *)0x0) {
    uVar4 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: s=none",
                     param_9,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
  }
  else {
    param_12 = (ulong)**(uint **)(param_10 + 0x18);
    uVar4 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: s=$%u",
                     param_9,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
  }
  puVar2 = *(uint **)(param_10 + 0x20);
  if (puVar2 == (uint *)0x0) {
    uVar4 = log_emit(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: wl=none",
                     param_9,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
  }
  else {
    puVar3 = *(uint **)(param_10 + 0x28);
    param_13 = (ulong)(*(uint **)(puVar2 + 2) == puVar3);
    param_14 = (ulong)*puVar3;
    param_12 = (ulong)*puVar2;
    uVar4 = log_emit(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                     "%s: wl=%u %d w=@%u %s",param_9,param_12,param_13,param_14,
                     (char)*(undefined8 *)(puVar3 + 2));
  }
  if (*(uint **)(param_10 + 0x30) == (uint *)0x0) {
    uVar4 = log_emit(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: wp=none",
                     param_9,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
  }
  else {
    uVar4 = log_emit(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: wp=%%%u",
                     param_9,(ulong)**(uint **)(param_10 + 0x30),param_13,param_14,
                     in_stack_ffffffffffffffe8);
  }
  uVar1 = *(uint *)(param_10 + 0x38);
  if (uVar1 != 0xffffffff) {
    log_emit(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: idx=%d",param_9,
             (ulong)uVar1,param_13,param_14,in_stack_00000008);
    return;
  }
  log_emit(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: idx=none",param_9,
           (ulong)uVar1,param_13,param_14,in_stack_00000008);
  return;
}



undefined8
cmd_find_from_session
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
          undefined8 *param_9,long param_10,undefined8 param_11,ulong param_12,ulong param_13,
          ulong param_14)

{
  long lVar1;
  undefined8 uVar2;
  
  param_9[7] = 0;
  *(undefined (*) [16])(param_9 + 3) = (undefined  [16])0x0;
  *(undefined (*) [16])(param_9 + 5) = (undefined  [16])0x0;
  *(undefined (*) [16])(param_9 + 1) = (undefined  [16])0x0;
  lVar1 = *(long *)(param_10 + 0xe0);
  param_9[3] = param_10;
  param_9[4] = lVar1;
  lVar1 = *(long *)(lVar1 + 8);
  *param_9 = 0;
  param_9[5] = lVar1;
  uVar2 = *(undefined8 *)(lVar1 + 0x138);
  *(undefined4 *)(param_9 + 7) = 0xffffffff;
  param_9[6] = uVar2;
  cmd_find_log_state(0,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "cmd_find_from_session",(long)param_9,param_11,param_12,param_13,param_14);
  return 0;
}



undefined8
cmd_find_from_winlink
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
          undefined8 *param_9,undefined8 param_10,long param_11,ulong param_12,ulong param_13,
          ulong param_14)

{
  long lVar1;
  undefined8 uVar2;
  
  param_9[7] = 0;
  *(undefined (*) [16])(param_9 + 5) = (undefined  [16])0x0;
  *(undefined (*) [16])(param_9 + 1) = (undefined  [16])0x0;
  lVar1 = *(long *)(param_11 + 8);
  param_9[3] = param_10;
  param_9[5] = lVar1;
  uVar2 = *(undefined8 *)(lVar1 + 0x138);
  *param_9 = 0;
  param_9[6] = uVar2;
  *(undefined4 *)(param_9 + 7) = 0xffffffff;
  param_9[4] = param_11;
  cmd_find_log_state(0,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "cmd_find_from_winlink",(long)param_9,param_11,param_12,param_13,param_14);
  return 0;
}



ulong cmd_find_from_window
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long *param_9,long param_10,undefined8 param_11,ulong param_12,ulong param_13,
                ulong param_14)

{
  undefined8 uVar1;
  ulong uVar2;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  
  param_9[7] = 0;
  *(undefined (*) [16])(param_9 + 5) = (undefined  [16])0x0;
  *param_9 = 0;
  *(undefined4 *)(param_9 + 7) = 0xffffffff;
  param_9[5] = param_10;
  *(undefined (*) [16])(param_9 + 1) = (undefined  [16])0x0;
  *(undefined (*) [16])(param_9 + 3) = (undefined  [16])0x0;
  uVar1 = cmd_find_best_session_with_window
                    (0,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                     param_11,param_12,param_13,param_14);
  if ((int)uVar1 == 0) {
    uVar2 = cmd_find_best_winlink_with_window((long)param_9);
    if ((int)uVar2 == 0) {
      cmd_find_log_state(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         "cmd_find_from_window",(long)param_9,extraout_RDX,param_12,param_13,
                         param_14);
      return uVar2 & 0xffffffff;
    }
  }
  return 0xffffffff;
}



ulong cmd_find_from_pane(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long *param_9,long param_10,undefined8 param_11,ulong param_12,
                        ulong param_13,ulong param_14)

{
  ulong uVar1;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  
  uVar1 = cmd_find_from_window
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(long *)(param_10 + 8),param_11,param_12,param_13,param_14);
  if ((int)uVar1 == 0) {
    param_9[6] = param_10;
    uVar1 = uVar1 & 0xffffffff;
    cmd_find_log_state(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       "cmd_find_from_pane",(long)param_9,extraout_RDX,param_12,param_13,param_14);
  }
  else {
    uVar1 = 0xffffffff;
  }
  return uVar1;
}



ulong cmd_find_current(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long *param_9,long param_10,uint param_11,ulong param_12,long param_13,
                      undefined8 param_14)

{
  ulong uVar1;
  undefined4 extraout_EDX;
  undefined4 extraout_var;
  undefined unaff_BL;
  ulong uVar2;
  undefined8 extraout_XMM0_Qa;
  
  param_9[7] = 0;
  *(undefined (*) [16])(param_9 + 1) = (undefined  [16])0x0;
  *param_9 = param_10;
  *(uint *)(param_9 + 1) = param_11;
  *(undefined4 *)(param_9 + 7) = 0xffffffff;
  *(undefined (*) [16])(param_9 + 3) = (undefined  [16])0x0;
  *(undefined (*) [16])(param_9 + 5) = (undefined  [16])0x0;
  uVar1 = cmd_find_current_session
                    (0,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  uVar2 = uVar1 & 0xffffffff;
  if (((int)uVar1 != 0) && (uVar2 = 0xffffffff, (param_11 & 2) == 0)) {
    cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "no current session",CONCAT44(extraout_var,extraout_EDX),param_12,param_13,param_14,
               unaff_BL);
  }
  return uVar2;
}



long cmd_find_client(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,char *param_10,undefined8 param_11,ulong param_12,long param_13,
                    undefined8 param_14)

{
  byte *__s2;
  int iVar1;
  long lVar2;
  char *__s;
  size_t sVar3;
  undefined8 extraout_RDX;
  byte *pbVar4;
  byte *pbVar5;
  bool bVar6;
  bool bVar7;
  byte bVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 uVar10;
  undefined in_stack_ffffffffffffffb8;
  
  bVar8 = 0;
  if ((param_9 == 0) || (param_10 != (char *)0x0)) {
    __s = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                          param_10,param_11,param_12,param_13,param_14);
    sVar3 = strlen(__s);
    uVar9 = extraout_XMM0_Da_00;
    uVar10 = extraout_XMM0_Db_00;
    lVar2 = clients;
    if ((sVar3 != 0) && (__s[sVar3 - 1] == ':')) {
      __s[sVar3 - 1] = '\0';
      lVar2 = clients;
    }
    for (; lVar2 != 0; lVar2 = *(long *)(lVar2 + 0x5c0)) {
      if ((*(long *)(lVar2 + 0x598) != 0) && (__s2 = *(byte **)(lVar2 + 0xe8), __s2 != (byte *)0x0))
      {
        iVar1 = strcmp(__s,(char *)__s2);
        bVar6 = false;
        bVar7 = iVar1 == 0;
        if (bVar7) goto LAB_0012be19;
        param_12 = 5;
        pbVar4 = __s2;
        pbVar5 = (byte *)"/dev/";
        do {
          if (param_12 == 0) break;
          param_12 = param_12 - 1;
          bVar6 = *pbVar4 < *pbVar5;
          bVar7 = *pbVar4 == *pbVar5;
          pbVar4 = pbVar4 + (ulong)bVar8 * -2 + 1;
          pbVar5 = pbVar5 + (ulong)bVar8 * -2 + 1;
        } while (bVar7);
        uVar9 = extraout_XMM0_Da_01;
        uVar10 = extraout_XMM0_Db_01;
        if (((!bVar6 && !bVar7) == bVar6) &&
           (iVar1 = strcmp(__s,(char *)(__s2 + 5)), uVar9 = extraout_XMM0_Da_02,
           uVar10 = extraout_XMM0_Db_02, iVar1 == 0)) goto LAB_0012be19;
      }
    }
    lVar2 = 0;
    if ((int)param_11 == 0) {
      cmdq_error(CONCAT44(uVar10,uVar9),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_9,"can\'t find client %s",__s,param_12,param_13,param_14,
                 in_stack_ffffffffffffffb8);
    }
LAB_0012be19:
    free(__s);
    log_emit(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "%s: target %s, return %p","cmd_find_client",param_10,lVar2,param_14,
             in_stack_ffffffffffffffb8);
  }
  else {
    lVar2 = cmd_find_current_client
                      ((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9)
    ;
    uVar9 = extraout_XMM0_Da;
    if ((lVar2 == 0) && ((int)param_11 == 0)) {
      uVar9 = cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,param_9,"no current client",extraout_RDX,param_12,
                         param_13,param_14,in_stack_ffffffffffffffb8);
    }
    log_emit(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "%s: no target, return %p","cmd_find_client",lVar2,param_13,param_14,
             in_stack_ffffffffffffffb8);
  }
  return lVar2;
}



int cmd_find_get_session
              (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              long param_9,char *param_10,undefined8 param_11,undefined8 param_12,long param_13,
              undefined8 param_14)

{
  int iVar1;
  long lVar2;
  int *piVar3;
  size_t __n;
  long lVar4;
  char *pcVar5;
  bool bVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined1 in_stack_ffffffffffffffc8;
  
  pcVar5 = param_10;
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: %s",
           "cmd_find_get_session",param_10,param_13,param_14,in_stack_ffffffffffffffc8);
  if (*param_10 == '$') {
    piVar3 = session_find_by_id_str(param_10);
    *(int **)(param_9 + 0x18) = piVar3;
    iVar1 = -(uint)(piVar3 == (int *)0x0);
  }
  else {
    lVar2 = session_find(param_10);
    *(long *)(param_9 + 0x18) = lVar2;
    iVar1 = 0;
    if (lVar2 == 0) {
      lVar2 = cmd_find_client(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                              param_5,param_6,param_7,param_8,0,param_10,1,(ulong)pcVar5,param_13,
                              param_14);
      if ((lVar2 == 0) || (*(long *)(lVar2 + 0x598) == 0)) {
        if ((*(uint *)(param_9 + 8) & 0x10) == 0) {
          lVar2 = sessions_RB_MINMAX(&sessions,-1);
          if (lVar2 != 0) {
            lVar4 = 0;
            do {
              __n = strlen(param_10);
              iVar1 = strncmp(param_10,*(char **)(lVar2 + 8),__n);
              if ((iVar1 == 0) && (bVar6 = lVar4 != 0, lVar4 = lVar2, bVar6)) goto LAB_0012bfb8;
              lVar2 = sessions_RB_NEXT(lVar2);
            } while (lVar2 != 0);
            if (lVar4 != 0) {
              *(long *)(param_9 + 0x18) = lVar4;
              return 0;
            }
          }
          lVar4 = sessions_RB_MINMAX(&sessions,-1);
          lVar2 = 0;
          if (lVar4 != 0) {
            do {
              iVar1 = fnmatch(param_10,*(char **)(lVar4 + 8),0);
              if ((iVar1 == 0) && (bVar6 = lVar2 != 0, lVar2 = lVar4, bVar6)) goto LAB_0012bfb8;
              lVar4 = sessions_RB_NEXT(lVar4);
            } while (lVar4 != 0);
            if (lVar2 != 0) {
              *(long *)(param_9 + 0x18) = lVar2;
              return 0;
            }
          }
        }
LAB_0012bfb8:
        iVar1 = -1;
      }
      else {
        *(long *)(param_9 + 0x18) = *(long *)(lVar2 + 0x598);
        iVar1 = 0;
      }
    }
  }
  return iVar1;
}



ulong cmd_find_get_window(undefined4 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,long *param_9,char *param_10,undefined8 param_11,
                         undefined8 param_12,long param_13,undefined8 param_14)

{
  undefined4 *puVar1;
  long lVar2;
  uint uVar3;
  int iVar4;
  int *piVar5;
  ulong uVar6;
  char *pcVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  char *pcVar8;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined1 in_stack_ffffffffffffffe8;
  
  pcVar8 = "%s: %s";
  pcVar7 = param_10;
  uVar9 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: %s",
                   "cmd_find_get_window",param_10,param_13,param_14,in_stack_ffffffffffffffe8);
  if (*param_10 == '@') {
    piVar5 = window_find_by_id_str(param_10);
    param_9[5] = (long)piVar5;
    if (piVar5 != (int *)0x0) {
      uVar6 = cmd_find_best_session_with_window
                        (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,param_9,pcVar8,extraout_RDX_01,pcVar7,
                         param_13,param_14);
      return uVar6;
    }
LAB_0012c0f0:
    uVar6 = 0xffffffff;
  }
  else {
    param_9[3] = *(long *)(param_9[2] + 0x18);
    uVar3 = cmd_find_get_window_with_session
                      (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                       param_10,extraout_RDX,pcVar7,param_13,param_14);
    if (uVar3 != 0) {
      iVar4 = cmd_find_get_session
                        (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)param_9,param_10,extraout_RDX_00,pcVar7,param_13,param_14);
      if (iVar4 != 0) goto LAB_0012c0f0;
      puVar1 = *(undefined4 **)(param_9[3] + 0xe0);
      lVar2 = *(long *)(puVar1 + 2);
      param_9[4] = (long)puVar1;
      param_9[5] = lVar2;
      if ((*(uint *)(param_9 + 1) & 4) == 0) {
        *(undefined4 *)(param_9 + 7) = *puVar1;
        return (ulong)(*(uint *)(param_9 + 1) & 4);
      }
    }
    uVar6 = 0;
  }
  return uVar6;
}



ulong cmd_find_get_pane(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long *param_9,byte *param_10,undefined8 param_11,undefined8 param_12,
                       ulong param_13,undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  undefined4 extraout_var;
  ulong uVar3;
  int *piVar4;
  byte *pbVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  char *pcVar6;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined1 in_stack_ffffffffffffffe8;
  
  pcVar6 = "%s: %s";
  pbVar5 = param_10;
  uVar7 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: %s",
                   "cmd_find_get_pane",param_10,param_13,param_14,in_stack_ffffffffffffffe8);
  if (*param_10 == 0x25) {
    piVar4 = window_pane_find_by_id_str((char *)param_10);
    param_9[6] = (long)piVar4;
    if (piVar4 != (int *)0x0) {
      param_9[5] = *(long *)(piVar4 + 2);
      uVar3 = cmd_find_best_session_with_window
                        (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,param_9,pcVar6,extraout_RDX_00,pbVar5,
                         param_13,param_14);
      return uVar3;
    }
  }
  else {
    lVar1 = param_9[2];
    param_9[3] = *(long *)(lVar1 + 0x18);
    param_9[4] = *(long *)(lVar1 + 0x20);
    uVar2 = *(uint *)(lVar1 + 0x38);
    lVar1 = *(long *)(lVar1 + 0x28);
    *(uint *)(param_9 + 7) = uVar2;
    param_9[5] = lVar1;
    uVar2 = cmd_find_get_pane_with_window
                      (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                       param_10,(ulong)uVar2,pbVar5,param_13,param_14);
    if (uVar2 == 0) {
      return CONCAT44(extraout_var,uVar2);
    }
    uVar3 = cmd_find_get_window(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,param_9,(char *)param_10,extraout_RDX,pbVar5,param_13,
                                param_14);
    if ((int)uVar3 == 0) {
      param_9[6] = *(long *)(param_9[5] + 0x138);
      return uVar3;
    }
  }
  return 0xffffffff;
}



undefined8
cmd_find_target(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,undefined *param_10,undefined *param_11,byte *param_12,ulong param_13,
               byte *param_14)

{
  byte bVar1;
  bool bVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  undefined7 extraout_var;
  long lVar7;
  byte *pbVar8;
  ulong uVar9;
  ulong uVar10;
  char *pcVar11;
  char cVar12;
  ulong extraout_RDX;
  ulong extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong extraout_RDX_02;
  ulong extraout_RDX_03;
  ulong extraout_RDX_04;
  ulong extraout_RDX_05;
  ulong extraout_RDX_06;
  ulong extraout_RDX_07;
  ulong extraout_RDX_08;
  ulong extraout_RDX_09;
  ulong extraout_RDX_10;
  ulong extraout_RDX_11;
  ulong extraout_RDX_12;
  ulong extraout_RDX_13;
  ulong extraout_RDX_14;
  ulong extraout_RDX_15;
  ulong extraout_RDX_16;
  ulong extraout_RDX_17;
  ulong extraout_RDX_18;
  ulong extraout_RDX_19;
  ulong extraout_RDX_20;
  ulong extraout_RDX_21;
  byte *pbVar13;
  byte *pbVar14;
  byte *pbVar15;
  byte *pbVar16;
  bool bVar17;
  byte bVar18;
  undefined4 uVar19;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qb;
  undefined extraout_XMM0 [16];
  undefined extraout_XMM0_00 [16];
  undefined8 extraout_XMM0_Qb_00;
  undefined8 extraout_XMM0_Qb_01;
  undefined extraout_XMM0_01 [16];
  undefined extraout_XMM0_02 [16];
  undefined extraout_XMM0_03 [16];
  undefined8 extraout_XMM0_Qb_02;
  undefined extraout_XMM0_04 [16];
  undefined8 extraout_XMM0_Qb_03;
  undefined extraout_XMM0_05 [16];
  undefined extraout_XMM0_06 [16];
  undefined extraout_XMM0_07 [16];
  undefined8 extraout_XMM0_Qb_04;
  undefined extraout_XMM0_08 [16];
  undefined8 extraout_XMM0_Qb_05;
  undefined extraout_XMM0_09 [16];
  undefined extraout_XMM0_10 [16];
  undefined8 extraout_XMM0_Qb_06;
  undefined8 extraout_XMM0_Qb_07;
  undefined8 extraout_XMM0_Qb_08;
  undefined8 extraout_XMM0_Qb_09;
  undefined8 extraout_XMM0_Qb_10;
  char *pcStack_60;
  undefined in_stack_ffffffffffffffa8;
  char *local_50;
  byte *local_48;
  undefined auVar20 [16];
  
  bVar18 = 0;
  iVar5 = (int)param_13;
  pbVar15 = param_14;
  if (param_12 == (byte *)0x0) {
    uVar19 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                      "%s: target none, type %d","cmd_find_target",param_13 & 0xffffffff,param_13,
                      param_14,in_stack_ffffffffffffffa8);
  }
  else {
    uVar19 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                      "%s: target %s, type %d","cmd_find_target",param_12,param_13,param_14,
                      in_stack_ffffffffffffffa8);
  }
  pcStack_60 = (char *)((ulong)param_14 & 0xffffffff);
  pcVar11 = param_11;
  log_emit(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: cmdq %p, flags %#x"
           ,"cmd_find_target",param_11,pcStack_60,pbVar15,in_stack_ffffffffffffffa8);
  *param_9 = (long)param_11;
  param_9[7] = 0;
  *(undefined (*) [16])(param_9 + 1) = (undefined  [16])0x0;
  *(undefined4 *)(param_9 + 7) = 0xffffffff;
  *(int *)(param_9 + 1) = (int)param_14;
  *(undefined (*) [16])(param_9 + 3) = (undefined  [16])0x0;
  *(undefined (*) [16])(param_9 + 5) = (undefined  [16])0x0;
  iVar3 = server_check_marked();
  auVar20._8_8_ = extraout_XMM0_Qb;
  auVar20._0_8_ = extraout_XMM0_Qa;
  if ((iVar3 == 0) || (((ulong)param_14 & 8) == 0)) {
    bVar2 = cmd_find_valid_state((long)(param_11 + 0x40));
    if ((int)CONCAT71(extraout_var,bVar2) != 0) {
      param_10 = param_11 + 0x40;
    }
    param_9[2] = (long)param_10;
    uVar9 = extraout_RDX_00;
    auVar20 = extraout_XMM0;
    if (param_12 != (byte *)0x0) goto LAB_0012c2a8;
LAB_0012c340:
    pbVar8 = (byte *)0x0;
  }
  else {
    param_9[2] = (long)marked_pane;
    uVar9 = extraout_RDX;
    if (param_12 == (byte *)0x0) goto LAB_0012c340;
LAB_0012c2a8:
    if (*param_12 == 0) goto LAB_0012c340;
    bVar1 = *param_12;
    bVar2 = bVar1 < 0x3d;
    bVar17 = bVar1 == 0x3d;
    if (bVar17) {
      bVar2 = false;
      bVar17 = param_12[1] == 0;
      if (!bVar17) goto LAB_0012c3b0;
LAB_0012c2cd:
      if (iVar5 == 0) {
        lVar7 = cmd_mouse_pane((int *)(*(long *)(param_11 + 0x28) + 8),(int **)(param_9 + 3),
                               param_9 + 4);
        param_9[6] = lVar7;
        uVar9 = extraout_RDX_06;
        auVar20 = extraout_XMM0_03;
        if (lVar7 != 0) {
          pbVar8 = (byte *)0x0;
          param_9[5] = *(long *)(param_9[4] + 8);
          goto LAB_0012c37a;
        }
      }
      else {
        if (iVar5 - 1U < 2) {
          lVar7 = cmd_mouse_window((int *)(*(long *)(param_11 + 0x28) + 8),(int **)(param_9 + 3));
          param_9[4] = lVar7;
          uVar9 = extraout_RDX_01;
          auVar20 = extraout_XMM0_00;
          if (lVar7 == 0) goto LAB_0012c458;
          lVar7 = *(long *)(lVar7 + 8);
          param_9[5] = lVar7;
          lVar7 = *(long *)(lVar7 + 0x138);
          param_9[6] = lVar7;
        }
        else {
LAB_0012c458:
          lVar7 = param_9[6];
        }
        if (lVar7 != 0) {
LAB_0012c31e:
          pbVar8 = (byte *)0x0;
          goto LAB_0012c37a;
        }
      }
      if (((ulong)param_14 & 2) == 0) {
        pbVar8 = (byte *)0x0;
        auVar20._0_8_ =
             cmdq_error(auVar20._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)param_11,"no mouse target",uVar9,(ulong)pcVar11,(long)pcStack_60,
                        pbVar15,in_stack_ffffffffffffffa8);
        auVar20._8_8_ = extraout_XMM0_Qb_07;
        uVar9 = extraout_RDX_18;
        goto LAB_0012c624;
      }
LAB_0012c691:
      pbVar8 = (byte *)0x0;
LAB_0012c624:
      param_9[2] = 0;
      log_emit(auVar20._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"    error",
               uVar9,pcVar11,pcStack_60,pbVar15,in_stack_ffffffffffffffa8);
      free(pbVar8);
      return 0xffffffff;
    }
LAB_0012c3b0:
    pcVar11 = (char *)0x8;
    pbVar8 = param_12;
    pbVar14 = (byte *)"{mouse}";
    do {
      if (pcVar11 == (char *)0x0) break;
      pcVar11 = pcVar11 + -1;
      bVar2 = *pbVar8 < *pbVar14;
      bVar17 = *pbVar8 == *pbVar14;
      pbVar8 = pbVar8 + (ulong)bVar18 * -2 + 1;
      pbVar14 = pbVar14 + (ulong)bVar18 * -2 + 1;
    } while (bVar17);
    cVar12 = (!bVar2 && !bVar17) - bVar2;
    uVar9 = CONCAT71((int7)(uVar9 >> 8),cVar12);
    if (cVar12 == '\0') goto LAB_0012c2cd;
    bVar2 = bVar1 < 0x7e;
    bVar17 = bVar1 == 0x7e;
    if (bVar17) {
      bVar2 = false;
      bVar17 = param_12[1] == 0;
      if (!bVar17) goto LAB_0012c468;
LAB_0012c3e4:
      iVar5 = server_check_marked();
      auVar20._8_8_ = extraout_XMM0_Qb_00;
      auVar20._0_8_ = extraout_XMM0_Qa_00;
      uVar9 = extraout_RDX_02;
      if (iVar5 != 0) {
        param_9[3] = marked_pane._24_8_;
        param_9[4] = marked_pane._32_8_;
        *(undefined4 *)(param_9 + 7) = marked_pane._56_4_;
        param_9[5] = marked_pane._40_8_;
        param_9[6] = marked_pane._48_8_;
        goto LAB_0012c31e;
      }
      if (((ulong)param_14 & 2) == 0) {
        pbVar8 = (byte *)0x0;
        auVar20._0_8_ =
             cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)param_11,"no marked target",extraout_RDX_02,(ulong)pcVar11,
                        (long)pcStack_60,pbVar15,in_stack_ffffffffffffffa8);
        auVar20._8_8_ = extraout_XMM0_Qb_06;
        uVar9 = extraout_RDX_17;
        goto LAB_0012c624;
      }
      goto LAB_0012c691;
    }
LAB_0012c468:
    pcVar11 = (char *)0x9;
    pbVar8 = param_12;
    pbVar14 = (byte *)"{marked}";
    do {
      pbVar13 = pbVar8;
      if (pcVar11 == (char *)0x0) break;
      pcVar11 = pcVar11 + -1;
      pbVar13 = pbVar8 + (ulong)bVar18 * -2 + 1;
      bVar2 = *pbVar8 < *pbVar14;
      bVar17 = *pbVar8 == *pbVar14;
      pbVar8 = pbVar13;
      pbVar14 = pbVar14 + (ulong)bVar18 * -2 + 1;
    } while (bVar17);
    if ((!bVar2 && !bVar17) == bVar2) goto LAB_0012c3e4;
    pbVar8 = (byte *)xstrdup(auVar20._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (char *)param_12,pbVar13,uVar9,pcVar11,pcStack_60,pbVar15);
    pcVar11 = strchr((char *)pbVar8,0x3a);
    pbVar15 = pbVar8;
    if (pcVar11 != (char *)0x0) {
      *pcVar11 = '\0';
      pbVar14 = (byte *)(pcVar11 + 1);
      pcVar11 = strchr((char *)pbVar14,0x2e);
      if (pcVar11 == (char *)0x0) {
        bVar18 = *pbVar8;
        pbVar13 = (byte *)0x0;
      }
      else {
        *pcVar11 = '\0';
        pbVar13 = (byte *)(pcVar11 + 1);
        bVar18 = *pbVar8;
      }
      uVar19 = extraout_XMM0_Da;
      if (bVar18 != 0x3d) {
LAB_0012c4e4:
        if (*pbVar14 == 0x3d) goto LAB_0012c75d;
LAB_0012c4ee:
        if (*pbVar15 == 0) {
          pbVar15 = (byte *)0x0;
        }
        goto LAB_0012c4fb;
      }
LAB_0012c6f7:
      *(uint *)(param_9 + 1) = *(uint *)(param_9 + 1) | 0x10;
      pbVar15 = pbVar8 + 1;
      if (pbVar14 != (byte *)0x0) goto LAB_0012c4e4;
LAB_0012c708:
      if (*pbVar15 == 0) {
        pbVar15 = (byte *)0x0;
        pbVar14 = (byte *)0x0;
        if (pbVar13 == (byte *)0x0) goto LAB_0012c8af;
        goto LAB_0012c50d;
      }
      pbVar14 = (byte *)0x0;
      if (pbVar13 != (byte *)0x0) goto LAB_0012c50d;
      pbVar14 = (byte *)0x0;
LAB_0012c523:
      local_50 = cmd_find_map_table((char **)cmd_find_session_table,(char *)pbVar15);
      if (pbVar14 != (byte *)0x0) goto LAB_0012c54a;
      if (pbVar13 != (byte *)0x0) {
LAB_0012c6c4:
        pcStack_60 = (char *)0x12c6d3;
        pbVar14 = (byte *)cmd_find_map_table((char **)cmd_find_pane_table,(char *)pbVar13);
        pbVar13 = pbVar14;
        uVar19 = extraout_XMM0_Da_03;
        if (pbVar14 != (byte *)0x0) goto LAB_0012c6e2;
        if (local_50 == (char *)0x0) goto LAB_0012c8af;
        pbVar14 = (byte *)0x177f9e;
        pbVar13 = (byte *)0x0;
        local_48 = (byte *)0x0;
        pbVar16 = pbVar14;
        goto LAB_0012c5af;
      }
      uVar19 = extraout_XMM0_Da_00;
      if (local_50 == (char *)0x0) {
LAB_0012c8af:
        pcStack_60 = "none";
        pbVar15 = (byte *)0x177f9e;
        auVar20._0_8_ =
             log_emit(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                      "target %s (flags %#x): session=%s, window=%s, pane=%s",param_12,
                      (ulong)param_14 & 0xffffffff,"none","none",0x9e);
        auVar20._8_8_ = extraout_XMM0_Qb_04;
        goto LAB_0012c346;
      }
      pbVar15 = (byte *)0x177f9e;
      pcVar11 = "none";
      pcStack_60 = local_50;
      auVar20._0_8_ =
           log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                    "target %s (flags %#x): session=%s, window=%s, pane=%s",param_12,
                    (ulong)param_14 & 0xffffffff,local_50,"none",0x9e);
      auVar20._8_8_ = extraout_XMM0_Qb_02;
      local_48 = (byte *)0x0;
      uVar9 = extraout_RDX_07;
LAB_0012c7b4:
      iVar5 = cmd_find_get_session
                        (auVar20._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)param_9,local_50,uVar9,pcVar11,(long)pcStack_60,pbVar15);
      uVar9 = extraout_RDX_08;
      auVar20 = extraout_XMM0_04;
      if (iVar5 == 0) {
        if (local_48 == (byte *)0x0) {
          lVar7 = *(long *)(param_9[3] + 0xe0);
          *(undefined4 *)(param_9 + 7) = 0xffffffff;
          param_9[4] = lVar7;
          lVar7 = *(long *)(lVar7 + 8);
          param_9[5] = lVar7;
          param_9[6] = *(long *)(lVar7 + 0x138);
          goto LAB_0012c37a;
        }
        uVar6 = cmd_find_get_window_with_session
                          (extraout_XMM0_04._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,(long)param_9,(char *)local_48,extraout_RDX_08,pcVar11,pcStack_60
                           ,pbVar15);
        uVar9 = extraout_RDX_15;
        auVar20 = extraout_XMM0_09;
joined_r0x0012c9ae:
        if (uVar6 == 0) {
          param_9[6] = *(long *)(*(long *)(param_9[4] + 8) + 0x138);
          goto LAB_0012c37a;
        }
LAB_0012c93d:
        if (((ulong)param_14 & 2) == 0) {
          auVar20._0_8_ =
               cmdq_error(auVar20._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_11,"can\'t find window %s",local_48,(ulong)pcVar11,
                          (long)pcStack_60,pbVar15,in_stack_ffffffffffffffa8);
          auVar20._8_8_ = extraout_XMM0_Qb_05;
          uVar9 = extraout_RDX_14;
        }
        goto LAB_0012c624;
      }
LAB_0012ca09:
      if (((ulong)param_14 & 2) == 0) {
        auVar20._0_8_ =
             cmdq_error(auVar20._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)param_11,"can\'t find session %s",local_50,(ulong)pcVar11,
                        (long)pcStack_60,pbVar15,in_stack_ffffffffffffffa8);
        auVar20._8_8_ = extraout_XMM0_Qb_08;
        uVar9 = extraout_RDX_19;
      }
      goto LAB_0012c624;
    }
    pcVar11 = strchr((char *)pbVar8,0x2e);
    uVar19 = extraout_XMM0_Da_04;
    if (pcVar11 == (char *)0x0) {
      bVar18 = *pbVar8;
      pbVar14 = (byte *)0x0;
      if (bVar18 == 0x24) {
        pbVar13 = (byte *)0x0;
        goto LAB_0012c51a;
      }
      if (bVar18 == 0x40) {
        pbVar13 = (byte *)0x0;
        pbVar14 = pbVar8;
        goto LAB_0012c6a0;
      }
      if (bVar18 != 0x25) {
        if (iVar5 == 1) {
          pbVar13 = (byte *)0x0;
          goto LAB_0012c750;
        }
        if (iVar5 == 2) {
          pbVar13 = (byte *)0x0;
          if (bVar18 == 0x3d) goto LAB_0012c6f7;
          goto LAB_0012c708;
        }
        if (iVar5 != 0) goto LAB_0012c8af;
      }
      pbVar13 = pbVar8;
      if (*pbVar8 != 0) goto LAB_0012c6b2;
      goto LAB_0012c8af;
    }
    *pcVar11 = '\0';
    pbVar13 = (byte *)(pcVar11 + 1);
LAB_0012c750:
    pbVar15 = (byte *)0x0;
    pbVar14 = pbVar8;
    if (*pbVar8 == 0x3d) {
LAB_0012c75d:
      *(uint *)(param_9 + 1) = *(uint *)(param_9 + 1) | 0x20;
      pbVar14 = pbVar14 + 1;
      if (pbVar15 != (byte *)0x0) goto LAB_0012c4ee;
    }
LAB_0012c4fb:
    if (*pbVar14 == 0) {
      pbVar14 = (byte *)0x0;
    }
    if (pbVar13 != (byte *)0x0) {
LAB_0012c50d:
      if (*pbVar13 == 0) {
        pbVar13 = (byte *)0x0;
      }
    }
LAB_0012c51a:
    if (pbVar15 != (byte *)0x0) goto LAB_0012c523;
LAB_0012c6a0:
    local_50 = (char *)0x0;
    if (pbVar14 == (byte *)0x0) {
LAB_0012c6b2:
      local_50 = (char *)0x0;
      if (pbVar13 == (byte *)0x0) goto LAB_0012c8af;
      goto LAB_0012c6c4;
    }
LAB_0012c54a:
    pcStack_60 = (char *)0x12c559;
    pbVar15 = (byte *)cmd_find_map_table((char **)cmd_find_window_table,(char *)pbVar14);
    pbVar14 = (byte *)0x177f9e;
    uVar19 = extraout_XMM0_Da_01;
    if (pbVar13 != (byte *)0x0) {
      pcStack_60 = (char *)0x12c581;
      pbVar13 = (byte *)cmd_find_map_table((char **)cmd_find_pane_table,(char *)pbVar13);
      pbVar14 = (byte *)0x177f9e;
      uVar19 = extraout_XMM0_Da_02;
      if (pbVar13 != (byte *)0x0) {
        pbVar14 = pbVar13;
      }
    }
    local_48 = pbVar15;
    if (pbVar15 == (byte *)0x0) {
LAB_0012c6e2:
      local_48 = (byte *)0x0;
      pbVar15 = (byte *)0x177f9e;
    }
    pbVar16 = pbVar15;
    if (local_50 != (char *)0x0) {
LAB_0012c5af:
      pcVar11 = (char *)((ulong)param_14 & 0xffffffff);
      pcStack_60 = local_50;
      pbVar15 = pbVar14;
      auVar20._0_8_ =
           log_emit(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                    "target %s (flags %#x): session=%s, window=%s, pane=%s",param_12,pcVar11,
                    local_50,pbVar16,(char)pbVar14);
      auVar20._8_8_ = extraout_XMM0_Qb_01;
      uVar9 = extraout_RDX_03;
      if (pbVar13 == (byte *)0x0) goto LAB_0012c7b4;
      if (((ulong)param_14 & 4) != 0) goto LAB_0012ca48;
      iVar5 = cmd_find_get_session
                        ((int)auVar20._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)param_9,local_50,extraout_RDX_03,pcVar11,(long)pcStack_60,pbVar15);
      uVar9 = extraout_RDX_04;
      auVar20 = extraout_XMM0_01;
      if (iVar5 == 0) {
        if (local_48 != (byte *)0x0) {
          uVar6 = cmd_find_get_window_with_session
                            (extraout_XMM0_01._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,(long)param_9,(char *)local_48,extraout_RDX_04,pcVar11,
                             pcStack_60,pbVar15);
          uVar9 = extraout_RDX_13;
          auVar20 = extraout_XMM0_08;
          if (uVar6 == 0) goto LAB_0012c87f;
          goto LAB_0012c93d;
        }
        uVar9 = cmd_find_get_pane_with_session
                          (extraout_XMM0_01._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,(long)param_9,pbVar13,extraout_RDX_04,pcVar11,(ulong)pcStack_60,
                           pbVar15);
        uVar6 = (uint)uVar9;
        uVar9 = extraout_RDX_05;
        auVar20 = extraout_XMM0_02;
        goto joined_r0x0012c615;
      }
      goto LAB_0012ca09;
    }
    pcVar11 = (char *)((ulong)param_14 & 0xffffffff);
    auVar20._0_8_ =
         log_emit(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                  "target %s (flags %#x): session=%s, window=%s, pane=%s",param_12,pcVar11,"none",
                  pbVar15,(char)pbVar14);
    auVar20._8_8_ = extraout_XMM0_Qb_03;
    uVar19 = (undefined4)auVar20._0_8_;
    if (pbVar13 != (byte *)0x0) {
      uVar9 = extraout_RDX_09;
      if (((ulong)param_14 & 4) != 0) {
LAB_0012ca48:
        if (((ulong)param_14 & 2) == 0) {
          auVar20._0_8_ =
               cmdq_error(auVar20._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_11,"can\'t specify pane here",uVar9,(ulong)pcVar11,
                          (long)pcStack_60,pbVar15,in_stack_ffffffffffffffa8);
          auVar20._8_8_ = extraout_XMM0_Qb_09;
          uVar9 = extraout_RDX_20;
        }
        goto LAB_0012c624;
      }
      if (local_48 == (byte *)0x0) {
        uVar9 = cmd_find_get_pane(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  param_9,pbVar13,extraout_RDX_09,pcVar11,(ulong)pcStack_60,pbVar15)
        ;
        uVar6 = (uint)uVar9;
        uVar9 = extraout_RDX_10;
        auVar20 = extraout_XMM0_05;
      }
      else {
        uVar10 = cmd_find_get_window(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     param_9,(char *)local_48,extraout_RDX_09,pcVar11,
                                     (long)pcStack_60,pbVar15);
        uVar9 = extraout_RDX_11;
        auVar20 = extraout_XMM0_06;
        if ((int)uVar10 != 0) goto LAB_0012c93d;
LAB_0012c87f:
        uVar6 = cmd_find_get_pane_with_window
                          (auVar20._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)param_9,pbVar13,uVar9,pcVar11,(ulong)pcStack_60,pbVar15);
        uVar9 = extraout_RDX_12;
        auVar20 = extraout_XMM0_07;
      }
joined_r0x0012c615:
      if (uVar6 != 0) {
        if (((ulong)param_14 & 2) == 0) {
          auVar20._0_8_ =
               cmdq_error(auVar20._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_11,"can\'t find pane %s",pbVar13,(ulong)pcVar11,
                          (long)pcStack_60,pbVar15,in_stack_ffffffffffffffa8);
          auVar20._8_8_ = extraout_XMM0_Qb_10;
          uVar9 = extraout_RDX_21;
        }
        goto LAB_0012c624;
      }
      goto LAB_0012c37a;
    }
    if (local_48 != (byte *)0x0) {
      uVar9 = cmd_find_get_window(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  param_9,(char *)local_48,extraout_RDX_09,pcVar11,(long)pcStack_60,
                                  pbVar15);
      uVar6 = (uint)uVar9;
      uVar9 = extraout_RDX_16;
      auVar20 = extraout_XMM0_10;
      goto joined_r0x0012c9ae;
    }
  }
LAB_0012c346:
  lVar7 = param_9[2];
  pcVar11 = *(char **)(lVar7 + 0x28);
  param_9[3] = *(long *)(lVar7 + 0x18);
  param_9[4] = *(long *)(lVar7 + 0x20);
  uVar6 = *(uint *)(lVar7 + 0x38);
  uVar9 = (ulong)uVar6;
  lVar7 = *(long *)(lVar7 + 0x30);
  param_9[5] = (long)pcVar11;
  param_9[6] = lVar7;
  uVar4 = 0xffffffff;
  if (((ulong)param_14 & 4) == 0) {
    uVar4 = uVar6;
  }
  *(uint *)(param_9 + 7) = uVar4;
LAB_0012c37a:
  param_9[2] = 0;
  cmd_find_log_state(auVar20._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "cmd_find_target",(long)param_9,uVar9,(ulong)pcVar11,(ulong)pcStack_60,
                     (ulong)pbVar15);
  free(pbVar8);
  return 0;
}



void cmd_find_window_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               uint *param_13,undefined8 param_14)

{
  long lVar1;
  bool bVar2;
  undefined8 uVar3;
  long extraout_RAX;
  undefined7 extraout_var;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  
  if (param_9 == 0) {
    return;
  }
  lVar1 = *(long *)(param_9 + 8);
  uVar3 = session_alive(lVar1);
  if ((int)uVar3 != 0) {
    uVar4 = window_pane_at_index
                      (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,*(long *)(*(long *)(param_9 + 0x20) + 8),
                       *(uint *)(param_9 + 0x28),extraout_RDX,param_12,param_13,param_14);
    uVar3 = extraout_RDX_00;
    if (extraout_RAX != 0) {
      bVar2 = window_pane_visible(extraout_RAX);
      uVar3 = extraout_RDX_01;
      uVar4 = extraout_XMM0_Da_00;
      if ((int)CONCAT71(extraout_var,bVar2) != 0) {
        window_set_active_pane(*(long *)(*(long *)(param_9 + 0x20) + 8),extraout_RAX);
        uVar3 = extraout_RDX_02;
        uVar4 = extraout_XMM0_Da_01;
      }
    }
    uVar3 = session_select(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                           (ulong)*(uint *)(param_9 + 0x10),uVar3,param_12,param_13,param_14);
    if ((int)uVar3 == 0) {
      uVar3 = server_redraw_session(lVar1);
      recalculate_sizes(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
      return;
    }
  }
  return;
}



byte cmd_find_window_match_flags(byte **param_1)

{
  undefined8 uVar1;
  undefined8 uVar2;
  byte bVar3;
  
  uVar1 = args_has(param_1,0x54);
  bVar3 = (int)uVar1 != 0;
  uVar2 = args_has(param_1,0x43);
  if ((int)uVar2 == 0) {
    uVar2 = args_has(param_1,0x4e);
    if ((int)uVar2 == 0) {
      return (-((int)uVar1 == 0) & 6U) + 1;
    }
  }
  else {
    bVar3 = bVar3 | 2;
    uVar1 = args_has(param_1,0x4e);
    if ((int)uVar1 == 0) {
      return bVar3;
    }
  }
  return bVar3 | 4;
}



void cmd_find_window_match
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,long param_11,undefined8 param_12,char *param_13,
               undefined8 param_14)

{
  long **pplVar1;
  int iVar2;
  long *__ptr;
  long extraout_RAX;
  char *__ptr_00;
  undefined8 uVar3;
  undefined8 extraout_RDX;
  long lVar4;
  char *__name;
  ulong uVar5;
  uint uVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined in_stack_ffffffffffffff88;
  uint local_44;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar3 = param_12;
  __ptr_00 = param_13;
  __ptr = (long *)xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x28,
                          param_11,param_12,param_13,param_14);
  lVar4 = *(long *)(*(long *)(param_11 + 8) + 0x148);
  if (lVar4 == 0) {
    uVar6 = 0;
    lVar4 = __ptr[1];
  }
  else {
    uVar6 = 0;
    uVar7 = extraout_XMM0_Da;
    uVar8 = extraout_XMM0_Db;
    do {
      uVar5 = (ulong)uVar6;
      uVar6 = uVar6 + 1;
      if ((param_10 & 4) != 0) {
        __name = *(char **)(*(long *)(param_11 + 8) + 8);
        iVar2 = fnmatch(param_13,__name,0);
        uVar7 = extraout_XMM0_Da_00;
        uVar8 = extraout_XMM0_Db_00;
        if (iVar2 == 0) {
          xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,"",__name,extraout_RDX,uVar3,__ptr_00,param_14);
          __ptr[1] = extraout_RAX;
          lVar4 = extraout_RAX;
          goto joined_r0x0012cd7c;
        }
      }
      if (((param_10 & 1) != 0) &&
         (iVar2 = fnmatch(param_13,*(char **)(lVar4 + 0x148),0), uVar7 = extraout_XMM0_Da_01,
         uVar8 = extraout_XMM0_Db_01, iVar2 == 0)) {
        xasprintf(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,__ptr + 1,"pane %u title: \"%s\"",uVar5,
                  *(undefined8 *)(lVar4 + 0x148),__ptr_00,param_14,in_stack_ffffffffffffff88);
        lVar4 = __ptr[1];
        goto joined_r0x0012cd7c;
      }
      if (((param_10 & 2) != 0) &&
         (__ptr_00 = window_pane_search(CONCAT44(uVar8,uVar7),param_2,param_3,param_4,param_5,
                                        param_6,param_7,param_8,lVar4,param_12,&local_44,uVar3,
                                        __ptr_00,param_14), uVar7 = extraout_XMM0_Da_02,
         uVar8 = extraout_XMM0_Db_02, __ptr_00 != (char *)0x0)) {
        xasprintf(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,__ptr + 1,"pane %u line %u: \"%s\"",uVar5,
                  (ulong)(local_44 + 1),__ptr_00,param_14,in_stack_ffffffffffffff88);
        free(__ptr_00);
        lVar4 = __ptr[1];
        goto joined_r0x0012cd7c;
      }
      lVar4 = *(long *)(lVar4 + 0x1f8);
    } while (lVar4 != 0);
    lVar4 = __ptr[1];
  }
joined_r0x0012cd7c:
  if (lVar4 == 0) {
    free(__ptr);
  }
  else {
    *__ptr = param_11;
    pplVar1 = *(long ***)(param_9 + 8);
    *(uint *)(__ptr + 2) = uVar6 - 1;
    __ptr[3] = 0;
    __ptr[4] = (long)pplVar1;
    *pplVar1 = __ptr;
    *(long **)(param_9 + 8) = __ptr + 3;
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
cmd_find_window_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined8 param_12,long *param_13,char **param_14)

{
  uint uVar1;
  uint *puVar2;
  byte **ppbVar3;
  long lVar4;
  long lVar5;
  uint *puVar6;
  uint **ppuVar7;
  ulong uVar8;
  byte bVar9;
  uint *puVar10;
  uint *puVar11;
  undefined7 extraout_var;
  long lVar12;
  undefined8 uVar13;
  long *plVar14;
  long extraout_RAX;
  undefined8 uVar15;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint **ppuVar16;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 uVar17;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined in_stack_ffffffffffffff78;
  long *local_60;
  uint **local_58;
  uint ***local_50;
  long local_40;
  
  puVar2 = *(uint **)(param_10 + 0xa0);
  ppbVar3 = *(byte ***)(param_9 + 8);
  lVar4 = *(long *)(param_10 + 0x80);
  lVar5 = *(long *)(param_10 + 0xa8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (lVar4 == 0) {
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "no client available",param_11,(ulong)puVar2,(long)param_13,param_14,
               in_stack_ffffffffffffff78);
    uVar13 = 0xffffffff;
  }
  else {
    puVar10 = (uint *)args_get(ppbVar3,0x46);
    puVar11 = (uint *)
              "#{window_index}: #{window_name} [#{window_width}x#{window_height}] (#{window_panes} panes) #{window_find_matches}"
    ;
    if (puVar10 != (uint *)0x0) {
      puVar11 = puVar10;
    }
    bVar9 = cmd_find_window_match_flags(ppbVar3);
    puVar6 = *(uint **)ppbVar3[2];
    local_58 = (uint **)0x0;
    local_50 = &local_58;
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,(long *)&local_60,&DAT_00178433,puVar6,puVar10,param_13,param_14,
              in_stack_ffffffffffffff78);
    lVar12 = winlinks_RB_MINMAX((long *)(puVar2 + 0x3e),-1);
    uVar17 = extraout_XMM0_Da_00;
    plVar14 = local_60;
    while (lVar12 != 0) {
      puVar10 = puVar6;
      local_60 = plVar14;
      cmd_find_window_match
                (uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)&local_58,
                 (uint)CONCAT71(extraout_var,bVar9),lVar12,puVar6,(char *)plVar14,param_14);
      lVar12 = winlinks_RB_NEXT(lVar12);
      param_13 = plVar14;
      uVar17 = extraout_XMM0_Da_01;
      plVar14 = local_60;
    }
    free(plVar14);
    if (local_58 == (uint **)0x0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"no windows matching: %s",puVar6,(ulong)puVar10,
                 (long)param_13,param_14,in_stack_ffffffffffffff78);
      uVar13 = 0xffffffff;
    }
    else {
      if (local_58[3] == (uint *)0x0) {
        uVar15 = session_select(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,(long)puVar2,(ulong)**local_58,extraout_RDX,puVar10,
                                (uint *)param_13,param_14);
        uVar13 = CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_05);
        if ((int)uVar15 == 0) {
          uVar13 = server_redraw_session((long)puVar2);
        }
        recalculate_sizes(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
        ppuVar16 = local_58;
      }
      else {
        uVar13 = window_pane_set_mode
                           (*(long *)(*(long *)(lVar5 + 8) + 0x138),(undefined **)window_choose_mode
                           );
        ppuVar16 = local_58;
        if ((int)uVar13 == 0) {
          uVar8 = 0;
          uVar17 = extraout_XMM0_Da_03;
          for (; ppuVar16 != (uint **)0x0; ppuVar16 = (uint **)ppuVar16[3]) {
            lVar12 = lVar4;
            plVar14 = window_choose_data_create
                                (uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                                 lVar4,*(long *)(lVar4 + 0x598),(undefined *)puVar10,param_13,
                                 param_14);
            uVar1 = **ppuVar16;
            plVar14[4] = (long)*ppuVar16;
            *(uint *)(plVar14 + 2) = uVar1;
            uVar13 = xstrdup(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_04),param_2,param_3,
                             param_4,param_5,param_6,param_7,param_8,(char *)puVar11,lVar12,
                             (ulong)uVar1,puVar10,param_13,param_14);
            plVar14[6] = extraout_RAX;
            *(undefined4 *)(plVar14 + 5) = *(undefined4 *)(ppuVar16 + 2);
            uVar13 = format_add(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                plVar14[7],"line","%u",uVar8,param_13,param_14,
                                in_stack_ffffffffffffff78);
            uVar13 = format_add(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                plVar14[7],"window_find_matches","%s",ppuVar16[1],param_13,param_14,
                                in_stack_ffffffffffffff78);
            puVar10 = *ppuVar16;
            param_13 = (long *)0x0;
            uVar13 = format_defaults(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     (uint **)plVar14[7],0,puVar2,puVar10,(uint *)0x0,param_14);
            uVar17 = window_choose_add(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,*(long *)(*(long *)(lVar5 + 8) + 0x138),(long)plVar14
                                       ,extraout_RDX_00,puVar10,param_13,param_14);
            uVar8 = (ulong)((int)uVar8 + 1);
          }
          window_choose_ready(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(long *)(*(long *)(lVar5 + 8) + 0x138),0,cmd_find_window_callback,
                              puVar10,param_13,param_14);
          ppuVar16 = local_58;
        }
      }
      while (ppuVar16 != (uint **)0x0) {
        while( true ) {
          ppuVar7 = (uint **)ppuVar16[3];
          free(ppuVar16[1]);
          puVar2 = ppuVar16[3];
          if (puVar2 != (uint *)0x0) break;
          local_50 = (uint ***)ppuVar16[4];
          *local_50 = (uint **)0x0;
          free(ppuVar16);
          ppuVar16 = ppuVar7;
          if (ppuVar7 == (uint **)0x0) goto LAB_0012d05e;
        }
        *(uint **)(puVar2 + 8) = ppuVar16[4];
        *(uint **)ppuVar16[4] = puVar2;
        free(ppuVar16);
        ppuVar16 = ppuVar7;
      }
LAB_0012d05e:
      uVar13 = 0;
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar13;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



uint cmd_if_shell_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,int *param_10,undefined8 param_11,undefined *param_12,
                      undefined8 param_13,char **param_14)

{
  byte **ppbVar1;
  uint *puVar2;
  long lVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  undefined4 uVar9;
  int iVar10;
  uint **ppuVar11;
  char *__ptr;
  undefined8 *puVar12;
  uint *puVar13;
  ulong uVar14;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar15;
  long *plVar16;
  void **ppvVar17;
  uint uVar18;
  char *pcVar19;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar20;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined auVar21 [16];
  undefined in_stack_ffffffffffffff98;
  void *local_50;
  int *local_48;
  long local_40;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  puVar2 = *(uint **)(param_10 + 0x28);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar3 = *(long *)(param_10 + 2);
  puVar13 = *(uint **)(param_10 + 0x2a);
  plVar16 = *(long **)(param_10 + 0x2e);
  if ((lVar3 == 0) || (*(long *)(lVar3 + 0x598) != 0)) {
    pcVar19 = (char *)0x0;
    if (puVar2 != (uint *)0x0) {
      pcVar19 = *(char **)(puVar2 + 4);
    }
  }
  else {
    pcVar19 = *(char **)(lVar3 + 200);
  }
  ppuVar11 = (uint **)format_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    (long)param_10,0,param_11,param_12,plVar16,param_14);
  uVar20 = format_defaults(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           ppuVar11,0,puVar2,puVar13,(uint *)plVar16,param_14);
  __ptr = format_expand(uVar20,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long *)ppuVar11,*(char **)ppbVar1[2],extraout_RDX,puVar13,plVar16,param_14)
  ;
  format_free(ppuVar11);
  uVar15 = 0x46;
  uVar20 = args_has(ppbVar1,0x46);
  if ((int)uVar20 == 0) {
    auVar21 = xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x60,
                      uVar15,extraout_RDX_00,puVar13,plVar16,param_14);
    puVar12 = auVar21._0_8_;
    auVar21 = xstrdup(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      *(char **)(ppbVar1[2] + 8),uVar15,auVar21._8_8_,puVar13,plVar16,param_14);
    iVar10 = *(int *)(ppbVar1 + 1);
    *puVar12 = auVar21._0_8_;
    if (iVar10 == 3) {
      uVar20 = xstrdup(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       *(char **)(ppbVar1[2] + 0x10),uVar15,auVar21._8_8_,puVar13,plVar16,param_14);
      puVar12[1] = uVar20;
    }
    else {
      puVar12[1] = 0;
    }
    uVar20 = args_has(ppbVar1,0x62);
    lVar3 = *(long *)(param_10 + 10);
    *(int *)(puVar12 + 0xb) = (int)uVar20;
    puVar12[2] = param_10;
    uVar20 = *(undefined8 *)(lVar3 + 8);
    uVar15 = *(undefined8 *)(lVar3 + 0x10);
    puVar12[3] = uVar20;
    puVar12[4] = uVar15;
    uVar4 = *(undefined4 *)(lVar3 + 0x18);
    uVar5 = *(undefined4 *)(lVar3 + 0x1c);
    uVar6 = *(undefined4 *)(lVar3 + 0x20);
    uVar7 = *(undefined4 *)(lVar3 + 0x24);
    *(undefined4 *)(puVar12 + 5) = uVar4;
    *(undefined4 *)((long)puVar12 + 0x2c) = uVar5;
    *(undefined4 *)(puVar12 + 6) = uVar6;
    *(undefined4 *)((long)puVar12 + 0x34) = uVar7;
    uVar5 = *(undefined4 *)(lVar3 + 0x28);
    uVar6 = *(undefined4 *)(lVar3 + 0x2c);
    uVar7 = *(undefined4 *)(lVar3 + 0x30);
    uVar8 = *(undefined4 *)(lVar3 + 0x34);
    *(undefined4 *)(puVar12 + 7) = uVar5;
    *(undefined4 *)((long)puVar12 + 0x3c) = uVar6;
    *(undefined4 *)(puVar12 + 8) = uVar7;
    *(undefined4 *)((long)puVar12 + 0x44) = uVar8;
    uVar6 = *(undefined4 *)(lVar3 + 0x38);
    uVar7 = *(undefined4 *)(lVar3 + 0x3c);
    uVar8 = *(undefined4 *)(lVar3 + 0x40);
    uVar9 = *(undefined4 *)(lVar3 + 0x44);
    *(undefined4 *)(puVar12 + 9) = uVar6;
    *(undefined4 *)((long)puVar12 + 0x4c) = uVar7;
    *(undefined4 *)(puVar12 + 10) = uVar8;
    *(undefined4 *)((long)puVar12 + 0x54) = uVar9;
    *param_10 = *param_10 + 1;
    *(undefined4 *)((long)puVar12 + 0x5c) = 1;
    job_run(uVar20,uVar4,uVar5,uVar6,param_5,param_6,param_7,param_8,__ptr,puVar2,pcVar19,
            cmd_if_shell_callback,cmd_if_shell_free,puVar12);
    free(__ptr);
    uVar18 = (uint)(*(int *)(puVar12 + 0xb) == 0);
  }
  else {
    if ((*__ptr == '0') || (*__ptr == '\0')) {
      if (*(int *)(ppbVar1 + 1) != 3) {
        uVar18 = 0;
        free(__ptr);
        goto LAB_0012d246;
      }
      pcVar19 = *(char **)(ppbVar1[2] + 0x10);
    }
    else {
      pcVar19 = *(char **)(ppbVar1[2] + 8);
    }
    free(__ptr);
    if (pcVar19 == (char *)0x0) {
      uVar18 = 0;
    }
    else {
      ppvVar17 = &local_50;
      uVar14 = 0;
      iVar10 = cmd_string_parse(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,pcVar19,&local_48,(char *)0x0,(byte *)0x0,(long *)ppvVar17,
                                param_14);
      if (iVar10 == 0) {
        cmdq_run((int)extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_10,local_48,(undefined4 *)(*(long *)(param_10 + 10) + 8),uVar14,ppvVar17,
                 param_14);
        cmd_list_free(local_48);
        uVar18 = 0;
      }
      else {
        uVar18 = 0xffffffff;
        if (local_50 != (void *)0x0) {
          cmdq_error(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long)param_10,"%s",local_50,uVar14,(long)ppvVar17,param_14,
                     in_stack_ffffffffffffff98);
          free(local_50);
        }
      }
    }
  }
LAB_0012d246:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar18;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmd_if_shell_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  char **ppcVar1;
  char *pcVar2;
  int iVar3;
  undefined8 *puVar4;
  ulong uVar5;
  undefined8 extraout_RDX;
  int **ppiVar6;
  char *pcVar7;
  void **ppvVar8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffc8;
  int *local_30;
  void *local_28;
  long local_20;
  
  ppcVar1 = *(char ***)(param_9 + 0x38);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar2 = ppcVar1[2];
  if ((pcVar2[4] & 1U) == 0) {
    pcVar7 = ppcVar1[1];
    if ((*(uint *)(param_9 + 0x14) >> 8 & 0xff | *(uint *)(param_9 + 0x14) & 0x7f) == 0) {
      pcVar7 = *ppcVar1;
    }
    if (pcVar7 != (char *)0x0) {
      uVar5 = 0;
      ppiVar6 = &local_30;
      ppvVar8 = &local_28;
      iVar3 = cmd_string_parse(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               pcVar7,ppiVar6,(char *)0x0,(byte *)0x0,(long *)ppvVar8,in_R9);
      if (iVar3 == 0) {
        puVar4 = cmdq_new(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          *(undefined8 *)(pcVar2 + 8),ppiVar6,extraout_RDX,uVar5,ppvVar8,in_R9);
        puVar4[0x23] = cmd_if_shell_done;
        puVar4[0x24] = ppcVar1;
        *(int *)((long)ppcVar1 + 0x5c) = *(int *)((long)ppcVar1 + 0x5c) + 1;
        cmdq_run(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 (int *)puVar4,local_30,(undefined4 *)(ppcVar1 + 3),uVar5,ppvVar8,in_R9);
        cmd_list_free(local_30);
      }
      else if (local_28 != (void *)0x0) {
        cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,(long)pcVar2,"%s",local_28,uVar5,(long)ppvVar8,in_R9,
                   in_stack_ffffffffffffffc8);
        free(local_28);
      }
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmd_if_shell_done(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      int *param_9)

{
  int *piVar1;
  void **__ptr;
  int *piVar2;
  uint uVar3;
  undefined8 extraout_XMM0_Qa;
  
  __ptr = *(void ***)(param_9 + 0x48);
  piVar2 = (int *)__ptr[2];
  if (-1 < param_9[4]) {
    piVar2[4] = param_9[4];
  }
  cmdq_free(param_9);
  piVar1 = (int *)((long)__ptr + 0x5c);
  *piVar1 = *piVar1 + -1;
  if (*piVar1 != 0) {
    return;
  }
  uVar3 = cmdq_free(piVar2);
  if ((uVar3 == 0) && (*(int *)(__ptr + 0xb) == 0)) {
    cmdq_continue(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar2);
  }
  free(__ptr[1]);
  free(*__ptr);
  free(__ptr);
  return;
}



void cmd_if_shell_free(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      void **param_9)

{
  int *piVar1;
  int *piVar2;
  uint uVar3;
  undefined8 extraout_XMM0_Qa;
  
  piVar1 = (int *)((long)param_9 + 0x5c);
  *piVar1 = *piVar1 + -1;
  piVar2 = (int *)param_9[2];
  if (*piVar1 != 0) {
    return;
  }
  uVar3 = cmdq_free(piVar2);
  if ((uVar3 == 0) && (*(int *)(param_9 + 0xb) == 0)) {
    cmdq_continue(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar2);
  }
  free(param_9[1]);
  free(*param_9);
  free(param_9);
  return;
}



undefined8
cmd_join_pane_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
                  undefined8 param_14)

{
  undefined1 in_stack_fffffffffffffff8;
  
  cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "join pane is not supported with tmate",param_11,param_12,param_13,param_14,
             in_stack_fffffffffffffff8);
  return 0xffffffff;
}



undefined8
join_pane(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
         undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
         undefined8 param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
         undefined8 param_14)

{
  undefined1 in_stack_fffffffffffffff8;
  
  cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "join pane is not supported with tmate",param_11,param_12,param_13,param_14,
             in_stack_fffffffffffffff8);
  return 0xffffffff;
}



undefined8
cmd_kill_pane_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,long param_10,undefined8 param_11,undefined *param_12,long *param_13,
                  char **param_14)

{
  long lVar1;
  uint *puVar2;
  uint *puVar3;
  int iVar4;
  undefined8 uVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  uint *puVar6;
  uint *puVar7;
  long lVar8;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar9;
  
  lVar1 = *(long *)(param_10 + 0xa8);
  puVar2 = *(uint **)(param_10 + 0xb8);
  server_unzoom_window
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*(uint **)(lVar1 + 8),
             param_10,param_11,param_12,(ulong)param_13,param_14);
  iVar4 = window_count_panes(*(long *)(lVar1 + 8));
  if (iVar4 == 1) {
    uVar5 = server_kill_window(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,*(uint **)(lVar1 + 8),param_10,extraout_RDX,param_12,param_13
                               ,param_14);
    recalculate_sizes(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
    return 0;
  }
  puVar7 = (uint *)0x61;
  uVar5 = args_has(*(byte ***)(param_9 + 8),0x61);
  if ((int)uVar5 == 0) {
    layout_close_pane(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      (long)puVar2,puVar7,extraout_RDX_00,param_12,param_13,param_14);
    window_remove_pane(*(long *)(lVar1 + 8),puVar2);
  }
  else {
    lVar8 = *(long *)(lVar1 + 8);
    uVar5 = extraout_RDX_00;
    puVar6 = *(uint **)(lVar8 + 0x148);
    uVar9 = extraout_XMM0_Qa_00;
    if (*(uint **)(lVar8 + 0x148) == (uint *)0x0) goto LAB_0012d65e;
    do {
      puVar3 = *(uint **)(puVar6 + 0x7e);
      if (puVar2 != puVar6) {
        layout_close_pane(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)puVar6
                          ,puVar7,uVar5,param_12,param_13,param_14);
        uVar9 = window_remove_pane(*(long *)(lVar1 + 8),puVar6);
        uVar5 = extraout_RDX_01;
        puVar7 = puVar6;
      }
      puVar6 = puVar3;
    } while (puVar3 != (uint *)0x0);
  }
  lVar8 = *(long *)(lVar1 + 8);
LAB_0012d65e:
  server_redraw_window(lVar8);
  return 0;
}



undefined8 cmd_kill_server_exec(long *param_1)

{
  __pid_t __pid;
  
  if ((undefined1 *)*param_1 != cmd_kill_server_entry) {
    return 0;
  }
  __pid = getpid();
  kill(__pid,0xf);
  return 0;
}



undefined8
cmd_kill_session_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined *param_12,long *param_13,char **param_14)

{
  uint *puVar1;
  byte **ppbVar2;
  long lVar3;
  undefined8 uVar4;
  long lVar5;
  long lVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  ppbVar2 = *(byte ***)(param_9 + 8);
  lVar3 = *(long *)(param_10 + 0xa0);
  uVar4 = args_has(ppbVar2,0x43);
  if ((int)uVar4 == 0) {
    uVar7 = 0x61;
    uVar4 = args_has(ppbVar2,0x61);
    if ((int)uVar4 == 0) {
      uVar8 = server_destroy_session
                        (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,lVar3,uVar7,extraout_RDX,param_12,(ulong)param_13,
                         (ulong)param_14);
      session_destroy(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,uVar7,
                      extraout_RDX_02,param_12,param_13,param_14);
      return 0;
    }
    uVar4 = 0xffffffff;
    lVar5 = sessions_RB_MINMAX(&sessions,-1);
    if (lVar5 != 0) {
      do {
        lVar6 = sessions_RB_NEXT(lVar5);
        if (lVar3 != lVar5) {
          uVar8 = server_destroy_session
                            (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                             param_4,param_5,param_6,param_7,param_8,lVar5,uVar4,extraout_RDX_00,
                             param_12,(ulong)param_13,(ulong)param_14);
          session_destroy(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar5,uVar4,
                          extraout_RDX_01,param_12,param_13,param_14);
        }
        lVar5 = lVar6;
      } while (lVar6 != 0);
      return 0;
    }
  }
  else {
    for (lVar5 = winlinks_RB_MINMAX((long *)(lVar3 + 0xf8),-1); lVar5 != 0;
        lVar5 = winlinks_RB_NEXT(lVar5)) {
      puVar1 = (uint *)(*(long *)(lVar5 + 8) + 0x180);
      *puVar1 = *puVar1 & 0xfffffff4;
      *(uint *)(lVar5 + 0x38) = *(uint *)(lVar5 + 0x38) & 0xfffffff8;
    }
    server_redraw_session(lVar3);
  }
  return 0;
}



undefined8
cmd_kill_window_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9,
          long param_10,undefined8 param_11,undefined *param_12,undefined8 param_13,char **param_14)

{
  void *pvVar1;
  long lVar2;
  long lVar3;
  void *pvVar4;
  bool bVar5;
  undefined8 uVar6;
  void *pvVar7;
  undefined8 uVar8;
  undefined7 extraout_var;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined unaff_BL;
  undefined8 uVar9;
  byte **ppbVar10;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  
  ppbVar10 = (byte **)param_9[1];
  pvVar1 = *(void **)(param_10 + 0xa8);
  lVar2 = *(long *)(param_10 + 0xa0);
  if ((undefined1 *)*param_9 == cmd_unlink_window_entry) {
    lVar3 = *(long *)((long)pvVar1 + 8);
    uVar8 = args_has(ppbVar10,0x6b);
    uVar6 = extraout_RDX_01;
    uVar9 = extraout_XMM0_Qa_02;
    if (((int)uVar8 == 0) &&
       (bVar5 = session_is_linked(lVar2,lVar3), uVar6 = extraout_RDX_02, uVar9 = extraout_XMM0_Qa_03
       , (int)CONCAT71(extraout_var,bVar5) == 0)) {
      cmdq_error(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_10,"window only linked to one session",extraout_RDX_02,(ulong)param_12,
                 (long)ppbVar10,param_14,unaff_BL);
      return 0xffffffff;
    }
    uVar6 = server_unlink_window
                      (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,pvVar1,
                       uVar6,param_12,(long *)ppbVar10,param_14);
  }
  else {
    uVar9 = 0x61;
    uVar6 = args_has(ppbVar10,0x61);
    if ((int)uVar6 == 0) {
      uVar6 = server_kill_window(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                 param_8,*(uint **)((long)pvVar1 + 8),uVar9,extraout_RDX,param_12,
                                 (long *)ppbVar10,param_14);
    }
    else {
      uVar9 = 0xffffffff;
      pvVar7 = (void *)winlinks_RB_MINMAX((long *)(lVar2 + 0xf8),-1);
      uVar6 = extraout_XMM0_Qa_00;
      while (pvVar4 = pvVar7, pvVar4 != (void *)0x0) {
        pvVar7 = (void *)winlinks_RB_NEXT((long)pvVar4);
        uVar6 = extraout_XMM0_Qa_01;
        if (pvVar1 != pvVar4) {
          uVar6 = server_kill_window(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,
                                     param_7,param_8,*(uint **)((long)pvVar4 + 8),uVar9,
                                     extraout_RDX_00,param_12,(long *)ppbVar10,param_14);
        }
      }
    }
  }
  recalculate_sizes(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  return 0;
}



undefined8
cmd_list_buffers_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined *param_12,long *param_13,char **param_14)

{
  char *pcVar1;
  long *plVar2;
  char *__ptr;
  byte **ppbVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar4;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined in_stack_ffffffffffffffc8;
  
  pcVar1 = (char *)args_get(*(byte ***)(param_9 + 8),0x46);
  if (pcVar1 == (char *)0x0) {
    pcVar1 = "#{buffer_name}: #{buffer_size} bytes: \"#{buffer_sample}\"";
  }
  ppbVar3 = (byte **)0x0;
  while( true ) {
    ppbVar3 = (byte **)paste_walk((long)ppbVar3);
    if (ppbVar3 == (byte **)0x0) break;
    plVar2 = (long *)format_create(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,
                                   param_7,param_8,param_10,0,extraout_RDX_01,param_12,param_13,
                                   param_14);
    uVar4 = format_defaults_paste_buffer
                      (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long)plVar2,ppbVar3,extraout_RDX,param_12,param_13,param_14);
    __ptr = format_expand(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar2,
                          pcVar1,extraout_RDX_00,param_12,param_13,param_14);
    cmdq_print(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "%s",__ptr,param_12,param_13,(size_t)param_14,in_stack_ffffffffffffffc8);
    free(__ptr);
    format_free(plVar2);
  }
  return 0;
}



undefined8
cmd_list_clients_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined *param_12,char *param_13,char **param_14)

{
  byte **ppbVar1;
  undefined8 uVar2;
  char *pcVar3;
  uint **ppuVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long lVar5;
  long *plVar6;
  ulong uVar7;
  long lVar8;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 uVar9;
  undefined in_stack_ffffffffffffffb8;
  
  lVar8 = 0;
  ppbVar1 = *(byte ***)(param_9 + 8);
  uVar2 = args_has(ppbVar1,0x74);
  if ((int)uVar2 != 0) {
    lVar8 = *(long *)(param_10 + 0xa0);
  }
  pcVar3 = (char *)args_get(ppbVar1,0x46);
  if (pcVar3 == (char *)0x0) {
    pcVar3 = 
    "#{client_tty}: #{session_name} [#{client_width}x#{client_height} #{client_termname}]#{?client_utf8, (utf8),} #{?client_readonly, (ro),}"
    ;
  }
  if (clients != 0) {
    uVar2 = extraout_RDX;
    lVar5 = clients;
    uVar7 = 0;
    uVar9 = extraout_XMM0_Qa;
    do {
      while ((*(long *)(lVar5 + 0x598) != 0 && ((lVar8 == 0 || (*(long *)(lVar5 + 0x598) == lVar8)))
             )) {
        ppuVar4 = (uint **)format_create(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,
                                         param_8,param_10,0,uVar2,param_12,param_13,param_14);
        uVar2 = format_add(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,(long)ppuVar4,"line","%u",uVar7,param_13,param_14,
                           in_stack_ffffffffffffffb8);
        param_12 = (undefined *)0x0;
        plVar6 = (long *)0x0;
        uVar2 = format_defaults(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                ppuVar4,lVar5,(uint *)0x0,(uint *)0x0,(uint *)0x0,param_14);
        param_13 = format_expand(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 (long *)ppuVar4,pcVar3,extraout_RDX_00,param_12,plVar6,param_14);
        cmdq_print(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"%s",param_13,param_12,plVar6,(size_t)param_14,in_stack_ffffffffffffffb8
                  );
        free(param_13);
        uVar9 = format_free(ppuVar4);
        lVar5 = *(long *)(lVar5 + 0x5c0);
        uVar2 = extraout_RDX_01;
        uVar7 = (ulong)((int)uVar7 + 1);
        if (lVar5 == 0) {
          return 0;
        }
      }
      lVar5 = *(long *)(lVar5 + 0x5c0);
    } while (lVar5 != 0);
  }
  return 0;
}



undefined8
cmd_list_keys_table(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
                   undefined8 param_14)

{
  bool bVar1;
  undefined4 uVar2;
  char *pcVar3;
  undefined8 *puVar4;
  ulong *puVar5;
  size_t sVar6;
  long lVar7;
  undefined8 uVar8;
  uint uVar9;
  undefined *puVar10;
  char *pcVar11;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  pcVar3 = (char *)args_get(*(byte ***)(param_9 + 8),0x74);
  puVar4 = (undefined8 *)mode_key_findtable(pcVar3);
  if (puVar4 == (undefined8 *)0x0) {
    cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,param_10,"unknown key table: %s",pcVar3,param_12,param_13,param_14,
               (char)param_10);
    uVar8 = 0xffffffff;
  }
  else {
    bVar1 = false;
    uVar9 = 0;
    puVar5 = (ulong *)mode_key_tree_RB_MINMAX((long *)puVar4[2],-1);
    uVar2 = extraout_XMM0_Da_00;
    while (puVar5 != (ulong *)0x0) {
      pcVar3 = key_string_lookup_key
                         (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*puVar5);
      if (*(int *)(puVar5 + 1) != 0) {
        bVar1 = true;
      }
      sVar6 = strlen(pcVar3);
      if ((int)uVar9 < (int)(uint)sVar6) {
        uVar9 = (uint)sVar6;
      }
      puVar5 = (ulong *)mode_key_tree_RB_NEXT((long)puVar5);
      uVar2 = extraout_XMM0_Da_01;
    }
    puVar5 = (ulong *)mode_key_tree_RB_MINMAX((long *)puVar4[2],-1);
    uVar2 = extraout_XMM0_Da_02;
    while (puVar5 != (ulong *)0x0) {
      pcVar11 = "c";
      pcVar3 = key_string_lookup_key
                         (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*puVar5);
      if (*(int *)(puVar5 + 1) == 0) {
        pcVar11 = "";
      }
      lVar7 = mode_key_tostring((int *)puVar4[1],*(int *)((long)puVar5 + 0xc));
      if (lVar7 != 0) {
        puVar10 = &DAT_001816c0;
        if ((bVar1) && (puVar10 = &DAT_00178815, *pcVar11 != '\0')) {
          puVar10 = &DAT_001816c0;
        }
        cmdq_print(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_04),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"bind-key -%st %s%s %*s %s%s%s%s",pcVar11,
                   puVar10,*puVar4,(ulong)uVar9,(char)pcVar3);
      }
      puVar5 = (ulong *)mode_key_tree_RB_NEXT((long)puVar5);
      uVar2 = extraout_XMM0_Da_03;
    }
    uVar8 = 0;
  }
  return uVar8;
}



undefined8
cmd_list_keys_commands
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9)

{
  undefined8 uVar1;
  undefined8 *puVar2;
  undefined8 unaff_RBX;
  undefined **ppuVar3;
  size_t in_R9;
  
  if (cmd_table == (undefined *)0x0) {
    return 0;
  }
  ppuVar3 = &cmd_table;
  puVar2 = (undefined8 *)cmd_table;
  do {
    while( true ) {
      uVar1 = puVar2[4];
      if (puVar2[1] == 0) break;
      ppuVar3 = ppuVar3 + 1;
      param_1 = cmdq_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           "%s (%s) %s",*puVar2,puVar2[1],uVar1,in_R9,(char)unaff_RBX);
      puVar2 = (undefined8 *)*ppuVar3;
      if (puVar2 == (undefined8 *)0x0) {
        return 0;
      }
    }
    param_1 = cmdq_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         "%s %s",*puVar2,uVar1,uVar1,in_R9,(char)unaff_RBX);
    puVar2 = (undefined8 *)ppuVar3[1];
    ppuVar3 = ppuVar3 + 1;
  } while (puVar2 != (undefined8 *)0x0);
  return 0;
}



undefined4
cmd_list_keys_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long *param_9,ulong param_10,undefined8 param_11,ulong param_12,long param_13,
                  size_t param_14)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  undefined8 uVar4;
  char *__s2;
  char **ppcVar5;
  byte **ppbVar6;
  ulong *puVar7;
  byte *pbVar8;
  char *pcVar9;
  ulong uVar10;
  char *pcVar11;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong extraout_RDX_02;
  ulong extraout_RDX_03;
  ulong extraout_RDX_04;
  undefined8 extraout_RDX_05;
  uint uVar12;
  undefined *puVar13;
  uint uVar14;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Da_11;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined in_stack_ffffffffffffd9b8;
  undefined4 local_261c;
  undefined local_2618 [1056];
  undefined4 local_21f8;
  long local_2080;
  char local_2048 [8200];
  long local_40;
  
  ppbVar6 = (byte **)param_9[1];
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((undefined1 *)*param_9 == cmd_list_commands_entry) {
    uVar4 = cmd_list_keys_commands
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10);
    local_261c = (undefined4)uVar4;
  }
  else {
    if (*(long *)(param_10 + 8) == 0) {
      local_21f8 = 0;
      *(undefined **)(param_10 + 8) = local_2618;
      param_12 = param_10;
      local_2080 = sessions_RB_MINMAX(&sessions,-1);
    }
    uVar4 = args_has(ppbVar6,0x74);
    if ((int)uVar4 == 0) {
      __s2 = (char *)args_get(ppbVar6,0x54);
      if ((__s2 == (char *)0x0) ||
         (ppcVar5 = key_bindings_get_table
                              (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                               param_4,param_5,param_6,param_7,param_8,__s2,0,extraout_RDX_00,
                               param_12,param_13,param_14), ppcVar5 != (char **)0x0)) {
        uVar12 = 0;
        uVar14 = 0;
        bVar1 = false;
        ppbVar6 = (byte **)key_tables_RB_MINMAX(&key_tables,-1);
joined_r0x0012ddbe:
        if (ppbVar6 != (byte **)0x0) {
          do {
            if ((__s2 == (char *)0x0) || (iVar3 = strcmp((char *)*ppbVar6,__s2), iVar3 == 0)) {
              uVar4 = 0xffffffff;
              puVar7 = (ulong *)key_bindings_RB_MINMAX((long *)(ppbVar6 + 1),-1);
              uVar15 = extraout_XMM0_Da_02;
              if (puVar7 != (ulong *)0x0) goto LAB_0012de10;
            }
            ppbVar6 = (byte **)key_tables_RB_NEXT((long)ppbVar6);
            if (ppbVar6 == (byte **)0x0) break;
          } while( true );
        }
        ppbVar6 = (byte **)key_tables_RB_MINMAX(&key_tables,-1);
        local_261c = 0;
        for (; ppbVar6 != (byte **)0x0; ppbVar6 = (byte **)key_tables_RB_NEXT((long)ppbVar6)) {
          while (((__s2 != (char *)0x0 && (iVar3 = strcmp((char *)*ppbVar6,__s2), iVar3 != 0)) ||
                 (puVar7 = (ulong *)key_bindings_RB_MINMAX((long *)(ppbVar6 + 1),-1),
                 puVar7 == (ulong *)0x0))) {
            ppbVar6 = (byte **)key_tables_RB_NEXT((long)ppbVar6);
            if (ppbVar6 == (byte **)0x0) goto LAB_0012e018;
          }
          uVar15 = extraout_XMM0_Da_06;
          do {
            pbVar8 = (byte *)key_string_lookup_key
                                       (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,
                                        param_8,*puVar7);
            pcVar11 = "";
            if ((bVar1) && (pcVar11 = "   ", *(int *)(puVar7 + 2) != 0)) {
              pcVar11 = "-r ";
            }
            uVar15 = xsnprintf(extraout_XMM0_Da_07,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,local_2048,0x2000,"%s-T ",pcVar11,param_13,param_14,
                               in_stack_ffffffffffffd9b8);
            pcVar9 = (char *)utf8_padcstr(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,
                                          param_8,*ppbVar6,(ulong)uVar14,extraout_RDX_03,pcVar11,
                                          param_13,param_14);
            strlcat(local_2048,pcVar9,0x2000);
            strlcat(local_2048," ",0x2000);
            free(pcVar9);
            pcVar9 = (char *)utf8_padcstr(extraout_XMM0_Da_08,param_2,param_3,param_4,param_5,
                                          param_6,param_7,param_8,pbVar8,(ulong)uVar12,
                                          extraout_RDX_04,pcVar11,param_13,param_14);
            strlcat(local_2048,pcVar9,0x2000);
            puVar13 = &DAT_00178815;
            strlcat(local_2048," ",0x2000);
            free(pcVar9);
            pcVar9 = cmd_list_print(extraout_XMM0_Da_09,param_2,param_3,param_4,param_5,param_6,
                                    param_7,param_8,puVar7[1],puVar13,extraout_RDX_05,pcVar11,
                                    param_13,param_14);
            strlcat(local_2048,pcVar9,0x2000);
            free(pcVar9);
            cmdq_print(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_10),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_10,"bind-key %s",local_2048,pcVar11,
                       param_13,param_14,in_stack_ffffffffffffd9b8);
            puVar7 = (ulong *)key_bindings_RB_NEXT((long)puVar7);
            uVar15 = extraout_XMM0_Da_11;
          } while (puVar7 != (ulong *)0x0);
        }
        goto LAB_0012e018;
      }
      cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"table %s doesn\'t exist",__s2,param_12,param_13,
                 param_14,in_stack_ffffffffffffd9b8);
      local_261c = 0xffffffff;
    }
    else {
      uVar4 = cmd_list_keys_table(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,(long)param_9,param_10,
                                  extraout_RDX,param_12,param_13,param_14);
      local_261c = (undefined4)uVar4;
    }
  }
LAB_0012e018:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_261c;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
LAB_0012de10:
  do {
    pbVar8 = (byte *)key_string_lookup_key
                               (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *puVar7);
    uVar10 = (ulong)*(uint *)(puVar7 + 2);
    if (*(uint *)(puVar7 + 2) != 0) {
      bVar1 = true;
    }
    uVar2 = utf8_cstrwidth(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,*ppbVar6,uVar4,extraout_RDX_01,uVar10,param_13,param_14);
    if ((int)uVar14 < (int)uVar2) {
      uVar14 = uVar2;
    }
    uVar2 = utf8_cstrwidth(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,pbVar8,uVar4,extraout_RDX_02,uVar10,param_13,param_14);
    if ((int)uVar12 < (int)uVar2) {
      uVar12 = uVar2;
    }
    puVar7 = (ulong *)key_bindings_RB_NEXT((long)puVar7);
    uVar15 = extraout_XMM0_Da_05;
  } while (puVar7 != (ulong *)0x0);
  ppbVar6 = (byte **)key_tables_RB_NEXT((long)ppbVar6);
  goto joined_r0x0012ddbe;
}



void cmd_list_panes_window
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint *param_10,uint *param_11,uint *param_12,long *param_13,
               char **param_14)

{
  char *pcVar1;
  uint **ppuVar2;
  uint *puVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  int iVar4;
  ulong uVar5;
  long *plVar6;
  long *plVar7;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar8;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 uVar9;
  undefined uVar10;
  char *in_stack_ffffffffffffffb8;
  
  puVar3 = param_12;
  plVar6 = param_13;
  pcVar1 = (char *)args_get(*(byte ***)(param_9 + 8),0x46);
  if (pcVar1 == (char *)0x0) {
    iVar4 = (int)param_13;
    if (iVar4 == 1) {
      pcVar1 = 
      "#{window_index}.#{pane_index}: [#{pane_width}x#{pane_height}] [history #{history_size}/#{history_limit}, #{history_bytes} bytes] #{pane_id}#{?pane_active, (active),}#{?pane_dead, (dead),}"
      ;
    }
    else if (iVar4 == 2) {
      pcVar1 = 
      "#{session_name}:#{window_index}.#{pane_index}: [#{pane_width}x#{pane_height}] [history #{history_size}/#{history_limit}, #{history_bytes} bytes] #{pane_id}#{?pane_active, (active),}#{?pane_dead, (dead),}"
      ;
    }
    else if (iVar4 == 0) {
      pcVar1 = 
      "#{pane_index}: [#{pane_width}x#{pane_height}] [history #{history_size}/#{history_limit}, #{history_bytes} bytes] #{pane_id}#{?pane_active, (active),}#{?pane_dead, (dead),}"
      ;
    }
  }
  plVar7 = *(long **)(*(long *)(param_11 + 2) + 0x148);
  if (plVar7 != (long *)0x0) {
    uVar8 = extraout_RDX;
    uVar5 = 0;
    uVar9 = extraout_XMM0_Qa;
    do {
      uVar10 = SUB81(in_stack_ffffffffffffffb8,0);
      ppuVar2 = (uint **)format_create(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                       ,(long)param_12,0,uVar8,(undefined *)puVar3,plVar6,param_14);
      uVar8 = format_add(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,(long)ppuVar2,"line","%u",uVar5,plVar6,param_14,uVar10);
      puVar3 = param_11;
      plVar6 = plVar7;
      uVar8 = format_defaults(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppuVar2,
                              0,param_10,param_11,(uint *)plVar7,param_14);
      in_stack_ffffffffffffffb8 =
           format_expand(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long *)ppuVar2,pcVar1,extraout_RDX_00,puVar3,plVar6,param_14);
      cmdq_print(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 (long)param_12,"%s",in_stack_ffffffffffffffb8,puVar3,plVar6,(size_t)param_14,
                 (char)in_stack_ffffffffffffffb8);
      free(in_stack_ffffffffffffffb8);
      uVar9 = format_free(ppuVar2);
      plVar7 = (long *)plVar7[0x3f];
      uVar8 = extraout_RDX_01;
      uVar5 = (ulong)((int)uVar5 + 1);
    } while (plVar7 != (long *)0x0);
  }
  return;
}



void cmd_list_panes_session
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint *param_10,uint *param_11,uint param_12,undefined8 param_13,
               char **param_14)

{
  undefined8 uVar1;
  uint *puVar2;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  puVar2 = (uint *)winlinks_RB_MINMAX((long *)(param_10 + 0x3e),-1);
  uVar1 = extraout_XMM0_Qa;
  while (puVar2 != (uint *)0x0) {
    cmd_list_panes_window
              (uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,puVar2
               ,param_11,(long *)(ulong)param_12,param_14);
    puVar2 = (uint *)winlinks_RB_NEXT((long)puVar2);
    uVar1 = extraout_XMM0_Qa_00;
  }
  return;
}



void cmd_list_panes_server
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,char **param_14)

{
  undefined8 uVar1;
  uint *puVar2;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  puVar2 = (uint *)sessions_RB_MINMAX(&sessions,-1);
  uVar1 = extraout_XMM0_Qa;
  while (puVar2 != (uint *)0x0) {
    cmd_list_panes_session
              (uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,puVar2,param_10
               ,2,param_13,param_14);
    puVar2 = (uint *)sessions_RB_NEXT((long)puVar2);
    uVar1 = extraout_XMM0_Qa_00;
  }
  return;
}



undefined8
cmd_list_panes_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,char **param_14)

{
  byte **ppbVar1;
  uint *puVar2;
  uint *puVar3;
  undefined8 uVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  puVar2 = *(uint **)(param_10 + 0x28);
  puVar3 = *(uint **)(param_10 + 0x2a);
  uVar4 = args_has(ppbVar1,0x61);
  if ((int)uVar4 != 0) {
    cmd_list_panes_server
              (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               param_10,extraout_RDX,param_12,param_13,param_14);
    return 0;
  }
  uVar4 = args_has(ppbVar1,0x73);
  if ((int)uVar4 != 0) {
    cmd_list_panes_session
              (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               puVar2,param_10,1,param_13,param_14);
    return 0;
  }
  cmd_list_panes_window
            (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
             puVar2,puVar3,param_10,(long *)0x0,param_14);
  return 0;
}



undefined8
cmd_list_sessions_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined *param_12,long *param_13,char **param_14)

{
  char *pcVar1;
  uint *puVar2;
  uint **ppuVar3;
  char *__ptr;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  ulong uVar4;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar5;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar6;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined in_stack_ffffffffffffffc8;
  
  pcVar1 = (char *)args_get(*(byte ***)(param_9 + 8),0x46);
  if (pcVar1 == (char *)0x0) {
    pcVar1 = 
    "#{session_name}: #{session_windows} windows (created #{t:session_created}) [#{session_width}x#{session_height}]#{?session_grouped, (group ,}#{session_group}#{?session_grouped,),}#{?session_attached, (attached),}"
    ;
  }
  puVar2 = (uint *)sessions_RB_MINMAX(&sessions,-1);
  if (puVar2 != (uint *)0x0) {
    uVar6 = extraout_RDX;
    uVar4 = 0;
    uVar5 = extraout_XMM0_Qa;
    do {
      ppuVar3 = (uint **)format_create(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                       ,param_10,0,uVar6,param_12,param_13,param_14);
      uVar6 = format_add(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,(long)ppuVar3,"line","%u",uVar4,param_13,param_14,
                         in_stack_ffffffffffffffc8);
      param_13 = (long *)0x0;
      param_12 = (undefined *)0x0;
      uVar6 = format_defaults(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppuVar3,
                              0,puVar2,(uint *)0x0,(uint *)0x0,param_14);
      __ptr = format_expand(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long *)ppuVar3,pcVar1,extraout_RDX_00,param_12,param_13,param_14);
      cmdq_print(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_10,"%s",__ptr,param_12,param_13,(size_t)param_14,in_stack_ffffffffffffffc8);
      free(__ptr);
      format_free(ppuVar3);
      puVar2 = (uint *)sessions_RB_NEXT((long)puVar2);
      uVar6 = extraout_RDX_01;
      uVar4 = (ulong)((int)uVar4 + 1);
      uVar5 = extraout_XMM0_Qa_02;
    } while (puVar2 != (uint *)0x0);
  }
  return 0;
}



void cmd_list_windows_session
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint *param_10,long param_11,uint *param_12,long *param_13,
               char **param_14)

{
  char *pcVar1;
  uint *puVar2;
  uint **ppuVar3;
  char *__ptr;
  uint *puVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  ulong uVar5;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar6;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar7;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined in_stack_ffffffffffffffb8;
  
  puVar4 = param_12;
  pcVar1 = (char *)args_get(*(byte ***)(param_9 + 8),0x46);
  if (pcVar1 == (char *)0x0) {
    if ((int)param_12 == 0) {
      pcVar1 = 
      "#{window_index}: #{window_name}#{window_flags} (#{window_panes} panes) [#{window_width}x#{window_height}] [layout #{window_layout}] #{window_id}#{?window_active, (active),}"
      ;
    }
    else if ((int)param_12 == 1) {
      pcVar1 = 
      "#{session_name}:#{window_index}: #{window_name}#{window_flags} (#{window_panes} panes) [#{window_width}x#{window_height}] "
      ;
    }
  }
  puVar2 = (uint *)winlinks_RB_MINMAX((long *)(param_10 + 0x3e),-1);
  if (puVar2 != (uint *)0x0) {
    uVar7 = extraout_RDX;
    uVar5 = 0;
    uVar6 = extraout_XMM0_Qa;
    do {
      ppuVar3 = (uint **)format_create(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                       ,param_11,0,uVar7,(undefined *)puVar4,param_13,param_14);
      uVar7 = format_add(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,(long)ppuVar3,"line","%u",uVar5,param_13,param_14,
                         in_stack_ffffffffffffffb8);
      param_13 = (long *)0x0;
      puVar4 = puVar2;
      uVar7 = format_defaults(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppuVar3,
                              0,param_10,puVar2,(uint *)0x0,param_14);
      __ptr = format_expand(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long *)ppuVar3,pcVar1,extraout_RDX_00,puVar4,param_13,param_14);
      cmdq_print(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_11,"%s",__ptr,puVar4,param_13,(size_t)param_14,in_stack_ffffffffffffffb8);
      free(__ptr);
      format_free(ppuVar3);
      puVar2 = (uint *)winlinks_RB_NEXT((long)puVar2);
      uVar7 = extraout_RDX_01;
      uVar5 = (ulong)((int)uVar5 + 1);
      uVar6 = extraout_XMM0_Qa_02;
    } while (puVar2 != (uint *)0x0);
  }
  return;
}



void cmd_list_windows_server
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,long *param_13,
               char **param_14)

{
  undefined8 uVar1;
  uint *puVar2;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  puVar2 = (uint *)sessions_RB_MINMAX(&sessions,-1);
  uVar1 = extraout_XMM0_Qa;
  while (puVar2 != (uint *)0x0) {
    cmd_list_windows_session
              (uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,puVar2,param_10
               ,(uint *)0x1,param_13,param_14);
    puVar2 = (uint *)sessions_RB_NEXT((long)puVar2);
    uVar1 = extraout_XMM0_Qa_00;
  }
  return;
}



undefined8
cmd_list_windows_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined8 param_12,long *param_13,char **param_14)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  uVar1 = args_has(*(byte ***)(param_9 + 8),0x61);
  if ((int)uVar1 != 0) {
    cmd_list_windows_server
              (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               param_10,extraout_RDX,param_12,param_13,param_14);
    return 0;
  }
  cmd_list_windows_session
            (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
             *(uint **)(param_10 + 0xa0),param_10,(uint *)0x0,param_13,param_14);
  return 0;
}



void FUN_0012e630(void *param_1)

{
  void *pvVar1;
  undefined8 *puVar2;
  void **ppvVar3;
  void *__ptr;
  
  __ptr = *(void **)((long)param_1 + 8);
  if (*(void **)((long)param_1 + 8) != (void *)0x0) {
    while( true ) {
      pvVar1 = *(void **)((long)__ptr + 0x20);
      puVar2 = *(undefined8 **)((long)__ptr + 0x28);
      ppvVar3 = *(void ***)((long)__ptr + 8);
      if (pvVar1 == (void *)0x0) break;
      *(undefined8 **)((long)pvVar1 + 0x28) = puVar2;
      **(void ***)((long)__ptr + 0x28) = pvVar1;
      args_free(ppvVar3);
      free(*(void **)((long)__ptr + 0x10));
      free(__ptr);
      __ptr = pvVar1;
    }
    *(undefined8 **)((long)param_1 + 0x10) = puVar2;
    *puVar2 = 0;
    args_free(ppvVar3);
    free(*(void **)((long)__ptr + 0x10));
    free(__ptr);
  }
  free(param_1);
  return;
}



int * cmd_list_parse(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    int param_9,long param_10,char *param_11,undefined8 param_12,long *param_13,
                    undefined8 param_14)

{
  char *pcVar1;
  undefined8 *puVar2;
  void **ppvVar3;
  int *piVar4;
  size_t sVar5;
  undefined8 *puVar6;
  undefined4 uVar7;
  undefined8 extraout_RDX;
  int iVar8;
  long *plVar9;
  int iVar10;
  long lVar11;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar13;
  undefined4 extraout_XMM0_Db_01;
  int local_48;
  
  uVar7 = (undefined4)param_12;
  plVar9 = param_13;
  ppvVar3 = (void **)cmd_copy_argv(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   param_9,param_10,param_11,param_12,param_13,param_14);
  piVar4 = (int *)xcalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1
                          ,0x18,extraout_RDX,param_12,plVar9,param_14);
  *piVar4 = 1;
  *(undefined8 *)(piVar4 + 2) = 0;
  *(int **)(piVar4 + 4) = piVar4 + 2;
  if (param_9 < 1) {
    local_48 = 0;
    uVar12 = extraout_XMM0_Da_00;
    uVar13 = extraout_XMM0_Db;
  }
  else {
    local_48 = 0;
    lVar11 = 0;
    do {
      while( true ) {
        pcVar1 = (char *)ppvVar3[lVar11];
        iVar10 = (int)lVar11;
        sVar5 = strlen(pcVar1);
        uVar12 = extraout_XMM0_Da_02;
        uVar13 = extraout_XMM0_Db_01;
        if (sVar5 != 0) break;
        lVar11 = lVar11 + 1;
        if (param_9 <= iVar10 + 1) goto LAB_0012e7cf;
      }
      pcVar1 = pcVar1 + (sVar5 - 1);
      if (*pcVar1 == ';') {
        *pcVar1 = '\0';
        if (sVar5 == 1) {
          iVar8 = iVar10 - local_48;
        }
        else {
          pcVar1 = (char *)((long)ppvVar3[lVar11] + (sVar5 - 2));
          if (*pcVar1 == '\\') {
            *pcVar1 = ';';
            goto LAB_0012e7a0;
          }
          iVar8 = (iVar10 - local_48) + 1;
        }
        puVar6 = cmd_parse(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,param_4
                           ,param_5,param_6,param_7,param_8,iVar8,(char **)(ppvVar3 + local_48),
                           param_11,uVar7,param_13,param_14);
        if (puVar6 == (undefined8 *)0x0) goto LAB_0012e868;
        puVar2 = *(undefined8 **)(piVar4 + 4);
        puVar6[4] = 0;
        puVar6[5] = puVar2;
        *puVar2 = puVar6;
        *(undefined8 **)(piVar4 + 4) = puVar6 + 4;
        local_48 = iVar10 + 1;
        uVar12 = extraout_XMM0_Da_01;
        uVar13 = extraout_XMM0_Db_00;
      }
LAB_0012e7a0:
      lVar11 = lVar11 + 1;
    } while (iVar10 + 1 < param_9);
  }
LAB_0012e7cf:
  if (param_9 != local_48) {
    puVar6 = cmd_parse(CONCAT44(uVar13,uVar12),param_2,param_3,param_4,param_5,param_6,param_7,
                       param_8,param_9 - local_48,(char **)(ppvVar3 + local_48),param_11,uVar7,
                       param_13,param_14);
    if (puVar6 == (undefined8 *)0x0) {
LAB_0012e868:
      *piVar4 = *piVar4 + -1;
      if (*piVar4 == 0) {
        FUN_0012e630(piVar4);
      }
      cmd_free_argv(param_9,ppvVar3);
      return (int *)0x0;
    }
    puVar2 = *(undefined8 **)(piVar4 + 4);
    puVar6[4] = 0;
    puVar6[5] = puVar2;
    *puVar2 = puVar6;
    *(undefined8 **)(piVar4 + 4) = puVar6 + 4;
  }
  cmd_free_argv(param_9,ppvVar3);
  return piVar4;
}



void cmd_list_free(int *param_1)

{
  *param_1 = *param_1 + -1;
  if (*param_1 == 0) {
    FUN_0012e630(param_1);
    return;
  }
  return;
}



char * cmd_list_print(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,undefined8 param_10,undefined8 param_11,char *param_12,
                     undefined8 param_13,undefined8 param_14)

{
  char *__s;
  size_t sVar1;
  char *pcVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 *puVar3;
  char *pcVar4;
  long lVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined auVar7 [16];
  
  pcVar4 = (char *)0x1;
  auVar7 = xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,1,param_11,
                   param_12,param_13,param_14);
  pcVar2 = auVar7._0_8_;
  puVar3 = *(undefined8 **)(param_9 + 8);
  if (puVar3 != (undefined8 *)0x0) {
    lVar5 = 1;
    uVar6 = extraout_XMM0_Da;
    do {
      __s = (char *)cmd_print(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar3,
                              pcVar4,auVar7._8_8_,param_12,param_13,param_14);
      sVar1 = strlen(__s);
      lVar5 = lVar5 + 3 + sVar1;
      pcVar2 = (char *)xrealloc(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,auVar7._0_8_,lVar5,extraout_RDX,param_12,param_13,param_14);
      pcVar4 = __s;
      strlcat(pcVar2,__s,lVar5);
      if (puVar3[4] != 0) {
        pcVar4 = " ; ";
        strlcat(pcVar2," ; ",lVar5);
      }
      free(__s);
      auVar7._8_8_ = extraout_RDX_00;
      auVar7._0_8_ = pcVar2;
      puVar3 = (undefined8 *)puVar3[4];
      uVar6 = extraout_XMM0_Da_01;
    } while (puVar3 != (undefined8 *)0x0);
  }
  return pcVar2;
}



undefined8
cmd_load_buffer_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,char *param_12,long param_13,void **param_14)

{
  byte **ppbVar1;
  long *plVar2;
  uint uVar3;
  int iVar4;
  undefined8 uVar5;
  undefined8 uVar6;
  long lVar7;
  FILE *__stream;
  void *pvVar8;
  int *piVar9;
  char *pcVar10;
  void **ppvVar11;
  char *pcVar12;
  void *pvVar13;
  undefined8 uVar14;
  void *__ptr;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 extraout_XMM0_Qa_05;
  undefined8 extraout_XMM0_Qa_06;
  undefined8 extraout_XMM0_Qa_07;
  undefined in_stack_ffffffffffffef98;
  char *local_1060;
  void *local_1058;
  char *local_1050;
  char local_1048 [4104];
  long local_40;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  plVar2 = *(long **)(param_10 + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar14 = 0x62;
  uVar5 = args_has(ppbVar1,0x62);
  local_1060 = (char *)0x0;
  uVar6 = extraout_XMM0_Qa;
  if ((int)uVar5 != 0) {
    uVar14 = 0x62;
    local_1060 = (char *)args_get(ppbVar1,0x62);
    uVar6 = extraout_XMM0_Qa_04;
  }
  pcVar10 = *(char **)ppbVar1[2];
  if ((*pcVar10 == '-') && (pcVar10[1] == '\0')) {
    uVar3 = server_set_stdin_callback
                      (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar2,
                       cmd_load_buffer_callback,(long)local_1060,&local_1058,param_13,param_14);
    uVar6 = 1;
    if (uVar3 != 0) {
      cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_10,"%s: %s",pcVar10,(ulong)local_1058,(ulong)uVar3,param_14,
                 in_stack_ffffffffffffef98);
      free(local_1058);
      uVar6 = 0xffffffff;
    }
  }
  else {
    if (plVar2[0xb3] == 0) {
      pcVar12 = (char *)plVar2[0x19];
      if (pcVar12 == (char *)0x0) {
        pcVar12 = ".";
      }
    }
    else {
      pcVar12 = *(char **)(plVar2[0xb3] + 0x10);
      if (pcVar12 == (char *)0x0) {
        pcVar12 = ".";
      }
    }
    if (*pcVar10 == '/') {
      local_1050 = (char *)xstrdup(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   pcVar10,uVar14,pcVar12,param_12,param_13,param_14);
    }
    else {
      xasprintf(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)&local_1050,
                "%s/%s",pcVar12,pcVar10,param_13,param_14,in_stack_ffffffffffffef98);
      param_12 = pcVar10;
    }
    lVar7 = __realpath_chk(local_1050,local_1048,0x1000);
    if ((lVar7 == 0) && (pcVar10 = strlcpy(local_1048,local_1050,0x1000), (char *)0xfff < pcVar10))
    {
      pcVar12 = strerror(0x24);
      pcVar10 = local_1050;
      uVar6 = extraout_XMM0_Qa_05;
    }
    else {
      pvVar13 = (void *)0x0;
      __stream = fopen(local_1048,"rb");
      free(local_1050);
      __ptr = (void *)0x0;
      if (__stream != (FILE *)0x0) {
        while (iVar4 = getc(__stream), iVar4 != -1) {
          pvVar8 = realloc(__ptr,(long)pvVar13 + 2);
          if (pvVar8 == (void *)0x0) {
            piVar9 = __errno_location();
            pcVar10 = strerror(*piVar9);
            cmdq_error(extraout_XMM0_Qa_07,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_10,"realloc error: %s",pcVar10,(ulong)param_12,param_13,param_14,
                       in_stack_ffffffffffffef98);
            goto LAB_0012ec14;
          }
          *(char *)((long)pvVar8 + (long)pvVar13) = (char)iVar4;
          pvVar13 = (void *)((long)pvVar13 + 1);
          __ptr = pvVar8;
        }
        iVar4 = ferror(__stream);
        if (iVar4 == 0) {
          if (__ptr != (void *)0x0) {
            *(undefined *)((long)__ptr + (long)pvVar13) = 0;
          }
          fclose(__stream);
          ppvVar11 = &local_1058;
          uVar6 = paste_set(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,__ptr,pvVar13,local_1060,ppvVar11,param_13,param_14);
          if ((int)uVar6 != 0) {
            cmdq_error(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_10,"%s",local_1058,(ulong)ppvVar11,param_13,param_14,
                       in_stack_ffffffffffffef98);
            free(__ptr);
            free(local_1058);
            uVar6 = 0xffffffff;
          }
        }
        else {
          cmdq_error(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_10,"%s: read error",local_1048,(ulong)param_12,param_13,param_14,
                     in_stack_ffffffffffffef98);
LAB_0012ec14:
          free(__ptr);
          fclose(__stream);
          uVar6 = 0xffffffff;
        }
        goto LAB_0012eb3f;
      }
      piVar9 = __errno_location();
      pcVar12 = strerror(*piVar9);
      pcVar10 = local_1048;
      uVar6 = extraout_XMM0_Qa_06;
    }
    cmdq_error(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,"%s: %s",
               pcVar10,(ulong)pcVar12,param_13,param_14,in_stack_ffffffffffffef98);
    uVar6 = 0xffffffff;
  }
LAB_0012eb3f:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



void cmd_load_buffer_callback
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,int param_10,char *param_11,undefined8 param_12,undefined8 param_13,
               void **param_14)

{
  long lVar1;
  byte *__ptr;
  void *__n;
  void *__dest;
  void *__src;
  undefined8 uVar2;
  byte **ppbVar3;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  byte *local_38;
  long local_30;
  
  ppbVar3 = &local_38;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 != 0) {
    param_9[0x4f] = 0;
    server_client_unref(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)param_9);
    if ((*(byte *)((long)param_9 + 0x421) & 2) == 0) {
      __n = (void *)evbuffer_get_length(param_9[0x51]);
      uVar4 = extraout_XMM0_Da;
      uVar5 = extraout_XMM0_Db;
      if (__n != (void *)0x0) {
        __dest = malloc((long)__n + 1);
        uVar4 = extraout_XMM0_Da_00;
        uVar5 = extraout_XMM0_Db_00;
        if (__dest != (void *)0x0) {
          __src = (void *)evbuffer_pullup(param_9[0x51],0xffffffffffffffff);
          memcpy(__dest,__src,(size_t)__n);
          lVar1 = param_9[0x51];
          *(undefined *)((long)__dest + (long)__n) = 0;
          uVar2 = evbuffer_drain(lVar1,__n);
          uVar2 = paste_set(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__dest,__n
                            ,param_11,&local_38,param_13,param_14);
          __ptr = local_38;
          uVar4 = extraout_XMM0_Da_01;
          uVar5 = extraout_XMM0_Db_01;
          if ((int)uVar2 != 0) {
            if ((*(byte *)((long)param_9 + 0x422) & 1) == 0) {
              local_38 = (byte *)utf8_sanitize(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,
                                               param_6,param_7,param_8,local_38,__n,extraout_RDX,
                                               (ulong)ppbVar3,param_13,param_14);
              free(__ptr);
            }
            uVar2 = evbuffer_add_printf(param_9[0x54],"%s",local_38);
            server_client_push_stderr
                      (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
            free(__dest);
            free(local_38);
            uVar4 = extraout_XMM0_Da_02;
            uVar5 = extraout_XMM0_Db_02;
          }
        }
      }
      cmdq_continue(CONCAT44(uVar5,uVar4),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    (int *)param_9[0xb6]);
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
cmd_lock_server_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9,
          long param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  undefined8 uVar1;
  
  if ((undefined1 *)*param_9 == cmd_lock_server_entry) {
    uVar1 = server_lock(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        param_10,cmd_lock_server_entry,param_12,param_13,param_14);
    recalculate_sizes(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
    return 0;
  }
  if ((undefined1 *)*param_9 != cmd_lock_session_entry) {
    uVar1 = server_lock_client(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               *(long **)(param_10 + 0x80),param_10,cmd_lock_session_entry,param_12,
                               param_13,param_14);
    recalculate_sizes(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
    return 0;
  }
  uVar1 = server_lock_session(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(long *)(param_10 + 0xa0),param_10,cmd_lock_session_entry,param_12,
                              param_13,param_14);
  recalculate_sizes(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  return 0;
}



undefined8
cmd_move_window_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
          undefined8 param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
          undefined8 param_14)

{
  undefined1 in_stack_fffffffffffffff8;
  
  cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "move window is not supported with tmate",param_11,param_12,param_13,param_14,
             in_stack_fffffffffffffff8);
  return 0xffffffff;
}



ulong cmd_new_session_exec
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long *param_9,long param_10,undefined8 param_11,char **param_12,char **param_13,
                char **param_14)

{
  byte **ppbVar1;
  long *plVar2;
  undefined auVar3 [16];
  bool bVar4;
  int iVar5;
  undefined8 uVar7;
  undefined8 uVar8;
  char *pcVar9;
  undefined7 extraout_var;
  long lVar10;
  ulong uVar11;
  uint **ppuVar12;
  char *pcVar13;
  uint uVar6;
  char **ppcVar14;
  uint *puVar15;
  uint *puVar16;
  longlong lVar17;
  char **ppcVar18;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  long extraout_RDX_08;
  undefined8 extraout_RDX_09;
  long extraout_RDX_10;
  undefined8 extraout_RDX_11;
  undefined8 extraout_RDX_12;
  long extraout_RDX_13;
  undefined8 extraout_RDX_14;
  long extraout_RDX_15;
  undefined8 extraout_RDX_16;
  undefined8 extraout_RDX_17;
  undefined8 extraout_RDX_18;
  undefined8 extraout_RDX_19;
  undefined8 extraout_RDX_20;
  long extraout_RDX_21;
  undefined8 extraout_RDX_22;
  uint uVar19;
  termios *__termios_p;
  undefined *puVar20;
  long *plVar21;
  uint uVar22;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Da_11;
  undefined4 extraout_XMM0_Da_12;
  undefined4 extraout_XMM0_Da_13;
  undefined4 uVar23;
  undefined4 extraout_XMM0_Da_14;
  undefined4 extraout_XMM0_Da_15;
  undefined4 extraout_XMM0_Da_16;
  undefined4 extraout_XMM0_Da_17;
  undefined4 extraout_XMM0_Da_18;
  undefined4 extraout_XMM0_Da_19;
  undefined4 extraout_XMM0_Da_20;
  undefined4 extraout_XMM0_Da_21;
  undefined4 extraout_XMM0_Da_22;
  undefined4 extraout_XMM0_Da_23;
  undefined4 extraout_XMM0_Da_24;
  undefined4 extraout_XMM0_Da_25;
  undefined4 extraout_XMM0_Da_26;
  undefined4 extraout_XMM0_Da_27;
  undefined4 extraout_XMM0_Da_28;
  undefined4 extraout_XMM0_Da_29;
  undefined4 extraout_XMM0_Da_30;
  undefined4 extraout_XMM0_Da_31;
  undefined4 extraout_XMM0_Da_32;
  undefined4 extraout_XMM0_Da_33;
  undefined4 extraout_XMM0_Da_34;
  undefined4 extraout_XMM0_Da_35;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined4 extraout_XMM0_Db_09;
  undefined4 extraout_XMM0_Db_10;
  undefined4 extraout_XMM0_Db_11;
  undefined4 extraout_XMM0_Db_12;
  undefined4 extraout_XMM0_Db_13;
  undefined4 extraout_XMM0_Db_14;
  undefined4 uVar24;
  undefined4 extraout_XMM0_Db_15;
  undefined4 extraout_XMM0_Db_16;
  undefined4 extraout_XMM0_Db_17;
  undefined4 extraout_XMM0_Db_18;
  undefined4 extraout_XMM0_Db_19;
  undefined4 extraout_XMM0_Db_20;
  undefined4 extraout_XMM0_Db_21;
  undefined4 extraout_XMM0_Db_22;
  undefined4 extraout_XMM0_Db_23;
  undefined4 extraout_XMM0_Db_24;
  undefined4 extraout_XMM0_Db_25;
  undefined4 extraout_XMM0_Db_26;
  undefined4 extraout_XMM0_Db_27;
  undefined4 extraout_XMM0_Db_28;
  undefined4 extraout_XMM0_Db_29;
  undefined4 extraout_XMM0_Db_30;
  undefined4 extraout_XMM0_Db_31;
  undefined auVar25 [16];
  undefined auVar26 [16];
  undefined in_stack_ffffffffffffff08;
  long local_f0;
  char **local_e8;
  char **local_e0;
  char **local_d0;
  undefined8 *******local_c8;
  uint local_b0;
  char *local_a0;
  undefined8 *******local_98;
  void *local_90;
  termios local_88;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((undefined1 *)*param_9 == cmd_has_session_entry) {
LAB_0012f325:
    uVar11 = 0;
    goto LAB_0012f327;
  }
  ppbVar1 = (byte **)param_9[1];
  local_f0 = *(long *)(param_10 + 0xa0);
  plVar2 = *(long **)(param_10 + 8);
  uVar7 = args_has(ppbVar1,0x74);
  if (((int)uVar7 != 0) &&
     ((uVar7 = extraout_RDX, uVar23 = extraout_XMM0_Da, uVar24 = extraout_XMM0_Db,
      *(int *)(ppbVar1 + 1) != 0 ||
      (uVar8 = args_has(ppbVar1,0x6e), uVar7 = extraout_RDX_00, uVar23 = extraout_XMM0_Da_00,
      uVar24 = extraout_XMM0_Db_00, (int)uVar8 != 0)))) {
    cmdq_error(CONCAT44(uVar24,uVar23),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               param_10,"command or window name given with target",uVar7,(ulong)param_12,
               (long)param_13,param_14,in_stack_ffffffffffffff08);
    uVar11 = 0xffffffff;
    goto LAB_0012f327;
  }
  pcVar9 = (char *)args_get(ppbVar1,0x73);
  if (pcVar9 != (char *)0x0) {
    bVar4 = session_check_name(pcVar9);
    if ((int)CONCAT71(extraout_var,bVar4) == 0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"bad session name: %s",pcVar9,(ulong)param_12,
                 (long)param_13,param_14,in_stack_ffffffffffffff08);
      uVar11 = 0xffffffff;
      goto LAB_0012f327;
    }
    lVar10 = session_find(pcVar9);
    if (lVar10 != 0) {
      uVar7 = args_has(ppbVar1,0x41);
      if ((int)uVar7 == 0) {
        cmdq_error(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"duplicate session: %s",pcVar9,(ulong)param_12,
                   (long)param_13,param_14,in_stack_ffffffffffffff08);
        uVar11 = 0xffffffff;
      }
      else {
        cmd_find_from_session
                  (CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,(undefined8 *)(param_10 + 0x88),lVar10,extraout_RDX_01,
                   (ulong)param_12,(ulong)param_13,(ulong)param_14);
        uVar11 = args_has(ppbVar1,0x45);
        uVar7 = args_has(ppbVar1,0x44);
        uVar11 = cmd_attach_session(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_03),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                                    (uint)uVar7,0,(uint *)0x0,(long *)(uVar11 & 0xffffffff),param_14
                                   );
      }
      goto LAB_0012f327;
    }
  }
  lVar10 = args_get(ppbVar1,0x74);
  if (lVar10 == 0) {
    local_f0 = 0;
  }
  else if (local_f0 == 0) {
    cmdq_error(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_10,"no such session: %s",lVar10,(ulong)param_12,
               (long)param_13,param_14,in_stack_ffffffffffffff08);
    uVar11 = 0xffffffff;
    goto LAB_0012f327;
  }
  uVar7 = args_has(ppbVar1,100);
  uVar19 = (uint)uVar7;
  if (plVar2 == (long *)0x0) {
    uVar7 = args_has(ppbVar1,99);
    if ((int)uVar7 == 0) {
      uVar19 = 1;
      uVar6 = 0x18;
      local_d0 = (char **)0x0;
      uVar22 = 0x50;
      local_e0 = (char **)0x1804e2;
      local_b0 = 0;
    }
    else {
      ppuVar12 = (uint **)format_create(CONCAT44(extraout_XMM0_Db_18,extraout_XMM0_Da_20),param_2,
                                        param_3,param_4,param_5,param_6,param_7,param_8,param_10,0,
                                        extraout_RDX_16,(undefined *)param_12,param_13,param_14);
      plVar21 = (long *)0x0;
      param_12 = (char **)0x0;
      format_defaults(CONCAT44(extraout_XMM0_Db_27,extraout_XMM0_Da_31),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,ppuVar12,0,(uint *)0x0,(uint *)0x0,(uint *)0x0
                      ,param_14);
      pcVar13 = (char *)args_get(ppbVar1,99);
      local_e0 = (char **)format_expand(CONCAT44(extraout_XMM0_Db_28,extraout_XMM0_Da_32),param_2,
                                        param_3,param_4,param_5,param_6,param_7,param_8,
                                        (long *)ppuVar12,pcVar13,extraout_RDX_20,param_12,plVar21,
                                        param_14);
      uVar6 = 0x18;
      format_free(ppuVar12);
      uVar19 = 1;
      uVar22 = 0x50;
      local_b0 = 0;
      local_d0 = local_e0;
    }
LAB_0012f4c8:
    uVar7 = args_has(ppbVar1,0x78);
    if ((int)uVar7 == 0) {
LAB_0012f4e7:
      uVar8 = args_has(ppbVar1,0x79);
      uVar7 = CONCAT44(extraout_XMM0_Db_19,extraout_XMM0_Da_21);
      uVar11 = (ulong)uVar22;
      if ((int)uVar8 != 0) {
        pcVar13 = (char *)args_get(ppbVar1,0x79);
        param_12 = &local_a0;
        lVar17 = strtonum(pcVar13,1,0xffff,param_12);
        uVar7 = CONCAT44(extraout_XMM0_Db_20,extraout_XMM0_Da_22);
        if (local_a0 != (char *)0x0) {
          cmdq_error(CONCAT44(extraout_XMM0_Db_20,extraout_XMM0_Da_22),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_10,"height %s",local_a0,(ulong)param_12,
                     uVar11,param_14,in_stack_ffffffffffffff08);
          goto LAB_0012f7a0;
        }
        uVar6 = (uint)lVar17;
      }
LAB_0012f11a:
      if (uVar22 == 0) {
        uVar22 = 1;
      }
      uVar11 = (ulong)uVar22;
      if (uVar6 != 0) {
        options_get_number(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           global_s_options,"status",1,param_12,uVar11,param_14);
      }
      uVar7 = args_has(ppbVar1,0x74);
      if (((int)uVar7 == 0) && (uVar22 = *(uint *)(ppbVar1 + 1), uVar22 != 0)) {
        local_c8 = (undefined8 *******)ppbVar1[2];
      }
      else {
        uVar22 = 0xffffffff;
        local_c8 = (undefined8 *******)0x0;
        if (local_f0 == 0) {
          uVar22 = 0;
          local_98 = (undefined8 *******)
                     options_get_string(CONCAT44(extraout_XMM0_Db_11,extraout_XMM0_Da_11),param_2,
                                        param_3,param_4,param_5,param_6,param_7,param_8,
                                        global_s_options,"default-command",extraout_RDX_06,param_12,
                                        uVar11,param_14);
          local_c8 = local_98;
          if (local_98 != (undefined8 *******)0x0) {
            if (*(byte *)local_98 == 0) {
              local_c8 = (undefined8 *******)0x0;
            }
            else {
              local_c8 = &local_98;
              uVar22 = 1;
            }
          }
        }
      }
      if (plVar2 == (long *)0x0) {
        puVar20 = &DAT_00178d7d;
        ppcVar14 = global_environ;
        auVar26 = environ_find(global_environ,"PATH");
        param_12 = auVar26._0_8_;
        if (param_12 != (char **)0x0) {
          param_12 = (char **)param_12[1];
        }
        auVar26 = environ_create(extraout_XMM0_Da_27,param_2,param_3,param_4,param_5,param_6,param_7
                                 ,param_8,ppcVar14,puVar20,auVar26._8_8_,param_12,uVar11,param_14);
        uVar7 = CONCAT44(extraout_XMM0_Db_25,extraout_XMM0_Da_28);
      }
      else {
        if (plVar2[0xb3] == 0) {
          ppcVar14 = (char **)plVar2[0x17];
          puVar20 = &DAT_00178d7d;
          auVar25 = environ_find(ppcVar14,"PATH");
          uVar23 = extraout_XMM0_Da_29;
          if (auVar25._0_8_ != 0) goto LAB_0012f199;
          auVar3._8_8_ = 0;
          auVar3._0_8_ = auVar25._8_8_;
          auVar25 = auVar3 << 0x40;
        }
        else {
          puVar20 = &DAT_00178d7d;
          ppcVar14 = global_environ;
          auVar25 = environ_find(global_environ,"PATH");
          uVar23 = extraout_XMM0_Da_12;
          if (auVar25._0_8_ != 0) {
LAB_0012f199:
            auVar25._8_8_ = auVar25._8_8_;
            auVar25._0_8_ = *(undefined8 *)(auVar25._0_8_ + 8);
          }
        }
        param_12 = auVar25._0_8_;
        ppcVar14 = (char **)environ_create(uVar23,param_2,param_3,param_4,param_5,param_6,param_7,
                                           param_8,ppcVar14,puVar20,auVar25._8_8_,param_12,uVar11,
                                           param_14);
        uVar8 = args_has(ppbVar1,0x45);
        auVar26._8_8_ = extraout_RDX_07;
        auVar26._0_8_ = ppcVar14;
        uVar7 = CONCAT44(extraout_XMM0_Db_12,extraout_XMM0_Da_13);
        if ((int)uVar8 == 0) {
          ppcVar18 = param_12;
          pcVar13 = options_get_string(CONCAT44(extraout_XMM0_Db_12,extraout_XMM0_Da_13),param_2,
                                       param_3,param_4,param_5,param_6,param_7,param_8,
                                       global_s_options,"update-environment",extraout_RDX_07,
                                       param_12,uVar11,param_14);
          uVar7 = environ_update(CONCAT44(extraout_XMM0_Db_24,extraout_XMM0_Da_26),param_2,param_3,
                                 param_4,param_5,param_6,param_7,param_8,pcVar13,
                                 (char **)plVar2[0x17],ppcVar14,(char *)ppcVar18,uVar11,param_14);
          auVar26._8_8_ = extraout_RDX_19;
        }
      }
      local_e8 = auVar26._0_8_;
      options_get_number(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         global_s_options,"base-index",auVar26._8_8_,param_12,uVar11,param_14);
      pcVar13 = (char *)(ulong)uVar22;
      param_14 = local_e8;
      puVar15 = (uint *)session_create(pcVar9,pcVar13,local_c8);
      uVar7 = environ_free((long *)local_e8);
      if (puVar15 != (uint *)0x0) {
        lVar10 = extraout_RDX_08;
        if (-1 < (int)uVar22) {
          pcVar13 = (char *)0x6e;
          uVar8 = args_has(ppbVar1,0x6e);
          uVar7 = CONCAT44(extraout_XMM0_Db_15,extraout_XMM0_Da_17);
          lVar10 = extraout_RDX_13;
          if ((int)uVar8 != 0) {
            puVar16 = *(uint **)(*(long *)(puVar15 + 0x38) + 8);
            pcVar9 = (char *)args_get(ppbVar1,0x6e);
            uVar7 = window_set_name(CONCAT44(extraout_XMM0_Db_16,extraout_XMM0_Da_18),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,puVar16,pcVar9,
                                    extraout_RDX_14,param_12,local_e0,param_14);
            pcVar13 = "automatic-rename";
            options_set_number(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               *(char ***)(puVar16 + 0x62),"automatic-rename",(char *)0x0,param_12,
                               local_e0,param_14);
            uVar7 = CONCAT44(extraout_XMM0_Db_17,extraout_XMM0_Da_19);
            lVar10 = extraout_RDX_15;
          }
        }
        if (local_f0 != 0) {
          uVar23 = session_group_add((int)uVar7,param_2,param_3,param_4,param_5,param_6,param_7,
                                     param_8,local_f0,(long)puVar15,lVar10,param_12,local_e0,
                                     param_14);
          session_group_synchronize_to
                    (uVar23,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)puVar15);
          puVar16 = (uint *)winlinks_RB_MINMAX((long *)(puVar15 + 0x3e),-1);
          pcVar13 = (char *)(ulong)*puVar16;
          session_select(extraout_XMM0_Da_14,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,(long)puVar15,pcVar13,extraout_RDX_09,param_12,(uint *)local_e0,param_14);
          uVar7 = CONCAT44(extraout_XMM0_Db_13,extraout_XMM0_Da_15);
          lVar10 = extraout_RDX_10;
        }
        if (uVar19 == 0) {
          param_12 = (char **)(ulong)local_b0;
          if (local_b0 == 0) {
            if ((*(byte *)((long)plVar2 + 0x421) & 0x20) == 0) {
              local_e0 = (char **)0x0;
              param_12 = (char **)0x0;
              proc_send((int)uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*plVar2,
                        0xcf,0xffffffff,(void *)0x0,0,param_14);
              uVar7 = CONCAT44(extraout_XMM0_Db_29,extraout_XMM0_Da_33);
              lVar10 = extraout_RDX_21;
            }
          }
          else if (plVar2[0xb3] != 0) {
            plVar2[0xb4] = plVar2[0xb3];
          }
          plVar2[0xb3] = (long)puVar15;
          uVar8 = 0;
          uVar7 = server_client_set_key_table
                            (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (long)plVar2,(char *)0x0,lVar10,param_12,local_e0,param_14);
          uVar23 = status_timer_start(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                      (long)plVar2,uVar8,extraout_RDX_11,(undefined *)param_12,
                                      (long)local_e0,param_14);
          notify_attached_session_changed
                    (uVar23,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(uint *)plVar2);
          session_update_activity(puVar15);
          pcVar13 = (char *)0x0;
          gettimeofday((timeval *)(puVar15 + 10),(__timezone_ptr_t)0x0);
          uVar7 = server_redraw_client((long)plVar2);
        }
        recalculate_sizes(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
        uVar7 = server_update_socket();
        if (cfg_finished != 0) {
          cfg_show_causes(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)puVar15,pcVar13,(ulong)cfg_finished,param_12,local_e0,
                          (size_t)param_14);
        }
        uVar7 = args_has(ppbVar1,0x50);
        if ((int)uVar7 != 0) {
          pcVar9 = (char *)args_get(ppbVar1,0x46);
          if (pcVar9 == (char *)0x0) {
            pcVar9 = "#{session_name}:";
          }
          ppuVar12 = (uint **)format_create(CONCAT44(extraout_XMM0_Db_21,extraout_XMM0_Da_23),
                                            param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                            param_10,0,extraout_RDX_17,(undefined *)param_12,
                                            local_e0,param_14);
          plVar21 = (long *)0x0;
          uVar8 = 0;
          uVar7 = format_defaults(CONCAT44(extraout_XMM0_Db_22,extraout_XMM0_Da_24),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,ppuVar12,(long)plVar2,
                                  puVar15,(uint *)0x0,(uint *)0x0,param_14);
          pcVar9 = format_expand(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 (long *)ppuVar12,pcVar9,extraout_RDX_18,uVar8,plVar21,param_14);
          cmdq_print(CONCAT44(extraout_XMM0_Db_23,extraout_XMM0_Da_25),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_10,"%s",pcVar9,uVar8,plVar21,
                     (size_t)param_14,in_stack_ffffffffffffff08);
          free(pcVar9);
          format_free(ppuVar12);
        }
        if (uVar19 == 0) {
          *(undefined4 *)(param_10 + 0x10) = 0;
        }
        if (local_d0 != (char **)0x0) {
          free(local_d0);
        }
        goto LAB_0012f325;
      }
      pcVar9 = "create session failed: %s";
      param_13 = local_e0;
      goto LAB_0012f84c;
    }
    pcVar13 = (char *)args_get(ppbVar1,0x78);
    param_12 = &local_a0;
    uVar11 = strtonum(pcVar13,1,0xffff,param_12);
    uVar22 = (uint)uVar11;
    if (local_a0 == (char *)0x0) goto LAB_0012f4e7;
    cmdq_error(CONCAT44(extraout_XMM0_Db_26,extraout_XMM0_Da_30),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_10,"width %s",local_a0,(ulong)param_12,
               uVar11 & 0xffffffff,param_14,in_stack_ffffffffffffff08);
  }
  else {
    if (tmate_foreground != 0) {
      local_b0 = (uint)(plVar2[0xb3] != 0);
      uVar7 = args_has(ppbVar1,99);
      if ((int)uVar7 == 0) {
        uVar19 = 1;
        uVar22 = 1;
        uVar23 = extraout_XMM0_Da_16;
        uVar24 = extraout_XMM0_Db_14;
        goto LAB_0012f380;
      }
      ppuVar12 = (uint **)format_create(CONCAT44(extraout_XMM0_Db_14,extraout_XMM0_Da_16),param_2,
                                        param_3,param_4,param_5,param_6,param_7,param_8,param_10,0,
                                        extraout_RDX_12,(undefined *)param_12,param_13,param_14);
      plVar21 = (long *)0x0;
      param_12 = (char **)0x0;
      format_defaults(CONCAT44(extraout_XMM0_Db_30,extraout_XMM0_Da_34),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,ppuVar12,(long)plVar2,(uint *)0x0,(uint *)0x0,
                      (uint *)0x0,param_14);
      pcVar13 = (char *)args_get(ppbVar1,99);
      local_e0 = (char **)format_expand(CONCAT44(extraout_XMM0_Db_31,extraout_XMM0_Da_35),param_2,
                                        param_3,param_4,param_5,param_6,param_7,param_8,
                                        (long *)ppuVar12,pcVar13,extraout_RDX_22,param_12,plVar21,
                                        param_14);
      uVar7 = format_free(ppuVar12);
      uVar19 = 1;
      local_d0 = local_e0;
LAB_0012f104:
      uVar22 = *(uint *)(plVar2 + 0x1e);
      uVar6 = *(uint *)((long)plVar2 + 0xf4);
      if (uVar19 != 0) goto LAB_0012f4c8;
      goto LAB_0012f11a;
    }
    local_b0 = (uint)(plVar2[0xb3] != 0);
    uVar7 = args_has(ppbVar1,99);
    uVar22 = local_b0 | uVar19;
    param_14 = (char **)(ulong)uVar22;
    uVar23 = extraout_XMM0_Da_05;
    uVar24 = extraout_XMM0_Db_05;
    if ((int)uVar7 == 0) {
LAB_0012f380:
      uVar7 = CONCAT44(uVar24,uVar23);
      param_12 = (char **)0x1804e2;
      local_e0 = (char **)0x1804e2;
      if (plVar2[0xb3] == 0) {
        param_12 = (char **)plVar2[0x19];
        local_e0 = (char **)0x1804e2;
        if (param_12 != (char **)0x0) {
          local_e0 = param_12;
        }
      }
      if (uVar22 != 0) {
        local_d0 = (char **)0x0;
        goto LAB_0012f104;
      }
      local_b0 = 0;
      local_d0 = (char **)0x0;
      uVar19 = 0;
    }
    else {
      ppuVar12 = (uint **)format_create(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_05),param_2,
                                        param_3,param_4,param_5,param_6,param_7,param_8,param_10,0,
                                        extraout_RDX_02,(undefined *)param_12,param_13,param_14);
      param_13 = (char **)0x0;
      param_12 = (char **)0x0;
      format_defaults(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_06),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,ppuVar12,(long)plVar2,(uint *)0x0,(uint *)0x0,
                      (uint *)0x0,param_14);
      pcVar13 = (char *)args_get(ppbVar1,99);
      local_e0 = (char **)format_expand(CONCAT44(extraout_XMM0_Db_07,extraout_XMM0_Da_07),param_2,
                                        param_3,param_4,param_5,param_6,param_7,param_8,
                                        (long *)ppuVar12,pcVar13,extraout_RDX_03,param_12,
                                        (long *)param_13,param_14);
      uVar7 = format_free(ppuVar12);
      param_14 = (char **)(ulong)uVar22;
      local_d0 = local_e0;
      if (uVar22 != 0) goto LAB_0012f104;
    }
    if (*(uint *)(plVar2 + 0x26) != 0xffffffff) {
      uVar7 = server_client_check_nested(*(long *)(param_10 + 8));
      if ((int)uVar7 != 0) {
        cmdq_error(CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_08),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,
                   "sessions should be nested with care, unset $TMUX to force",extraout_RDX_04,
                   (ulong)param_12,(long)param_13,param_14,in_stack_ffffffffffffff08);
        uVar11 = 0xffffffff;
        goto LAB_0012f327;
      }
      __termios_p = &local_88;
      iVar5 = tcgetattr(*(uint *)(plVar2 + 0x26),__termios_p);
      uVar7 = CONCAT44(extraout_XMM0_Db_09,extraout_XMM0_Da_09);
      if (iVar5 != 0) {
                    // WARNING: Subroutine does not return
        fatal(extraout_XMM0_Da_09,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              "tcgetattr failed",__termios_p,extraout_RDX_05,param_12,param_13,param_14,
              in_stack_ffffffffffffff08);
      }
    }
    iVar5 = server_client_open(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)plVar2,(long *)&local_90);
    uVar7 = CONCAT44(extraout_XMM0_Db_10,extraout_XMM0_Da_10);
    if (iVar5 == 0) goto LAB_0012f104;
    pcVar9 = "open terminal failed: %s";
LAB_0012f84c:
    cmdq_error(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,pcVar9,
               local_90,(ulong)param_12,(long)param_13,param_14,in_stack_ffffffffffffff08);
    free(local_90);
  }
LAB_0012f7a0:
  uVar11 = 0xffffffff;
  if (local_d0 != (char **)0x0) {
    free(local_d0);
    uVar11 = 0xffffffff;
  }
LAB_0012f327:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar11;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong cmd_new_window_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,long param_9,long param_10,undefined8 param_11,
                         undefined *param_12,long *param_13,uint **param_14)

{
  byte **ppbVar1;
  uint *puVar2;
  long lVar3;
  int *piVar4;
  long lVar5;
  long ****pppplVar6;
  uint uVar7;
  undefined8 uVar8;
  uint *puVar9;
  undefined8 uVar10;
  char *pcVar11;
  uint *puVar12;
  void *pvVar13;
  undefined8 uVar14;
  uint **ppuVar15;
  long ****pppplVar16;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  ulong extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  long *plVar17;
  ulong uVar18;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Da_11;
  undefined4 extraout_XMM0_Da_12;
  undefined4 uVar19;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined4 uVar20;
  undefined in_stack_ffffffffffffff78;
  char **__ptr;
  char **local_80;
  uint local_78;
  long ****local_50;
  long ***local_48;
  long local_40;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  puVar2 = *(uint **)(param_10 + 0xa0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar3 = *(long *)(param_10 + 0x80);
  piVar4 = *(int **)(param_10 + 0xa8);
  uVar18 = (ulong)*(uint *)(param_10 + 0xc0);
  uVar8 = args_has(ppbVar1,0x61);
  if ((int)uVar8 != 0) {
    uVar7 = winlink_shuffle_up(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,(long)puVar2,piVar4,extraout_RDX,param_12,param_13,
                               (char **)param_14);
    uVar18 = (ulong)uVar7;
    if (uVar7 == 0xffffffff) {
      cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"no free window indexes",extraout_RDX_00,
                 (ulong)param_12,(long)param_13,param_14,in_stack_ffffffffffffff78);
      goto LAB_0012fb5f;
    }
  }
  uVar8 = args_has(ppbVar1,100);
  local_78 = *(uint *)(ppbVar1 + 1);
  if (local_78 == 0) {
    local_50 = (long ****)
               options_get_string(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,*(char ***)(puVar2 + 0x42)
                                  ,"default-command",extraout_RDX_01,param_12,param_13,param_14);
    pppplVar16 = local_50;
    if (local_50 != (long ****)0x0) {
      if (*(char *)local_50 == '\0') {
        pppplVar16 = (long ****)0x0;
      }
      else {
        local_78 = 1;
        pppplVar16 = (long ****)&local_50;
      }
    }
  }
  else {
    pppplVar16 = (long ****)ppbVar1[2];
  }
  lVar5 = *(long *)(param_10 + 8);
  if ((lVar5 == 0) || (*(long *)(lVar5 + 0x598) != 0)) {
    puVar9 = (uint *)environ_find(*(char ***)(puVar2 + 0x48),"PATH");
  }
  else {
    puVar9 = (uint *)environ_find(*(char ***)(lVar5 + 0xb8),"PATH");
  }
  if (puVar9 != (uint *)0x0) {
    puVar9 = *(uint **)(puVar9 + 2);
  }
  uVar10 = args_has(ppbVar1,99);
  uVar14 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02);
  if ((int)uVar10 == 0) {
    lVar5 = *(long *)(param_10 + 8);
    uVar10 = extraout_RDX_02;
    if ((lVar5 == 0) || (param_12 = *(undefined **)(lVar5 + 0x598), param_12 != (undefined *)0x0)) {
      __ptr = (char **)0x0;
      local_80 = *(char ***)(puVar2 + 4);
      uVar14 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02);
    }
    else {
      __ptr = (char **)0x0;
      local_80 = *(char ***)(lVar5 + 200);
    }
  }
  else {
    ppuVar15 = (uint **)format_create(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,
                                      param_3,param_4,param_5,param_6,param_7,param_8,param_10,0,
                                      extraout_RDX_02,param_12,param_13,param_14);
    param_13 = (long *)0x0;
    param_12 = (undefined *)0x0;
    format_defaults(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_08),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,ppuVar15,lVar3,puVar2,(uint *)0x0,(uint *)0x0,
                    param_14);
    pcVar11 = (char *)args_get(ppbVar1,99);
    param_14 = ppuVar15;
    __ptr = (char **)format_expand(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_09),param_2,param_3
                                   ,param_4,param_5,param_6,param_7,param_8,(long *)ppuVar15,pcVar11
                                   ,extraout_RDX_04,param_12,param_13,(char **)ppuVar15);
    uVar14 = format_free(param_14);
    uVar10 = extraout_RDX_05;
    local_80 = __ptr;
  }
  if ((uint)uVar18 == 0xffffffff) {
    pcVar11 = options_get_number(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 *(char ***)(puVar2 + 0x42),"base-index",uVar10,param_12,param_13,
                                 param_14);
    uVar18 = (ulong)~(uint)pcVar11;
LAB_0012fae5:
    pcVar11 = (char *)args_get(ppbVar1,0x6e);
    pppplVar6 = &local_48;
    puVar12 = session_new(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,puVar2,pcVar11,(ulong)local_78,pppplVar16,puVar9,local_80,
                          (uint)uVar18,(long *)&local_48);
    pppplVar16 = pppplVar6;
    uVar19 = extraout_XMM0_Da_04;
    uVar20 = extraout_XMM0_Db_02;
    if (puVar12 != (uint *)0x0) {
      if ((int)uVar8 == 0) {
LAB_0012fc60:
        session_select(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)puVar2,
                       (ulong)*puVar12,uVar18,pppplVar16,puVar9,local_80);
        server_redraw_session_group((long)puVar2);
      }
      else {
        server_status_session_group((long)puVar2);
      }
      uVar8 = args_has(ppbVar1,0x50);
      if ((int)uVar8 != 0) {
        pcVar11 = (char *)args_get(ppbVar1,0x46);
        if (pcVar11 == (char *)0x0) {
          pcVar11 = "#{session_name}:#{window_index}.#{pane_index}";
        }
        ppuVar15 = (uint **)format_create(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_10),param_2,
                                          param_3,param_4,param_5,param_6,param_7,param_8,param_10,0
                                          ,extraout_RDX_06,(undefined *)pppplVar16,puVar9,local_80);
        plVar17 = (long *)0x0;
        uVar8 = format_defaults(CONCAT44(extraout_XMM0_Db_07,extraout_XMM0_Da_11),param_2,param_3,
                                param_4,param_5,param_6,param_7,param_8,ppuVar15,lVar3,puVar2,
                                puVar12,(uint *)0x0,local_80);
        pcVar11 = format_expand(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                (long *)ppuVar15,pcVar11,extraout_RDX_07,puVar12,plVar17,local_80);
        cmdq_print(CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_12),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"%s",pcVar11,puVar12,plVar17,(size_t)local_80,
                   (char)__ptr);
        free(pcVar11);
        format_free(ppuVar15);
      }
      uVar18 = 0;
      if (__ptr != (char **)0x0) {
        free(__ptr);
      }
      goto LAB_0012fb5f;
    }
  }
  else {
    pvVar13 = (void *)winlink_find_by_index
                                ((int)uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                 ,(int **)(puVar2 + 0x3e),uVar18,uVar10,param_12,param_13,param_14);
    if ((pvVar13 == (void *)0x0) || (uVar14 = args_has(ppbVar1,0x6b), (int)uVar14 == 0))
    goto LAB_0012fae5;
    notify_window_unlinked
              (extraout_XMM0_Da_05,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               (long)puVar2,*(uint **)((long)pvVar13 + 8),pvVar13,param_12,param_13,
               (char **)param_14);
    *(uint *)((long)pvVar13 + 0x38) = *(uint *)((long)pvVar13 + 0x38) & 0xfffffff8;
    uVar14 = winlink_stack_remove((long *)(puVar2 + 0x3a),(long)pvVar13);
    winlink_remove(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   (long *)(puVar2 + 0x3e),pvVar13,pvVar13,param_12,param_13,param_14);
    if (*(void **)(puVar2 + 0x38) != pvVar13) goto LAB_0012fae5;
    *(undefined8 *)(puVar2 + 0x38) = 0;
    pcVar11 = (char *)args_get(ppbVar1,0x6e);
    puVar12 = session_new(extraout_XMM0_Da_06,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,puVar2,pcVar11,(ulong)local_78,pppplVar16,puVar9,local_80,
                          (uint)uVar18,(long *)&local_48);
    uVar18 = extraout_RDX_03;
    uVar19 = extraout_XMM0_Da_07;
    uVar20 = extraout_XMM0_Db_03;
    if (puVar12 != (uint *)0x0) goto LAB_0012fc60;
  }
  cmdq_error(CONCAT44(uVar20,uVar19),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             param_10,"create window failed: %s",local_48,(ulong)pppplVar16,(long)puVar9,local_80,
             (char)__ptr);
  free(local_48);
  if (__ptr != (char **)0x0) {
    free(__ptr);
  }
  uVar18 = 0xffffffff;
LAB_0012fb5f:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar18;
}



undefined8
cmd_paste_buffer_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,ulong param_12,long param_13,undefined8 param_14)

{
  byte bVar1;
  byte **ppbVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 uVar5;
  char *pcVar6;
  void **ppvVar7;
  void *__s;
  void *pvVar8;
  void *pvVar9;
  size_t __n;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffff98;
  size_t local_60;
  long local_48;
  long local_40;
  
  ppbVar2 = *(byte ***)(param_9 + 8);
  lVar3 = *(long *)(param_10 + 0xb8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar4 = args_has(ppbVar2,0x70);
  uVar5 = args_has(ppbVar2,0x62);
  if (((int)uVar5 == 0) || (pcVar6 = (char *)args_get(ppbVar2,0x62), pcVar6 == (char *)0x0)) {
    ppvVar7 = (void **)paste_get_top((undefined8 *)0x0);
    if (ppvVar7 != (void **)0x0) {
      bVar1 = *(byte *)(lVar3 + 0x30);
      goto joined_r0x0012ff15;
    }
  }
  else {
    ppvVar7 = (void **)paste_get_name(pcVar6);
    if (ppvVar7 == (void **)0x0) {
      cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                 "no buffer %s",pcVar6,param_12,param_13,param_14,in_stack_ffffffffffffff98);
      uVar4 = 0xffffffff;
      goto LAB_0012feda;
    }
    bVar1 = *(byte *)(lVar3 + 0x30);
joined_r0x0012ff15:
    if ((bVar1 & 0x20) == 0) {
      pcVar6 = (char *)args_get(ppbVar2,0x73);
      if (pcVar6 == (char *)0x0) {
        pcVar6 = "\n";
        uVar5 = args_has(ppbVar2,0x72);
        local_60 = 1;
        if ((int)uVar5 == 0) {
          pcVar6 = "\r";
        }
      }
      else {
        local_60 = strlen(pcVar6);
      }
      if (((int)uVar4 != 0) && ((*(byte *)(*(long *)(lVar3 + 0x140) + 0x31) & 4) != 0)) {
        bufferevent_write(*(undefined8 *)(lVar3 + 0x80),&DAT_00178f68,6);
      }
      __s = (void *)paste_buffer_data(ppvVar7,&local_48);
      pvVar8 = (void *)(local_48 + (long)__s);
      while( true ) {
        __n = (long)pvVar8 - (long)__s;
        pvVar9 = memchr(__s,10,__n);
        if (pvVar9 == (void *)0x0) break;
        bufferevent_write(*(undefined8 *)(lVar3 + 0x80),__s,(long)pvVar9 - (long)__s);
        bufferevent_write(*(undefined8 *)(lVar3 + 0x80),pcVar6,local_60);
        __s = (void *)((long)pvVar9 + 1);
      }
      if (__s != pvVar8) {
        bufferevent_write(*(undefined8 *)(lVar3 + 0x80),__s,__n);
      }
      if (((int)uVar4 != 0) && ((*(byte *)(*(long *)(lVar3 + 0x140) + 0x31) & 4) != 0)) {
        bufferevent_write(*(undefined8 *)(lVar3 + 0x80),&DAT_00178f6f,6);
      }
    }
    uVar4 = args_has(ppbVar2,100);
    if ((int)uVar4 != 0) {
      paste_free(ppvVar7);
    }
  }
  uVar4 = 0;
LAB_0012feda:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmd_pipe_pane_error_callback(undefined8 param_1,undefined8 param_2,long param_3)

{
  bufferevent_free(*(undefined8 *)(param_3 + 0x128));
  close(*(int *)(param_3 + 0x124));
  *(undefined4 *)(param_3 + 0x124) = 0xffffffff;
  return;
}



undefined4
cmd_pipe_pane_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,long param_10,undefined8 param_11,undefined8 param_12,long param_13,
                  char **param_14)

{
  uint uVar1;
  long *plVar2;
  uint *puVar3;
  int iVar4;
  __pid_t _Var5;
  int iVar6;
  undefined8 uVar7;
  uint **ppuVar8;
  time_t tVar9;
  char *pcVar10;
  long lVar11;
  int *piVar12;
  char *pcVar13;
  uint *__fds;
  tm *ptVar14;
  undefined8 extraout_RDX;
  long *plVar15;
  undefined4 uVar16;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined uVar17;
  long lVar18;
  uint local_48;
  int local_44;
  long local_40;
  
  plVar2 = *(long **)(param_10 + 0xb8);
  lVar11 = *(long *)(param_9 + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar18 = *(long *)(param_10 + 0x80);
  ptVar14 = *(tm **)(param_10 + 0xa8);
  uVar1 = *(uint *)((long)plVar2 + 0x124);
  puVar3 = *(uint **)(param_10 + 0xa0);
  if (uVar1 != 0xffffffff) {
    bufferevent_free(plVar2[0x25]);
    close(*(uint *)((long)plVar2 + 0x124));
    *(uint *)((long)plVar2 + 0x124) = 0xffffffff;
  }
  if ((*(int *)(lVar11 + 8) != 0) && (***(char ***)(lVar11 + 0x10) != '\0')) {
    uVar7 = args_has(*(byte ***)(param_9 + 8),0x6f);
    if (((int)uVar7 == 0) || (uVar1 == 0xffffffff)) {
      __fds = &local_48;
      iVar4 = socketpair(1,1,0,(int *)__fds);
      if (iVar4 == 0) {
        ppuVar8 = (uint **)format_create(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,
                                         param_7,param_8,param_10,0,extraout_RDX,(undefined *)__fds,
                                         param_13,param_14);
        plVar15 = plVar2;
        format_defaults(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        ppuVar8,lVar18,puVar3,(uint *)ptVar14,(uint *)plVar2,param_14);
        uVar17 = (undefined)lVar18;
        tVar9 = time((time_t *)0x0);
        pcVar10 = format_expand_time(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,
                                     param_7,param_8,(long *)ppuVar8,**(char ***)(lVar11 + 0x10),
                                     tVar9,ptVar14,plVar15,param_14);
        format_free(ppuVar8);
        _Var5 = fork();
        if (_Var5 == -1) {
          piVar12 = __errno_location();
          uVar16 = 0xffffffff;
          pcVar13 = strerror(*piVar12);
          cmdq_error(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_10,"fork error: %s",pcVar13,(ulong)ptVar14,(long)plVar15,param_14,uVar17)
          ;
          free(pcVar10);
        }
        else {
          if (_Var5 == 0) {
            close(local_48);
            clear_signals(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,1);
            iVar4 = dup2(local_44,0);
            if (iVar4 != -1) {
              if (local_44 != 0) {
                close(local_44);
              }
              iVar4 = open("/dev/null",1,0);
              iVar6 = dup2(iVar4,1);
              if (iVar6 != -1) {
                iVar6 = dup2(iVar4,2);
                if (iVar6 != -1) {
                  if (1 < iVar4 - 1U) {
                    close(iVar4);
                  }
                  closefrom(3);
                  execl("/bin/sh","sh",&DAT_00177429,pcVar10,0);
                }
              }
            }
                    // WARNING: Subroutine does not return
            _exit(1);
          }
          close(local_44);
          *(uint *)((long)plVar2 + 0x124) = local_48;
          lVar11 = evbuffer_get_length(*(undefined8 *)(plVar2[0x10] + 0x110));
          plVar2[0x26] = lVar11;
          lVar11 = bufferevent_new(*(uint *)((long)plVar2 + 0x124),0,0,cmd_pipe_pane_error_callback,
                                   plVar2);
          plVar2[0x25] = lVar11;
          bufferevent_enable(lVar11);
          setblocking(*(uint *)((long)plVar2 + 0x124),0);
          free(pcVar10);
          uVar16 = 0;
        }
      }
      else {
        piVar12 = __errno_location();
        uVar17 = (undefined)lVar18;
        uVar16 = 0xffffffff;
        pcVar10 = strerror(*piVar12);
        cmdq_error(extraout_XMM0_Qa_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"socketpair error: %s",pcVar10,(ulong)__fds,param_13,param_14,uVar17);
      }
      goto LAB_00130178;
    }
  }
  uVar16 = 0;
LAB_00130178:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar16;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 *
cmdq_new(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
        undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
        undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
        undefined8 param_13,undefined8 param_14)

{
  undefined8 *puVar1;
  
  puVar1 = (undefined8 *)
           xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x138,param_11,
                   param_12,param_13,param_14);
  puVar1[1] = param_9;
  *puVar1 = 1;
  *(undefined4 *)(puVar1 + 2) = 0xffffffff;
  puVar1[3] = 0;
  puVar1[4] = puVar1 + 3;
  puVar1[5] = 0;
  puVar1[6] = 0;
  cmd_find_clear_state(puVar1 + 8,0,0);
  puVar1[7] = 0;
  return puVar1;
}



void cmdq_print(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,size_t param_14,undefined param_15)

{
  long *plVar1;
  long lVar2;
  char in_AL;
  char *__s;
  size_t sVar3;
  undefined4 *puVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined1 *puVar5;
  undefined8 uVar6;
  uint *puVar7;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  byte *local_f0;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [16];
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  size_t local_a0;
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  
  if (in_AL != '\0') {
    local_98._8_8_ = in_XMM0_Qb;
    local_98._0_8_ = param_1;
    local_88._4_12_ = in_register_00001224;
    local_88._0_4_ = param_2;
    local_78._4_12_ = in_register_00001244;
    local_78._0_4_ = param_3;
    local_68._4_12_ = in_register_00001264;
    local_68._0_4_ = param_4;
    local_58._4_12_ = in_register_00001284;
    local_58._0_4_ = param_5;
    local_48._4_12_ = in_register_000012a4;
    local_48._0_4_ = param_6;
    local_38._4_12_ = in_register_000012c4;
    local_38._0_4_ = param_7;
    local_28._4_12_ = in_register_000012e4;
    local_28._0_4_ = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  plVar1 = *(long **)(param_9 + 8);
  local_e0 = &param_15;
  local_e8 = 0x10;
  local_d8 = local_c8;
  local_e4 = 0x30;
  local_b8 = param_11;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  if (plVar1 != (long *)0x0) {
    if ((plVar1[0xb3] == 0) || ((*(uint *)(plVar1 + 0x84) & 0x2000) != 0)) {
      if ((*(uint *)(plVar1 + 0x84) & 0x10000) == 0) {
        puVar4 = &local_e8;
        uVar6 = 1;
        uVar8 = __vasprintf_chk(&local_f0,1,param_10);
        __s = (char *)utf8_sanitize(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    local_f0,uVar6,extraout_RDX_00,(ulong)puVar4,param_13,param_14);
        free(local_f0);
        sVar3 = strlen(__s);
        evbuffer_add(plVar1[0x53],__s,sVar3);
        free(__s);
      }
      else {
        evbuffer_add_vprintf(plVar1[0x53],param_10,&local_e8);
      }
      uVar6 = evbuffer_add(plVar1[0x53],"\n",1);
      server_client_push_stdout
                (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar1);
    }
    else {
      lVar2 = *(long *)(*(long *)(plVar1[0xb3] + 0xe0) + 8);
      puVar7 = *(uint **)(lVar2 + 0x138);
      if (*(undefined1 **)(puVar7 + 0x7a) != window_copy_mode) {
        window_pane_reset_mode(puVar7);
        puVar5 = window_copy_mode;
        window_pane_set_mode(*(long *)(lVar2 + 0x138),(undefined **)window_copy_mode);
        window_copy_init_for_output
                  (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   *(long *)(lVar2 + 0x138),puVar5,extraout_RDX,param_12,param_13,param_14);
        param_1 = tmate_sync_copy_mode(*(uint **)(lVar2 + 0x138));
        puVar7 = *(uint **)(lVar2 + 0x138);
      }
      window_copy_vadd(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar7,
                       param_10,&local_e8,param_12,param_13,param_14);
    }
  }
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmdq_error(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,long param_13,
               undefined8 param_14,undefined param_15)

{
  uint uVar1;
  long *plVar2;
  long lVar3;
  long lVar4;
  undefined8 uVar5;
  char in_AL;
  int iVar6;
  __int32_t **pp_Var7;
  ulong extraout_RDX;
  size_t sVar8;
  ulong uVar9;
  byte *pbVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined in_stack_ffffffffffffff08;
  byte *local_f0;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [16];
  undefined8 local_b8;
  ulong local_b0;
  long local_a8;
  undefined8 local_a0;
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  
  if (in_AL != '\0') {
    local_98._8_8_ = in_XMM0_Qb;
    local_98._0_8_ = param_1;
    local_88._4_12_ = in_register_00001224;
    local_88._0_4_ = param_2;
    local_78._4_12_ = in_register_00001244;
    local_78._0_4_ = param_3;
    local_68._4_12_ = in_register_00001264;
    local_68._0_4_ = param_4;
    local_58._4_12_ = in_register_00001284;
    local_58._0_4_ = param_5;
    local_48._4_12_ = in_register_000012a4;
    local_48._0_4_ = param_6;
    local_38._4_12_ = in_register_000012c4;
    local_38._0_4_ = param_7;
    local_28._4_12_ = in_register_000012e4;
    local_28._0_4_ = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  plVar2 = *(long **)(param_9 + 8);
  lVar3 = *(long *)(param_9 + 0x30);
  local_e0 = &param_15;
  local_e8 = 0x10;
  local_d8 = local_c8;
  local_e4 = 0x30;
  local_b8 = param_11;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  iVar6 = xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long *)&local_f0,param_10,&local_e8,param_12,param_13,param_14);
  pbVar10 = local_f0;
  if (plVar2 == (long *)0x0) {
    lVar4 = *(long *)(lVar3 + 0x10);
    uVar9 = extraout_RDX;
    if ((lVar4 == 0) || (uVar1 = *(uint *)(lVar3 + 0x18), uVar9 = (ulong)uVar1, uVar1 == 0)) {
      cfg_add_cause(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                    param_6,param_7,param_8,"%s",local_f0,uVar9,param_12,local_f0,param_14,
                    in_stack_ffffffffffffff08);
    }
    else {
      cfg_add_cause(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                    param_6,param_7,param_8,"%s:%u: %s",lVar4,uVar9,local_f0,local_f0,param_14,
                    in_stack_ffffffffffffff08);
    }
  }
  else if ((plVar2[0xb3] == 0) || ((*(uint *)(plVar2 + 0x84) & 0x2000) != 0)) {
    sVar8 = (size_t)iVar6;
    if ((*(uint *)(plVar2 + 0x84) & 0x10000) == 0) {
      local_f0 = (byte *)utf8_sanitize(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,
                                       param_7,param_8,local_f0,param_10,sVar8,param_12,param_13,
                                       param_14);
      free(pbVar10);
      pbVar10 = local_f0;
      sVar8 = strlen((char *)local_f0);
    }
    evbuffer_add(plVar2[0x54],pbVar10,sVar8);
    uVar5 = evbuffer_add(plVar2[0x54],"\n",1);
    server_client_push_stderr(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar2);
    *(undefined4 *)(plVar2 + 0x12) = 1;
  }
  else {
    pp_Var7 = __ctype_toupper_loc();
    *pbVar10 = (byte)(*pp_Var7)[*pbVar10];
    status_message_set(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,(long)plVar2,"%s",local_f0,param_12,param_13,
                       param_14,in_stack_ffffffffffffff08);
  }
  free(local_f0);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmdq_guard(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined4 param_11)

{
  long *plVar1;
  undefined8 uVar2;
  
  plVar1 = *(long **)(param_9 + 8);
  if ((plVar1 != (long *)0x0) && ((*(byte *)((long)plVar1 + 0x421) & 0x20) != 0)) {
    uVar2 = evbuffer_add_printf(plVar1[0x53],"%%%s %ld %u %d\n",param_10,
                                *(undefined8 *)(param_9 + 0x108),*(undefined4 *)(param_9 + 0x110),
                                param_11);
    server_client_push_stdout(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar1);
    return;
  }
  return;
}



void cmdq_append(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,int *param_10,undefined4 *param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  long *plVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  int **ppiVar5;
  
  ppiVar5 = (int **)xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x58,
                            param_11,param_12,param_13,param_14);
  plVar1 = *(long **)(param_9 + 0x20);
  *ppiVar5 = param_10;
  ppiVar5[10] = (int *)plVar1;
  ppiVar5[9] = (int *)0x0;
  *plVar1 = (long)ppiVar5;
  *(int ***)(param_9 + 0x20) = ppiVar5 + 9;
  *param_10 = *param_10 + 1;
  if (param_11 != (undefined4 *)0x0) {
    uVar2 = param_11[1];
    uVar3 = param_11[2];
    uVar4 = param_11[3];
    *(undefined4 *)(ppiVar5 + 1) = *param_11;
    *(undefined4 *)((long)ppiVar5 + 0xc) = uVar2;
    *(undefined4 *)(ppiVar5 + 2) = uVar3;
    *(undefined4 *)((long)ppiVar5 + 0x14) = uVar4;
    uVar2 = param_11[5];
    uVar3 = param_11[6];
    uVar4 = param_11[7];
    *(undefined4 *)(ppiVar5 + 3) = param_11[4];
    *(undefined4 *)((long)ppiVar5 + 0x1c) = uVar2;
    *(undefined4 *)(ppiVar5 + 4) = uVar3;
    *(undefined4 *)((long)ppiVar5 + 0x24) = uVar4;
    uVar2 = param_11[9];
    uVar3 = param_11[10];
    uVar4 = param_11[0xb];
    *(undefined4 *)(ppiVar5 + 5) = param_11[8];
    *(undefined4 *)((long)ppiVar5 + 0x2c) = uVar2;
    *(undefined4 *)(ppiVar5 + 6) = uVar3;
    *(undefined4 *)((long)ppiVar5 + 0x34) = uVar4;
    uVar2 = param_11[0xd];
    uVar3 = param_11[0xe];
    uVar4 = param_11[0xf];
    *(undefined4 *)(ppiVar5 + 7) = param_11[0xc];
    *(undefined4 *)((long)ppiVar5 + 0x3c) = uVar2;
    *(undefined4 *)(ppiVar5 + 8) = uVar3;
    *(undefined4 *)((long)ppiVar5 + 0x44) = uVar4;
    return;
  }
  *(undefined4 *)(ppiVar5 + 1) = 0;
  return;
}



void cmdq_flush(long param_1)

{
  int **ppiVar1;
  undefined8 *puVar2;
  int *piVar3;
  int **__ptr;
  
  __ptr = *(int ***)(param_1 + 0x18);
  if (*(int ***)(param_1 + 0x18) != (int **)0x0) {
    while( true ) {
      ppiVar1 = (int **)__ptr[9];
      puVar2 = (undefined8 *)__ptr[10];
      piVar3 = *__ptr;
      if (ppiVar1 == (int **)0x0) break;
      ppiVar1[10] = (int *)puVar2;
      *(int ***)__ptr[10] = ppiVar1;
      cmd_list_free(piVar3);
      free(__ptr);
      __ptr = ppiVar1;
    }
    *(undefined8 **)(param_1 + 0x20) = puVar2;
    *puVar2 = 0;
    cmd_list_free(piVar3);
    free(__ptr);
  }
  *(undefined8 *)(param_1 + 0x28) = 0;
  return;
}



uint cmdq_free(int *param_1)

{
  *param_1 = *param_1 + -1;
  if (*param_1 != 0) {
    return param_1[1] & 1;
  }
  cmdq_flush((long)param_1);
  free(param_1);
  return 1;
}



undefined4
cmdq_continue(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             int *param_9)

{
  long *plVar1;
  long lVar2;
  undefined8 *puVar3;
  int iVar4;
  undefined *puVar5;
  uint *__ptr;
  time_t tVar6;
  uint *puVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 uVar8;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 unaff_RBX;
  char *pcVar9;
  int *__ptr_00;
  long *plVar10;
  char **in_R9;
  uint uVar11;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined8 uVar13;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 uVar14;
  
  plVar10 = *(long **)(param_9 + 2);
  *param_9 = *param_9 + 1;
  uVar12 = notify_disable();
  puVar7 = (uint *)(ulong)(uint)param_9[1];
  pcVar9 = "continuing cmdq %p: flags %#x, client %p";
  __ptr_00 = (int *)0x3;
  uVar13 = log_emit(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                    "continuing cmdq %p: flags %#x, client %p",param_9,puVar7,plVar10,in_R9,
                    (char)unaff_RBX);
  plVar1 = *(long **)(param_9 + 6);
  uVar8 = extraout_RDX;
  if (plVar1 != (long *)0x0) {
    if (*(long *)(param_9 + 10) == 0) {
      *(long **)(param_9 + 10) = plVar1;
      plVar1 = *(long **)(*plVar1 + 8);
      *(long **)(param_9 + 0xc) = plVar1;
    }
    else {
      plVar1 = *(long **)(*(long *)(param_9 + 0xc) + 0x20);
      *(long **)(param_9 + 0xc) = plVar1;
    }
    do {
      while (plVar1 == (long *)0x0) {
LAB_00130b46:
        lVar2 = *(long *)(param_9 + 10);
        plVar1 = *(long **)(lVar2 + 0x48);
        puVar3 = *(undefined8 **)(lVar2 + 0x50);
        if (plVar1 == (long *)0x0) {
          *(undefined8 **)(param_9 + 8) = puVar3;
          *puVar3 = 0;
          cmd_list_free(**(int ***)(param_9 + 10));
          __ptr_00 = *(int **)(param_9 + 10);
          free(__ptr_00);
          uVar13 = CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04);
          *(undefined8 *)(param_9 + 10) = 0;
          uVar8 = extraout_RDX_02;
          goto LAB_00130bb8;
        }
        plVar1[10] = (long)puVar3;
        **(long ***)(lVar2 + 0x50) = plVar1;
        cmd_list_free(**(int ***)(param_9 + 10));
        free(*(void **)(param_9 + 10));
        lVar2 = *plVar1;
        *(long **)(param_9 + 10) = plVar1;
        plVar1 = *(long **)(lVar2 + 8);
        *(long **)(param_9 + 0xc) = plVar1;
      }
      uVar11 = *(uint *)((long)plVar1 + 0x1c) & 1;
      puVar5 = tmate_should_replicate_cmd((undefined *)*plVar1);
      uVar13 = extraout_RDX_00;
      uVar12 = extraout_XMM0_Da;
      if ((int)puVar5 != 0) {
        uVar12 = tmate_exec_cmd(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,plVar1,pcVar9,extraout_RDX_00,
                                (long)puVar7,plVar10,in_R9);
        uVar13 = extraout_RDX_04;
      }
      __ptr = (uint *)cmd_print(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                plVar1,pcVar9,uVar13,(char *)puVar7,plVar10,in_R9);
      puVar7 = __ptr;
      log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "cmdq %p: %s",param_9,__ptr,plVar10,in_R9,(char)unaff_RBX);
      free(__ptr);
      tVar6 = time((time_t *)0x0);
      param_9[0x44] = param_9[0x44] + 1;
      *(time_t *)(param_9 + 0x42) = tVar6;
      uVar12 = cmdq_guard(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,(long)param_9,"begin",uVar11);
      iVar4 = cmd_prepare_state(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                plVar1,(undefined *)param_9,0,(char *)puVar7,(long)plVar10,in_R9);
      uVar12 = extraout_XMM0_Da_02;
      uVar14 = extraout_XMM0_Db_01;
      if ((iVar4 != 0) ||
         (iVar4 = (**(code **)(*plVar1 + 0x38))(plVar1,param_9), uVar12 = extraout_XMM0_Da_03,
         uVar14 = extraout_XMM0_Db_02, iVar4 == -1)) {
        pcVar9 = "error";
        cmdq_guard(CONCAT44(uVar14,uVar12),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   (long)param_9,"error",uVar11);
        goto LAB_00130b46;
      }
      pcVar9 = "end";
      __ptr_00 = param_9;
      uVar13 = cmdq_guard(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,(long)param_9,"end",uVar11);
      uVar12 = 0;
      uVar8 = extraout_RDX_01;
      if (iVar4 == 1) goto LAB_00130be1;
      if (iVar4 == 2) goto LAB_00130c28;
      plVar1 = *(long **)(*(long *)(param_9 + 0xc) + 0x20);
      *(long **)(param_9 + 0xc) = plVar1;
    } while( true );
  }
LAB_00130bb8:
  if (0 < param_9[4]) {
    *(uint *)(*(long *)(param_9 + 2) + 0x420) = *(uint *)(*(long *)(param_9 + 2) + 0x420) | 4;
  }
  uVar12 = 1;
  if (*(code **)(param_9 + 0x46) != (code *)0x0) {
    __ptr_00 = param_9;
    uVar13 = (**(code **)(param_9 + 0x46))();
    uVar8 = extraout_RDX_03;
  }
LAB_00130be1:
  notify_enable(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__ptr_00,
                (uint *)pcVar9,uVar8,puVar7,plVar10,in_R9);
  cmdq_free(param_9);
  return uVar12;
LAB_00130c28:
  __ptr_00 = param_9;
  uVar13 = cmdq_flush((long)param_9);
  uVar8 = extraout_RDX_05;
  goto LAB_00130bb8;
}



void cmdq_run(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             int *param_9,int *param_10,undefined4 *param_11,undefined8 param_12,undefined8 param_13
             ,undefined8 param_14)

{
  undefined8 uVar1;
  
  uVar1 = cmdq_append(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                      param_10,param_11,param_12,param_13,param_14);
  if (*(long *)(param_9 + 10) != 0) {
    return;
  }
  *(undefined8 *)(param_9 + 0xc) = 0;
  cmdq_continue(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  return;
}



ulong cmd_refresh_client_exec
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
                undefined8 param_14)

{
  byte **ppbVar1;
  long lVar2;
  int iVar3;
  ulong uVar4;
  long lVar5;
  ulong uVar6;
  undefined8 uVar7;
  uint *puVar8;
  undefined8 extraout_RDX;
  ulong extraout_RDX_00;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined uVar9;
  int in_stack_ffffffffffffffc8;
  uint local_34;
  long local_30;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  lVar2 = *(long *)(param_10 + 0x80);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar4 = args_has(ppbVar1,0x43);
  if ((int)uVar4 == 0) {
    uVar4 = uVar4 & 0xffffffff;
    uVar7 = args_has(ppbVar1,0x53);
    *(uint *)(lVar2 + 0x420) = *(uint *)(lVar2 + 0x420) | 0x80000;
    if ((int)uVar7 == 0) {
      server_redraw_client(lVar2);
    }
    else {
      server_status_client(lVar2);
    }
  }
  else {
    lVar5 = args_get(ppbVar1,0x43);
    if (lVar5 == 0) {
      uVar4 = 0xffffffff;
      cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                 "missing size",extraout_RDX,param_12,param_13,param_14,
                 (char)in_stack_ffffffffffffffc8);
    }
    else {
      puVar8 = &local_34;
      iVar3 = __isoc99_sscanf(lVar5,"%u,%u",&stack0xffffffffffffffc8);
      uVar9 = (undefined)in_stack_ffffffffffffffc8;
      if (iVar3 == 2) {
        uVar6 = extraout_RDX_00;
        if (in_stack_ffffffffffffffc8 - 2U < 4999) {
          uVar6 = (ulong)local_34;
          if (local_34 - 2 < 4999) {
            if ((*(byte *)(lVar2 + 0x421) & 0x20) == 0) {
              uVar4 = 0xffffffff;
              cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,param_10,"not a control client",uVar6,(ulong)puVar8,param_13,param_14,
                         uVar9);
            }
            else {
              uVar6 = tty_set_size(lVar2 + 0xe0,in_stack_ffffffffffffffc8,local_34);
              uVar4 = uVar6 & 0xffffffff;
              if ((int)uVar6 != 0) {
                recalculate_sizes(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,
                                  param_7,param_8);
                uVar4 = 0;
              }
            }
            goto LAB_00130d4d;
          }
        }
        uVar4 = 0xffffffff;
        cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"size too small or too big",uVar6,(ulong)puVar8,param_13,param_14,uVar9)
        ;
      }
      else {
        uVar4 = 0xffffffff;
        cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"bad size argument",extraout_RDX_00,(ulong)puVar8,param_13,param_14,
                   uVar9);
      }
    }
  }
LAB_00130d4d:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
cmd_rename_session_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,ulong param_12,long param_13,undefined8 param_14)

{
  long lVar1;
  char *pcVar2;
  bool bVar3;
  undefined7 extraout_var;
  long lVar4;
  undefined8 extraout_RAX;
  undefined8 uVar5;
  undefined8 extraout_RDX;
  undefined unaff_BPL;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  
  lVar1 = *(long *)(param_10 + 0xa0);
  pcVar2 = **(char ***)(*(long *)(param_9 + 8) + 0x10);
  bVar3 = session_check_name(pcVar2);
  if ((int)CONCAT71(extraout_var,bVar3) == 0) {
    cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,param_10,"bad session name: %s",pcVar2,param_12,param_13,param_14,
               unaff_BPL);
    uVar5 = 0xffffffff;
  }
  else {
    lVar4 = session_find(pcVar2);
    if (lVar4 == 0) {
      lVar4 = lVar1;
      sessions_RB_REMOVE(&sessions,lVar1);
      free(*(void **)(lVar1 + 8));
      xstrdup(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,pcVar2,lVar4,extraout_RDX,param_12,param_13,param_14);
      *(undefined8 *)(lVar1 + 8) = extraout_RAX;
      sessions_RB_INSERT(&sessions,lVar1);
      uVar6 = server_status_session(lVar1);
      notify_session_renamed(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1);
      uVar5 = 0;
    }
    else {
      cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"duplicate session: %s",pcVar2,param_12,param_13,
                 param_14,unaff_BPL);
      uVar5 = 0xffffffff;
    }
  }
  return uVar5;
}



undefined8
cmd_rename_window_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  
  lVar1 = *(long *)(param_10 + 0xa8);
  uVar2 = window_set_name(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          *(uint **)(lVar1 + 8),**(char ***)(*(long *)(param_9 + 8) + 0x10),param_11
                          ,param_12,param_13,param_14);
  options_set_number(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     *(char ***)(*(long *)(lVar1 + 8) + 0x188),"automatic-rename",(char *)0x0,
                     param_12,param_13,param_14);
  server_status_window(*(long *)(lVar1 + 8));
  return 0;
}



void cmd_resize_pane_mouse_update
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int *param_10,undefined8 param_11,undefined8 param_12,ulong param_13,
               undefined8 param_14)

{
  bool bVar1;
  bool bVar2;
  int iVar3;
  long lVar4;
  undefined7 extraout_var;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  long lVar8;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar9;
  
  lVar4 = cmd_mouse_window(param_10,(int **)0x0);
  if (lVar4 != 0) {
    uVar6 = param_10[4];
    uVar7 = param_10[6];
    uVar5 = param_10[9];
    if (uVar6 == 0) {
      uVar7 = (uVar7 - 1) + (uint)(uVar7 == 0);
      uVar5 = (uVar5 - 1) + (uint)(uVar5 == 0);
    }
    else if (0 < (int)uVar6) {
      if (uVar6 <= uVar7) {
        uVar7 = uVar6 - 1;
      }
      if (uVar6 <= uVar5) {
        uVar5 = uVar6 - 1;
      }
    }
    lVar8 = *(long *)(*(long *)(lVar4 + 8) + 0x148);
    if (lVar8 != 0) {
      bVar2 = false;
      do {
        while (bVar1 = bVar2, bVar2 = window_pane_visible(lVar8),
              (int)CONCAT71(extraout_var,bVar2) == 0) {
LAB_00130fd4:
          lVar8 = *(long *)(lVar8 + 0x1f8);
          bVar2 = bVar1;
          if (lVar8 == 0) goto LAB_00131078;
        }
        iVar3 = *(int *)(lVar8 + 0x20) + *(int *)(lVar8 + 0x28);
        uVar6 = *(int *)(lVar8 + 0x24) + *(uint *)(lVar8 + 0x2c);
        if ((iVar3 == param_10[8]) && (*(uint *)(lVar8 + 0x2c) <= uVar5 + 1)) {
          if (uVar5 <= uVar6) {
            bVar1 = true;
            uVar9 = layout_resize_pane(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,
                                       param_7,param_8,lVar8,0,param_10[5] - iVar3,param_12,param_13
                                       ,param_14);
            if (uVar5 == *(int *)(lVar8 + 0x2c) + *(int *)(lVar8 + 0x24)) goto LAB_00131038;
          }
          goto LAB_00130fd4;
        }
        uVar9 = extraout_XMM0_Qa;
        if (uVar5 != uVar6) goto LAB_00130fd4;
LAB_00131038:
        if ((param_10[8] + 1U < *(uint *)(lVar8 + 0x28)) ||
           (*(uint *)(lVar8 + 0x28) + *(int *)(lVar8 + 0x20) < (uint)param_10[8]))
        goto LAB_00130fd4;
        bVar1 = true;
        layout_resize_pane(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar8,1,
                           uVar7 - uVar5,param_12,param_13,param_14);
        lVar8 = *(long *)(lVar8 + 0x1f8);
        bVar2 = true;
      } while (lVar8 != 0);
LAB_00131078:
      if (bVar1) {
        server_redraw_window(*(long *)(lVar4 + 8));
        return;
      }
    }
  }
  *(undefined8 *)(param_9 + 0x1e0) = 0;
  return;
}



ulong cmd_resize_pane_exec
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,long param_10,undefined8 param_11,undefined8 param_12,void **param_13,
                undefined *param_14)

{
  byte **ppbVar1;
  char **ppcVar2;
  uint *puVar3;
  ulong uVar4;
  long lVar5;
  undefined8 uVar6;
  longlong lVar7;
  char **ppcVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar9;
  char *pcVar10;
  int iVar11;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined4 extraout_XMM0_Db_09;
  undefined4 uVar13;
  long lVar14;
  int *local_58;
  char *local_50;
  void *local_48;
  long local_40;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  lVar5 = *(long *)(param_10 + 0xa8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar14 = *(long *)(param_10 + 0xb8);
  ppcVar2 = *(char ***)(param_10 + 8);
  puVar3 = *(uint **)(lVar5 + 8);
  local_58 = *(int **)(param_10 + 0xa0);
  ppcVar8 = ppcVar2;
  uVar4 = args_has(ppbVar1,0x4d);
  if ((int)uVar4 != 0) {
    uVar4 = 0;
    lVar5 = cmd_mouse_window((int *)(*(long *)(param_10 + 0x28) + 8),&local_58);
    if (((ppcVar2 != (char **)0x0) && (lVar5 != 0)) && ((int *)ppcVar2[0xb3] == local_58)) {
      lVar5 = *(long *)(param_10 + 0x28);
      ppcVar2[0x3c] = (char *)cmd_resize_pane_mouse_update;
      cmd_resize_pane_mouse_update
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,(long)ppcVar2,(int *)(lVar5 + 8),extraout_RDX,ppcVar2,
                 (ulong)param_13,param_14);
      uVar4 = 0;
    }
    goto LAB_0013117f;
  }
  uVar9 = 0x5a;
  uVar4 = uVar4 & 0xffffffff;
  uVar6 = args_has(ppbVar1,0x5a);
  if ((int)uVar6 != 0) {
    if ((*(byte *)((long)puVar3 + 0x181) & 0x10) == 0) {
      window_zoom(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar14
                 );
    }
    else {
      window_unzoom(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,puVar3,uVar9,extraout_RDX_00,ppcVar8,
                    (ulong)param_13,param_14);
    }
    server_redraw_window((long)puVar3);
    server_status_window((long)puVar3);
    goto LAB_0013117f;
  }
  server_unzoom_window
            (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
             param_6,param_7,param_8,puVar3,uVar9,extraout_RDX_00,ppcVar8,(ulong)param_13,param_14);
  if (*(int *)(ppbVar1 + 1) == 0) {
    iVar11 = 1;
  }
  else {
    ppcVar8 = &local_50;
    lVar7 = strtonum(*(char **)ppbVar1[2],1,0x7fffffff,ppcVar8);
    iVar11 = (int)lVar7;
    if (local_50 != (char *)0x0) {
      uVar4 = 0xffffffff;
      cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"adjustment %s",local_50,(ulong)ppcVar8,
                 (long)param_13,param_14,(char)lVar14);
      goto LAB_0013117f;
    }
  }
  uVar6 = args_has(*(byte ***)(param_9 + 8),0x78);
  if ((int)uVar6 == 0) {
LAB_00131279:
    uVar6 = args_has(*(byte ***)(param_9 + 8),0x79);
    if ((int)uVar6 != 0) {
      param_13 = &local_48;
      ppcVar8 = (char **)0x7fffffff;
      lVar7 = args_strtonum(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,*(byte ***)(param_9 + 8),
                            (undefined *)0x79,(undefined *)0x2,(undefined *)0x7fffffff,param_13,
                            param_14);
      if (local_48 != (void *)0x0) {
        pcVar10 = "height %s";
        uVar12 = extraout_XMM0_Da_05;
        uVar13 = extraout_XMM0_Db_05;
        goto LAB_001313cf;
      }
      layout_resize_pane_to
                (CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_05),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,lVar14,1,(int)lVar7);
    }
    uVar6 = args_has(*(byte ***)(param_9 + 8),0x4c);
    if ((int)uVar6 == 0) {
      uVar6 = args_has(*(byte ***)(param_9 + 8),0x52);
      if ((int)uVar6 == 0) {
        uVar6 = args_has(*(byte ***)(param_9 + 8),0x55);
        if ((int)uVar6 == 0) {
          uVar6 = args_has(*(byte ***)(param_9 + 8),0x44);
          if ((int)uVar6 != 0) {
            layout_resize_pane(CONCAT44(extraout_XMM0_Db_09,extraout_XMM0_Da_09),param_2,param_3,
                               param_4,param_5,param_6,param_7,param_8,lVar14,1,iVar11,ppcVar8,
                               (ulong)param_13,param_14);
          }
        }
        else {
          layout_resize_pane(CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_08),param_2,param_3,
                             param_4,param_5,param_6,param_7,param_8,lVar14,1,-iVar11,ppcVar8,
                             (ulong)param_13,param_14);
        }
      }
      else {
        layout_resize_pane(CONCAT44(extraout_XMM0_Db_07,extraout_XMM0_Da_07),param_2,param_3,param_4
                           ,param_5,param_6,param_7,param_8,lVar14,0,iVar11,ppcVar8,(ulong)param_13,
                           param_14);
      }
    }
    else {
      layout_resize_pane(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_06),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,lVar14,0,-iVar11,ppcVar8,(ulong)param_13,
                         param_14);
    }
    uVar4 = 0;
    server_redraw_window(*(long *)(lVar5 + 8));
  }
  else {
    param_13 = &local_48;
    ppcVar8 = (char **)0x7fffffff;
    lVar7 = args_strtonum(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,*(byte ***)(param_9 + 8),(undefined *)0x78
                          ,(undefined *)0x2,(undefined *)0x7fffffff,param_13,param_14);
    pcVar10 = "width %s";
    uVar12 = extraout_XMM0_Da_03;
    uVar13 = extraout_XMM0_Db_03;
    if (local_48 == (void *)0x0) {
      layout_resize_pane_to
                (CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,lVar14,0,(int)lVar7);
      goto LAB_00131279;
    }
LAB_001313cf:
    uVar4 = 0xffffffff;
    cmdq_error(CONCAT44(uVar13,uVar12),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               param_10,pcVar10,local_48,(ulong)ppcVar8,(long)param_13,param_14,(char)lVar14);
    free(local_48);
  }
LAB_0013117f:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4
cmd_respawn_pane_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  byte **ppbVar1;
  uint *puVar2;
  long lVar3;
  uint *puVar4;
  uint *puVar5;
  long lVar6;
  int iVar7;
  undefined8 uVar8;
  char **ppcVar9;
  ulong uVar10;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 uVar11;
  char **ppcVar12;
  undefined *puVar13;
  byte **ppbVar14;
  long lVar15;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined auVar17 [16];
  uint in_stack_ffffffffffffffb8;
  undefined4 uStack_44;
  
  puVar13 = &stack0xffffffffffffffb8;
  ppbVar1 = *(byte ***)(param_9 + 8);
  puVar2 = *(uint **)(param_10 + 0xa8);
  lVar3 = *(long *)(in_FS_OFFSET + 0x28);
  puVar4 = *(uint **)(param_10 + 0xb8);
  puVar5 = *(uint **)(param_10 + 0xa0);
  uVar11 = 0x6b;
  lVar6 = *(long *)(puVar2 + 2);
  ppbVar14 = ppbVar1;
  uVar8 = args_has(ppbVar1,0x6b);
  if (((int)uVar8 == 0) && (puVar4[0x1e] != 0xffffffff)) {
    uVar8 = window_pane_index(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                              param_5,param_6,param_7,param_8,(long)puVar4,
                              (int *)&stack0xffffffffffffffb8,extraout_RDX,param_12,param_13,
                              param_14);
    if ((int)uVar8 != 0) {
                    // WARNING: Subroutine does not return
      fatalx(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "index not found",puVar13,extraout_RDX_04,param_12,param_13,param_14,
             (char)in_stack_ffffffffffffffb8);
    }
    uVar16 = 0xffffffff;
    cmdq_error(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_10,"pane still active: %s:%d.%u",
               *(undefined8 *)(puVar5 + 2),(ulong)*puVar2,(ulong)in_stack_ffffffffffffffb8,param_14,
               (char)in_stack_ffffffffffffffb8);
  }
  else {
    auVar17 = environ_create(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,ppbVar14,uVar11,extraout_RDX,param_12,param_13,param_14);
    ppcVar9 = auVar17._0_8_;
    uVar8 = environ_copy(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,global_environ,ppcVar9,auVar17._8_8_,
                         param_12,param_13,param_14);
    uVar8 = environ_copy(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         *(long **)(puVar5 + 0x48),ppcVar9,extraout_RDX_00,param_12,param_13,
                         param_14);
    ppcVar12 = ppcVar9;
    server_fill_environ(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar5,ppcVar9
                        ,extraout_RDX_01,param_12,param_13,param_14);
    uVar8 = window_pane_reset_mode(puVar4);
    uVar16 = screen_reinit(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)(puVar4 + 0x52),ppcVar12,extraout_RDX_02,param_12,param_13,param_14
                          );
    input_init(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(ulong)puVar4,ppcVar12
               ,extraout_RDX_03,param_12,param_13,param_14);
    lVar15 = *(long *)(param_10 + 8);
    if ((lVar15 == 0) || (*(long *)(lVar15 + 0x598) != 0)) {
      uVar10 = environ_find(*(char ***)(puVar5 + 0x48),"PATH");
    }
    else {
      uVar10 = environ_find(*(char ***)(lVar15 + 0xb8),"PATH");
    }
    if (uVar10 != 0) {
      uVar10 = *(ulong *)(uVar10 + 8);
    }
    uVar8 = 0;
    lVar15 = 0;
    iVar7 = window_pane_spawn(puVar4,*(undefined4 *)(ppbVar1 + 1),ppbVar1[2]);
    if (iVar7 == 0) {
      puVar4[0xc] = puVar4[0xc] | 1;
      server_status_window(lVar6);
      environ_free((long *)ppcVar9);
      uVar16 = 0;
    }
    else {
      uVar16 = 0xffffffff;
      cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"respawn pane failed: %s",
                 CONCAT44(uStack_44,in_stack_ffffffffffffffb8),uVar10,lVar15,uVar8,
                 (char)in_stack_ffffffffffffffb8);
      free((void *)CONCAT44(uStack_44,in_stack_ffffffffffffffb8));
      environ_free((long *)ppcVar9);
    }
  }
  if (lVar3 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar16;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4
cmd_respawn_window_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined8 param_12,long param_13,undefined8 param_14)

{
  uint uVar1;
  byte **ppbVar2;
  uint *puVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  int iVar7;
  undefined8 uVar8;
  char **ppcVar9;
  char *pcVar10;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long *plVar11;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 uVar12;
  uint *puVar13;
  byte **ppbVar14;
  char **ppcVar15;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined auVar17 [16];
  undefined in_stack_ffffffffffffffb8;
  undefined7 uStack_47;
  
  ppbVar2 = *(byte ***)(param_9 + 8);
  puVar3 = *(uint **)(param_10 + 0xa8);
  lVar4 = *(long *)(in_FS_OFFSET + 0x28);
  puVar13 = *(uint **)(param_10 + 0xa0);
  uVar12 = 0x6b;
  lVar5 = *(long *)(puVar3 + 2);
  ppbVar14 = ppbVar2;
  uVar8 = args_has(ppbVar2,0x6b);
  if ((int)uVar8 == 0) {
    for (lVar6 = *(long *)(lVar5 + 0x148); lVar6 != 0; lVar6 = *(long *)(lVar6 + 0x1f8)) {
      if (*(int *)(lVar6 + 0x78) != -1) {
        uVar16 = 0xffffffff;
        cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,param_10,"window still active: %s:%d",
                   *(undefined8 *)(puVar13 + 2),(ulong)*puVar3,param_13,param_14,
                   in_stack_ffffffffffffffb8);
        goto LAB_00131800;
      }
    }
  }
  auVar17 = environ_create(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           ppbVar14,uVar12,extraout_RDX,param_12,param_13,param_14);
  ppcVar9 = auVar17._0_8_;
  uVar8 = environ_copy(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,global_environ,ppcVar9,auVar17._8_8_,param_12
                       ,param_13,param_14);
  uVar8 = environ_copy(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       *(long **)(puVar13 + 0x48),ppcVar9,extraout_RDX_00,param_12,param_13,param_14
                      );
  server_fill_environ(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar13,ppcVar9,
                      extraout_RDX_01,param_12,param_13,param_14);
  puVar3 = *(uint **)(lVar5 + 0x148);
  lVar6 = *(long *)(puVar3 + 0x7e);
  plVar11 = *(long **)(puVar3 + 0x80);
  if (lVar6 == 0) {
    *(long **)(lVar5 + 0x150) = plVar11;
  }
  else {
    *(long **)(lVar6 + 0x200) = plVar11;
    plVar11 = *(long **)(puVar3 + 0x80);
  }
  *plVar11 = lVar6;
  layout_free(lVar5);
  uVar8 = window_destroy_panes(lVar5);
  lVar6 = *(long *)(lVar5 + 0x148);
  *(long *)(puVar3 + 0x7e) = lVar6;
  if (lVar6 == 0) {
    *(uint **)(lVar5 + 0x150) = puVar3 + 0x7e;
  }
  else {
    *(uint **)(lVar6 + 0x200) = puVar3 + 0x7e;
  }
  *(uint **)(lVar5 + 0x148) = puVar3;
  uVar1 = *(uint *)(lVar5 + 0x17c);
  *(long *)(puVar3 + 0x80) = lVar5 + 0x148;
  window_pane_resize(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)puVar3,
                     *(uint *)(lVar5 + 0x178),uVar1,param_12,param_13,param_14);
  lVar6 = *(long *)(param_10 + 8);
  if ((lVar6 == 0) || (*(long *)(lVar6 + 0x598) != 0)) {
    pcVar10 = (char *)environ_find(*(char ***)(puVar13 + 0x48),"PATH");
  }
  else {
    pcVar10 = (char *)environ_find(*(char ***)(lVar6 + 0xb8),"PATH");
  }
  if (pcVar10 != (char *)0x0) {
    pcVar10 = *(char **)(pcVar10 + 8);
  }
  ppcVar15 = (char **)0x0;
  plVar11 = (long *)0x0;
  iVar7 = window_pane_spawn(puVar3,*(undefined4 *)(ppbVar2 + 1),ppbVar2[2]);
  if (iVar7 == 0) {
    puVar13 = puVar3;
    layout_init(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar5,
                (long)puVar3,extraout_RDX_02,pcVar10,(ulong)plVar11,ppcVar15);
    uVar8 = window_pane_reset_mode(puVar3);
    uVar16 = screen_reinit(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)(puVar3 + 0x52),puVar13,extraout_RDX_03,pcVar10,plVar11,ppcVar15);
    input_init(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(ulong)puVar3,puVar13,
               extraout_RDX_04,pcVar10,plVar11,ppcVar15);
    window_set_active_pane(lVar5,(long)puVar3);
    recalculate_sizes(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8);
    server_redraw_window(lVar5);
    environ_free((long *)ppcVar9);
    uVar16 = 0;
  }
  else {
    uVar16 = 0xffffffff;
    cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_10,"respawn window failed: %s",
               CONCAT71(uStack_47,in_stack_ffffffffffffffb8),(ulong)pcVar10,(long)plVar11,ppcVar15,
               in_stack_ffffffffffffffb8);
    free((void *)CONCAT71(uStack_47,in_stack_ffffffffffffffb8));
    uVar8 = environ_free((long *)ppcVar9);
    server_destroy_pane(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar3,0,
                        extraout_RDX_05,pcVar10,plVar11,ppcVar15);
  }
LAB_00131800:
  if (lVar4 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar16;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8
cmd_rotate_window_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  long lVar4;
  long lVar5;
  long lVar6;
  undefined8 uVar7;
  long lVar8;
  long *plVar9;
  long *plVar10;
  long lVar11;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar12;
  
  lVar4 = *(long *)(*(long *)(param_10 + 0xa8) + 8);
  uVar7 = args_has(*(byte ***)(param_9 + 8),0x44);
  if ((int)uVar7 == 0) {
    lVar11 = *(long *)(lVar4 + 0x148);
    plVar9 = *(long **)(lVar11 + 0x200);
    lVar8 = *(long *)(lVar11 + 0x1f8);
    plVar10 = plVar9;
    if (lVar8 != 0) {
      *(long **)(lVar8 + 0x200) = plVar9;
      plVar9 = *(long **)(lVar4 + 0x150);
      plVar10 = *(long **)(lVar11 + 0x200);
    }
    lVar5 = *(long *)(lVar11 + 0x10);
    uVar7 = *(undefined8 *)(lVar11 + 0x28);
    *plVar10 = lVar8;
    uVar1 = *(uint *)(lVar11 + 0x20);
    uVar2 = *(uint *)(lVar11 + 0x24);
    *(long **)(lVar11 + 0x200) = plVar9;
    *(undefined8 *)(lVar11 + 0x1f8) = 0;
    *plVar9 = lVar11;
    *(long *)(lVar4 + 0x150) = lVar11 + 0x1f8;
    lVar11 = **(long **)(lVar11 + 0x200);
    uVar12 = extraout_XMM0_Qa;
    if (lVar11 == 0) {
      uVar7 = FUN_00123c2a();
      return uVar7;
    }
    while (lVar8 = **(long **)(*(long *)(lVar11 + 0x200) + 8), lVar8 != 0) {
      lVar6 = *(long *)(lVar8 + 0x10);
      *(long *)(lVar11 + 0x10) = lVar6;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x20) = lVar11;
      }
      uVar3 = *(uint *)(lVar8 + 0x20);
      *(undefined4 *)(lVar11 + 0x28) = *(undefined4 *)(lVar8 + 0x28);
      *(undefined4 *)(lVar11 + 0x2c) = *(undefined4 *)(lVar8 + 0x2c);
      uVar12 = window_pane_resize(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  lVar11,uVar3,*(uint *)(lVar8 + 0x24),plVar9,param_13,param_14);
      lVar11 = **(long **)(*(long *)(lVar11 + 0x200) + 8);
      if (lVar11 == 0) {
        uVar7 = FUN_00123c2a();
        return uVar7;
      }
    }
    *(long *)(lVar11 + 0x10) = lVar5;
    if (lVar5 != 0) {
      *(long *)(lVar5 + 0x20) = lVar11;
    }
    *(undefined8 *)(lVar11 + 0x28) = uVar7;
    window_pane_resize(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar11,uVar1,
                       uVar2,plVar9,param_13,param_14);
    lVar11 = *(long *)(*(long *)(lVar4 + 0x138) + 0x1f8);
    if (lVar11 == 0) {
      lVar11 = *(long *)(lVar4 + 0x148);
    }
  }
  else {
    lVar11 = **(long **)(*(long *)(lVar4 + 0x150) + 8);
    lVar8 = *(long *)(lVar11 + 0x1f8);
    plVar9 = *(long **)(lVar11 + 0x200);
    if (lVar8 == 0) {
      *(long **)(lVar4 + 0x150) = plVar9;
    }
    else {
      *(long **)(lVar8 + 0x200) = plVar9;
      plVar9 = *(long **)(lVar11 + 0x200);
    }
    *plVar9 = lVar8;
    lVar8 = *(long *)(lVar4 + 0x148);
    *(long *)(lVar11 + 0x1f8) = lVar8;
    if (lVar8 == 0) {
      *(long *)(lVar4 + 0x150) = lVar11 + 0x1f8;
    }
    else {
      *(long *)(lVar8 + 0x200) = lVar11 + 0x1f8;
    }
    *(long *)(lVar4 + 0x148) = lVar11;
    lVar5 = *(long *)(lVar11 + 0x10);
    uVar7 = *(undefined8 *)(lVar11 + 0x28);
    uVar1 = *(uint *)(lVar11 + 0x20);
    *(long *)(lVar11 + 0x200) = lVar4 + 0x148;
    uVar2 = *(uint *)(lVar11 + 0x24);
    uVar12 = extraout_XMM0_Qa;
    while (lVar8 != 0) {
      lVar6 = *(long *)(lVar8 + 0x10);
      *(long *)(lVar11 + 0x10) = lVar6;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x20) = lVar11;
      }
      uVar3 = *(uint *)(lVar8 + 0x20);
      *(undefined4 *)(lVar11 + 0x28) = *(undefined4 *)(lVar8 + 0x28);
      *(undefined4 *)(lVar11 + 0x2c) = *(undefined4 *)(lVar8 + 0x2c);
      uVar12 = window_pane_resize(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  lVar11,uVar3,*(uint *)(lVar8 + 0x24),param_12,param_13,param_14);
      lVar11 = *(long *)(lVar11 + 0x1f8);
      if (lVar11 == 0) {
        do {
          invalidInstructionException();
        } while( true );
      }
      lVar8 = *(long *)(lVar11 + 0x1f8);
    }
    *(long *)(lVar11 + 0x10) = lVar5;
    if (lVar5 != 0) {
      *(long *)(lVar5 + 0x20) = lVar11;
    }
    *(undefined8 *)(lVar11 + 0x28) = uVar7;
    window_pane_resize(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar11,uVar1,
                       uVar2,param_12,param_13,param_14);
    lVar11 = **(long **)(*(long *)(*(long *)(lVar4 + 0x138) + 0x200) + 8);
    if (lVar11 == 0) {
      lVar11 = **(long **)(*(long *)(lVar4 + 0x150) + 8);
    }
  }
  window_set_active_pane(lVar4,lVar11);
  server_redraw_window(lVar4);
  return 0;
}



bool cmd_run_shell_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,int *param_10,undefined8 param_11,undefined *param_12,
                       undefined8 param_13,char **param_14)

{
  long lVar1;
  byte **ppbVar2;
  uint *puVar3;
  long *plVar4;
  uint uVar5;
  uint **ppuVar6;
  char *pcVar7;
  char **ppcVar8;
  undefined8 uVar9;
  uint *puVar10;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  char *pcVar11;
  long *plVar12;
  char *pcVar13;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar14;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  lVar1 = *(long *)(param_10 + 2);
  ppbVar2 = *(byte ***)(param_9 + 8);
  puVar3 = *(uint **)(param_10 + 0x28);
  puVar10 = *(uint **)(param_10 + 0x2a);
  plVar4 = *(long **)(param_10 + 0x2e);
  if ((lVar1 == 0) || (*(long *)(lVar1 + 0x598) != 0)) {
    pcVar13 = (char *)0x0;
    if (puVar3 != (uint *)0x0) {
      pcVar13 = *(char **)(puVar3 + 4);
    }
  }
  else {
    pcVar13 = *(char **)(lVar1 + 200);
  }
  ppuVar6 = (uint **)format_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   (long)param_10,0,param_11,param_12,param_13,param_14);
  plVar12 = plVar4;
  uVar9 = format_defaults(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,ppuVar6,*(long *)(param_10 + 0x20),puVar3,
                          puVar10,(uint *)plVar4,param_14);
  pcVar11 = *(char **)ppbVar2[2];
  pcVar7 = format_expand(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long *)ppuVar6,pcVar11,extraout_RDX,puVar10,plVar12,param_14);
  uVar14 = format_free(ppuVar6);
  ppcVar8 = (char **)xmalloc(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x18,
                             pcVar11,extraout_RDX_00,puVar10,plVar12,param_14);
  *ppcVar8 = pcVar7;
  uVar9 = args_has(ppbVar2,0x62);
  *(int *)(ppcVar8 + 2) = (int)uVar9;
  uVar5 = 0xffffffff;
  if (plVar4 != (long *)0x0) {
    uVar5 = *(uint *)plVar4;
  }
  ppcVar8[1] = (char *)param_10;
  *(uint *)((long)ppcVar8 + 0x14) = uVar5;
  *param_10 = *param_10 + 1;
  job_run(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,pcVar7,puVar3,pcVar13,cmd_run_shell_callback,cmd_run_shell_free,ppcVar8);
  return *(int *)(ppcVar8 + 2) == 0;
}



void cmd_run_shell_free(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       void **param_9)

{
  int *piVar1;
  uint uVar2;
  undefined8 extraout_XMM0_Qa;
  
  piVar1 = (int *)param_9[1];
  uVar2 = cmdq_free(piVar1);
  if ((uVar2 == 0) && (*(int *)(param_9 + 2) == 0)) {
    cmdq_continue(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar1);
  }
  free(*param_9);
  free(param_9);
  return;
}



void cmd_run_shell_print(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,size_t param_14)

{
  int iVar1;
  long lVar2;
  uint *puVar3;
  undefined8 uVar4;
  undefined8 extraout_RDX;
  undefined1 *puVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 uVar6;
  undefined1 in_stack_00000008;
  
  lVar2 = *(long *)(param_9 + 0x38);
  iVar1 = *(int *)(lVar2 + 0x14);
  if (iVar1 != -1) {
    puVar3 = (uint *)window_pane_find_by_id(iVar1);
    param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    if (puVar3 != (uint *)0x0) {
      puVar5 = window_copy_mode;
      uVar4 = window_pane_set_mode((long)puVar3,(undefined **)window_copy_mode);
      uVar6 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
      if ((int)uVar4 == 0) {
        uVar6 = window_copy_init_for_output
                          (extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,(long)puVar3,puVar5,extraout_RDX,param_12,param_13,param_14);
        puVar5 = *(undefined1 **)(puVar3 + 0x7a);
      }
      else {
        puVar5 = *(undefined1 **)(puVar3 + 0x7a);
      }
      if (puVar5 != window_copy_mode) {
        return;
      }
      window_copy_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar3,"%s",
                      param_10,param_12,param_13,param_14,in_stack_00000008);
      return;
    }
  }
  cmdq_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*(long *)(lVar2 + 8),
             "%s",param_10,param_12,param_13,param_14,in_stack_00000008);
  return;
}



void cmd_run_shell_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,void *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,size_t param_14)

{
  uint uVar1;
  long lVar2;
  size_t __n;
  void *pvVar3;
  void *pvVar4;
  uint uVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar7;
  undefined8 extraout_RDX_01;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 uVar10;
  undefined8 uVar9;
  undefined auVar11 [16];
  ulong uVar6;
  
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(byte *)((*(undefined8 **)(param_9 + 0x38))[1] + 4) & 1) != 0) goto LAB_00131ea7;
  uVar9 = **(undefined8 **)(param_9 + 0x38);
  while( true ) {
    auVar11 = evbuffer_readline(*(undefined8 *)(*(long *)(param_9 + 0x20) + 0x110));
    pvVar3 = auVar11._0_8_;
    if (pvVar3 == (void *)0x0) break;
    param_10 = pvVar3;
    cmd_run_shell_print(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                        param_6,param_7,param_8,param_9,pvVar3,auVar11._8_8_,param_12,param_13,
                        param_14);
    free(pvVar3);
  }
  auVar11 = evbuffer_get_length(*(undefined8 *)(*(long *)(param_9 + 0x20) + 0x110));
  __n = auVar11._0_8_;
  uVar8 = extraout_XMM0_Da_00;
  uVar10 = extraout_XMM0_Db_00;
  if (__n != 0) {
    pvVar3 = (void *)xmalloc(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,__n + 1,param_10,auVar11._8_8_,param_12,param_13,param_14);
    pvVar4 = (void *)evbuffer_pullup(*(undefined8 *)(*(long *)(param_9 + 0x20) + 0x110),
                                     0xffffffffffffffff);
    memcpy(pvVar3,pvVar4,__n);
    *(undefined *)((long)pvVar3 + __n) = 0;
    cmd_run_shell_print(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8,param_9,pvVar3,extraout_RDX,param_12,
                        param_13,param_14);
    free(pvVar3);
    uVar8 = extraout_XMM0_Da_02;
    uVar10 = extraout_XMM0_Db_02;
  }
  uVar1 = *(uint *)(param_9 + 0x14);
  pvVar4 = (void *)0x0;
  uVar5 = uVar1 & 0x7f;
  uVar6 = (ulong)uVar5;
  pvVar3 = (void *)0x0;
  if (uVar5 == 0) {
    uVar6 = (ulong)(uVar1 >> 8 & 0xff);
    if ((char)(uVar1 >> 8) != '\0') {
      uVar9 = xasprintf(CONCAT44(uVar10,uVar8),param_2,param_3,param_4,param_5,param_6,param_7,
                        param_8,(long *)&stack0xffffffffffffffc8,"\'%s\' returned %d",uVar9,uVar6,
                        param_13,param_14,0);
      uVar7 = extraout_RDX_01;
      pvVar3 = pvVar4;
LAB_00131ee3:
      if (pvVar3 != (void *)0x0) {
        cmd_run_shell_print(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            pvVar3,uVar7,uVar6,param_13,param_14);
      }
    }
  }
  else if ('\x01' < (char)((char)uVar5 + '\x01')) {
    uVar9 = xasprintf(CONCAT44(uVar10,uVar8),param_2,param_3,param_4,param_5,param_6,param_7,param_8
                      ,(long *)&stack0xffffffffffffffc8,"\'%s\' terminated by signal %d",uVar9,uVar6
                      ,param_13,param_14,0);
    uVar7 = extraout_RDX_00;
    pvVar3 = pvVar4;
    goto LAB_00131ee3;
  }
  free(pvVar3);
LAB_00131ea7:
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4
cmd_save_buffer_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9,
          long param_10,undefined8 param_11,ulong param_12,long param_13,size_t param_14)

{
  byte **ppbVar1;
  long *plVar2;
  undefined8 uVar3;
  undefined8 *puVar4;
  void *__ptr;
  long lVar5;
  FILE *__s;
  size_t sVar6;
  void *pvVar7;
  undefined2 *__ptr_00;
  char *extraout_RAX;
  char *pcVar8;
  int *piVar9;
  FILE *pFVar10;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 uVar11;
  ulong uVar12;
  char *__modes;
  char *pcVar13;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 uVar14;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Db_06;
  undefined in_stack_ffffffffffffef98;
  undefined uVar16;
  undefined4 local_105c;
  char *local_1058;
  ulong local_1050;
  char local_1048 [4104];
  long local_40;
  
  ppbVar1 = (byte **)param_9[1];
  plVar2 = *(long **)(param_10 + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar3 = args_has(ppbVar1,0x62);
  if ((int)uVar3 == 0) {
    puVar4 = (undefined8 *)paste_get_top((undefined8 *)0x0);
    if (puVar4 == (undefined8 *)0x0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,param_10,"no buffers",extraout_RDX,param_12,param_13,param_14,
                 in_stack_ffffffffffffef98);
      local_105c = 0xffffffff;
      goto LAB_00132091;
    }
  }
  else {
    pcVar8 = (char *)args_get(ppbVar1,0x62);
    puVar4 = (undefined8 *)paste_get_name(pcVar8);
    if (puVar4 == (undefined8 *)0x0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_05),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"no buffer %s",pcVar8,param_12,param_13,param_14,
                 in_stack_ffffffffffffef98);
      local_105c = 0xffffffff;
      goto LAB_00132091;
    }
  }
  __ptr = (void *)paste_buffer_data(puVar4,&local_1050);
  if (((undefined1 *)*param_9 == cmd_show_buffer_entry) ||
     ((pcVar8 = *(char **)ppbVar1[2], *pcVar8 == '-' && (pcVar8[1] == '\0')))) {
    if (plVar2 == (long *)0x0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"can\'t write to stdout",extraout_RDX_00,param_12,
                 param_13,param_14,(char)__ptr);
      local_105c = 0xffffffff;
    }
    else if ((plVar2[0xb3] == 0) || ((*(uint *)(plVar2 + 0x84) & 0x2000) != 0)) {
      uVar3 = evbuffer_add(plVar2[0x53],__ptr,local_1050);
      server_client_push_stdout
                (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar2);
      local_105c = 0;
    }
    else if (local_1050 < 0x1fffffff) {
      uVar12 = 0;
      __ptr_00 = (undefined2 *)0x0;
      if (local_1050 != 0) {
        do {
          sVar6 = local_1050 - uVar12;
          pcVar8 = (char *)((long)__ptr + uVar12);
          pvVar7 = memchr(pcVar8,10,sVar6);
          if (pvVar7 != (void *)0x0) {
            sVar6 = (long)pvVar7 - (long)pcVar8;
          }
          __ptr_00 = (undefined2 *)
                     xrealloc(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,__ptr_00,sVar6 * 4 + 1,extraout_RDX_02,param_12,param_13,
                              param_14);
          param_12 = 9;
          strvisx(__ptr_00,pcVar8,sVar6,9);
          cmdq_print(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_10,"%s",__ptr_00,param_12,param_13,
                     param_14,(char)__ptr);
          uVar12 = uVar12 + sVar6 + (pvVar7 != (void *)0x0);
        } while (local_1050 != uVar12);
      }
      free(__ptr_00);
      local_105c = 0;
    }
    else {
      cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"buffer too big",extraout_RDX_00,param_12,param_13
                 ,param_14,(char)__ptr);
      local_105c = 0xffffffff;
    }
  }
  else {
    if (plVar2[0xb3] == 0) {
      pcVar13 = (char *)plVar2[0x19];
      if (pcVar13 == (char *)0x0) {
        pcVar13 = ".";
      }
    }
    else {
      pcVar13 = *(char **)(plVar2[0xb3] + 0x10);
      if (pcVar13 == (char *)0x0) {
        pcVar13 = ".";
      }
    }
    uVar11 = 0x61;
    __modes = "wb";
    uVar3 = args_has((byte **)param_9[1],0x61);
    if ((int)uVar3 != 0) {
      __modes = "ab";
    }
    if (*pcVar8 == '/') {
      xstrdup(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,pcVar8,uVar11,extraout_RDX_01,param_12,param_13,param_14);
      local_1058 = extraout_RAX;
    }
    else {
      xasprintf(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,(long *)&local_1058,"%s/%s",pcVar13,pcVar8,param_13,param_14
                ,(char)__ptr);
    }
    lVar5 = __realpath_chk(local_1058,local_1048,0x1000);
    if ((lVar5 == 0) && (pcVar8 = strlcpy(local_1048,local_1058,0x1000), (char *)0xfff < pcVar8)) {
      pcVar13 = strerror(0x24);
      uVar16 = SUB81(__ptr,0);
      pcVar8 = local_1058;
      uVar14 = extraout_XMM0_Da_06;
      uVar15 = extraout_XMM0_Db_05;
    }
    else {
      __s = fopen(local_1048,__modes);
      free(local_1058);
      if (__s != (FILE *)0x0) {
        pFVar10 = __s;
        sVar6 = fwrite(__ptr,1,local_1050,__s);
        if (sVar6 == local_1050) {
          fclose(__s);
          local_105c = 0;
        }
        else {
          cmdq_error(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_10,"%s: write error",local_1048,
                     (ulong)pFVar10,param_13,param_14,(char)__ptr);
          fclose(__s);
          local_105c = 0xffffffff;
        }
        goto LAB_00132091;
      }
      piVar9 = __errno_location();
      uVar16 = SUB81(__ptr,0);
      pcVar13 = strerror(*piVar9);
      pcVar8 = local_1048;
      uVar14 = extraout_XMM0_Da_07;
      uVar15 = extraout_XMM0_Db_06;
    }
    cmdq_error(CONCAT44(uVar15,uVar14),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               param_10,"%s: %s",pcVar8,(ulong)pcVar13,param_13,param_14,uVar16);
    local_105c = 0xffffffff;
  }
LAB_00132091:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return local_105c;
}



ulong cmd_select_layout_exec
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long *param_9,long param_10,undefined8 param_11,ulong param_12,ulong param_13,
                undefined8 param_14)

{
  byte **ppbVar1;
  uint *puVar2;
  undefined1 *puVar3;
  undefined1 *puVar4;
  uint uVar5;
  undefined8 uVar6;
  ulong uVar7;
  long lVar8;
  undefined8 uVar9;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  uint *__ptr;
  uint *puVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Db_02;
  undefined in_stack_ffffffffffffffb8;
  
  ppbVar1 = (byte **)param_9[1];
  puVar2 = *(uint **)(*(long *)(param_10 + 0xa8) + 8);
  server_unzoom_window
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar2,param_10,
             param_11,param_12,param_13,param_14);
  puVar3 = (undefined1 *)*param_9;
  uVar6 = args_has(ppbVar1,0x6e);
  if ((int)uVar6 == 0) {
    puVar4 = (undefined1 *)*param_9;
    uVar7 = args_has(ppbVar1,0x70);
    __ptr = *(uint **)(puVar2 + 0x5c);
    if ((int)uVar7 == 0) {
      lVar8 = layout_dump(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          *(int **)(puVar2 + 0x58));
      *(long *)(puVar2 + 0x5c) = lVar8;
      if ((puVar3 != cmd_next_layout_entry) && (puVar4 != cmd_previous_layout_entry)) {
        uVar9 = args_has(ppbVar1,0x6f);
        uVar6 = extraout_RDX;
        uVar11 = extraout_XMM0_Da_00;
        uVar12 = extraout_XMM0_Db;
        if ((int)uVar9 == 0) {
          if (*(int *)(ppbVar1 + 1) == 0) {
            uVar5 = puVar2[0x56];
            if (uVar5 == 0xffffffff) goto LAB_0013241e;
          }
          else {
            uVar5 = layout_set_lookup(*(char **)ppbVar1[2]);
            uVar6 = extraout_RDX_01;
            uVar11 = extraout_XMM0_Da_03;
            uVar12 = extraout_XMM0_Db_01;
            if (uVar5 == 0xffffffff) goto LAB_001324b0;
          }
          layout_set_select((long)puVar2,uVar5);
        }
        else {
LAB_001324b0:
          if (*(int *)(ppbVar1 + 1) == 0) {
LAB_0013241e:
            uVar9 = args_has(ppbVar1,0x6f);
            uVar6 = extraout_RDX_00;
            puVar10 = __ptr;
            uVar11 = extraout_XMM0_Da_01;
            uVar12 = extraout_XMM0_Db_00;
            if ((int)uVar9 == 0) goto LAB_00132510;
          }
          else {
            puVar10 = *(uint **)ppbVar1[2];
          }
          if (puVar10 == (uint *)0x0) {
LAB_00132510:
            free(__ptr);
            return uVar7 & 0xffffffff;
          }
          uVar7 = layout_parse(CONCAT44(uVar12,uVar11),param_2,param_3,param_4,param_5,param_6,
                               param_7,param_8,puVar2,puVar10,uVar6,param_12,param_13,param_14);
          if ((int)uVar7 == -1) {
            cmdq_error(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_04),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_10,"can\'t set layout: %s",puVar10,
                       param_12,param_13,param_14,in_stack_ffffffffffffffb8);
            free(*(void **)(puVar2 + 0x5c));
            *(uint **)(puVar2 + 0x5c) = __ptr;
            return uVar7 & 0xffffffff;
          }
        }
        goto LAB_0013246f;
      }
    }
    else {
      lVar8 = layout_dump(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          *(int **)(puVar2 + 0x58));
      *(long *)(puVar2 + 0x5c) = lVar8;
    }
    if (puVar3 != cmd_next_layout_entry) {
      layout_set_previous((long)puVar2);
      goto LAB_0013246f;
    }
  }
  else {
    args_has(ppbVar1,0x70);
    __ptr = *(uint **)(puVar2 + 0x5c);
    lVar8 = layout_dump(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(int **)(puVar2 + 0x58));
    *(long *)(puVar2 + 0x5c) = lVar8;
  }
  layout_set_next((long)puVar2);
LAB_0013246f:
  free(__ptr);
  server_redraw_window((long)puVar2);
  return 0;
}



ulong cmd_select_pane_exec
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long *param_9,long param_10,undefined8 param_11,ulong param_12,ulong param_13,
                size_t param_14)

{
  uint *puVar1;
  byte **ppbVar2;
  bool bVar3;
  ulong uVar4;
  uint *puVar5;
  undefined8 uVar6;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  byte *pbVar7;
  char *pcVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 uVar9;
  ulong uVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  long in_stack_ffffffffffffffb8;
  long lVar12;
  long lVar13;
  
  lVar13 = *(long *)(param_10 + 0xa8);
  puVar1 = *(uint **)(lVar13 + 8);
  puVar5 = puVar1;
  if ((undefined1 *)*param_9 != cmd_last_pane_entry) {
    lVar12 = *(long *)(param_10 + 0xa0);
    ppbVar2 = (byte **)param_9[1];
    in_stack_ffffffffffffffb8 = *(long *)(param_10 + 0xb8);
    uVar4 = args_has(ppbVar2,0x6c);
    param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    if ((int)uVar4 == 0) {
      uVar6 = args_has(ppbVar2,0x6d);
      if (((int)uVar6 != 0) || (uVar6 = args_has(ppbVar2,0x4d), (int)uVar6 != 0)) {
        uVar6 = args_has(ppbVar2,0x6d);
        if (((int)uVar6 != 0) &&
           (bVar3 = window_pane_visible(in_stack_ffffffffffffffb8),
           (int)CONCAT71(extraout_var,bVar3) == 0)) {
          return 0;
        }
        uVar6 = marked_pane._48_8_;
        uVar9 = args_has(ppbVar2,0x4d);
        if (((int)uVar9 == 0) &&
           (bVar3 = server_is_marked(lVar12,lVar13,in_stack_ffffffffffffffb8),
           (int)CONCAT71(extraout_var_00,bVar3) == 0)) {
          server_set_marked(lVar12,lVar13,in_stack_ffffffffffffffb8);
        }
        else {
          server_clear_marked();
        }
        uVar9 = marked_pane._48_8_;
        if (uVar6 != 0) {
          server_redraw_window_borders(*(long *)(uVar6 + 8));
          server_status_window(*(long *)(uVar6 + 8));
        }
        if (uVar9 == 0) {
          return 0;
        }
        server_redraw_window_borders(*(long *)(uVar9 + 8));
        server_status_window(*(long *)(uVar9 + 8));
        return uVar4 & 0xffffffff;
      }
      uVar6 = args_has((byte **)param_9[1],0x50);
      if ((int)uVar6 != 0) {
LAB_001327f3:
        uVar6 = args_has(ppbVar2,0x50);
        if ((int)uVar6 != 0) {
          pbVar7 = (byte *)args_get(ppbVar2,0x50);
          uVar4 = style_parse(grid_default_cell,(undefined4 *)(in_stack_ffffffffffffffb8 + 0x110),
                              pbVar7);
          if ((int)uVar4 == -1) {
            cmdq_error(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_03),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_10,"bad style: %s",pbVar7,param_12,
                       param_13,param_14,(char)in_stack_ffffffffffffffb8);
            return uVar4 & 0xffffffff;
          }
          *(uint *)(in_stack_ffffffffffffffb8 + 0x30) =
               *(uint *)(in_stack_ffffffffffffffb8 + 0x30) | 1;
        }
        uVar6 = args_has((byte **)param_9[1],0x67);
        if ((int)uVar6 == 0) {
          return 0;
        }
        pcVar8 = style_tostring(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,(byte *)(in_stack_ffffffffffffffb8 + 0x110));
        cmdq_print(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_05),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"%s",pcVar8,param_12,param_13,param_14,
                   (char)in_stack_ffffffffffffffb8);
        return 0;
      }
      uVar4 = args_has((byte **)param_9[1],0x67);
      if ((int)uVar4 != 0) goto LAB_001327f3;
      uVar9 = 0x4c;
      uVar6 = args_has((byte **)param_9[1],0x4c);
      if ((int)uVar6 == 0) {
        uVar9 = 0x52;
        uVar6 = args_has((byte **)param_9[1],0x52);
        if ((int)uVar6 == 0) {
          uVar9 = 0x55;
          uVar6 = args_has((byte **)param_9[1],0x55);
          if ((int)uVar6 == 0) {
            uVar9 = 0x44;
            uVar6 = args_has((byte **)param_9[1],0x44);
            if ((int)uVar6 != 0) {
              uVar11 = server_unzoom_window
                                 (CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_09),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,
                                  *(uint **)(in_stack_ffffffffffffffb8 + 8),uVar9,extraout_RDX_07,
                                  param_12,param_13,param_14);
              in_stack_ffffffffffffffb8 =
                   window_pane_find_down
                             (uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              in_stack_ffffffffffffffb8);
            }
          }
          else {
            uVar11 = server_unzoom_window
                               (CONCAT44(extraout_XMM0_Db_07,extraout_XMM0_Da_08),param_2,param_3,
                                param_4,param_5,param_6,param_7,param_8,
                                *(uint **)(in_stack_ffffffffffffffb8 + 8),uVar9,extraout_RDX_06,
                                param_12,param_13,param_14);
            in_stack_ffffffffffffffb8 =
                 window_pane_find_up(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     in_stack_ffffffffffffffb8);
          }
        }
        else {
          uVar11 = server_unzoom_window
                             (CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_07),param_2,param_3,
                              param_4,param_5,param_6,param_7,param_8,
                              *(uint **)(in_stack_ffffffffffffffb8 + 8),uVar9,extraout_RDX_05,
                              param_12,param_13,param_14);
          in_stack_ffffffffffffffb8 =
               window_pane_find_right
                         (uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          in_stack_ffffffffffffffb8);
        }
      }
      else {
        uVar11 = server_unzoom_window
                           (CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_06),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,
                            *(uint **)(in_stack_ffffffffffffffb8 + 8),uVar9,extraout_RDX_04,param_12
                            ,param_13,param_14);
        in_stack_ffffffffffffffb8 =
             window_pane_find_left
                       (uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        in_stack_ffffffffffffffb8);
      }
      if (in_stack_ffffffffffffffb8 == 0) {
        return 0;
      }
      lVar13 = in_stack_ffffffffffffffb8;
      uVar6 = args_has((byte **)param_9[1],0x65);
      if ((int)uVar6 != 0) {
        *(uint *)(in_stack_ffffffffffffffb8 + 0x30) =
             *(uint *)(in_stack_ffffffffffffffb8 + 0x30) & 0xffffffdf;
        return uVar4 & 0xffffffff;
      }
      uVar6 = 100;
      uVar4 = args_has((byte **)param_9[1],100);
      uVar10 = uVar4 & 0xffffffff;
      if ((int)uVar4 != 0) {
        *(uint *)(lVar13 + 0x30) = *(uint *)(lVar13 + 0x30) | 0x20;
        return 0;
      }
      if (*(long *)(puVar1 + 0x4e) == lVar13) {
        return 0;
      }
      lVar12 = lVar13;
      server_unzoom_window
                (CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,*(uint **)(lVar13 + 8),uVar6,extraout_RDX_02,param_12,
                 param_13,param_14);
      bVar3 = window_pane_visible(lVar13);
      if ((int)CONCAT71(extraout_var_01,bVar3) == 0) {
        cmdq_error(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"pane not visible",extraout_RDX_03,param_12,
                   param_13,param_14,(char)lVar12);
        return 0xffffffff;
      }
      window_redraw_active_switch
                (CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,(long)puVar1,lVar12,extraout_RDX_03,param_12,param_13,
                 param_14);
      uVar6 = window_set_active_pane((long)puVar1,lVar12);
      if ((int)uVar6 == 0) {
        return 0;
      }
      goto LAB_001327b0;
    }
    puVar5 = *(uint **)(lVar13 + 8);
    param_11 = extraout_RDX;
  }
  if (*(long *)(puVar5 + 0x50) == 0) {
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "no last pane",param_11,param_12,param_13,param_14,(char)in_stack_ffffffffffffffb8);
    return 0xffffffff;
  }
  uVar4 = args_has((byte **)param_9[1],0x65);
  uVar10 = uVar4 & 0xffffffff;
  if ((int)uVar4 != 0) {
    *(uint *)(*(long *)(puVar1 + 0x50) + 0x30) =
         *(uint *)(*(long *)(puVar1 + 0x50) + 0x30) & 0xffffffdf;
    return 0;
  }
  uVar9 = 100;
  uVar6 = args_has((byte **)param_9[1],100);
  if ((int)uVar6 != 0) {
    *(uint *)(*(long *)(puVar1 + 0x50) + 0x30) = *(uint *)(*(long *)(puVar1 + 0x50) + 0x30) | 0x20;
    return uVar10;
  }
  uVar6 = server_unzoom_window
                    (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,puVar1,uVar9,extraout_RDX_00,param_12,param_13,
                     param_14);
  window_redraw_active_switch
            (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)puVar1,
             *(long *)(puVar1 + 0x50),extraout_RDX_01,param_12,param_13,param_14);
  uVar6 = window_set_active_pane((long)puVar1,*(long *)(puVar1 + 0x50));
  if ((int)uVar6 == 0) {
    return 0;
  }
LAB_001327b0:
  server_status_window((long)puVar1);
  server_redraw_window_borders((long)puVar1);
  return uVar10;
}



undefined8
cmd_select_window_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9,
          long param_10,undefined8 param_11,undefined1 *param_12,uint *param_13,undefined8 param_14)

{
  undefined1 *puVar1;
  uint *puVar2;
  long lVar3;
  undefined8 uVar4;
  ulong uVar5;
  undefined8 uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  int iVar7;
  ulong uVar8;
  undefined1 *puVar9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Db_06;
  undefined in_stack_ffffffffffffffb8;
  uint local_3c;
  
  puVar1 = (undefined1 *)*param_9;
  puVar2 = *(uint **)(param_10 + 0xa8);
  lVar3 = *(long *)(param_10 + 0xa0);
  uVar4 = args_has((byte **)param_9[1],0x6e);
  if ((int)uVar4 == 0) {
    puVar9 = (undefined1 *)*param_9;
    local_3c = (uint)(puVar1 == cmd_next_window_entry);
    uVar4 = args_has((byte **)param_9[1],0x70);
    if ((int)uVar4 == 0) {
LAB_00132aa1:
      puVar1 = (undefined1 *)*param_9;
      uVar5 = args_has((byte **)param_9[1],0x6c);
      param_12 = cmd_previous_window_entry;
      param_13 = (uint *)(uVar5 & 0xffffffff);
      if (((puVar1 == cmd_last_window_entry || puVar9 == cmd_previous_window_entry) | local_3c |
          (uint)uVar5) == 0) {
        uVar8 = 0x54;
        uVar4 = args_has((byte **)param_9[1],0x54);
        if (((int)uVar4 == 0) ||
           (uVar4 = extraout_RDX_01, uVar10 = extraout_XMM0_Da_01, uVar11 = extraout_XMM0_Db_01,
           *(uint **)(lVar3 + 0xe0) != puVar2)) {
          uVar6 = session_select(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7
                                 ,param_8,lVar3,(ulong)*puVar2,extraout_RDX_01,param_12,param_13,
                                 param_14);
          uVar4 = CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02);
          if ((int)uVar6 != 0) goto LAB_00132b0a;
        }
        else {
LAB_00132b48:
          uVar4 = session_last(CONCAT44(uVar11,uVar10),param_2,param_3,param_4,param_5,param_6,
                               param_7,param_8,lVar3,uVar8,uVar4,param_12,param_13,param_14);
          if ((int)uVar4 != 0) {
            cmdq_error(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_10,"no last window",extraout_RDX_03,
                       (ulong)param_12,(long)param_13,param_14,in_stack_ffffffffffffffb8);
            return 0xffffffff;
          }
        }
        goto LAB_00132a72;
      }
      uVar5 = args_has((byte **)param_9[1],0x61);
      param_12 = cmd_previous_window_entry;
      uVar8 = uVar5 & 0xffffffff;
      iVar7 = (int)uVar5;
      uVar4 = extraout_RDX_02;
      uVar10 = extraout_XMM0_Da_03;
      uVar11 = extraout_XMM0_Db_03;
      if (local_3c != 0) goto LAB_00132b8e;
      if (puVar9 != cmd_previous_window_entry) goto LAB_00132b48;
    }
    else {
      args_has((byte **)param_9[1],0x6c);
      uVar4 = args_has((byte **)param_9[1],0x61);
      iVar7 = (int)uVar4;
      uVar4 = extraout_RDX;
      uVar10 = extraout_XMM0_Da;
      uVar11 = extraout_XMM0_Db;
      if (puVar1 == cmd_next_window_entry) goto LAB_00132b8e;
    }
    uVar4 = session_previous(CONCAT44(uVar11,uVar10),param_2,param_3,param_4,param_5,param_6,param_7
                             ,param_8,lVar3,iVar7,uVar4,param_12,param_13,param_14);
    if ((int)uVar4 != 0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"no previous window",extraout_RDX_00,
                 (ulong)param_12,(long)param_13,param_14,in_stack_ffffffffffffffb8);
      return 0xffffffff;
    }
  }
  else {
    puVar9 = (undefined1 *)*param_9;
    uVar4 = args_has((byte **)param_9[1],0x70);
    if ((int)uVar4 == 0) {
      local_3c = 1;
      goto LAB_00132aa1;
    }
    args_has((byte **)param_9[1],0x6c);
    uVar4 = args_has((byte **)param_9[1],0x61);
    iVar7 = (int)uVar4;
    uVar4 = extraout_RDX_04;
    uVar10 = extraout_XMM0_Da_05;
    uVar11 = extraout_XMM0_Db_05;
LAB_00132b8e:
    uVar4 = session_next(CONCAT44(uVar11,uVar10),param_2,param_3,param_4,param_5,param_6,param_7,
                         param_8,lVar3,iVar7,uVar4,param_12,param_13,param_14);
    if ((int)uVar4 != 0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_06),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"no next window",extraout_RDX_05,(ulong)param_12,
                 (long)param_13,param_14,in_stack_ffffffffffffffb8);
      return 0xffffffff;
    }
  }
LAB_00132a72:
  uVar4 = server_redraw_session(lVar3);
LAB_00132b0a:
  recalculate_sizes(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  return 0;
}



ulong cmd_send_keys_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long *param_9,long param_10,undefined8 param_11,ulong param_12,
                        long param_13,undefined8 param_14)

{
  int *piVar1;
  byte bVar2;
  byte **ppbVar3;
  long lVar4;
  ulong uVar5;
  undefined8 uVar6;
  ulong uVar7;
  uint *puVar8;
  char *pcVar9;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long lVar10;
  byte *pbVar11;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  int *piVar13;
  
  ppbVar3 = (byte **)param_9[1];
  puVar8 = *(uint **)(param_10 + 0xb8);
  lVar4 = *(long *)(in_FS_OFFSET + 0x28);
  piVar13 = *(int **)(param_10 + 0xa0);
  lVar10 = *(long *)(param_10 + 0x28);
  uVar5 = args_has(ppbVar3,0x4d);
  if ((int)uVar5 == 0) {
    uVar5 = uVar5 & 0xffffffff;
    if ((undefined1 *)*param_9 == cmd_send_prefix_entry) {
      uVar6 = args_has(ppbVar3,0x32);
      if ((int)uVar6 == 0) {
        pcVar9 = options_get_number(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,
                                    *(char ***)(piVar13 + 0x42),"prefix",extraout_RDX_01,param_12,
                                    param_13,param_14);
        uVar12 = extraout_XMM0_Da_05;
      }
      else {
        pcVar9 = options_get_number(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,
                                    *(char ***)(piVar13 + 0x42),"prefix2",extraout_RDX_01,param_12,
                                    param_13,param_14);
        uVar12 = extraout_XMM0_Da_04;
      }
      window_pane_key(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar8,0,
                      piVar13,(ulong)pcVar9,0,param_14);
    }
    else {
      uVar6 = args_has(ppbVar3,0x52);
      if ((int)uVar6 != 0) {
        input_reset(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                    param_6,param_7,param_8,(ulong)puVar8,1,extraout_RDX,param_12,param_13,param_14)
        ;
      }
      lVar10 = 0;
      if (0 < *(int *)(ppbVar3 + 1)) {
        do {
          while( true ) {
            uVar6 = args_has(ppbVar3,0x6c);
            uVar12 = extraout_XMM0_Da_00;
            if (((int)uVar6 == 0) &&
               (uVar7 = key_string_lookup_string
                                  (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3
                                   ,param_4,param_5,param_6,param_7,param_8,
                                   *(byte **)(ppbVar3[2] + lVar10 * 8)),
               uVar12 = extraout_XMM0_Da_01, (uVar7 & 0xfffffffeffffffff) != 0xfffe00000000)) break;
            pbVar11 = *(byte **)(ppbVar3[2] + lVar10 * 8);
            bVar2 = *pbVar11;
            while (bVar2 != 0) {
              pbVar11 = pbVar11 + 1;
              uVar12 = window_pane_key(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,puVar8,0,piVar13,(ulong)bVar2,0,param_14);
              bVar2 = *pbVar11;
            }
            lVar10 = lVar10 + 1;
            if (*(int *)(ppbVar3 + 1) <= (int)lVar10) goto LAB_00132cb7;
          }
          lVar10 = lVar10 + 1;
          window_pane_key(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,puVar8,0,piVar13,uVar7,0,param_14);
        } while ((int)lVar10 < *(int *)(ppbVar3 + 1));
      }
    }
  }
  else {
    piVar1 = (int *)(lVar10 + 8);
    puVar8 = (uint *)cmd_mouse_pane(piVar1,(int **)&stack0xffffffffffffffb8,(long *)0x0);
    if (puVar8 == (uint *)0x0) {
      uVar5 = 0xffffffff;
      cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"no mouse target",extraout_RDX_00,param_12,
                 param_13,param_14,(char)piVar13);
    }
    else {
      uVar5 = 0;
      window_pane_key(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      puVar8,0,piVar13,*(ulong *)(lVar10 + 0x10),(long)piVar1,param_14);
    }
  }
LAB_00132cb7:
  if (lVar4 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
cmd_set_buffer_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long *param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
                   void **param_14)

{
  byte **ppbVar1;
  void **ppvVar2;
  undefined8 uVar3;
  char *pcVar4;
  undefined8 uVar5;
  size_t __n;
  void *pvVar6;
  void *__dest;
  long lVar7;
  undefined *puVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  void **ppvVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined in_stack_ffffffffffffffb8;
  undefined7 uStack_47;
  char *local_40;
  void *local_38;
  long local_30;
  
  puVar8 = &stack0xffffffffffffffb8;
  ppbVar1 = (byte **)param_9[1];
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_40 = (char *)args_get(ppbVar1,0x62);
  if (local_40 == (char *)0x0) {
    if ((undefined1 *)*param_9 == cmd_delete_buffer_entry) {
LAB_00132fd0:
      ppvVar2 = (void **)paste_get_top(&local_40);
      uVar5 = extraout_RDX_02;
      uVar10 = extraout_XMM0_Da_06;
      uVar11 = extraout_XMM0_Db_05;
      if (ppvVar2 != (void **)0x0) goto LAB_00132ed1;
    }
    else {
      uVar3 = args_has(ppbVar1,0x6e);
      ppvVar2 = (void **)0x0;
      uVar5 = extraout_RDX_00;
      uVar10 = extraout_XMM0_Da_02;
      uVar11 = extraout_XMM0_Db_02;
      if ((int)uVar3 == 0) goto LAB_00132f05;
LAB_00133068:
      lVar7 = paste_get_top(&local_40);
      uVar5 = extraout_RDX_05;
      uVar10 = extraout_XMM0_Da_09;
      uVar11 = extraout_XMM0_Db_06;
      if (lVar7 != 0) goto LAB_00132e7b;
    }
    cmdq_error(CONCAT44(uVar11,uVar10),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               param_10,"no buffer",uVar5,param_12,param_13,param_14,in_stack_ffffffffffffffb8);
    uVar5 = 0xffffffff;
  }
  else {
    ppvVar2 = (void **)paste_get_name(local_40);
    if ((undefined1 *)*param_9 != cmd_delete_buffer_entry) {
      uVar3 = args_has(ppbVar1,0x6e);
      uVar5 = extraout_RDX;
      uVar10 = extraout_XMM0_Da;
      uVar11 = extraout_XMM0_Db;
      if ((int)uVar3 == 0) {
LAB_00132f05:
        if (*(int *)(ppbVar1 + 1) != 1) {
          cmdq_error(CONCAT44(uVar11,uVar10),param_2,param_3,param_4,param_5,param_6,param_7,param_8
                     ,param_10,"no data specified",uVar5,param_12,param_13,param_14,
                     in_stack_ffffffffffffffb8);
          uVar5 = 0xffffffff;
          goto LAB_00132ea2;
        }
        __n = strlen(*(char **)ppbVar1[2]);
        if (__n != 0) {
          local_38 = (void *)0x0;
          uVar5 = args_has(ppbVar1,0x61);
          if ((ppvVar2 == (void **)0x0) || ((int)uVar5 == 0)) {
            pvVar6 = (void *)0x0;
            uVar5 = extraout_RDX_01;
            uVar10 = extraout_XMM0_Da_03;
          }
          else {
            ppvVar9 = &local_38;
            pvVar6 = (void *)paste_buffer_data(ppvVar2,ppvVar9);
            __dest = (void *)xmalloc(extraout_XMM0_Da_07,param_2,param_3,param_4,param_5,param_6,
                                     param_7,param_8,(size_t)local_38,ppvVar9,extraout_RDX_03,
                                     param_12,param_13,param_14);
            pvVar6 = memcpy(__dest,pvVar6,(size_t)local_38);
            uVar5 = extraout_RDX_04;
            uVar10 = extraout_XMM0_Da_08;
          }
          pvVar6 = (void *)xrealloc(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    pvVar6,(long)local_38 + __n,uVar5,param_12,param_13,param_14);
          memcpy((void *)((long)local_38 + (long)pvVar6),*(void **)ppbVar1[2],__n);
          local_38 = (void *)(__n + (long)local_38);
          uVar5 = paste_set(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,pvVar6,local_38,local_40,
                            (undefined8 *)&stack0xffffffffffffffb8,param_13,param_14);
          if ((int)uVar5 != 0) {
            cmdq_error(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_05),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_10,"%s",
                       CONCAT71(uStack_47,in_stack_ffffffffffffffb8),(ulong)puVar8,param_13,param_14
                       ,in_stack_ffffffffffffffb8);
            free(pvVar6);
            free((void *)CONCAT71(uStack_47,in_stack_ffffffffffffffb8));
            uVar5 = 0xffffffff;
            goto LAB_00132ea2;
          }
        }
      }
      else {
        if (ppvVar2 == (void **)0x0) goto LAB_00133068;
LAB_00132e7b:
        pcVar4 = (char *)args_get(ppbVar1,0x6e);
        uVar5 = paste_rename(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                             param_4,param_5,param_6,param_7,param_8,local_40,pcVar4,
                             (long *)&stack0xffffffffffffffb8,param_12,param_13,param_14);
        if ((int)uVar5 != 0) {
          cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_10,"%s",
                     CONCAT71(uStack_47,in_stack_ffffffffffffffb8),param_12,param_13,param_14,
                     in_stack_ffffffffffffffb8);
          free((void *)CONCAT71(uStack_47,in_stack_ffffffffffffffb8));
          uVar5 = 0xffffffff;
          goto LAB_00132ea2;
        }
      }
      uVar5 = 0;
      goto LAB_00132ea2;
    }
    if (ppvVar2 == (void **)0x0) goto LAB_00132fd0;
LAB_00132ed1:
    paste_free(ppvVar2);
    uVar5 = 0;
  }
LAB_00132ea2:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar5;
}



ulong cmd_set_environment_exec
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
                undefined8 param_14)

{
  byte **ppbVar1;
  char *__s;
  char *pcVar2;
  undefined8 uVar3;
  ulong uVar4;
  long lVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  char **ppcVar6;
  ulong uVar7;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined in_stack_ffffffffffffffc8;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  ppcVar6 = (char **)ppbVar1[2];
  __s = *ppcVar6;
  if (*__s == '\0') {
    uVar7 = 0xffffffff;
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "empty variable name",param_11,param_12,param_13,param_14,in_stack_ffffffffffffffc8);
  }
  else {
    pcVar2 = strchr(__s,0x3d);
    if (pcVar2 == (char *)0x0) {
      pcVar2 = (char *)0x0;
      if (1 < *(int *)(ppbVar1 + 1)) {
        pcVar2 = ppcVar6[1];
      }
      uVar3 = args_has(ppbVar1,0x67);
      ppcVar6 = global_environ;
      if ((int)uVar3 == 0) {
        if (*(long *)(param_10 + 0xa0) == 0) {
          lVar5 = args_get(ppbVar1,0x74);
          if (lVar5 != 0) {
            cmdq_error(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_10,"no such session: %s",lVar5,param_12,param_13,param_14,
                       in_stack_ffffffffffffffc8);
            return 0xffffffff;
          }
          cmdq_error(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_10,"no current session",0,param_12,param_13,param_14,
                     in_stack_ffffffffffffffc8);
          return 0xffffffff;
        }
        ppcVar6 = *(char ***)(*(long *)(param_10 + 0xa0) + 0x120);
      }
      uVar3 = args_has(*(byte ***)(param_9 + 8),0x75);
      if ((int)uVar3 == 0) {
        uVar4 = args_has(*(byte ***)(param_9 + 8),0x72);
        uVar7 = uVar4 & 0xffffffff;
        if ((int)uVar4 == 0) {
          if (pcVar2 == (char *)0x0) {
            uVar7 = 0xffffffff;
            cmdq_error(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_10,"no value specified",extraout_RDX_01,param_12,param_13,param_14,
                       in_stack_ffffffffffffffc8);
          }
          else {
            environ_set(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        ppcVar6,__s,"%s",pcVar2,param_13,param_14,in_stack_ffffffffffffffc8);
          }
        }
        else if (pcVar2 == (char *)0x0) {
          uVar7 = 0;
          environ_clear(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        ppcVar6,__s,extraout_RDX_01,param_12,param_13,param_14);
        }
        else {
          uVar7 = 0xffffffff;
          cmdq_error(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_10,"can\'t specify a value with -r",extraout_RDX_01,param_12,param_13,
                     param_14,in_stack_ffffffffffffffc8);
        }
      }
      else if (pcVar2 == (char *)0x0) {
        uVar7 = 0;
        environ_unset(ppcVar6,__s);
      }
      else {
        uVar7 = 0xffffffff;
        cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"can\'t specify a value with -u",extraout_RDX_00,param_12,param_13,
                   param_14,in_stack_ffffffffffffffc8);
      }
    }
    else {
      uVar7 = 0xffffffff;
      cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                 "variable name contains =",extraout_RDX,param_12,param_13,param_14,
                 in_stack_ffffffffffffffc8);
    }
  }
  return uVar7;
}



undefined4
cmd_set_hook_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long *param_9,long param_10,undefined8 param_11,char *param_12,long param_13,
                 size_t param_14)

{
  byte **ppbVar1;
  int iVar2;
  undefined8 uVar3;
  undefined8 *puVar4;
  char *pcVar5;
  ulong uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  char *pcVar7;
  void **ppvVar8;
  char **ppcVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Db_03;
  undefined in_stack_ffffffffffffffb8;
  int *local_40;
  void *local_38;
  long local_30;
  
  pcVar7 = (char *)0x67;
  ppbVar1 = (byte **)param_9[1];
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar3 = args_has(ppbVar1,0x67);
  ppcVar9 = global_hooks;
  if ((int)uVar3 == 0) {
    ppcVar9 = *(char ***)(*(long *)(param_10 + 0xa0) + 0x100);
  }
  if ((undefined1 *)*param_9 == cmd_show_hooks_entry) {
    puVar4 = (undefined8 *)hooks_first((long *)ppcVar9);
    uVar3 = extraout_RDX_00;
    uVar10 = extraout_XMM0_Da_03;
    while (puVar4 != (undefined8 *)0x0) {
      pcVar5 = cmd_list_print(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              puVar4[2],pcVar7,uVar3,param_12,param_13,param_14);
      pcVar7 = "%s -> %s";
      param_12 = pcVar5;
      cmdq_print(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"%s -> %s",*puVar4,pcVar5,param_13,param_14,
                 in_stack_ffffffffffffffb8);
      free(pcVar5);
      puVar4 = (undefined8 *)hooks_next((long)puVar4);
      uVar3 = extraout_RDX_01;
      uVar10 = extraout_XMM0_Da_05;
    }
LAB_001333b4:
    uVar10 = 0;
  }
  else {
    pcVar7 = *(char **)ppbVar1[2];
    if (*pcVar7 == '\0') {
      uVar10 = 0xffffffff;
      cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,param_10,"invalid hook name",extraout_RDX,(ulong)param_12,param_13
                 ,param_14,in_stack_ffffffffffffffb8);
      goto LAB_00133379;
    }
    if (*(int *)(ppbVar1 + 1) < 2) {
      uVar3 = args_has(ppbVar1,0x75);
      uVar10 = extraout_XMM0_Da_02;
      uVar11 = extraout_XMM0_Db_02;
      if ((int)uVar3 != 0) goto LAB_001333a9;
    }
    else {
      pcVar5 = *(char **)((long)ppbVar1[2] + 8);
      uVar3 = args_has(ppbVar1,0x75);
      if ((int)uVar3 != 0) {
        if (pcVar5 != (char *)0x0) {
          cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_10,"command passed to unset hook: %s",
                     pcVar7,(ulong)param_12,param_13,param_14,in_stack_ffffffffffffffb8);
          uVar10 = 0xffffffff;
          goto LAB_00133379;
        }
LAB_001333a9:
        hooks_remove(ppcVar9,pcVar7);
        goto LAB_001333b4;
      }
      uVar10 = extraout_XMM0_Da_00;
      uVar11 = extraout_XMM0_Db_00;
      if (pcVar5 != (char *)0x0) {
        ppvVar8 = &local_38;
        uVar6 = 0;
        iVar2 = cmd_string_parse(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                                 param_4,param_5,param_6,param_7,param_8,pcVar5,&local_40,
                                 (char *)0x0,(byte *)0x0,(long *)ppvVar8,param_14);
        if (iVar2 == 0) {
          hooks_add(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,ppcVar9,pcVar7,local_40,uVar6,ppvVar8,param_14);
          cmd_list_free(local_40);
          uVar10 = 0;
        }
        else {
          uVar10 = 0xffffffff;
          if (local_38 != (void *)0x0) {
            cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_10,"%s",local_38,uVar6,(long)ppvVar8,
                       param_14,in_stack_ffffffffffffffb8);
            free(local_38);
          }
        }
        goto LAB_00133379;
      }
    }
    cmdq_error(CONCAT44(uVar11,uVar10),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               param_10,"no command to set hook: %s",pcVar7,(ulong)param_12,param_13,param_14,
               in_stack_ffffffffffffffb8);
    uVar10 = 0xffffffff;
  }
LAB_00133379:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar10;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong cmd_set_option_user(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,long *param_9,long param_10,char *param_11,
                         ulong param_12,long param_13,undefined8 param_14)

{
  byte **ppbVar1;
  long lVar2;
  undefined8 uVar3;
  ulong uVar4;
  long lVar5;
  ulong uVar6;
  undefined8 extraout_RDX;
  char **ppcVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined in_stack_ffffffffffffffb8;
  
  ppbVar1 = (byte **)param_9[1];
  lVar5 = *(long *)(param_10 + 0xa0);
  lVar2 = *(long *)(param_10 + 0xa8);
  uVar6 = param_12;
  uVar3 = args_has(ppbVar1,0x73);
  ppcVar7 = global_options;
  if ((int)uVar3 == 0) {
    uVar3 = args_has((byte **)param_9[1],0x77);
    if (((int)uVar3 == 0) && ((undefined1 *)*param_9 != cmd_set_window_option_entry)) {
      uVar3 = args_has((byte **)param_9[1],0x67);
      ppcVar7 = global_s_options;
      if ((int)uVar3 == 0) {
        ppcVar7 = *(char ***)(lVar5 + 0x108);
      }
    }
    else {
      uVar3 = args_has((byte **)param_9[1],0x67);
      ppcVar7 = global_w_options;
      if ((int)uVar3 == 0) {
        ppcVar7 = *(char ***)(*(long *)(lVar2 + 8) + 0x188);
      }
    }
  }
  uVar4 = args_has(ppbVar1,0x75);
  if ((int)uVar4 == 0) {
    if (param_12 == 0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,param_10,"empty value",extraout_RDX,uVar6,param_13,param_14,
                 in_stack_ffffffffffffffb8);
      return 0xffffffff;
    }
    uVar3 = args_has(ppbVar1,0x6f);
    uVar8 = extraout_XMM0_Da_00;
    if (((int)uVar3 == 0) ||
       (lVar5 = options_find1(ppcVar7,param_11), uVar8 = extraout_XMM0_Da_01, lVar5 == 0)) {
      options_set_string(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppcVar7,
                         param_11,"%s",param_12,param_13,param_14,in_stack_ffffffffffffffb8);
      return uVar4 & 0xffffffff;
    }
    uVar3 = args_has(ppbVar1,0x71);
    if ((int)uVar3 == 0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"already set: %s",param_11,uVar6,param_13,param_14
                 ,in_stack_ffffffffffffffb8);
      return 0xffffffff;
    }
  }
  else {
    lVar5 = options_find1(ppcVar7,param_11);
    if (lVar5 == 0) {
      uVar3 = args_has(ppbVar1,0x71);
      if ((int)uVar3 == 0) {
        cmdq_error(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_04),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"unknown option: %s",param_11,uVar6,param_13,
                   param_14,in_stack_ffffffffffffffb8);
        return 0xffffffff;
      }
    }
    else {
      if (param_12 != 0) {
        cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"value passed to unset option: %s",param_11,
                   uVar6,param_13,param_14,in_stack_ffffffffffffffb8);
        return 0xffffffff;
      }
      options_remove(ppcVar7,param_11);
    }
  }
  return 0;
}



ulong cmd_set_option_unset
                (undefined8 param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,long param_10,char **param_11,char **param_12,long param_13)

{
  char *pcVar1;
  ulong uVar2;
  char **ppcVar3;
  byte **ppbVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffd8;
  
  ppbVar4 = *(byte ***)(param_9 + 8);
  if (param_13 == 0) {
    ppcVar3 = param_12;
    uVar2 = args_has(ppbVar4,0x67);
    pcVar1 = *param_11;
    if (((int)uVar2 != 0) || (global_options == param_12)) {
      if (*(int *)(param_11 + 1) == 0) {
        options_set_string(extraout_XMM0_Da,(int)param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_12,pcVar1,"%s",param_11[4],param_13,ppbVar4,
                           in_stack_ffffffffffffffd8);
        return 0;
      }
      if (*(int *)(param_11 + 1) != 7) {
        options_set_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),(int)param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_12,pcVar1,param_11[5],ppcVar3,
                           param_13,ppbVar4);
        return 0;
      }
      options_set_style(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                        param_6,param_7,param_8,param_12,pcVar1,(byte *)param_11[4],0,param_13,
                        ppbVar4);
      return 0;
    }
    options_remove(param_12,pcVar1);
    uVar2 = uVar2 & 0xffffffff;
  }
  else {
    cmdq_error(param_1,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "value passed to unset option: %s",*param_11,(ulong)param_12,param_13,ppbVar4,
               in_stack_ffffffffffffffd8);
    uVar2 = 0xffffffff;
  }
  return uVar2;
}



char ** cmd_set_option_string
                  (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,undefined8 param_10,char **param_11,char **param_12,char *param_13,
                  undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  char *pcVar3;
  char **ppcVar4;
  void *extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 uVar5;
  char *pcVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  void *in_stack_ffffffffffffffd8;
  
  uVar5 = 0x61;
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  ppcVar4 = param_12;
  pcVar6 = param_13;
  uVar2 = args_has(*(byte ***)(param_9 + 8),0x61);
  if ((int)uVar2 == 0) {
    uVar7 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                    param_6,param_7,param_8,param_13,uVar5,extraout_RDX,ppcVar4,pcVar6,param_14);
    in_stack_ffffffffffffffd8 = extraout_RAX;
  }
  else {
    pcVar3 = options_get_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,param_12,*param_11,extraout_RDX,
                                ppcVar4,pcVar6,param_14);
    uVar7 = xasprintf(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,(long *)&stack0xffffffffffffffd8,&DAT_0017fd51
                      ,pcVar3,param_13,pcVar6,param_14,(char)in_stack_ffffffffffffffd8);
  }
  ppcVar4 = options_set_string(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               param_12,*param_11,"%s",in_stack_ffffffffffffffd8,pcVar6,param_14,
                               (char)in_stack_ffffffffffffffd8);
  free(in_stack_ffffffffffffffd8);
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return ppcVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char ** cmd_set_option_number
                  (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,long param_10,char **param_11,char **param_12,char *param_13,
                  undefined8 param_14)

{
  long lVar1;
  long lVar2;
  char *pcVar3;
  char **ppcVar4;
  undefined *puVar5;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffffc8;
  undefined7 uStack_37;
  
  puVar5 = &stack0xffffffffffffffc8;
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar3 = (char *)strtonum(param_13,(ulong)*(uint *)(param_11 + 2),
                            (ulong)*(uint *)((long)param_11 + 0x14),
                            (char **)&stack0xffffffffffffffc8);
  lVar2 = CONCAT71(uStack_37,in_stack_ffffffffffffffc8);
  if (lVar2 == 0) {
    ppcVar4 = options_set_number(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                 param_8,param_12,*param_11,pcVar3,puVar5,0,param_14);
  }
  else {
    cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "value is %s: %s",lVar2,(ulong)param_13,lVar2,param_14,in_stack_ffffffffffffffc8);
    ppcVar4 = (char **)0x0;
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return ppcVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char ** cmd_set_option_key(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                          undefined4 param_4,undefined4 param_5,undefined4 param_6,
                          undefined4 param_7,undefined4 param_8,undefined8 param_9,long param_10,
                          char **param_11,char **param_12,byte *param_13,undefined8 param_14)

{
  char *pcVar1;
  char **ppcVar2;
  byte *pbVar3;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffffd8;
  
  ppcVar2 = param_12;
  pbVar3 = param_13;
  pcVar1 = (char *)key_string_lookup_string
                             (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              param_13);
  if (pcVar1 != (char *)0xfffe00000000) {
    ppcVar2 = options_set_number(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                 param_8,param_12,*param_11,pcVar1,ppcVar2,pbVar3,param_14);
    return ppcVar2;
  }
  cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "bad key: %s",param_13,(ulong)ppcVar2,(long)pbVar3,param_14,in_stack_ffffffffffffffd8);
  return (char **)0x0;
}



char ** cmd_set_option_colour
                  (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,long param_10,char **param_11,char **param_12,char *param_13,
                  undefined8 param_14)

{
  ulong uVar1;
  char **ppcVar2;
  char *pcVar3;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffffd8;
  
  ppcVar2 = param_12;
  pcVar3 = param_13;
  uVar1 = colour_fromstring(param_13);
  if ((int)uVar1 != -1) {
    ppcVar2 = options_set_number(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                 param_8,param_12,*param_11,(char *)(long)(int)uVar1,ppcVar2,pcVar3,
                                 param_14);
    return ppcVar2;
  }
  cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "bad colour: %s",param_13,(ulong)ppcVar2,(long)pcVar3,param_14,
             in_stack_ffffffffffffffd8);
  return (char **)0x0;
}



char ** cmd_set_option_attributes
                  (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,long param_10,char **param_11,char **param_12,char *param_13,
                  undefined8 param_14)

{
  uint uVar1;
  char **ppcVar2;
  char *pcVar3;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffffd8;
  
  ppcVar2 = param_12;
  pcVar3 = param_13;
  uVar1 = attributes_fromstring(param_13);
  if (uVar1 != 0xffffffff) {
    ppcVar2 = options_set_number(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                 param_8,param_12,*param_11,(char *)(long)(int)uVar1,ppcVar2,pcVar3,
                                 param_14);
    return ppcVar2;
  }
  cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "bad attributes: %s",param_13,(ulong)ppcVar2,(long)pcVar3,param_14,
             in_stack_ffffffffffffffd8);
  return (char **)0x0;
}



char ** cmd_set_option_flag(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                           undefined4 param_4,undefined4 param_5,undefined4 param_6,
                           undefined4 param_7,undefined4 param_8,undefined8 param_9,long param_10,
                           char **param_11,char **param_12,char *param_13,undefined8 param_14)

{
  char cVar1;
  int iVar2;
  char *pcVar3;
  char **ppcVar4;
  char *pcVar5;
  undefined unaff_BL;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  
  ppcVar4 = param_12;
  if ((param_13 == (char *)0x0) || (cVar1 = *param_13, cVar1 == '\0')) {
    pcVar3 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                param_12,*param_11,param_11,param_12,param_13,param_14);
    pcVar5 = (char *)(ulong)(pcVar3 == (char *)0x0);
    pcVar3 = param_13;
    param_1 = extraout_XMM0_Qa;
  }
  else {
    pcVar3 = param_13;
    if ((cVar1 != '1') || (param_13[1] != '\0')) {
      iVar2 = strcasecmp(param_13,"on");
      param_1 = extraout_XMM0_Qa_00;
      if (iVar2 != 0) {
        iVar2 = strcasecmp(param_13,"yes");
        param_1 = extraout_XMM0_Qa_01;
        if (iVar2 != 0) {
          if ((cVar1 != '0') || (param_13[1] != '\0')) {
            iVar2 = strcasecmp(param_13,"off");
            param_1 = extraout_XMM0_Qa_02;
            if (iVar2 != 0) {
              iVar2 = strcasecmp(param_13,"no");
              pcVar5 = (char *)0x0;
              param_1 = extraout_XMM0_Qa_03;
              if (iVar2 != 0) {
                cmdq_error(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_10,"bad value: %s",param_13,(ulong)ppcVar4,(long)pcVar3,
                           param_14,unaff_BL);
                return (char **)0x0;
              }
              goto LAB_00133ab5;
            }
          }
          pcVar5 = (char *)0x0;
          goto LAB_00133ab5;
        }
      }
    }
    pcVar5 = (char *)0x1;
  }
LAB_00133ab5:
  ppcVar4 = options_set_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               param_12,*param_11,pcVar5,ppcVar4,pcVar3,param_14);
  return ppcVar4;
}



char ** cmd_set_option_choice
                  (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,long param_10,char **param_11,char **param_12,char *param_13,
                  undefined8 param_14)

{
  char **ppcVar1;
  int iVar2;
  uint uVar3;
  size_t __n;
  char **ppcVar4;
  char *pcVar5;
  ulong uVar6;
  char *pcVar7;
  ulong uVar8;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar9;
  undefined8 extraout_XMM0_Qa_00;
  undefined in_stack_ffffffffffffffa8;
  
  ppcVar4 = param_12;
  if (param_13 == (char *)0x0) {
    pcVar5 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                param_12,*param_11,param_11,param_12,0,param_14);
    uVar3 = (uint)pcVar5;
    pcVar7 = param_13;
    uVar9 = extraout_XMM0_Qa_00;
    if ((int)uVar3 < 2) {
      uVar3 = (uint)(uVar3 == 0);
    }
LAB_00133c0c:
    ppcVar4 = options_set_number(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 param_12,*param_11,(char *)(long)(int)uVar3,ppcVar4,pcVar7,param_14
                                );
    return ppcVar4;
  }
  ppcVar1 = (char **)param_11[3];
  pcVar5 = *ppcVar1;
  pcVar7 = param_13;
  if (pcVar5 != (char *)0x0) {
    uVar8 = 0;
    uVar6 = 0xffffffff;
    __n = strlen(param_13);
    do {
      iVar2 = strncmp(pcVar5,param_13,__n);
      if (iVar2 == 0) {
        if ((int)uVar6 != -1) {
          cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_10,"ambiguous value: %s",param_13,(ulong)ppcVar4,(long)pcVar7,pcVar5,
                     in_stack_ffffffffffffffa8);
          return (char **)0x0;
        }
        uVar6 = uVar8 & 0xffffffff;
      }
      uVar3 = (uint)uVar6;
      uVar8 = uVar8 + 1;
      pcVar5 = ppcVar1[uVar8];
    } while (pcVar5 != (char *)0x0);
    param_14 = 0;
    pcVar5 = (char *)0x0;
    uVar9 = extraout_XMM0_Qa;
    param_1 = extraout_XMM0_Qa;
    if (uVar3 != 0xffffffff) goto LAB_00133c0c;
  }
  cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "unknown value: %s",param_13,(ulong)ppcVar4,(long)pcVar7,pcVar5,
             in_stack_ffffffffffffffa8);
  return (char **)0x0;
}



char ** cmd_set_option_style
                  (undefined8 param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,long param_10,char **param_11,char **param_12,byte *param_13,
                  undefined8 param_14)

{
  ulong uVar1;
  char **ppcVar2;
  undefined unaff_BL;
  byte *pbVar3;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined4 uVar4;
  
  pbVar3 = param_13;
  uVar1 = args_has(*(byte ***)(param_9 + 8),0x61);
  uVar4 = (undefined4)param_2;
  uVar1 = uVar1 & 0xffffffff;
  ppcVar2 = options_set_style(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,param_12,*param_11,param_13,uVar1,pbVar3,param_14);
  if (ppcVar2 == (char **)0x0) {
    cmdq_error(extraout_XMM0_Qa_00,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "bad style: %s",param_13,uVar1,(long)pbVar3,param_14,unaff_BL);
  }
  else {
    style_update_old(extraout_XMM0_Qa_00,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_12,*param_11,(byte *)(ppcVar2 + 4),uVar1,pbVar3,param_14);
  }
  return ppcVar2;
}



ulong cmd_set_option_set(undefined8 param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,long param_10,char **param_11,char **param_12,byte *param_13)

{
  ulong uVar1;
  char **ppcVar2;
  uint uVar3;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined4 uVar4;
  undefined1 in_stack_ffffffffffffffe8;
  
  uVar4 = (undefined4)param_2;
  uVar3 = *(int *)(param_11 + 1) - 5;
  if ((1 < uVar3) && (param_13 == (byte *)0x0)) {
    cmdq_error(param_1,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,param_10,"empty value",
               (ulong)uVar3,(ulong)param_12,0,param_10,in_stack_ffffffffffffffe8);
    uVar1 = FUN_00133d6b();
    return uVar1;
  }
  switch(*(int *)(param_11 + 1)) {
  case 0:
    ppcVar2 = cmd_set_option_string
                        (param_1,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,(char *)param_13,param_10);
    break;
  case 1:
    ppcVar2 = cmd_set_option_number
                        (param_1,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,(char *)param_13,param_10);
    break;
  case 2:
    ppcVar2 = cmd_set_option_key(param_1,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,
                                 param_9,param_10,param_11,param_12,param_13,param_10);
    break;
  case 3:
    ppcVar2 = cmd_set_option_colour
                        (param_1,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,(char *)param_13,param_10);
    if (ppcVar2 != (char **)0x0) {
      style_update_new(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_12,*ppcVar2,param_11[6],param_12,param_13,param_10);
      uVar1 = FUN_00133d6b();
      return uVar1;
    }
    return 0xffffffff;
  case 4:
    ppcVar2 = cmd_set_option_attributes
                        (param_1,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,(char *)param_13,param_10);
    if (ppcVar2 != (char **)0x0) {
      style_update_new(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_12,*ppcVar2,param_11[6],param_12,param_13,param_10);
      uVar1 = FUN_00133d6b();
      return uVar1;
    }
    return 0xffffffff;
  case 5:
    ppcVar2 = cmd_set_option_flag(param_1,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,
                                  param_9,param_10,param_11,param_12,(char *)param_13,param_10);
    break;
  case 6:
    ppcVar2 = cmd_set_option_choice
                        (param_1,uVar4,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,(char *)param_13,param_10);
    break;
  case 7:
    ppcVar2 = cmd_set_option_style
                        (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,param_13,param_10);
    break;
  default:
    uVar1 = FUN_00133d6b();
    return uVar1;
  }
  return (ulong)-(uint)(ppcVar2 == (char **)0x0);
}



void FUN_00133d6b(void)

{
  return;
}



int switchD_00133d4b::caseD_0
              (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              long param_9,undefined8 param_10,undefined8 param_11,char **param_12,char *param_13,
              undefined8 param_14)

{
  char **ppcVar1;
  char **unaff_R12;
  
  ppcVar1 = cmd_set_option_string
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       param_14,unaff_R12,param_12,param_13,param_14);
  return -(uint)(ppcVar1 == (char **)0x0);
}



ulong cmd_set_option_exec(undefined8 param_1,undefined8 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,long *param_9,long param_10,undefined8 param_11,
                         ulong param_12,long param_13,undefined8 param_14)

{
  uint *puVar1;
  byte **ppbVar2;
  int iVar3;
  undefined8 uVar4;
  ulong uVar5;
  byte *pbVar6;
  undefined8 uVar7;
  long lVar8;
  char *pcVar9;
  long lVar10;
  undefined *puVar11;
  char cVar12;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  byte *pbVar13;
  byte *pbVar14;
  byte *pbVar15;
  byte *pbVar16;
  byte *pbVar17;
  char **ppcVar18;
  long in_FS_OFFSET;
  bool bVar19;
  undefined uVar20;
  bool bVar21;
  undefined uVar22;
  byte bVar23;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 extraout_XMM0_Qa_05;
  undefined8 extraout_XMM0_Qa_06;
  undefined8 extraout_XMM0_Qa_07;
  undefined8 extraout_XMM0_Qa_08;
  undefined8 extraout_XMM0_Qa_09;
  undefined8 extraout_XMM0_Qa_10;
  undefined8 extraout_XMM0_Qa_11;
  undefined4 uVar24;
  undefined in_stack_ffffffffffffffa8;
  byte **local_48;
  long local_40;
  
  bVar23 = 0;
  ppbVar2 = (byte **)param_9[1];
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  ppcVar18 = (char **)ppbVar2[2];
  pcVar9 = *ppcVar18;
  if (*pcVar9 == '\0') {
    cmdq_error(param_1,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "invalid option",ppcVar18,param_12,param_13,param_14,in_stack_ffffffffffffffa8);
    uVar5 = 0xffffffff;
    goto LAB_00134050;
  }
  pbVar17 = (byte *)0x0;
  if (1 < *(int *)(ppbVar2 + 1)) {
    pbVar17 = (byte *)ppcVar18[1];
  }
  if (*pcVar9 == '@') {
    uVar5 = cmd_set_option_user(param_1,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                ,param_9,param_10,pcVar9,(ulong)pbVar17,param_13,param_14);
    goto LAB_00134050;
  }
  lVar10 = *(long *)(param_10 + 0xa8);
  local_48 = (byte **)0x0;
  lVar8 = *(long *)(param_10 + 0xa0);
  uVar4 = options_table_find(pcVar9,(long *)&local_48);
  uVar24 = (undefined4)param_2;
  if ((int)uVar4 == 0) {
    if (local_48 != (byte **)0x0) {
      iVar3 = *(int *)((long)local_48 + 0xc);
      ppcVar18 = global_options;
      if (iVar3 != 1) {
        if (iVar3 == 3) {
          uVar4 = args_has((byte **)param_9[1],0x67);
          uVar24 = (undefined4)param_2;
          ppcVar18 = global_w_options;
          if ((int)uVar4 == 0) {
            if (lVar10 == 0) {
              lVar10 = args_get(ppbVar2,0x74);
              if (lVar10 == 0) {
                cmdq_error(extraout_XMM0_Qa_11,uVar24,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_10,"no current window",0,param_12,param_13,param_14,
                           in_stack_ffffffffffffffa8);
                uVar5 = 0xffffffff;
              }
              else {
                cmdq_error(extraout_XMM0_Qa_11,uVar24,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_10,"no such window: %s",lVar10,param_12,param_13,param_14,
                           in_stack_ffffffffffffffa8);
                uVar5 = 0xffffffff;
              }
              goto LAB_00134050;
            }
            ppcVar18 = *(char ***)(*(long *)(lVar10 + 8) + 0x188);
          }
        }
        else {
          if (iVar3 != 2) {
            cmdq_error(extraout_XMM0_Qa,uVar24,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_10,"unknown table",extraout_RDX,param_12,param_13,param_14,
                       in_stack_ffffffffffffffa8);
            uVar5 = 0xffffffff;
            goto LAB_00134050;
          }
          uVar4 = args_has((byte **)param_9[1],0x67);
          uVar24 = (undefined4)param_2;
          ppcVar18 = global_s_options;
          if ((int)uVar4 == 0) {
            if (lVar8 == 0) {
              lVar10 = args_get(ppbVar2,0x74);
              if (lVar10 == 0) {
                cmdq_error(extraout_XMM0_Qa_10,uVar24,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_10,"no current session",0,param_12,param_13,param_14,
                           in_stack_ffffffffffffffa8);
                uVar5 = 0xffffffff;
              }
              else {
                cmdq_error(extraout_XMM0_Qa_10,uVar24,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_10,"no such session: %s",lVar10,param_12,param_13,param_14,
                           in_stack_ffffffffffffffa8);
                uVar5 = 0xffffffff;
              }
              goto LAB_00134050;
            }
            ppcVar18 = *(char ***)(lVar8 + 0x108);
          }
        }
      }
      uVar4 = args_has(ppbVar2,0x75);
      uVar24 = (undefined4)param_2;
      if ((int)uVar4 == 0) {
        uVar7 = args_has(ppbVar2,0x6f);
        uVar4 = extraout_XMM0_Qa_04;
        if ((int)uVar7 == 0) {
LAB_00134158:
          uVar24 = (undefined4)param_2;
          uVar5 = cmd_set_option_set(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     (long)param_9,param_10,(char **)local_48,ppcVar18,pbVar17);
          iVar3 = (int)uVar5;
          uVar7 = extraout_RDX_02;
          uVar4 = extraout_XMM0_Qa_07;
          goto joined_r0x00134170;
        }
        lVar10 = options_find1(ppcVar18,pcVar9);
        uVar24 = (undefined4)param_2;
        uVar4 = extraout_XMM0_Qa_05;
        if (lVar10 == 0) goto LAB_00134158;
        uVar4 = args_has(ppbVar2,0x71);
        if ((int)uVar4 != 0) goto LAB_0013404e;
        cmdq_error(extraout_XMM0_Qa_06,uVar24,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"already set: %s",pcVar9,param_12,param_13,param_14,
                   in_stack_ffffffffffffffa8);
      }
      else {
        uVar5 = cmd_set_option_unset
                          (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,(long)param_9,param_10,(char **)local_48,ppcVar18,(long)pbVar17);
        iVar3 = (int)uVar5;
        uVar7 = extraout_RDX_00;
        uVar4 = extraout_XMM0_Qa_01;
joined_r0x00134170:
        bVar21 = iVar3 == 0;
        if (bVar21) {
          bVar19 = false;
          lVar10 = 0x11;
          pbVar6 = *local_48;
          pbVar14 = pbVar6;
          pbVar16 = (byte *)"automatic-rename";
          do {
            if (lVar10 == 0) break;
            lVar10 = lVar10 + -1;
            bVar19 = *pbVar14 < *pbVar16;
            bVar21 = *pbVar14 == *pbVar16;
            pbVar14 = pbVar14 + (ulong)bVar23 * -2 + 1;
            pbVar16 = pbVar16 + (ulong)bVar23 * -2 + 1;
          } while (bVar21);
          cVar12 = (!bVar19 && !bVar21) - bVar19;
          uVar7 = CONCAT71((int7)((ulong)uVar7 >> 8),cVar12);
          bVar21 = cVar12 == '\0';
          if (bVar21) {
            lVar8 = windows_RB_MINMAX(&windows,-1);
            uVar7 = extraout_RDX_03;
            uVar4 = extraout_XMM0_Qa_08;
            while (bVar21 = lVar8 == 0, !bVar21) {
              pcVar9 = options_get_number(uVar4,uVar24,param_3,param_4,param_5,param_6,param_7,
                                          param_8,*(char ***)(lVar8 + 0x188),"automatic-rename",
                                          uVar7,lVar10,pbVar17,param_14);
              if (pcVar9 != (char *)0x0) {
                puVar1 = (uint *)(*(long *)(lVar8 + 0x138) + 0x30);
                *puVar1 = *puVar1 | 0x40;
              }
              lVar8 = windows_RB_NEXT(lVar8);
              uVar7 = extraout_RDX_04;
              uVar4 = extraout_XMM0_Qa_09;
            }
            pbVar6 = *local_48;
          }
          bVar19 = false;
          lVar10 = 10;
          pbVar14 = pbVar6;
          pbVar16 = (byte *)"key-table";
          do {
            if (lVar10 == 0) break;
            lVar10 = lVar10 + -1;
            bVar19 = *pbVar14 < *pbVar16;
            bVar21 = *pbVar14 == *pbVar16;
            pbVar14 = pbVar14 + (ulong)bVar23 * -2 + 1;
            pbVar16 = pbVar16 + (ulong)bVar23 * -2 + 1;
          } while (bVar21);
          cVar12 = (!bVar19 && !bVar21) - bVar19;
          uVar7 = CONCAT71((int7)((ulong)uVar7 >> 8),cVar12);
          bVar21 = cVar12 == '\0';
          if ((bVar21) && (bVar21 = clients == 0, lVar8 = clients, !bVar21)) {
            do {
              uVar4 = server_client_set_key_table
                                (uVar4,uVar24,param_3,param_4,param_5,param_6,param_7,param_8,lVar8,
                                 (char *)0x0,uVar7,lVar10,pbVar17,param_14);
              lVar8 = *(long *)(lVar8 + 0x5c0);
              bVar21 = lVar8 == 0;
              uVar7 = extraout_RDX_01;
            } while (!bVar21);
            pbVar6 = *local_48;
          }
          bVar19 = false;
          puVar11 = (undefined *)0x7;
          pbVar14 = pbVar6;
          pbVar16 = (byte *)0x17b0c3;
          do {
            pbVar13 = pbVar14;
            pbVar15 = pbVar16;
            if (puVar11 == (undefined *)0x0) break;
            puVar11 = puVar11 + -1;
            pbVar15 = pbVar16 + (ulong)bVar23 * -2 + 1;
            pbVar13 = pbVar14 + (ulong)bVar23 * -2 + 1;
            bVar19 = *pbVar14 < *pbVar16;
            bVar21 = *pbVar14 == *pbVar16;
            pbVar14 = pbVar13;
            pbVar16 = pbVar15;
          } while (bVar21);
          cVar12 = (!bVar19 && !bVar21) - bVar19;
          bVar21 = false;
          uVar22 = cVar12 == '\0';
          if ((bool)uVar22) {
LAB_00133ff4:
            uVar20 = 0;
            uVar4 = status_timer_start_all
                              (uVar4,uVar24,param_3,param_4,param_5,param_6,param_7,param_8,pbVar15,
                               pbVar13,CONCAT71((int7)((ulong)uVar7 >> 8),cVar12),puVar11,
                               (long)pbVar17,param_14);
            pbVar6 = *local_48;
          }
          else {
            puVar11 = &DAT_00000010;
            pbVar14 = pbVar6;
            pbVar16 = (byte *)"status-interval";
            do {
              pbVar13 = pbVar14;
              pbVar15 = pbVar16;
              if (puVar11 == (undefined *)0x0) break;
              puVar11 = puVar11 + -1;
              pbVar15 = pbVar16 + (ulong)bVar23 * -2 + 1;
              pbVar13 = pbVar14 + (ulong)bVar23 * -2 + 1;
              bVar21 = *pbVar14 < *pbVar16;
              uVar22 = *pbVar14 == *pbVar16;
              pbVar14 = pbVar13;
              pbVar16 = pbVar15;
            } while ((bool)uVar22);
            cVar12 = (!bVar21 && !(bool)uVar22) - bVar21;
            uVar20 = 0;
            uVar22 = cVar12 == '\0';
            if ((bool)uVar22) goto LAB_00133ff4;
          }
          lVar10 = 0x10;
          pbVar17 = (byte *)"monitor-silence";
          do {
            if (lVar10 == 0) break;
            lVar10 = lVar10 + -1;
            uVar20 = *pbVar6 < *pbVar17;
            uVar22 = *pbVar6 == *pbVar17;
            pbVar6 = pbVar6 + (ulong)bVar23 * -2 + 1;
            pbVar17 = pbVar17 + (ulong)bVar23 * -2 + 1;
          } while ((bool)uVar22);
          if ((!(bool)uVar20 && !(bool)uVar22) == (bool)uVar20) {
            uVar4 = alerts_reset_all(uVar4,uVar24,param_3,param_4,param_5,param_6,param_7,param_8);
          }
          recalculate_sizes(uVar4,uVar24,param_3,param_4,param_5,param_6,param_7,param_8);
          for (lVar10 = clients; lVar10 != 0; lVar10 = *(long *)(lVar10 + 0x5c0)) {
            if (*(long *)(lVar10 + 0x598) != 0) {
              server_redraw_client(lVar10);
            }
          }
          goto LAB_0013404e;
        }
      }
      uVar5 = 0xffffffff;
      goto LAB_00134050;
    }
    uVar4 = args_has(ppbVar2,0x71);
    if ((int)uVar4 == 0) {
      cmdq_error(extraout_XMM0_Qa_03,uVar24,param_3,param_4,param_5,param_6,param_7,param_8,param_10
                 ,"unknown option: %s",pcVar9,param_12,param_13,param_14,in_stack_ffffffffffffffa8);
      uVar5 = 0xffffffff;
      goto LAB_00134050;
    }
  }
  else {
    uVar4 = args_has(ppbVar2,0x71);
    if ((int)uVar4 == 0) {
      cmdq_error(extraout_XMM0_Qa_02,uVar24,param_3,param_4,param_5,param_6,param_7,param_8,param_10
                 ,"ambiguous option: %s",pcVar9,param_12,param_13,param_14,in_stack_ffffffffffffffa8
                );
      uVar5 = 0xffffffff;
      goto LAB_00134050;
    }
  }
LAB_0013404e:
  uVar5 = 0;
LAB_00134050:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar5;
}



void cmd_show_environment_escape
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  size_t sVar1;
  char *pcVar2;
  char *pcVar3;
  char cVar4;
  undefined8 extraout_RDX;
  char *pcVar5;
  undefined4 extraout_XMM0_Da;
  
  pcVar5 = *(char **)(param_9 + 8);
  sVar1 = strlen(pcVar5);
  pcVar2 = (char *)xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           sVar1 * 2 + 1,param_10,extraout_RDX,param_12,param_13,param_14);
  cVar4 = *pcVar5;
  if (cVar4 == '\0') {
    *pcVar2 = '\0';
    return;
  }
  pcVar5 = pcVar5 + 1;
  do {
    while( true ) {
      pcVar3 = pcVar2 + 1;
      if (((cVar4 - 0x22U & 0xfd) != 0) && ((cVar4 + 0xa4U & 0xfb) != 0)) break;
      *pcVar2 = '\\';
      pcVar2 = pcVar2 + 2;
      *pcVar3 = cVar4;
      cVar4 = *pcVar5;
      pcVar3 = pcVar2;
      pcVar5 = pcVar5 + 1;
      if (cVar4 == '\0') goto LAB_0013438a;
    }
    *pcVar2 = cVar4;
    cVar4 = *pcVar5;
    pcVar2 = pcVar3;
    pcVar5 = pcVar5 + 1;
  } while (cVar4 != '\0');
LAB_0013438a:
  *pcVar3 = '\0';
  return;
}



void cmd_show_environment_print
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 *param_11,undefined8 param_12,
               undefined8 param_13,size_t param_14)

{
  undefined8 uVar1;
  void *__ptr;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined8 uVar2;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined1 in_stack_00000008;
  
  uVar2 = 0x73;
  uVar1 = args_has(*(byte ***)(param_9 + 8),0x73);
  if ((int)uVar1 == 0) {
    if (param_11[1] != 0) {
      cmdq_print(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                 "%s=%s",*param_11,param_11[1],param_13,param_14,in_stack_00000008);
      return;
    }
    cmdq_print(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               &DAT_0017741f,*param_11,0,param_13,param_14,in_stack_00000008);
    return;
  }
  if (param_11[1] != 0) {
    __ptr = (void *)cmd_show_environment_escape
                              (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,(long)param_11,uVar2,extraout_RDX,param_12,param_13,param_14)
    ;
    cmdq_print(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "%s=\"%s\"; export %s;",*param_11,__ptr,*param_11,param_14,unaff_BL);
    free(__ptr);
    return;
  }
  cmdq_print(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "unset %s;",*param_11,param_12,param_13,param_14,in_stack_00000008);
  return;
}



undefined4
cmd_show_environment_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,ulong param_12,long param_13,size_t param_14)

{
  byte **ppbVar1;
  long lVar2;
  undefined8 uVar3;
  undefined8 *puVar4;
  char **ppcVar5;
  undefined4 uVar6;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined in_stack_ffffffffffffffd8;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  lVar2 = args_get(ppbVar1,0x74);
  if ((lVar2 == 0) || (uVar3 = extraout_XMM0_Qa, *(long *)(param_10 + 0xa0) != 0)) {
    uVar3 = args_has(*(byte ***)(param_9 + 8),0x67);
    ppcVar5 = global_environ;
    if ((int)uVar3 == 0) {
      if (*(long *)(param_10 + 0xa0) == 0) {
        lVar2 = args_get(ppbVar1,0x74);
        uVar3 = extraout_XMM0_Qa_03;
        if (lVar2 == 0) {
          cmdq_error(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_10,"no current session",0,param_12,param_13,param_14,
                     in_stack_ffffffffffffffd8);
          return 0xffffffff;
        }
        goto LAB_00134568;
      }
      ppcVar5 = *(char ***)(*(long *)(param_10 + 0xa0) + 0x120);
    }
    if (*(int *)(ppbVar1 + 1) == 0) {
      puVar4 = (undefined8 *)environ_first((long *)ppcVar5);
      uVar6 = 0;
      uVar3 = extraout_XMM0_Qa_01;
      if (puVar4 != (undefined8 *)0x0) {
        do {
          cmd_show_environment_print
                    (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                     puVar4,param_12,param_13,param_14);
          puVar4 = (undefined8 *)environ_next((long)puVar4);
          uVar3 = extraout_XMM0_Qa_02;
        } while (puVar4 != (undefined8 *)0x0);
        return 0;
      }
    }
    else {
      puVar4 = (undefined8 *)environ_find(ppcVar5,*(char **)ppbVar1[2]);
      if (puVar4 == (undefined8 *)0x0) {
        uVar6 = 0xffffffff;
        cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"unknown variable: %s",*(undefined8 *)ppbVar1[2],param_12,param_13,
                   param_14,in_stack_ffffffffffffffd8);
      }
      else {
        uVar6 = 0;
        cmd_show_environment_print
                  (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_9,param_10,puVar4,param_12,param_13,param_14);
      }
    }
  }
  else {
LAB_00134568:
    uVar6 = 0xffffffff;
    cmdq_error(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "no such session: %s",lVar2,param_12,param_13,param_14,in_stack_ffffffffffffffd8);
  }
  return uVar6;
}



bool cmd_show_messages_terminals
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13
               ,size_t param_14)

{
  undefined *puVar1;
  undefined8 uVar2;
  undefined8 uVar3;
  undefined8 unaff_RBX;
  ulong uVar4;
  undefined8 *puVar5;
  ulong uVar6;
  ulong uVar7;
  uint uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  puVar5 = tty_terms;
  if (tty_terms != (undefined8 *)0x0) {
    if (param_10 != 0) {
      param_1 = cmdq_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           "%s",&DAT_001816c0,param_12,param_13,param_14,(char)unaff_RBX);
    }
    uVar4 = 0;
    do {
      uVar7 = (ulong)*(uint *)(puVar5 + 0x43);
      uVar6 = (ulong)*(uint *)(puVar5 + 1);
      uVar3 = *puVar5;
      uVar8 = (int)uVar4 + 1;
      cmdq_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                 "Terminal %u: %s [references=%u, flags=0x%x]:",uVar4,uVar3,uVar6,uVar7,
                 (char)unaff_RBX);
      uVar4 = 0;
      while( true ) {
        uVar2 = tty_term_ncodes();
        param_1 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
        if ((uint)uVar2 <= (uint)uVar4) break;
        puVar1 = tty_term_describe(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,
                                   param_7,param_8,(long)puVar5,uVar4);
        cmdq_print(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,param_9,"%s",puVar1,uVar3,uVar6,uVar7,(char)unaff_RBX);
        uVar4 = (ulong)((uint)uVar4 + 1);
      }
      puVar5 = (undefined8 *)puVar5[0x44];
      uVar4 = (ulong)uVar8;
    } while (puVar5 != (undefined8 *)0x0);
    return uVar8 != 0;
  }
  return false;
}



undefined  [16]
cmd_show_messages_jobs
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          int param_10,ulong param_11,undefined8 param_12,undefined8 param_13,size_t param_14)

{
  undefined auVar1 [16];
  long lVar2;
  uint uVar3;
  ulong uVar4;
  undefined auVar5 [16];
  undefined8 uStack_30;
  undefined1 in_stack_ffffffffffffffd8;
  
  lVar2 = all_jobs;
  if (all_jobs != 0) {
    if (param_10 != 0) {
      uStack_30 = 0x1346b6;
      param_1 = cmdq_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           "%s",&DAT_001816c0,param_12,param_13,param_14,in_stack_ffffffffffffffd8);
    }
    uVar4 = 0;
    do {
      uVar3 = (int)uVar4 + 1;
      param_1 = cmdq_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           "Job %u: %s [fd=%d, pid=%d, status=%d]",uVar4,*(undefined8 *)(lVar2 + 8),
                           (ulong)*(uint *)(lVar2 + 0x18),(ulong)*(uint *)(lVar2 + 0x10),
                           (char)*(undefined4 *)(lVar2 + 0x14));
      lVar2 = *(long *)(lVar2 + 0x40);
      uVar4 = (ulong)uVar3;
    } while (lVar2 != 0);
    auVar5._1_7_ = 0;
    auVar5[0] = uVar3 != 0;
    auVar5._8_8_ = uStack_30;
    return auVar5;
  }
  auVar1._8_8_ = 0;
  auVar1._0_8_ = param_11;
  return auVar1 << 0x40;
}



undefined8
cmd_show_messages_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9,
          long param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,size_t param_14)

{
  byte **ppbVar1;
  long lVar2;
  undefined8 *puVar3;
  bool bVar4;
  bool bVar5;
  undefined8 uVar6;
  char *__s;
  char *pcVar7;
  undefined7 extraout_var;
  undefined8 extraout_RDX;
  ulong extraout_RDX_00;
  int iVar8;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined in_stack_ffffffffffffffc8;
  
  ppbVar1 = (byte **)param_9[1];
  lVar2 = *(long *)(param_10 + 0x80);
  uVar6 = args_has(ppbVar1,0x54);
  if ((int)uVar6 == 0) {
    iVar8 = 0;
    bVar4 = false;
    if ((undefined1 *)*param_9 != cmd_server_info_entry) goto LAB_0013476e;
  }
  bVar4 = true;
  bVar5 = cmd_show_messages_terminals
                    (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_10,0,extraout_RDX,param_12,param_13,param_14);
  iVar8 = (int)CONCAT71(extraout_var,bVar5);
LAB_0013476e:
  uVar6 = args_has(ppbVar1,0x4a);
  if (((int)uVar6 == 0) && ((undefined1 *)*param_9 != cmd_server_info_entry)) {
    if (!bVar4) {
      for (puVar3 = *(undefined8 **)(lVar2 + 0x540); puVar3 != (undefined8 *)0x0;
          puVar3 = (undefined8 *)puVar3[3]) {
        __s = ctime(puVar3 + 2);
        pcVar7 = strchr(__s,10);
        *pcVar7 = '\0';
        cmdq_print(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"%s %s",__s,*puVar3,param_13,param_14,in_stack_ffffffffffffffc8);
      }
    }
  }
  else {
    cmd_show_messages_jobs
              (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               iVar8,extraout_RDX_00,param_12,param_13,param_14);
  }
  return 0;
}



ulong cmd_show_options_one
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,long param_10,char **param_11,ulong param_12,long param_13,
                size_t param_14)

{
  undefined8 *puVar1;
  long lVar2;
  undefined8 uVar3;
  undefined *puVar4;
  ulong uVar5;
  ulong uVar6;
  ulong uVar7;
  char *pcVar8;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined in_stack_ffffffffffffffa8;
  char **local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar8 = **(char ***)(*(long *)(param_9 + 8) + 0x10);
  uVar6 = param_12;
  do {
    if (*pcVar8 == '@') {
      puVar1 = (undefined8 *)options_find1(param_11,pcVar8);
      if (puVar1 == (undefined8 *)0x0) {
        if ((int)param_12 != 0) goto LAB_0013493c;
        cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"unknown option: %s",pcVar8,
                   param_12 & 0xffffffff,param_13,param_14,in_stack_ffffffffffffffa8);
        uVar7 = 0xffffffff;
        goto LAB_0013490a;
      }
      uVar5 = args_has(*(byte ***)(param_9 + 8),0x76);
      uVar7 = uVar5 & 0xffffffff;
      if ((int)uVar5 != 0) {
        cmdq_print(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"%s",puVar1[2],uVar6,param_13,param_14,
                   in_stack_ffffffffffffffa8);
        goto LAB_0013493c;
      }
      cmdq_print(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"%s \"%s\"",*puVar1,puVar1[2],param_13,param_14,
                 in_stack_ffffffffffffffa8);
      goto LAB_0013490a;
    }
    local_48 = (char **)0x0;
    uVar5 = options_table_find(pcVar8,(long *)&local_48);
    uVar7 = uVar5 & 0xffffffff;
    if ((int)uVar5 != 0) {
      cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,param_10,"ambiguous option: %s",pcVar8,uVar6,param_13,param_14,
                 in_stack_ffffffffffffffa8);
      uVar7 = 0xffffffff;
      goto LAB_0013490a;
    }
    if (local_48 == (char **)0x0) {
      if ((int)param_12 != 0) goto LAB_0013493c;
      uVar7 = 0xffffffff;
      cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,param_10,"unknown option: %s",pcVar8,uVar6,param_13,param_14,
                 in_stack_ffffffffffffffa8);
      goto LAB_0013490a;
    }
    pcVar8 = local_48[6];
  } while (pcVar8 != (char *)0x0);
  lVar2 = options_find1(param_11,*local_48);
  if (lVar2 == 0) {
LAB_0013493c:
    uVar7 = 0;
  }
  else {
    uVar3 = args_has(*(byte ***)(param_9 + 8),0x76);
    puVar4 = options_table_print_entry
                       (extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)local_48,lVar2,(int)uVar3,uVar6,param_13,param_14);
    uVar3 = args_has(*(byte ***)(param_9 + 8),0x76);
    if ((int)uVar3 == 0) {
      cmdq_print(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"%s %s",*local_48,puVar4,param_13,param_14,
                 in_stack_ffffffffffffffa8);
    }
    else {
      cmdq_print(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"%s",puVar4,uVar6,param_13,param_14,
                 in_stack_ffffffffffffffa8);
    }
  }
LAB_0013490a:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar7;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
cmd_show_options_all
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,char **param_11,char *param_12,undefined8 param_13,size_t param_14)

{
  char **ppcVar1;
  undefined8 uVar2;
  long lVar3;
  char *pcVar4;
  char *pcVar5;
  char *pcVar6;
  undefined **ppuVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined in_stack_ffffffffffffffc8;
  
  pcVar5 = param_12;
  for (ppcVar1 = (char **)options_first((long *)param_11); ppcVar1 != (char **)0x0;
      ppcVar1 = (char **)options_next((long)ppcVar1)) {
    while (**ppcVar1 == '@') {
      uVar2 = args_has(*(byte ***)(param_9 + 8),0x76);
      if ((int)uVar2 == 0) {
        pcVar5 = ppcVar1[2];
        cmdq_print(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,param_10,"%s \"%s\"",*ppcVar1,pcVar5,param_13,param_14,
                   in_stack_ffffffffffffffc8);
        break;
      }
      cmdq_print(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,param_10,"%s",ppcVar1[2],pcVar5,param_13,param_14,
                 in_stack_ffffffffffffffc8);
      ppcVar1 = (char **)options_next((long)ppcVar1);
      if (ppcVar1 == (char **)0x0) goto LAB_00134ad8;
    }
  }
LAB_00134ad8:
  uVar2 = args_has(*(byte ***)(param_9 + 8),0x76);
  pcVar6 = "buffer-limit";
  ppuVar7 = &options_table;
  do {
    pcVar4 = pcVar5;
    if (((ppuVar7[6] == (undefined *)0x0) && (*(int *)((long)ppuVar7 + 0xc) == (int)param_12)) &&
       (lVar3 = options_find1(param_11,pcVar6), pcVar4 = pcVar5, lVar3 != 0)) {
      pcVar4 = options_table_print_entry
                         (extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,(long)ppuVar7,lVar3,(int)uVar2,pcVar5,param_13,param_14);
      if ((int)uVar2 == 0) {
        cmdq_print(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_10,"%s %s",*ppuVar7,pcVar4,param_13,param_14,
                   in_stack_ffffffffffffffc8);
        goto LAB_00134b08;
      }
      cmdq_print(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_10,"%s",pcVar4,pcVar5,param_13,param_14,
                 in_stack_ffffffffffffffc8);
      pcVar6 = ppuVar7[7];
    }
    else {
LAB_00134b08:
      pcVar6 = ppuVar7[7];
      pcVar5 = pcVar4;
    }
    ppuVar7 = ppuVar7 + 7;
    if (pcVar6 == (char *)0x0) {
      return 0;
    }
  } while( true );
}



ulong cmd_show_options_exec
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long *param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
                size_t param_14)

{
  byte **ppbVar1;
  long lVar2;
  undefined8 uVar3;
  ulong uVar4;
  long lVar5;
  undefined unaff_BPL;
  char *pcVar6;
  char **ppcVar7;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  
  ppbVar1 = (byte **)param_9[1];
  lVar5 = *(long *)(param_10 + 0xa0);
  lVar2 = *(long *)(param_10 + 0xa8);
  uVar3 = args_has(ppbVar1,0x73);
  if ((int)uVar3 == 0) {
    uVar3 = args_has((byte **)param_9[1],0x77);
    if (((int)uVar3 == 0) && ((undefined1 *)*param_9 != cmd_show_window_options_entry)) {
      uVar3 = args_has((byte **)param_9[1],0x67);
      if ((int)uVar3 == 0) {
        if (lVar5 == 0) {
          lVar5 = args_get(ppbVar1,0x74);
          if (lVar5 == 0) {
            cmdq_error(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_10,"no current session",0,param_12,param_13,param_14,unaff_BPL);
          }
          else {
            cmdq_error(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_10,"no such session: %s",lVar5,param_12,param_13,param_14,unaff_BPL);
          }
          return 0xffffffff;
        }
        ppcVar7 = *(char ***)(lVar5 + 0x108);
        pcVar6 = (char *)0x2;
      }
      else {
        pcVar6 = (char *)0x2;
        ppcVar7 = global_s_options;
      }
    }
    else {
      uVar3 = args_has((byte **)param_9[1],0x67);
      if ((int)uVar3 == 0) {
        if (lVar2 == 0) {
          lVar5 = args_get(ppbVar1,0x74);
          if (lVar5 != 0) {
            cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_10,"no such window: %s",lVar5,param_12,param_13,param_14,unaff_BPL);
            return 0xffffffff;
          }
          cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_10,"no current window",0,param_12,param_13,param_14,unaff_BPL);
          return 0xffffffff;
        }
        pcVar6 = (char *)0x3;
        ppcVar7 = *(char ***)(*(long *)(lVar2 + 8) + 0x188);
      }
      else {
        pcVar6 = (char *)0x3;
        ppcVar7 = global_w_options;
      }
    }
  }
  else {
    pcVar6 = (char *)0x1;
    ppcVar7 = global_options;
  }
  uVar4 = args_has((byte **)param_9[1],0x71);
  if (*(int *)(ppbVar1 + 1) != 0) {
    uVar4 = cmd_show_options_one
                      (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long)param_9,param_10,ppcVar7,uVar4 & 0xffffffff,param_13,param_14);
    return uVar4;
  }
  uVar4 = cmd_show_options_all
                    (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long)param_9,param_10,ppcVar7,pcVar6,param_13,param_14);
  return uVar4;
}



undefined4
cmd_source_file_exec
          (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          int *param_10,undefined8 param_11,ulong param_12,long param_13,size_t param_14)

{
  long lVar1;
  long lVar2;
  char **ppcVar3;
  int iVar4;
  undefined8 *puVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar6;
  undefined8 *puVar7;
  undefined4 uVar8;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Db_01;
  undefined in_stack_ffffffffffffffd8;
  undefined7 uStack_27;
  
  lVar1 = *(long *)(param_9 + 8);
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  puVar5 = cmdq_new(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(undefined8 *)(param_10 + 2),param_10,param_11,param_12,param_13,param_14);
  puVar5[0x23] = cmd_source_file_done;
  ppcVar3 = *(char ***)(lVar1 + 0x10);
  puVar5[0x24] = param_10;
  puVar7 = puVar5;
  iVar4 = load_cfg(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*ppcVar3
                   ,(long)puVar5,(long *)&stack0xffffffffffffffd8,param_12,param_13,param_14);
  if (iVar4 == -1) {
    if (cfg_references == 0) {
      cmdq_free((int *)puVar5);
      cmdq_error(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,(long)param_10,"%s",
                 CONCAT71(uStack_27,in_stack_ffffffffffffffd8),param_12,param_13,param_14,
                 in_stack_ffffffffffffffd8);
      free((void *)CONCAT71(uStack_27,in_stack_ffffffffffffffd8));
      uVar8 = 0xffffffff;
      goto LAB_00134dee;
    }
    puVar7 = (undefined8 *)CONCAT71(uStack_27,in_stack_ffffffffffffffd8);
    cfg_add_cause(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,"%s",puVar7,(ulong)cfg_references,param_12,param_13,
                  param_14,in_stack_ffffffffffffffd8);
    free((void *)CONCAT71(uStack_27,in_stack_ffffffffffffffd8));
    uVar6 = extraout_RDX_00;
    uVar9 = extraout_XMM0_Da_01;
    uVar10 = extraout_XMM0_Db_00;
  }
  else {
    uVar6 = extraout_RDX;
    uVar9 = extraout_XMM0_Da_00;
    uVar10 = extraout_XMM0_Db;
    if (iVar4 != 0) {
      *param_10 = *param_10 + 1;
      uVar8 = 1;
      cfg_references = cfg_references + 1;
      cmdq_continue(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                    param_6,param_7,param_8,(int *)puVar5);
      goto LAB_00134dee;
    }
  }
  if (cfg_references == 0) {
    uVar8 = 0;
    cfg_print_causes(CONCAT44(uVar10,uVar9),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long)param_10,puVar7,uVar6,param_12,param_13,param_14);
    cmdq_free((int *)puVar5);
  }
  else {
    uVar8 = 0;
    cmdq_free((int *)puVar5);
  }
LAB_00134dee:
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar8;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmd_source_file_done
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               int *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,size_t param_14)

{
  int *piVar1;
  uint uVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar3;
  
  piVar1 = *(int **)(param_9 + 0x48);
  if (-1 < param_9[4]) {
    piVar1[4] = param_9[4];
  }
  cmdq_free(param_9);
  cfg_references = cfg_references + -1;
  uVar2 = cmdq_free(piVar1);
  if (uVar2 == 0) {
    if (cfg_references != 0) {
      cmdq_continue(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar1)
      ;
      return;
    }
    uVar3 = cfg_print_causes(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,(long)piVar1,param_10,extraout_RDX,param_12,param_13,param_14);
    cmdq_continue(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar1);
    return;
  }
  return;
}



undefined4
cmd_split_window_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,undefined *param_12,void **param_13,char **param_14)

{
  byte **ppbVar1;
  uint *puVar2;
  undefined *puVar3;
  bool bVar4;
  int iVar5;
  char **ppcVar6;
  undefined8 uVar7;
  undefined8 uVar8;
  ulong uVar9;
  void **ppvVar10;
  undefined4 *puVar11;
  longlong lVar12;
  undefined7 extraout_var;
  void *extraout_RAX;
  uint **ppuVar13;
  uint *puVar14;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  void *pvVar15;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  void *extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  undefined8 extraout_RDX_10;
  undefined8 extraout_RDX_11;
  long lVar16;
  char *pcVar17;
  undefined4 *puVar18;
  uint *puVar19;
  long *plVar20;
  int *piVar21;
  long in_FS_OFFSET;
  undefined4 uVar22;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Da_11;
  undefined4 extraout_XMM0_Da_12;
  undefined4 extraout_XMM0_Da_13;
  undefined4 extraout_XMM0_Da_14;
  undefined4 extraout_XMM0_Da_15;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 uVar23;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined4 extraout_XMM0_Db_09;
  undefined4 extraout_XMM0_Db_10;
  undefined4 extraout_XMM0_Db_11;
  undefined4 extraout_XMM0_Db_12;
  undefined auVar24 [16];
  uint *puVar25;
  char **local_90;
  undefined8 *****local_80;
  uint local_74;
  char **local_70;
  undefined8 *****local_58;
  void *local_50;
  void *local_48;
  long local_40;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  puVar2 = *(uint **)(param_10 + 0xa0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  puVar14 = *(uint **)(param_10 + 0xa8);
  puVar19 = *(uint **)(puVar14 + 2);
  puVar3 = *(undefined **)(param_10 + 0xb8);
  lVar16 = param_10;
  puVar25 = puVar19;
  uVar22 = server_unzoom_window
                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar19,
                      param_10,param_11,param_12,(ulong)param_13,param_14);
  auVar24 = environ_create(uVar22,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar19,
                           lVar16,extraout_RDX,param_12,param_13,param_14);
  ppcVar6 = auVar24._0_8_;
  uVar7 = environ_copy(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,global_environ,ppcVar6,auVar24._8_8_,param_12,
                       param_13,param_14);
  uVar7 = environ_copy(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       *(long **)(puVar2 + 0x48),ppcVar6,extraout_RDX_00,param_12,param_13,param_14)
  ;
  uVar7 = server_fill_environ(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar2,
                              ppcVar6,extraout_RDX_01,param_12,param_13,param_14);
  local_74 = *(uint *)(ppbVar1 + 1);
  if (local_74 == 0) {
    local_58 = (undefined8 *****)
               options_get_string(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  *(char ***)(puVar2 + 0x42),"default-command",extraout_RDX_02,
                                  param_12,param_13,param_14);
    local_80 = local_58;
    if (local_58 != (undefined8 *****)0x0) {
      if (*(byte *)local_58 == 0) {
        local_80 = (undefined8 *****)0x0;
      }
      else {
        local_80 = &local_58;
        local_74 = 1;
      }
    }
  }
  else {
    local_80 = (undefined8 *****)ppbVar1[2];
  }
  uVar7 = args_has(ppbVar1,99);
  if ((int)uVar7 == 0) {
    lVar16 = *(long *)(param_10 + 8);
    if ((lVar16 == 0) || (*(long *)(lVar16 + 0x598) != 0)) {
      local_90 = (char **)0x0;
      local_70 = *(char ***)(puVar2 + 4);
    }
    else {
      local_70 = *(char ***)(lVar16 + 200);
      local_90 = (char **)0x0;
    }
  }
  else {
    ppuVar13 = (uint **)format_create(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,
                                      param_3,param_4,param_5,param_6,param_7,param_8,param_10,0,
                                      extraout_RDX_03,param_12,param_13,param_14);
    param_13 = (void **)0x0;
    param_12 = (undefined *)0x0;
    format_defaults(CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_10),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,ppuVar13,*(long *)(param_10 + 0x80),puVar2,
                    (uint *)0x0,(uint *)0x0,param_14);
    pcVar17 = (char *)args_get(ppbVar1,99);
    local_90 = (char **)format_expand(CONCAT44(extraout_XMM0_Db_09,extraout_XMM0_Da_11),param_2,
                                      param_3,param_4,param_5,param_6,param_7,param_8,
                                      (long *)ppuVar13,pcVar17,extraout_RDX_08,param_12,
                                      (long *)param_13,param_14);
    format_free(ppuVar13);
    local_70 = local_90;
  }
  uVar7 = args_has(ppbVar1,0x68);
  uVar8 = args_has(ppbVar1,0x6c);
  if ((int)uVar8 == 0) {
    piVar21 = (int *)0xffffffff;
    uVar8 = args_has(ppbVar1,0x70);
    pvVar15 = extraout_RDX_07;
    uVar22 = extraout_XMM0_Da_08;
    uVar23 = extraout_XMM0_Db_06;
    if ((int)uVar8 != 0) {
      param_13 = &local_50;
      param_12 = (undefined *)0x7fffffff;
      lVar12 = args_strtonum(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_08),param_2,param_3,
                             param_4,param_5,param_6,param_7,param_8,ppbVar1,(undefined *)0x70,
                             (undefined *)0x0,(undefined *)0x7fffffff,param_13,(undefined *)param_14
                            );
      if (local_50 != (void *)0x0) {
        pcVar17 = "percentage %s";
        uVar22 = extraout_XMM0_Da_09;
        uVar23 = extraout_XMM0_Db_07;
        goto LAB_0013524c;
      }
      pvVar15 = (void *)0x0;
      param_12 = puVar3;
      uVar22 = extraout_XMM0_Da_09;
      uVar23 = extraout_XMM0_Db_07;
      if ((int)uVar7 == 0) {
        piVar21 = (int *)((ulong)(uint)((int)lVar12 * *(int *)(puVar3 + 0x24)) / 100);
      }
      else {
        piVar21 = (int *)((ulong)(uint)((int)lVar12 * *(int *)(puVar3 + 0x20)) / 100);
      }
    }
LAB_0013505b:
    pcVar17 = options_get_number(CONCAT44(uVar23,uVar22),param_2,param_3,param_4,param_5,param_6,
                                 param_7,param_8,*(char ***)(puVar2 + 0x42),"history-limit",pvVar15,
                                 param_12,param_13,param_14);
    ppvVar10 = (void **)options_get_string(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_03),param_2
                                           ,param_3,param_4,param_5,param_6,param_7,param_8,
                                           *(char ***)(puVar2 + 0x42),"default-shell",
                                           extraout_RDX_04,param_12,param_13,param_14);
    if ((*(char *)ppvVar10 == '\0') ||
       (bVar4 = areshell((char *)ppvVar10), (int)CONCAT71(extraout_var,bVar4) != 0)) {
      ppvVar10 = (void **)&DAT_00178fee;
    }
    uVar9 = args_has(ppbVar1,0x62);
    puVar18 = (undefined4 *)(ulong)((int)uVar7 == 0);
    param_12 = (undefined *)(uVar9 & 0xffffffff);
    puVar11 = layout_split_pane(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,(long)puVar3,puVar18,piVar21,(ulong)param_12);
    if (puVar11 == (undefined4 *)0x0) {
      xstrdup(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_05),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,"pane too small",puVar18,extraout_RDX_05,param_12,param_13,
              param_14);
      local_50 = extraout_RAX;
      uVar7 = environ_free((long *)ppcVar6);
    }
    else {
      auVar24 = window_add_pane(extraout_XMM0_Da_05,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,(long)puVar25,(ulong)pcVar17 & 0xffffffff,extraout_RDX_05,
                                param_12,param_13,param_14);
      plVar20 = auVar24._0_8_;
      layout_assign_pane(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_06),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,puVar11,(long)plVar20,auVar24._8_8_,
                         param_12,(ulong)puVar11,param_14);
      lVar16 = *(long *)(param_10 + 8);
      if ((lVar16 == 0) || (*(long *)(lVar16 + 0x598) != 0)) {
        param_12 = (undefined *)environ_find(*(char ***)(puVar2 + 0x48),"PATH");
      }
      else {
        param_12 = (undefined *)environ_find(*(char ***)(lVar16 + 0xb8),"PATH");
      }
      if (param_12 != (undefined *)0x0) {
        param_12 = *(undefined **)(param_12 + 8);
      }
      uVar9 = (ulong)local_74;
      iVar5 = window_pane_spawn(plVar20,uVar9,local_80);
      if (iVar5 == 0) {
        server_redraw_window((long)puVar25);
        uVar7 = args_has(ppbVar1,100);
        if ((int)uVar7 == 0) {
          window_set_active_pane((long)puVar25,(long)plVar20);
          session_select(extraout_XMM0_Da_12,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,(long)puVar2,(ulong)*puVar14,extraout_RDX_09,param_12,(uint *)ppvVar10,
                         local_70);
          server_redraw_session((long)puVar2);
        }
        else {
          server_status_session((long)puVar2);
        }
        environ_free((long *)ppcVar6);
        uVar7 = args_has(ppbVar1,0x50);
        uVar22 = extraout_XMM0_Da_07;
        if ((int)uVar7 != 0) {
          pcVar17 = (char *)args_get(ppbVar1,0x46);
          if (pcVar17 == (char *)0x0) {
            pcVar17 = "#{session_name}:#{window_index}.#{pane_index}";
          }
          ppuVar13 = (uint **)format_create(CONCAT44(extraout_XMM0_Db_10,extraout_XMM0_Da_13),
                                            param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                            param_10,0,extraout_RDX_10,param_12,ppvVar10,local_70);
          uVar7 = format_defaults(CONCAT44(extraout_XMM0_Db_11,extraout_XMM0_Da_14),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,ppuVar13,
                                  *(long *)(param_10 + 0x80),puVar2,puVar14,(uint *)plVar20,local_70
                                 );
          pcVar17 = format_expand(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  (long *)ppuVar13,pcVar17,extraout_RDX_11,puVar14,plVar20,local_70)
          ;
          cmdq_print(CONCAT44(extraout_XMM0_Db_12,extraout_XMM0_Da_15),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_10,"%s",pcVar17,puVar14,plVar20,
                     (size_t)local_70,(char)puVar25);
          free(pcVar17);
          uVar22 = format_free(ppuVar13);
        }
        notify_window_layout_changed
                  (uVar22,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar25);
        uVar22 = 0;
        goto joined_r0x0013522c;
      }
      uVar7 = environ_free((long *)ppcVar6);
      param_13 = ppvVar10;
      param_14 = local_70;
      if (plVar20 != (long *)0x0) {
        layout_close_pane(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)plVar20,uVar9,extraout_RDX_06,param_12,ppvVar10,local_70);
        uVar7 = window_remove_pane((long)puVar25,(uint *)plVar20);
        param_13 = ppvVar10;
        param_14 = local_70;
      }
    }
  }
  else {
    param_12 = (undefined *)0x7fffffff;
    param_13 = &local_50;
    uVar9 = args_strtonum(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,ppbVar1,(undefined *)0x6c,(undefined *)0x0
                          ,(undefined *)0x7fffffff,param_13,(undefined *)param_14);
    pcVar17 = "size %s";
    piVar21 = (int *)(uVar9 & 0xffffffff);
    pvVar15 = local_50;
    uVar22 = extraout_XMM0_Da_02;
    uVar23 = extraout_XMM0_Db_02;
    if (local_50 == (void *)0x0) goto LAB_0013505b;
LAB_0013524c:
    xasprintf(CONCAT44(uVar23,uVar22),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              (long *)&local_48,pcVar17,local_50,param_12,param_13,param_14,(char)puVar25);
    free(local_50);
    local_50 = local_48;
    uVar7 = environ_free((long *)ppcVar6);
  }
  uVar22 = 0xffffffff;
  cmdq_error(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "create pane failed: %s",local_50,(ulong)param_12,(long)param_13,param_14,(char)puVar25
            );
  free(local_50);
joined_r0x0013522c:
  if (local_90 != (char **)0x0) {
    free(local_90);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar22;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



ulong cmd_string_getc(long param_1,long *param_2)

{
  byte *pbVar1;
  
  pbVar1 = (byte *)(param_1 + *param_2);
  if (*pbVar1 != 0) {
    *param_2 = *param_2 + 1;
    return (ulong)*pbVar1;
  }
  return 0xffffffff;
}



void cmd_string_ungetc(long *param_1)

{
  *param_1 = *param_1 + -1;
  return;
}



void cmd_string_copy(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long *param_9,char *param_10,long *param_11,undefined8 param_12,
                    undefined8 param_13,undefined8 param_14)

{
  size_t sVar1;
  long lVar2;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  
  sVar1 = strlen(param_10);
  lVar2 = xrealloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9
                   ,sVar1 + 1 + *param_11,extraout_RDX,param_12,param_13,param_14);
  *param_9 = lVar2;
  strlcpy((char *)(lVar2 + *param_11),param_10,sVar1 + 1);
  *param_11 = *param_11 + sVar1;
  free(param_10);
  return;
}



long cmd_string_variable(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,long *param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  byte bVar2;
  long lVar3;
  byte *__ptr;
  char *__ptr_00;
  long lVar4;
  long extraout_RAX;
  long extraout_RAX_00;
  byte *pbVar5;
  uint uVar6;
  undefined8 extraout_RDX;
  long lVar8;
  char *pcVar9;
  uint uVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffb8;
  undefined7 uStack_47;
  byte *pbVar7;
  
  lVar3 = *(long *)(in_FS_OFFSET + 0x28);
  lVar4 = *param_10;
  pbVar5 = (byte *)(param_9 + lVar4);
  if (*pbVar5 == 0) goto LAB_00135719;
  lVar8 = lVar4 + 1;
  *param_10 = lVar8;
  bVar2 = *pbVar5;
  uVar10 = (uint)bVar2;
  if (bVar2 != 0x7b) {
    if (((0x19 < bVar2 - 0x61) && (bVar2 != 0x5f)) && (0x19 < bVar2 - 0x41)) {
      xasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                (long *)&stack0xffffffffffffffb8,&DAT_00179c55,(ulong)bVar2,pbVar5,param_13,param_14
                ,in_stack_ffffffffffffffb8);
      lVar4 = CONCAT71(uStack_47,in_stack_ffffffffffffffb8);
      goto LAB_001356c7;
    }
    __ptr = (byte *)xrealloc((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                             1,lVar8,pbVar5,param_13,param_14);
    *__ptr = bVar2;
    lVar4 = *param_10;
    pbVar7 = (byte *)(param_9 + lVar4);
    uVar11 = extraout_XMM0_Da;
    if (*pbVar7 == 0) {
      lVar8 = 1;
    }
    else {
      uVar10 = 0xffffffff;
LAB_00135616:
      lVar8 = 1;
      do {
        *param_10 = lVar4 + 1;
        bVar2 = *pbVar7;
        pbVar5 = (byte *)(ulong)bVar2;
        if (((bVar2 != 0x5f) &&
            (uVar6 = (bVar2 & 0xffffffdf) - 0x41, pbVar7 = (byte *)(ulong)uVar6, 0x19 < (byte)uVar6)
            ) && (pbVar7 = (byte *)(ulong)(bVar2 - 0x30), 9 < bVar2 - 0x30)) {
          if (uVar10 == 0x7b) {
            if (bVar2 == 0x7d) goto LAB_00135682;
            goto LAB_00135720;
          }
          *param_10 = lVar4;
          goto LAB_00135682;
        }
        if (lVar8 == -4) goto LAB_00135720;
        lVar1 = lVar8 + 1;
        __ptr = (byte *)xrealloc(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 __ptr,lVar1,pbVar7,pbVar5,param_13,param_14);
        __ptr[lVar8] = bVar2;
        lVar4 = *param_10;
        pbVar7 = (byte *)(param_9 + lVar4);
        lVar8 = lVar1;
        uVar11 = extraout_XMM0_Da_00;
      } while (*pbVar7 != 0);
      if (uVar10 == 0x7b) goto LAB_00135720;
    }
LAB_00135682:
    __ptr_00 = (char *)xrealloc(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__ptr
                                ,lVar8 + 1,pbVar7,pbVar5,param_13,param_14);
    __ptr_00[lVar8] = '\0';
    pcVar9 = __ptr_00;
    lVar4 = environ_find(global_environ,__ptr_00);
    free(__ptr_00);
    if ((lVar4 == 0) || (*(char **)(lVar4 + 8) == (char *)0x0)) {
      xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,param_6
              ,param_7,param_8,"",pcVar9,extraout_RDX,pbVar5,param_13,param_14);
      lVar4 = extraout_RAX_00;
    }
    else {
      xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,param_6
              ,param_7,param_8,*(char **)(lVar4 + 8),pcVar9,extraout_RDX,pbVar5,param_13,param_14);
      lVar4 = extraout_RAX;
    }
    goto LAB_001356c7;
  }
  if (*(byte *)(lVar8 + param_9) == 0) {
LAB_00135719:
    __ptr = (byte *)0x0;
  }
  else {
    *param_10 = lVar4 + 2;
    bVar2 = *(byte *)(lVar8 + param_9);
    if (((0x19 < bVar2 - 0x61) && (bVar2 != 0x5f)) && (0x19 < bVar2 - 0x41)) goto LAB_00135719;
    __ptr = (byte *)xrealloc((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                             1,(ulong)(bVar2 - 0x61),pbVar5,param_13,param_14);
    *__ptr = bVar2;
    lVar4 = *param_10;
    pbVar7 = (byte *)(param_9 + lVar4);
    uVar11 = extraout_XMM0_Da_02;
    if (*pbVar7 != 0) goto LAB_00135616;
  }
LAB_00135720:
  free(__ptr);
  lVar4 = 0;
LAB_001356c7:
  if (lVar3 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void * cmd_string_string(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,byte **param_10,char param_11,byte *param_12,
                        undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  byte *pbVar2;
  char *pcVar3;
  void *pvVar4;
  byte *pbVar5;
  byte *pbVar6;
  byte bVar7;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  void *local_50;
  byte *local_48;
  long local_40;
  
  uVar8 = (undefined4)param_1;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pbVar2 = *param_10;
  local_50 = (void *)0x0;
  local_48 = (byte *)0x0;
  pbVar6 = pbVar2 + param_9;
  pbVar5 = param_12;
  if (*pbVar6 != 0) {
    do {
      uVar8 = (undefined4)param_1;
      pbVar5 = pbVar2 + 1;
      *param_10 = pbVar5;
      bVar7 = *pbVar6;
      if ((uint)bVar7 == (int)param_11) goto LAB_00135958;
      if (bVar7 == 0x24) {
        if ((int)param_12 == 0) goto LAB_0013583f;
        pcVar3 = (char *)cmd_string_variable(param_1,param_2,param_3,param_4,param_5,param_6,param_7
                                             ,param_8,param_9,(long *)param_10,pbVar6,pbVar5,
                                             param_13,param_14);
        if (pcVar3 == (char *)0x0) goto LAB_0013588a;
        param_1 = cmd_string_copy(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,(long *)&local_50,pcVar3,
                                  (long *)&local_48,pbVar5,param_13,param_14);
      }
      else {
        if ((bVar7 == 0x5c) && ((int)param_12 != 0)) {
          pbVar5 = pbVar5 + param_9;
          if (*pbVar5 == 0) goto LAB_0013588a;
          *param_10 = pbVar2 + 2;
          bVar1 = *pbVar5;
          if (bVar1 == 0x72) {
            bVar7 = 0xd;
          }
          else if (bVar1 < 0x73) {
            bVar7 = 0x1b;
            if (bVar1 != 0x65) {
              if (bVar1 != 0x6e) goto LAB_0013592d;
              bVar7 = 10;
            }
          }
          else {
            bVar7 = 9;
            if (bVar1 != 0x74) {
LAB_0013592d:
              bVar7 = bVar1;
            }
          }
        }
LAB_0013583f:
        if ((byte *)0xfffffffffffffffc < local_48) goto LAB_0013588a;
        local_50 = (void *)xrealloc(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    local_50,(long)(local_48 + 1),pbVar6,pbVar5,param_13,param_14);
        param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
        pbVar5 = local_48 + 1;
        *(byte *)((long)local_50 + (long)local_48) = bVar7;
        local_48 = pbVar5;
      }
      uVar8 = (undefined4)param_1;
      pbVar2 = *param_10;
      pbVar6 = pbVar2 + param_9;
    } while (*pbVar6 != 0);
  }
  if (param_11 == -1) {
LAB_00135958:
    pvVar4 = (void *)xrealloc(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_50
                              ,(long)(local_48 + 1),pbVar6,pbVar5,param_13,param_14);
    *(byte *)((long)pvVar4 + (long)local_48) = 0;
    local_50 = pvVar4;
  }
  else {
LAB_0013588a:
    free(local_50);
    pvVar4 = (void *)0x0;
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return pvVar4;
}



long cmd_string_expand_tilde
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               char *param_9,byte **param_10,undefined8 param_11,byte *param_12,undefined8 param_13,
               undefined8 param_14)

{
  byte bVar1;
  byte *pbVar2;
  byte *pbVar3;
  __uid_t __uid;
  size_t sVar4;
  byte *__name;
  passwd *ppVar5;
  long lVar6;
  undefined8 extraout_RDX;
  char *pcVar7;
  byte **ppbVar8;
  uint uVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined in_stack_ffffffffffffffb8;
  long local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  pbVar2 = *param_10;
  if (param_9[(long)pbVar2] == 0) {
    uVar9 = 0xffffffff;
LAB_00135ad0:
    lVar6 = environ_find(global_environ,"HOME");
    if ((lVar6 == 0) ||
       (pcVar7 = *(char **)(lVar6 + 8), uVar10 = extraout_XMM0_Da_01, uVar11 = extraout_XMM0_Db_00,
       *pcVar7 == '\0')) {
      __uid = getuid();
      ppVar5 = getpwuid(__uid);
      if (ppVar5 != (passwd *)0x0) {
        pcVar7 = ppVar5->pw_dir;
        uVar10 = extraout_XMM0_Da_02;
        uVar11 = extraout_XMM0_Db_01;
        goto joined_r0x00135b09;
      }
      goto LAB_00135b10;
    }
  }
  else {
    param_12 = pbVar2 + 1;
    *param_10 = param_12;
    bVar1 = param_9[(long)pbVar2];
    uVar9 = (uint)bVar1;
    if (((bVar1 == 0x2f) || (bVar1 == 0x20)) || (bVar1 == 9)) goto LAB_00135ad0;
    *param_10 = pbVar2;
    ppbVar8 = param_10;
    sVar4 = strlen(param_9);
    __name = (byte *)xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,sVar4,ppbVar8,extraout_RDX,param_12,param_13,param_14);
    pbVar3 = *param_10;
    pbVar2 = (byte *)(param_9 + (long)pbVar3);
    bVar1 = *pbVar2;
    param_12 = __name;
    while (bVar1 != 0) {
      *param_10 = pbVar3 + 1;
      bVar1 = *pbVar2;
      uVar9 = (uint)bVar1;
      if (((bVar1 == 0x2f) || (uVar9 == 0x20)) || (uVar9 == 9)) goto LAB_00135a4d;
      *param_12 = bVar1;
      pbVar3 = *param_10;
      param_12 = param_12 + 1;
      pbVar2 = (byte *)(param_9 + (long)pbVar3);
      bVar1 = *pbVar2;
    }
    uVar9 = 0xffffffff;
LAB_00135a4d:
    *param_12 = 0;
    ppVar5 = getpwnam((char *)__name);
    if (ppVar5 == (passwd *)0x0) {
      free(__name);
      local_38 = 0;
      goto LAB_00135aa5;
    }
    pcVar7 = ppVar5->pw_dir;
    free(__name);
    uVar10 = extraout_XMM0_Da_00;
    uVar11 = extraout_XMM0_Db;
joined_r0x00135b09:
    if (pcVar7 == (char *)0x0) {
LAB_00135b10:
      local_38 = 0;
      goto LAB_00135aa5;
    }
  }
  if (uVar9 == 0xffffffff) {
    xasprintf(CONCAT44(uVar11,uVar10),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              &local_38,"%s",pcVar7,param_12,param_13,param_14,in_stack_ffffffffffffffb8);
  }
  else {
    xasprintf(CONCAT44(uVar11,uVar10),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              &local_38,&DAT_00179c5e,pcVar7,(ulong)uVar9,param_13,param_14,
              in_stack_ffffffffffffffb8);
  }
LAB_00135aa5:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return local_38;
}



int cmd_string_parse(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    char *param_9,int **param_10,char *param_11,byte *param_12,long *param_13,
                    undefined8 param_14)

{
  byte bVar1;
  byte *pbVar2;
  byte *pbVar3;
  char **__dest;
  char *pcVar4;
  char *pcVar5;
  size_t sVar6;
  int *piVar7;
  byte *pbVar8;
  byte *pbVar9;
  int iVar10;
  long *plVar11;
  uint uVar12;
  int iVar13;
  char **ppcVar14;
  size_t __n;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined in_stack_ffffffffffffff78;
  byte *local_58;
  char *local_50;
  byte *local_48;
  long local_40;
  
  __dest = (char **)0x0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar10 = 0;
  *param_13 = 0;
  local_50 = (char *)0x0;
  local_48 = (byte *)0x0;
  *param_10 = (int *)0x0;
  local_58 = (byte *)0x0;
  pbVar9 = param_12;
  plVar11 = param_13;
LAB_00135bd0:
  do {
    pbVar8 = local_58;
    bVar1 = param_9[(long)local_58];
    uVar12 = (uint)bVar1;
    pbVar3 = local_58;
    if (bVar1 != 0) {
      pbVar9 = local_58 + 1;
      if (bVar1 < 0x28) {
        if (bVar1 < 9) goto switchD_00135c0f_caseD_a;
        pbVar3 = pbVar9;
        switch(bVar1) {
        case 9:
        case 0x20:
          goto switchD_00135c0f_caseD_9;
        default:
          goto switchD_00135c0f_caseD_a;
        case 0x22:
          pbVar8 = (byte *)0x1;
          local_58 = pbVar9;
          pcVar4 = (char *)cmd_string_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7
                                             ,param_8,(long)param_9,&local_58,'\"',(byte *)0x1,
                                             plVar11,param_14);
          param_1 = CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03);
          pbVar9 = pbVar8;
          uVar15 = extraout_XMM0_Da_03;
          uVar16 = extraout_XMM0_Db_02;
          break;
        case 0x23:
          if (param_9[(long)pbVar9] != '\0') {
            pbVar2 = local_58 + 2;
            do {
              pbVar8 = pbVar2;
              pbVar2 = pbVar8 + 1;
              pbVar3 = pbVar8;
            } while ((param_9 + -1)[(long)(pbVar8 + 1)] != '\0');
          }
          goto LAB_00135c34;
        case 0x24:
          local_58 = pbVar9;
          pcVar4 = (char *)cmd_string_variable(param_1,param_2,param_3,param_4,param_5,param_6,
                                               param_7,param_8,(long)param_9,(long *)&local_58,
                                               pbVar8,pbVar9,plVar11,param_14);
          param_1 = CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04);
          uVar15 = extraout_XMM0_Da_04;
          uVar16 = extraout_XMM0_Db_03;
          if (pcVar4 == (char *)0x0) goto LAB_00135d40;
          goto LAB_00135d10;
        case 0x27:
          pbVar8 = (byte *)0x0;
          local_58 = pbVar9;
          pcVar4 = (char *)cmd_string_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7
                                             ,param_8,(long)param_9,&local_58,'\'',(byte *)0x0,
                                             plVar11,param_14);
          param_1 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02);
          pbVar9 = pbVar8;
          uVar15 = extraout_XMM0_Da_02;
          uVar16 = extraout_XMM0_Db_01;
        }
joined_r0x00135d0e:
        if (pcVar4 != (char *)0x0) {
LAB_00135d10:
          param_1 = cmd_string_copy(CONCAT44(uVar16,uVar15),param_2,param_3,param_4,param_5,param_6,
                                    param_7,param_8,(long *)&local_50,pcVar4,(long *)&local_48,
                                    pbVar9,plVar11,param_14);
          goto LAB_00135bd0;
        }
      }
      else {
        if ((bVar1 == 0x7e) && (local_50 == (char *)0x0)) {
          local_58 = pbVar9;
          pcVar4 = (char *)cmd_string_expand_tilde
                                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                      param_8,param_9,&local_58,pbVar8,pbVar9,plVar11,param_14);
          param_1 = CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_05);
          uVar15 = extraout_XMM0_Da_05;
          uVar16 = extraout_XMM0_Db_04;
          goto joined_r0x00135d0e;
        }
switchD_00135c0f_caseD_a:
        local_58 = pbVar9;
        if (local_48 < (byte *)0xfffffffffffffffd) {
          local_50 = (char *)xrealloc((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                      param_8,local_50,(long)(local_48 + 1),pbVar8,pbVar9,plVar11,
                                      param_14);
          param_1 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01);
          pbVar9 = local_48 + 1;
          local_50[(long)local_48] = bVar1;
          local_48 = pbVar9;
          goto LAB_00135bd0;
        }
      }
LAB_00135d40:
      xasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_13,
                "invalid or unknown command: %s",param_9,pbVar9,plVar11,param_14,
                in_stack_ffffffffffffff78);
      free(local_50);
      if (__dest == (char **)0x0) goto LAB_00135d65;
      iVar13 = -1;
      goto LAB_00135dd6;
    }
LAB_00135c34:
    local_58 = pbVar3;
    uVar12 = 0xffffffff;
    pbVar3 = local_58;
switchD_00135c0f_caseD_9:
    local_58 = pbVar3;
    if (local_50 != (char *)0x0) {
      local_50 = (char *)xrealloc((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                  param_8,local_50,(long)(local_48 + 1),pbVar8,pbVar9,plVar11,
                                  param_14);
      local_50[(long)local_48] = '\0';
      __dest = (char **)xreallocarray(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,
                                      param_7,param_8,__dest,(long)(iVar10 + 1),8,pbVar9,plVar11,
                                      param_14);
      param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00);
      __dest[iVar10] = local_50;
      local_50 = (char *)0x0;
      local_48 = (byte *)0x0;
      iVar10 = iVar10 + 1;
    }
  } while (uVar12 != 0xffffffff);
  __n = (long)iVar10 * 8;
  iVar13 = -1;
  if (iVar10 == 0) {
    free(local_50);
    if (__dest == (char **)0x0) {
LAB_00135d65:
      iVar13 = -1;
      goto LAB_00135d6b;
    }
  }
  else {
    do {
      __n = __n - 8;
      pcVar4 = *__dest;
      pcVar5 = strchr(pcVar4,0x3d);
      sVar6 = strcspn(pcVar4," \t");
      if ((pcVar4 + sVar6 < pcVar5) || (pcVar5 == (char *)0x0)) {
        piVar7 = cmd_list_parse(extraout_XMM0_Da_06,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,iVar10,(long)__dest,param_11,(ulong)param_12 & 0xffffffff,
                                param_13,param_14);
        *param_10 = piVar7;
        iVar13 = -(uint)(piVar7 == (int *)0x0);
        free(local_50);
        goto LAB_00135dd6;
      }
      iVar10 = iVar10 + -1;
      environ_put(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_06),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,global_environ,pcVar4,pcVar5,pbVar9,plVar11,param_14);
      memmove(__dest,__dest + 1,__n);
    } while (iVar10 != 0);
    free(local_50);
LAB_00135dd6:
    if (iVar10 != 0) {
      ppcVar14 = __dest;
      do {
        pcVar4 = *ppcVar14;
        ppcVar14 = ppcVar14 + 1;
        free(pcVar4);
      } while (__dest + (ulong)(iVar10 - 1) + 1 != ppcVar14);
    }
  }
  free(__dest);
LAB_00135d6b:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar13;
}



undefined8
cmd_swap_pane_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,long param_10,undefined8 param_11,ulong param_12,ulong param_13,
                  undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  undefined4 uVar4;
  uint *puVar5;
  long lVar6;
  long lVar7;
  bool bVar8;
  undefined8 uVar9;
  long lVar10;
  undefined7 extraout_var;
  long lVar11;
  undefined8 extraout_RDX;
  long *plVar12;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long lVar13;
  undefined8 uVar14;
  long lVar15;
  uint *puVar16;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar17;
  undefined8 extraout_XMM0_Qa_00;
  undefined in_stack_ffffffffffffffb8;
  
  lVar15 = *(long *)(param_10 + 0xb8);
  lVar13 = *(long *)(param_10 + 0xf8);
  puVar5 = *(uint **)(*(long *)(param_10 + 0xa8) + 8);
  puVar16 = *(uint **)(*(long *)(param_10 + 0xe8) + 8);
  server_unzoom_window
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar5,param_10,
             param_11,param_12,param_13,param_14);
  uVar14 = 0x44;
  uVar9 = args_has(*(byte ***)(param_9 + 8),0x44);
  if ((int)uVar9 == 0) {
    uVar14 = 0x55;
    uVar9 = args_has(*(byte ***)(param_9 + 8),0x55);
    if ((int)uVar9 == 0) {
      uVar9 = server_unzoom_window
                        (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,puVar16,uVar14,extraout_RDX_00,param_12,param_13,param_14);
      if (puVar5 != puVar16) {
        cmdq_error(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                   "swap pane on different window is not supported with tmate",extraout_RDX_01,
                   param_12,param_13,param_14,in_stack_ffffffffffffffb8);
        return 0xffffffff;
      }
      goto LAB_00135f66;
    }
    lVar13 = **(long **)(*(long *)(lVar15 + 0x200) + 8);
    uVar9 = extraout_RDX_00;
    uVar17 = extraout_XMM0_Qa_00;
    if (lVar13 == 0) {
      lVar13 = **(long **)(*(long *)(puVar5 + 0x54) + 8);
    }
  }
  else {
    lVar13 = *(long *)(lVar15 + 0x1f8);
    uVar9 = extraout_RDX;
    uVar17 = extraout_XMM0_Qa;
    if (lVar13 == 0) {
      lVar13 = *(long *)(puVar5 + 0x52);
    }
  }
  uVar9 = server_unzoom_window
                    (uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar5,uVar14,
                     uVar9,param_12,param_13,param_14);
  puVar16 = puVar5;
LAB_00135f66:
  if (lVar15 != lVar13) {
    plVar12 = *(long **)(lVar15 + 0x200);
    lVar11 = *(long *)(lVar15 + 0x1f8);
    lVar6 = *(long *)plVar12[1];
    if (lVar11 == 0) {
      *(long **)(puVar5 + 0x54) = plVar12;
    }
    else {
      *(long **)(lVar11 + 0x200) = plVar12;
      plVar12 = *(long **)(lVar15 + 0x200);
    }
    *plVar12 = lVar11;
    lVar7 = *(long *)(lVar13 + 0x1f8);
    lVar11 = lVar15 + 0x1f8;
    *(long *)(lVar15 + 0x1f8) = lVar7;
    if (lVar7 == 0) {
      *(long *)(puVar16 + 0x54) = lVar11;
    }
    else {
      *(long *)(lVar7 + 0x200) = lVar11;
    }
    plVar12 = *(long **)(lVar13 + 0x200);
    lVar7 = lVar13 + 0x1f8;
    *(long **)(lVar15 + 0x200) = plVar12;
    *plVar12 = lVar15;
    lVar10 = lVar15;
    if ((lVar6 == lVar13) || (lVar11 = lVar6 + 0x1f8, lVar10 = lVar6, lVar6 != 0)) {
      lVar6 = *(long *)(lVar10 + 0x1f8);
      *(long *)(lVar13 + 0x1f8) = lVar6;
      if (lVar6 == 0) {
        *(long *)(puVar5 + 0x54) = lVar7;
      }
      else {
        *(long *)(lVar6 + 0x200) = lVar7;
      }
      *(long *)(lVar10 + 0x1f8) = lVar13;
      *(long *)(lVar13 + 0x200) = lVar11;
    }
    else {
      lVar6 = *(long *)(puVar5 + 0x52);
      *(long *)(lVar13 + 0x1f8) = lVar6;
      if (lVar6 == 0) {
        *(long *)(puVar5 + 0x54) = lVar7;
      }
      else {
        *(long *)(lVar6 + 0x200) = lVar7;
      }
      *(long *)(puVar5 + 0x52) = lVar13;
      *(uint **)(lVar13 + 0x200) = puVar5 + 0x52;
    }
    lVar6 = *(long *)(lVar13 + 0x10);
    lVar7 = *(long *)(lVar15 + 0x10);
    uVar1 = *(uint *)(lVar13 + 0x24);
    uVar2 = *(uint *)(lVar15 + 0x20);
    *(long *)(lVar6 + 0x20) = lVar15;
    uVar3 = *(uint *)(lVar13 + 0x20);
    *(long *)(lVar15 + 0x10) = lVar6;
    uVar4 = *(undefined4 *)(lVar15 + 0x28);
    *(long *)(lVar7 + 0x20) = lVar13;
    *(long *)(lVar13 + 0x10) = lVar7;
    uVar14 = *(undefined8 *)(lVar13 + 0x28);
    *(uint **)(lVar13 + 8) = puVar5;
    *(uint **)(lVar15 + 8) = puVar16;
    *(undefined4 *)(lVar13 + 0x28) = uVar4;
    *(undefined4 *)(lVar13 + 0x2c) = *(undefined4 *)(lVar15 + 0x2c);
    uVar9 = window_pane_resize(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar13,
                               uVar2,*(uint *)(lVar15 + 0x24),lVar11,(ulong)uVar1,param_14);
    *(undefined8 *)(lVar15 + 0x28) = uVar14;
    window_pane_resize(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar15,uVar3,
                       uVar1,lVar11,(ulong)uVar1,param_14);
    uVar9 = args_has(*(byte ***)(param_9 + 8),100);
    if ((int)uVar9 == 0) {
      bVar8 = window_pane_visible(lVar15);
      if ((int)CONCAT71(extraout_var,bVar8) == 0) {
        lVar15 = lVar13;
      }
      window_set_active_pane((long)puVar16,lVar15);
    }
    else {
      if (*(long *)(puVar16 + 0x4e) == lVar13) {
        window_set_active_pane((long)puVar16,lVar15);
      }
      if (*(long *)(puVar5 + 0x4e) == lVar15) {
        window_set_active_pane((long)puVar5,lVar13);
      }
    }
    server_redraw_window((long)puVar16);
    server_redraw_window((long)puVar5);
    return 0;
  }
  return 0;
}



undefined8
cmd_swap_window_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
          undefined8 param_9,long param_10,undefined8 param_11,ulong param_12,long param_13,
          undefined8 param_14)

{
  undefined1 in_stack_fffffffffffffff8;
  
  cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
             "swap window is not supported with tmate",param_11,param_12,param_13,param_14,
             in_stack_fffffffffffffff8);
  return 0xffffffff;
}



undefined8
cmd_switch_client_exec
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,undefined8 param_11,char *param_12,uint *param_13,ulong param_14)

{
  uint *puVar1;
  byte **ppbVar2;
  long lVar3;
  undefined8 uVar4;
  char *pcVar5;
  char **ppcVar6;
  long lVar7;
  undefined8 uVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  long lVar9;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 uVar10;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 extraout_XMM0_Qa_05;
  undefined8 extraout_XMM0_Qa_06;
  undefined8 extraout_XMM0_Qa_07;
  undefined8 extraout_XMM0_Qa_08;
  undefined8 extraout_XMM0_Qa_09;
  undefined in_stack_ffffffffffffffc8;
  
  ppbVar2 = *(byte ***)(param_9 + 8);
  lVar3 = *(long *)(param_10 + 0x80);
  lVar7 = *(long *)(param_10 + 0xa0);
  uVar4 = args_has(ppbVar2,0x72);
  if ((int)uVar4 != 0) {
    *(uint *)(lVar3 + 0x420) = *(uint *)(lVar3 + 0x420) ^ 0x800;
  }
  pcVar5 = (char *)args_get(ppbVar2,0x54);
  if (pcVar5 != (char *)0x0) {
    ppcVar6 = key_bindings_get_table
                        (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         pcVar5,0,extraout_RDX,param_12,param_13,param_14);
    if (ppcVar6 == (char **)0x0) {
      cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_10,"table %s doesn\'t exist",pcVar5,(ulong)param_12,(long)param_13,param_14,
                 in_stack_ffffffffffffffc8);
      uVar4 = 0xffffffff;
    }
    else {
      *(int *)(ppcVar6 + 2) = *(int *)(ppcVar6 + 2) + 1;
      key_bindings_unref_table(*(void ***)(lVar3 + 0x428));
      *(char ***)(lVar3 + 0x428) = ppcVar6;
      uVar4 = 0;
    }
    return uVar4;
  }
  uVar4 = args_has(ppbVar2,0x6e);
  if ((int)uVar4 == 0) {
    uVar4 = args_has(ppbVar2,0x70);
    if ((int)uVar4 == 0) {
      uVar4 = args_has(ppbVar2,0x6c);
      if ((int)uVar4 == 0) {
        if (*(long *)(param_10 + 8) == 0) {
          return uVar4;
        }
        lVar9 = *(long *)(param_10 + 0xa8);
        uVar4 = extraout_RDX_05;
        uVar10 = extraout_XMM0_Qa_05;
        if (lVar9 != 0) {
          param_13 = *(uint **)(param_10 + 0xb8);
          if (param_13 != (uint *)0x0) {
            window_set_active_pane(*(long *)(param_13 + 2),(long)param_13);
            lVar9 = *(long *)(param_10 + 0xa8);
            uVar4 = extraout_RDX_06;
            uVar10 = extraout_XMM0_Qa_06;
          }
          session_set_current(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar7,
                              lVar9,uVar4,param_12,param_13,param_14);
          uVar4 = extraout_RDX_07;
          uVar10 = extraout_XMM0_Qa_07;
        }
        if (lVar3 == 0) goto LAB_0013638f;
      }
      else {
        uVar4 = extraout_RDX_05;
        uVar10 = extraout_XMM0_Qa_05;
        if (((*(long *)(lVar3 + 0x5a0) == 0) ||
            (uVar8 = session_alive(*(long *)(lVar3 + 0x5a0)), uVar4 = extraout_RDX_09,
            uVar10 = extraout_XMM0_Qa_09, (int)uVar8 == 0)) ||
           (lVar7 = *(long *)(lVar3 + 0x5a0), lVar7 == 0)) {
          cmdq_error(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                     "can\'t find last session",uVar4,(ulong)param_12,(long)param_13,param_14,
                     in_stack_ffffffffffffffc8);
          return 0xffffffff;
        }
      }
    }
    else {
      lVar7 = session_previous_session(*(long *)(lVar3 + 0x598));
      if (lVar7 == 0) {
        cmdq_error(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   param_10,"can\'t find previous session",extraout_RDX_00,(ulong)param_12,
                   (long)param_13,param_14,in_stack_ffffffffffffffc8);
        return 0xffffffff;
      }
    }
  }
  else {
    lVar7 = session_next_session(*(long *)(lVar3 + 0x598));
    if (lVar7 == 0) {
      cmdq_error(extraout_XMM0_Qa_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_10,"can\'t find next session",extraout_RDX_04,(ulong)param_12,(long)param_13,
                 param_14,in_stack_ffffffffffffffc8);
      return 0xffffffff;
    }
  }
  uVar8 = args_has(ppbVar2,0x45);
  uVar4 = extraout_RDX_01;
  uVar10 = extraout_XMM0_Qa_02;
  if ((int)uVar8 == 0) {
    pcVar5 = options_get_string(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,*(char ***)(lVar7 + 0x108),"update-environment",
                                extraout_RDX_01,param_12,param_13,param_14);
    uVar10 = environ_update(extraout_XMM0_Qa_08,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,pcVar5,*(char ***)(lVar3 + 0xb8),*(char ***)(lVar7 + 0x120),
                            param_12,param_13,param_14);
    uVar4 = extraout_RDX_08;
  }
LAB_0013638f:
  lVar9 = *(long *)(lVar3 + 0x598);
  if ((lVar9 != lVar7) && (lVar9 != 0)) {
    *(long *)(lVar3 + 0x5a0) = lVar9;
  }
  *(long *)(lVar3 + 0x598) = lVar7;
  uVar8 = 0;
  uVar4 = server_client_set_key_table
                    (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,
                     (char *)0x0,uVar4,param_12,param_13,param_14);
  status_timer_start(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,uVar8,
                     extraout_RDX_02,param_12,(long)param_13,param_14);
  session_update_activity(lVar7);
  uVar4 = 0;
  gettimeofday((timeval *)(lVar7 + 0x28),(__timezone_ptr_t)0x0);
  uVar10 = recalculate_sizes(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8);
  server_check_unattached(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  uVar10 = server_redraw_client(lVar3);
  puVar1 = (uint *)(*(long *)(lVar7 + 0xe0) + 0x38);
  *puVar1 = *puVar1 & 0xfffffff8;
  alerts_check_session
            (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar7,uVar4,
             extraout_RDX_03,(ulong)param_12,(ulong)param_13,param_14);
  return 0;
}



undefined8
cmd_unbind_key_mode_table
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,ulong param_11,ulong param_12,long param_13,undefined8 param_14)

{
  byte **ppbVar1;
  long lVar2;
  char *pcVar3;
  undefined1 *puVar4;
  void *pvVar5;
  undefined8 uVar6;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffff98;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar3 = (char *)args_get(ppbVar1,0x74);
  puVar4 = mode_key_findtable(pcVar3);
  if (puVar4 == (undefined1 *)0x0) {
    cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               "unknown key table: %s",pcVar3,param_12,param_13,param_14,in_stack_ffffffffffffff98);
    uVar6 = 0xffffffff;
  }
  else {
    if (param_11 == 0xfffe00000000) {
      while( true ) {
        pvVar5 = **(void ***)(puVar4 + 0x10);
        if (pvVar5 == (void *)0x0) break;
        mode_key_tree_RB_REMOVE((long *)*(void ***)(puVar4 + 0x10),(long)pvVar5);
        free(pvVar5);
      }
    }
    else {
      args_has(ppbVar1,99);
      pvVar5 = (void *)mode_key_tree_RB_FIND
                                 (*(ulong ***)(puVar4 + 0x10),(ulong *)&stack0xffffffffffffff98);
      if (pvVar5 != (void *)0x0) {
        mode_key_tree_RB_REMOVE(*(long **)(puVar4 + 0x10),(long)pvVar5);
        free(pvVar5);
      }
    }
    uVar6 = 0;
  }
  if (lVar2 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



ulong cmd_unbind_key_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,long param_9,long param_10,undefined8 param_11,
                         ulong param_12,long param_13,undefined8 param_14)

{
  byte **ppbVar1;
  undefined8 uVar2;
  ulong uVar3;
  ulong uVar4;
  char *pcVar5;
  char **ppcVar6;
  undefined8 uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined unaff_BPL;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 extraout_XMM0_Qa_05;
  undefined8 extraout_XMM0_Qa_06;
  undefined8 extraout_XMM0_Qa_07;
  undefined8 uVar8;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  uVar2 = args_has(ppbVar1,0x61);
  if ((int)uVar2 == 0) {
    if (*(int *)(ppbVar1 + 1) != 1) {
      cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                 "missing key",extraout_RDX,param_12,param_13,param_14,unaff_BPL);
      return 0xffffffff;
    }
    uVar3 = key_string_lookup_string
                      (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       *(byte **)ppbVar1[2]);
    if ((uVar3 & 0xfffffffeffffffff) == 0xfffe00000000) {
      cmdq_error(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 param_10,"unknown key: %s",*(undefined8 *)ppbVar1[2],param_12,param_13,param_14,
                 unaff_BPL);
      return 0xffffffff;
    }
    uVar4 = args_has(ppbVar1,0x74);
    uVar2 = extraout_XMM0_Qa_01;
    if ((int)uVar4 == 0) {
      uVar2 = args_has(ppbVar1,0x54);
      if ((int)uVar2 == 0) {
        pcVar5 = "root";
        uVar7 = args_has(ppbVar1,0x6e);
        uVar8 = extraout_RDX_04;
        uVar2 = extraout_XMM0_Qa_07;
        if ((int)uVar7 == 0) {
          pcVar5 = "prefix";
        }
      }
      else {
        pcVar5 = (char *)args_get(ppbVar1,0x54);
        ppcVar6 = key_bindings_get_table
                            (extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,pcVar5,0,extraout_RDX_00,param_12,param_13,param_14);
        uVar8 = extraout_RDX_01;
        uVar2 = extraout_XMM0_Qa_03;
        if (ppcVar6 == (char **)0x0) goto LAB_0013684d;
      }
      key_bindings_remove(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,pcVar5,uVar3
                          ,uVar8,param_12,param_13,param_14);
      return uVar4 & 0xffffffff;
    }
  }
  else {
    if (*(int *)(ppbVar1 + 1) != 0) {
      cmdq_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                 "key given with -a",extraout_RDX,param_12,param_13,param_14,unaff_BPL);
      return 0xffffffff;
    }
    uVar3 = args_has(ppbVar1,0x74);
    if ((int)uVar3 == 0) {
      uVar2 = 0x54;
      pcVar5 = (char *)args_get(ppbVar1,0x54);
      if (pcVar5 == (char *)0x0) {
        uVar8 = key_bindings_remove_table
                          (extraout_XMM0_Qa_05,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,"root",uVar2,extraout_RDX_02,param_12,param_13,param_14);
        key_bindings_remove_table
                  (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"prefix",uVar2,
                   extraout_RDX_05,param_12,param_13,param_14);
        return uVar3 & 0xffffffff;
      }
      uVar8 = 0;
      ppcVar6 = key_bindings_get_table
                          (extraout_XMM0_Qa_05,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,pcVar5,0,extraout_RDX_02,param_12,param_13,param_14);
      uVar2 = extraout_XMM0_Qa_06;
      if (ppcVar6 != (char **)0x0) {
        key_bindings_remove_table
                  (extraout_XMM0_Qa_06,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   pcVar5,uVar8,extraout_RDX_03,param_12,param_13,param_14);
        return uVar3 & 0xffffffff;
      }
LAB_0013684d:
      cmdq_error(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                 "table %s doesn\'t exist",pcVar5,param_12,param_13,param_14,unaff_BPL);
      return 0xffffffff;
    }
    uVar3 = 0xfffe00000000;
    uVar2 = extraout_XMM0_Qa_04;
  }
  uVar3 = cmd_unbind_key_mode_table
                    (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                     uVar3,param_12,param_13,param_14);
  return uVar3;
}



void wait_channels_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_00136898:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x40);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x48) != 1)) {
        *(undefined4 *)(*param_1 + 0x48) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x40);
      lVar3 = *(long *)(lVar2 + 0x30);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x38);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x48) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x38) == param_2) {
          lVar3 = *(long *)(param_2 + 0x30);
          *(long *)(lVar1 + 0x38) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x40) = lVar2;
            lVar3 = lVar2;
LAB_00136ab7:
            *(long *)(lVar3 + 0x30) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x40) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x40);
            *(long *)(param_2 + 0x40) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x30) == lVar1) goto LAB_00136ab7;
              *(long *)(lVar3 + 0x38) = param_2;
            }
          }
          *(long *)(param_2 + 0x30) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x30);
          *(long *)(lVar1 + 0x40) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x48) = 0;
        lVar1 = *(long *)(lVar3 + 0x38);
        *(undefined4 *)(lVar2 + 0x48) = 1;
        *(long *)(lVar2 + 0x30) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x40) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x40);
        *(long *)(lVar3 + 0x40) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x30) == lVar2) {
          *(long *)(lVar1 + 0x30) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x38) = lVar3;
        }
        *(long *)(lVar3 + 0x38) = lVar2;
        *(long *)(lVar2 + 0x40) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x48) = 0;
        *(undefined4 *)(lVar1 + 0x48) = 0;
        *(undefined4 *)(lVar2 + 0x48) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x48) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x30) == param_2) {
        lVar3 = *(long *)(param_2 + 0x38);
        *(long *)(lVar1 + 0x30) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x40) = lVar2;
          lVar3 = lVar2;
LAB_001369be:
          if (*(long *)(lVar3 + 0x30) == lVar1) {
            *(long *)(lVar3 + 0x30) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x38) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x40) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x40);
          *(long *)(param_2 + 0x40) = lVar3;
          if (lVar3 != 0) goto LAB_001369be;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x38) = lVar1;
        *(long *)(lVar1 + 0x40) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x48) = 0;
      lVar1 = *(long *)(lVar2 + 0x38);
      *(undefined4 *)(lVar2 + 0x48) = 1;
      lVar3 = *(long *)(lVar1 + 0x30);
      *(long *)(lVar2 + 0x38) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x40) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x40);
      *(long *)(lVar1 + 0x40) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x30) == lVar2) {
        *(long *)(lVar3 + 0x30) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x38) = lVar1;
      }
      *(long *)(lVar1 + 0x30) = lVar2;
      *(long *)(lVar2 + 0x40) = lVar1;
      goto LAB_00136898;
    }
    *(undefined4 *)(lVar3 + 0x48) = 0;
    *(undefined4 *)(lVar1 + 0x48) = 0;
    *(undefined4 *)(lVar2 + 0x48) = 1;
    param_2 = lVar2;
  } while( true );
}



void wait_channels_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_00136b65(param_1,param_2,param_3);
  return;
}



void FUN_00136b65(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x48) != 0)) goto LAB_00136c1b;
    if (*param_1 == param_3) goto joined_r0x00136d5e;
    lVar2 = *(long *)(param_2 + 0x30);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x48) == 1) {
        lVar1 = *(long *)(lVar2 + 0x38);
        *(undefined4 *)(lVar2 + 0x48) = 0;
        *(undefined4 *)(param_2 + 0x48) = 1;
        *(long *)(param_2 + 0x30) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x40) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x40);
        *(long *)(lVar2 + 0x40) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x40) + 0x30) == param_2) {
          *(long *)(lVar3 + 0x30) = lVar2;
          lVar1 = *(long *)(param_2 + 0x30);
        }
        else {
          *(long *)(lVar3 + 0x38) = lVar2;
        }
        *(long *)(lVar2 + 0x38) = param_2;
        *(long *)(param_2 + 0x40) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x30);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x48) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x38);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x48) == 0)) goto LAB_00136b54;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x48) != 0)) goto LAB_00136d02;
        lVar2 = *(long *)(lVar3 + 0x30);
        *(undefined4 *)(lVar3 + 0x48) = 0;
        *(undefined4 *)(lVar1 + 0x48) = 1;
        *(long *)(lVar1 + 0x38) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x40) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x40);
        *(long *)(lVar3 + 0x40) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x30) == lVar1) {
          *(long *)(lVar2 + 0x30) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x38) = lVar3;
        }
        *(long *)(lVar3 + 0x30) = lVar1;
        *(long *)(lVar1 + 0x40) = lVar3;
        lVar3 = *(long *)(param_2 + 0x30);
        lVar2 = *(long *)(lVar3 + 0x30);
        *(undefined4 *)(lVar3 + 0x48) = *(undefined4 *)(param_2 + 0x48);
        *(undefined4 *)(param_2 + 0x48) = 0;
        if (lVar2 != 0) goto LAB_00136d15;
      }
      else {
LAB_00136d02:
        lVar3 = *(long *)(param_2 + 0x30);
        *(undefined4 *)(lVar1 + 0x48) = *(undefined4 *)(param_2 + 0x48);
        *(undefined4 *)(param_2 + 0x48) = 0;
LAB_00136d15:
        *(undefined4 *)(lVar2 + 0x48) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x38);
      *(long *)(param_2 + 0x30) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x40) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x40);
      *(long *)(lVar3 + 0x40) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x40) + 0x30) == param_2) {
        *(long *)(lVar2 + 0x30) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x38) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x38) = param_2;
      *(long *)(param_2 + 0x40) = lVar3;
      goto joined_r0x00136d5e;
    }
    lVar2 = *(long *)(param_2 + 0x38);
    lVar3 = *(long *)(lVar2 + 0x30);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x48) == 1) {
      *(undefined4 *)(lVar2 + 0x48) = 0;
      *(undefined4 *)(param_2 + 0x48) = 1;
      *(long *)(param_2 + 0x38) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x40) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x40);
      *(long *)(lVar2 + 0x40) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x30) == param_2) {
        *(long *)(lVar4 + 0x30) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x38) = lVar2;
        lVar1 = *(long *)(param_2 + 0x38);
      }
      *(long *)(lVar2 + 0x30) = param_2;
      lVar3 = *(long *)(lVar1 + 0x30);
      *(long *)(param_2 + 0x40) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x48) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x38);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x48) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x38);
        *(undefined4 *)(lVar3 + 0x48) = 0;
        *(undefined4 *)(lVar1 + 0x48) = 1;
        *(long *)(lVar1 + 0x30) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x40) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x40);
        *(long *)(lVar3 + 0x40) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x30) == lVar1) {
          *(long *)(lVar2 + 0x30) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x38) = lVar3;
        }
        *(long *)(lVar3 + 0x38) = lVar1;
        lVar4 = *(long *)(param_2 + 0x38);
        *(long *)(lVar1 + 0x40) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x38);
        *(undefined4 *)(lVar4 + 0x48) = *(undefined4 *)(param_2 + 0x48);
        *(undefined4 *)(param_2 + 0x48) = 0;
        if (lVar2 != 0) goto LAB_00136bd0;
        goto LAB_00136bd7;
      }
LAB_00136bbf:
      lVar4 = *(long *)(param_2 + 0x38);
      *(undefined4 *)(lVar1 + 0x48) = *(undefined4 *)(param_2 + 0x48);
      *(undefined4 *)(param_2 + 0x48) = 0;
LAB_00136bd0:
      *(undefined4 *)(lVar2 + 0x48) = 0;
LAB_00136bd7:
      lVar2 = *(long *)(lVar4 + 0x30);
      *(long *)(param_2 + 0x38) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x40) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x40);
      *(long *)(lVar4 + 0x40) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x30) == param_2) {
        *(long *)(lVar2 + 0x30) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x38) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x30) = param_2;
      *(long *)(param_2 + 0x40) = lVar4;
joined_r0x00136d5e:
      if (param_3 == 0) {
        return;
      }
LAB_00136c1b:
      *(undefined4 *)(param_3 + 0x48) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x38);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x48) != 0)) goto LAB_00136bbf;
LAB_00136b54:
    *(undefined4 *)(lVar1 + 0x48) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x40);
  } while( true );
}



long wait_channels_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x38);
  if (*(long *)(param_2 + 0x30) == 0) {
    lVar7 = *(long *)(param_2 + 0x40);
    iVar4 = *(int *)(param_2 + 0x48);
    if (lVar6 != 0) goto LAB_00136f8c;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x30);
      } while (*(long *)(lVar5 + 0x30) != 0);
      lVar7 = *(long *)(lVar5 + 0x40);
      lVar6 = *(long *)(lVar5 + 0x38);
      iVar4 = *(int *)(lVar5 + 0x48);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x40) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x40);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x30) == lVar5) {
        *(long *)(lVar7 + 0x30) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x38) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x34);
      uVar2 = *(undefined4 *)(param_2 + 0x38);
      uVar3 = *(undefined4 *)(param_2 + 0x3c);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x30) = *(undefined4 *)(param_2 + 0x30);
      *(undefined4 *)(lVar5 + 0x34) = uVar1;
      *(undefined4 *)(lVar5 + 0x38) = uVar2;
      *(undefined4 *)(lVar5 + 0x3c) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x44);
      uVar2 = *(undefined4 *)(param_2 + 0x48);
      uVar3 = *(undefined4 *)(param_2 + 0x4c);
      *(undefined4 *)(lVar5 + 0x40) = *(undefined4 *)(param_2 + 0x40);
      *(undefined4 *)(lVar5 + 0x44) = uVar1;
      *(undefined4 *)(lVar5 + 0x48) = uVar2;
      *(undefined4 *)(lVar5 + 0x4c) = uVar3;
      lVar8 = *(long *)(param_2 + 0x40);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x30) == param_2) {
        *(long *)(lVar8 + 0x30) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x38) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x30) + 0x40) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x38) != 0) {
        *(long *)(*(long *)(param_2 + 0x38) + 0x40) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x40)) {
      }
      goto joined_r0x00136fa1;
    }
    lVar7 = *(long *)(param_2 + 0x40);
    iVar4 = *(int *)(param_2 + 0x48);
    lVar6 = *(long *)(param_2 + 0x30);
LAB_00136f8c:
    *(long *)(lVar6 + 0x40) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x30) == param_2) {
    *(long *)(lVar7 + 0x30) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x38) = lVar6;
  }
joined_r0x00136fa1:
  if (iVar4 == 0) {
    wait_channels_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



char ** wait_channels_RB_INSERT(char **param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  
  if ((char **)*param_1 == (char **)0x0) {
    param_2[8] = (char *)0x0;
    param_2[7] = (char *)0x0;
    param_2[6] = (char *)0x0;
    *(undefined4 *)(param_2 + 9) = 1;
    *param_1 = (char *)param_2;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    do {
      ppcVar3 = ppcVar1;
      iVar2 = strcmp(__s1,*ppcVar3);
      if (iVar2 < 0) {
        ppcVar1 = (char **)ppcVar3[6];
      }
      else {
        if (iVar2 == 0) {
          return ppcVar3;
        }
        ppcVar1 = (char **)ppcVar3[7];
      }
    } while (ppcVar1 != (char **)0x0);
    param_2[8] = (char *)ppcVar3;
    param_2[7] = (char *)0x0;
    param_2[6] = (char *)0x0;
    *(undefined4 *)(param_2 + 9) = 1;
    if (iVar2 < 0) {
      ppcVar3[6] = (char *)param_2;
    }
    else {
      ppcVar3[7] = (char *)param_2;
    }
  }
  wait_channels_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (char **)0x0;
}



char ** wait_channels_RB_FIND(char **param_1,char **param_2)

{
  char *__s1;
  int iVar1;
  char **ppcVar2;
  
  ppcVar2 = (char **)*param_1;
  if (ppcVar2 != (char **)0x0) {
    __s1 = *param_2;
    do {
      while( true ) {
        iVar1 = strcmp(__s1,*ppcVar2);
        if (iVar1 < 0) break;
        if (iVar1 == 0) {
          return ppcVar2;
        }
        ppcVar2 = (char **)ppcVar2[7];
        if (ppcVar2 == (char **)0x0) {
          return (char **)0x0;
        }
      }
      ppcVar2 = (char **)ppcVar2[6];
    } while (ppcVar2 != (char **)0x0);
  }
  return ppcVar2;
}



char ** wait_channels_RB_NFIND(long *param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  char **ppcVar4;
  
  if ((char **)*param_1 == (char **)0x0) {
    ppcVar4 = (char **)0x0;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    ppcVar4 = (char **)0x0;
    do {
      while( true ) {
        ppcVar3 = ppcVar1;
        iVar2 = strcmp(__s1,*ppcVar3);
        if (-1 < iVar2) break;
        ppcVar1 = (char **)ppcVar3[6];
        ppcVar4 = ppcVar3;
        if ((char **)ppcVar3[6] == (char **)0x0) {
          return ppcVar3;
        }
      }
      if (iVar2 == 0) {
        return ppcVar3;
      }
      ppcVar1 = (char **)ppcVar3[7];
    } while ((char **)ppcVar3[7] != (char **)0x0);
  }
  return ppcVar4;
}



long wait_channels_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x38);
  if (*(long *)(param_1 + 0x38) == 0) {
    lVar2 = *(long *)(param_1 + 0x40);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x30) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x38))) {
      while (lVar1 = *(long *)(lVar2 + 0x40), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x38);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x30);
    } while (*(long *)(lVar2 + 0x30) != 0);
  }
  return lVar2;
}



long wait_channels_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x30);
  if (*(long *)(param_1 + 0x30) == 0) {
    lVar2 = *(long *)(param_1 + 0x40);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x38) != param_1)) &&
       (*(long *)(lVar2 + 0x30) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x40), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x30) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x38);
    } while (*(long *)(lVar2 + 0x38) != 0);
  }
  return lVar2;
}



long wait_channels_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x38);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x30);
    }
  }
  return lVar2;
}



void wait_channel_cmp(char **param_1,char **param_2)

{
  strcmp(*param_1,*param_2);
  return;
}



char ** cmd_wait_for_add(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,char *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  char *extraout_RAX;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined auVar2 [16];
  undefined in_stack_ffffffffffffffe8;
  
  auVar2 = xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x50,param_10,
                   param_11,param_12,param_13,param_14);
  ppcVar1 = auVar2._0_8_;
  xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,param_9,param_10,auVar2._8_8_,param_12,param_13,param_14);
  ppcVar1[1] = (char *)0x0;
  *ppcVar1 = extraout_RAX;
  ppcVar1[3] = (char *)(ppcVar1 + 2);
  ppcVar1[2] = (char *)0x0;
  ppcVar1[4] = (char *)0x0;
  ppcVar1[5] = (char *)(ppcVar1 + 4);
  wait_channels_RB_INSERT((char **)&wait_channels,ppcVar1);
  log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "add wait channel %s",*ppcVar1,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
  return ppcVar1;
}



void cmd_wait_for_remove(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,void **param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  undefined1 unaff_BPL;
  
  if (*(int *)(param_9 + 1) != 0) {
    return;
  }
  if ((param_9[2] == (void *)0x0) && (*(int *)((long)param_9 + 0xc) != 0)) {
    log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "remove wait channel %s",*param_9,param_12,param_13,param_14,unaff_BPL);
    wait_channels_RB_REMOVE(&wait_channels,(long)param_9);
    free(*param_9);
    free(param_9);
    return;
  }
  return;
}



undefined8
cmd_wait_for_signal(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   undefined8 param_9,char *param_10,char **param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  int *piVar1;
  undefined8 *puVar2;
  uint uVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar4;
  undefined unaff_BL;
  int *piVar5;
  char *pcVar6;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  if (param_11 == (char **)0x0) {
    param_11 = cmd_wait_for_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                param_10,param_10,0,param_12,param_13,param_14);
    param_1 = extraout_XMM0_Da_02;
  }
  if ((param_11[2] == (char *)0x0) && (*(int *)((long)param_11 + 0xc) == 0)) {
    log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "signal wait channel %s, no waiters",*param_11,param_12,param_13,param_14,unaff_BL);
    *(undefined4 *)((long)param_11 + 0xc) = 1;
  }
  else {
    pcVar6 = "signal wait channel %s, with waiters";
    uVar7 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                     "signal wait channel %s, with waiters",*param_11,param_12,param_13,param_14,
                     unaff_BL);
    uVar4 = extraout_RDX;
    piVar1 = (int *)param_11[2];
    if ((int *)param_11[2] != (int *)0x0) {
      while( true ) {
        piVar5 = piVar1;
        piVar1 = *(int **)(piVar5 + 0x4a);
        puVar2 = *(undefined8 **)(piVar5 + 0x4c);
        if (piVar1 == (int *)0x0) break;
        *(undefined8 **)(piVar1 + 0x4c) = puVar2;
        **(int ***)(piVar5 + 0x4c) = piVar1;
        uVar3 = cmdq_free(piVar5);
        if (uVar3 == 0) {
          cmdq_continue(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                        param_6,param_7,param_8,piVar5);
        }
      }
      param_11[3] = (char *)puVar2;
      *puVar2 = 0;
      uVar3 = cmdq_free(piVar5);
      uVar4 = extraout_RDX_00;
      uVar7 = extraout_XMM0_Da_00;
      if (uVar3 == 0) {
        cmdq_continue(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,piVar5);
        uVar4 = extraout_RDX_01;
        uVar7 = extraout_XMM0_Da_01;
      }
    }
    cmd_wait_for_remove(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                        pcVar6,uVar4,param_12,param_13,param_14);
  }
  return 0;
}



void signal_waiting_clients
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               char *param_9)

{
  int *piVar1;
  undefined8 *puVar2;
  uint uVar3;
  char **__ptr;
  int *piVar4;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  char *local_78 [11];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_78[0] = param_9;
  __ptr = wait_channels_RB_FIND((char **)&wait_channels,local_78);
  if ((__ptr != (char **)0x0) && (piVar1 = (int *)__ptr[2], (int *)__ptr[2] != (int *)0x0)) {
    while( true ) {
      piVar4 = piVar1;
      piVar1 = *(int **)(piVar4 + 0x4a);
      puVar2 = *(undefined8 **)(piVar4 + 0x4c);
      if (piVar1 == (int *)0x0) break;
      *(undefined8 **)(piVar1 + 0x4c) = puVar2;
      **(int ***)(piVar4 + 0x4c) = piVar1;
      uVar3 = cmdq_free(piVar4);
      if (uVar3 == 0) {
        cmdq_continue(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      piVar4);
      }
    }
    __ptr[3] = (char *)puVar2;
    *puVar2 = 0;
    uVar3 = cmdq_free(piVar4);
    if (uVar3 == 0) {
      cmdq_continue(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    piVar4);
    }
    if (*(int *)(__ptr + 1) == 0) {
      wait_channels_RB_REMOVE(&wait_channels,(long)__ptr);
      free(*__ptr);
      free(__ptr);
    }
  }
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

int cmd_wait_for_wait(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     int *param_9,byte *param_10,char **param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  int **ppiVar1;
  char cVar2;
  int iVar3;
  ulong uVar4;
  long lVar5;
  char **ppcVar6;
  undefined8 extraout_RDX;
  undefined1 unaff_BPL;
  byte *pbVar7;
  byte *pbVar8;
  char *pcVar9;
  byte *pbVar10;
  undefined in_CF;
  undefined in_ZF;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da;
  
  uVar11 = (undefined4)param_1;
  uVar4 = 0xc;
  lVar5 = *(long *)(param_9 + 2);
  pbVar7 = param_10;
  pbVar10 = (byte *)"tmate-ready";
  do {
    pbVar8 = pbVar7;
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    pbVar8 = pbVar7 + 1;
    in_CF = *pbVar7 < *pbVar10;
    in_ZF = *pbVar7 == *pbVar10;
    pbVar7 = pbVar8;
    pbVar10 = pbVar10 + 1;
  } while ((bool)in_ZF);
  cVar2 = (!(bool)in_CF && !(bool)in_ZF) - in_CF;
  iVar3 = (int)cVar2;
  ppcVar6 = param_11;
  if ((cVar2 != '\0') || (ppcVar6 = (char **)(ulong)_DAT_001a4460, _DAT_001a4460 == 0)) {
    if ((lVar5 != 0) && (*(long *)(lVar5 + 0x598) == 0)) {
      if (param_11 == (char **)0x0) {
        param_11 = cmd_wait_for_add(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    (char *)param_10,pbVar8,ppcVar6,uVar4,param_10,param_14);
        uVar11 = extraout_XMM0_Da;
      }
      if (*(int *)((long)param_11 + 0xc) == 0) {
        log_emit(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "wait channel %s not woken (%p)",*param_11,lVar5,param_10,param_14,unaff_BPL);
        ppiVar1 = (int **)param_11[3];
        *(undefined8 *)(param_9 + 0x4a) = 0;
        *(int ***)(param_9 + 0x4c) = ppiVar1;
        *ppiVar1 = param_9;
        param_11[3] = (char *)(param_9 + 0x4a);
        *param_9 = *param_9 + 1;
        return 1;
      }
      pcVar9 = "wait channel %s already woken (%p)";
      uVar11 = log_emit(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                        "wait channel %s already woken (%p)",*param_11,lVar5,param_10,param_14,
                        unaff_BPL);
      cmd_wait_for_remove(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                          pcVar9,extraout_RDX,lVar5,param_10,param_14);
      return 0;
    }
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
               "not able to wait",ppcVar6,uVar4,(long)param_10,param_14,unaff_BPL);
    iVar3 = -1;
  }
  return iVar3;
}



int cmd_wait_for_lock(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     int *param_9,char *param_10,char **param_11,ulong param_12,long param_13,
                     undefined8 param_14)

{
  int **ppiVar1;
  undefined1 unaff_BPL;
  
  if ((*(long *)(param_9 + 2) == 0) || (*(long *)(*(long *)(param_9 + 2) + 0x598) != 0)) {
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
               "not able to lock",param_11,param_12,param_13,param_14,unaff_BPL);
    return -1;
  }
  if (param_11 == (char **)0x0) {
    param_11 = cmd_wait_for_add((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                ,param_10,param_10,0,param_12,param_13,param_14);
  }
  if (*(int *)(param_11 + 1) == 0) {
    *(undefined4 *)(param_11 + 1) = 1;
    return 0;
  }
  *(undefined8 *)(param_9 + 0x4a) = 0;
  ppiVar1 = (int **)param_11[5];
  *(int ***)(param_9 + 0x4c) = ppiVar1;
  *ppiVar1 = param_9;
  param_11[5] = (char *)(param_9 + 0x4a);
  *param_9 = *param_9 + 1;
  return 1;
}



undefined4
cmd_wait_for_unlock(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,undefined8 param_10,void **param_11,ulong param_12,
                   undefined8 param_13,undefined8 param_14)

{
  int *piVar1;
  long lVar2;
  uint uVar3;
  long *plVar4;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined1 in_stack_ffffffffffffffe8;
  
  if ((param_11 == (void **)0x0) || (*(int *)(param_11 + 1) == 0)) {
    cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               "channel %s not locked",param_10,param_12,param_9,param_14,in_stack_ffffffffffffffe8)
    ;
    uVar5 = 0xffffffff;
  }
  else {
    piVar1 = (int *)param_11[4];
    if (piVar1 == (int *)0x0) {
      *(undefined4 *)(param_11 + 1) = 0;
      cmd_wait_for_remove((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          param_11,param_10,param_11,param_12,param_9,param_14);
      return 0;
    }
    lVar2 = *(long *)(piVar1 + 0x4a);
    plVar4 = *(long **)(piVar1 + 0x4c);
    if (lVar2 == 0) {
      param_11[5] = plVar4;
    }
    else {
      *(long **)(lVar2 + 0x130) = plVar4;
      plVar4 = *(long **)(piVar1 + 0x4c);
    }
    *plVar4 = lVar2;
    uVar3 = cmdq_free(piVar1);
    if (uVar3 == 0) {
      cmdq_continue(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                    param_6,param_7,param_8,piVar1);
      return 0;
    }
    uVar5 = 0;
  }
  return uVar5;
}



void cmd_wait_for_exec(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,int *param_10,undefined8 param_11,ulong param_12,long param_13,
                      undefined8 param_14)

{
  byte **ppbVar1;
  byte *pbVar2;
  char **ppcVar3;
  undefined8 uVar4;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  byte *local_88 [11];
  long local_30;
  
  ppbVar1 = *(byte ***)(param_9 + 8);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  pbVar2 = *(byte **)ppbVar1[2];
  local_88[0] = pbVar2;
  ppcVar3 = wait_channels_RB_FIND((char **)&wait_channels,(char **)local_88);
  uVar4 = args_has(ppbVar1,0x53);
  if ((int)uVar4 == 0) {
    uVar4 = args_has(ppbVar1,0x4c);
    if ((int)uVar4 == 0) {
      uVar4 = args_has(ppbVar1,0x55);
      if ((int)uVar4 == 0) {
        cmd_wait_for_wait(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,param_10,pbVar2,ppcVar3,param_12,param_13,
                          param_14);
      }
      else {
        cmd_wait_for_unlock(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,(long)param_10,pbVar2,ppcVar3,
                            param_12,param_13,param_14);
      }
    }
    else {
      cmd_wait_for_lock(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8,param_10,(char *)pbVar2,ppcVar3,param_12,
                        param_13,param_14);
    }
  }
  else {
    cmd_wait_for_signal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        param_10,(char *)pbVar2,ppcVar3,param_12,param_13,param_14);
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void cmd_wait_for_flush(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,undefined8 param_10,undefined8 param_11,
                       undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  int *piVar1;
  undefined8 *puVar2;
  uint uVar3;
  void **ppvVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 uVar5;
  int *piVar6;
  void **ppvVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  
  ppvVar4 = wait_channels;
  if (wait_channels == (void **)0x0) {
    return;
  }
  do {
    ppvVar7 = ppvVar4;
    ppvVar4 = (void **)ppvVar7[6];
  } while (ppvVar4 != (void **)0x0);
  do {
    ppvVar4 = (void **)wait_channels_RB_NEXT((long)ppvVar7);
    uVar5 = extraout_RDX;
    piVar1 = (int *)ppvVar7[2];
    uVar8 = extraout_XMM0_Da;
    if ((int *)ppvVar7[2] != (int *)0x0) {
      while( true ) {
        piVar6 = piVar1;
        piVar1 = *(int **)(piVar6 + 0x4a);
        puVar2 = *(undefined8 **)(piVar6 + 0x4c);
        if (piVar1 == (int *)0x0) break;
        *(undefined8 **)(piVar1 + 0x4c) = puVar2;
        **(int ***)(piVar6 + 0x4c) = piVar1;
        uVar3 = cmdq_free(piVar6);
        if (uVar3 == 0) {
          cmdq_continue(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8,piVar6);
        }
      }
      ppvVar7[3] = puVar2;
      *puVar2 = 0;
      uVar3 = cmdq_free(piVar6);
      uVar5 = extraout_RDX_00;
      uVar8 = extraout_XMM0_Da_01;
      if (uVar3 == 0) {
        cmdq_continue(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,piVar6);
        uVar5 = extraout_RDX_01;
        uVar8 = extraout_XMM0_Da_02;
      }
    }
    *(undefined4 *)((long)ppvVar7 + 0xc) = 1;
    piVar1 = (int *)ppvVar7[4];
    if ((int *)ppvVar7[4] != (int *)0x0) {
      while( true ) {
        piVar6 = piVar1;
        piVar1 = *(int **)(piVar6 + 0x4a);
        puVar2 = *(undefined8 **)(piVar6 + 0x4c);
        if (piVar1 == (int *)0x0) break;
        *(undefined8 **)(piVar1 + 0x4c) = puVar2;
        **(int ***)(piVar6 + 0x4c) = piVar1;
        uVar3 = cmdq_free(piVar6);
        if (uVar3 == 0) {
          cmdq_continue(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8,piVar6);
        }
      }
      ppvVar7[5] = puVar2;
      *puVar2 = 0;
      uVar3 = cmdq_free(piVar6);
      uVar5 = extraout_RDX_02;
      uVar8 = extraout_XMM0_Da_04;
      if (uVar3 == 0) {
        cmdq_continue(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_04),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,piVar6);
        uVar5 = extraout_RDX_03;
        uVar8 = extraout_XMM0_Da_05;
      }
    }
    *(undefined4 *)(ppvVar7 + 1) = 0;
    cmd_wait_for_remove(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppvVar7,
                        param_10,uVar5,param_12,param_13,param_14);
    ppvVar7 = ppvVar4;
  } while (ppvVar4 != (void **)0x0);
  return;
}



int FUN_00137a60(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                char param_9,byte *param_10,uint param_11,undefined *param_12,long param_13,
                undefined8 param_14)

{
  int iVar1;
  size_t sVar2;
  uint uVar3;
  long *plVar4;
  long *plVar5;
  ulong uVar6;
  ulong uVar7;
  byte *pbVar8;
  byte *pbVar9;
  long in_FS_OFFSET;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined8 uVar11;
  undefined in_stack_ffffffffffffff68;
  long local_88 [9];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar3 = (uint)param_9;
  plVar4 = (long *)(param_12 + 200);
  if (param_9 == 't') {
    plVar4 = (long *)(param_12 + 0x88);
  }
  if (param_11 == 6) {
    if (param_10 == (byte *)0x0) {
      pbVar9 = (byte *)0x0;
      param_11 = 3;
    }
    else {
      pbVar9 = (byte *)0x0;
      sVar2 = strcspn((char *)param_10,":.");
      param_11 = (-(uint)(param_10[sVar2] == 0) & 0xfffffff8) + 0xb;
      param_1 = extraout_XMM0_Da;
    }
  }
  else if (param_11 < 0xe) {
    if (param_11 < 0xb) {
      if (param_11 < 6) {
        if (param_11 < 3) goto LAB_00137b01;
        pbVar9 = (byte *)0x2;
        if (param_11 != 4) {
          pbVar9 = (byte *)(ulong)(param_11 == 5);
        }
      }
      else {
        if (3 < param_11 - 7) {
LAB_00137b01:
                    // WARNING: Subroutine does not return
          fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"unknown %cflag %d"
                 ,(ulong)uVar3,(ulong)param_11,(ulong)uVar3,param_13,param_14,
                 in_stack_ffffffffffffff68);
        }
        pbVar9 = (byte *)0x2;
        if ((param_11 != 8) && (pbVar9 = (byte *)0x8, param_11 != 9)) {
          pbVar9 = (byte *)((ulong)(param_11 == 10) << 2);
        }
      }
    }
    else {
      pbVar9 = (byte *)0x2;
      if (param_11 != 0xc) {
        pbVar9 = (byte *)((ulong)(param_11 == 0xd) << 3);
      }
    }
  }
  else {
    if (param_11 != 0xe) goto LAB_00137b01;
    pbVar9 = (byte *)0x4;
    param_11 = 10;
  }
  uVar7 = (ulong)uVar3;
  uVar6 = (ulong)param_11;
  pbVar8 = pbVar9;
  uVar11 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                    "%s: flag %c %d %#x","cmd_prepare_state_flag",uVar7,uVar6,pbVar9,
                    in_stack_ffffffffffffff68);
  uVar10 = (undefined4)uVar11;
  if (param_13 == 0) {
    plVar5 = local_88;
    uVar7 = cmd_find_current(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar5,
                             (long)param_12,(uint)pbVar9,uVar7,uVar6,pbVar8);
    uVar10 = extraout_XMM0_Da_00;
    if (((int)uVar7 != 0) && (((ulong)pbVar9 & 2) == 0)) {
      iVar1 = -1;
      goto LAB_00137b92;
    }
  }
  else {
    plVar5 = (long *)(param_13 + 0x88);
    if (param_9 != 't') {
      plVar5 = (long *)(param_13 + 200);
    }
  }
  if (param_11 < 0xb) {
    uVar7 = 2;
    if (6 < param_11) {
      uVar7 = 1;
    }
  }
  else {
    uVar7 = 0;
  }
  uVar11 = cmd_find_target(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar4,
                           (undefined *)plVar5,param_12,param_10,uVar7,pbVar9);
  if ((int)uVar11 == 0) {
    iVar1 = 0;
  }
  else {
    iVar1 = -(uint)(((ulong)pbVar9 & 2) == 0);
  }
LAB_00137b92:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar1;
}



void FUN_00137cc0(int param_1,void **param_2)

{
  void *__ptr;
  void **ppvVar1;
  
  if (0 < param_1) {
    ppvVar1 = param_2;
    do {
      __ptr = *ppvVar1;
      ppvVar1 = ppvVar1 + 1;
      free(__ptr);
    } while (ppvVar1 != param_2 + (ulong)(param_1 - 1) + 1);
  }
  free(param_2);
  return;
}



undefined8 cmd_pack_argv(int param_1,char **param_2,char *param_3,char *param_4)

{
  char **ppcVar1;
  size_t sVar2;
  char *pcVar3;
  
  if ((param_1 != 0) && (*param_3 = '\0', 0 < param_1)) {
    ppcVar1 = param_2 + (ulong)(param_1 - 1) + 1;
    do {
      pcVar3 = strlcpy(param_3,*param_2,(long)param_4);
      if (param_4 <= pcVar3) {
        return 0xffffffff;
      }
      pcVar3 = *param_2;
      param_2 = param_2 + 1;
      sVar2 = strlen(pcVar3);
      param_3 = param_3 + sVar2 + 1;
      param_4 = param_4 + -(sVar2 + 1);
    } while (param_2 != ppcVar1);
  }
  return 0;
}



undefined8
cmd_unpack_argv(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               char *param_9,long param_10,undefined8 param_11,long *param_12,undefined8 param_13,
               undefined8 param_14)

{
  long lVar1;
  long lVar2;
  size_t sVar3;
  undefined8 extraout_RAX;
  long *plVar4;
  int iVar5;
  undefined4 extraout_EDX;
  undefined4 extraout_var;
  undefined8 uVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  
  iVar5 = (int)param_11;
  if (iVar5 != 0) {
    uVar6 = 8;
    plVar4 = param_12;
    lVar2 = xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)iVar5,8,
                    param_11,param_12,param_13,param_14);
    *param_12 = lVar2;
    param_9[param_10 + -1] = '\0';
    if (0 < iVar5) {
      if (param_10 != 0) {
        lVar2 = 0;
        do {
          sVar3 = strlen(param_9);
          lVar1 = *param_12;
          xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,param_9,uVar6,CONCAT44(extraout_var,extraout_EDX),plVar4,
                  param_13,param_14);
          param_9 = param_9 + sVar3 + 1;
          param_10 = param_10 - (sVar3 + 1);
          *(undefined8 *)(lVar1 + lVar2) = extraout_RAX;
          if ((ulong)(iVar5 - 1) * 8 == lVar2) {
            return 0;
          }
          lVar2 = lVar2 + 8;
        } while (param_10 != 0);
      }
      FUN_00137cc0(iVar5,(void **)*param_12);
      return 0xffffffff;
    }
  }
  return 0;
}



long cmd_copy_argv(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  int param_9,long param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  undefined8 extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 uVar2;
  ulong uVar3;
  undefined8 uVar4;
  long lVar5;
  bool bVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar7;
  undefined auVar8 [16];
  
  lVar5 = 0;
  if (param_9 != 0) {
    uVar4 = 8;
    auVar8 = xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long)(param_9 + 1),8,param_11,param_12,param_13,param_14);
    uVar7 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    uVar2 = auVar8._8_8_;
    lVar5 = auVar8._0_8_;
    if (0 < param_9) {
      uVar3 = 0;
      do {
        pcVar1 = *(char **)(param_10 + uVar3 * 8);
        if (pcVar1 != (char *)0x0) {
          uVar7 = xstrdup(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,pcVar1,uVar4
                          ,uVar2,param_12,param_13,param_14);
          *(undefined8 *)(lVar5 + uVar3 * 8) = extraout_RAX;
          uVar2 = extraout_RDX;
        }
        bVar6 = param_9 - 1 != uVar3;
        uVar3 = uVar3 + 1;
      } while (bVar6);
    }
  }
  return lVar5;
}



void cmd_free_argv(int param_1,void **param_2)

{
  if (param_1 != 0) {
    FUN_00137cc0(param_1,param_2);
    return;
  }
  return;
}



char * cmd_stringify_argv(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,int param_9,long param_10,undefined8 param_11,
                         undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  size_t sVar1;
  char *pcVar2;
  undefined8 extraout_RDX;
  long lVar3;
  ulong uVar4;
  bool bVar5;
  undefined4 extraout_XMM0_Da;
  
  if (param_9 == 0) {
    pcVar2 = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"",
                             param_10,param_11,param_12,param_13,param_14);
    return pcVar2;
  }
  if (param_9 < 1) {
    pcVar2 = (char *)0x0;
  }
  else {
    lVar3 = 0;
    pcVar2 = (char *)0x0;
    uVar4 = 0;
    do {
      sVar1 = strlen(*(char **)(param_10 + uVar4 * 8));
      lVar3 = lVar3 + 1 + sVar1;
      pcVar2 = (char *)xrealloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,pcVar2,lVar3,extraout_RDX,param_12,param_13,param_14);
      if (uVar4 == 0) {
        *pcVar2 = '\0';
      }
      else {
        strlcat(pcVar2," ",lVar3);
      }
      strlcat(pcVar2,*(char **)(param_10 + uVar4 * 8),lVar3);
      bVar5 = param_9 - 1 != uVar4;
      uVar4 = uVar4 + 1;
    } while (bVar5);
  }
  return pcVar2;
}



undefined8 *
cmd_parse(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
         undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,int param_9,
         char **param_10,char *param_11,undefined4 param_12,long *param_13,undefined8 param_14)

{
  undefined **ppuVar1;
  char *pcVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  size_t sVar6;
  byte **ppbVar7;
  undefined8 extraout_RAX;
  char *pcVar8;
  ulong uVar9;
  undefined8 extraout_RDX;
  uint *puVar10;
  uint *puVar11;
  char **ppcVar12;
  undefined **ppuVar13;
  undefined8 uVar14;
  long *plVar15;
  undefined8 *puVar16;
  char **ppcVar17;
  char **ppcVar18;
  long in_FS_OFFSET;
  bool bVar19;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 uVar20;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 uVar21;
  undefined auVar22 [16];
  undefined in_stack_ffffffffffffdf88;
  undefined8 local_2050;
  undefined local_2048;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar9 = 0;
  *param_13 = 0;
  if (param_9 == 0) {
    puVar16 = (undefined8 *)0x0;
    xasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_13,"no command",
              param_11,0,param_13,param_14,in_stack_ffffffffffffdf88);
    goto LAB_0013814f;
  }
  pcVar8 = *param_10;
  bVar19 = false;
  ppcVar17 = (char **)0x0;
  ppuVar13 = &cmd_table;
  local_2050 = (char **)cmd_table;
  ppcVar18 = (char **)cmd_table;
  plVar15 = param_13;
  if (cmd_table != (undefined *)0x0) {
    do {
      ppcVar12 = ppcVar18;
      if ((ppcVar12[1] != (char *)0x0) &&
         (iVar3 = strcmp(ppcVar12[1],pcVar8), uVar20 = extraout_XMM0_Da, iVar3 == 0))
      goto LAB_001380d6;
      sVar6 = strlen(pcVar8);
      pcVar2 = *ppcVar12;
      iVar3 = strncmp(pcVar2,pcVar8,sVar6);
      uVar20 = extraout_XMM0_Da_00;
      uVar21 = extraout_XMM0_Db;
      if (iVar3 == 0) {
        if (ppcVar17 != (char **)0x0) {
          bVar19 = true;
        }
        iVar3 = strcmp(pcVar2,pcVar8);
        ppcVar17 = ppcVar12;
        uVar20 = extraout_XMM0_Da_01;
        uVar21 = extraout_XMM0_Db_00;
        if (iVar3 == 0) {
          if (!bVar19) goto LAB_001380d6;
          goto LAB_00138189;
        }
      }
      ppcVar12 = ppcVar17;
      param_1 = CONCAT44(uVar21,uVar20);
      ppuVar1 = ppuVar13 + 1;
      ppuVar13 = ppuVar13 + 1;
      ppcVar18 = (char **)*ppuVar1;
      ppcVar17 = ppcVar12;
    } while ((char **)*ppuVar1 != (char **)0x0);
    if (bVar19) {
LAB_00138189:
      local_2048 = 0;
      ppuVar13 = &cmd_table;
      ppcVar18 = local_2050;
      while( true ) {
        sVar6 = strlen(pcVar8);
        pcVar2 = *ppcVar18;
        iVar3 = strncmp(pcVar2,pcVar8,sVar6);
        uVar20 = extraout_XMM0_Da_04;
        uVar21 = extraout_XMM0_Db_03;
        if ((iVar3 == 0) &&
           ((pcVar8 = strlcat(&local_2048,pcVar2,0x2000), puVar11 = (uint *)&local_2048,
            uVar21 = extraout_XMM0_Db_04, uVar20 = extraout_XMM0_Da_05, (char *)0x1fff < pcVar8 ||
            (pcVar8 = strlcat(&local_2048,", ",0x2000), uVar20 = extraout_XMM0_Da_06,
            uVar21 = extraout_XMM0_Db_05, (char *)0x1fff < pcVar8)))) break;
        ppcVar18 = (char **)ppuVar13[1];
        ppuVar13 = ppuVar13 + 1;
        puVar11 = (uint *)&local_2048;
        if (ppcVar18 == (char **)0x0) break;
        pcVar8 = *param_10;
      }
      do {
        puVar10 = puVar11;
        uVar4 = *puVar10 + 0xfefefeff & ~*puVar10;
        uVar5 = uVar4 & 0x80808080;
        puVar11 = puVar10 + 1;
      } while (uVar5 == 0);
      bVar19 = (uVar4 & 0x8080) == 0;
      if (bVar19) {
        uVar5 = uVar5 >> 0x10;
      }
      if (bVar19) {
        puVar11 = (uint *)((long)puVar10 + 6);
      }
      puVar16 = (undefined8 *)0x0;
      *(char *)((long)puVar11 +
               (long)(&local_2048 +
                     (-(long)&local_2048 - (ulong)CARRY1((byte)uVar5,(byte)uVar5)) + -5)) = '\0';
      xasprintf(CONCAT44(uVar21,uVar20),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                param_13,"ambiguous command: %s, could be: %s",*param_10,&local_2048,plVar15,
                param_14,in_stack_ffffffffffffdf88);
      goto LAB_0013814f;
    }
    if (ppcVar12 != (char **)0x0) {
LAB_001380d6:
      ppbVar7 = args_parse(uVar20,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           ppcVar12[2],param_9,(long)param_10,uVar9,plVar15,param_14);
      uVar14 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02);
      if (ppbVar7 != (byte **)0x0) {
        if (((*(int *)(ppcVar12 + 3) == -1) || (*(int *)(ppcVar12 + 3) <= *(int *)(ppbVar7 + 1))) &&
           ((*(int *)((long)ppcVar12 + 0x1c) == -1 ||
            (*(int *)(ppbVar7 + 1) <= *(int *)((long)ppcVar12 + 0x1c))))) {
          uVar14 = 0x30;
          auVar22 = xcalloc(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,1,0x30,extraout_RDX,uVar9,plVar15,param_14);
          puVar16 = auVar22._0_8_;
          *puVar16 = ppcVar12;
          puVar16[1] = ppbVar7;
          if (param_11 != (char *)0x0) {
            xstrdup(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,param_11,uVar14,auVar22._8_8_,uVar9,plVar15,
                    param_14);
            puVar16[2] = extraout_RAX;
          }
          *(undefined4 *)(puVar16 + 3) = param_12;
          goto LAB_0013814f;
        }
        uVar14 = args_free(ppbVar7);
      }
      puVar16 = (undefined8 *)0x0;
      xasprintf(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_13,
                "usage: %s %s",*ppcVar12,ppcVar12[4],plVar15,param_14,in_stack_ffffffffffffdf88);
      goto LAB_0013814f;
    }
  }
  puVar16 = (undefined8 *)0x0;
  xasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_13,
            "unknown command: %s",pcVar8,uVar9,plVar15,param_14,in_stack_ffffffffffffdf88);
LAB_0013814f:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return puVar16;
}



long cmd_print(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              undefined8 *param_9,undefined8 param_10,undefined8 param_11,char *param_12,
              undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  char *__ptr;
  long extraout_RAX;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  long in_stack_ffffffffffffffd8;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  __ptr = args_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (byte **)param_9[1],param_10,param_11,param_12,param_13,param_14);
  if (*__ptr == '\0') {
    xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
            param_7,param_8,*(char **)*param_9,param_10,extraout_RDX,param_12,param_13,param_14);
    in_stack_ffffffffffffffd8 = extraout_RAX;
  }
  else {
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,(long *)&stack0xffffffffffffffd8,"%s %s",*(char **)*param_9,__ptr,
              param_13,param_14,(char)in_stack_ffffffffffffffd8);
  }
  free(__ptr);
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return in_stack_ffffffffffffffd8;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int cmd_prepare_state(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long *param_9,undefined *param_10,long param_11,char *param_12,long param_13,
                     undefined8 param_14)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  void *__ptr;
  long lVar4;
  byte *pbVar5;
  char *pcVar6;
  undefined *puVar7;
  byte *pbVar8;
  undefined unaff_BL;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined8 uVar10;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Db_00;
  
  lVar2 = *param_9;
  __ptr = (void *)cmd_print(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            param_10,param_11,param_12,param_13,param_14);
  puVar7 = *(undefined **)(param_10 + 8);
  log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "preparing state for %s (client %p)",__ptr,puVar7,param_13,param_14,unaff_BL);
  free(__ptr);
  *(undefined8 *)(param_10 + 0x80) = 0;
  cmd_find_clear_state((undefined8 *)(param_10 + 0x88),0,0);
  uVar10 = cmd_find_clear_state((undefined8 *)(param_10 + 200),0,0);
  iVar3 = *(int *)(*param_9 + 0x30);
  if (iVar3 == 0) {
    iVar3 = *(int *)(*param_9 + 0x28);
    pcVar6 = (char *)0x0;
    if (iVar3 - 1U < 2) {
      pcVar6 = (char *)args_get((byte **)param_9[1],0x74);
      uVar9 = extraout_XMM0_Da_03;
      uVar11 = extraout_XMM0_Db_00;
      goto LAB_001384e1;
    }
  }
  else {
    pcVar6 = (char *)args_get((byte **)param_9[1],99);
    uVar9 = extraout_XMM0_Da_02;
    uVar11 = extraout_XMM0_Db;
LAB_001384e1:
    uVar10 = CONCAT44(uVar11,uVar9);
    if (iVar3 == 1) {
      lVar4 = cmd_find_client(CONCAT44(uVar11,uVar9),param_2,param_3,param_4,param_5,param_6,param_7
                              ,param_8,(long)param_10,pcVar6,0,(ulong)puVar7,param_13,param_14);
      *(long *)(param_10 + 0x80) = lVar4;
      if (lVar4 == 0) {
        return -1;
      }
      goto LAB_00138415;
    }
  }
  lVar4 = cmd_find_client(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_10,pcVar6,1,(ulong)puVar7,param_13,param_14);
  *(long *)(param_10 + 0x80) = lVar4;
LAB_00138415:
  pbVar5 = (byte *)args_get((byte **)param_9[1],0x74);
  pbVar8 = (byte *)0x177f9e;
  if (pbVar5 != (byte *)0x0) {
    pbVar8 = pbVar5;
  }
  uVar9 = log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "preparing -t state: target %s",pbVar8,puVar7,param_13,param_14,unaff_BL);
  uVar1 = *(uint *)(lVar2 + 0x28);
  if ((2 < uVar1) &&
     (puVar7 = param_10, param_13 = param_11,
     iVar3 = FUN_00137a60(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,'t',pbVar5,
                          uVar1,param_10,param_11,param_14), iVar3 != 0)) {
    return iVar3;
  }
  pbVar5 = (byte *)args_get((byte **)param_9[1],0x73);
  pbVar8 = (byte *)0x177f9e;
  if (pbVar5 != (byte *)0x0) {
    pbVar8 = pbVar5;
  }
  uVar9 = log_emit(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "preparing -s state: target %s",pbVar8,puVar7,param_13,param_14,unaff_BL);
  uVar1 = *(uint *)(lVar2 + 0x2c);
  if (uVar1 < 3) {
    return 0;
  }
  iVar3 = FUN_00137a60(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,'s',pbVar5,
                       uVar1,param_10,param_11,param_14);
  return iVar3;
}



undefined8 cmd_mouse_at(long param_1,long param_2,int *param_3,int *param_4,int param_5)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  
  if (param_5 == 0) {
    uVar3 = *(uint *)(param_2 + 0x14);
    uVar2 = *(uint *)(param_2 + 0x18);
  }
  else {
    uVar3 = *(uint *)(param_2 + 0x20);
    uVar2 = *(uint *)(param_2 + 0x24);
  }
  uVar1 = *(uint *)(param_2 + 0x10);
  if (uVar1 == 0) {
    uVar2 = (uVar2 - 1) + (uint)(uVar2 == 0);
  }
  else if ((0 < (int)uVar1) && (uVar1 <= uVar2)) {
    uVar2 = uVar1 - 1;
  }
  uVar1 = *(uint *)(param_1 + 0x28);
  if ((((uVar1 <= uVar3) && (uVar3 < *(int *)(param_1 + 0x20) + uVar1)) &&
      (*(uint *)(param_1 + 0x2c) <= uVar2)) &&
     (uVar2 < *(uint *)(param_1 + 0x2c) + *(int *)(param_1 + 0x24))) {
    *param_3 = uVar3 - uVar1;
    *param_4 = uVar2 - *(int *)(param_1 + 0x2c);
    return 0;
  }
  return 0xffffffff;
}



long cmd_mouse_window(int *param_1,int **param_2)

{
  int *piVar1;
  long lVar2;
  
  if (*param_1 == 0) {
    return 0;
  }
  if ((param_1[0xb] != -1) && (param_1[0xc] != -1)) {
    piVar1 = session_find_by_id(param_1[0xb]);
    if (piVar1 != (int *)0x0) {
      lVar2 = window_find_by_id(param_1[0xc]);
      if (lVar2 != 0) {
        if (param_2 != (int **)0x0) {
          *param_2 = piVar1;
        }
        lVar2 = winlink_find_by_window((long *)(piVar1 + 0x3e),lVar2);
        return lVar2;
      }
    }
  }
  return 0;
}



long cmd_mouse_pane(int *param_1,int **param_2,long *param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar1 = cmd_mouse_window(param_1,param_2);
  if (lVar1 != 0) {
    lVar2 = window_pane_find_by_id(param_1[0xd]);
    if (lVar2 != 0) {
      lVar3 = window_has_pane(*(long *)(lVar1 + 8),lVar2);
      if ((int)lVar3 != 0) {
        if (param_3 != (long *)0x0) {
          *param_3 = lVar1;
        }
        return lVar2;
      }
    }
  }
  return 0;
}



char * cmd_template_replace
                 (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 char *param_9,char *param_10,int param_11,undefined8 param_12,undefined8 param_13,
                 undefined8 param_14)

{
  char cVar1;
  bool bVar2;
  char *pcVar3;
  size_t sVar4;
  char *extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar5;
  char cVar6;
  long lVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined auVar9 [16];
  
  uVar5 = 0x25;
  pcVar3 = strchr(param_9,0x25);
  if (pcVar3 == (char *)0x0) {
    xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
            param_7,param_8,param_9,uVar5,extraout_RDX,param_12,param_13,param_14);
    return extraout_RAX;
  }
  auVar9 = xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,uVar5,
                   extraout_RDX,param_12,param_13,param_14);
  pcVar3 = auVar9._0_8_;
  *pcVar3 = '\0';
  cVar6 = *param_9;
  if (cVar6 != '\0') {
    bVar2 = false;
    lVar7 = 0;
    uVar8 = extraout_XMM0_Da_00;
    do {
      while( true ) {
        if (cVar6 != '%') break;
        cVar1 = param_9[1];
        if ((byte)(cVar1 - 0x31U) < 9) {
          if (cVar1 + -0x30 == param_11) goto LAB_00138751;
          break;
        }
        if ((cVar1 != '%') || (bVar2)) break;
        bVar2 = true;
LAB_00138751:
        sVar4 = strlen(param_10);
        lVar7 = lVar7 + sVar4;
        pcVar3 = (char *)xrealloc(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,
                                  param_7,param_8,auVar9._0_8_,lVar7 + 1,extraout_RDX_00,param_12,
                                  param_13,param_14);
        strlcat(pcVar3,param_10,lVar7 + 1);
        auVar9._8_8_ = extraout_RDX_01;
        auVar9._0_8_ = pcVar3;
        cVar6 = param_9[2];
        param_9 = param_9 + 2;
        uVar8 = extraout_XMM0_Da_03;
        if (cVar6 == '\0') {
          return pcVar3;
        }
      }
      auVar9 = xrealloc(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,auVar9._0_8_,
                        lVar7 + 2,auVar9._8_8_,param_12,param_13,param_14);
      pcVar3 = auVar9._0_8_;
      pcVar3[lVar7] = cVar6;
      pcVar3[lVar7 + 1] = '\0';
      cVar6 = param_9[1];
      lVar7 = lVar7 + 1;
      param_9 = param_9 + 1;
      uVar8 = extraout_XMM0_Da_01;
    } while (cVar6 != '\0');
  }
  return pcVar3;
}



ulong colour_cmp_rgb(long param_1,long param_2)

{
  ulong uVar1;
  
  uVar1 = 0xffffffff;
  if ((*(byte *)(param_2 + 1) <= *(byte *)(param_1 + 1)) &&
     (uVar1 = 1, *(byte *)(param_1 + 1) <= *(byte *)(param_2 + 1))) {
    uVar1 = 0xffffffff;
    if ((*(byte *)(param_2 + 2) <= *(byte *)(param_1 + 2)) &&
       (uVar1 = 1, *(byte *)(param_1 + 2) <= *(byte *)(param_2 + 2))) {
      uVar1 = 0xffffffff;
      if (*(byte *)(param_2 + 3) <= *(byte *)(param_1 + 3)) {
        uVar1 = (ulong)(*(byte *)(param_2 + 3) < *(byte *)(param_1 + 3));
      }
    }
  }
  return uVar1;
}



int colour_find_rgb(uint param_1,uint param_2,byte param_3)

{
  int iVar1;
  ulong uVar2;
  uint uVar3;
  uint uVar4;
  ulong uVar5;
  uint uVar6;
  ulong uVar7;
  byte *pbVar8;
  int iVar9;
  undefined *puVar10;
  uint uVar11;
  ulong uVar12;
  undefined1 *puVar13;
  byte bVar14;
  ulong uVar15;
  byte bVar16;
  ulong uVar17;
  long in_FS_OFFSET;
  undefined local_24;
  undefined local_23;
  undefined local_22;
  byte local_21;
  long local_20;
  
  uVar17 = (ulong)param_1;
  uVar15 = (ulong)param_2;
  puVar13 = colour_to_256;
  uVar5 = 0;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_24 = 0;
  local_22 = (undefined)param_2;
  local_23 = (undefined)param_1;
  puVar10 = &local_24;
  uVar12 = 0xf0;
  local_21 = param_3;
LAB_00138860:
  uVar7 = uVar12;
  bVar14 = (byte)uVar15;
  bVar16 = (byte)uVar17;
  do {
    if (uVar7 <= uVar5) {
      uVar6 = 0;
      uVar3 = 0;
      iVar9 = 0x10;
      uVar4 = 0;
      iVar1 = 0x10;
      uVar11 = 0xffffffff;
      pbVar8 = colour_from_256 + 5;
      while( true ) {
        uVar3 = (uVar3 - bVar14) * (uVar3 - bVar14) + (uVar4 - bVar16) * (uVar4 - bVar16) +
                (uVar6 - param_3) * (uVar6 - param_3);
        if (uVar3 < uVar11) {
          uVar11 = uVar3;
          iVar1 = iVar9;
        }
        iVar9 = iVar9 + 1;
        if (pbVar8 == (byte *)0x17abc1) break;
        uVar4 = (uint)*pbVar8;
        uVar3 = (uint)pbVar8[1];
        uVar6 = (uint)pbVar8[2];
        pbVar8 = pbVar8 + 4;
      }
LAB_0013890e:
      if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
        return iVar1;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    uVar12 = uVar7 + uVar5 >> 1;
    pbVar8 = puVar13 + uVar12 * 4;
    uVar2 = colour_cmp_rgb((long)puVar10,(long)pbVar8);
    bVar14 = (byte)uVar15;
    bVar16 = (byte)uVar17;
    if ((int)uVar2 < 0) goto LAB_00138860;
    if ((int)uVar2 == 0) {
      iVar1 = *pbVar8 + 0x10;
      goto LAB_0013890e;
    }
    uVar5 = uVar12 + 1;
  } while( true );
}



void colour_set_fg(byte *param_1,uint param_2)

{
  if ((param_2 & 0x100) != 0) {
    *param_1 = *param_1 | 1;
  }
  param_1[2] = (byte)param_2;
  return;
}



void colour_set_bg(byte *param_1,uint param_2)

{
  if ((param_2 & 0x100) != 0) {
    *param_1 = *param_1 | 2;
  }
  param_1[5] = (byte)param_2;
  return;
}



char * colour_tostring(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      ulong param_9)

{
  undefined8 in_R8;
  undefined8 in_R9;
  undefined1 in_stack_fffffffffffffff8;
  
  if ((param_9 & 0x100) == 0) {
    switch(param_9 & 0xffffffff) {
    case 0:
      return "black";
    case 1:
      return "red";
    case 2:
      return "green";
    case 3:
      return "yellow";
    case 4:
      return "blue";
    case 5:
      return "magenta";
    case 6:
      return "cyan";
    case 7:
      return "white";
    case 8:
      return "default";
    default:
      return (char *)0x0;
    case 0x5a:
      return "brightblack";
    case 0x5b:
      return "brightred";
    case 0x5c:
      return "brightgreen";
    case 0x5d:
      return "brightyellow";
    case 0x5e:
      return "brightblue";
    case 0x5f:
      return "brightmagenta";
    case 0x60:
      return "brightcyan";
    case 0x61:
      return "brightwhite";
    }
  }
  xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_0019e9a0,0x20,
            "colour%d",param_9 & 0xfffffeff,in_R8,in_R9,in_stack_fffffffffffffff8);
  return &DAT_0019e9a0;
}



ulong colour_fromstring(char *param_1)

{
  char cVar1;
  int iVar2;
  undefined4 extraout_var;
  ulong uVar3;
  size_t sVar4;
  ushort **ppuVar5;
  byte *pbVar6;
  undefined4 extraout_var_00;
  long in_FS_OFFSET;
  byte local_2a;
  byte local_29;
  byte local_28;
  undefined7 uStack_27;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*param_1 == '#') && (sVar4 = strlen(param_1), sVar4 == 7)) {
    ppuVar5 = __ctype_b_loc();
    pbVar6 = (byte *)(param_1 + 1);
    while ((*(byte *)((long)*ppuVar5 + (ulong)*pbVar6 * 2 + 1) & 0x10) != 0) {
      pbVar6 = pbVar6 + 1;
    }
    if ((*pbVar6 == 0) &&
       (iVar2 = __isoc99_sscanf(param_1 + 1,"%2hhx%2hhx%2hhx",&local_2a,&local_29,&local_28),
       iVar2 == 3)) {
      iVar2 = colour_find_rgb((uint)local_2a,(uint)local_29,local_28);
      uVar3 = CONCAT62((int6)(CONCAT44(extraout_var_00,iVar2) >> 0x10),(short)iVar2) | 0x100;
      goto LAB_00138af8;
    }
  }
  else {
    iVar2 = strncasecmp(param_1,"colour",6);
    if (iVar2 != 0) {
      iVar2 = strcasecmp(param_1,"black");
      uVar3 = CONCAT44(extraout_var,iVar2);
      if ((iVar2 != 0) &&
         ((cVar1 = *param_1, cVar1 != '0' || (uVar3 = (ulong)(byte)param_1[1], param_1[1] != 0)))) {
        iVar2 = strcasecmp(param_1,"red");
        uVar3 = 1;
        if ((iVar2 != 0) && ((cVar1 != '1' || (param_1[1] != '\0')))) {
          iVar2 = strcasecmp(param_1,"green");
          uVar3 = 2;
          if ((iVar2 != 0) && ((cVar1 != '2' || (param_1[1] != '\0')))) {
            iVar2 = strcasecmp(param_1,"yellow");
            uVar3 = 3;
            if ((iVar2 != 0) && ((cVar1 != '3' || (param_1[1] != '\0')))) {
              iVar2 = strcasecmp(param_1,"blue");
              uVar3 = 4;
              if ((iVar2 != 0) && ((cVar1 != '4' || (param_1[1] != '\0')))) {
                iVar2 = strcasecmp(param_1,"magenta");
                uVar3 = 5;
                if ((iVar2 != 0) && ((cVar1 != '5' || (param_1[1] != '\0')))) {
                  iVar2 = strcasecmp(param_1,"cyan");
                  uVar3 = 6;
                  if ((iVar2 != 0) && ((cVar1 != '6' || (param_1[1] != '\0')))) {
                    iVar2 = strcasecmp(param_1,"white");
                    uVar3 = 7;
                    if ((iVar2 != 0) && ((cVar1 != '7' || (param_1[1] != '\0')))) {
                      iVar2 = strcasecmp(param_1,"default");
                      uVar3 = 8;
                      if ((iVar2 != 0) && ((cVar1 != '8' || (param_1[1] != '\0')))) {
                        iVar2 = strcasecmp(param_1,"brightblack");
                        uVar3 = 0x5a;
                        if ((iVar2 != 0) &&
                           (((cVar1 = *param_1, cVar1 != '9' || (param_1[1] != '0')) ||
                            (param_1[2] != '\0')))) {
                          iVar2 = strcasecmp(param_1,"brightred");
                          uVar3 = 0x5b;
                          if ((iVar2 != 0) &&
                             (((cVar1 != '9' || (param_1[1] != '1')) || (param_1[2] != '\0')))) {
                            iVar2 = strcasecmp(param_1,"brightgreen");
                            uVar3 = 0x5c;
                            if ((iVar2 != 0) &&
                               (((cVar1 != '9' || (param_1[1] != '2')) || (param_1[2] != '\0')))) {
                              iVar2 = strcasecmp(param_1,"brightyellow");
                              if ((iVar2 == 0) || (iVar2 = strcmp(param_1,"93"), iVar2 == 0)) {
                                uVar3 = 0x5d;
                              }
                              else {
                                iVar2 = strcasecmp(param_1,"brightblue");
                                if ((iVar2 == 0) || (iVar2 = strcmp(param_1,"94"), iVar2 == 0)) {
                                  uVar3 = 0x5e;
                                }
                                else {
                                  iVar2 = strcasecmp(param_1,"brightmagenta");
                                  if ((iVar2 == 0) || (iVar2 = strcmp(param_1,"95"), iVar2 == 0)) {
                                    uVar3 = 0x5f;
                                  }
                                  else {
                                    iVar2 = strcasecmp(param_1,"brightcyan");
                                    if ((iVar2 == 0) || (iVar2 = strcmp(param_1,"96"), iVar2 == 0))
                                    {
                                      uVar3 = 0x60;
                                    }
                                    else {
                                      iVar2 = strcasecmp(param_1,"brightwhite");
                                      if (iVar2 == 0) {
                                        uVar3 = 0x61;
                                      }
                                      else {
                                        iVar2 = strcmp(param_1,"97");
                                        uVar3 = (ulong)((-(uint)(iVar2 == 0) & 0x62) - 1);
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      goto LAB_00138af8;
    }
    uVar3 = strtonum(param_1 + 6,0,0xff,(char **)&local_28);
    if (CONCAT71(uStack_27,local_28) == 0) {
      uVar3 = uVar3 | 0x100;
      goto LAB_00138af8;
    }
  }
  uVar3 = 0xffffffff;
LAB_00138af8:
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar3;
}



undefined colour_256to16(byte param_1)

{
  return (&DAT_0017a340)[param_1];
}



void control_write(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14,undefined param_15)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined8 uVar1;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [16];
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._8_8_ = in_XMM0_Qb;
    local_88._0_8_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_c8 = local_b8;
  local_d8 = 0x10;
  local_d4 = 0x30;
  local_a8 = param_11;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  evbuffer_add_vprintf(param_9[0x53],param_10,&local_d8);
  uVar1 = evbuffer_add(param_9[0x53],"\n",1);
  server_client_push_stdout(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void control_write_buffer
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  undefined8 uVar1;
  
  evbuffer_add_buffer(param_9[0x53]);
  uVar1 = evbuffer_add(param_9[0x53],"\n",1);
  server_client_push_stdout(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  return;
}



void control_callback(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long *param_9,int param_10)

{
  int *piVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  int iVar5;
  time_t tVar6;
  char *__ptr;
  undefined8 uVar7;
  void **ppvVar8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined in_stack_ffffffffffffffb8;
  void *local_40;
  int *local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 != 0) {
    *(uint *)(param_9 + 0x84) = *(uint *)(param_9 + 0x84) | 4;
  }
  do {
    __ptr = (char *)evbuffer_readln(param_9[0x51],0,3);
    if (__ptr == (char *)0x0) {
LAB_001391a7:
      if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
        return;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    if (*__ptr == '\0') {
      *(uint *)(param_9 + 0x84) = *(uint *)(param_9 + 0x84) | 4;
      goto LAB_001391a7;
    }
    uVar7 = 0;
    ppvVar8 = &local_40;
    iVar5 = cmd_string_parse(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                             param_4,param_5,param_6,param_7,param_8,__ptr,&local_38,(char *)0x0,
                             (byte *)0x0,(long *)&local_40,in_R9);
    if (iVar5 == 0) {
      for (lVar3 = *(long *)(local_38 + 2); lVar3 != 0; lVar3 = *(long *)(lVar3 + 0x20)) {
        *(uint *)(lVar3 + 0x1c) = *(uint *)(lVar3 + 0x1c) | 1;
      }
      cmdq_run(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               (int *)param_9[0xb6],local_38,(undefined4 *)0x0,uVar7,ppvVar8,in_R9);
      cmd_list_free(local_38);
    }
    else {
      lVar3 = param_9[0xb6];
      tVar6 = time((time_t *)0x0);
      lVar2 = param_9[0xb6];
      *(time_t *)(lVar3 + 0x108) = tVar6;
      piVar1 = (int *)(lVar2 + 0x110);
      *piVar1 = *piVar1 + 1;
      uVar4 = cmdq_guard(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,lVar2,"begin",1);
      uVar7 = control_write(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            "parse error: %s",local_40,uVar7,ppvVar8,in_R9,in_stack_ffffffffffffffb8
                           );
      cmdq_guard(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9[0xb6],"error"
                 ,1);
      free(local_40);
    }
    free(__ptr);
  } while( true );
}



void control_notify_input
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,undefined4 *param_10,undefined8 param_11)

{
  long lVar1;
  ulong uVar2;
  long lVar3;
  undefined8 uVar4;
  ulong uVar5;
  undefined8 uVar6;
  
  if (param_9[0xb3] == 0) {
    return;
  }
  lVar1 = evbuffer_pullup(param_11,0xffffffffffffffff);
  uVar2 = evbuffer_get_length(param_11);
  lVar3 = winlink_find_by_window((long *)(param_9[0xb3] + 0xf8),*(long *)(param_10 + 2));
  if (lVar3 == 0) {
    return;
  }
  uVar4 = evbuffer_new();
  uVar5 = 0;
  uVar6 = evbuffer_add_printf(uVar4,"%%output %%%u ",*param_10);
  if (uVar2 != 0) {
    do {
      while( true ) {
        if ((0x1f < *(byte *)(lVar1 + uVar5)) && (*(byte *)(lVar1 + uVar5) != 0x5c)) break;
        uVar6 = evbuffer_add_printf(uVar4,"\\%03o");
        uVar5 = (ulong)((int)uVar5 + 1);
        if (uVar2 <= uVar5) goto LAB_001392b5;
      }
      uVar6 = evbuffer_add_printf(uVar4,&DAT_00179c56);
      uVar5 = (ulong)((int)uVar5 + 1);
    } while (uVar5 < uVar2);
  }
LAB_001392b5:
  control_write_buffer(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  evbuffer_free(uVar4);
  return;
}



void control_notify_window_layout_changed
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               int *param_9,undefined8 param_10,undefined8 param_11,uint *param_12,long *param_13,
               char **param_14)

{
  long *plVar1;
  long **pplVar2;
  long lVar3;
  uint **ppuVar4;
  char *__ptr;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 unaff_RBX;
  long *plVar5;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar6;
  undefined8 extraout_XMM0_Qa_01;
  
  plVar5 = clients;
  if (clients != (long *)0x0) {
    do {
      if (((*(byte *)((long)plVar5 + 0x421) & 0x20) != 0) && (plVar5[0xb3] != 0)) {
        plVar1 = (long *)(plVar5[0xb3] + 0xf8);
        lVar3 = winlink_find_by_window_id(plVar1,*param_9);
        if ((lVar3 != 0) && (*(long *)(param_9 + 0x58) != 0)) {
          ppuVar4 = (uint **)format_create(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,
                                           param_7,param_8,0,0,extraout_RDX,(undefined *)param_12,
                                           param_13,param_14);
          param_12 = (uint *)winlink_find_by_window(plVar1,(long)param_9);
          if (param_12 != (uint *)0x0) {
            param_13 = (long *)0x0;
            uVar6 = format_defaults(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,
                                    param_7,param_8,ppuVar4,(long)plVar5,(uint *)0x0,param_12,
                                    (uint *)0x0,param_14);
            __ptr = format_expand(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  (long *)ppuVar4,
                                  "%layout-change #{window_id} #{window_layout} #{window_visible_layout} #{window_flags}"
                                  ,extraout_RDX_00,param_12,param_13,param_14);
            control_write(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,plVar5,"%s",__ptr,param_12,param_13,param_14,(char)unaff_RBX);
            free(__ptr);
          }
          format_free(ppuVar4);
        }
      }
      pplVar2 = (long **)(plVar5 + 0xb8);
      plVar5 = *pplVar2;
    } while (*pplVar2 != (long *)0x0);
  }
  return;
}



void control_notify_window_unlinked
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long **pplVar1;
  long lVar2;
  undefined8 unaff_RBX;
  long *plVar3;
  undefined8 extraout_XMM0_Qa;
  
  plVar3 = clients;
  if (clients == (long *)0x0) {
    return;
  }
  do {
    while (((*(byte *)((long)plVar3 + 0x421) & 0x20) == 0 || (plVar3[0xb3] == 0))) {
LAB_00139421:
      pplVar1 = (long **)(plVar3 + 0xb8);
      plVar3 = *pplVar1;
      if (*pplVar1 == (long *)0x0) {
        return;
      }
    }
    lVar2 = winlink_find_by_window_id((long *)(plVar3[0xb3] + 0xf8),*param_10);
    if (lVar2 != 0) {
      control_write(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar3,
                    "%%window-close @%u",(ulong)*param_10,param_12,param_13,param_14,(char)unaff_RBX
                   );
      goto LAB_00139421;
    }
    control_write(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar3,
                  "%%unlinked-window-close @%u",(ulong)*param_10,param_12,param_13,param_14,
                  (char)unaff_RBX);
    pplVar1 = (long **)(plVar3 + 0xb8);
    plVar3 = *pplVar1;
    if (*pplVar1 == (long *)0x0) {
      return;
    }
  } while( true );
}



void control_notify_window_linked
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long **pplVar1;
  long lVar2;
  undefined8 unaff_RBX;
  long *plVar3;
  undefined8 extraout_XMM0_Qa;
  
  plVar3 = clients;
  if (clients == (long *)0x0) {
    return;
  }
  do {
    while (((*(byte *)((long)plVar3 + 0x421) & 0x20) == 0 || (plVar3[0xb3] == 0))) {
LAB_001394b1:
      pplVar1 = (long **)(plVar3 + 0xb8);
      plVar3 = *pplVar1;
      if (*pplVar1 == (long *)0x0) {
        return;
      }
    }
    lVar2 = winlink_find_by_window_id((long *)(plVar3[0xb3] + 0xf8),*param_10);
    if (lVar2 != 0) {
      control_write(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar3,
                    "%%window-add @%u",(ulong)*param_10,param_12,param_13,param_14,(char)unaff_RBX);
      goto LAB_001394b1;
    }
    control_write(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar3,
                  "%%unlinked-window-add @%u",(ulong)*param_10,param_12,param_13,param_14,
                  (char)unaff_RBX);
    pplVar1 = (long **)(plVar3 + 0xb8);
    plVar3 = *pplVar1;
    if (*pplVar1 == (long *)0x0) {
      return;
    }
  } while( true );
}



void control_notify_window_renamed
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9)

{
  long **pplVar1;
  long lVar2;
  undefined8 unaff_RBX;
  long *plVar3;
  undefined8 in_R8;
  undefined8 in_R9;
  undefined8 extraout_XMM0_Qa;
  
  plVar3 = clients;
  if (clients == (long *)0x0) {
    return;
  }
  do {
    while (((*(byte *)((long)plVar3 + 0x421) & 0x20) == 0 || (plVar3[0xb3] == 0))) {
LAB_00139541:
      pplVar1 = (long **)(plVar3 + 0xb8);
      plVar3 = *pplVar1;
      if (*pplVar1 == (long *)0x0) {
        return;
      }
    }
    lVar2 = winlink_find_by_window_id((long *)(plVar3[0xb3] + 0xf8),*param_9);
    if (lVar2 != 0) {
      control_write(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar3,
                    "%%window-renamed @%u %s",(ulong)*param_9,*(undefined8 *)(param_9 + 2),in_R8,
                    in_R9,(char)unaff_RBX);
      goto LAB_00139541;
    }
    control_write(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar3,
                  "%%unlinked-window-renamed @%u %s",(ulong)*param_9,*(undefined8 *)(param_9 + 2),
                  in_R8,in_R9,(char)unaff_RBX);
    pplVar1 = (long **)(plVar3 + 0xb8);
    plVar3 = *pplVar1;
    if (*pplVar1 == (long *)0x0) {
      return;
    }
  } while( true );
}



void control_notify_attached_session_changed
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  uint *puVar1;
  undefined8 in_R8;
  undefined8 in_R9;
  undefined1 in_stack_00000008;
  
  if (((param_9 != (long *)0x0) && ((*(byte *)((long)param_9 + 0x421) & 0x20) != 0)) &&
     (puVar1 = (uint *)param_9[0xb3], puVar1 != (uint *)0x0)) {
    control_write(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                  "%%session-changed $%u %s",(ulong)*puVar1,*(undefined8 *)(puVar1 + 2),in_R8,in_R9,
                  in_stack_00000008);
    return;
  }
  return;
}



void control_notify_session_renamed
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9)

{
  long **pplVar1;
  undefined8 unaff_RBX;
  long *plVar2;
  undefined8 in_R8;
  undefined8 in_R9;
  
  plVar2 = clients;
  if (clients != (long *)0x0) {
    do {
      if ((*(byte *)((long)plVar2 + 0x421) & 0x20) != 0) {
        param_1 = control_write(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                plVar2,"%%session-renamed $%u %s",(ulong)*param_9,
                                *(undefined8 *)(param_9 + 2),in_R8,in_R9,(char)unaff_RBX);
      }
      pplVar1 = (long **)(plVar2 + 0xb8);
      plVar2 = *pplVar1;
    } while (*pplVar1 != (long *)0x0);
  }
  return;
}



void control_notify_session_created
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long **pplVar1;
  undefined8 extraout_RDX;
  long *plVar2;
  undefined in_stack_ffffffffffffffe8;
  
  plVar2 = clients;
  if (clients != (long *)0x0) {
    do {
      if ((*(byte *)((long)plVar2 + 0x421) & 0x20) != 0) {
        param_1 = control_write(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                plVar2,"%%sessions-changed",param_11,param_12,param_13,param_14,
                                in_stack_ffffffffffffffe8);
        param_11 = extraout_RDX;
      }
      pplVar1 = (long **)(plVar2 + 0xb8);
      plVar2 = *pplVar1;
    } while (*pplVar1 != (long *)0x0);
  }
  return;
}



void control_notify_session_close
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  control_notify_session_created
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             param_11,param_12,param_13,param_14);
  return;
}



void environ_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_00139698:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x20);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x28) != 1)) {
        *(undefined4 *)(*param_1 + 0x28) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x20);
      lVar3 = *(long *)(lVar2 + 0x10);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x18);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x28) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x18) == param_2) {
          lVar3 = *(long *)(param_2 + 0x10);
          *(long *)(lVar1 + 0x18) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x20) = lVar2;
            lVar3 = lVar2;
LAB_001398b7:
            *(long *)(lVar3 + 0x10) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x20) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x20);
            *(long *)(param_2 + 0x20) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x10) == lVar1) goto LAB_001398b7;
              *(long *)(lVar3 + 0x18) = param_2;
            }
          }
          *(long *)(param_2 + 0x10) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x10);
          *(long *)(lVar1 + 0x20) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x28) = 0;
        lVar1 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar2 + 0x28) = 1;
        *(long *)(lVar2 + 0x10) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x20) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x20);
        *(long *)(lVar3 + 0x20) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x10) == lVar2) {
          *(long *)(lVar1 + 0x10) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x18) = lVar3;
        }
        *(long *)(lVar3 + 0x18) = lVar2;
        *(long *)(lVar2 + 0x20) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x28) = 0;
        *(undefined4 *)(lVar1 + 0x28) = 0;
        *(undefined4 *)(lVar2 + 0x28) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x28) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x10) == param_2) {
        lVar3 = *(long *)(param_2 + 0x18);
        *(long *)(lVar1 + 0x10) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x20) = lVar2;
          lVar3 = lVar2;
LAB_001397be:
          if (*(long *)(lVar3 + 0x10) == lVar1) {
            *(long *)(lVar3 + 0x10) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x18) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x20) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x20);
          *(long *)(param_2 + 0x20) = lVar3;
          if (lVar3 != 0) goto LAB_001397be;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x18) = lVar1;
        *(long *)(lVar1 + 0x20) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x28) = 0;
      lVar1 = *(long *)(lVar2 + 0x18);
      *(undefined4 *)(lVar2 + 0x28) = 1;
      lVar3 = *(long *)(lVar1 + 0x10);
      *(long *)(lVar2 + 0x18) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x20) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x20);
      *(long *)(lVar1 + 0x20) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x10) == lVar2) {
        *(long *)(lVar3 + 0x10) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x18) = lVar1;
      }
      *(long *)(lVar1 + 0x10) = lVar2;
      *(long *)(lVar2 + 0x20) = lVar1;
      goto LAB_00139698;
    }
    *(undefined4 *)(lVar3 + 0x28) = 0;
    *(undefined4 *)(lVar1 + 0x28) = 0;
    *(undefined4 *)(lVar2 + 0x28) = 1;
    param_2 = lVar2;
  } while( true );
}



void environ_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_00139965(param_1,param_2,param_3);
  return;
}



void FUN_00139965(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x28) != 0)) goto LAB_00139a1b;
    if (*param_1 == param_3) goto joined_r0x00139b5e;
    lVar2 = *(long *)(param_2 + 0x10);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x28) == 1) {
        lVar1 = *(long *)(lVar2 + 0x18);
        *(undefined4 *)(lVar2 + 0x28) = 0;
        *(undefined4 *)(param_2 + 0x28) = 1;
        *(long *)(param_2 + 0x10) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x20) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x20);
        *(long *)(lVar2 + 0x20) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x20) + 0x10) == param_2) {
          *(long *)(lVar3 + 0x10) = lVar2;
          lVar1 = *(long *)(param_2 + 0x10);
        }
        else {
          *(long *)(lVar3 + 0x18) = lVar2;
        }
        *(long *)(lVar2 + 0x18) = param_2;
        *(long *)(param_2 + 0x20) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x10);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x28) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x18);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x28) == 0)) goto LAB_00139954;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x28) != 0)) goto LAB_00139b02;
        lVar2 = *(long *)(lVar3 + 0x10);
        *(undefined4 *)(lVar3 + 0x28) = 0;
        *(undefined4 *)(lVar1 + 0x28) = 1;
        *(long *)(lVar1 + 0x18) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x20) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x20);
        *(long *)(lVar3 + 0x20) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x10) == lVar1) {
          *(long *)(lVar2 + 0x10) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        *(long *)(lVar3 + 0x10) = lVar1;
        *(long *)(lVar1 + 0x20) = lVar3;
        lVar3 = *(long *)(param_2 + 0x10);
        lVar2 = *(long *)(lVar3 + 0x10);
        *(undefined4 *)(lVar3 + 0x28) = *(undefined4 *)(param_2 + 0x28);
        *(undefined4 *)(param_2 + 0x28) = 0;
        if (lVar2 != 0) goto LAB_00139b15;
      }
      else {
LAB_00139b02:
        lVar3 = *(long *)(param_2 + 0x10);
        *(undefined4 *)(lVar1 + 0x28) = *(undefined4 *)(param_2 + 0x28);
        *(undefined4 *)(param_2 + 0x28) = 0;
LAB_00139b15:
        *(undefined4 *)(lVar2 + 0x28) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x18);
      *(long *)(param_2 + 0x10) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x20) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x20);
      *(long *)(lVar3 + 0x20) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x20) + 0x10) == param_2) {
        *(long *)(lVar2 + 0x10) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x18) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x18) = param_2;
      *(long *)(param_2 + 0x20) = lVar3;
      goto joined_r0x00139b5e;
    }
    lVar2 = *(long *)(param_2 + 0x18);
    lVar3 = *(long *)(lVar2 + 0x10);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x28) == 1) {
      *(undefined4 *)(lVar2 + 0x28) = 0;
      *(undefined4 *)(param_2 + 0x28) = 1;
      *(long *)(param_2 + 0x18) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x20) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x20);
      *(long *)(lVar2 + 0x20) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x10) == param_2) {
        *(long *)(lVar4 + 0x10) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x18) = lVar2;
        lVar1 = *(long *)(param_2 + 0x18);
      }
      *(long *)(lVar2 + 0x10) = param_2;
      lVar3 = *(long *)(lVar1 + 0x10);
      *(long *)(param_2 + 0x20) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x28) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x18);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x28) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x28) = 0;
        *(undefined4 *)(lVar1 + 0x28) = 1;
        *(long *)(lVar1 + 0x10) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x20) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x20);
        *(long *)(lVar3 + 0x20) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x10) == lVar1) {
          *(long *)(lVar2 + 0x10) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        *(long *)(lVar3 + 0x18) = lVar1;
        lVar4 = *(long *)(param_2 + 0x18);
        *(long *)(lVar1 + 0x20) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x18);
        *(undefined4 *)(lVar4 + 0x28) = *(undefined4 *)(param_2 + 0x28);
        *(undefined4 *)(param_2 + 0x28) = 0;
        if (lVar2 != 0) goto LAB_001399d0;
        goto LAB_001399d7;
      }
LAB_001399bf:
      lVar4 = *(long *)(param_2 + 0x18);
      *(undefined4 *)(lVar1 + 0x28) = *(undefined4 *)(param_2 + 0x28);
      *(undefined4 *)(param_2 + 0x28) = 0;
LAB_001399d0:
      *(undefined4 *)(lVar2 + 0x28) = 0;
LAB_001399d7:
      lVar2 = *(long *)(lVar4 + 0x10);
      *(long *)(param_2 + 0x18) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x20) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x20);
      *(long *)(lVar4 + 0x20) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x10) == param_2) {
        *(long *)(lVar2 + 0x10) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x18) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x10) = param_2;
      *(long *)(param_2 + 0x20) = lVar4;
joined_r0x00139b5e:
      if (param_3 == 0) {
        return;
      }
LAB_00139a1b:
      *(undefined4 *)(param_3 + 0x28) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x18);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x28) != 0)) goto LAB_001399bf;
LAB_00139954:
    *(undefined4 *)(lVar1 + 0x28) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x20);
  } while( true );
}



long environ_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x18);
  if (*(long *)(param_2 + 0x10) == 0) {
    lVar7 = *(long *)(param_2 + 0x20);
    iVar4 = *(int *)(param_2 + 0x28);
    if (lVar6 != 0) goto LAB_00139d8c;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x10);
      } while (*(long *)(lVar5 + 0x10) != 0);
      lVar7 = *(long *)(lVar5 + 0x20);
      lVar6 = *(long *)(lVar5 + 0x18);
      iVar4 = *(int *)(lVar5 + 0x28);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x20) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x20);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x10) == lVar5) {
        *(long *)(lVar7 + 0x10) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x18) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x14);
      uVar2 = *(undefined4 *)(param_2 + 0x18);
      uVar3 = *(undefined4 *)(param_2 + 0x1c);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x10) = *(undefined4 *)(param_2 + 0x10);
      *(undefined4 *)(lVar5 + 0x14) = uVar1;
      *(undefined4 *)(lVar5 + 0x18) = uVar2;
      *(undefined4 *)(lVar5 + 0x1c) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x24);
      uVar2 = *(undefined4 *)(param_2 + 0x28);
      uVar3 = *(undefined4 *)(param_2 + 0x2c);
      *(undefined4 *)(lVar5 + 0x20) = *(undefined4 *)(param_2 + 0x20);
      *(undefined4 *)(lVar5 + 0x24) = uVar1;
      *(undefined4 *)(lVar5 + 0x28) = uVar2;
      *(undefined4 *)(lVar5 + 0x2c) = uVar3;
      lVar8 = *(long *)(param_2 + 0x20);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x10) == param_2) {
        *(long *)(lVar8 + 0x10) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x18) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x10) + 0x20) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x18) != 0) {
        *(long *)(*(long *)(param_2 + 0x18) + 0x20) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x20)) {
      }
      goto joined_r0x00139da1;
    }
    lVar7 = *(long *)(param_2 + 0x20);
    iVar4 = *(int *)(param_2 + 0x28);
    lVar6 = *(long *)(param_2 + 0x10);
LAB_00139d8c:
    *(long *)(lVar6 + 0x20) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x10) == param_2) {
    *(long *)(lVar7 + 0x10) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x18) = lVar6;
  }
joined_r0x00139da1:
  if (iVar4 == 0) {
    environ_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



char ** environ_RB_INSERT(char **param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  
  if ((char **)*param_1 == (char **)0x0) {
    param_2[4] = (char *)0x0;
    param_2[3] = (char *)0x0;
    param_2[2] = (char *)0x0;
    *(undefined4 *)(param_2 + 5) = 1;
    *param_1 = (char *)param_2;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    do {
      ppcVar3 = ppcVar1;
      iVar2 = strcmp(__s1,*ppcVar3);
      if (iVar2 < 0) {
        ppcVar1 = (char **)ppcVar3[2];
      }
      else {
        if (iVar2 == 0) {
          return ppcVar3;
        }
        ppcVar1 = (char **)ppcVar3[3];
      }
    } while (ppcVar1 != (char **)0x0);
    param_2[4] = (char *)ppcVar3;
    param_2[3] = (char *)0x0;
    param_2[2] = (char *)0x0;
    *(undefined4 *)(param_2 + 5) = 1;
    if (iVar2 < 0) {
      ppcVar3[2] = (char *)param_2;
    }
    else {
      ppcVar3[3] = (char *)param_2;
    }
  }
  environ_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (char **)0x0;
}



char ** environ_RB_FIND(char **param_1,char **param_2)

{
  char *__s1;
  int iVar1;
  char **ppcVar2;
  
  ppcVar2 = (char **)*param_1;
  if (ppcVar2 != (char **)0x0) {
    __s1 = *param_2;
    do {
      while( true ) {
        iVar1 = strcmp(__s1,*ppcVar2);
        if (iVar1 < 0) break;
        if (iVar1 == 0) {
          return ppcVar2;
        }
        ppcVar2 = (char **)ppcVar2[3];
        if (ppcVar2 == (char **)0x0) {
          return (char **)0x0;
        }
      }
      ppcVar2 = (char **)ppcVar2[2];
    } while (ppcVar2 != (char **)0x0);
  }
  return ppcVar2;
}



char ** environ_RB_NFIND(long *param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  char **ppcVar4;
  
  if ((char **)*param_1 == (char **)0x0) {
    ppcVar4 = (char **)0x0;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    ppcVar4 = (char **)0x0;
    do {
      while( true ) {
        ppcVar3 = ppcVar1;
        iVar2 = strcmp(__s1,*ppcVar3);
        if (-1 < iVar2) break;
        ppcVar1 = (char **)ppcVar3[2];
        ppcVar4 = ppcVar3;
        if ((char **)ppcVar3[2] == (char **)0x0) {
          return ppcVar3;
        }
      }
      if (iVar2 == 0) {
        return ppcVar3;
      }
      ppcVar1 = (char **)ppcVar3[3];
    } while ((char **)ppcVar3[3] != (char **)0x0);
  }
  return ppcVar4;
}



long environ_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x18);
  if (*(long *)(param_1 + 0x18) == 0) {
    lVar2 = *(long *)(param_1 + 0x20);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x10) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x18))) {
      while (lVar1 = *(long *)(lVar2 + 0x20), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x18);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x10);
    } while (*(long *)(lVar2 + 0x10) != 0);
  }
  return lVar2;
}



long environ_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x10);
  if (*(long *)(param_1 + 0x10) == 0) {
    lVar2 = *(long *)(param_1 + 0x20);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x18) != param_1)) &&
       (*(long *)(lVar2 + 0x10) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x20), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x10) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x18);
    } while (*(long *)(lVar2 + 0x18) != 0);
  }
  return lVar2;
}



long environ_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x18);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x10);
    }
  }
  return lVar2;
}



void environ_cmp(char **param_1,char **param_2)

{
  strcmp(*param_1,*param_2);
  return;
}



void environ_create(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  undefined8 *puVar1;
  
  puVar1 = (undefined8 *)
           xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,8,param_11,
                   param_12,param_13,param_14);
  *puVar1 = 0;
  return;
}



void environ_free(long *param_1)

{
  void **ppvVar1;
  void **__ptr;
  
  ppvVar1 = (void **)*param_1;
  if ((void **)*param_1 != (void **)0x0) {
    do {
      __ptr = ppvVar1;
      ppvVar1 = (void **)__ptr[2];
    } while (ppvVar1 != (void **)0x0);
    do {
      ppvVar1 = (void **)environ_RB_NEXT((long)__ptr);
      environ_RB_REMOVE(param_1,(long)__ptr);
      free(*__ptr);
      free(__ptr[1]);
      free(__ptr);
      __ptr = ppvVar1;
    } while (ppvVar1 != (void **)0x0);
  }
  free(param_1);
  return;
}



long environ_first(long *param_1)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *param_1;
  if (*param_1 != 0) {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x10);
    } while (lVar1 != 0);
    return lVar2;
  }
  return 0;
}



long environ_next(long param_1)

{
  long lVar1;
  
  lVar1 = environ_RB_NEXT(param_1);
  return lVar1;
}



void environ_find(char **param_1,char *param_2)

{
  long in_FS_OFFSET;
  char *local_48 [7];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_48[0] = param_2;
  environ_RB_FIND(param_1,local_48);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void environ_set(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                char **param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14,undefined param_15)

{
  undefined8 uVar1;
  char in_AL;
  char **ppcVar2;
  char *extraout_RAX;
  undefined8 extraout_RDX;
  char **ppcVar3;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined auVar4 [16];
  char *local_128 [6];
  undefined4 local_f8;
  undefined4 local_f4;
  undefined *local_f0;
  undefined *local_e8;
  long local_e0;
  undefined local_d8 [24];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined local_a8 [16];
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  
  ppcVar3 = local_128;
  if (in_AL != '\0') {
    local_a8._8_8_ = in_XMM0_Qb;
    local_a8._0_8_ = param_1;
    local_98._4_12_ = in_register_00001224;
    local_98._0_4_ = param_2;
    local_88._4_12_ = in_register_00001244;
    local_88._0_4_ = param_3;
    local_78._4_12_ = in_register_00001264;
    local_78._0_4_ = param_4;
    local_68._4_12_ = in_register_00001284;
    local_68._0_4_ = param_5;
    local_58._4_12_ = in_register_000012a4;
    local_58._0_4_ = param_6;
    local_48._4_12_ = in_register_000012c4;
    local_48._0_4_ = param_7;
    local_38._4_12_ = in_register_000012e4;
    local_38._0_4_ = param_8;
  }
  local_e0 = *(long *)(in_FS_OFFSET + 0x28);
  local_f0 = &param_15;
  local_e8 = local_d8;
  local_f8 = 0x18;
  local_f4 = 0x30;
  local_128[0] = param_10;
  local_c0 = param_12;
  local_b8 = param_13;
  local_b0 = param_14;
  ppcVar2 = environ_RB_FIND(param_9,local_128);
  if (ppcVar2 == (char **)0x0) {
    auVar4 = xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x30,
                     ppcVar3,extraout_RDX,param_12,param_13,param_14);
    ppcVar2 = auVar4._0_8_;
    uVar1 = xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,param_10,ppcVar3,auVar4._8_8_,param_12,param_13,
                    param_14);
    *ppcVar2 = extraout_RAX;
    xvasprintf(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)(ppcVar2 + 1),
               param_11,&local_f8,param_12,param_13,param_14);
    environ_RB_INSERT(param_9,ppcVar2);
  }
  else {
    free(ppcVar2[1]);
    xvasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,(long *)(ppcVar2 + 1),param_11,&local_f8,param_12,param_13,
               param_14);
  }
  if (local_e0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void environ_clear(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  char **param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  char *extraout_RAX;
  undefined8 extraout_RDX;
  char **ppcVar2;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined auVar3 [16];
  char *local_68 [7];
  long local_30;
  
  ppcVar2 = local_68;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_68[0] = param_10;
  ppcVar1 = environ_RB_FIND(param_9,local_68);
  if (ppcVar1 == (char **)0x0) {
    auVar3 = xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x30,
                     ppcVar2,extraout_RDX,param_12,param_13,param_14);
    ppcVar1 = auVar3._0_8_;
    xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,param_6,
            param_7,param_8,param_10,ppcVar2,auVar3._8_8_,param_12,param_13,param_14);
    ppcVar1[1] = (char *)0x0;
    *ppcVar1 = extraout_RAX;
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      environ_RB_INSERT(param_9,ppcVar1);
      return;
    }
  }
  else {
    free(ppcVar1[1]);
    ppcVar1[1] = (char *)0x0;
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void environ_copy(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long *param_9,char **param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  char **ppcVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 unaff_RBX;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  ppcVar1 = (char **)*param_9;
  if ((char **)*param_9 == (char **)0x0) {
    return;
  }
  do {
    ppcVar2 = ppcVar1;
    ppcVar1 = (char **)ppcVar2[2];
  } while ((char **)ppcVar2[2] != (char **)0x0);
  do {
    while( true ) {
      if (ppcVar2[1] == (char *)0x0) break;
      environ_set(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,*ppcVar2,
                  "%s",ppcVar2[1],param_13,param_14,(char)unaff_RBX);
      ppcVar2 = (char **)environ_RB_NEXT((long)ppcVar2);
      param_11 = extraout_RDX;
      param_1 = extraout_XMM0_Qa;
      if (ppcVar2 == (char **)0x0) {
        return;
      }
    }
    environ_clear(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,*ppcVar2,
                  param_11,0,param_13,param_14);
    ppcVar2 = (char **)environ_RB_NEXT((long)ppcVar2);
    param_11 = extraout_RDX_00;
    param_1 = extraout_XMM0_Qa_00;
  } while (ppcVar2 != (char **)0x0);
  return;
}



void environ_put(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                char **param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  char *__s;
  size_t sVar2;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined8 uVar3;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  uVar3 = 0x3d;
  pcVar1 = strchr(param_10,0x3d);
  if (pcVar1 != (char *)0x0) {
    __s = (char *)xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          param_10,uVar3,extraout_RDX,param_12,param_13,param_14);
    sVar2 = strcspn(__s,"=");
    __s[sVar2] = '\0';
    environ_set(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                __s,"%s",pcVar1 + 1,param_13,param_14,unaff_BL);
    free(__s);
    return;
  }
  return;
}



void environ_unset(char **param_1,char *param_2)

{
  char **__ptr;
  long in_FS_OFFSET;
  char *local_58 [7];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_58[0] = param_2;
  __ptr = environ_RB_FIND(param_1,local_58);
  if (__ptr != (char **)0x0) {
    environ_RB_REMOVE((long *)param_1,(long)__ptr);
    free(*__ptr);
    free(__ptr[1]);
    free(__ptr);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void environ_update(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   char *param_9,char **param_10,char **param_11,char *param_12,undefined8 param_13,
                   undefined8 param_14)

{
  char *__ptr;
  char *pcVar1;
  char **ppcVar2;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffff78;
  char *local_80;
  char *local_78 [7];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  __ptr = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          param_10,param_11,param_12,param_13,param_14);
  local_80 = __ptr;
  while( true ) {
    pcVar1 = strsep(&local_80," ");
    if (pcVar1 == (char *)0x0) break;
    local_78[0] = pcVar1;
    ppcVar2 = environ_RB_FIND(param_10,local_78);
    if (ppcVar2 == (char **)0x0) {
      environ_clear(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    param_11,pcVar1,extraout_RDX,param_12,param_13,param_14);
    }
    else {
      param_12 = ppcVar2[1];
      environ_set(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                  *ppcVar2,"%s",param_12,param_13,param_14,in_stack_ffffffffffffff78);
    }
  }
  free(__ptr);
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void environ_push(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long *param_9,undefined *param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  char *pcVar2;
  size_t sVar3;
  char **ppcVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  pcVar2 = *environ;
  while (pcVar2 != (char *)0x0) {
    pcVar2 = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,pcVar2,
                             param_10,param_11,param_12,param_13,param_14);
    param_10 = "=";
    sVar3 = strcspn(pcVar2,"=");
    pcVar2[sVar3] = '\0';
    unsetenv(pcVar2);
    free(pcVar2);
    param_1 = extraout_XMM0_Qa;
    param_11 = extraout_RDX;
    pcVar2 = *environ;
  }
  ppcVar1 = (char **)*param_9;
  if ((char **)*param_9 != (char **)0x0) {
    do {
      ppcVar4 = ppcVar1;
      ppcVar1 = (char **)ppcVar4[2];
    } while ((char **)ppcVar4[2] != (char **)0x0);
    do {
      if (ppcVar4[1] != (char *)0x0) {
        setenv(*ppcVar4,ppcVar4[1],1);
      }
      ppcVar4 = (char **)environ_RB_NEXT((long)ppcVar4);
    } while (ppcVar4 != (char **)0x0);
  }
  return;
}



void format_job_callback(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  long *plVar1;
  undefined8 *puVar2;
  void *__dest;
  size_t __n;
  void *__src;
  long lVar3;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined auVar5 [16];
  undefined1 in_stack_00000008;
  
  puVar2 = *(undefined8 **)(param_9 + 0x38);
  puVar2[3] = 0;
  free((void *)puVar2[2]);
  __dest = (void *)evbuffer_readline(*(undefined8 *)(*(long *)(param_9 + 0x20) + 0x110));
  uVar4 = extraout_XMM0_Da;
  if (__dest == (void *)0x0) {
    auVar5 = evbuffer_get_length(*(undefined8 *)(*(long *)(param_9 + 0x20) + 0x110));
    __n = auVar5._0_8_;
    __dest = (void *)xmalloc(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,__n + 1,param_10,auVar5._8_8_,param_12,__dest,param_14);
    uVar4 = extraout_XMM0_Da_01;
    if (__n != 0) {
      __src = (void *)evbuffer_pullup(*(undefined8 *)(*(long *)(param_9 + 0x20) + 0x110),
                                      0xffffffffffffffff);
      __dest = memcpy(__dest,__src,__n);
      uVar4 = extraout_XMM0_Da_02;
    }
    *(undefined *)((long)__dest + __n) = 0;
  }
  puVar2[2] = __dest;
  if (*(int *)(puVar2 + 4) != 0) {
    lVar3 = clients;
    if (clients != 0) {
      do {
        uVar4 = server_status_client(lVar3);
        plVar1 = (long *)(lVar3 + 0x5c0);
        lVar3 = *plVar1;
      } while (*plVar1 != 0);
      __dest = (void *)puVar2[2];
    }
    *(undefined4 *)(puVar2 + 4) = 0;
  }
  log_emit(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: %s: %s",
           "format_job_callback",*puVar2,__dest,param_14,in_stack_00000008);
  return;
}



void format_cb_history_bytes
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,long param_12,long param_13,
               uint *param_14)

{
  uint uVar1;
  uint *puVar2;
  uint *puVar3;
  uint *puVar4;
  long lVar5;
  undefined1 in_stack_00000008;
  
  if (*(long *)(param_9 + 0x10) != 0) {
    lVar5 = *(long *)(*(long *)(param_9 + 0x10) + 0x150);
    uVar1 = *(uint *)(lVar5 + 0xc);
    if (uVar1 == 0) {
      lVar5 = 0;
    }
    else {
      puVar4 = *(uint **)(lVar5 + 0x18);
      param_13 = 0;
      puVar2 = puVar4 + 7;
      param_14 = puVar2 + (ulong)(uVar1 - 1) * 7;
      while( true ) {
        puVar3 = puVar2;
        param_12 = (ulong)*puVar4 * 5;
        param_13 = param_13 + param_12 + (ulong)puVar4[3] * 0x14;
        if (param_14 == puVar3) break;
        puVar2 = puVar3 + 7;
        puVar4 = puVar3;
      }
      lVar5 = param_13 + (ulong)uVar1 * 0x1c;
    }
    xasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)(param_10 + 8)
              ,&DAT_0017ad24,lVar5,param_12,param_13,param_14,in_stack_00000008);
    return;
  }
  return;
}



void format_cb_pid(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,long param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  __pid_t _Var1;
  undefined8 extraout_XMM0_Qa;
  undefined1 in_stack_00000008;
  
  _Var1 = getpid();
  xasprintf(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
            (long *)(param_10 + 8),"%ld",(long)_Var1,param_12,param_13,param_14,in_stack_00000008);
  return;
}



void format_cb_session_alerts
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  undefined8 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  uint uVar4;
  uint *puVar5;
  undefined8 extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined *puVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  char in_stack_fffffffffffffeb8;
  char local_138 [264];
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(param_9 + 8) != 0) {
    puVar6 = (undefined *)0xffffffff;
    local_138[0] = '\0';
    puVar5 = (uint *)winlinks_RB_MINMAX((long *)(*(long *)(param_9 + 8) + 0xf8),-1);
    uVar1 = extraout_RDX;
    uVar2 = extraout_XMM0_Da;
    uVar3 = extraout_XMM0_Db;
    while (puVar5 != (uint *)0x0) {
      if ((*(byte *)(puVar5 + 0xe) & 7) != 0) {
        param_12 = (ulong)*puVar5;
        xsnprintf(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  &stack0xfffffffffffffeb8,0x10,"%u",param_12,param_13,param_14,
                  in_stack_fffffffffffffeb8);
        if (local_138[0] != '\0') {
          strlcat(local_138,",",0x100);
        }
        puVar6 = &stack0xfffffffffffffeb8;
        strlcat(local_138,&stack0xfffffffffffffeb8,0x100);
        uVar4 = puVar5[0xe];
        if ((uVar4 & 2) != 0) {
          puVar6 = &DAT_0017ad29;
          strlcat(local_138,"#",0x100);
          uVar4 = puVar5[0xe];
        }
        if ((uVar4 & 1) != 0) {
          puVar6 = &DAT_00178125;
          strlcat(local_138,"!",0x100);
          uVar4 = puVar5[0xe];
        }
        if ((uVar4 & 4) != 0) {
          puVar6 = &DAT_00178f6d;
          strlcat(local_138,"~",0x100);
        }
      }
      puVar5 = (uint *)winlinks_RB_NEXT((long)puVar5);
      uVar1 = extraout_RDX_00;
      uVar2 = extraout_XMM0_Da_00;
      uVar3 = extraout_XMM0_Db_00;
    }
    xstrdup(CONCAT44(uVar3,uVar2),param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_138,
            puVar6,uVar1,param_12,param_13,param_14);
    *(undefined8 *)(param_10 + 8) = extraout_RAX;
  }
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void format_cb_window_layout
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,long param_10)

{
  long lVar1;
  
  lVar1 = *param_9;
  if (lVar1 == 0) {
    return;
  }
  if (*(int **)(lVar1 + 0x168) != (int *)0x0) {
    lVar1 = layout_dump(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(int **)(lVar1 + 0x168));
    *(long *)(param_10 + 8) = lVar1;
    return;
  }
  lVar1 = layout_dump(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      *(int **)(lVar1 + 0x160));
  *(long *)(param_10 + 8) = lVar1;
  return;
}



void format_cb_window_visible_layout
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,long param_10)

{
  long lVar1;
  
  if (*param_9 != 0) {
    lVar1 = layout_dump(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(int **)(*param_9 + 0x160));
    *(long *)(param_10 + 8) = lVar1;
    return;
  }
  return;
}



void format_cb_start_command
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  char *pcVar2;
  
  lVar1 = *(long *)(param_9 + 0x10);
  if (lVar1 != 0) {
    pcVar2 = cmd_stringify_argv(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(int *)(lVar1 + 0x34),*(long *)(lVar1 + 0x38),param_11,param_12,
                                param_13,param_14);
    *(char **)(param_10 + 8) = pcVar2;
    return;
  }
  return;
}



void format_cb_current_command
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  char *pcVar2;
  undefined8 uVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  long lVar4;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined auVar5 [16];
  
  lVar1 = *(long *)(param_9 + 0x10);
  if (lVar1 != 0) {
    lVar4 = lVar1 + 0x54;
    pcVar2 = (char *)osdep_get_name(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    *(int *)(lVar1 + 0x78),lVar4,param_11,param_12,param_13,param_14
                                   );
    auVar5._8_8_ = extraout_RDX;
    auVar5._0_8_ = pcVar2;
    if ((pcVar2 == (char *)0x0) || (uVar3 = extraout_XMM0_Qa, *pcVar2 == '\0')) {
      free(pcVar2);
      lVar4 = *(long *)(lVar1 + 0x38);
      pcVar2 = cmd_stringify_argv(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,
                                  param_7,param_8,*(int *)(lVar1 + 0x34),lVar4,extraout_RDX_00,
                                  param_12,param_13,param_14);
      auVar5._8_8_ = extraout_RDX_01;
      auVar5._0_8_ = pcVar2;
      if ((pcVar2 == (char *)0x0) || (uVar3 = extraout_XMM0_Qa_01, *pcVar2 == '\0')) {
        free(pcVar2);
        auVar5 = xstrdup(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,*(char **)(lVar1 + 0x40),lVar4,extraout_RDX_02,param_12,param_13,param_14)
        ;
        uVar3 = extraout_XMM0_Qa_03;
      }
    }
    uVar3 = parse_window_name(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              auVar5._0_8_,lVar4,auVar5._8_8_,param_12,param_13,param_14);
    *(undefined8 *)(param_10 + 8) = uVar3;
    free(auVar5._0_8_);
    return;
  }
  return;
}



void format_cb_current_path
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  undefined8 uVar2;
  undefined8 extraout_RDX;
  long lVar3;
  undefined8 extraout_XMM0_Qa;
  
  if (*(long *)(param_9 + 0x10) != 0) {
    lVar3 = param_10;
    pcVar1 = osdep_get_cwd(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           *(int *)(*(long *)(param_9 + 0x10) + 0x78),param_10,param_11,param_12,
                           param_13,param_14);
    if (pcVar1 != (char *)0x0) {
      uVar2 = xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      pcVar1,lVar3,extraout_RDX,param_12,param_13,param_14);
      *(undefined8 *)(param_10 + 8) = uVar2;
    }
    return;
  }
  return;
}



void format_cb_pane_tabs(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,long param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  ulong uVar4;
  undefined8 uVar5;
  uint uVar6;
  undefined8 unaff_RBX;
  undefined8 extraout_XMM0_Qa;
  undefined uVar7;
  
  lVar1 = *(long *)(param_9 + 0x10);
  if (lVar1 != 0) {
    uVar2 = evbuffer_new();
    uVar7 = (undefined)unaff_RBX;
    lVar3 = *(long *)(lVar1 + 0x150);
    if (*(int *)(lVar3 + 4) != 0) {
      uVar4 = 0;
      do {
        if ((*(byte *)(*(long *)(lVar1 + 0x180) + (uVar4 >> 3)) >> ((uint)uVar4 & 7) & 1) != 0) {
          lVar3 = evbuffer_get_length(uVar2);
          if (lVar3 != 0) {
            evbuffer_add(uVar2,&DAT_00177cdb,1);
          }
          evbuffer_add_printf(uVar2,"%u",uVar4);
          lVar3 = *(long *)(lVar1 + 0x150);
        }
        uVar7 = (undefined)unaff_RBX;
        uVar6 = (uint)uVar4 + 1;
        uVar4 = (ulong)uVar6;
      } while (uVar6 < *(uint *)(lVar3 + 4));
    }
    uVar4 = evbuffer_get_length(uVar2);
    uVar5 = evbuffer_pullup(uVar2,0xffffffffffffffff);
    xasprintf(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              (long *)(param_10 + 8),"%.*s",uVar4 & 0xffffffff,uVar5,param_13,param_14,uVar7);
    evbuffer_free(uVar2);
    return;
  }
  return;
}



void format_cb_host_short
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,long param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  char *pcVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar3;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  char acStack_68 [72];
  long local_20;
  
  uVar3 = 0x41;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = gethostname(acStack_68,0x41);
  if (iVar1 == 0) {
    uVar3 = 0x2e;
    pcVar2 = strchr(acStack_68,0x2e);
    if (pcVar2 != (char *)0x0) {
      *pcVar2 = '\0';
    }
    uVar3 = xstrdup(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    acStack_68,uVar3,extraout_RDX_00,param_12,param_13,param_14);
    *(undefined8 *)(param_10 + 8) = uVar3;
  }
  else {
    uVar3 = xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"",
                    uVar3,extraout_RDX,param_12,param_13,param_14);
    *(undefined8 *)(param_10 + 8) = uVar3;
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void format_cb_host(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   undefined8 param_9,long param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  undefined8 extraout_RDX;
  undefined8 uVar2;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  char acStack_68 [72];
  long local_20;
  
  uVar2 = 0x41;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = gethostname(acStack_68,0x41);
  if (iVar1 == 0) {
    uVar2 = xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    acStack_68,uVar2,extraout_RDX,param_12,param_13,param_14);
    *(undefined8 *)(param_10 + 8) = uVar2;
  }
  else {
    uVar2 = xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"",
                    uVar2,extraout_RDX,param_12,param_13,param_14);
    *(undefined8 *)(param_10 + 8) = uVar2;
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void format_job_tree_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_0013adc8:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x38);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x40) != 1)) {
        *(undefined4 *)(*param_1 + 0x40) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x38);
      lVar3 = *(long *)(lVar2 + 0x28);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x30);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x40) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x30) == param_2) {
          lVar3 = *(long *)(param_2 + 0x28);
          *(long *)(lVar1 + 0x30) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x38) = lVar2;
            lVar3 = lVar2;
LAB_0013afe7:
            *(long *)(lVar3 + 0x28) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x38) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x38);
            *(long *)(param_2 + 0x38) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x28) == lVar1) goto LAB_0013afe7;
              *(long *)(lVar3 + 0x30) = param_2;
            }
          }
          *(long *)(param_2 + 0x28) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x28);
          *(long *)(lVar1 + 0x38) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x40) = 0;
        lVar1 = *(long *)(lVar3 + 0x30);
        *(undefined4 *)(lVar2 + 0x40) = 1;
        *(long *)(lVar2 + 0x28) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x38) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x38);
        *(long *)(lVar3 + 0x38) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x28) == lVar2) {
          *(long *)(lVar1 + 0x28) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x30) = lVar3;
        }
        *(long *)(lVar3 + 0x30) = lVar2;
        *(long *)(lVar2 + 0x38) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x40) = 0;
        *(undefined4 *)(lVar1 + 0x40) = 0;
        *(undefined4 *)(lVar2 + 0x40) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x40) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x28) == param_2) {
        lVar3 = *(long *)(param_2 + 0x30);
        *(long *)(lVar1 + 0x28) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x38) = lVar2;
          lVar3 = lVar2;
LAB_0013aeee:
          if (*(long *)(lVar3 + 0x28) == lVar1) {
            *(long *)(lVar3 + 0x28) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x30) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x38) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x38);
          *(long *)(param_2 + 0x38) = lVar3;
          if (lVar3 != 0) goto LAB_0013aeee;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x30) = lVar1;
        *(long *)(lVar1 + 0x38) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x40) = 0;
      lVar1 = *(long *)(lVar2 + 0x30);
      *(undefined4 *)(lVar2 + 0x40) = 1;
      lVar3 = *(long *)(lVar1 + 0x28);
      *(long *)(lVar2 + 0x30) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x38) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x38);
      *(long *)(lVar1 + 0x38) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x28) == lVar2) {
        *(long *)(lVar3 + 0x28) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x30) = lVar1;
      }
      *(long *)(lVar1 + 0x28) = lVar2;
      *(long *)(lVar2 + 0x38) = lVar1;
      goto LAB_0013adc8;
    }
    *(undefined4 *)(lVar3 + 0x40) = 0;
    *(undefined4 *)(lVar1 + 0x40) = 0;
    *(undefined4 *)(lVar2 + 0x40) = 1;
    param_2 = lVar2;
  } while( true );
}



void format_job_tree_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_0013b095(param_1,param_2,param_3);
  return;
}



void FUN_0013b095(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x40) != 0)) goto LAB_0013b14b;
    if (*param_1 == param_3) goto joined_r0x0013b28e;
    lVar2 = *(long *)(param_2 + 0x28);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x40) == 1) {
        lVar1 = *(long *)(lVar2 + 0x30);
        *(undefined4 *)(lVar2 + 0x40) = 0;
        *(undefined4 *)(param_2 + 0x40) = 1;
        *(long *)(param_2 + 0x28) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x38) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x38);
        *(long *)(lVar2 + 0x38) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x38) + 0x28) == param_2) {
          *(long *)(lVar3 + 0x28) = lVar2;
          lVar1 = *(long *)(param_2 + 0x28);
        }
        else {
          *(long *)(lVar3 + 0x30) = lVar2;
        }
        *(long *)(lVar2 + 0x30) = param_2;
        *(long *)(param_2 + 0x38) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x28);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x40) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x30);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x40) == 0)) goto LAB_0013b084;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x40) != 0)) goto LAB_0013b232;
        lVar2 = *(long *)(lVar3 + 0x28);
        *(undefined4 *)(lVar3 + 0x40) = 0;
        *(undefined4 *)(lVar1 + 0x40) = 1;
        *(long *)(lVar1 + 0x30) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x38) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x38);
        *(long *)(lVar3 + 0x38) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x28) == lVar1) {
          *(long *)(lVar2 + 0x28) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x30) = lVar3;
        }
        *(long *)(lVar3 + 0x28) = lVar1;
        *(long *)(lVar1 + 0x38) = lVar3;
        lVar3 = *(long *)(param_2 + 0x28);
        lVar2 = *(long *)(lVar3 + 0x28);
        *(undefined4 *)(lVar3 + 0x40) = *(undefined4 *)(param_2 + 0x40);
        *(undefined4 *)(param_2 + 0x40) = 0;
        if (lVar2 != 0) goto LAB_0013b245;
      }
      else {
LAB_0013b232:
        lVar3 = *(long *)(param_2 + 0x28);
        *(undefined4 *)(lVar1 + 0x40) = *(undefined4 *)(param_2 + 0x40);
        *(undefined4 *)(param_2 + 0x40) = 0;
LAB_0013b245:
        *(undefined4 *)(lVar2 + 0x40) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x30);
      *(long *)(param_2 + 0x28) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x38) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x38);
      *(long *)(lVar3 + 0x38) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x38) + 0x28) == param_2) {
        *(long *)(lVar2 + 0x28) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x30) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x30) = param_2;
      *(long *)(param_2 + 0x38) = lVar3;
      goto joined_r0x0013b28e;
    }
    lVar2 = *(long *)(param_2 + 0x30);
    lVar3 = *(long *)(lVar2 + 0x28);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x40) == 1) {
      *(undefined4 *)(lVar2 + 0x40) = 0;
      *(undefined4 *)(param_2 + 0x40) = 1;
      *(long *)(param_2 + 0x30) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x38) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x38);
      *(long *)(lVar2 + 0x38) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x28) == param_2) {
        *(long *)(lVar4 + 0x28) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x30) = lVar2;
        lVar1 = *(long *)(param_2 + 0x30);
      }
      *(long *)(lVar2 + 0x28) = param_2;
      lVar3 = *(long *)(lVar1 + 0x28);
      *(long *)(param_2 + 0x38) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x40) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x30);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x40) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x30);
        *(undefined4 *)(lVar3 + 0x40) = 0;
        *(undefined4 *)(lVar1 + 0x40) = 1;
        *(long *)(lVar1 + 0x28) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x38) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x38);
        *(long *)(lVar3 + 0x38) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x28) == lVar1) {
          *(long *)(lVar2 + 0x28) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x30) = lVar3;
        }
        *(long *)(lVar3 + 0x30) = lVar1;
        lVar4 = *(long *)(param_2 + 0x30);
        *(long *)(lVar1 + 0x38) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x30);
        *(undefined4 *)(lVar4 + 0x40) = *(undefined4 *)(param_2 + 0x40);
        *(undefined4 *)(param_2 + 0x40) = 0;
        if (lVar2 != 0) goto LAB_0013b100;
        goto LAB_0013b107;
      }
LAB_0013b0ef:
      lVar4 = *(long *)(param_2 + 0x30);
      *(undefined4 *)(lVar1 + 0x40) = *(undefined4 *)(param_2 + 0x40);
      *(undefined4 *)(param_2 + 0x40) = 0;
LAB_0013b100:
      *(undefined4 *)(lVar2 + 0x40) = 0;
LAB_0013b107:
      lVar2 = *(long *)(lVar4 + 0x28);
      *(long *)(param_2 + 0x30) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x38) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x38);
      *(long *)(lVar4 + 0x38) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x28) == param_2) {
        *(long *)(lVar2 + 0x28) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x30) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x28) = param_2;
      *(long *)(param_2 + 0x38) = lVar4;
joined_r0x0013b28e:
      if (param_3 == 0) {
        return;
      }
LAB_0013b14b:
      *(undefined4 *)(param_3 + 0x40) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x30);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x40) != 0)) goto LAB_0013b0ef;
LAB_0013b084:
    *(undefined4 *)(lVar1 + 0x40) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x38);
  } while( true );
}



long format_job_tree_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x30);
  if (*(long *)(param_2 + 0x28) == 0) {
    lVar7 = *(long *)(param_2 + 0x38);
    iVar4 = *(int *)(param_2 + 0x40);
    if (lVar6 != 0) goto LAB_0013b4bc;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x28);
      } while (*(long *)(lVar5 + 0x28) != 0);
      lVar7 = *(long *)(lVar5 + 0x38);
      lVar6 = *(long *)(lVar5 + 0x30);
      iVar4 = *(int *)(lVar5 + 0x40);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x38) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x38);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x28) == lVar5) {
        *(long *)(lVar7 + 0x28) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x30) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x2c);
      uVar2 = *(undefined4 *)(param_2 + 0x30);
      uVar3 = *(undefined4 *)(param_2 + 0x34);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x28) = *(undefined4 *)(param_2 + 0x28);
      *(undefined4 *)(lVar5 + 0x2c) = uVar1;
      *(undefined4 *)(lVar5 + 0x30) = uVar2;
      *(undefined4 *)(lVar5 + 0x34) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x3c);
      uVar2 = *(undefined4 *)(param_2 + 0x40);
      uVar3 = *(undefined4 *)(param_2 + 0x44);
      *(undefined4 *)(lVar5 + 0x38) = *(undefined4 *)(param_2 + 0x38);
      *(undefined4 *)(lVar5 + 0x3c) = uVar1;
      *(undefined4 *)(lVar5 + 0x40) = uVar2;
      *(undefined4 *)(lVar5 + 0x44) = uVar3;
      lVar8 = *(long *)(param_2 + 0x38);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x28) == param_2) {
        *(long *)(lVar8 + 0x28) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x30) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x28) + 0x38) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x30) != 0) {
        *(long *)(*(long *)(param_2 + 0x30) + 0x38) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x38)) {
      }
      goto joined_r0x0013b4d1;
    }
    lVar7 = *(long *)(param_2 + 0x38);
    iVar4 = *(int *)(param_2 + 0x40);
    lVar6 = *(long *)(param_2 + 0x28);
LAB_0013b4bc:
    *(long *)(lVar6 + 0x38) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x28) == param_2) {
    *(long *)(lVar7 + 0x28) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x30) = lVar6;
  }
joined_r0x0013b4d1:
  if (iVar4 == 0) {
    format_job_tree_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



char ** format_job_tree_RB_INSERT(char **param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  
  if ((char **)*param_1 == (char **)0x0) {
    param_2[7] = (char *)0x0;
    param_2[6] = (char *)0x0;
    param_2[5] = (char *)0x0;
    *(undefined4 *)(param_2 + 8) = 1;
    *param_1 = (char *)param_2;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    do {
      ppcVar3 = ppcVar1;
      iVar2 = strcmp(__s1,*ppcVar3);
      if (iVar2 < 0) {
        ppcVar1 = (char **)ppcVar3[5];
      }
      else {
        if (iVar2 == 0) {
          return ppcVar3;
        }
        ppcVar1 = (char **)ppcVar3[6];
      }
    } while (ppcVar1 != (char **)0x0);
    param_2[7] = (char *)ppcVar3;
    param_2[6] = (char *)0x0;
    param_2[5] = (char *)0x0;
    *(undefined4 *)(param_2 + 8) = 1;
    if (iVar2 < 0) {
      ppcVar3[5] = (char *)param_2;
    }
    else {
      ppcVar3[6] = (char *)param_2;
    }
  }
  format_job_tree_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (char **)0x0;
}



char ** format_job_tree_RB_FIND(char **param_1,char **param_2)

{
  char *__s1;
  int iVar1;
  char **ppcVar2;
  
  ppcVar2 = (char **)*param_1;
  if (ppcVar2 != (char **)0x0) {
    __s1 = *param_2;
    do {
      while( true ) {
        iVar1 = strcmp(__s1,*ppcVar2);
        if (iVar1 < 0) break;
        if (iVar1 == 0) {
          return ppcVar2;
        }
        ppcVar2 = (char **)ppcVar2[6];
        if (ppcVar2 == (char **)0x0) {
          return (char **)0x0;
        }
      }
      ppcVar2 = (char **)ppcVar2[5];
    } while (ppcVar2 != (char **)0x0);
  }
  return ppcVar2;
}



char ** format_job_tree_RB_NFIND(long *param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  char **ppcVar4;
  
  if ((char **)*param_1 == (char **)0x0) {
    ppcVar4 = (char **)0x0;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    ppcVar4 = (char **)0x0;
    do {
      while( true ) {
        ppcVar3 = ppcVar1;
        iVar2 = strcmp(__s1,*ppcVar3);
        if (-1 < iVar2) break;
        ppcVar1 = (char **)ppcVar3[5];
        ppcVar4 = ppcVar3;
        if ((char **)ppcVar3[5] == (char **)0x0) {
          return ppcVar3;
        }
      }
      if (iVar2 == 0) {
        return ppcVar3;
      }
      ppcVar1 = (char **)ppcVar3[6];
    } while ((char **)ppcVar3[6] != (char **)0x0);
  }
  return ppcVar4;
}



long format_job_tree_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x30);
  if (*(long *)(param_1 + 0x30) == 0) {
    lVar2 = *(long *)(param_1 + 0x38);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x28) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x30))) {
      while (lVar1 = *(long *)(lVar2 + 0x38), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x30);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x28);
    } while (*(long *)(lVar2 + 0x28) != 0);
  }
  return lVar2;
}



void format_job_timer(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  long lVar1;
  time_t tVar2;
  void **ppvVar3;
  void **__ptr;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar4;
  undefined8 uVar5;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  uVar5 = 0x3c;
  tVar2 = time((time_t *)0x0);
  ppvVar3 = format_jobs;
  if (format_jobs != (void **)0x0) {
    do {
      __ptr = ppvVar3;
      ppvVar3 = (void **)__ptr[5];
    } while ((void **)__ptr[5] != (void **)0x0);
    do {
      ppvVar3 = (void **)format_job_tree_RB_NEXT((long)__ptr);
      if (((long)__ptr[1] <= tVar2) && (0xe0f < tVar2 - (long)__ptr[1])) {
        format_job_tree_RB_REMOVE((long *)&format_jobs,(long)__ptr);
        uVar4 = log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                         "%s: %s","format_job_timer",*__ptr,in_R8,in_R9,(char)uVar5);
        if (__ptr[3] != (void *)0x0) {
          job_free(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__ptr[3]);
        }
        free(*__ptr);
        free(__ptr[2]);
        free(__ptr);
      }
      __ptr = ppvVar3;
    } while (ppvVar3 != (void **)0x0);
  }
  event_del(format_job_event);
  event_add(format_job_event,&stack0xffffffffffffffb8);
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



long format_job_tree_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x28);
  if (*(long *)(param_1 + 0x28) == 0) {
    lVar2 = *(long *)(param_1 + 0x38);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x30) != param_1)) &&
       (*(long *)(lVar2 + 0x28) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x38), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x28) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x30);
    } while (*(long *)(lVar2 + 0x30) != 0);
  }
  return lVar2;
}



long format_job_tree_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x30);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x28);
    }
  }
  return lVar2;
}



void format_job_cmp(char **param_1,char **param_2)

{
  strcmp(*param_1,*param_2);
  return;
}



void format_entry_tree_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_0013b908:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x30);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x38) != 1)) {
        *(undefined4 *)(*param_1 + 0x38) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x30);
      lVar3 = *(long *)(lVar2 + 0x20);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x28);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x38) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x28) == param_2) {
          lVar3 = *(long *)(param_2 + 0x20);
          *(long *)(lVar1 + 0x28) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x30) = lVar2;
            lVar3 = lVar2;
LAB_0013bb27:
            *(long *)(lVar3 + 0x20) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x30) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x30);
            *(long *)(param_2 + 0x30) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x20) == lVar1) goto LAB_0013bb27;
              *(long *)(lVar3 + 0x28) = param_2;
            }
          }
          *(long *)(param_2 + 0x20) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x20);
          *(long *)(lVar1 + 0x30) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x38) = 0;
        lVar1 = *(long *)(lVar3 + 0x28);
        *(undefined4 *)(lVar2 + 0x38) = 1;
        *(long *)(lVar2 + 0x20) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x30) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x30);
        *(long *)(lVar3 + 0x30) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x20) == lVar2) {
          *(long *)(lVar1 + 0x20) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x28) = lVar3;
        }
        *(long *)(lVar3 + 0x28) = lVar2;
        *(long *)(lVar2 + 0x30) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x38) = 0;
        *(undefined4 *)(lVar1 + 0x38) = 0;
        *(undefined4 *)(lVar2 + 0x38) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x38) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x20) == param_2) {
        lVar3 = *(long *)(param_2 + 0x28);
        *(long *)(lVar1 + 0x20) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x30) = lVar2;
          lVar3 = lVar2;
LAB_0013ba2e:
          if (*(long *)(lVar3 + 0x20) == lVar1) {
            *(long *)(lVar3 + 0x20) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x28) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x30) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x30);
          *(long *)(param_2 + 0x30) = lVar3;
          if (lVar3 != 0) goto LAB_0013ba2e;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x28) = lVar1;
        *(long *)(lVar1 + 0x30) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x38) = 0;
      lVar1 = *(long *)(lVar2 + 0x28);
      *(undefined4 *)(lVar2 + 0x38) = 1;
      lVar3 = *(long *)(lVar1 + 0x20);
      *(long *)(lVar2 + 0x28) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x30) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x30);
      *(long *)(lVar1 + 0x30) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x20) == lVar2) {
        *(long *)(lVar3 + 0x20) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x28) = lVar1;
      }
      *(long *)(lVar1 + 0x20) = lVar2;
      *(long *)(lVar2 + 0x30) = lVar1;
      goto LAB_0013b908;
    }
    *(undefined4 *)(lVar3 + 0x38) = 0;
    *(undefined4 *)(lVar1 + 0x38) = 0;
    *(undefined4 *)(lVar2 + 0x38) = 1;
    param_2 = lVar2;
  } while( true );
}



void format_entry_tree_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_0013bbd5(param_1,param_2,param_3);
  return;
}



void FUN_0013bbd5(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x38) != 0)) goto LAB_0013bc8b;
    if (*param_1 == param_3) goto joined_r0x0013bdce;
    lVar2 = *(long *)(param_2 + 0x20);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x38) == 1) {
        lVar1 = *(long *)(lVar2 + 0x28);
        *(undefined4 *)(lVar2 + 0x38) = 0;
        *(undefined4 *)(param_2 + 0x38) = 1;
        *(long *)(param_2 + 0x20) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x30) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x30);
        *(long *)(lVar2 + 0x30) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x30) + 0x20) == param_2) {
          *(long *)(lVar3 + 0x20) = lVar2;
          lVar1 = *(long *)(param_2 + 0x20);
        }
        else {
          *(long *)(lVar3 + 0x28) = lVar2;
        }
        *(long *)(lVar2 + 0x28) = param_2;
        *(long *)(param_2 + 0x30) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x20);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x38) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x28);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x38) == 0)) goto LAB_0013bbc4;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x38) != 0)) goto LAB_0013bd72;
        lVar2 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar3 + 0x38) = 0;
        *(undefined4 *)(lVar1 + 0x38) = 1;
        *(long *)(lVar1 + 0x28) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x30) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x30);
        *(long *)(lVar3 + 0x30) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x20) == lVar1) {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x28) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar1;
        *(long *)(lVar1 + 0x30) = lVar3;
        lVar3 = *(long *)(param_2 + 0x20);
        lVar2 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar3 + 0x38) = *(undefined4 *)(param_2 + 0x38);
        *(undefined4 *)(param_2 + 0x38) = 0;
        if (lVar2 != 0) goto LAB_0013bd85;
      }
      else {
LAB_0013bd72:
        lVar3 = *(long *)(param_2 + 0x20);
        *(undefined4 *)(lVar1 + 0x38) = *(undefined4 *)(param_2 + 0x38);
        *(undefined4 *)(param_2 + 0x38) = 0;
LAB_0013bd85:
        *(undefined4 *)(lVar2 + 0x38) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x28);
      *(long *)(param_2 + 0x20) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x30) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x30);
      *(long *)(lVar3 + 0x30) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x30) + 0x20) == param_2) {
        *(long *)(lVar2 + 0x20) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x28) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x28) = param_2;
      *(long *)(param_2 + 0x30) = lVar3;
      goto joined_r0x0013bdce;
    }
    lVar2 = *(long *)(param_2 + 0x28);
    lVar3 = *(long *)(lVar2 + 0x20);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x38) == 1) {
      *(undefined4 *)(lVar2 + 0x38) = 0;
      *(undefined4 *)(param_2 + 0x38) = 1;
      *(long *)(param_2 + 0x28) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x30) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x30);
      *(long *)(lVar2 + 0x30) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x20) == param_2) {
        *(long *)(lVar4 + 0x20) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x28) = lVar2;
        lVar1 = *(long *)(param_2 + 0x28);
      }
      *(long *)(lVar2 + 0x20) = param_2;
      lVar3 = *(long *)(lVar1 + 0x20);
      *(long *)(param_2 + 0x30) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x38) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x28);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x38) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x28);
        *(undefined4 *)(lVar3 + 0x38) = 0;
        *(undefined4 *)(lVar1 + 0x38) = 1;
        *(long *)(lVar1 + 0x20) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x30) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x30);
        *(long *)(lVar3 + 0x30) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x20) == lVar1) {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x28) = lVar3;
        }
        *(long *)(lVar3 + 0x28) = lVar1;
        lVar4 = *(long *)(param_2 + 0x28);
        *(long *)(lVar1 + 0x30) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x28);
        *(undefined4 *)(lVar4 + 0x38) = *(undefined4 *)(param_2 + 0x38);
        *(undefined4 *)(param_2 + 0x38) = 0;
        if (lVar2 != 0) goto LAB_0013bc40;
        goto LAB_0013bc47;
      }
LAB_0013bc2f:
      lVar4 = *(long *)(param_2 + 0x28);
      *(undefined4 *)(lVar1 + 0x38) = *(undefined4 *)(param_2 + 0x38);
      *(undefined4 *)(param_2 + 0x38) = 0;
LAB_0013bc40:
      *(undefined4 *)(lVar2 + 0x38) = 0;
LAB_0013bc47:
      lVar2 = *(long *)(lVar4 + 0x20);
      *(long *)(param_2 + 0x28) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x30) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x30);
      *(long *)(lVar4 + 0x30) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x20) == param_2) {
        *(long *)(lVar2 + 0x20) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x28) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x20) = param_2;
      *(long *)(param_2 + 0x30) = lVar4;
joined_r0x0013bdce:
      if (param_3 == 0) {
        return;
      }
LAB_0013bc8b:
      *(undefined4 *)(param_3 + 0x38) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x28);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x38) != 0)) goto LAB_0013bc2f;
LAB_0013bbc4:
    *(undefined4 *)(lVar1 + 0x38) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x30);
  } while( true );
}



long format_entry_tree_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x28);
  if (*(long *)(param_2 + 0x20) == 0) {
    lVar7 = *(long *)(param_2 + 0x30);
    iVar4 = *(int *)(param_2 + 0x38);
    if (lVar6 != 0) goto LAB_0013bffc;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x20);
      } while (*(long *)(lVar5 + 0x20) != 0);
      lVar7 = *(long *)(lVar5 + 0x30);
      lVar6 = *(long *)(lVar5 + 0x28);
      iVar4 = *(int *)(lVar5 + 0x38);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x30) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x30);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x20) == lVar5) {
        *(long *)(lVar7 + 0x20) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x28) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x24);
      uVar2 = *(undefined4 *)(param_2 + 0x28);
      uVar3 = *(undefined4 *)(param_2 + 0x2c);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x20) = *(undefined4 *)(param_2 + 0x20);
      *(undefined4 *)(lVar5 + 0x24) = uVar1;
      *(undefined4 *)(lVar5 + 0x28) = uVar2;
      *(undefined4 *)(lVar5 + 0x2c) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x34);
      uVar2 = *(undefined4 *)(param_2 + 0x38);
      uVar3 = *(undefined4 *)(param_2 + 0x3c);
      *(undefined4 *)(lVar5 + 0x30) = *(undefined4 *)(param_2 + 0x30);
      *(undefined4 *)(lVar5 + 0x34) = uVar1;
      *(undefined4 *)(lVar5 + 0x38) = uVar2;
      *(undefined4 *)(lVar5 + 0x3c) = uVar3;
      lVar8 = *(long *)(param_2 + 0x30);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x20) == param_2) {
        *(long *)(lVar8 + 0x20) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x28) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x20) + 0x30) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x28) != 0) {
        *(long *)(*(long *)(param_2 + 0x28) + 0x30) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x30)) {
      }
      goto joined_r0x0013c011;
    }
    lVar7 = *(long *)(param_2 + 0x30);
    iVar4 = *(int *)(param_2 + 0x38);
    lVar6 = *(long *)(param_2 + 0x20);
LAB_0013bffc:
    *(long *)(lVar6 + 0x30) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x20) == param_2) {
    *(long *)(lVar7 + 0x20) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x28) = lVar6;
  }
joined_r0x0013c011:
  if (iVar4 == 0) {
    format_entry_tree_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



char ** format_entry_tree_RB_INSERT(char **param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  
  if ((char **)*param_1 == (char **)0x0) {
    param_2[6] = (char *)0x0;
    param_2[5] = (char *)0x0;
    param_2[4] = (char *)0x0;
    *(undefined4 *)(param_2 + 7) = 1;
    *param_1 = (char *)param_2;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    do {
      ppcVar3 = ppcVar1;
      iVar2 = strcmp(__s1,*ppcVar3);
      if (iVar2 < 0) {
        ppcVar1 = (char **)ppcVar3[4];
      }
      else {
        if (iVar2 == 0) {
          return ppcVar3;
        }
        ppcVar1 = (char **)ppcVar3[5];
      }
    } while (ppcVar1 != (char **)0x0);
    param_2[6] = (char *)ppcVar3;
    param_2[5] = (char *)0x0;
    param_2[4] = (char *)0x0;
    *(undefined4 *)(param_2 + 7) = 1;
    if (iVar2 < 0) {
      ppcVar3[4] = (char *)param_2;
    }
    else {
      ppcVar3[5] = (char *)param_2;
    }
  }
  format_entry_tree_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (char **)0x0;
}



char ** format_entry_tree_RB_FIND(char **param_1,char **param_2)

{
  char *__s1;
  int iVar1;
  char **ppcVar2;
  
  ppcVar2 = (char **)*param_1;
  if (ppcVar2 != (char **)0x0) {
    __s1 = *param_2;
    do {
      while( true ) {
        iVar1 = strcmp(__s1,*ppcVar2);
        if (iVar1 < 0) break;
        if (iVar1 == 0) {
          return ppcVar2;
        }
        ppcVar2 = (char **)ppcVar2[5];
        if (ppcVar2 == (char **)0x0) {
          return (char **)0x0;
        }
      }
      ppcVar2 = (char **)ppcVar2[4];
    } while (ppcVar2 != (char **)0x0);
  }
  return ppcVar2;
}



char ** format_entry_tree_RB_NFIND(long *param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  char **ppcVar4;
  
  if ((char **)*param_1 == (char **)0x0) {
    ppcVar4 = (char **)0x0;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    ppcVar4 = (char **)0x0;
    do {
      while( true ) {
        ppcVar3 = ppcVar1;
        iVar2 = strcmp(__s1,*ppcVar3);
        if (-1 < iVar2) break;
        ppcVar1 = (char **)ppcVar3[4];
        ppcVar4 = ppcVar3;
        if ((char **)ppcVar3[4] == (char **)0x0) {
          return ppcVar3;
        }
      }
      if (iVar2 == 0) {
        return ppcVar3;
      }
      ppcVar1 = (char **)ppcVar3[5];
    } while ((char **)ppcVar3[5] != (char **)0x0);
  }
  return ppcVar4;
}



long format_entry_tree_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x28);
  if (*(long *)(param_1 + 0x28) == 0) {
    lVar2 = *(long *)(param_1 + 0x30);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x20) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x28))) {
      while (lVar1 = *(long *)(lVar2 + 0x30), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x28);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x20);
    } while (*(long *)(lVar2 + 0x20) != 0);
  }
  return lVar2;
}



long format_entry_tree_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x20);
  if (*(long *)(param_1 + 0x20) == 0) {
    lVar2 = *(long *)(param_1 + 0x30);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x28) != param_1)) &&
       (*(long *)(lVar2 + 0x20) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x30), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x20) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x28);
    } while (*(long *)(lVar2 + 0x28) != 0);
  }
  return lVar2;
}



long format_entry_tree_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x28);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x20);
    }
  }
  return lVar2;
}



void format_entry_cmp(char **param_1,char **param_2)

{
  strcmp(*param_1,*param_2);
  return;
}



void format_free(void *param_1)

{
  void **ppvVar1;
  void **__ptr;
  
  ppvVar1 = *(void ***)((long)param_1 + 0x20);
  if (*(void ***)((long)param_1 + 0x20) != (void **)0x0) {
    do {
      __ptr = ppvVar1;
      ppvVar1 = (void **)__ptr[4];
    } while (ppvVar1 != (void **)0x0);
    do {
      ppvVar1 = (void **)format_entry_tree_RB_NEXT((long)__ptr);
      format_entry_tree_RB_REMOVE((long *)((long)param_1 + 0x20),(long)__ptr);
      free(__ptr[1]);
      free(*__ptr);
      free(__ptr);
      __ptr = ppvVar1;
    } while (ppvVar1 != (void **)0x0);
  }
  free(param_1);
  return;
}



void format_add(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14,undefined param_15)

{
  char in_AL;
  char *extraout_RAX;
  char **ppcVar1;
  char **__ptr;
  char *pcVar2;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar3;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar4;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined auVar5 [16];
  undefined4 local_f8;
  undefined4 local_f4;
  undefined *local_f0;
  undefined *local_e8;
  long local_e0;
  undefined local_d8 [24];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined local_a8 [16];
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  
  if (in_AL != '\0') {
    local_a8._8_8_ = in_XMM0_Qb;
    local_a8._0_8_ = param_1;
    local_98._4_12_ = in_register_00001224;
    local_98._0_4_ = param_2;
    local_88._4_12_ = in_register_00001244;
    local_88._0_4_ = param_3;
    local_78._4_12_ = in_register_00001264;
    local_78._0_4_ = param_4;
    local_68._4_12_ = in_register_00001284;
    local_68._0_4_ = param_5;
    local_58._4_12_ = in_register_000012a4;
    local_58._0_4_ = param_6;
    local_48._4_12_ = in_register_000012c4;
    local_48._0_4_ = param_7;
    local_38._4_12_ = in_register_000012e4;
    local_38._0_4_ = param_8;
  }
  local_e0 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar2 = param_10;
  local_c0 = param_12;
  local_b8 = param_13;
  local_b0 = param_14;
  auVar5 = xmalloc((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x40,
                   param_10,param_11,param_12,param_13,param_14);
  __ptr = auVar5._0_8_;
  xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,param_10,pcVar2,auVar5._8_8_,param_12,param_13,param_14);
  *__ptr = extraout_RAX;
  ppcVar1 = format_entry_tree_RB_INSERT((char **)(param_9 + 0x20),__ptr);
  uVar3 = extraout_XMM0_Da_00;
  uVar4 = extraout_XMM0_Db_00;
  if (ppcVar1 != (char **)0x0) {
    free(*__ptr);
    free(__ptr);
    free(ppcVar1[1]);
    __ptr = ppcVar1;
    uVar3 = extraout_XMM0_Da_01;
    uVar4 = extraout_XMM0_Db_01;
  }
  __ptr[2] = (char *)0x0;
  __ptr[3] = (char *)0x0;
  local_f0 = &param_15;
  local_e8 = local_d8;
  local_f8 = 0x18;
  local_f4 = 0x30;
  xvasprintf(CONCAT44(uVar4,uVar3),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             (long *)(__ptr + 1),param_11,&local_f8,param_12,param_13,param_14);
  if (local_e0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void format_add_tv(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,char *param_10,char **param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  char *extraout_RAX;
  char **ppcVar1;
  char **__ptr;
  char *pcVar2;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined auVar3 [16];
  
  pcVar2 = param_10;
  auVar3 = xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x40,param_10,
                   param_11,param_12,param_13,param_14);
  __ptr = auVar3._0_8_;
  xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,param_10,pcVar2,auVar3._8_8_,param_12,param_13,param_14);
  *__ptr = extraout_RAX;
  ppcVar1 = format_entry_tree_RB_INSERT((char **)(param_9 + 0x20),__ptr);
  if (ppcVar1 != (char **)0x0) {
    free(*__ptr);
    free(__ptr);
    free(ppcVar1[1]);
    __ptr = ppcVar1;
  }
  pcVar2 = *param_11;
  __ptr[3] = (char *)0x0;
  __ptr[1] = (char *)0x0;
  __ptr[2] = pcVar2;
  return;
}



void format_add_cb(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,char *param_10,char *param_11,undefined8 param_12,undefined8 param_13
                  ,undefined8 param_14)

{
  char *extraout_RAX;
  char **ppcVar1;
  char **__ptr;
  char *pcVar2;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined auVar3 [16];
  
  pcVar2 = param_10;
  auVar3 = xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x40,param_10,
                   param_11,param_12,param_13,param_14);
  __ptr = auVar3._0_8_;
  xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,param_10,pcVar2,auVar3._8_8_,param_12,param_13,param_14);
  *__ptr = extraout_RAX;
  ppcVar1 = format_entry_tree_RB_INSERT((char **)(param_9 + 0x20),__ptr);
  if (ppcVar1 != (char **)0x0) {
    free(*__ptr);
    free(__ptr);
    free(ppcVar1[1]);
    __ptr = ppcVar1;
  }
  __ptr[3] = param_11;
  __ptr[2] = (char *)0x0;
  __ptr[1] = (char *)0x0;
  return;
}



long format_create(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,undefined4 param_10,undefined8 param_11,undefined *param_12,
                  undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  long lVar2;
  undefined8 uVar3;
  code *pcVar4;
  undefined8 extraout_RDX;
  undefined8 uVar5;
  undefined8 extraout_RDX_00;
  undefined unaff_BL;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar6;
  
  iVar1 = event_initialized(format_job_event);
  uVar5 = extraout_RDX;
  uVar6 = extraout_XMM0_Da;
  if (iVar1 == 0) {
    param_13 = 0;
    pcVar4 = format_job_timer;
    uVar5 = event_set(format_job_event,0xffffffff,0);
    uVar6 = format_job_timer(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
    param_12 = pcVar4;
    uVar5 = extraout_RDX_00;
  }
  lVar2 = xcalloc(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x28,uVar5,
                  param_12,param_13,param_14);
  *(undefined8 *)(lVar2 + 0x20) = 0;
  *(undefined4 *)(lVar2 + 0x18) = param_10;
  uVar6 = format_add_cb(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        lVar2,"host",(char *)format_cb_host,param_12,param_13,param_14);
  uVar6 = format_add_cb(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                        "host_short",(char *)format_cb_host_short,param_12,param_13,param_14);
  uVar5 = format_add_cb(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,"pid",
                        (char *)format_cb_pid,param_12,param_13,param_14);
  uVar3 = socket_path;
  uVar6 = format_add(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                     "socket_path","%s",socket_path,param_13,param_14,unaff_BL);
  uVar5 = format_add_tv(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                        "start_time",(char **)start_time,uVar3,param_13,param_14);
  if ((param_9 != 0) && (*(undefined8 **)(param_9 + 0x30) != (undefined8 *)0x0)) {
    format_add(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,"command_name",
               "%s",*(undefined8 *)**(undefined8 **)(param_9 + 0x30),param_13,param_14,unaff_BL);
  }
  return lVar2;
}



char * format_find(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long *param_9,char **param_10,uint param_11,char *param_12,undefined8 param_13,
                  undefined8 param_14)

{
  uint uVar1;
  long lVar2;
  char **ppcVar3;
  char *extraout_RAX;
  char *pcVar4;
  char *extraout_RAX_00;
  char **ppcVar5;
  size_t sVar6;
  char *extraout_RAX_01;
  char *extraout_RAX_02;
  ulong uVar7;
  ulong extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  ulong extraout_RDX_03;
  ulong extraout_RDX_04;
  ulong extraout_RDX_05;
  char **ppcVar8;
  char *pcVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined4 extraout_XMM0_Db_09;
  undefined4 extraout_XMM0_Db_10;
  undefined8 uVar11;
  undefined auVar13 [16];
  undefined in_stack_ffffffffffffff88;
  
  ppcVar5 = (char **)&stack0xffffffffffffff88;
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_11 & 1) == 0) {
    ppcVar8 = param_10;
    ppcVar3 = options_find(global_options,(char *)param_10);
    uVar10 = extraout_XMM0_Da;
    uVar12 = extraout_XMM0_Db;
    if (((ppcVar3 == (char **)0x0) &&
        ((((*param_9 == 0 ||
           (ppcVar8 = param_10,
           ppcVar3 = options_find(*(char ***)(*param_9 + 0x188),(char *)param_10),
           uVar10 = extraout_XMM0_Da_05, uVar12 = extraout_XMM0_Db_05, ppcVar3 == (char **)0x0)) &&
          (ppcVar8 = param_10, ppcVar3 = options_find(global_w_options,(char *)param_10),
          uVar10 = extraout_XMM0_Da_06, uVar12 = extraout_XMM0_Db_06, ppcVar3 == (char **)0x0)) &&
         ((param_9[1] == 0 ||
          (ppcVar8 = param_10,
          ppcVar3 = options_find(*(char ***)(param_9[1] + 0x108),(char *)param_10),
          uVar10 = extraout_XMM0_Da_07, uVar12 = extraout_XMM0_Db_07, ppcVar3 == (char **)0x0))))))
       && (ppcVar8 = param_10, ppcVar3 = options_find(global_s_options,(char *)param_10),
          uVar10 = extraout_XMM0_Da_08, uVar12 = extraout_XMM0_Db_08, ppcVar3 == (char **)0x0)) {
LAB_0013c771:
      ppcVar8 = param_10;
      ppcVar3 = format_entry_tree_RB_FIND((char **)(param_9 + 4),(char **)&stack0xffffffffffffff88);
      uVar11 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
      in_stack_ffffffffffffff88 = SUB81(ppcVar8,0);
      if (ppcVar3 == (char **)0x0) {
        if (((param_9[1] != 0) &&
            (ppcVar8 = param_10,
            auVar13 = environ_find(*(char ***)(param_9[1] + 0x120),(char *)param_10),
            uVar10 = extraout_XMM0_Da_09, uVar12 = extraout_XMM0_Db_09, auVar13._0_8_ != 0)) ||
           (auVar13 = environ_find(global_environ,(char *)param_10), ppcVar8 = param_10,
           uVar10 = extraout_XMM0_Da_04, uVar12 = extraout_XMM0_Db_04, auVar13._0_8_ != 0)) {
          uVar11 = CONCAT44(uVar12,uVar10);
          uVar7 = auVar13._8_8_;
          pcVar9 = *(char **)(auVar13._0_8_ + 8);
          goto LAB_0013c993;
        }
LAB_0013c890:
        pcVar9 = (char *)0x0;
        goto LAB_0013c893;
      }
      param_12 = ppcVar3[2];
      uVar10 = extraout_XMM0_Da_00;
      if (param_12 != (char *)0x0) goto LAB_0013c944;
      pcVar9 = ppcVar3[1];
      uVar7 = extraout_RDX;
      ppcVar8 = ppcVar5;
      if (pcVar9 == (char *)0x0) {
        if ((code *)ppcVar3[3] != (code *)0x0) {
          ppcVar8 = ppcVar3;
          uVar11 = (*(code *)ppcVar3[3])(param_9);
          pcVar9 = ppcVar3[1];
          uVar7 = extraout_RDX_05;
          goto LAB_0013c993;
        }
        goto LAB_0013c890;
      }
    }
    else {
      uVar11 = CONCAT44(uVar12,uVar10);
      uVar1 = *(uint *)(ppcVar3 + 1);
      uVar7 = (ulong)uVar1;
      if (uVar1 == 1) {
        param_12 = ppcVar3[3];
LAB_0013c944:
        ppcVar8 = (char **)0x40;
        uVar11 = xsnprintf(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           &DAT_0019e9e0,0x40,&DAT_0017ad5a,param_12,param_13,param_14,
                           in_stack_ffffffffffffff88);
        pcVar9 = &DAT_0019e9e0;
        uVar7 = extraout_RDX_03;
      }
      else {
        if (uVar1 == 2) {
          pcVar9 = style_tostring(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  (byte *)(ppcVar3 + 4));
          uVar11 = CONCAT44(extraout_XMM0_Db_10,extraout_XMM0_Da_10);
          uVar7 = extraout_RDX_04;
        }
        else {
          if (uVar1 != 0) goto LAB_0013c771;
          pcVar9 = ppcVar3[2];
        }
LAB_0013c993:
        if (pcVar9 == (char *)0x0) goto LAB_0013c890;
      }
    }
    xstrdup(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,pcVar9,ppcVar8,uVar7,
            param_12,param_13,param_14);
    pcVar9 = extraout_RAX;
  }
  else {
    ppcVar5 = format_entry_tree_RB_FIND((char **)(param_9 + 4),(char **)&stack0xffffffffffffff88);
    if ((ppcVar5 == (char **)0x0) || (ppcVar5[2] == (char *)0x0)) goto LAB_0013c890;
    ctime_r((time_t *)(ppcVar5 + 2),&DAT_0019e9e0);
    ppcVar8 = (char **)0x1773b1;
    sVar6 = strcspn(&DAT_0019e9e0,"\n");
    (&DAT_0019e9e0)[sVar6] = 0;
    xstrdup(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
            param_6,param_7,param_8,&DAT_0019e9e0,ppcVar8,extraout_RDX_01,param_12,param_13,param_14
           );
    pcVar9 = extraout_RAX_01;
  }
  if ((param_11 & 2) != 0) {
    pcVar4 = __xpg_basename(pcVar9);
    xstrdup(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5,
            param_6,param_7,param_8,pcVar4,ppcVar8,extraout_RDX_02,param_12,param_13,param_14);
    free(pcVar9);
    pcVar9 = extraout_RAX_02;
  }
  if ((param_11 & 4) != 0) {
    pcVar4 = dirname(pcVar9);
    xstrdup(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
            param_6,param_7,param_8,pcVar4,ppcVar8,extraout_RDX_00,param_12,param_13,param_14);
    free(pcVar9);
    pcVar9 = extraout_RAX_00;
  }
LAB_0013c893:
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return pcVar9;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char * format_expand(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long *param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                    long *param_13,char **param_14)

{
  byte bVar1;
  char *pcVar2;
  size_t sVar3;
  undefined8 uVar4;
  char **__ptr;
  char *__s;
  int iVar5;
  uint uVar6;
  ulong uVar7;
  char cVar8;
  undefined8 extraout_RDX;
  size_t __n;
  undefined8 extraout_RDX_00;
  char *pcVar9;
  char *__src;
  long in_FS_OFFSET;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined uVar11;
  char *in_stack_ffffffffffffff88;
  char *local_58;
  char *local_50;
  long local_48;
  long local_40;
  
  uVar11 = SUB81(in_stack_ffffffffffffff88,0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 == (char *)0x0) {
    pcVar9 = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"",0,
                             param_11,param_12,param_13,param_14);
    goto LAB_0013cb31;
  }
  pcVar9 = param_10;
  uVar10 = tmate_format(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)param_9);
  local_48 = 0x40;
  pcVar2 = (char *)xmalloc(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x40,
                           pcVar9,extraout_RDX,param_12,param_13,param_14);
  cVar8 = *param_10;
  local_50 = (char *)0x0;
  uVar10 = extraout_XMM0_Da;
  local_58 = pcVar2;
  if (cVar8 != '\0') {
    pcVar2 = param_10;
LAB_0013ca51:
    uVar11 = SUB81(in_stack_ffffffffffffff88,0);
    if (cVar8 != '#') {
      uVar7 = local_48 - (long)local_50;
      while (uVar7 < 2) {
        pcVar9 = (char *)0x2;
        local_58 = (char *)xreallocarray(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,
                                         param_8,local_58,2,local_48,uVar7,param_13,param_14);
        local_48 = local_48 * 2;
        uVar10 = extraout_XMM0_Da_03;
        uVar7 = local_48 - (long)local_50;
      }
      __src = pcVar2 + 1;
      local_58[(long)local_50] = *pcVar2;
      local_50 = local_50 + 1;
      goto LAB_0013cbbe;
    }
    bVar1 = pcVar2[1];
    __src = pcVar2 + 2;
    if (bVar1 == 0x28) {
      cVar8 = pcVar2[2];
      if (cVar8 != '\0') {
        uVar7 = 1;
        pcVar2 = __src;
        do {
          if (cVar8 == '(') {
            uVar7 = (ulong)((int)uVar7 + 1);
          }
          else if ((cVar8 == ')') && (uVar6 = (int)uVar7 - 1, uVar7 = (ulong)uVar6, uVar6 == 0))
          goto LAB_0013cd98;
          cVar8 = pcVar2[1];
          pcVar2 = pcVar2 + 1;
          if (cVar8 == '\0') break;
        } while( true );
      }
      goto LAB_0013cb04;
    }
    if (bVar1 == 0x7b) {
      cVar8 = pcVar2[2];
      if (cVar8 != '\0') {
        iVar5 = 1;
        pcVar9 = __src;
        do {
          if (cVar8 == '{') {
            iVar5 = iVar5 + 1;
          }
          else if ((cVar8 == '}') && (iVar5 = iVar5 + -1, iVar5 == 0)) goto LAB_0013cae0;
          cVar8 = pcVar9[1];
          pcVar9 = pcVar9 + 1;
          if (cVar8 == '\0') break;
        } while( true );
      }
      goto LAB_0013cb04;
    }
    if (bVar1 == 0x23) {
      uVar7 = local_48 - (long)local_50;
      while (uVar7 < 2) {
        pcVar9 = (char *)0x2;
        local_58 = (char *)xreallocarray(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,
                                         param_8,local_58,2,local_48,uVar7,param_13,param_14);
        local_48 = local_48 * 2;
        uVar10 = extraout_XMM0_Da_04;
        uVar7 = local_48 - (long)local_50;
      }
      local_58[(long)local_50] = '#';
      local_50 = local_50 + 1;
      goto LAB_0013cbbe;
    }
    if (bVar1 - 0x41 < 0x1a) {
      pcVar9 = *(char **)(format_upper + (long)(int)(bVar1 - 0x41) * 8);
LAB_0013caa6:
      if (pcVar9 != (char *)0x0) {
        sVar3 = strlen(pcVar9);
        param_13 = &local_48;
        param_14 = &local_50;
        uVar4 = format_replace(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,param_9,pcVar9,sVar3,(long *)&local_58,&local_48,&local_50);
        uVar10 = extraout_XMM0_Da_01;
        if ((int)uVar4 == 0) goto LAB_0013cbbe;
        goto LAB_0013cb04;
      }
    }
    else if (bVar1 - 0x61 < 0x1a) {
      pcVar9 = *(char **)(format_lower + (long)(int)(bVar1 - 0x61) * 8);
      goto LAB_0013caa6;
    }
    pcVar9 = (char *)(local_48 - (long)local_50);
    while (pcVar9 < (char *)0x3) {
      in_stack_ffffffffffffff88 = (char *)(ulong)bVar1;
      local_58 = (char *)xreallocarray(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,local_58,2,local_48,(ulong)bVar1,param_13,param_14);
      local_48 = local_48 * 2;
      uVar10 = extraout_XMM0_Da_05;
      pcVar9 = (char *)(local_48 - (long)local_50);
    }
    local_58[(long)local_50] = '#';
    local_58[(long)(local_50 + 1)] = bVar1;
    local_50 = local_50 + 2;
    goto LAB_0013cbbe;
  }
  goto LAB_0013cb0e;
LAB_0013cd98:
  __n = (long)pcVar2 - (long)__src;
  pcVar9 = (char *)xmalloc(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__n + 1,
                           pcVar9,__n,uVar7,param_13,param_14);
  memcpy(pcVar9,__src,__n);
  pcVar9[__n] = '\0';
  __ptr = (char **)format_expand(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_06),param_2,param_3,
                                 param_4,param_5,param_6,param_7,param_8,param_9,pcVar9,__n,uVar7,
                                 param_13,param_14);
  format_job_get(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_07),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,(long)param_9,(char *)__ptr,extraout_RDX_00,uVar7,param_13,
                 param_14);
  sVar3 = strlen(__s);
  free(__ptr);
  free(pcVar9);
  uVar7 = local_48 - (long)local_50;
  param_14 = __ptr;
  uVar10 = extraout_XMM0_Da_08;
  while (uVar7 < sVar3 + 1) {
    local_58 = (char *)xreallocarray(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     local_58,2,local_48,uVar7,param_13,param_14);
    local_48 = local_48 * 2;
    uVar10 = extraout_XMM0_Da_09;
    uVar7 = local_48 - (long)local_50;
  }
  pcVar9 = __s;
  memcpy(local_58 + (long)local_50,__s,sVar3);
  local_50 = local_50 + sVar3;
  free(__s);
  __src = __src + __n + 1;
  uVar10 = extraout_XMM0_Da_10;
  in_stack_ffffffffffffff88 = __s;
  goto LAB_0013cbbe;
LAB_0013cae0:
  sVar3 = (long)pcVar9 - (long)__src;
  param_13 = &local_48;
  param_14 = &local_50;
  uVar4 = format_replace(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         __src,sVar3,(long *)&local_58,&local_48,&local_50);
  uVar10 = extraout_XMM0_Da_02;
  if ((int)uVar4 != 0) goto LAB_0013cb04;
  pcVar9 = __src;
  __src = pcVar2 + sVar3 + 3;
LAB_0013cbbe:
  uVar11 = SUB81(in_stack_ffffffffffffff88,0);
  cVar8 = *__src;
  pcVar2 = __src;
  if (cVar8 == '\0') goto LAB_0013cb04;
  goto LAB_0013ca51;
LAB_0013cb04:
  pcVar2 = local_50 + (long)local_58;
LAB_0013cb0e:
  *pcVar2 = '\0';
  log_emit(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "format \'%s\' -> \'%s\'",param_10,local_58,param_13,param_14,uVar11);
  pcVar9 = local_58;
LAB_0013cb31:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return pcVar9;
}



void format_job_get(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,char *param_10,undefined8 param_11,code *param_12,long *param_13,
                   char **param_14)

{
  long lVar1;
  uint uVar2;
  char **ppcVar3;
  char *pcVar4;
  undefined4 *puVar5;
  char *extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar6;
  undefined8 extraout_RDX_02;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined8 uVar7;
  undefined auVar8 [16];
  undefined uVar9;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar4 = param_10;
  ppcVar3 = format_job_tree_RB_FIND((char **)&format_jobs,(char **)&stack0xffffffffffffff98);
  uVar9 = SUB81(pcVar4,0);
  if (ppcVar3 == (char **)0x0) {
    uVar7 = 0x48;
    auVar8 = xcalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x48
                     ,extraout_RDX,param_12,param_13,param_14);
    ppcVar3 = auVar8._0_8_;
    uVar7 = xstrdup(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,param_10,uVar7,auVar8._8_8_,param_12,param_13,
                    param_14);
    *ppcVar3 = extraout_RAX;
    xasprintf(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)(ppcVar3 + 2),
              "<\'%s\' not ready>",extraout_RAX,param_12,param_13,param_14,uVar9);
    format_job_tree_RB_INSERT((char **)&format_jobs,ppcVar3);
  }
  pcVar4 = (char *)time((time_t *)0x0);
  uVar2 = *(uint *)(param_9 + 0x18);
  uVar6 = extraout_RDX_00;
  uVar7 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00);
  if ((ppcVar3[3] == (char *)0x0) &&
     (((uVar2 & 2) != 0 ||
      (uVar7 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00), ppcVar3[1] != pcVar4)))) {
    param_13 = (long *)0x0;
    param_12 = format_job_callback;
    param_14 = ppcVar3;
    puVar5 = job_run(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                     param_6,param_7,param_8,*ppcVar3,(uint *)0x0,(char *)0x0,format_job_callback,0,
                     ppcVar3);
    uVar7 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01);
    ppcVar3[3] = (char *)puVar5;
    uVar6 = extraout_RDX_01;
    if (puVar5 == (undefined4 *)0x0) {
      free(ppcVar3[2]);
      uVar7 = xasprintf(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8,(long *)(ppcVar3 + 2),
                        "<\'%s\' didn\'t start>",*ppcVar3,param_12,param_13,param_14,uVar9);
      uVar6 = extraout_RDX_02;
    }
    ppcVar3[1] = pcVar4;
    uVar2 = *(uint *)(param_9 + 0x18);
  }
  if ((uVar2 & 1) != 0) {
    *(undefined4 *)(ppcVar3 + 4) = 1;
  }
  format_expand(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)param_9,
                ppcVar3[2],uVar6,param_12,param_13,param_14);
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
format_replace(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              long *param_9,void *param_10,size_t param_11,long *param_12,long *param_13,
              char **param_14)

{
  char cVar1;
  int iVar2;
  char **__dest;
  size_t sVar3;
  long lVar4;
  char *pcVar5;
  char **__ptr;
  undefined8 uVar6;
  size_t __n;
  size_t __n_00;
  byte *pbVar7;
  byte *pbVar8;
  int *piVar9;
  byte *extraout_RAX;
  ulong uVar10;
  undefined8 extraout_RDX;
  long *plVar11;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  char **ppcVar12;
  long *plVar13;
  byte *__s1;
  long lVar14;
  byte bVar15;
  char *pcVar16;
  uint uVar17;
  long in_FS_OFFSET;
  bool bVar18;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 uVar19;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar20;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  byte *local_88;
  char *local_70;
  ulong local_68;
  char *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  plVar11 = param_12;
  plVar13 = param_13;
  __ptr = param_14;
  __dest = (char **)xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            param_11 + 1,param_10,param_11,param_12,param_13,param_14);
  memcpy(__dest,param_10,param_11);
  *(undefined *)((long)__dest + param_11) = 0;
  cVar1 = *(char *)__dest;
  ppcVar12 = __dest;
  uVar19 = extraout_XMM0_Da;
  uVar20 = extraout_XMM0_Db;
  if (cVar1 == 'd') {
    local_70 = (char *)0x0;
    if (*(char *)((long)__dest + 1) != ':') goto LAB_0013d072;
    ppcVar12 = (char **)((long)__dest + 2);
    uVar17 = 4;
    cVar1 = *(char *)((long)__dest + 2);
    pcVar16 = (char *)0x0;
    local_68 = 0;
LAB_0013d178:
    if (cVar1 == '?') {
      pcVar5 = strchr((char *)ppcVar12,0x2c);
      if (pcVar5 != (char *)0x0) {
        *pcVar5 = '\0';
        plVar13 = (long *)(pcVar5 + 1);
        __ptr = (char **)format_find(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,
                                     param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                                     (char **)((long)ppcVar12 + 1),uVar17,(char *)plVar11,plVar13,
                                     ppcVar12);
        cVar1 = pcVar5[1];
        if (cVar1 != '\0') {
          uVar10 = 0;
          plVar11 = plVar13;
          do {
            while (iVar2 = (int)uVar10, cVar1 != '{') {
              if (cVar1 == '}') {
                uVar10 = (ulong)(iVar2 - 1);
              }
              else if ((iVar2 == 0) && (cVar1 == ',')) {
                if (((__ptr == (char **)0x0) || (*(char *)__ptr == '\0')) ||
                   ((*(char *)__ptr == '0' && (*(char *)((long)__ptr + 1) == '\0')))) {
                  plVar13 = (long *)((long)plVar11 + 1);
                }
                else {
                  *(char *)plVar11 = '\0';
                }
                local_88 = (byte *)format_expand(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_04),
                                                 param_2,param_3,param_4,param_5,param_6,param_7,
                                                 param_8,param_9,(char *)plVar13,plVar11,uVar10,
                                                 plVar13,__ptr);
                free(__ptr);
                uVar10 = (ulong)(uVar17 & 8);
                uVar6 = extraout_RDX_00;
                uVar19 = extraout_XMM0_Da_05;
                goto LAB_0013d28e;
              }
              cVar1 = *(char *)((long)plVar11 + 1);
              plVar11 = (long *)((long)plVar11 + 1);
              if (cVar1 == '\0') goto LAB_0013d206;
            }
            cVar1 = *(char *)((long)plVar11 + 1);
            plVar11 = (long *)((long)plVar11 + 1);
            uVar10 = (ulong)(iVar2 + 1);
          } while (cVar1 != '\0');
        }
      }
LAB_0013d206:
      free(__dest);
      uVar6 = 0xffffffff;
      goto LAB_0013d108;
    }
LAB_0013d606:
    __ptr = ppcVar12;
    local_88 = (byte *)format_find(CONCAT44(uVar20,uVar19),param_2,param_3,param_4,param_5,param_6,
                                   param_7,param_8,param_9,ppcVar12,uVar17,
                                   (char *)(ulong)(uVar17 & 8),plVar13,ppcVar12);
    uVar10 = (ulong)uVar17 & 8;
    uVar6 = extraout_RDX_05;
    uVar19 = extraout_XMM0_Da_10;
    uVar20 = extraout_XMM0_Db_04;
    if (local_88 == (byte *)0x0) {
LAB_0013d58b:
      uVar19 = xstrdup(CONCAT44(uVar20,uVar19),param_2,param_3,param_4,param_5,param_6,param_7,
                       param_8,"",ppcVar12,uVar6,uVar10,plVar13,__ptr);
      uVar6 = extraout_RDX_04;
      local_88 = extraout_RAX;
    }
LAB_0013d28e:
    if ((int)uVar10 != 0) {
      __n = strlen(local_70);
      __n_00 = strlen(pcVar16);
      sVar3 = strlen((char *)local_88);
      sVar3 = sVar3 + 1;
      pbVar7 = (byte *)xmalloc(extraout_XMM0_Da_06,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,sVar3,sVar3,extraout_RDX_01,uVar10,plVar13,__ptr);
      bVar15 = *local_88;
      plVar13 = (long *)(ulong)bVar15;
      pbVar8 = pbVar7;
      __s1 = local_88;
      while (bVar15 != 0) {
        while (iVar2 = strncmp((char *)__s1,local_70,__n), iVar2 != 0) {
          __s1 = __s1 + 1;
          *pbVar7 = bVar15;
          pbVar7 = pbVar7 + 1;
          bVar15 = *__s1;
          if (bVar15 == 0) goto LAB_0013d38b;
        }
        sVar3 = sVar3 + __n_00;
        lVar14 = (long)pbVar7 - (long)pbVar8;
        __s1 = __s1 + __n;
        pbVar8 = (byte *)xrealloc(extraout_XMM0_Da_07,param_2,param_3,param_4,param_5,param_6,
                                  param_7,param_8,pbVar8,sVar3,extraout_RDX_02,uVar10,plVar13,__ptr)
        ;
        pbVar7 = pbVar8 + lVar14 + __n_00;
        memcpy(pbVar8 + lVar14,pcVar16,__n_00);
        bVar15 = *__s1;
      }
LAB_0013d38b:
      *pbVar7 = 0;
      free(local_88);
      uVar6 = extraout_RDX_03;
      uVar19 = extraout_XMM0_Da_08;
      local_88 = pbVar8;
    }
    if ((long)local_68 < 1) {
      if (local_68 != 0) {
        pbVar7 = (byte *)utf8_rtrimcstr(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,
                                        param_8,local_88,(ulong)(uint)-(int)local_68,uVar6,uVar10,
                                        plVar13,__ptr);
        free(local_88);
        local_88 = pbVar7;
      }
    }
    else {
      pbVar7 = (byte *)utf8_trimcstr(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     local_88,local_68 & 0xffffffff,uVar6,uVar10,plVar13,__ptr);
      free(local_88);
      local_88 = pbVar7;
    }
  }
  else {
    if (cVar1 < 'e') {
      if (cVar1 == '=') {
        piVar9 = __errno_location();
        *piVar9 = 0;
        local_68 = strtol((char *)((long)__dest + 1),&local_48,10);
        uVar19 = extraout_XMM0_Da_09;
        uVar20 = extraout_XMM0_Db_03;
        if (((*piVar9 == 0x22) && (0xfffffffffffffffd < local_68 + 0x7fffffffffffffff)) ||
           (*local_48 != ':')) {
          uVar17 = 0;
          pcVar16 = (char *)0x0;
          local_70 = (char *)0x0;
          cVar1 = *(char *)__dest;
        }
        else {
          ppcVar12 = (char **)(local_48 + 1);
          uVar17 = 0;
          cVar1 = local_48[1];
          pcVar16 = (char *)0x0;
          local_70 = (char *)0x0;
        }
      }
      else if (cVar1 == 'b') {
        local_70 = (char *)0x0;
        if (*(char *)((long)__dest + 1) != ':') goto LAB_0013d072;
        local_68 = 0;
        cVar1 = *(char *)((long)__dest + 2);
        pcVar16 = (char *)0x0;
        uVar17 = 2;
        ppcVar12 = (char **)((long)__dest + 2);
      }
      else {
        local_68 = 0;
        uVar17 = 0;
        pcVar16 = (char *)0x0;
        local_70 = (char *)0x0;
      }
      goto LAB_0013d178;
    }
    if (cVar1 != 's') {
      if (cVar1 == 't') {
        local_70 = (char *)0x0;
        if (*(char *)((long)__dest + 1) == ':') {
          uVar17 = 1;
          cVar1 = *(char *)((long)__dest + 2);
          pcVar16 = (char *)0x0;
          local_68 = 0;
          ppcVar12 = (char **)((long)__dest + 2);
          goto LAB_0013d178;
        }
        goto LAB_0013d072;
      }
      local_68 = 0;
      uVar17 = 0;
      pcVar16 = (char *)0x0;
      local_70 = (char *)0x0;
      goto LAB_0013d606;
    }
    local_70 = (char *)0x0;
    if (*(char *)((long)__dest + 1) == '/') {
      local_70 = (char *)((long)__dest + 2);
      if ((*(char *)((long)__dest + 2) != '/') &&
         (pcVar5 = local_70, *(char *)((long)__dest + 2) != '\0')) {
        do {
          pcVar16 = pcVar5;
          pcVar5 = pcVar16 + 1;
          bVar18 = pcVar16[1] != '/';
          plVar11 = (long *)CONCAT71((int7)((ulong)plVar11 >> 8),bVar18);
          if (pcVar16[1] == '\0') break;
        } while (bVar18);
        if ((local_70 != pcVar5) && (!bVar18)) {
          cVar1 = pcVar16[2];
          pcVar16 = pcVar16 + 2;
          *pcVar5 = '\0';
          pcVar5 = pcVar16;
          if ((cVar1 == '/') || (cVar1 == '\0')) {
LAB_0013d55d:
            if (cVar1 == '/') goto LAB_0013d633;
          }
          else {
            do {
              cVar1 = pcVar5[1];
              pcVar5 = pcVar5 + 1;
              if (cVar1 == '\0') goto LAB_0013d55d;
            } while (cVar1 != '/');
LAB_0013d633:
            if (pcVar5[1] == ':') {
              *pcVar5 = '\0';
              uVar17 = 8;
              cVar1 = pcVar5[2];
              local_68 = 0;
              ppcVar12 = (char **)(pcVar5 + 2);
              goto LAB_0013d178;
            }
          }
          uVar17 = 0;
          local_68 = 0;
          cVar1 = *(char *)__dest;
          goto LAB_0013d178;
        }
      }
    }
LAB_0013d072:
    local_88 = (byte *)format_find(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                   param_4,param_5,param_6,param_7,param_8,param_9,__dest,0,
                                   (char *)plVar11,plVar13,__ptr);
    if (local_88 == (byte *)0x0) {
      local_68 = 0;
      uVar10 = 0;
      pcVar16 = (char *)0x0;
      uVar6 = extraout_RDX;
      uVar19 = extraout_XMM0_Da_00;
      uVar20 = extraout_XMM0_Db_00;
      goto LAB_0013d58b;
    }
  }
  sVar3 = strlen((char *)local_88);
  lVar14 = *param_13;
  lVar4 = *param_12;
  pcVar16 = *param_14;
  uVar10 = lVar14 - (long)pcVar16;
  uVar19 = extraout_XMM0_Da_01;
  while (uVar10 < sVar3 + 1) {
    lVar4 = xreallocarray(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar4,2,
                          lVar14,uVar10,plVar13,__ptr);
    *param_12 = lVar4;
    lVar14 = *param_13 * 2;
    *param_13 = lVar14;
    pcVar16 = *param_14;
    uVar19 = extraout_XMM0_Da_02;
    uVar10 = lVar14 - (long)pcVar16;
  }
  memcpy(pcVar16 + lVar4,local_88,sVar3);
  *param_14 = *param_14 + sVar3;
  free(local_88);
  free(__dest);
  uVar6 = 0;
LAB_0013d108:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



char * format_expand_time(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,long *param_9,char *param_10,time_t param_11,
                         tm *param_12,long *param_13,char **param_14)

{
  char *pcVar1;
  tm *__tp;
  size_t sVar2;
  size_t sVar3;
  char *pcVar4;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  time_t local_30;
  
  local_30 = param_11;
  if ((param_10 != (char *)0x0) && (*param_10 != '\0')) {
    pcVar1 = (char *)0x0;
    __tp = localtime(&local_30);
    sVar2 = strlen(param_10);
    uVar5 = extraout_XMM0_Da;
    do {
      pcVar1 = (char *)xreallocarray(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     pcVar1,2,sVar2,param_12,param_13,param_14);
      param_12 = __tp;
      sVar3 = strftime(pcVar1,sVar2 * 2,param_10,__tp);
      sVar2 = sVar2 * 2;
      uVar5 = extraout_XMM0_Da_00;
    } while (sVar3 == 0);
    pcVar4 = format_expand(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_9,pcVar1,extraout_RDX,param_12,
                           param_13,param_14);
    free(pcVar1);
    return pcVar4;
  }
  pcVar1 = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"",
                           param_10,param_11,param_12,param_13,param_14);
  return pcVar1;
}



void format_defaults_session
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint *param_10,undefined8 param_11,undefined8 param_12,ulong param_13,
               undefined8 param_14)

{
  undefined8 uVar1;
  ulong uVar2;
  long *plVar3;
  undefined8 extraout_RDX;
  undefined1 unaff_BL;
  char *pcVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  
  uVar1 = *(undefined8 *)(param_10 + 2);
  *(uint **)(param_9 + 8) = param_10;
  format_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,"session_name",
             "%s",uVar1,param_13,param_14,unaff_BL);
  uVar2 = winlink_count((long *)(param_10 + 0x3e));
  uVar1 = format_add(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                     param_6,param_7,param_8,param_9,"session_windows","%u",uVar2 & 0xffffffff,
                     param_13,param_14,unaff_BL);
  uVar1 = format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "session_width","%u",(ulong)param_10[0x36],param_13,param_14,unaff_BL);
  uVar1 = format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "session_height","%u",(ulong)param_10[0x37],param_13,param_14,unaff_BL);
  format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,"session_id",
             "$%u",(ulong)*param_10,param_13,param_14,unaff_BL);
  plVar3 = session_group_find((long)param_10);
  pcVar4 = "session_grouped";
  uVar2 = (ulong)(plVar3 != (long *)0x0);
  uVar5 = format_add(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_9,"session_grouped","%d",uVar2,param_13,
                     param_14,unaff_BL);
  if (plVar3 != (long *)0x0) {
    uVar2 = session_group_index(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                (long)plVar3,pcVar4,extraout_RDX,uVar2,param_13,param_14);
    uVar2 = uVar2 & 0xffffffff;
    uVar5 = format_add(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_9,"session_group","%u",uVar2,param_13,
                       param_14,unaff_BL);
  }
  uVar5 = format_add_tv(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        "session_created",(char **)(param_10 + 6),uVar2,param_13,param_14);
  uVar5 = format_add_tv(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        "session_last_attached",(char **)(param_10 + 10),uVar2,param_13,param_14);
  uVar1 = format_add_tv(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        "session_activity",(char **)(param_10 + 0xe),uVar2,param_13,param_14);
  uVar1 = format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "session_attached","%u",(ulong)param_10[0x45],param_13,param_14,unaff_BL);
  uVar2 = (ulong)(1 < param_10[0x45]);
  uVar5 = format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "session_many_attached","%d",uVar2,param_13,param_14,unaff_BL);
  format_add_cb(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                "session_alerts",(char *)format_cb_session_alerts,uVar2,param_13,param_14);
  return;
}



void format_defaults_client
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int iVar2;
  ulong uVar3;
  undefined8 extraout_RDX;
  char *pcVar4;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined8 uVar6;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined1 in_stack_00000008;
  undefined in_stack_ffffffffffffffe8;
  
  if (*(long *)(param_9 + 8) == 0) {
    *(undefined8 *)(param_9 + 8) = *(undefined8 *)(param_10 + 0x598);
  }
  uVar6 = format_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "client_pid","%ld",(long)*(int *)(param_10 + 8),param_13,param_14,
                     in_stack_ffffffffffffffe8);
  uVar6 = format_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "client_height","%u",(ulong)*(uint *)(param_10 + 0xf4),param_13,param_14,
                     in_stack_ffffffffffffffe8);
  uVar6 = format_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "client_width","%u",(ulong)*(uint *)(param_10 + 0xf0),param_13,param_14,
                     in_stack_ffffffffffffffe8);
  if (*(long *)(param_10 + 0xe8) != 0) {
    uVar6 = format_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       "client_tty","%s",*(long *)(param_10 + 0xe8),param_13,param_14,
                       in_stack_ffffffffffffffe8);
  }
  if (*(long *)(param_10 + 0x120) != 0) {
    uVar6 = format_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       "client_termname","%s",*(long *)(param_10 + 0x120),param_13,param_14,
                       in_stack_ffffffffffffffe8);
  }
  uVar3 = (ulong)(*(uint *)(param_10 + 0x420) >> 0xd & 1);
  uVar5 = format_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "client_control_mode","%d",uVar3,param_13,param_14,in_stack_ffffffffffffffe8);
  uVar5 = format_add_tv(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        "client_created",(char **)(param_10 + 0x98),uVar3,param_13,param_14);
  pcVar4 = "client_activity";
  uVar6 = format_add_tv(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        "client_activity",(char **)(param_10 + 0xa8),uVar3,param_13,param_14);
  pcVar4 = server_client_get_key_table
                     (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,pcVar4,
                      extraout_RDX,uVar3,param_13,param_14);
  iVar2 = strcmp(**(char ***)(param_10 + 0x428),pcVar4);
  if (iVar2 == 0) {
    uVar6 = format_add(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,param_9,"client_prefix","%d",0,param_13,param_14,
                       in_stack_ffffffffffffffe8);
  }
  else {
    uVar6 = format_add(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,param_9,"client_prefix","%d",1,param_13,param_14,
                       in_stack_ffffffffffffffe8);
  }
  uVar6 = format_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "client_key_table","%s",**(undefined8 **)(param_10 + 0x428),param_13,param_14,
                     in_stack_ffffffffffffffe8);
  uVar6 = format_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "client_utf8","%d",(ulong)((*(byte *)(param_10 + 400) & 8) != 0),param_13,
                     param_14,in_stack_ffffffffffffffe8);
  uVar6 = format_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     "client_readonly","%d",(ulong)((*(byte *)(param_10 + 0x421) & 8) != 0),param_13
                     ,param_14,in_stack_ffffffffffffffe8);
  if (*(long *)(param_10 + 0x598) != 0) {
    format_add(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               "client_session","%s",*(undefined8 *)(*(long *)(param_10 + 0x598) + 8),param_13,
               param_14,in_stack_ffffffffffffffe8);
  }
  lVar1 = *(long *)(param_10 + 0x5a0);
  if ((lVar1 != 0) && (uVar6 = session_alive(lVar1), (int)uVar6 != 0)) {
    format_add(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_9,"client_last_session","%s",*(undefined8 *)(lVar1 + 8)
               ,param_13,param_14,in_stack_00000008);
    return;
  }
  return;
}



void format_defaults_window
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint **param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  uint uVar2;
  ulong uVar3;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined1 in_stack_00000008;
  undefined in_stack_ffffffffffffffe8;
  
  *param_9 = param_10;
  uVar1 = format_add_tv(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)param_9,"window_activity",(char **)(param_10 + 0x48),param_12,param_13
                        ,param_14);
  uVar1 = format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_id","@%u",(ulong)*param_10,param_13,param_14,in_stack_ffffffffffffffe8)
  ;
  uVar1 = format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_name","%s",*(undefined8 *)(param_10 + 2),param_13,param_14,
                     in_stack_ffffffffffffffe8);
  uVar1 = format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_width","%u",(ulong)param_10[0x5e],param_13,param_14,
                     in_stack_ffffffffffffffe8);
  uVar3 = (ulong)param_10[0x5f];
  uVar4 = format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_height","%u",uVar3,param_13,param_14,in_stack_ffffffffffffffe8);
  uVar4 = format_add_cb(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                        "window_layout",(char *)format_cb_window_layout,uVar3,param_13,param_14);
  format_add_cb(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                "window_visible_layout",(char *)format_cb_window_visible_layout,uVar3,param_13,
                param_14);
  uVar2 = window_count_panes((long)param_10);
  uVar1 = format_add(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                     param_6,param_7,param_8,(long)param_9,"window_panes","%u",(ulong)uVar2,param_13
                     ,param_14,in_stack_ffffffffffffffe8);
  format_add(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
             "window_zoomed_flag","%d",(ulong)(param_10[0x60] >> 0xc & 1),param_13,param_14,
             in_stack_00000008);
  return;
}



void format_defaults_winlink
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint **param_9,long param_10,uint *param_11,undefined8 param_12,undefined8 param_13,
               undefined8 param_14)

{
  uint *puVar1;
  undefined8 uVar2;
  bool bVar3;
  undefined7 extraout_var;
  undefined unaff_BL;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined auVar4 [16];
  
  puVar1 = *(uint **)(param_11 + 2);
  if (*param_9 == (uint *)0x0) {
    *param_9 = puVar1;
  }
  auVar4 = window_printable_flags
                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                      (long)param_11,param_11,param_12,param_13,param_14);
  uVar2 = format_defaults_window
                    (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9,puVar1,auVar4._8_8_,param_12,param_13,param_14);
  uVar2 = format_add(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_index","%d",(ulong)*param_11,param_13,param_14,unaff_BL);
  uVar2 = format_add(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_flags","%s",auVar4._0_8_,param_13,param_14,unaff_BL);
  uVar2 = format_add(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_active","%d",(ulong)(*(uint **)(param_10 + 0xe0) == param_11),param_13,
                     param_14,unaff_BL);
  uVar2 = format_add(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_bell_flag","%d",(ulong)(param_11[0xe] & 1),param_13,param_14,unaff_BL);
  uVar2 = format_add(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_activity_flag","%d",(ulong)(param_11[0xe] >> 1 & 1),param_13,param_14,
                     unaff_BL);
  uVar2 = format_add(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "window_silence_flag","%d",(ulong)(param_11[0xe] >> 2 & 1),param_13,param_14,
                     unaff_BL);
  format_add(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
             "window_last_flag","%d",(ulong)(*(uint **)(param_10 + 0xe8) == param_11),param_13,
             param_14,unaff_BL);
  bVar3 = session_is_linked(param_10,*(long *)(param_11 + 2));
  format_add(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,param_6,
             param_7,param_8,(long)param_9,"window_linked","%d",
             CONCAT71(extraout_var,bVar3) & 0xffffffff,param_13,param_14,unaff_BL);
  free(auVar4._0_8_);
  return;
}



void format_defaults_pane
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  bool bVar1;
  uint uVar2;
  undefined8 uVar3;
  undefined7 extraout_var;
  char *pcVar4;
  ulong uVar5;
  long lVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  uint *puVar7;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined in_stack_ffffffffffffffd8;
  uint local_24;
  long local_20;
  
  lVar6 = *(long *)(param_10 + 0x54);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*param_9 == 0) {
    *param_9 = *(long *)(param_10 + 2);
  }
  param_9[2] = (long)param_10;
  uVar3 = format_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "history_size","%u",(ulong)*(uint *)(lVar6 + 0xc),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar5 = (ulong)*(uint *)(lVar6 + 0x10);
  uVar8 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "history_limit","%u",uVar5,param_13,param_14,in_stack_ffffffffffffffd8);
  uVar3 = format_add_cb(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                        "history_bytes",(char *)format_cb_history_bytes,uVar5,param_13,param_14);
  puVar7 = &local_24;
  uVar3 = window_pane_index(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_10,(int *)puVar7,extraout_RDX,uVar5,param_13,param_14);
  if ((int)uVar3 != 0) {
                    // WARNING: Subroutine does not return
    fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "index not found",puVar7,extraout_RDX_00,uVar5,param_13,param_14,
           in_stack_ffffffffffffffd8);
  }
  uVar3 = format_add(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                     param_6,param_7,param_8,(long)param_9,"pane_index","%u",(ulong)local_24,
                     param_13,param_14,in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "pane_width","%u",(ulong)param_10[8],param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "pane_height","%u",(ulong)param_10[9],param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "pane_title","%s",*(undefined8 *)(param_10 + 0x52),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "pane_id","%%%u",(ulong)*param_10,param_13,param_14,in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "pane_active","%d",
                     (ulong)(*(uint **)(*(long *)(param_10 + 2) + 0x138) == param_10),param_13,
                     param_14,in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "pane_input_off","%d",(ulong)(param_10[0xc] >> 5 & 1),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar2 = param_10[0x1e];
  if ((uVar2 == 0xffffffff) && ((param_10[0x1d] & 0x7f) == 0)) {
    uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                       "pane_dead_status","%d",(ulong)(param_10[0x1d] >> 8 & 0xff),param_13,param_14
                       ,in_stack_ffffffffffffffd8);
    uVar2 = param_10[0x1e];
  }
  format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,"pane_dead"
             ,"%d",(ulong)(uVar2 == 0xffffffff),param_13,param_14,in_stack_ffffffffffffffd8);
  bVar1 = window_pane_visible((long)param_10);
  uVar3 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
  if ((int)CONCAT71(extraout_var,bVar1) != 0) {
    uVar3 = format_add(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,(long)param_9,"pane_left","%u",
                       (ulong)param_10[10],param_13,param_14,in_stack_ffffffffffffffd8);
    uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                       "pane_top","%u",(ulong)param_10[0xb],param_13,param_14,
                       in_stack_ffffffffffffffd8);
    uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                       "pane_right","%u",(ulong)((param_10[8] + param_10[10]) - 1),param_13,param_14
                       ,in_stack_ffffffffffffffd8);
    uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                       "pane_bottom","%u",(ulong)((param_10[9] + param_10[0xb]) - 1),param_13,
                       param_14,in_stack_ffffffffffffffd8);
  }
  uVar5 = (ulong)(*(uint **)(param_10 + 0x50) != param_10 + 0x52);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "pane_in_mode","%d",uVar5,param_13,param_14,in_stack_ffffffffffffffd8);
  pcVar4 = options_get_number(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(*(long *)(param_10 + 2) + 0x188),"synchronize-panes",
                              extraout_RDX_01,uVar5,param_13,param_14);
  uVar3 = format_add(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,(long)param_9,"pane_synchronized","%d",
                     (ulong)(pcVar4 != (char *)0x0),param_13,param_14,in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "pane_tty","%s",param_10 + 0x15,param_13,param_14,in_stack_ffffffffffffffd8);
  lVar6 = (long)(int)param_10[0x14];
  uVar8 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "pane_pid","%ld",lVar6,param_13,param_14,in_stack_ffffffffffffffd8);
  uVar8 = format_add_cb(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                        "pane_start_command",(char *)format_cb_start_command,lVar6,param_13,param_14
                       );
  uVar8 = format_add_cb(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                        "pane_current_command",(char *)format_cb_current_command,lVar6,param_13,
                        param_14);
  uVar3 = format_add_cb(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                        "pane_current_path",(char *)format_cb_current_path,lVar6,param_13,param_14);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "cursor_x","%u",(ulong)param_10[0x56],param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "cursor_y","%u",(ulong)param_10[0x57],param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "scroll_region_upper","%u",(ulong)param_10[0x5c],param_13,param_14,
                     in_stack_ffffffffffffffd8);
  format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
             "scroll_region_lower","%u",(ulong)param_10[0x5d],param_13,param_14,
             in_stack_ffffffffffffffd8);
  uVar2 = window_copy_scroll_position((long)param_10);
  uVar3 = CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02);
  if (uVar2 != 0xffffffff) {
    uVar3 = format_add(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,(long)param_9,"scroll_position","%d",
                       (ulong)uVar2,param_13,param_14,in_stack_ffffffffffffffd8);
  }
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "alternate_on","%d",(ulong)(*(long *)(param_10 + 0x72) != 0),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "alternate_saved_x","%u",(ulong)param_10[0x70],param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "alternate_saved_y","%u",(ulong)param_10[0x71],param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "cursor_flag","%d",(ulong)(param_10[0x5e] & 1),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "insert_flag","%d",(ulong)(param_10[0x5e] >> 1 & 1),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "keypad_cursor_flag","%d",(ulong)(param_10[0x5e] >> 2 & 1),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "keypad_flag","%d",(ulong)(param_10[0x5e] >> 3 & 1),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "wrap_flag","%d",(ulong)(param_10[0x5e] >> 4 & 1),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "mouse_any_flag","%d",(ulong)((*(byte *)(param_10 + 0x5e) & 0x60) != 0),
                     param_13,param_14,in_stack_ffffffffffffffd8);
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "mouse_standard_flag","%d",(ulong)(param_10[0x5e] >> 5 & 1),param_13,param_14,
                     in_stack_ffffffffffffffd8);
  uVar5 = (ulong)(param_10[0x5e] >> 6 & 1);
  uVar8 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     "mouse_button_flag","%d",uVar5,param_13,param_14,in_stack_ffffffffffffffd8);
  format_add_cb(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                "pane_tabs",(char *)format_cb_pane_tabs,uVar5,param_13,param_14);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void format_defaults(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    uint **param_9,long param_10,uint *param_11,uint *param_12,uint *param_13,
                    undefined8 param_14)

{
  uint *extraout_RDX;
  uint *extraout_RDX_00;
  uint *extraout_RDX_01;
  uint *puVar1;
  uint *puVar2;
  uint *puVar3;
  
  puVar1 = param_11;
  if ((param_11 == (uint *)0x0) && (param_10 != 0)) {
    puVar1 = *(uint **)(param_10 + 0x598);
  }
  puVar2 = param_12;
  if ((param_12 == (uint *)0x0) && (puVar1 != (uint *)0x0)) {
    puVar2 = *(uint **)(puVar1 + 0x38);
  }
  puVar3 = param_13;
  if ((param_13 == (uint *)0x0) && (puVar2 != (uint *)0x0)) {
    puVar3 = *(uint **)(*(long *)(puVar2 + 2) + 0x138);
  }
  if (param_10 != 0) {
    param_1 = format_defaults_client
                        (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)param_9,param_10,param_11,param_12,param_13,param_14);
    param_11 = extraout_RDX;
  }
  if (puVar1 != (uint *)0x0) {
    param_1 = format_defaults_session
                        (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)param_9,puVar1,param_11,param_12,(ulong)param_13,param_14);
    param_11 = extraout_RDX_00;
    if (puVar2 != (uint *)0x0) {
      param_1 = format_defaults_winlink
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           (long)puVar1,puVar2,param_12,param_13,param_14);
      param_11 = extraout_RDX_01;
    }
  }
  if (puVar3 != (uint *)0x0) {
    format_defaults_pane
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)param_9,
               puVar3,param_11,param_12,param_13,param_14);
    return;
  }
  return;
}



void format_defaults_paste_buffer
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,byte **param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  undefined2 *__ptr;
  undefined8 extraout_RDX;
  char *pcVar3;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined in_stack_ffffffffffffffd8;
  undefined7 uStack_27;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  paste_buffer_data(param_10,(undefined8 *)&stack0xffffffffffffffd8);
  format_add(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
             param_7,param_8,param_9,"buffer_size",&DAT_0017b26a,
             CONCAT71(uStack_27,in_stack_ffffffffffffffd8),param_13,param_14,
             in_stack_ffffffffffffffd8);
  uVar2 = paste_buffer_name((long)param_10);
  pcVar3 = "buffer_name";
  uVar4 = format_add(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_9,"buffer_name","%s",uVar2,param_13,
                     param_14,in_stack_ffffffffffffffd8);
  __ptr = paste_make_sample(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                            pcVar3,extraout_RDX,uVar2,param_13,param_14);
  format_add(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
             param_6,param_7,param_8,param_9,"buffer_sample","%s",__ptr,param_13,param_14,
             in_stack_ffffffffffffffd8);
  free(__ptr);
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void grid_view_get_cell(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,ulong param_10,int param_11,undefined4 *param_12,
                       undefined8 param_13,undefined8 param_14)

{
  grid_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                (ulong)(uint)(param_11 + *(int *)(param_9 + 0xc)),param_12,param_13,param_14);
  return;
}



void grid_view_set_cell(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,ulong param_10,int param_11,undefined4 *param_12,
                       undefined8 param_13,undefined8 param_14)

{
  grid_set_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                (ulong)(uint)(param_11 + *(int *)(param_9 + 0xc)),param_12,param_13,param_14);
  return;
}



void grid_view_clear_history
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  uint uVar1;
  ulong uVar2;
  undefined8 extraout_RDX;
  uint uVar3;
  uint uVar4;
  ulong uVar5;
  long lVar6;
  undefined8 in_R9;
  undefined4 uVar7;
  
  uVar4 = *(uint *)(param_9 + 8);
  uVar5 = (ulong)uVar4;
  if (uVar4 != 0) {
    uVar1 = 0;
    lVar6 = *(long *)(param_9 + 0x18);
    uVar3 = 0;
    do {
      uVar2 = (ulong)(*(int *)(param_9 + 0xc) + uVar1);
      uVar1 = uVar1 + 1;
      if (*(int *)(lVar6 + uVar2 * 0x1c) != 0) {
        uVar3 = uVar1;
      }
    } while (uVar1 != uVar4);
    if (uVar3 != 0) {
      uVar4 = 0;
      do {
        uVar4 = uVar4 + 1;
        uVar7 = grid_collect_history(param_9);
        grid_scroll_history(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            uVar5,extraout_RDX,uVar2,lVar6,in_R9);
      } while (uVar3 != uVar4);
    }
    return;
  }
  return;
}



void grid_view_clear(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,ulong param_10,int param_11,ulong param_12,ulong param_13,
                    undefined8 param_14)

{
  grid_clear(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             (ulong)(uint)(param_11 + *(int *)(param_9 + 0xc)),param_12,param_13,param_14);
  return;
}



void grid_view_scroll_region_up
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               byte *param_9,undefined8 param_10,int param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  int iVar1;
  undefined4 uVar2;
  
  iVar1 = (int)param_10;
  if ((*param_9 & 1) == 0) {
    grid_move_lines(param_9,*(int *)(param_9 + 0xc) + iVar1,*(int *)(param_9 + 0xc) + iVar1 + 1,
                    param_11 - iVar1);
    return;
  }
  uVar2 = grid_collect_history((long)param_9);
  if ((iVar1 == 0) && (*(int *)(param_9 + 8) + -1 == param_11)) {
    grid_scroll_history(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                        param_10,extraout_RDX,param_12,param_13,param_14);
    return;
  }
  grid_scroll_history_region
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
             *(int *)(param_9 + 0xc) + iVar1,*(int *)(param_9 + 0xc) + param_11,param_12,param_13,
             param_14);
  return;
}



void grid_view_scroll_region_down(long param_1,int param_2,int param_3)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0xc) + param_2;
  grid_move_lines(param_1,iVar1 + 1,iVar1,param_3 - param_2);
  return;
}



void grid_view_insert_lines(long param_1,int param_2,int param_3)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0xc) + param_2;
  grid_move_lines(param_1,iVar1 + param_3,iVar1,*(int *)(param_1 + 8) - (param_2 + param_3));
  return;
}



void grid_view_insert_lines_region
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,int param_11,int param_12,undefined8 param_13,
               undefined8 param_14)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  
  iVar1 = (param_10 - param_12) + 1;
  iVar2 = *(int *)(param_9 + 0xc);
  uVar3 = grid_move_lines(param_9,iVar2 + 1 + param_10 + (param_11 - iVar1),param_11 + iVar2,
                          iVar1 - param_11);
  grid_clear(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
             (ulong)(uint)(iVar2 + iVar1),(ulong)*(uint *)(param_9 + 4),
             (ulong)(uint)(param_12 + (param_11 - iVar1)),param_14);
  return;
}



void grid_view_delete_lines
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,int param_11,undefined8 param_12,undefined8 param_13,
               undefined8 param_14)

{
  int iVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  
  iVar1 = *(int *)(param_9 + 0xc) + param_10;
  iVar2 = *(int *)(param_9 + 0xc) + *(int *)(param_9 + 8);
  iVar3 = iVar1 + param_11;
  uVar4 = grid_move_lines(param_9,iVar1,iVar3,*(int *)(param_9 + 8) - (param_10 + param_11));
  grid_clear(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
             (ulong)(uint)(iVar2 - param_11),(ulong)*(uint *)(param_9 + 4),
             (ulong)(uint)((iVar3 - iVar2) + param_11),param_14);
  return;
}



void grid_view_delete_lines_region
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,int param_11,int param_12,undefined8 param_13,
               undefined8 param_14)

{
  int iVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  
  iVar1 = (param_10 - param_12) + 1;
  iVar2 = *(int *)(param_9 + 0xc);
  iVar3 = iVar2 + param_11;
  uVar4 = grid_move_lines(param_9,iVar3,iVar3 + param_12,iVar1 - param_11);
  grid_clear(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
             (ulong)(uint)(iVar2 + iVar1),(ulong)*(uint *)(param_9 + 4),
             (ulong)(uint)((param_11 + param_12) - iVar1),param_14);
  return;
}



void grid_view_insert_cells
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,int param_11,int param_12)

{
  uint uVar1;
  ulong uVar2;
  
  uVar2 = (ulong)(uint)(param_11 + *(int *)(param_9 + 0xc));
  uVar1 = *(int *)(param_9 + 4) - 1;
  if (uVar1 != param_10) {
    grid_move_cells(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                    (ulong)(param_10 + param_12),(ulong)param_10,uVar2,
                    (ulong)((*(int *)(param_9 + 4) - param_12) - param_10),(ulong)param_10);
    return;
  }
  grid_clear(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,(ulong)uVar1,
             uVar2,1,1,(ulong)param_10);
  return;
}



void grid_view_delete_cells
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,ulong param_10,int param_11,int param_12,undefined8 param_13,
               undefined8 param_14)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  undefined4 uVar5;
  
  uVar4 = (int)param_10 + param_12;
  iVar1 = *(int *)(param_9 + 4);
  uVar2 = param_11 + *(int *)(param_9 + 0xc);
  uVar3 = iVar1 - param_12;
  uVar5 = grid_move_cells(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          param_10,(ulong)uVar4,(ulong)uVar2,(ulong)(uVar3 - (int)param_10),param_14
                         );
  grid_clear(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,(ulong)uVar3,
             (ulong)uVar2,(ulong)((param_12 - iVar1) + uVar4),1,param_14);
  return;
}



void grid_view_string_cells(long param_1,undefined8 param_2,int param_3,undefined8 param_4)

{
  grid_string_cells(param_1,param_2,param_3 + *(int *)(param_1 + 0xc),param_4,0,0,0,0);
  return;
}



undefined8
FUN_0013e820(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
            ulong param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
            undefined8 param_13,undefined8 param_14)

{
  undefined1 in_stack_fffffffffffffff8;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"y out of range: %u",
           param_9 & 0xffffffff,param_12,param_13,param_14,in_stack_fffffffffffffff8);
  return 0xffffffff;
}



undefined8
grid_check_y(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9
            ,ulong param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
            undefined8 param_14)

{
  undefined8 uVar1;
  
  if ((uint)param_10 < (uint)(*(int *)(param_9 + 0xc) + *(int *)(param_9 + 8))) {
    return 0;
  }
  uVar1 = FUN_0013e820(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_10 & 0xffffffff,param_10,param_11,param_12,param_13,param_14);
  return uVar1;
}



undefined4 *
grid_create(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
           undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
           undefined4 param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
           undefined8 param_13,undefined8 param_14)

{
  undefined4 *extraout_RAX;
  undefined8 extraout_RAX_00;
  undefined4 extraout_EDX;
  undefined4 extraout_var;
  undefined4 extraout_XMM0_Da;
  
  xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x20,param_10,param_11,
          param_12,param_13,param_14);
  extraout_RAX[1] = param_9;
  extraout_RAX[2] = (int)param_10;
  extraout_RAX[4] = (int)param_11;
  *extraout_RAX = 1;
  extraout_RAX[3] = 0;
  xcalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
          param_10 & 0xffffffff,0x1c,CONCAT44(extraout_var,extraout_EDX),param_12,param_13,param_14)
  ;
  *(undefined8 *)(extraout_RAX + 6) = extraout_RAX_00;
  return extraout_RAX;
}



void grid_destroy(void *param_1)

{
  long lVar1;
  uint uVar2;
  ulong uVar3;
  
  if (*(int *)((long)param_1 + 8) + *(int *)((long)param_1 + 0xc) != 0) {
    uVar3 = 0;
    do {
      uVar2 = (int)uVar3 + 1;
      lVar1 = *(long *)((long)param_1 + 0x18) + uVar3 * 0x1c;
      free(*(void **)(lVar1 + 4));
      free(*(void **)(lVar1 + 0x10));
      uVar3 = (ulong)uVar2;
    } while (uVar2 < (uint)(*(int *)((long)param_1 + 8) + *(int *)((long)param_1 + 0xc)));
  }
  free(*(void **)((long)param_1 + 0x18));
  free(param_1);
  return;
}



void grid_scroll_history(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  undefined (*pauVar1) [16];
  long lVar2;
  uint uVar3;
  
  uVar3 = *(int *)(param_9 + 8) + *(int *)(param_9 + 0xc);
  lVar2 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(undefined8 *)(param_9 + 0x18),(ulong)(uVar3 + 1),0x1c,param_12,param_13,
                        param_14);
  *(long *)(param_9 + 0x18) = lVar2;
  pauVar1 = (undefined (*) [16])(lVar2 + (ulong)uVar3 * 0x1c);
  *(undefined8 *)pauVar1[1] = 0;
  *(undefined4 *)(pauVar1[1] + 8) = 0;
  *pauVar1 = (undefined  [16])0x0;
  *(int *)(param_9 + 0xc) = *(int *)(param_9 + 0xc) + 1;
  return;
}



void grid_scroll_history_region
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,int param_11,undefined8 param_12,undefined8 param_13,
               undefined8 param_14)

{
  undefined4 *__src;
  undefined4 *__dest;
  undefined (*pauVar1) [16];
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  long lVar5;
  
  lVar5 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(undefined8 *)(param_9 + 0x18),
                        (ulong)(*(int *)(param_9 + 8) + *(int *)(param_9 + 0xc) + 1),0x1c,param_12,
                        param_13,param_14);
  *(long *)(param_9 + 0x18) = lVar5;
  __src = (undefined4 *)(lVar5 + (ulong)*(uint *)(param_9 + 0xc) * 0x1c);
  memmove(__src + 7,__src,(ulong)*(uint *)(param_9 + 8) * 0x1c);
  lVar5 = *(long *)(param_9 + 0x18);
  __dest = (undefined4 *)(lVar5 + (ulong)(param_10 + 1) * 0x1c);
  uVar2 = __dest[1];
  uVar3 = __dest[2];
  uVar4 = __dest[3];
  *__src = *__dest;
  __src[1] = uVar2;
  __src[2] = uVar3;
  __src[3] = uVar4;
  *(undefined8 *)(__src + 4) = *(undefined8 *)(__dest + 4);
  __src[6] = __dest[6];
  memmove(__dest,__dest + 7,(ulong)(uint)(param_11 - param_10) * 0x1c);
  pauVar1 = (undefined (*) [16])(lVar5 + (ulong)(param_11 + 1) * 0x1c);
  *(undefined8 *)pauVar1[1] = 0;
  *(undefined4 *)(pauVar1[1] + 8) = 0;
  *pauVar1 = (undefined  [16])0x0;
  *(int *)(param_9 + 0xc) = *(int *)(param_9 + 0xc) + 1;
  return;
}



void grid_expand_line(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,uint param_10,uint param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  long lVar2;
  undefined8 uVar3;
  undefined *puVar4;
  undefined *puVar5;
  uint *puVar6;
  
  puVar6 = (uint *)(*(long *)(param_9 + 0x18) + (ulong)param_10 * 0x1c);
  if (param_11 <= *puVar6) {
    return;
  }
  uVar3 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(undefined8 *)(puVar6 + 1),(ulong)param_11,5,param_12,param_13,param_14);
  uVar1 = *puVar6;
  *(undefined8 *)(puVar6 + 1) = uVar3;
  if (uVar1 < param_11) {
    lVar2 = *(long *)(*(long *)(param_9 + 0x18) + 4 + (ulong)param_10 * 0x1c);
    puVar4 = (undefined *)((ulong)uVar1 * 5 + lVar2);
    do {
      *puVar4 = 0;
      puVar5 = puVar4 + 5;
      puVar4[1] = 0;
      puVar4[2] = 8;
      puVar4[3] = 8;
      puVar4[4] = 0x20;
      puVar4 = puVar5;
    } while (puVar5 != (undefined *)
                       (lVar2 + 5 + ((ulong)((param_11 - 1) - uVar1) + (ulong)uVar1) * 5));
  }
  *puVar6 = param_11;
  return;
}



long grid_peek_line(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  
  if ((uint)(*(int *)(param_9 + 8) + *(int *)(param_9 + 0xc)) <= (uint)param_10) {
    uVar1 = FUN_0013e820(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         param_10 & 0xffffffff,param_10,param_11,param_12,param_13,param_14);
    param_10 = param_10 & 0xffffffff;
    if ((int)uVar1 != 0) {
      return 0;
    }
  }
  return *(long *)(param_9 + 0x18) + (param_10 & 0xffffffff) * 0x1c;
}



void grid_get_cell(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,ulong param_10,ulong param_11,undefined4 *param_12,
                  undefined8 param_13,undefined8 param_14)

{
  uint *puVar1;
  undefined4 *puVar2;
  byte bVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  byte *pbVar7;
  undefined8 uVar8;
  
  if ((uint)(*(int *)(param_9 + 8) + *(int *)(param_9 + 0xc)) <= (uint)param_11) {
    uVar8 = FUN_0013e820(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         param_11 & 0xffffffff,param_10,param_11,param_12,param_13,param_14);
    param_11 = param_11 & 0xffffffff;
    param_10 = param_10 & 0xffffffff;
    if ((int)uVar8 != 0) goto LAB_0013ebee;
  }
  puVar1 = (uint *)(*(long *)(param_9 + 0x18) + (param_11 & 0xffffffff) * 0x1c);
  if ((uint)param_10 < *puVar1) {
    pbVar7 = (byte *)((param_10 & 0xffffffff) * 5 + *(long *)(puVar1 + 1));
    if ((*pbVar7 & 8) == 0) {
      *(byte *)param_12 = *pbVar7 & 0xf7;
      *(byte *)((long)param_12 + 1) = pbVar7[1];
      bVar3 = pbVar7[4];
      *(byte *)((long)param_12 + 2) = pbVar7[2];
      *(byte *)((long)param_12 + 5) = pbVar7[3];
      utf8_set((undefined *)(param_12 + 2),bVar3);
      return;
    }
    if (*(uint *)(pbVar7 + 1) < puVar1[3]) {
      puVar2 = (undefined4 *)(*(long *)(puVar1 + 4) + (ulong)*(uint *)(pbVar7 + 1) * 0x14);
      uVar4 = puVar2[1];
      uVar5 = puVar2[2];
      uVar6 = puVar2[3];
      *param_12 = *puVar2;
      param_12[1] = uVar4;
      param_12[2] = uVar5;
      param_12[3] = uVar6;
      param_12[4] = puVar2[4];
      return;
    }
  }
LAB_0013ebee:
  *param_12 = 0x80000;
  param_12[1] = 0x800;
  param_12[2] = 0x20;
  param_12[3] = 0;
  param_12[4] = 0x1010000;
  return;
}



undefined8
grid_compare(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9
            ,long param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
            undefined8 param_14)

{
  uint *puVar1;
  undefined8 uVar2;
  uint uVar3;
  ulong uVar4;
  ulong uVar5;
  long in_FS_OFFSET;
  undefined4 uVar6;
  ulong local_78;
  ulong local_70;
  int local_68;
  ulong local_58;
  ulong local_50;
  int local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(int *)(param_9 + 4) == *(int *)(param_10 + 4)) &&
     (*(int *)(param_9 + 8) == *(int *)(param_10 + 8))) {
    uVar5 = 0;
    if (*(int *)(param_9 + 8) != 0) {
      do {
        puVar1 = (uint *)(*(long *)(param_9 + 0x18) + uVar5 * 0x1c);
        uVar3 = *puVar1;
        if (uVar3 != *(uint *)(*(long *)(param_10 + 0x18) + uVar5 * 0x1c)) goto LAB_0013ed5f;
        if (uVar3 != 0) {
          uVar4 = 0;
          do {
            uVar6 = grid_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  param_9,uVar4,uVar5,(undefined4 *)&local_78,param_13,param_14);
            param_1 = grid_get_cell(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    param_10,uVar4,uVar5,(undefined4 *)&local_58,param_13,param_14);
            if (((local_70 ^ local_50 | local_78 ^ local_58) != 0) || (local_68 != local_48))
            goto LAB_0013ed5f;
            uVar3 = (int)uVar4 + 1;
            uVar4 = (ulong)uVar3;
          } while (uVar3 < *puVar1);
        }
        uVar3 = (int)uVar5 + 1;
        uVar5 = (ulong)uVar3;
      } while (uVar3 < *(uint *)(param_9 + 8));
    }
    uVar2 = 0;
  }
  else {
LAB_0013ed5f:
    uVar2 = 1;
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void grid_set_cell(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,ulong param_10,ulong param_11,undefined4 *param_12,
                  undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined8 uVar5;
  undefined4 *puVar6;
  uint uVar7;
  byte *pbVar8;
  ulong uVar9;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined in_stack_ffffffffffffffd8;
  
  puVar6 = param_12;
  if (((uint)param_11 < (uint)(*(int *)(param_9 + 8) + *(int *)(param_9 + 0xc))) ||
     (uVar5 = FUN_0013e820(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           param_11 & 0xffffffff,param_10,param_11,param_12,param_13,param_14),
     param_1 = extraout_XMM0_Da_00, (int)uVar5 == 0)) {
    uVar9 = param_11 & 0xffffffff;
    uVar10 = grid_expand_line(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              param_9,(uint)param_11,(int)param_10 + 1,puVar6,param_13,param_14);
    lVar1 = *(long *)(param_9 + 0x18) + (param_11 & 0xffffffff) * 0x1c;
    pbVar8 = (byte *)((param_10 & 0xffffffff) * 5 + *(long *)(lVar1 + 4));
    if ((*pbVar8 & 8) == 0) {
      if (((*(char *)((long)param_12 + 0x12) == '\x01') &&
          (*(char *)((long)param_12 + 0x13) == '\x01')) && ((*(byte *)param_12 & 0x30) == 0)) {
        *pbVar8 = *(byte *)param_12 & 0xf7;
        pbVar8[1] = *(byte *)((long)param_12 + 1);
        pbVar8[2] = *(byte *)((long)param_12 + 2);
        pbVar8[3] = *(byte *)((long)param_12 + 5);
        pbVar8[4] = *(byte *)(param_12 + 2);
        return;
      }
      uVar9 = (ulong)(*(int *)(lVar1 + 0xc) + 1);
      uVar5 = xreallocarray(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            *(undefined8 *)(lVar1 + 0x10),uVar9,0x14,puVar6,param_13,param_14);
      *(undefined8 *)(lVar1 + 0x10) = uVar5;
      uVar2 = *(uint *)(lVar1 + 0xc);
      uVar7 = uVar2 + 1;
      *(uint *)(lVar1 + 0xc) = uVar7;
      *(uint *)(pbVar8 + 1) = uVar2;
      puVar6 = (undefined4 *)(ulong)(*(byte *)param_12 | 8);
      *pbVar8 = (byte)(*(byte *)param_12 | 8);
      uVar10 = extraout_XMM0_Da;
    }
    else {
      uVar2 = *(uint *)(pbVar8 + 1);
      uVar7 = *(uint *)(lVar1 + 0xc);
    }
    if (uVar7 <= uVar2) {
                    // WARNING: Subroutine does not return
      fatalx(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"offset too big",uVar9,
             (ulong)uVar7,puVar6,param_13,param_14,in_stack_ffffffffffffffd8);
    }
    uVar10 = param_12[1];
    uVar3 = param_12[2];
    uVar4 = param_12[3];
    puVar6 = (undefined4 *)(*(long *)(lVar1 + 0x10) + (ulong)uVar2 * 0x14);
    *puVar6 = *param_12;
    puVar6[1] = uVar10;
    puVar6[2] = uVar3;
    puVar6[3] = uVar4;
    puVar6[4] = param_12[4];
  }
  return;
}



void grid_clear_lines(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,ulong param_10,ulong param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  undefined8 uVar2;
  uint uVar3;
  undefined (*pauVar4) [16];
  long lVar5;
  undefined4 extraout_XMM0_Da;
  
  if ((int)param_11 == 0) {
    return;
  }
  uVar1 = *(int *)(param_9 + 8) + *(int *)(param_9 + 0xc);
  if (uVar1 <= (uint)param_10) {
    uVar2 = FUN_0013e820(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         param_10 & 0xffffffff,param_10,param_11,param_12,param_13,param_14);
    if ((int)uVar2 != 0) {
      return;
    }
    param_11 = param_11 & 0xffffffff;
    param_10 = param_10 & 0xffffffff;
    uVar1 = *(int *)(param_9 + 8) + *(int *)(param_9 + 0xc);
    param_1 = extraout_XMM0_Da;
  }
  uVar3 = (int)param_11 + (int)param_10;
  if (uVar1 <= uVar3 - 1) {
    uVar2 = FUN_0013e820(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (ulong)(uVar3 - 1),param_10,(ulong)uVar3,param_12,param_13,param_14);
    param_10 = param_10 & 0xffffffff;
    if ((int)uVar2 != 0) {
      return;
    }
  }
  if ((uint)param_10 < uVar3) {
    lVar5 = (param_10 & 0xffffffff) * 0x1c;
    do {
      pauVar4 = (undefined (*) [16])(*(long *)(param_9 + 0x18) + lVar5);
      lVar5 = lVar5 + 0x1c;
      free(*(void **)(*pauVar4 + 4));
      free(*(void **)pauVar4[1]);
      *(undefined8 *)pauVar4[1] = 0;
      *(undefined4 *)(pauVar4[1] + 8) = 0;
      *pauVar4 = (undefined  [16])0x0;
    } while (lVar5 != ((param_10 & 0xffffffff) + 1 + (ulong)(uVar3 + ~(uint)param_10)) * 0x1c);
  }
  return;
}



void grid_clear(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,ulong param_10,ulong param_11,ulong param_12,ulong param_13,
               undefined8 param_14)

{
  uint *puVar1;
  uint uVar2;
  undefined *puVar3;
  undefined8 uVar4;
  uint uVar5;
  ulong uVar6;
  ulong extraout_RDX;
  uint uVar7;
  uint uVar8;
  uint *puVar9;
  undefined4 extraout_XMM0_Da;
  
  if (((int)param_12 == 0) || ((int)param_13 == 0)) {
    return;
  }
  uVar6 = param_11 & 0xffffffff;
  uVar5 = (uint)param_11;
  if (((int)param_10 == 0) && (*(int *)(param_9 + 4) == (int)param_12)) {
    grid_clear_lines(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar6,
                     param_13 & 0xffffffff,param_12,param_13,param_14);
    return;
  }
  uVar2 = *(int *)(param_9 + 8) + *(int *)(param_9 + 0xc);
  if (uVar2 <= uVar5) {
    uVar4 = FUN_0013e820(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar6,
                         param_10,param_11,param_12,param_13,param_14);
    if ((int)uVar4 != 0) {
      return;
    }
    param_13 = param_13 & 0xffffffff;
    param_12 = param_12 & 0xffffffff;
    param_10 = param_10 & 0xffffffff;
    uVar2 = *(int *)(param_9 + 0xc) + *(int *)(param_9 + 8);
    param_11 = extraout_RDX;
    param_1 = extraout_XMM0_Da;
  }
  uVar7 = (int)param_13 + uVar5;
  if (uVar2 <= uVar7 - 1) {
    uVar4 = FUN_0013e820(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (ulong)(uVar7 - 1),param_10,param_11,param_12,param_13,param_14);
    param_10 = param_10 & 0xffffffff;
    param_12 = param_12 & 0xffffffff;
    if ((int)uVar4 != 0) {
      return;
    }
  }
  if (uVar7 <= uVar5) {
    return;
  }
  uVar8 = (uint)param_10;
  uVar2 = (int)param_12 + uVar8;
  puVar9 = (uint *)(*(long *)(param_9 + 0x18) + uVar6 * 0x1c);
  puVar1 = (uint *)(*(long *)(param_9 + 0x18) + 0x1c + ((~uVar5 + uVar7) + uVar6) * 0x1c);
  do {
    while (*puVar9 <= uVar8) {
LAB_0013f072:
      puVar9 = puVar9 + 7;
      if (puVar9 == puVar1) {
        return;
      }
    }
    if (*puVar9 <= uVar2) {
      *puVar9 = uVar8;
      goto LAB_0013f072;
    }
    if (uVar2 <= uVar8) goto LAB_0013f072;
    uVar6 = param_10 & 0xffffffff;
    puVar3 = (undefined *)(*(long *)(puVar9 + 1) + (param_10 & 0xffffffff) * 5);
    do {
      uVar5 = (int)uVar6 + 1;
      uVar6 = (ulong)uVar5;
      *puVar3 = 0;
      puVar3[1] = 0;
      puVar3[2] = 8;
      puVar3[3] = 8;
      puVar3[4] = 0x20;
      puVar3 = puVar3 + 5;
    } while (uVar5 < uVar2);
    puVar9 = puVar9 + 7;
    if (puVar9 == puVar1) {
      return;
    }
  } while( true );
}


/*
Unable to decompile 'grid_move_lines'
Cause: 
Low-level Error: Overlapping input varnodes
*/


void grid_collect_history(long param_1)

{
  uint uVar1;
  ulong uVar2;
  
  uVar1 = *(uint *)(param_1 + 0x10);
  if (uVar1 <= *(uint *)(param_1 + 0xc)) {
    uVar2 = 1;
    if (9 < uVar1) {
      uVar2 = (ulong)uVar1 / 10;
    }
    grid_move_lines(param_1,0,uVar2,(*(uint *)(param_1 + 0xc) + *(int *)(param_1 + 8)) - (int)uVar2)
    ;
    *(int *)(param_1 + 0xc) = *(int *)(param_1 + 0xc) - (int)uVar2;
    return;
  }
  return;
}



void grid_clear_history(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  ulong uVar2;
  undefined4 uVar3;
  
  grid_clear_lines(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
                   (ulong)*(uint *)(param_9 + 0xc),param_12,param_13,param_14);
  uVar2 = (ulong)*(uint *)(param_9 + 8);
  uVar3 = grid_move_lines(param_9,0,*(undefined4 *)(param_9 + 0xc));
  *(undefined4 *)(param_9 + 0xc) = 0;
  uVar1 = xreallocarray(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(undefined8 *)(param_9 + 0x18),(ulong)*(uint *)(param_9 + 8),0x1c,uVar2,
                        param_13,param_14);
  *(undefined8 *)(param_9 + 0x18) = uVar1;
  return;
}



void grid_move_cells(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,ulong param_10,ulong param_11,ulong param_12,ulong param_13,
                    undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  uint uVar3;
  undefined4 *puVar4;
  uint uVar5;
  ulong uVar6;
  ulong uVar7;
  long lVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  long lVar13;
  ulong uVar14;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Da;
  ulong uVar12;
  
  iVar10 = (int)param_13;
  uVar14 = param_13 & 0xffffffff;
  if (iVar10 != 0) {
    uVar9 = (uint)param_10;
    uVar5 = (uint)param_11;
    uVar6 = param_11 & 0xffffffff;
    if (uVar5 != uVar9) {
      uVar3 = (uint)param_12;
      uVar7 = param_12 & 0xffffffff;
      if ((uVar3 < (uint)(*(int *)(param_9 + 8) + *(int *)(param_9 + 0xc))) ||
         (uVar2 = FUN_0013e820(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               param_12 & 0xffffffff,param_10,param_11,param_12,param_13,param_14),
         param_1 = extraout_XMM0_Da, (int)uVar2 == 0)) {
        uVar11 = iVar10 + uVar5;
        uVar12 = (ulong)uVar11;
        lVar1 = *(long *)(param_9 + 0x18);
        lVar13 = uVar7 * 0x1c;
        uVar15 = grid_expand_line(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  param_9,uVar3,uVar11,param_12,param_13,uVar12);
        grid_expand_line(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         uVar3,iVar10 + uVar9,param_12,param_13,uVar12);
        lVar1 = *(long *)(lVar1 + lVar13 + 4);
        lVar8 = uVar6 * 5;
        memmove((void *)(lVar1 + (param_10 & 0xffffffff) * 5),(void *)(lVar1 + lVar8),uVar14 * 5);
        if (uVar5 < uVar11) {
          do {
            uVar5 = (uint)uVar6;
            if ((iVar10 + uVar9 <= uVar5) || (uVar5 < uVar9)) {
              puVar4 = (undefined4 *)(*(long *)(*(long *)(param_9 + 0x18) + 4 + lVar13) + lVar8);
              *puVar4 = 0x8080000;
              *(undefined *)(puVar4 + 1) = 0x20;
            }
            uVar6 = (ulong)(uVar5 + 1);
            lVar8 = lVar8 + 5;
          } while (uVar11 != uVar5 + 1);
        }
      }
    }
  }
  return;
}



undefined8 grid_string_cells_fg(byte *param_1,undefined8 *param_2)

{
  byte bVar1;
  uint uVar2;
  undefined8 uVar3;
  
  bVar1 = param_1[2];
  if ((*param_1 & 1) != 0) {
    *(uint *)(param_2 + 1) = (uint)bVar1;
    *param_2 = 0x500000026;
    return 3;
  }
  uVar2 = (uint)bVar1;
  if ((*param_1 & 0x10) == 0) {
    if (bVar1 == 8) {
      *(undefined4 *)param_2 = 0x27;
      return 1;
    }
    if (bVar1 < 9) {
      *(uint *)param_2 = uVar2 + 0x1e;
      return 1;
    }
    uVar3 = 0;
    if ((byte)(bVar1 + 0xa6) < 8) {
      *(uint *)param_2 = uVar2;
      return 1;
    }
  }
  else {
    *(uint *)(param_2 + 1) = uVar2;
    uVar3 = 5;
    *param_2 = 0x200000026;
    *(uint *)((long)param_2 + 0xc) = (uint)param_1[3];
    *(uint *)(param_2 + 2) = (uint)param_1[4];
  }
  return uVar3;
}



undefined8 grid_string_cells_bg(byte *param_1,undefined8 *param_2)

{
  byte bVar1;
  uint uVar2;
  undefined8 uVar3;
  
  bVar1 = param_1[5];
  if ((*param_1 & 2) != 0) {
    *(uint *)(param_2 + 1) = (uint)bVar1;
    *param_2 = 0x500000030;
    return 3;
  }
  uVar2 = (uint)bVar1;
  if ((*param_1 & 0x20) == 0) {
    if (bVar1 == 8) {
      *(undefined4 *)param_2 = 0x31;
      return 1;
    }
    if (bVar1 < 9) {
      *(uint *)param_2 = uVar2 + 0x28;
      return 1;
    }
    uVar3 = 0;
    if ((byte)(bVar1 + 0x9c) < 8) {
      *(uint *)param_2 = uVar2 - 10;
      return 1;
    }
  }
  else {
    *(uint *)(param_2 + 1) = uVar2;
    uVar3 = 5;
    *param_2 = 0x200000030;
    *(uint *)((long)param_2 + 0xc) = (uint)param_1[6];
    *(uint *)(param_2 + 2) = (uint)param_1[7];
  }
  return uVar3;
}



void grid_string_cells_code
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               byte *param_9,byte *param_10,char *param_11,long param_12,uint param_13,
               undefined8 param_14)

{
  byte bVar1;
  byte bVar2;
  uint *puVar3;
  int iVar4;
  undefined8 *puVar5;
  long lVar6;
  long lVar7;
  undefined8 *puVar8;
  ulong uVar9;
  uint uVar10;
  long lVar11;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined uVar13;
  undefined8 local_4c8;
  undefined8 local_4c0;
  undefined8 local_4b8;
  undefined8 local_4b0;
  undefined8 local_4a8;
  undefined8 local_4a0;
  undefined8 local_498;
  undefined8 local_490;
  undefined8 local_488 [32];
  undefined8 local_388 [32];
  uint local_288 [128];
  char local_88 [72];
  long local_40;
  
  bVar1 = param_10[1];
  bVar2 = param_9[1];
  uVar10 = (uint)bVar2;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_4c8 = 0x100000001;
  local_4c0 = 0x200000002;
  local_4b8 = 0x300000040;
  local_4b0 = 0x400000004;
  local_4a8 = 0x500000008;
  local_4a0 = 0x700000010;
  local_498 = 0x800000020;
  puVar5 = &local_4c8;
  puVar8 = puVar5;
  while( true ) {
    if (((*(uint *)puVar8 & (uint)bVar1) == 0) && ((*(uint *)puVar8 & (uint)bVar2) != 0)) break;
    puVar8 = puVar8 + 1;
    if (puVar8 == &local_490) {
      lVar11 = 0;
LAB_0013f6e0:
      do {
        if (((*(uint *)puVar5 & (uint)bVar1) != 0) && ((*(uint *)puVar5 & uVar10) == 0)) {
          local_288[lVar11] = *(uint *)((long)puVar5 + 4);
          lVar11 = lVar11 + 1;
        }
        puVar5 = puVar5 + 1;
      } while (puVar5 != &local_490);
      puVar5 = local_488;
      lVar6 = grid_string_cells_fg(param_10,local_388);
      puVar8 = puVar5;
      lVar7 = grid_string_cells_fg(param_9,puVar5);
      if (((lVar6 != lVar7) || (iVar4 = memcmp(local_388,puVar8,lVar6 * 4), iVar4 != 0)) &&
         (lVar6 != 0)) {
        lVar7 = 0;
        do {
          local_288[lVar11 + lVar7] = *(uint *)((long)local_388 + lVar7 * 4);
          lVar7 = lVar7 + 1;
        } while (lVar6 != lVar7);
        lVar11 = lVar11 + lVar6;
      }
      lVar6 = grid_string_cells_bg(param_10,local_388);
      lVar7 = grid_string_cells_bg(param_9,puVar5);
      if (((lVar6 != lVar7) || (iVar4 = memcmp(local_388,puVar5,lVar6 * 4), iVar4 != 0)) &&
         (lVar6 != 0)) {
        lVar7 = 0;
        do {
          local_288[lVar11 + lVar7] = *(uint *)((long)local_388 + lVar7 * 4);
          lVar7 = lVar7 + 1;
        } while (lVar6 != lVar7);
        lVar11 = lVar11 + lVar6;
      }
      *param_11 = '\0';
      if (lVar11 != 0) {
        uVar9 = (ulong)param_13;
        if (param_13 == 0) {
          strlcat(param_11,"\x1b[",param_12);
          uVar12 = extraout_XMM0_Da;
        }
        else {
          strlcat(param_11,"\\033[",param_12);
          uVar12 = extraout_XMM0_Da_01;
        }
        uVar13 = SUB81(param_9,0);
        puVar3 = local_288;
        uVar10 = local_288[0];
        while (puVar3 = puVar3 + 1, puVar3 != local_288 + lVar11) {
          xsnprintf(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_88,0x40,
                    &DAT_0017b2ff,(ulong)uVar10,uVar9,param_14,(char)param_9);
          strlcat(param_11,local_88,param_12);
          uVar13 = SUB81(param_9,0);
          uVar10 = *puVar3;
          uVar12 = extraout_XMM0_Da_00;
        }
        xsnprintf(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_88,0x40,"%d",
                  (ulong)uVar10,uVar9,param_14,uVar13);
        strlcat(param_11,local_88,param_12);
        strlcat(param_11,"m",param_12);
      }
      if ((char)bVar1 < '\0') {
        if ((bVar2 & 0x80) == 0) {
          if (param_13 == 0) {
            strlcat(param_11,"\x0e",param_12);
          }
          else {
            strlcat(param_11,"\\016",param_12);
          }
        }
      }
      else if ((bVar2 & 0x80) != 0) {
        if (param_13 == 0) {
          strlcat(param_11,"\x0f",param_12);
        }
        else {
          strlcat(param_11,"\\017",param_12);
        }
      }
      if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
        return;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
  }
  uVar10 = bVar2 & 0xffffff80;
  lVar11 = 1;
  local_288[0] = 0;
  goto LAB_0013f6e0;
}


/*
Unable to decompile 'grid_string_cells'
Cause: 
Low-level Error: Overlapping input varnodes
*/


void grid_duplicate_lines
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,ulong param_10,long param_11,uint param_12,undefined8 param_13)

{
  undefined (*pauVar1) [16];
  undefined (*pauVar2) [16];
  uint uVar3;
  void *__dest;
  void *__dest_00;
  ulong uVar4;
  uint uVar5;
  int iVar6;
  undefined extraout_XMM0 [16];
  undefined auVar7 [16];
  
  iVar6 = (int)param_10;
  uVar3 = *(int *)(param_9 + 8) + *(int *)(param_9 + 0xc);
  uVar5 = (uint)param_13;
  if (uVar3 < iVar6 + (uint)param_13) {
    uVar5 = uVar3 - iVar6;
  }
  uVar3 = *(int *)(param_11 + 8) + *(int *)(param_11 + 0xc);
  uVar4 = (ulong)(uVar5 + param_12);
  if (uVar3 < uVar5 + param_12) {
    uVar5 = uVar3 - param_12;
  }
  grid_clear_lines(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                   (ulong)uVar5,uVar4,param_13,param_11);
  if (uVar5 != 0) {
    uVar5 = uVar5 + param_12;
    iVar6 = iVar6 - param_12;
    do {
      while( true ) {
        pauVar1 = (undefined (*) [16])(*(long *)(param_11 + 0x18) + (ulong)param_12 * 0x1c);
        auVar7 = *pauVar1;
        pauVar2 = (undefined (*) [16])(*(long *)(param_9 + 0x18) + (ulong)(iVar6 + param_12) * 0x1c)
        ;
        *pauVar2 = auVar7;
        *(undefined8 *)pauVar2[1] = *(undefined8 *)pauVar1[1];
        *(undefined4 *)(pauVar2[1] + 8) = *(undefined4 *)(pauVar1[1] + 8);
        if (*(uint *)*pauVar1 == 0) break;
        xreallocarray(auVar7._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                      (ulong)*(uint *)*pauVar1,5,uVar4,param_13,param_11);
        *(void **)(*pauVar2 + 4) = __dest;
        memcpy(__dest,*(void **)(*pauVar1 + 4),(ulong)*(uint *)*pauVar1 * 5);
        uVar3 = *(uint *)(*pauVar1 + 0xc);
        auVar7 = extraout_XMM0;
        if (uVar3 == 0) goto LAB_0013fe54;
LAB_0013fee4:
        *(uint *)(*pauVar2 + 0xc) = uVar3;
        param_12 = param_12 + 1;
        xreallocarray(auVar7._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                      (ulong)uVar3,0x14,uVar4,param_13,param_11);
        *(void **)pauVar2[1] = __dest_00;
        memcpy(__dest_00,*(void **)pauVar1[1],(ulong)*(uint *)(*pauVar2 + 0xc) * 0x14);
        if (param_12 == uVar5) {
          return;
        }
      }
      *(undefined8 *)(*pauVar2 + 4) = 0;
      uVar3 = *(uint *)(*pauVar1 + 0xc);
      if (uVar3 != 0) goto LAB_0013fee4;
LAB_0013fe54:
      param_12 = param_12 + 1;
    } while (param_12 != uVar5);
  }
  return;
}



void grid_reflow_copy(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,uint param_10,long param_11,uint param_12,ulong param_13,
                     undefined8 param_14)

{
  undefined (*pauVar1) [16];
  undefined (*pauVar2) [16];
  uint uVar3;
  uint uVar4;
  long extraout_RAX;
  ulong uVar5;
  long lVar6;
  uint uVar7;
  byte *pbVar8;
  undefined extraout_XMM0 [16];
  undefined auVar9 [16];
  
  uVar5 = (ulong)param_12;
  uVar7 = (int)param_13 + param_10;
  lVar6 = (ulong)param_10 * 5;
  memcpy((void *)(*(long *)(param_9 + 4) + lVar6),(void *)(uVar5 * 5 + *(long *)(param_11 + 4)),
         (param_13 & 0xffffffff) * 5);
  if (param_10 < uVar7) {
    auVar9 = extraout_XMM0;
    do {
      pbVar8 = (byte *)(*(long *)(param_9 + 4) + lVar6);
      if ((*pbVar8 & 8) != 0) {
        uVar3 = *(uint *)(pbVar8 + 1);
        xreallocarray(auVar9._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      *(undefined8 *)(param_9 + 0x10),(ulong)(*(int *)(param_9 + 0xc) + 1),0x14,
                      uVar5,param_13,param_14);
        uVar4 = *(uint *)(param_9 + 0xc);
        *(long *)(param_9 + 0x10) = extraout_RAX;
        *(uint *)(param_9 + 0xc) = uVar4 + 1;
        uVar5 = (ulong)uVar3 * 5;
        *(uint *)(pbVar8 + 1) = uVar4;
        pauVar1 = (undefined (*) [16])(extraout_RAX + (ulong)uVar4 * 0x14);
        pauVar2 = (undefined (*) [16])(*(long *)(param_11 + 0x10) + (ulong)uVar3 * 0x14);
        auVar9 = *pauVar2;
        *pauVar1 = auVar9;
        *(undefined4 *)pauVar1[1] = *(undefined4 *)pauVar2[1];
      }
      lVar6 = lVar6 + 5;
    } while (lVar6 != ((ulong)param_10 + 1 + (ulong)(~param_10 + uVar7)) * 5);
  }
  return;
}



void grid_reflow_split(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,uint *param_10,uint *param_11,ulong param_12,ulong param_13,
                      undefined8 param_14)

{
  uint *puVar1;
  long lVar2;
  uint uVar3;
  undefined8 uVar4;
  ulong uVar5;
  ulong uVar6;
  uint uVar7;
  uint *puVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  
  if (*param_11 != 0) {
    uVar6 = param_12;
    uVar5 = param_13 & 0xffffffff;
    puVar8 = param_10;
    do {
      uVar3 = *param_10;
      uVar7 = *(int *)(param_9 + 8) + *(int *)(param_9 + 0xc);
      if (uVar7 <= uVar3) {
        param_1 = grid_scroll_history(param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                      param_8,param_9,puVar8,(ulong)uVar7,uVar6,param_13,param_14);
        uVar3 = *param_10;
      }
      lVar2 = *(long *)(param_9 + 0x18);
      *param_10 = uVar3 + 1;
      puVar1 = (uint *)(lVar2 + (ulong)uVar3 * 0x1c);
      uVar3 = (uint)param_12;
      if (*param_11 <= (uint)param_12) {
        uVar3 = *param_11;
      }
      uVar4 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                            (ulong)uVar3,5,lVar2,param_13,param_14);
      puVar1[6] = puVar1[6] | 1;
      uVar7 = (uint)uVar5;
      puVar8 = (uint *)0x0;
      *(undefined8 *)(puVar1 + 1) = uVar4;
      param_13 = (ulong)uVar3;
      *puVar1 = uVar3;
      param_1 = grid_reflow_copy(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4
                                 ,param_5,param_6,param_7,param_8,(long)puVar1,0,(long)param_11,
                                 uVar7,param_13,param_14);
      *param_11 = *param_11 - uVar3;
      uVar6 = uVar5;
      uVar5 = (ulong)(uVar7 + uVar3);
    } while (*param_11 != 0);
    puVar1[6] = puVar1[6] & 0xfffffffe;
  }
  return;
}



void grid_reflow_join(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,uint *param_10,uint *param_11,ulong param_12)

{
  uint *puVar1;
  uint uVar2;
  uint uVar3;
  undefined8 uVar4;
  uint uVar5;
  ulong uVar6;
  ulong uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Db;
  
  uVar2 = *param_11;
  puVar1 = (uint *)(*(long *)(param_9 + 0x18) + (ulong)(*param_10 - 1) * 0x1c);
  uVar3 = *puVar1;
  uVar5 = (int)param_12 - uVar3;
  uVar6 = (ulong)uVar5;
  if (uVar2 < uVar5) {
    uVar6 = (ulong)uVar2;
  }
  uVar5 = (uint)uVar6;
  uVar4 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(undefined8 *)(puVar1 + 1),(ulong)(uVar3 + uVar5),5,param_12,(ulong)uVar2,
                        (ulong)uVar3);
  *(undefined8 *)(puVar1 + 1) = uVar4;
  uVar7 = (ulong)uVar3;
  *puVar1 = uVar3 + uVar5;
  uVar8 = grid_reflow_copy(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,(long)puVar1,uVar3,(long)param_11,0,uVar6
                           ,uVar7);
  uVar2 = *param_11;
  if (uVar2 <= uVar5) {
    return;
  }
  puVar1[6] = puVar1[6] | 1;
  *param_11 = uVar2 - uVar5;
  grid_reflow_split(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                    param_11,param_12 & 0xffffffff,uVar6,uVar7);
  return;
}



void grid_reflow_move(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,uint *param_10,undefined4 *param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  undefined4 *puVar1;
  long lVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  uint uVar6;
  uint uVar7;
  
  uVar6 = *param_10;
  uVar7 = *(int *)(param_9 + 8) + *(int *)(param_9 + 0xc);
  if (uVar7 <= uVar6) {
    grid_scroll_history(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        param_10,(ulong)uVar7,param_12,param_13,param_14);
    uVar6 = *param_10;
  }
  lVar2 = *(long *)(param_9 + 0x18);
  *param_10 = uVar6 + 1;
  uVar3 = param_11[1];
  uVar4 = param_11[2];
  uVar5 = param_11[3];
  puVar1 = (undefined4 *)(lVar2 + (ulong)uVar6 * 0x1c);
  *puVar1 = *param_11;
  puVar1[1] = uVar3;
  puVar1[2] = uVar4;
  puVar1[3] = uVar5;
  *(undefined8 *)(puVar1 + 4) = *(undefined8 *)(param_11 + 4);
  puVar1[6] = param_11[6];
  puVar1[6] = puVar1[6] & 0xfffffffe;
  *(undefined8 *)(param_11 + 1) = 0;
  *(undefined8 *)(param_11 + 4) = 0;
  return;
}



int grid_reflow(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,void *param_10,uint param_11,undefined8 param_12,undefined8 param_13,
               undefined8 param_14)

{
  uint *puVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  long in_FS_OFFSET;
  uint local_44;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = *(uint *)((long)param_10 + 8);
  local_44 = 0;
  if (uVar2 + *(int *)((long)param_10 + 0xc) != 0) {
    uVar3 = 0;
    uVar5 = 0;
    do {
      puVar1 = (uint *)(*(long *)((long)param_10 + 0x18) + (ulong)uVar5 * 0x1c);
      if (uVar3 == 0) {
        if (param_11 < *puVar1) {
          param_13 = 0;
          param_1 = grid_reflow_split(param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                      param_8,param_9,&local_44,puVar1,(ulong)param_11,0,param_14);
        }
        else {
          param_1 = grid_reflow_move(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                     ,param_9,&local_44,puVar1,*(long *)((long)param_10 + 0x18),
                                     param_13,param_14);
        }
      }
      else {
        param_1 = grid_reflow_join(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   param_9,&local_44,puVar1,(ulong)param_11);
      }
      uVar5 = uVar5 + 1;
      uVar3 = puVar1[6] & 1;
    } while (uVar5 < uVar2 + *(int *)((long)param_10 + 0xc));
  }
  grid_destroy(param_10);
  iVar4 = uVar2 - local_44;
  if (uVar2 < local_44) {
    iVar4 = 0;
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00140340(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 int *param_9)

{
  int *piVar1;
  uint uVar2;
  undefined8 extraout_XMM0_Qa;
  
  piVar1 = *(int **)(param_9 + 0x48);
  if (piVar1 != (int *)0x0) {
    if (-1 < param_9[4]) {
      piVar1[4] = param_9[4];
    }
    uVar2 = cmdq_free(piVar1);
    if (uVar2 == 0) {
      cmdq_continue(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar1)
      ;
      cmdq_free(param_9);
      return;
    }
  }
  cmdq_free(param_9);
  return;
}



void hooks_tree_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_001403a8:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x28);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x30) != 1)) {
        *(undefined4 *)(*param_1 + 0x30) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x28);
      lVar3 = *(long *)(lVar2 + 0x18);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x20);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x20) == param_2) {
          lVar3 = *(long *)(param_2 + 0x18);
          *(long *)(lVar1 + 0x20) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x28) = lVar2;
            lVar3 = lVar2;
LAB_001405c7:
            *(long *)(lVar3 + 0x18) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x28) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x28);
            *(long *)(param_2 + 0x28) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x18) == lVar1) goto LAB_001405c7;
              *(long *)(lVar3 + 0x20) = param_2;
            }
          }
          *(long *)(param_2 + 0x18) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x18);
          *(long *)(lVar1 + 0x28) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x30) = 0;
        lVar1 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar2 + 0x30) = 1;
        *(long *)(lVar2 + 0x18) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x28) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x18) == lVar2) {
          *(long *)(lVar1 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar2;
        *(long *)(lVar2 + 0x28) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 0;
        *(undefined4 *)(lVar2 + 0x30) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x18) == param_2) {
        lVar3 = *(long *)(param_2 + 0x20);
        *(long *)(lVar1 + 0x18) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x28) = lVar2;
          lVar3 = lVar2;
LAB_001404ce:
          if (*(long *)(lVar3 + 0x18) == lVar1) {
            *(long *)(lVar3 + 0x18) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x20) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x28) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x28);
          *(long *)(param_2 + 0x28) = lVar3;
          if (lVar3 != 0) goto LAB_001404ce;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x20) = lVar1;
        *(long *)(lVar1 + 0x28) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x30) = 0;
      lVar1 = *(long *)(lVar2 + 0x20);
      *(undefined4 *)(lVar2 + 0x30) = 1;
      lVar3 = *(long *)(lVar1 + 0x18);
      *(long *)(lVar2 + 0x20) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x28) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x28);
      *(long *)(lVar1 + 0x28) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x18) == lVar2) {
        *(long *)(lVar3 + 0x18) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x20) = lVar1;
      }
      *(long *)(lVar1 + 0x18) = lVar2;
      *(long *)(lVar2 + 0x28) = lVar1;
      goto LAB_001403a8;
    }
    *(undefined4 *)(lVar3 + 0x30) = 0;
    *(undefined4 *)(lVar1 + 0x30) = 0;
    *(undefined4 *)(lVar2 + 0x30) = 1;
    param_2 = lVar2;
  } while( true );
}



void hooks_tree_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_00140675(param_1,param_2,param_3);
  return;
}



void FUN_00140675(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x30) != 0)) goto LAB_0014072b;
    if (*param_1 == param_3) goto joined_r0x0014086e;
    lVar2 = *(long *)(param_2 + 0x18);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x30) == 1) {
        lVar1 = *(long *)(lVar2 + 0x20);
        *(undefined4 *)(lVar2 + 0x30) = 0;
        *(undefined4 *)(param_2 + 0x30) = 1;
        *(long *)(param_2 + 0x18) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x28) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x28);
        *(long *)(lVar2 + 0x28) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x28) + 0x18) == param_2) {
          *(long *)(lVar3 + 0x18) = lVar2;
          lVar1 = *(long *)(param_2 + 0x18);
        }
        else {
          *(long *)(lVar3 + 0x20) = lVar2;
        }
        *(long *)(lVar2 + 0x20) = param_2;
        *(long *)(param_2 + 0x28) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x18);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x30) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x20);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) == 0)) goto LAB_00140664;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x30) != 0)) goto LAB_00140812;
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 1;
        *(long *)(lVar1 + 0x20) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x28) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x18) == lVar1) {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x18) = lVar1;
        *(long *)(lVar1 + 0x28) = lVar3;
        lVar3 = *(long *)(param_2 + 0x18);
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
        if (lVar2 != 0) goto LAB_00140825;
      }
      else {
LAB_00140812:
        lVar3 = *(long *)(param_2 + 0x18);
        *(undefined4 *)(lVar1 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
LAB_00140825:
        *(undefined4 *)(lVar2 + 0x30) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x20);
      *(long *)(param_2 + 0x18) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x28) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x28);
      *(long *)(lVar3 + 0x28) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x28) + 0x18) == param_2) {
        *(long *)(lVar2 + 0x18) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x20) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x20) = param_2;
      *(long *)(param_2 + 0x28) = lVar3;
      goto joined_r0x0014086e;
    }
    lVar2 = *(long *)(param_2 + 0x20);
    lVar3 = *(long *)(lVar2 + 0x18);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x30) == 1) {
      *(undefined4 *)(lVar2 + 0x30) = 0;
      *(undefined4 *)(param_2 + 0x30) = 1;
      *(long *)(param_2 + 0x20) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x28) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x28);
      *(long *)(lVar2 + 0x28) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x18) == param_2) {
        *(long *)(lVar4 + 0x18) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x20) = lVar2;
        lVar1 = *(long *)(param_2 + 0x20);
      }
      *(long *)(lVar2 + 0x18) = param_2;
      lVar3 = *(long *)(lVar1 + 0x18);
      *(long *)(param_2 + 0x28) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x30) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x20);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x30) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 1;
        *(long *)(lVar1 + 0x18) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x28) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x18) == lVar1) {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar1;
        lVar4 = *(long *)(param_2 + 0x20);
        *(long *)(lVar1 + 0x28) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x20);
        *(undefined4 *)(lVar4 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
        if (lVar2 != 0) goto LAB_001406e0;
        goto LAB_001406e7;
      }
LAB_001406cf:
      lVar4 = *(long *)(param_2 + 0x20);
      *(undefined4 *)(lVar1 + 0x30) = *(undefined4 *)(param_2 + 0x30);
      *(undefined4 *)(param_2 + 0x30) = 0;
LAB_001406e0:
      *(undefined4 *)(lVar2 + 0x30) = 0;
LAB_001406e7:
      lVar2 = *(long *)(lVar4 + 0x18);
      *(long *)(param_2 + 0x20) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x28) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x28);
      *(long *)(lVar4 + 0x28) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x18) == param_2) {
        *(long *)(lVar2 + 0x18) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x20) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x18) = param_2;
      *(long *)(param_2 + 0x28) = lVar4;
joined_r0x0014086e:
      if (param_3 == 0) {
        return;
      }
LAB_0014072b:
      *(undefined4 *)(param_3 + 0x30) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x20);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x30) != 0)) goto LAB_001406cf;
LAB_00140664:
    *(undefined4 *)(lVar1 + 0x30) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x28);
  } while( true );
}



long hooks_tree_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x20);
  if (*(long *)(param_2 + 0x18) == 0) {
    lVar7 = *(long *)(param_2 + 0x28);
    iVar4 = *(int *)(param_2 + 0x30);
    if (lVar6 != 0) goto LAB_00140a9c;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x18);
      } while (*(long *)(lVar5 + 0x18) != 0);
      lVar7 = *(long *)(lVar5 + 0x28);
      lVar6 = *(long *)(lVar5 + 0x20);
      iVar4 = *(int *)(lVar5 + 0x30);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x28) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x28);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x18) == lVar5) {
        *(long *)(lVar7 + 0x18) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x20) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x1c);
      uVar2 = *(undefined4 *)(param_2 + 0x20);
      uVar3 = *(undefined4 *)(param_2 + 0x24);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x18) = *(undefined4 *)(param_2 + 0x18);
      *(undefined4 *)(lVar5 + 0x1c) = uVar1;
      *(undefined4 *)(lVar5 + 0x20) = uVar2;
      *(undefined4 *)(lVar5 + 0x24) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x2c);
      uVar2 = *(undefined4 *)(param_2 + 0x30);
      uVar3 = *(undefined4 *)(param_2 + 0x34);
      *(undefined4 *)(lVar5 + 0x28) = *(undefined4 *)(param_2 + 0x28);
      *(undefined4 *)(lVar5 + 0x2c) = uVar1;
      *(undefined4 *)(lVar5 + 0x30) = uVar2;
      *(undefined4 *)(lVar5 + 0x34) = uVar3;
      lVar8 = *(long *)(param_2 + 0x28);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x18) == param_2) {
        *(long *)(lVar8 + 0x18) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x20) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x18) + 0x28) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x20) != 0) {
        *(long *)(*(long *)(param_2 + 0x20) + 0x28) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x28)) {
      }
      goto joined_r0x00140ab1;
    }
    lVar7 = *(long *)(param_2 + 0x28);
    iVar4 = *(int *)(param_2 + 0x30);
    lVar6 = *(long *)(param_2 + 0x18);
LAB_00140a9c:
    *(long *)(lVar6 + 0x28) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x18) == param_2) {
    *(long *)(lVar7 + 0x18) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x20) = lVar6;
  }
joined_r0x00140ab1:
  if (iVar4 == 0) {
    hooks_tree_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



void FUN_00140b30(long *param_1,void **param_2)

{
  hooks_tree_RB_REMOVE(param_1,(long)param_2);
  cmd_list_free((int *)param_2[2]);
  free(*param_2);
  free(param_2);
  return;
}



char ** hooks_tree_RB_INSERT(char **param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  
  if ((char **)*param_1 == (char **)0x0) {
    param_2[5] = (char *)0x0;
    param_2[4] = (char *)0x0;
    param_2[3] = (char *)0x0;
    *(undefined4 *)(param_2 + 6) = 1;
    *param_1 = (char *)param_2;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    do {
      ppcVar3 = ppcVar1;
      iVar2 = strcmp(__s1,*ppcVar3);
      if (iVar2 < 0) {
        ppcVar1 = (char **)ppcVar3[3];
      }
      else {
        if (iVar2 == 0) {
          return ppcVar3;
        }
        ppcVar1 = (char **)ppcVar3[4];
      }
    } while (ppcVar1 != (char **)0x0);
    param_2[5] = (char *)ppcVar3;
    param_2[4] = (char *)0x0;
    param_2[3] = (char *)0x0;
    *(undefined4 *)(param_2 + 6) = 1;
    if (iVar2 < 0) {
      ppcVar3[3] = (char *)param_2;
    }
    else {
      ppcVar3[4] = (char *)param_2;
    }
  }
  hooks_tree_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (char **)0x0;
}



char ** hooks_tree_RB_FIND(char **param_1,char **param_2)

{
  char *__s1;
  int iVar1;
  char **ppcVar2;
  
  ppcVar2 = (char **)*param_1;
  if (ppcVar2 != (char **)0x0) {
    __s1 = *param_2;
    do {
      while( true ) {
        iVar1 = strcmp(__s1,*ppcVar2);
        if (iVar1 < 0) break;
        if (iVar1 == 0) {
          return ppcVar2;
        }
        ppcVar2 = (char **)ppcVar2[4];
        if (ppcVar2 == (char **)0x0) {
          return (char **)0x0;
        }
      }
      ppcVar2 = (char **)ppcVar2[3];
    } while (ppcVar2 != (char **)0x0);
  }
  return ppcVar2;
}



char ** hooks_tree_RB_NFIND(long *param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  char **ppcVar4;
  
  if ((char **)*param_1 == (char **)0x0) {
    ppcVar4 = (char **)0x0;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    ppcVar4 = (char **)0x0;
    do {
      while( true ) {
        ppcVar3 = ppcVar1;
        iVar2 = strcmp(__s1,*ppcVar3);
        if (-1 < iVar2) break;
        ppcVar1 = (char **)ppcVar3[3];
        ppcVar4 = ppcVar3;
        if ((char **)ppcVar3[3] == (char **)0x0) {
          return ppcVar3;
        }
      }
      if (iVar2 == 0) {
        return ppcVar3;
      }
      ppcVar1 = (char **)ppcVar3[4];
    } while ((char **)ppcVar3[4] != (char **)0x0);
  }
  return ppcVar4;
}



long hooks_tree_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x20);
  if (*(long *)(param_1 + 0x20) == 0) {
    lVar2 = *(long *)(param_1 + 0x28);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x18) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x20))) {
      while (lVar1 = *(long *)(lVar2 + 0x28), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x20);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x18);
    } while (*(long *)(lVar2 + 0x18) != 0);
  }
  return lVar2;
}



long hooks_tree_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x18);
  if (*(long *)(param_1 + 0x18) == 0) {
    lVar2 = *(long *)(param_1 + 0x28);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x20) != param_1)) &&
       (*(long *)(lVar2 + 0x18) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x28), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x18) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x20);
    } while (*(long *)(lVar2 + 0x20) != 0);
  }
  return lVar2;
}



long hooks_tree_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x20);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x18);
    }
  }
  return lVar2;
}



undefined8 hooks_get(long param_1)

{
  undefined8 uVar1;
  
  uVar1 = global_hooks;
  if (param_1 != 0) {
    uVar1 = *(undefined8 *)(param_1 + 0x100);
  }
  return uVar1;
}



void hooks_create(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  undefined8 *puVar1;
  
  puVar1 = (undefined8 *)
           xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x10,param_11,
                   param_12,param_13,param_14);
  *puVar1 = 0;
  puVar1[1] = param_9;
  return;
}



void hooks_free(long *param_1)

{
  void **ppvVar1;
  void **ppvVar2;
  
  ppvVar2 = (void **)*param_1;
  if ((void **)*param_1 != (void **)0x0) {
    do {
      ppvVar1 = ppvVar2;
      ppvVar2 = (void **)ppvVar1[3];
    } while ((void **)ppvVar1[3] != (void **)0x0);
    do {
      ppvVar2 = ppvVar1;
      ppvVar1 = (void **)hooks_tree_RB_NEXT((long)ppvVar1);
      FUN_00140b30(param_1,ppvVar2);
    } while (ppvVar1 != (void **)0x0);
  }
  free(param_1);
  return;
}



long hooks_first(long *param_1)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *param_1;
  if (*param_1 != 0) {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x18);
    } while (lVar1 != 0);
    return lVar2;
  }
  return 0;
}



long hooks_next(long param_1)

{
  long lVar1;
  
  lVar1 = hooks_tree_RB_NEXT(param_1);
  return lVar1;
}



void hooks_add(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              char **param_9,char *param_10,int *param_11,undefined8 param_12,undefined8 param_13,
              undefined8 param_14)

{
  char **ppcVar1;
  char *extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar2;
  undefined8 uVar3;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined auVar5 [16];
  char *local_68 [7];
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_68[0] = param_10;
  ppcVar1 = hooks_tree_RB_FIND(param_9,local_68);
  uVar2 = extraout_RDX;
  uVar4 = extraout_XMM0_Da;
  if (ppcVar1 != (char **)0x0) {
    uVar4 = FUN_00140b30((long *)param_9,ppcVar1);
    uVar2 = extraout_RDX_00;
  }
  uVar3 = 0x38;
  auVar5 = xcalloc(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x38,uVar2,
                   param_12,param_13,param_14);
  ppcVar1 = auVar5._0_8_;
  xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,param_10,uVar3,auVar5._8_8_,param_12,param_13,param_14);
  ppcVar1[2] = (char *)param_11;
  *ppcVar1 = extraout_RAX;
  *param_11 = *param_11 + 1;
  hooks_tree_RB_INSERT(param_9,ppcVar1);
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void hooks_remove(char **param_1,char *param_2)

{
  char **ppcVar1;
  long in_FS_OFFSET;
  char *local_48 [7];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_48[0] = param_2;
  ppcVar1 = hooks_tree_RB_FIND(param_1,local_48);
  if (ppcVar1 != (char **)0x0) {
    FUN_00140b30((long *)param_1,ppcVar1);
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char ** hooks_find(char **param_1,char *param_2)

{
  char **ppcVar1;
  long in_FS_OFFSET;
  char *local_58 [7];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_58[0] = param_2;
  ppcVar1 = hooks_tree_RB_FIND(param_1,local_58);
  do {
    if (ppcVar1 != (char **)0x0) {
LAB_00141023:
      if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
        return ppcVar1;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    param_1 = (char **)param_1[1];
    if (param_1 == (char **)0x0) {
      ppcVar1 = (char **)0x0;
      goto LAB_00141023;
    }
    ppcVar1 = hooks_tree_RB_FIND(param_1,local_58);
  } while( true );
}



undefined8
hooks_run(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
         undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,char **param_9,
         undefined8 param_10,long param_11,undefined8 param_12,undefined8 param_13,
         undefined8 param_14,undefined param_15)

{
  char *__ptr;
  char in_AL;
  char **ppcVar1;
  undefined8 *puVar2;
  undefined8 uVar3;
  undefined8 extraout_RDX;
  char *pcVar4;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar5;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined in_stack_fffffffffffffef8;
  char *local_100;
  undefined4 local_f8;
  undefined4 local_f4;
  undefined *local_f0;
  undefined *local_e8;
  long local_e0;
  undefined local_d8 [32];
  undefined8 local_b8;
  undefined8 local_b0;
  undefined local_a8 [16];
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  
  if (in_AL != '\0') {
    local_a8._8_8_ = in_XMM0_Qb;
    local_a8._0_8_ = param_1;
    local_98._4_12_ = in_register_00001224;
    local_98._0_4_ = param_2;
    local_88._4_12_ = in_register_00001244;
    local_88._0_4_ = param_3;
    local_78._4_12_ = in_register_00001264;
    local_78._0_4_ = param_4;
    local_68._4_12_ = in_register_00001284;
    local_68._0_4_ = param_5;
    local_58._4_12_ = in_register_000012a4;
    local_58._0_4_ = param_6;
    local_48._4_12_ = in_register_000012c4;
    local_48._0_4_ = param_7;
    local_38._4_12_ = in_register_000012e4;
    local_38._0_4_ = param_8;
  }
  local_e0 = *(long *)(in_FS_OFFSET + 0x28);
  local_f0 = &param_15;
  local_f8 = 0x20;
  local_e8 = local_d8;
  local_f4 = 0x30;
  local_b8 = param_13;
  local_b0 = param_14;
  xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)&local_100,
             param_12,&local_f8,param_12,param_13,param_14);
  __ptr = local_100;
  ppcVar1 = hooks_find(param_9,local_100);
  if (ppcVar1 == (char **)0x0) {
    free(__ptr);
    uVar3 = 0xffffffff;
  }
  else {
    pcVar4 = "running hook %s";
    log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "running hook %s",__ptr,param_12,param_13,param_14,in_stack_fffffffffffffef8);
    free(local_100);
    puVar2 = cmdq_new(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      param_10,pcVar4,extraout_RDX,param_12,param_13,param_14);
    *(uint *)((long)puVar2 + 4) = *(uint *)((long)puVar2 + 4) | 4;
    uVar5 = extraout_XMM0_Da_01;
    if (param_11 != 0) {
      uVar5 = cmd_find_copy_state((long)(puVar2 + 8),param_11);
    }
    puVar2[7] = 0;
    cmdq_run(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(int *)puVar2,
             (int *)ppcVar1[2],(undefined4 *)0x0,param_12,param_13,param_14);
    cmdq_free((int *)puVar2);
    uVar3 = 0;
  }
  if (local_e0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
hooks_wait(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,char **param_9
          ,int *param_10,long param_11,undefined8 param_12,undefined8 param_13,undefined8 param_14,
          undefined param_15)

{
  int *piVar1;
  char *__ptr;
  char in_AL;
  char **ppcVar2;
  undefined8 *puVar3;
  undefined8 uVar4;
  int *piVar5;
  undefined8 extraout_RDX;
  char *pcVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar7;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined in_stack_fffffffffffffef8;
  char *local_100;
  undefined4 local_f8;
  undefined4 local_f4;
  undefined *local_f0;
  undefined *local_e8;
  long local_e0;
  undefined local_d8 [32];
  undefined8 local_b8;
  undefined8 local_b0;
  undefined local_a8 [16];
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  
  if (in_AL != '\0') {
    local_a8._8_8_ = in_XMM0_Qb;
    local_a8._0_8_ = param_1;
    local_98._4_12_ = in_register_00001224;
    local_98._0_4_ = param_2;
    local_88._4_12_ = in_register_00001244;
    local_88._0_4_ = param_3;
    local_78._4_12_ = in_register_00001264;
    local_78._0_4_ = param_4;
    local_68._4_12_ = in_register_00001284;
    local_68._0_4_ = param_5;
    local_58._4_12_ = in_register_000012a4;
    local_58._0_4_ = param_6;
    local_48._4_12_ = in_register_000012c4;
    local_48._0_4_ = param_7;
    local_38._4_12_ = in_register_000012e4;
    local_38._0_4_ = param_8;
  }
  local_e0 = *(long *)(in_FS_OFFSET + 0x28);
  local_f0 = &param_15;
  local_f8 = 0x20;
  local_e8 = local_d8;
  local_f4 = 0x30;
  local_b8 = param_13;
  local_b0 = param_14;
  xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)&local_100,
             param_12,&local_f8,param_12,param_13,param_14);
  __ptr = local_100;
  ppcVar2 = hooks_find(param_9,local_100);
  if (ppcVar2 == (char **)0x0) {
    free(__ptr);
    uVar4 = 0xffffffff;
  }
  else {
    pcVar6 = "running hook %s (parent %p)";
    piVar5 = param_10;
    log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "running hook %s (parent %p)",__ptr,param_10,param_13,param_14,
             in_stack_fffffffffffffef8);
    free(local_100);
    puVar3 = cmdq_new(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      *(undefined8 *)(param_10 + 2),pcVar6,extraout_RDX,piVar5,param_13,param_14);
    *(uint *)((long)puVar3 + 4) = *(uint *)((long)puVar3 + 4) | 4;
    uVar7 = extraout_XMM0_Da_01;
    if (param_11 != 0) {
      uVar7 = cmd_find_copy_state((long)(puVar3 + 8),param_11);
    }
    puVar3[7] = param_10;
    puVar3[0x23] = FUN_00140340;
    piVar1 = (int *)ppcVar2[2];
    puVar3[0x24] = param_10;
    *param_10 = *param_10 + 1;
    cmdq_run(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(int *)puVar3,piVar1,
             (undefined4 *)0x0,piVar5,param_13,param_14);
    uVar4 = 0;
  }
  if (local_e0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void input_key_mouse(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    uint *param_9,long param_10)

{
  byte *pbVar1;
  bool bVar2;
  int iVar3;
  uint uVar4;
  undefined7 extraout_var;
  undefined8 uVar5;
  long lVar6;
  uint *puVar7;
  undefined8 uVar8;
  ulong in_R9;
  long lVar9;
  ulong uVar10;
  ulong uVar11;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined in_stack_ffffffffffffff98;
  uint local_60;
  uint local_5c;
  byte local_58 [40];
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(byte *)(*(long *)(param_9 + 0x50) + 0x30) & 0x60) != 0) {
    bVar2 = window_pane_visible((long)param_9);
    if ((int)CONCAT71(extraout_var,bVar2) != 0) {
      uVar8 = 0;
      puVar7 = &local_5c;
      uVar5 = cmd_mouse_at((long)param_9,param_10,(int *)&local_60,(int *)puVar7,0);
      if (((int)uVar5 == 0) &&
         ((uVar4 = *(uint *)(*(long *)(param_9 + 0x50) + 0x30), (uVar4 & 0x40) != 0 ||
          ((*(byte *)(param_10 + 0x1c) & 0x20) == 0)))) {
        if ((*(int *)(param_10 + 0x38) == 0x20) || ((uVar4 & 0x200) == 0)) {
          if ((uVar4 & 0x100) == 0) {
            if (0xdf < *(uint *)(param_10 + 0x1c)) goto LAB_0014133b;
            iVar3 = xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,local_58,0x28,&DAT_0017b37e,puVar7,uVar8,in_R9,
                              in_stack_ffffffffffffff98);
            lVar9 = (long)iVar3;
            local_58[lVar9] = (char)*(undefined4 *)(param_10 + 0x1c) + 0x20;
            local_58[lVar9 + 1] = (char)local_60 + 0x21;
            local_58[lVar9 + 2] = (char)local_5c + 0x21;
            uVar11 = lVar9 + 3U & 0xffffffff;
            uVar10 = lVar9 + 3U;
            uVar12 = extraout_XMM0_Da_01;
          }
          else {
            if (((0x7df < *(uint *)(param_10 + 0x1c)) || (0x7de < local_60)) || (0x7de < local_5c))
            goto LAB_0014133b;
            iVar3 = xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,local_58,0x28,&DAT_0017b37e,puVar7,uVar8,in_R9,
                              in_stack_ffffffffffffff98);
            lVar9 = (long)iVar3;
            pbVar1 = local_58 + lVar9;
            uVar4 = *(int *)(param_10 + 0x1c) + 0x20;
            if (uVar4 < 0x80) {
              *pbVar1 = (byte)uVar4;
              lVar6 = 1;
            }
            else {
              local_58[lVar9 + 1] = (byte)uVar4 & 0x3f | 0x80;
              lVar6 = 2;
              *pbVar1 = (byte)(uVar4 >> 6) | 0xc0;
            }
            lVar9 = lVar9 + lVar6;
            pbVar1 = local_58 + lVar9;
            local_60 = local_60 + 0x21;
            if (local_60 < 0x80) {
              *pbVar1 = (byte)local_60;
              lVar6 = 1;
            }
            else {
              local_58[lVar9 + 1] = (byte)local_60 & 0x3f | 0x80;
              lVar6 = 2;
              *pbVar1 = (byte)(local_60 >> 6) | 0xc0;
            }
            lVar9 = lVar9 + lVar6;
            pbVar1 = local_58 + lVar9;
            local_5c = local_5c + 0x21;
            if (local_5c < 0x80) {
              *pbVar1 = (byte)local_5c;
              lVar6 = 1;
            }
            else {
              local_58[lVar9 + 1] = (byte)local_5c & 0x3f | 0x80;
              lVar6 = 2;
              *pbVar1 = (byte)(local_5c >> 6) | 0xc0;
            }
            uVar11 = lVar9 + lVar6 & 0xffffffff;
            uVar10 = lVar9 + lVar6;
            uVar12 = extraout_XMM0_Da_00;
          }
        }
        else {
          in_R9 = (ulong)(local_5c + 1);
          iVar3 = xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                            ,local_58,0x28,&DAT_0017b370,(ulong)*(uint *)(param_10 + 0x3c),
                            (ulong)(local_60 + 1),in_R9,(char)*(int *)(param_10 + 0x38));
          uVar11 = (ulong)iVar3;
          uVar10 = uVar11;
          uVar12 = extraout_XMM0_Da_02;
        }
        log_emit(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "writing mouse %.*s to %%%u",uVar11,local_58,(ulong)*param_9,in_R9,
                 in_stack_ffffffffffffff98);
        bufferevent_write(*(undefined8 *)(param_9 + 0x20),local_58,uVar10);
      }
    }
  }
LAB_0014133b:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void input_key(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              uint *param_9,ulong param_10,long param_11,undefined8 param_12,undefined8 param_13,
              undefined8 param_14)

{
  char *pcVar1;
  char *pcVar2;
  ulong *puVar3;
  size_t sVar4;
  ulong uVar5;
  uint uVar6;
  undefined8 extraout_RDX;
  char *pcVar7;
  undefined8 *puVar8;
  ulong uVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined8 uVar11;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffa8;
  undefined local_4c;
  undefined local_42;
  long local_40;
  
  uVar6 = *param_9;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar1 = key_string_lookup_key
                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10);
  uVar5 = (ulong)uVar6;
  uVar11 = log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                    "writing key 0x%llx (%s) to %%%u",param_10,pcVar1,uVar5,param_14,
                    in_stack_ffffffffffffffa8);
  if ((param_10 & 0xffff1fffffffffff) - 0x100000000002 < 0x2b) {
    if (((param_11 != 0) && (*(uint *)(param_11 + 0x34) != 0xffffffff)) &&
       (*(uint *)(param_11 + 0x34) == *param_9)) {
      input_key_mouse(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      param_11);
    }
  }
  else {
    uVar9 = param_10 & 0xffffdfffffffffff;
    if (uVar9 < 0x80) {
      uVar11 = *(undefined8 *)(param_9 + 0x20);
      if ((param_10 >> 0x2d & 1) != 0) {
        bufferevent_write(uVar11,&DAT_0017b39d,1);
        uVar11 = *(undefined8 *)(param_9 + 0x20);
      }
      local_4c = (undefined)uVar9;
      bufferevent_write(uVar11,&local_4c,1);
    }
    else if (uVar9 - 0x80 < 0xfffffffff80) {
      uVar11 = utf8_split((wchar_t)uVar9,(undefined8 *)&local_4c);
      if ((int)uVar11 == 1) {
        uVar11 = *(undefined8 *)(param_9 + 0x20);
        if ((param_10 >> 0x2d & 1) != 0) {
          bufferevent_write(uVar11,&DAT_0017b39d,1);
          uVar11 = *(undefined8 *)(param_9 + 0x20);
        }
        bufferevent_write(uVar11,&local_4c,local_42);
      }
    }
    else {
      pcVar7 = "xterm-keys";
      pcVar2 = options_get_number(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  *(char ***)(*(long *)(param_9 + 2) + 0x188),"xterm-keys",
                                  uVar9 - 0x80,pcVar1,uVar5,param_14);
      uVar10 = extraout_XMM0_Da_00;
      if ((pcVar2 == (char *)0x0) ||
         (pcVar1 = xterm_keys_lookup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,
                                     param_4,param_5,param_6,param_7,param_8,param_10,pcVar7,
                                     extraout_RDX,pcVar1,uVar5,param_14),
         uVar10 = extraout_XMM0_Da_02, pcVar1 == (char *)0x0)) {
        puVar8 = &input_keys;
        uVar5 = 0;
        uVar9 = 0;
        puVar3 = &input_keys;
        do {
          if ((((uVar5 & 1) == 0) || ((*(byte *)(*(long *)(param_9 + 0x50) + 0x30) & 8) != 0)) &&
             (((uVar5 & 2) == 0 ||
              (uVar5 = *(ulong *)(param_9 + 0x50), (*(byte *)(uVar5 + 0x30) & 4) != 0)))) {
            uVar5 = *puVar3;
            if (((param_10 & 0x200000000000) == 0) || ((uVar5 | 0x200000000000) != param_10)) {
              if (param_10 != uVar5) goto LAB_00141700;
              pcVar1 = (&PTR_DAT_00196e48)[uVar9 * 3];
              sVar4 = strlen(pcVar1);
              log_emit(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3
                       ,"found key 0x%llx: \"%s\"",param_10,pcVar1,puVar8,param_14,
                       in_stack_ffffffffffffffa8);
              if ((param_10 & 0x200000000000) != 0) goto LAB_00141865;
            }
            else {
              pcVar1 = (&PTR_DAT_00196e48)[uVar9 * 3];
              sVar4 = strlen(pcVar1);
              log_emit(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3
                       ,"found key 0x%llx: \"%s\"",param_10,pcVar1,puVar8,param_14,
                       in_stack_ffffffffffffffa8);
LAB_00141865:
              bufferevent_write(*(undefined8 *)(param_9 + 0x20),&DAT_0017b39d,1);
            }
            bufferevent_write(*(undefined8 *)(param_9 + 0x20),pcVar1,sVar4);
            goto LAB_00141648;
          }
LAB_00141700:
          uVar6 = (int)uVar9 + 1;
          uVar9 = (ulong)uVar6;
          if (uVar6 == 0x4c) goto LAB_00141888;
          uVar5 = (ulong)*(uint *)(puVar3 + 5);
          puVar3 = puVar3 + 3;
        } while( true );
      }
      sVar4 = strlen(pcVar1);
      bufferevent_write(*(undefined8 *)(param_9 + 0x20),pcVar1,sVar4);
      free(pcVar1);
    }
  }
LAB_00141648:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
LAB_00141888:
  log_emit(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"key 0x%llx missing",
           param_10,uVar5,&input_keys,param_14,in_stack_ffffffffffffffa8);
  goto LAB_00141648;
}



void input_clear(long param_1)

{
  *(undefined *)(param_1 + 0x60) = 0;
  *(undefined8 *)(param_1 + 0x68) = 0;
  *(undefined *)(param_1 + 0x70) = 0;
  *(undefined8 *)(param_1 + 0xb0) = 0;
  **(undefined **)(param_1 + 0xb8) = 0;
  *(undefined8 *)(param_1 + 0xc0) = 0;
  *(uint *)(param_1 + 0x144) = *(uint *)(param_1 + 0x144) & 0xfffffffe;
  return;
}



undefined8 input_intermediate(long param_1)

{
  long lVar1;
  
  lVar1 = *(long *)(param_1 + 0x68);
  if (lVar1 != 3) {
    *(long *)(param_1 + 0x68) = lVar1 + 1;
    *(char *)(param_1 + 0x60 + lVar1) = (char)*(undefined4 *)(param_1 + 0x140);
    *(undefined *)(param_1 + 0x61 + lVar1) = 0;
    return 0;
  }
  *(uint *)(param_1 + 0x144) = *(uint *)(param_1 + 0x144) | 1;
  return 0;
}



undefined8 input_parameter(long param_1)

{
  long lVar1;
  
  lVar1 = *(long *)(param_1 + 0xb0);
  if (lVar1 != 0x3f) {
    *(long *)(param_1 + 0xb0) = lVar1 + 1;
    *(char *)(param_1 + 0x70 + lVar1) = (char)*(undefined4 *)(param_1 + 0x140);
    *(undefined *)(param_1 + 0x71 + lVar1) = 0;
    return 0;
  }
  *(uint *)(param_1 + 0x144) = *(uint *)(param_1 + 0x144) | 1;
  return 0;
}



void input_enter_osc(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                    undefined8 param_13,undefined8 param_14)

{
  undefined1 unaff_BL;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s","input_enter_osc",
           param_12,param_13,param_14,unaff_BL);
  *(undefined *)(param_9 + 0x60) = 0;
  *(undefined8 *)(param_9 + 0x68) = 0;
  *(undefined *)(param_9 + 0x70) = 0;
  *(undefined8 *)(param_9 + 0xb0) = 0;
  **(undefined **)(param_9 + 0xb8) = 0;
  *(undefined8 *)(param_9 + 0xc0) = 0;
  *(uint *)(param_9 + 0x144) = *(uint *)(param_9 + 0x144) & 0xfffffffe;
  return;
}



void input_enter_apc(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                    undefined8 param_13,undefined8 param_14)

{
  undefined1 unaff_BL;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s","input_enter_apc",
           param_12,param_13,param_14,unaff_BL);
  *(undefined *)(param_9 + 0x60) = 0;
  *(undefined8 *)(param_9 + 0x68) = 0;
  *(undefined *)(param_9 + 0x70) = 0;
  *(undefined8 *)(param_9 + 0xb0) = 0;
  **(undefined **)(param_9 + 0xb8) = 0;
  *(undefined8 *)(param_9 + 0xc0) = 0;
  *(uint *)(param_9 + 0x144) = *(uint *)(param_9 + 0x144) & 0xfffffffe;
  return;
}



void input_enter_rename(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  undefined1 unaff_BL;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s",
           "input_enter_rename",param_12,param_13,param_14,unaff_BL);
  *(undefined *)(param_9 + 0x60) = 0;
  *(undefined8 *)(param_9 + 0x68) = 0;
  *(undefined *)(param_9 + 0x70) = 0;
  *(undefined8 *)(param_9 + 0xb0) = 0;
  **(undefined **)(param_9 + 0xb8) = 0;
  *(undefined8 *)(param_9 + 0xc0) = 0;
  *(uint *)(param_9 + 0x144) = *(uint *)(param_9 + 0x144) & 0xfffffffe;
  return;
}



undefined8
input_input(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
           undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
           undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
           undefined8 param_14)

{
  long lVar1;
  long lVar2;
  ulong uVar3;
  ulong uVar4;
  undefined4 extraout_XMM0_Da;
  
  lVar2 = *(long *)(param_9 + 0xc0);
  uVar3 = lVar2 + 1;
  if (*(ulong *)(param_9 + 200) <= uVar3) {
    uVar4 = *(ulong *)(param_9 + 200) * 2;
    if (uVar4 < 0x100001) {
      lVar1 = *(long *)(param_9 + 0xb8);
      do {
        lVar1 = xrealloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,uVar4
                         ,uVar3,param_12,param_13,param_14);
        *(ulong *)(param_9 + 200) = uVar4;
        *(long *)(param_9 + 0xb8) = lVar1;
        lVar2 = *(long *)(param_9 + 0xc0);
        uVar3 = lVar2 + 1;
        if (uVar3 < uVar4) goto LAB_00141b05;
        uVar4 = uVar4 * 2;
        param_1 = extraout_XMM0_Da;
      } while (uVar4 < 0x100001);
    }
    *(uint *)(param_9 + 0x144) = *(uint *)(param_9 + 0x144) | 1;
    return 0;
  }
  lVar1 = *(long *)(param_9 + 0xb8);
LAB_00141b05:
  *(ulong *)(param_9 + 0xc0) = uVar3;
  *(char *)(lVar1 + lVar2) = (char)*(undefined4 *)(param_9 + 0x140);
  *(undefined *)(*(long *)(param_9 + 0xb8) + *(long *)(param_9 + 0xc0)) = 0;
  return 0;
}



undefined8 input_print(long param_1)

{
  int iVar1;
  byte bVar2;
  
  iVar1 = *(int *)(param_1 + 0x34);
  if (*(int *)(param_1 + 0x2c) == 0) {
    iVar1 = *(int *)(param_1 + 0x30);
  }
  bVar2 = *(byte *)(param_1 + 0x19) & 0x7f;
  if (iVar1 == 1) {
    bVar2 = *(byte *)(param_1 + 0x19) | 0x80;
  }
  *(byte *)(param_1 + 0x19) = bVar2;
  utf8_set((undefined *)(param_1 + 0x20),*(undefined *)(param_1 + 0x140));
  screen_write_cell(param_1 + 8,param_1 + 0x18);
  *(byte *)(param_1 + 0x19) = *(byte *)(param_1 + 0x19) & 0x7f;
  return 0;
}



undefined8
input_c0_dispatch(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long *param_9)

{
  long *plVar1;
  long lVar2;
  long lVar3;
  uint uVar4;
  ulong uVar5;
  ulong uVar6;
  uint uVar7;
  uint *in_R8;
  undefined8 in_R9;
  undefined8 uVar8;
  undefined in_stack_ffffffffffffffd8;
  
  plVar1 = param_9 + 1;
  lVar2 = *param_9;
  lVar3 = param_9[2];
  uVar8 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: \'%c\'",
                   "input_c0_dispatch",(ulong)*(uint *)(param_9 + 0x28),in_R8,in_R9,
                   in_stack_ffffffffffffffd8);
  uVar5 = (ulong)*(uint *)(param_9 + 0x28);
  uVar6 = (ulong)*(uint *)(param_9 + 0x28);
  switch(uVar6) {
  case 0:
    break;
  default:
    log_emit((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "%s: unknown \'%c\'","input_c0_dispatch",uVar5,in_R8,in_R9,in_stack_ffffffffffffffd8);
    break;
  case 7:
    alerts_queue(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*(uint **)(lVar2 + 8)
                 ,1,uVar6,uVar5,in_R8,in_R9);
    return 0;
  case 8:
    screen_write_backspace((long)plVar1);
    return 0;
  case 9:
    uVar4 = *(uint *)(lVar3 + 0x10);
    uVar7 = *(int *)(*(long *)(lVar3 + 8) + 4) - 1;
    if (uVar4 < uVar7) {
      do {
        uVar4 = uVar4 + 1;
        *(uint *)(lVar3 + 0x10) = uVar4;
      } while ((uVar4 < uVar7 &
               ~(byte)((int)(uint)*(byte *)(*(long *)(lVar3 + 0x38) + (ulong)(uVar4 >> 3)) >>
                      ((byte)uVar4 & 7))) != 0);
    }
    break;
  case 10:
  case 0xb:
  case 0xc:
    screen_write_linefeed
              (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)plVar1,0,uVar6,
               uVar5,in_R8,in_R9);
    return 0;
  case 0xd:
    screen_write_carriagereturn((long)plVar1);
    return 0;
  case 0xe:
    *(undefined4 *)((long)param_9 + 0x2c) = 1;
    return 0;
  case 0xf:
    *(undefined4 *)((long)param_9 + 0x2c) = 0;
    return 0;
  }
  return 0;
}



undefined8
input_dcs_dispatch(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9)

{
  ulong uVar1;
  char *__s1;
  int iVar2;
  undefined8 uVar3;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined1 in_stack_ffffffffffffffd8;
  undefined4 local_26;
  undefined2 local_22;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_26 = 0x78756d74;
  local_22 = 0x3b;
  if ((*(byte *)(param_9 + 0x144) & 1) == 0) {
    uVar3 = *(undefined8 *)(param_9 + 0xb8);
    log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: \"%s\"",
             "input_dcs_dispatch",uVar3,in_R8,in_R9,in_stack_ffffffffffffffd8);
    uVar1 = *(ulong *)(param_9 + 0xc0);
    if (4 < uVar1) {
      __s1 = *(char **)(param_9 + 0xb8);
      iVar2 = strncmp(__s1,(char *)&local_26,5);
      if (iVar2 == 0) {
        screen_write_rawstring
                  (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,param_9 + 8,__s1 + 5,(int)uVar1 + -5,uVar3,in_R8,in_R9);
      }
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return 0;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void input_exit_osc(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long *param_9)

{
  uint uVar1;
  byte bVar2;
  uint uVar3;
  byte *pbVar4;
  ulong uVar5;
  byte *pbVar6;
  byte *pbVar7;
  undefined8 in_R8;
  undefined8 in_R9;
  undefined8 uVar8;
  undefined1 in_stack_00000008;
  undefined1 in_stack_ffffffffffffffe8;
  
  if ((*(byte *)((long)param_9 + 0x144) & 1) != 0) {
    return;
  }
  if ((param_9[0x18] != 0) && (pbVar7 = (byte *)param_9[0x17], (byte)(*pbVar7 - 0x30) < 10)) {
    pbVar4 = pbVar7;
    uVar8 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: \"%s\"",
                     "input_exit_osc",pbVar7,in_R8,in_R9,in_stack_ffffffffffffffe8);
    bVar2 = *pbVar7;
    uVar3 = (uint)bVar2;
    uVar5 = (ulong)(bVar2 - 0x30);
    if (9 < (byte)(bVar2 - 0x30)) {
      pbVar7 = pbVar7 + (bVar2 == 0x3b);
LAB_00141edb:
      screen_set_title(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (void **)param_9[2],(char *)pbVar7,uVar5,pbVar4,in_R8,in_R9);
      server_status_window(*(long *)(*param_9 + 8));
      return;
    }
    pbVar4 = (byte *)0x0;
    do {
      pbVar6 = pbVar7;
      pbVar7 = pbVar6 + 1;
      uVar1 = (uVar3 - 0x30) + (int)pbVar4 * 10;
      pbVar4 = (byte *)(ulong)uVar1;
      uVar3 = (uint)*pbVar7;
      uVar5 = (ulong)(uVar3 - 0x30);
    } while ((byte)(uVar3 - 0x30) < 10);
    if (*pbVar7 == 0x3b) {
      pbVar7 = pbVar6 + 2;
    }
    if (uVar1 != 0xc) {
      if (uVar1 < 0xd) {
        if ((uVar1 & 0xfffffffd) == 0) goto LAB_00141edb;
      }
      else if (uVar1 == 0x70) {
        if (*pbVar7 != 0) {
          return;
        }
        screen_set_cursor_colour
                  (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9[2],"",uVar5
                   ,pbVar4,in_R8,in_R9);
        return;
      }
      log_emit((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "%s: unknown \'%u\'","input_exit_osc",pbVar4,in_R8,in_R9,in_stack_00000008);
      return;
    }
    if (*pbVar7 != 0x3f) {
      screen_set_cursor_colour
                (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9[2],
                 (char *)pbVar7,uVar5,pbVar4,in_R8,in_R9);
      return;
    }
  }
  return;
}



undefined8
input_utf8_close(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  undefined8 *puVar1;
  ulong uVar2;
  undefined4 extraout_XMM0_Da;
  
  puVar1 = (undefined8 *)(param_9 + 0x134);
  uVar2 = utf8_append(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(char *)puVar1
                      ,(ulong)*(byte *)(param_9 + 0x140),param_11,param_12,param_13,param_14);
  if ((int)uVar2 != 1) {
    return 0;
  }
  log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "%s %hhu \'%*s\' (width %hhu)","input_utf8_close",(ulong)*(byte *)(param_9 + 0x13e),
           (ulong)*(byte *)(param_9 + 0x13e),puVar1,*(undefined *)(param_9 + 0x13f));
  utf8_copy((undefined8 *)(param_9 + 0x20),puVar1);
  screen_write_cell(param_9 + 8,param_9 + 0x18);
  return 0;
}



void input_ground(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  undefined4 uVar2;
  
  uVar1 = evbuffer_get_length(*(undefined8 *)(param_9 + 0x150));
  uVar2 = evbuffer_drain(*(undefined8 *)(param_9 + 0x150),uVar1);
  if (*(ulong *)(param_9 + 200) < 0x21) {
    return;
  }
  *(undefined8 *)(param_9 + 200) = 0x20;
  uVar1 = xrealloc(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                   *(undefined8 *)(param_9 + 0xb8),0x20,extraout_RDX,param_12,param_13,param_14);
  *(undefined8 *)(param_9 + 0xb8) = uVar1;
  return;
}



void input_exit_apc(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long *param_9)

{
  undefined8 uVar1;
  long lVar2;
  undefined8 extraout_RDX;
  undefined1 unaff_BL;
  undefined8 in_R8;
  undefined8 in_R9;
  
  if ((*(byte *)((long)param_9 + 0x144) & 1) != 0) {
    return;
  }
  lVar2 = param_9[0x17];
  uVar1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: \"%s\"",
                   "input_exit_apc",lVar2,in_R8,in_R9,unaff_BL);
  screen_set_title(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(void **)param_9[2]
                   ,(char *)param_9[0x17],extraout_RDX,lVar2,in_R8,in_R9);
  server_status_window(*(long *)(*param_9 + 8));
  return;
}



void input_exit_rename(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                      undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  char *pcVar2;
  long lVar3;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined4 extraout_XMM0_Da;
  
  if ((*(byte *)((long)param_9 + 0x144) & 1) != 0) {
    return;
  }
  pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(*(long *)(*param_9 + 8) + 0x188),"allow-rename",param_11,
                              param_12,param_13,param_14);
  if (pcVar2 != (char *)0x0) {
    lVar3 = param_9[0x17];
    uVar1 = log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                     "%s: \"%s\"","input_exit_rename",lVar3,param_13,param_14,unaff_BL);
    uVar1 = window_set_name(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            *(uint **)(*param_9 + 8),(char *)param_9[0x17],extraout_RDX,lVar3,
                            param_13,param_14);
    options_set_number(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       *(char ***)(*(long *)(*param_9 + 8) + 0x188),"automatic-rename",(char *)0x0,
                       lVar3,param_13,param_14);
    server_status_window(*(long *)(*param_9 + 8));
    return;
  }
  return;
}



undefined8
input_utf8_open(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,ulong param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined4 extraout_XMM0_Da;
  
  uVar1 = utf8_open(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    (undefined8 *)(param_9 + 0x134),(uint)*(byte *)(param_9 + 0x140),param_11,
                    param_12,param_13,param_14);
  if ((int)uVar1 == 0) {
    log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s %hhu",
             "input_utf8_open",(ulong)*(byte *)(param_9 + 0x13e),param_13,param_14,unaff_BL);
    return 0;
  }
                    // WARNING: Subroutine does not return
  fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
         "UTF-8 open invalid %#x",(ulong)*(uint *)(param_9 + 0x140),extraout_RDX,param_12,param_13,
         param_14,unaff_BL);
}



undefined8
input_utf8_add(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
              undefined8 param_13,undefined8 param_14)

{
  ulong uVar1;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined4 extraout_XMM0_Da;
  
  uVar1 = utf8_append(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      (char *)(param_9 + 0x134),(ulong)*(byte *)(param_9 + 0x140),param_11,param_12,
                      param_13,param_14);
  if ((int)uVar1 == 0) {
    log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s",
             "input_utf8_add",param_12,param_13,param_14,unaff_BL);
    return 0;
  }
                    // WARNING: Subroutine does not return
  fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
         "UTF-8 add invalid %#x",(ulong)*(uint *)(param_9 + 0x140),extraout_RDX,param_12,param_13,
         param_14,unaff_BL);
}



undefined8 FUN_001421d0(long param_1)

{
  uint uVar1;
  undefined4 uVar2;
  char *pcVar3;
  longlong lVar4;
  undefined8 uVar5;
  int iVar6;
  long in_FS_OFFSET;
  char *local_30;
  char *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_28 = (char *)(param_1 + 0x70);
  do {
    pcVar3 = strsep(&local_28,";");
    if (pcVar3 == (char *)0x0) {
      uVar5 = 0;
      goto LAB_0014225a;
    }
    uVar2 = 0xffffffff;
    if (*pcVar3 != '\0') {
      lVar4 = strtonum(pcVar3,0,0x7fffffff,&local_30);
      uVar2 = (undefined4)lVar4;
      if (local_30 != (char *)0x0) break;
    }
    uVar1 = *(uint *)(param_1 + 0x130);
    iVar6 = uVar1 + 1;
    *(int *)(param_1 + 0x130) = iVar6;
    *(undefined4 *)(param_1 + 0xd0 + (ulong)uVar1 * 4) = uVar2;
  } while (iVar6 != 0x18);
  uVar5 = 0xffffffff;
LAB_0014225a:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int input_table_compare(long param_1,int *param_2)

{
  int iVar1;
  
  if (*(int *)(param_1 + 0x140) != *param_2) {
    return *(int *)(param_1 + 0x140) - *param_2;
  }
  iVar1 = strcmp((char *)(param_1 + 0x60),*(char **)(param_2 + 2));
  return iVar1;
}



void input_reset_cell(long param_1)

{
  *(undefined4 *)(param_1 + 0x2c) = 0;
  *(undefined8 *)(param_1 + 0x30) = 0;
  *(undefined4 *)(param_1 + 0x28) = 0x1010000;
  *(undefined8 *)(param_1 + 0x58) = 0;
  *(undefined4 *)(param_1 + 0x18) = 0x80000;
  *(undefined4 *)(param_1 + 0x1c) = 0x800;
  *(undefined4 *)(param_1 + 0x20) = 0x20;
  *(undefined4 *)(param_1 + 0x24) = 0;
  *(undefined4 *)(param_1 + 0x38) = 0x80000;
  *(undefined4 *)(param_1 + 0x3c) = 0x800;
  *(undefined4 *)(param_1 + 0x40) = 0x20;
  *(undefined4 *)(param_1 + 0x44) = 0;
  *(undefined4 *)(param_1 + 0x48) = *(undefined4 *)(param_1 + 0x28);
  *(undefined4 *)(param_1 + 0x4c) = *(undefined4 *)(param_1 + 0x2c);
  *(undefined4 *)(param_1 + 0x50) = *(undefined4 *)(param_1 + 0x30);
  *(undefined4 *)(param_1 + 0x54) = *(undefined4 *)(param_1 + 0x34);
  return;
}



undefined8 input_esc_dispatch(undefined4 param_1,long param_2)

{
  long lVar1;
  ulong uVar2;
  uint uVar3;
  long lVar4;
  byte *pbVar5;
  uint uVar6;
  undefined4 *puVar7;
  uint *puVar8;
  uint *extraout_RDX;
  undefined8 extraout_RDX_00;
  char *__s2;
  uint *puVar9;
  undefined8 in_R9;
  ulong uVar10;
  ulong uVar11;
  ulong uVar12;
  undefined8 uVar13;
  undefined auVar14 [16];
  undefined extraout_XMM0 [16];
  undefined4 uVar15;
  undefined in_XMM1 [16];
  undefined4 uVar16;
  undefined in_XMM2 [16];
  undefined4 uVar17;
  undefined in_XMM3 [16];
  undefined4 in_XMM4_Da;
  undefined4 in_XMM5_Da;
  undefined4 in_XMM6_Da;
  undefined4 in_XMM7_Da;
  uint *in_stack_ffffffffffffffb8;
  undefined8 extraout_XMM0_Qb;
  
  if ((*(byte *)(param_2 + 0x144) & 1) != 0) {
    return 0;
  }
  puVar8 = (uint *)(param_2 + 0x60);
  __s2 = "%s: \'%c\', %s";
  uVar11 = 0;
  lVar4 = *(long *)(param_2 + 0x10);
  puVar7 = (undefined4 *)(ulong)*(uint *)(param_2 + 0x140);
  puVar9 = puVar8;
  auVar14._0_8_ =
       log_emit(param_1,in_XMM1._0_4_,in_XMM2._0_4_,in_XMM3._0_4_,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,
                in_XMM7_Da,3,"%s: \'%c\', %s","input_esc_dispatch",puVar7,puVar8,in_R9,
                (char)in_stack_ffffffffffffffb8);
  auVar14._8_8_ = extraout_XMM0_Qb;
  uVar3 = *(uint *)(param_2 + 0x140);
  uVar10 = 0xe;
  do {
    uVar12 = uVar10;
    uVar17 = in_XMM3._0_4_;
    uVar16 = in_XMM2._0_4_;
    uVar15 = in_XMM1._0_4_;
    while( true ) {
      if (uVar12 <= uVar11) {
        log_emit(auVar14._0_4_,uVar15,uVar16,uVar17,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,3,
                 "%s: unknown \'%c\'","input_esc_dispatch",(ulong)uVar3,puVar9,in_R9,
                 (char)in_stack_ffffffffffffffb8);
        return 0;
      }
      uVar2 = uVar12 + uVar11;
      uVar10 = uVar2 >> 1;
      lVar1 = ((uVar2 & 0xfffffffffffffffe) + uVar10) * 8;
      puVar9 = (uint *)(input_esc_table + lVar1);
      if (uVar3 == *puVar9) {
        __s2 = *(char **)(input_esc_table + lVar1 + 8);
        uVar6 = strcmp((char *)puVar8,__s2);
        auVar14 = extraout_XMM0;
        in_stack_ffffffffffffffb8 = puVar9;
      }
      else {
        uVar6 = uVar3 - *puVar9;
        puVar7 = (undefined4 *)(ulong)uVar6;
      }
      if ((int)uVar6 < 0) break;
      uVar13 = auVar14._0_8_;
      uVar17 = in_XMM3._0_4_;
      uVar16 = in_XMM2._0_4_;
      uVar15 = in_XMM1._0_4_;
      if (uVar6 == 0) {
        lVar1 = param_2 + 8;
        if (0xd < puVar9[4]) {
          return 0;
        }
        puVar8 = &switchD_0014241d::switchdataD_0017b730;
        switch(puVar9[4]) {
        case 0:
          screen_write_alignmenttest
                    (uVar13,uVar15,uVar16,uVar17,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,lVar1,
                     __s2,&switchD_0014241d::switchdataD_0017b730,puVar7,puVar9,in_R9);
          return 0;
        case 1:
          screen_write_mode_set(lVar1,8);
          return 0;
        case 2:
          screen_write_mode_clear(lVar1,8);
          return 0;
        case 3:
          *(undefined4 *)(param_2 + 0x18) = *(undefined4 *)(param_2 + 0x38);
          *(undefined4 *)(param_2 + 0x1c) = *(undefined4 *)(param_2 + 0x3c);
          *(undefined4 *)(param_2 + 0x20) = *(undefined4 *)(param_2 + 0x40);
          *(undefined4 *)(param_2 + 0x24) = *(undefined4 *)(param_2 + 0x44);
          *(undefined4 *)(param_2 + 0x28) = *(undefined4 *)(param_2 + 0x48);
          *(undefined4 *)(param_2 + 0x2c) = *(undefined4 *)(param_2 + 0x4c);
          *(undefined4 *)(param_2 + 0x30) = *(undefined4 *)(param_2 + 0x50);
          *(undefined4 *)(param_2 + 0x34) = *(undefined4 *)(param_2 + 0x54);
          screen_write_cursormove(lVar1,*(uint *)(param_2 + 0x58),*(uint *)(param_2 + 0x5c));
          return 0;
        case 4:
          *(undefined4 *)(param_2 + 0x38) = *(undefined4 *)(param_2 + 0x18);
          *(undefined4 *)(param_2 + 0x3c) = *(undefined4 *)(param_2 + 0x1c);
          *(undefined4 *)(param_2 + 0x40) = *(undefined4 *)(param_2 + 0x20);
          *(undefined4 *)(param_2 + 0x44) = *(undefined4 *)(param_2 + 0x24);
          *(undefined4 *)(param_2 + 0x48) = *(undefined4 *)(param_2 + 0x28);
          *(undefined4 *)(param_2 + 0x4c) = *(undefined4 *)(param_2 + 0x2c);
          *(undefined4 *)(param_2 + 0x50) = *(undefined4 *)(param_2 + 0x30);
          *(undefined4 *)(param_2 + 0x54) = *(undefined4 *)(param_2 + 0x34);
          *(undefined4 *)(param_2 + 0x58) = *(undefined4 *)(lVar4 + 0x10);
          *(undefined4 *)(param_2 + 0x5c) = *(undefined4 *)(lVar4 + 0x14);
          return 0;
        case 7:
          uVar13 = screen_write_carriagereturn(lVar1);
          puVar8 = extraout_RDX;
        case 6:
          screen_write_linefeed
                    (uVar13,uVar15,uVar16,uVar17,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,lVar1,0
                     ,puVar8,puVar7,puVar9,in_R9);
          return 0;
        case 8:
          screen_write_reverseindex
                    (uVar13,uVar15,uVar16,uVar17,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,lVar1,
                     __s2,&switchD_0014241d::switchdataD_0017b730,puVar7,puVar9,in_R9);
          return 0;
        case 9:
          uVar13 = input_reset_cell(param_2);
          screen_write_reset(uVar13,uVar15,uVar16,uVar17,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da
                             ,lVar1,__s2,extraout_RDX_00,puVar7,(ulong)puVar9,in_R9);
          return 0;
        case 10:
          *(undefined4 *)(param_2 + 0x30) = 0;
          return 0;
        case 0xb:
          *(undefined4 *)(param_2 + 0x30) = 1;
          return 0;
        case 0xc:
          *(undefined4 *)(param_2 + 0x34) = 0;
          return 0;
        case 0xd:
          *(undefined4 *)(param_2 + 0x34) = 1;
          return 0;
        }
        uVar3 = *(uint *)(lVar4 + 0x10);
        if (*(uint *)(*(long *)(lVar4 + 8) + 4) <= uVar3) {
          return 0;
        }
        pbVar5 = (byte *)((ulong)(uVar3 >> 3) + *(long *)(lVar4 + 0x38));
        *pbVar5 = *pbVar5 | (byte)(1 << ((byte)uVar3 & 7));
        return 0;
      }
      uVar11 = uVar10 + 1;
    }
  } while( true );
}



void input_free(long param_1)

{
  void *__ptr;
  
  __ptr = *(void **)(param_1 + 0x108);
  free(*(void **)((long)__ptr + 0xb8));
  evbuffer_free(*(undefined8 *)((long)__ptr + 0x150));
  free(__ptr);
  *(undefined8 *)(param_1 + 0x108) = 0;
  return;
}



void input_reset(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                ulong param_9,int param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  long *plVar1;
  long lVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  undefined8 extraout_RDX_00;
  ulong uVar4;
  ulong uVar5;
  undefined8 uVar6;
  
  lVar2 = *(long *)(param_9 + 0x108);
  input_reset_cell(lVar2);
  if (param_10 != 0) {
    plVar1 = (long *)(lVar2 + 8);
    uVar5 = param_9;
    if (*(long *)(param_9 + 0x1e8) == 0) {
      uVar6 = screen_write_start(plVar1,param_9,param_9 + 0x148);
      uVar3 = extraout_RDX_00;
    }
    else {
      uVar4 = 0;
      uVar6 = screen_write_start(plVar1,0,param_9 + 0x148);
      uVar3 = extraout_RDX;
      param_9 = uVar4;
    }
    screen_write_reset(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)plVar1,
                       param_9,uVar3,param_12,uVar5,param_14);
    screen_write_stop();
  }
  *(undefined *)(lVar2 + 0x60) = 0;
  *(undefined8 *)(lVar2 + 0x68) = 0;
  *(undefined *)(lVar2 + 0x70) = 0;
  *(undefined8 *)(lVar2 + 0xb0) = 0;
  **(undefined **)(lVar2 + 0xb8) = 0;
  *(undefined8 *)(lVar2 + 0xc0) = 0;
  *(undefined1 **)(lVar2 + 0x148) = input_state_ground;
  *(undefined4 *)(lVar2 + 0x144) = 0;
  return;
}



void input_init(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               ulong param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined auVar3 [16];
  
  uVar2 = 0x158;
  auVar3 = xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x158,param_11,
                   param_12,param_13,param_14);
  lVar1 = auVar3._0_8_;
  *(long *)(param_9 + 0x108) = lVar1;
  *(undefined8 *)(lVar1 + 200) = 0x20;
  uVar2 = xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x20,
                  uVar2,auVar3._8_8_,param_12,param_13,param_14);
  *(undefined8 *)(lVar1 + 0xb8) = uVar2;
  auVar3 = evbuffer_new();
  *(long *)(lVar1 + 0x150) = auVar3._0_8_;
  input_reset(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,param_6
              ,param_7,param_8,param_9,0,auVar3._8_8_,param_12,param_13,param_14);
  return;
}



undefined8 input_pending(long param_1)

{
  return *(undefined8 *)(*(long *)(param_1 + 0x108) + 0x150);
}



void input_set_state(long param_1,long param_2)

{
  long lVar1;
  code *UNRECOVERED_JUMPTABLE;
  long lVar2;
  
  lVar1 = *(long *)(param_1 + 0x108);
  UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(lVar1 + 0x148) + 0x10);
  if (UNRECOVERED_JUMPTABLE != (code *)0x0) {
    (*UNRECOVERED_JUMPTABLE)(lVar1);
  }
  lVar2 = *(long *)(param_2 + 0x10);
  *(long *)(lVar1 + 0x148) = lVar2;
  UNRECOVERED_JUMPTABLE = *(code **)(lVar2 + 8);
  if (UNRECOVERED_JUMPTABLE != (code *)0x0) {
                    // WARNING: Could not recover jumptable at 0x001426f6. Too many branches
                    // WARNING: Treating indirect jump as call
    (*UNRECOVERED_JUMPTABLE)(lVar1);
    return;
  }
  return;
}



void input_parse(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                uint *param_13,undefined8 param_14)

{
  byte *pbVar1;
  byte bVar2;
  uint uVar3;
  uint **ppuVar4;
  undefined8 uVar5;
  int iVar6;
  byte *pbVar7;
  long lVar8;
  long lVar9;
  code *pcVar10;
  byte *extraout_RDX;
  byte *extraout_RDX_00;
  byte *extraout_RDX_01;
  byte *extraout_RDX_02;
  byte *pbVar11;
  long lVar12;
  undefined8 uVar13;
  long lVar14;
  int *piVar15;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined auVar17 [16];
  long in_stack_ffffffffffffffa8;
  
  ppuVar4 = *(uint ***)(param_9 + 0x42);
  uVar5 = *(undefined8 *)(*(long *)(param_9 + 0x20) + 0x110);
  auVar17 = evbuffer_get_length(uVar5);
  if (auVar17._0_8_ == 0) {
    return;
  }
  window_update_activity
            (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
             param_7,param_8,*(uint **)(param_9 + 2),param_10,auVar17._8_8_,param_12,param_13,
             param_14);
  param_9[0xc] = param_9[0xc] | 0x40;
  if (*(long *)(param_9 + 0x7a) == 0) {
    screen_write_start((long *)(ppuVar4 + 1),(long)param_9,(long)(param_9 + 0x52));
  }
  else {
    screen_write_start((long *)(ppuVar4 + 1),0,(long)(param_9 + 0x52));
  }
  *ppuVar4 = param_9;
  pbVar7 = (byte *)evbuffer_pullup(uVar5,0xffffffffffffffff);
  lVar8 = evbuffer_get_length(uVar5);
  uVar16 = notify_input(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8,param_9,uVar5);
  pcVar10 = (code *)(ulong)*param_9;
  pbVar1 = pbVar7 + lVar8;
  uVar13 = *(undefined8 *)ppuVar4[0x29];
  lVar14 = lVar8;
  uVar16 = log_emit(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                    "%s: %%%u %s, %zu bytes: %.*s","input_parse",pcVar10,uVar13,lVar8,(char)lVar8);
  pbVar11 = pbVar7;
  if (lVar8 == 0) {
LAB_001428e0:
    screen_write_stop();
    evbuffer_drain(uVar5,lVar8);
    return;
  }
LAB_00142810:
  bVar2 = *pbVar11;
  piVar15 = *(int **)(ppuVar4[0x29] + 6);
  *(uint *)(ppuVar4 + 0x28) = (uint)bVar2;
  iVar6 = *piVar15;
  do {
    if (iVar6 == -1) {
LAB_0014284e:
                    // WARNING: Subroutine does not return
      fatalx(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "no transition from state",(ulong)bVar2,pbVar7,pcVar10,uVar13,lVar14,
             (char)in_stack_ffffffffffffffa8);
    }
    uVar3 = piVar15[1];
    pcVar10 = (code *)(ulong)uVar3;
    if (uVar3 == 0xffffffff) goto LAB_0014284e;
    if ((iVar6 <= (int)(uint)bVar2) && ((int)(uint)bVar2 <= (int)uVar3)) break;
    iVar6 = piVar15[6];
    piVar15 = piVar15 + 6;
  } while( true );
  if ((*(code **)(piVar15 + 2) == (code *)0x0) ||
     (iVar6 = (**(code **)(piVar15 + 2))(ppuVar4), pbVar7 = extraout_RDX,
     uVar16 = extraout_XMM0_Da_01, iVar6 == 0)) {
    lVar9 = *(long *)(piVar15 + 4);
    if (lVar9 != 0) {
      lVar12 = *(long *)(param_9 + 0x42);
      pcVar10 = *(code **)(*(long *)(lVar12 + 0x148) + 0x10);
      if (pcVar10 != (code *)0x0) {
        uVar16 = (*pcVar10)();
        lVar9 = *(long *)(piVar15 + 4);
        pbVar7 = extraout_RDX_00;
        in_stack_ffffffffffffffa8 = lVar12;
      }
      *(long *)(lVar12 + 0x148) = lVar9;
      if (*(code **)(lVar9 + 8) != (code *)0x0) {
        uVar16 = (**(code **)(lVar9 + 8))();
        pbVar7 = extraout_RDX_01;
      }
    }
    if (ppuVar4[0x29] != (uint *)input_state_ground) {
      uVar16 = evbuffer_add(ppuVar4[0x2a],ppuVar4 + 0x28,1);
      pbVar7 = extraout_RDX_02;
    }
  }
  pbVar11 = pbVar11 + 1;
  if (pbVar1 == pbVar11) goto LAB_001428e0;
  goto LAB_00142810;
}



undefined8 input_split(long param_1)

{
  undefined8 uVar1;
  
  *(undefined4 *)(param_1 + 0x130) = 0;
  if (*(long *)(param_1 + 0xb0) != 0) {
    uVar1 = FUN_001421d0(param_1);
    return uVar1;
  }
  return 0;
}



int input_get(long param_1,uint param_2,int param_3,int param_4)

{
  int iVar1;
  
  if (((param_2 < *(uint *)(param_1 + 0x130)) &&
      (iVar1 = *(int *)(param_1 + 0xd0 + (ulong)param_2 * 4), iVar1 != -1)) &&
     (param_4 = param_3, param_3 <= iVar1)) {
    param_4 = iVar1;
  }
  return param_4;
}



void input_reply(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14,undefined param_15)

{
  char *pcVar1;
  char in_AL;
  size_t sVar2;
  long in_FS_OFFSET;
  undefined in_register_00001204 [12];
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  char *local_f0;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [16];
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  
  if (in_AL != '\0') {
    local_98._4_12_ = in_register_00001204;
    local_98._0_4_ = param_1;
    local_88._4_12_ = in_register_00001224;
    local_88._0_4_ = param_2;
    local_78._4_12_ = in_register_00001244;
    local_78._0_4_ = param_3;
    local_68._4_12_ = in_register_00001264;
    local_68._0_4_ = param_4;
    local_58._4_12_ = in_register_00001284;
    local_58._0_4_ = param_5;
    local_48._4_12_ = in_register_000012a4;
    local_48._0_4_ = param_6;
    local_38._4_12_ = in_register_000012c4;
    local_38._0_4_ = param_7;
    local_28._4_12_ = in_register_000012e4;
    local_28._0_4_ = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &param_15;
  local_e8 = 0x10;
  local_d8 = local_c8;
  local_e4 = 0x30;
  local_b8 = param_11;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  __vasprintf_chk(&local_f0,1,param_10,&local_e8);
  pcVar1 = local_f0;
  sVar2 = strlen(local_f0);
  bufferevent_write(*(undefined8 *)(*param_9 + 0x80),pcVar1,sVar2);
  free(local_f0);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void input_csi_dispatch_rm
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  int iVar1;
  undefined8 unaff_RBX;
  long lVar2;
  undefined8 in_R8;
  undefined8 in_R9;
  
  if (*(int *)(param_9 + 0x130) == 0) {
    return;
  }
  lVar2 = 0;
  do {
    while (iVar1 = *(int *)(param_9 + 0xd0 + lVar2 * 4), iVar1 == -1) {
LAB_00142ad7:
      lVar2 = lVar2 + 1;
      param_1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                         "%s: unknown \'%c\'","input_csi_dispatch_rm",
                         (ulong)*(uint *)(param_9 + 0x140),in_R8,in_R9,(char)unaff_RBX);
      if (*(uint *)(param_9 + 0x130) <= (uint)lVar2) {
        return;
      }
    }
    if (iVar1 == 4) {
      param_1 = screen_write_mode_clear(param_9 + 8,2);
    }
    else {
      if (iVar1 != 0x22) goto LAB_00142ad7;
      param_1 = screen_write_mode_set(param_9 + 8,0x80);
    }
    lVar2 = lVar2 + 1;
    if (*(uint *)(param_9 + 0x130) <= (uint)lVar2) {
      return;
    }
  } while( true );
}



void input_csi_dispatch_rm_private
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,undefined8 param_10,undefined8 param_11,ulong param_12,ulong param_13,
               undefined8 param_14)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  undefined8 uVar4;
  int iVar5;
  undefined8 extraout_RDX;
  undefined8 uVar6;
  long lVar7;
  undefined in_stack_ffffffffffffffb8;
  
  lVar3 = *param_9;
  if (*(int *)(param_9 + 0x26) != 0) {
    lVar7 = 0;
    plVar1 = param_9 + 1;
    do {
      iVar2 = *(int *)((long)param_9 + lVar7 * 4 + 0xd0);
      if (iVar2 == -1) {
switchD_00142bb1_caseD_2:
        param_12 = (ulong)*(uint *)(param_9 + 0x28);
        param_1 = log_emit((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                           "%s: unknown \'%c\'","input_csi_dispatch_rm_private",param_12,param_13,
                           param_14,in_stack_ffffffffffffffb8);
      }
      else {
        iVar5 = 0;
        if (-1 < iVar2) {
          iVar5 = iVar2;
        }
        if (0x419 < iVar2) {
          if (iVar2 == 0x7d4) {
            param_1 = screen_write_mode_clear((long)plVar1,0x400);
            goto LAB_00142bd5;
          }
          goto switchD_00142bb1_caseD_2;
        }
        if (iVar2 < 1000) {
          switch(iVar5) {
          case 1:
            param_1 = screen_write_mode_clear((long)plVar1,4);
            break;
          default:
            goto switchD_00142bb1_caseD_2;
          case 3:
            uVar6 = 0;
            uVar4 = screen_write_cursormove((long)plVar1,0,0);
            param_1 = screen_write_clearscreen
                                (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 (long)plVar1,uVar6,extraout_RDX,param_12,param_13,param_14);
            break;
          case 7:
            param_1 = screen_write_mode_clear((long)plVar1,0x10);
            break;
          case 0xc:
            param_1 = screen_write_mode_clear((long)plVar1,0x80);
            break;
          case 0x19:
            param_1 = screen_write_mode_clear((long)plVar1,1);
            break;
          case 0x2f:
switchD_00142bb1_caseD_2f:
            param_1 = window_pane_alternate_off
                                (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 lVar3,param_9 + 3,0,param_12,param_13,param_14);
          }
        }
        else {
          switch(iVar5) {
          case 1000:
          case 0x3e9:
          case 0x3ea:
            param_1 = screen_write_mode_clear((long)plVar1,0x60);
            break;
          default:
            goto switchD_00142bb1_caseD_2;
          case 0x3ec:
            param_1 = screen_write_mode_clear((long)plVar1,0x800);
            break;
          case 0x3ed:
            param_1 = screen_write_mode_clear((long)plVar1,0x100);
            break;
          case 0x3ee:
            param_1 = screen_write_mode_clear((long)plVar1,0x200);
            break;
          case 0x417:
            goto switchD_00142bb1_caseD_2f;
          case 0x419:
            param_1 = window_pane_alternate_off
                                (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 lVar3,param_9 + 3,1,param_12,param_13,param_14);
          }
        }
      }
LAB_00142bd5:
      lVar7 = lVar7 + 1;
    } while ((uint)lVar7 < *(uint *)(param_9 + 0x26));
  }
  return;
}



void input_csi_dispatch_sm
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  int iVar1;
  undefined8 unaff_RBX;
  long lVar2;
  undefined8 in_R8;
  undefined8 in_R9;
  
  if (*(int *)(param_9 + 0x130) == 0) {
    return;
  }
  lVar2 = 0;
  do {
    while (iVar1 = *(int *)(param_9 + 0xd0 + lVar2 * 4), iVar1 == -1) {
LAB_00142d57:
      lVar2 = lVar2 + 1;
      param_1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                         "%s: unknown \'%c\'","input_csi_dispatch_sm",
                         (ulong)*(uint *)(param_9 + 0x140),in_R8,in_R9,(char)unaff_RBX);
      if (*(uint *)(param_9 + 0x130) <= (uint)lVar2) {
        return;
      }
    }
    if (iVar1 == 4) {
      param_1 = screen_write_mode_set(param_9 + 8,2);
    }
    else {
      if (iVar1 != 0x22) goto LAB_00142d57;
      param_1 = screen_write_mode_clear(param_9 + 8,0x80);
    }
    lVar2 = lVar2 + 1;
    if (*(uint *)(param_9 + 0x130) <= (uint)lVar2) {
      return;
    }
  } while( true );
}



void input_csi_dispatch_sm_private
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,undefined8 param_10,undefined8 param_11,ulong param_12,ulong param_13,
               undefined8 param_14)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  undefined8 uVar4;
  int iVar5;
  undefined8 extraout_RDX;
  undefined8 uVar6;
  long lVar7;
  undefined in_stack_ffffffffffffffb8;
  
  lVar3 = *param_9;
  if (*(int *)(param_9 + 0x26) != 0) {
    lVar7 = 0;
    plVar1 = param_9 + 1;
    do {
      iVar2 = *(int *)((long)param_9 + lVar7 * 4 + 0xd0);
      if (iVar2 == -1) {
switchD_00142e31_caseD_2:
        param_12 = (ulong)*(uint *)(param_9 + 0x28);
        param_1 = log_emit((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                           "%s: unknown \'%c\'","input_csi_dispatch_sm_private",param_12,param_13,
                           param_14,in_stack_ffffffffffffffb8);
      }
      else {
        iVar5 = 0;
        if (-1 < iVar2) {
          iVar5 = iVar2;
        }
        if (0x419 < iVar2) {
          if (iVar2 == 0x7d4) {
            param_1 = screen_write_mode_set((long)plVar1,0x400);
            goto LAB_00142e55;
          }
          goto switchD_00142e31_caseD_2;
        }
        if (iVar2 < 1000) {
          switch(iVar5) {
          case 1:
            param_1 = screen_write_mode_set((long)plVar1,4);
            break;
          default:
            goto switchD_00142e31_caseD_2;
          case 3:
            uVar6 = 0;
            uVar4 = screen_write_cursormove((long)plVar1,0,0);
            param_1 = screen_write_clearscreen
                                (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 (long)plVar1,uVar6,extraout_RDX,param_12,param_13,param_14);
            break;
          case 7:
            param_1 = screen_write_mode_set((long)plVar1,0x10);
            break;
          case 0xc:
            param_1 = screen_write_mode_set((long)plVar1,0x80);
            break;
          case 0x19:
            param_1 = screen_write_mode_set((long)plVar1,1);
            break;
          case 0x2f:
switchD_00142e31_caseD_2f:
            param_1 = window_pane_alternate_on
                                (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 lVar3,(undefined4 *)(param_9 + 3),0,param_12,param_13,param_14);
          }
        }
        else {
          switch(iVar5) {
          case 1000:
            screen_write_mode_clear((long)plVar1,0x60);
            param_1 = screen_write_mode_set((long)plVar1,0x20);
            break;
          default:
            goto switchD_00142e31_caseD_2;
          case 0x3ea:
            screen_write_mode_clear((long)plVar1,0x60);
            param_1 = screen_write_mode_set((long)plVar1,0x40);
            break;
          case 0x3ec:
            if ((*(byte *)(param_9[2] + 0x31) & 8) == 0) {
              param_1 = screen_write_mode_set((long)plVar1,0x800);
              *(uint *)(lVar3 + 0x30) = *(uint *)(lVar3 + 0x30) | 0x10;
            }
            break;
          case 0x3ed:
            param_1 = screen_write_mode_set((long)plVar1,0x100);
            break;
          case 0x3ee:
            param_1 = screen_write_mode_set((long)plVar1,0x200);
            break;
          case 0x417:
            goto switchD_00142e31_caseD_2f;
          case 0x419:
            param_1 = window_pane_alternate_on
                                (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 lVar3,(undefined4 *)(param_9 + 3),1,param_12,param_13,param_14);
          }
        }
      }
LAB_00142e55:
      lVar7 = lVar7 + 1;
    } while ((uint)lVar7 < *(uint *)(param_9 + 0x26));
  }
  return;
}



void input_csi_dispatch_winops
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  undefined8 unaff_RBX;
  ulong uVar5;
  undefined8 in_R8;
  undefined8 in_R9;
  uint uVar6;
  
  uVar4 = *(uint *)(param_9 + 0x26);
  if (uVar4 == 0) {
    return;
  }
  lVar1 = *param_9;
  iVar3 = *(int *)(param_9 + 0x1a);
  uVar2 = 0;
  do {
    if (iVar3 == -1) {
      return;
    }
    uVar6 = uVar2 + 1;
    uVar5 = (ulong)uVar6;
    if (iVar3 < 0) {
      iVar3 = 0;
    }
    switch(iVar3) {
    default:
      param_1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                         "%s: unknown \'%c\'","input_csi_dispatch_winops",
                         (ulong)*(uint *)(param_9 + 0x28),in_R8,in_R9,(char)unaff_RBX);
      uVar4 = *(uint *)(param_9 + 0x26);
      break;
    case 3:
    case 4:
    case 8:
      if (uVar4 <= uVar6) {
        return;
      }
      if (*(int *)((long)param_9 + uVar5 * 4 + 0xd0) == -1) {
        return;
      }
      uVar5 = (ulong)(uVar2 + 2);
    case 9:
    case 10:
    case 0x16:
    case 0x17:
      if (uVar4 <= (uint)uVar5) {
        return;
      }
      if (*(int *)((long)param_9 + uVar5 * 4 + 0xd0) == -1) {
        return;
      }
      uVar6 = (uint)uVar5 + 1;
      uVar5 = (ulong)uVar6;
    case 1:
    case 2:
    case 5:
    case 6:
    case 7:
    case 0xb:
    case 0xd:
    case 0xe:
    case 0x13:
    case 0x14:
    case 0x15:
    case 0x18:
      if (uVar4 <= uVar6) {
        return;
      }
      goto LAB_00143052;
    case 0x12:
      param_1 = input_reply(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            &DAT_0017b5bc,(ulong)*(uint *)(lVar1 + 0x24),
                            (ulong)*(uint *)(lVar1 + 0x20),in_R8,in_R9,(char)unaff_RBX);
      uVar4 = *(uint *)(param_9 + 0x26);
    }
    if (uVar4 <= uVar6) {
      return;
    }
LAB_00143052:
    iVar3 = *(int *)((long)param_9 + uVar5 * 4 + 0xd0);
    uVar2 = uVar6;
  } while( true );
}



void input_csi_dispatch_sgr_256(long param_1,int param_2,uint *param_3)

{
  uint uVar1;
  int iVar2;
  
  uVar1 = *param_3 + 1;
  *param_3 = uVar1;
  if ((uVar1 < *(uint *)(param_1 + 0x130)) &&
     (iVar2 = *(int *)(param_1 + 0xd0 + (ulong)uVar1 * 4), iVar2 != -1)) {
    if (iVar2 < 0) {
      iVar2 = 0;
    }
    if (param_2 == 0x26) {
      *(char *)(param_1 + 0x1a) = (char)iVar2;
      *(byte *)(param_1 + 0x18) = *(byte *)(param_1 + 0x18) & 0xef | 1;
      return;
    }
    if (param_2 == 0x30) {
      *(char *)(param_1 + 0x1d) = (char)iVar2;
      *(byte *)(param_1 + 0x18) = *(byte *)(param_1 + 0x18) & 0xdf | 2;
      return;
    }
  }
  else {
    if (param_2 == 0x26) {
      *(byte *)(param_1 + 0x18) = *(byte *)(param_1 + 0x18) & 0xee;
      *(undefined *)(param_1 + 0x1a) = 8;
      return;
    }
    if (param_2 == 0x30) {
      *(byte *)(param_1 + 0x18) = *(byte *)(param_1 + 0x18) & 0xdd;
      *(undefined *)(param_1 + 0x1d) = 8;
      return;
    }
  }
  return;
}



void input_csi_dispatch_sgr_rgb(long param_1,int param_2,uint *param_3)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  
  uVar5 = *param_3;
  uVar1 = uVar5 + 1;
  *param_3 = uVar1;
  if (((uVar1 < *(uint *)(param_1 + 0x130)) &&
      (iVar6 = *(int *)(param_1 + 0xd0 + (ulong)uVar1 * 4), iVar6 != -1)) && (iVar6 < 0x100)) {
    uVar1 = uVar5 + 2;
    *param_3 = uVar1;
    if (((uVar1 < *(uint *)(param_1 + 0x130)) &&
        (iVar2 = *(int *)(param_1 + 0xd0 + (ulong)uVar1 * 4), iVar2 != -1)) && (iVar2 < 0x100)) {
      uVar5 = uVar5 + 3;
      *param_3 = uVar5;
      if ((uVar5 < *(uint *)(param_1 + 0x130)) &&
         (iVar3 = *(int *)(param_1 + 0xd0 + (ulong)uVar5 * 4), iVar3 != -1)) {
        iVar4 = 0;
        if (-1 < iVar3) {
          iVar4 = iVar3;
        }
        if (iVar3 < 0x100) {
          if (iVar6 < 0) {
            iVar6 = 0;
          }
          if (iVar2 < 0) {
            iVar2 = 0;
          }
          if (param_2 == 0x26) {
            *(char *)(param_1 + 0x1a) = (char)iVar6;
            *(char *)(param_1 + 0x1b) = (char)iVar2;
            *(char *)(param_1 + 0x1c) = (char)iVar4;
            *(byte *)(param_1 + 0x18) = *(byte *)(param_1 + 0x18) & 0xfe | 0x10;
            return;
          }
          if (param_2 == 0x30) {
            *(char *)(param_1 + 0x1d) = (char)iVar6;
            *(char *)(param_1 + 0x1e) = (char)iVar2;
            *(char *)(param_1 + 0x1f) = (char)iVar4;
            *(byte *)(param_1 + 0x18) = *(byte *)(param_1 + 0x18) & 0xfd | 0x20;
          }
        }
      }
    }
  }
  return;
}



void input_csi_dispatch_sgr(long param_1)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  ulong uVar5;
  ulong uVar6;
  undefined *puVar7;
  long in_FS_OFFSET;
  uint local_14;
  long local_10;
  
  uVar3 = *(uint *)(param_1 + 0x130);
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar3 == 0) {
    *(undefined4 *)(param_1 + 0x18) = 0x80000;
    *(undefined4 *)(param_1 + 0x1c) = 0x800;
    *(undefined4 *)(param_1 + 0x20) = 0x20;
    *(undefined4 *)(param_1 + 0x24) = 0;
    *(undefined4 *)(param_1 + 0x28) = 0x1010000;
  }
  else {
    local_14 = 0;
    uVar6 = 0;
    puVar7 = &DAT_0017badc;
    do {
      while( true ) {
        while (uVar1 = *(uint *)(param_1 + 0xd0 + (ulong)local_14 * 4), uVar1 == 0xffffffff) {
          local_14 = local_14 + 1;
          *(undefined4 *)(param_1 + 0x28) = 0x1010000;
          *(undefined4 *)(param_1 + 0x18) = 0x80000;
          *(undefined4 *)(param_1 + 0x1c) = 0x800;
          *(undefined4 *)(param_1 + 0x20) = 0x20;
          *(undefined4 *)(param_1 + 0x24) = 0;
          if (uVar3 <= local_14) goto LAB_001432ff;
        }
        uVar5 = uVar6 & 0xffffffff;
        if (-1 < (int)uVar1) {
          uVar5 = (ulong)uVar1;
        }
        uVar4 = (uint)uVar5;
        if ((uVar1 == 0x26) || (uVar1 == 0x30)) break;
        if (uVar4 < 0x6c) {
                    // WARNING: Could not recover jumptable at 0x001432a6. Too many branches
                    // WARNING: Treating indirect jump as call
          (*(code *)(puVar7 + *(int *)(puVar7 + uVar5 * 4)))();
          return;
        }
LAB_001432f0:
        local_14 = local_14 + 1;
        if (uVar3 <= local_14) goto LAB_001432ff;
      }
      local_14 = local_14 + 1;
      if ((uVar3 <= local_14) ||
         (iVar2 = *(int *)(param_1 + 0xd0 + (ulong)local_14 * 4), iVar2 == -1)) goto LAB_001432f0;
      if (iVar2 != 2) {
        if (iVar2 == 5) {
          input_csi_dispatch_sgr_256(param_1,uVar4,&local_14);
          uVar3 = *(uint *)(param_1 + 0x130);
        }
        goto LAB_001432f0;
      }
      input_csi_dispatch_sgr_rgb(param_1,uVar4,&local_14);
      uVar3 = *(uint *)(param_1 + 0x130);
      local_14 = local_14 + 1;
    } while (local_14 < uVar3);
  }
LAB_001432ff:
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



undefined8 input_csi_dispatch(undefined4 param_1,long *param_2)

{
  long *plVar1;
  long lVar2;
  int iVar3;
  undefined8 uVar4;
  ulong uVar5;
  byte *pbVar6;
  uint uVar7;
  ulong uVar8;
  uint uVar9;
  int iVar10;
  long lVar11;
  ulong uVar12;
  ulong uVar13;
  uint *puVar14;
  long *plVar15;
  ulong uVar16;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar17;
  undefined auVar18 [16];
  undefined extraout_XMM0 [16];
  undefined4 uVar19;
  undefined in_XMM1 [16];
  undefined4 uVar20;
  undefined in_XMM2 [16];
  undefined4 uVar21;
  undefined in_XMM3 [16];
  undefined4 in_XMM4_Da;
  undefined4 in_XMM5_Da;
  undefined4 in_XMM6_Da;
  undefined4 in_XMM7_Da;
  undefined uVar22;
  long *in_stack_ffffffffffffffb8;
  undefined8 extraout_XMM0_Qb;
  
  if ((*(byte *)((long)param_2 + 0x144) & 1) != 0) {
    return 0;
  }
  lVar2 = param_2[2];
  *(undefined4 *)(param_2 + 0x26) = 0;
  if ((param_2[0x16] != 0) &&
     (uVar4 = FUN_001421d0((long)param_2), param_1 = extraout_XMM0_Da, (int)uVar4 != 0)) {
    return 0;
  }
  uVar8 = (ulong)*(uint *)(param_2 + 0x28);
  plVar1 = param_2 + 0xc;
  uVar13 = 0;
  plVar15 = param_2 + 0xe;
  puVar14 = (uint *)plVar1;
  auVar18._0_8_ =
       log_emit(param_1,in_XMM1._0_4_,in_XMM2._0_4_,in_XMM3._0_4_,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,
                in_XMM7_Da,3,&DAT_0017b5c7,"input_csi_dispatch",uVar8,plVar1,plVar15,
                (char)in_stack_ffffffffffffffb8);
  auVar18._8_8_ = extraout_XMM0_Qb;
  uVar9 = *(uint *)(param_2 + 0x28);
  uVar12 = 0x20;
LAB_00143610:
  uVar16 = uVar12;
  uVar22 = SUB81(in_stack_ffffffffffffffb8,0);
  uVar21 = in_XMM3._0_4_;
  uVar20 = in_XMM2._0_4_;
  uVar19 = in_XMM1._0_4_;
joined_r0x00143613:
  if (uVar16 <= uVar13) goto LAB_00143646;
  uVar5 = uVar16 + uVar13;
  uVar12 = uVar5 >> 1;
  lVar11 = ((uVar5 & 0xfffffffffffffffe) + uVar12) * 8;
  puVar14 = (uint *)(input_csi_table + lVar11);
  if (*puVar14 == uVar9) {
    uVar7 = strcmp((char *)plVar1,*(char **)(input_csi_table + lVar11 + 8));
    uVar5 = (ulong)uVar7;
    in_stack_ffffffffffffffb8 = (long *)puVar14;
    auVar18 = extraout_XMM0;
  }
  else {
    uVar7 = uVar9 - *puVar14;
    uVar5 = (ulong)uVar7;
    uVar8 = uVar5;
  }
  uVar22 = SUB81(in_stack_ffffffffffffffb8,0);
  if (-1 < (int)uVar7) {
    uVar21 = in_XMM3._0_4_;
    uVar20 = in_XMM2._0_4_;
    uVar19 = in_XMM1._0_4_;
    if (uVar7 != 0) goto code_r0x0014363d;
    uVar7 = *(uint *)(input_csi_table + lVar11 + 0x10);
    uVar13 = (ulong)uVar7;
    plVar1 = param_2 + 1;
    if (0x1e < uVar7) {
      return 0;
    }
    puVar14 = &switchD_001436bd::switchdataD_0017bc8c;
    lVar11 = (long)&switchD_001436bd::switchdataD_0017bc8c +
             (long)(int)(&switchD_001436bd::switchdataD_0017bc8c)[uVar7];
    uVar17 = auVar18._0_4_;
    uVar4 = auVar18._0_8_;
    switch(uVar7) {
    case 0:
      uVar9 = *(int *)(*(long *)(lVar2 + 8) + 4) - 1;
      if (*(uint *)(lVar2 + 0x10) < uVar9) {
        uVar9 = *(uint *)(lVar2 + 0x10);
      }
      if ((*(int *)(param_2 + 0x26) == 0) || (iVar3 = *(int *)(param_2 + 0x1a), iVar3 == -1)) {
        if (uVar9 != 0) goto LAB_00143930;
        goto LAB_00143935;
      }
      if (iVar3 < 1) {
        iVar3 = 1;
      }
      if (uVar9 == 0) goto LAB_00143935;
      uVar13 = (ulong)(iVar3 - 1);
      goto LAB_00143930;
    case 1:
      screen_write_carriagereturn((long)plVar1);
    case 4:
      uVar9 = 1;
      if (((*(int *)(param_2 + 0x26) != 0) &&
          (uVar7 = *(uint *)(param_2 + 0x1a), uVar7 != 0xffffffff)) && (uVar9 = 1, 0 < (int)uVar7))
      {
        uVar9 = uVar7;
      }
      screen_write_cursordown((long)plVar1,uVar9);
      return 0;
    case 2:
      screen_write_carriagereturn((long)plVar1);
    case 7:
      uVar9 = 1;
      if (((*(int *)(param_2 + 0x26) != 0) &&
          (uVar7 = *(uint *)(param_2 + 0x1a), uVar7 != 0xffffffff)) && (uVar9 = 1, 0 < (int)uVar7))
      {
        uVar9 = uVar7;
      }
      screen_write_cursorup((long)plVar1,uVar9);
      return 0;
    case 3:
      uVar9 = 1;
      if (((*(int *)(param_2 + 0x26) != 0) &&
          (uVar7 = *(uint *)(param_2 + 0x1a), uVar7 != 0xffffffff)) && (uVar9 = 1, 0 < (int)uVar7))
      {
        uVar9 = uVar7;
      }
      screen_write_cursorleft((long)plVar1,uVar9);
      return 0;
    case 5:
      uVar9 = 1;
      if (((*(int *)(param_2 + 0x26) != 0) &&
          (uVar7 = *(uint *)(param_2 + 0x1a), uVar7 != 0xffffffff)) && (uVar9 = 1, 0 < (int)uVar7))
      {
        uVar9 = uVar7;
      }
      screen_write_cursorright((long)plVar1,uVar9);
      return 0;
    case 6:
      uVar7 = *(uint *)(param_2 + 0x26);
      uVar9 = 0;
      if (uVar7 != 0) {
        iVar3 = *(int *)(param_2 + 0x1a);
        uVar9 = 0;
        if (iVar3 != -1) {
          if (iVar3 < 1) {
            iVar3 = 1;
          }
          uVar9 = iVar3 - 1;
        }
        if (uVar7 < 2) {
          uVar7 = 0;
        }
        else {
          iVar3 = *(int *)((long)param_2 + 0xd4);
          uVar7 = 0;
          if (iVar3 != -1) {
            if (iVar3 < 1) {
              iVar3 = 1;
            }
            uVar7 = iVar3 - 1;
          }
        }
      }
      goto LAB_001438a8;
    case 8:
      if ((*(int *)(param_2 + 0x26) == 0) || (*(int *)(param_2 + 0x1a) < 1)) {
        input_reply(uVar17,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,param_2,
                    &DAT_0017b5da,lVar11,uVar8,&switchD_001436bd::switchdataD_0017bc8c,plVar15,
                    uVar22);
        return 0;
      }
      break;
    case 9:
      if ((*(int *)(param_2 + 0x26) == 0) || (*(int *)(param_2 + 0x1a) < 1)) {
        input_reply(uVar17,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,param_2,
                    &DAT_0017b5e2,lVar11,uVar8,&switchD_001436bd::switchdataD_0017bc8c,plVar15,
                    uVar22);
        return 0;
      }
      break;
    case 10:
      uVar9 = 1;
      if (((*(int *)(param_2 + 0x26) != 0) &&
          (uVar7 = *(uint *)(param_2 + 0x1a), uVar7 != 0xffffffff)) && (uVar9 = 1, 0 < (int)uVar7))
      {
        uVar9 = uVar7;
      }
      screen_write_deletecharacter
                (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,(long)plVar1
                 ,uVar9,lVar11,uVar8,&switchD_001436bd::switchdataD_0017bc8c,plVar15);
      return 0;
    case 0xb:
      uVar9 = *(uint *)(param_2 + 0x26);
      if (*(uint *)(param_2 + 0x26) != 0) {
        uVar7 = *(uint *)(param_2 + 0x1a);
        uVar9 = 0;
        if ((uVar7 != 0xffffffff) && (-1 < (int)uVar7)) {
          uVar9 = uVar7;
        }
      }
      screen_set_cursor_style(lVar2,uVar9);
      return 0;
    case 0xc:
      uVar9 = 0;
      iVar3 = *(int *)(*(long *)(lVar2 + 8) + 8);
      if (*(uint *)(param_2 + 0x26) != 0) {
        iVar10 = *(int *)(param_2 + 0x1a);
        if (iVar10 != -1) {
          if (iVar10 < 1) {
            iVar10 = 1;
          }
          uVar9 = iVar10 - 1;
        }
        if (((1 < *(uint *)(param_2 + 0x26)) &&
            (iVar10 = *(int *)((long)param_2 + 0xd4), iVar10 != -1)) && (iVar3 = 1, 0 < iVar10)) {
          iVar3 = iVar10;
        }
      }
      screen_write_scrollregion((long)plVar1,uVar9,iVar3 - 1);
      return 0;
    case 0xd:
      uVar9 = 1;
      if (((*(int *)(param_2 + 0x26) != 0) &&
          (uVar7 = *(uint *)(param_2 + 0x1a), uVar7 != 0xffffffff)) && (uVar9 = 1, 0 < (int)uVar7))
      {
        uVar9 = uVar7;
      }
      screen_write_deleteline
                (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,(long)plVar1
                 ,uVar9,lVar11,uVar8,0x17bc8c,plVar15);
      return 0;
    case 0xe:
      plVar15 = (long *)(ulong)*(uint *)(param_2 + 0x26);
      if ((*(uint *)(param_2 + 0x26) != 0) && (iVar3 = *(int *)(param_2 + 0x1a), iVar3 != -1)) {
        if (iVar3 == 5) {
          input_reply(uVar17,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                      param_2,&DAT_0017b5ed,lVar11,uVar8,&switchD_001436bd::switchdataD_0017bc8c,
                      plVar15,uVar22);
          return 0;
        }
        if (iVar3 == 6) {
          input_reply(uVar17,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                      param_2,&DAT_0017b5f2,(ulong)(*(int *)(lVar2 + 0x14) + 1),
                      (ulong)(*(int *)(lVar2 + 0x10) + 1),&switchD_001436bd::switchdataD_0017bc8c,
                      plVar15,(char)*(int *)(lVar2 + 0x10));
          return 0;
        }
      }
      break;
    case 0xf:
      uVar9 = 1;
      if (((*(int *)(param_2 + 0x26) != 0) &&
          (uVar7 = *(uint *)(param_2 + 0x1a), uVar7 != 0xffffffff)) && (uVar9 = 1, 0 < (int)uVar7))
      {
        uVar9 = uVar7;
      }
      screen_write_clearcharacter
                (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,(long)plVar1
                 ,uVar9,lVar11,uVar8,&switchD_001436bd::switchdataD_0017bc8c,plVar15);
      return 0;
    case 0x10:
      uVar7 = *(uint *)(param_2 + 0x26);
      if ((uVar7 == 0) || (iVar3 = *(int *)(param_2 + 0x1a), iVar3 == -1)) {
LAB_00143cec:
        screen_write_clearendofscreen
                  (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                   (long)plVar1,uVar13,(ulong)uVar7,uVar8,0x17bc8c,(ulong)plVar15);
        return 0;
      }
      if (iVar3 == 2) {
        screen_write_clearscreen
                  (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                   (long)plVar1,uVar13,(ulong)uVar7,uVar8,0x17bc8c,plVar15);
        return 0;
      }
      if (iVar3 < 3) {
        if (iVar3 < 1) goto LAB_00143cec;
        if (iVar3 == 1) {
          screen_write_clearstartofscreen
                    (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                     (long)plVar1);
          return 0;
        }
      }
      else if (iVar3 == 3) {
        if ((1 < uVar7) && (0 < *(int *)((long)param_2 + 0xd4))) {
          return 0;
        }
        screen_write_clearhistory((long)plVar1);
        return 0;
      }
      break;
    case 0x11:
      puVar14 = (uint *)(ulong)*(uint *)(param_2 + 0x26);
      if ((*(uint *)(param_2 + 0x26) != 0) && (iVar3 = *(int *)(param_2 + 0x1a), iVar3 != -1)) {
        if (iVar3 == 1) {
          screen_write_clearstartofline
                    (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                     (long)plVar1);
          return 0;
        }
        if (iVar3 == 2) {
          screen_write_clearline
                    (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                     (long)plVar1);
          return 0;
        }
        if (0 < iVar3) break;
      }
      screen_write_clearendofline
                (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,(long)plVar1
                );
      return 0;
    case 0x12:
      uVar9 = *(uint *)(param_2 + 0x26);
      if (uVar9 != 0) {
        iVar3 = *(int *)(param_2 + 0x1a);
        uVar9 = 0;
        if (iVar3 != -1) {
          if (iVar3 < 1) {
            iVar3 = 1;
          }
          uVar9 = iVar3 - 1;
        }
      }
      screen_write_cursormove((long)plVar1,uVar9,*(uint *)(lVar2 + 0x14));
      return 0;
    case 0x13:
      uVar9 = 1;
      if (((*(int *)(param_2 + 0x26) != 0) &&
          (uVar7 = *(uint *)(param_2 + 0x1a), uVar7 != 0xffffffff)) && (uVar9 = 1, 0 < (int)uVar7))
      {
        uVar9 = uVar7;
      }
      screen_write_insertcharacter
                (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,(long)plVar1
                 ,uVar9,lVar11,uVar8,&switchD_001436bd::switchdataD_0017bc8c,plVar15);
      return 0;
    case 0x14:
      uVar9 = 1;
      if (((*(uint *)(param_2 + 0x26) != 0) &&
          (uVar7 = *(uint *)(param_2 + 0x1a), uVar7 != 0xffffffff)) && (uVar9 = 1, 0 < (int)uVar7))
      {
        uVar9 = uVar7;
      }
      screen_write_insertline
                (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,(long)plVar1
                 ,uVar9,lVar11,(ulong)*(uint *)(param_2 + 0x26),0x17bc8c,plVar15);
      return 0;
    case 0x15:
      *(undefined4 *)(param_2 + 3) = *(undefined4 *)(param_2 + 7);
      *(undefined4 *)((long)param_2 + 0x1c) = *(undefined4 *)((long)param_2 + 0x3c);
      *(undefined4 *)(param_2 + 4) = *(undefined4 *)(param_2 + 8);
      *(undefined4 *)((long)param_2 + 0x24) = *(undefined4 *)((long)param_2 + 0x44);
      *(undefined4 *)(param_2 + 5) = *(undefined4 *)(param_2 + 9);
      *(undefined4 *)((long)param_2 + 0x2c) = *(undefined4 *)((long)param_2 + 0x4c);
      *(undefined4 *)(param_2 + 6) = *(undefined4 *)(param_2 + 10);
      *(undefined4 *)((long)param_2 + 0x34) = *(undefined4 *)((long)param_2 + 0x54);
      screen_write_cursormove((long)plVar1,*(uint *)(param_2 + 0xb),*(uint *)((long)param_2 + 0x5c))
      ;
      return 0;
    case 0x16:
      input_csi_dispatch_rm
                (uVar17,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                 (long)param_2);
      return 0;
    case 0x17:
      input_csi_dispatch_rm_private
                (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,param_2,
                 uVar13,lVar11,uVar8,0x17bc8c,plVar15);
      return 0;
    case 0x18:
      *(undefined4 *)(param_2 + 7) = *(undefined4 *)(param_2 + 3);
      *(undefined4 *)((long)param_2 + 0x3c) = *(undefined4 *)((long)param_2 + 0x1c);
      *(undefined4 *)(param_2 + 8) = *(undefined4 *)(param_2 + 4);
      *(undefined4 *)((long)param_2 + 0x44) = *(undefined4 *)((long)param_2 + 0x24);
      *(undefined4 *)(param_2 + 9) = *(undefined4 *)(param_2 + 5);
      *(undefined4 *)((long)param_2 + 0x4c) = *(undefined4 *)((long)param_2 + 0x2c);
      *(undefined4 *)(param_2 + 10) = *(undefined4 *)(param_2 + 6);
      *(undefined4 *)((long)param_2 + 0x54) = *(undefined4 *)((long)param_2 + 0x34);
      *(undefined4 *)(param_2 + 0xb) = *(undefined4 *)(lVar2 + 0x10);
      *(undefined4 *)((long)param_2 + 0x5c) = *(undefined4 *)(lVar2 + 0x14);
      return 0;
    case 0x19:
      input_csi_dispatch_sgr((long)param_2);
      return 0;
    case 0x1a:
      input_csi_dispatch_sm
                (uVar17,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                 (long)param_2);
      return 0;
    case 0x1b:
      input_csi_dispatch_sm_private
                (uVar4,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,param_2,
                 uVar13,lVar11,uVar8,0x17bc8c,plVar15);
      return 0;
    case 0x1c:
      if (((*(int *)(param_2 + 0x26) == 0) || (iVar3 = *(int *)(param_2 + 0x1a), iVar3 == -1)) ||
         (iVar3 < 1)) {
        uVar9 = *(uint *)(lVar2 + 0x10);
        if (*(uint *)(*(long *)(lVar2 + 8) + 4) <= uVar9) {
          return 0;
        }
        pbVar6 = (byte *)((ulong)(uVar9 >> 3) + *(long *)(lVar2 + 0x38));
        *pbVar6 = *pbVar6 & ~(byte)(1 << ((byte)uVar9 & 7));
        return 0;
      }
      if (iVar3 == 3) {
        lVar11 = *(long *)(lVar2 + 0x38);
        uVar9 = *(uint *)(*(long *)(lVar2 + 8) + 4);
        if ((int)(uVar9 - 1) < 0) {
          return 0;
        }
        do {
          uVar7 = (int)uVar5 + 1;
          pbVar6 = (byte *)(lVar11 + ((int)uVar5 >> 3));
          *pbVar6 = *pbVar6 & ~(byte)(1 << ((byte)uVar5 & 7));
          uVar5 = (ulong)uVar7;
        } while (uVar7 != uVar9);
        return 0;
      }
      break;
    case 0x1d:
      uVar9 = *(uint *)(param_2 + 0x26);
      if (uVar9 != 0) {
        iVar3 = *(int *)(param_2 + 0x1a);
        uVar9 = 0;
        if (iVar3 != -1) {
          if (iVar3 < 1) {
            iVar3 = 1;
          }
          uVar9 = iVar3 - 1;
        }
      }
      uVar7 = *(uint *)(lVar2 + 0x10);
LAB_001438a8:
      screen_write_cursormove((long)plVar1,uVar7,uVar9);
      return 0;
    case 0x1e:
      input_csi_dispatch_winops
                (uVar17,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,param_2);
      return 0;
    }
LAB_00143646:
    log_emit(auVar18._0_4_,uVar19,uVar20,uVar21,in_XMM4_Da,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,3,
             "%s: unknown \'%c\'","input_csi_dispatch",(ulong)uVar9,puVar14,plVar15,uVar22);
    return 0;
  }
  goto LAB_00143610;
code_r0x0014363d:
  uVar13 = uVar12 + 1;
  goto joined_r0x00143613;
  while (((*(byte *)(*(long *)(lVar2 + 0x38) + (ulong)(uVar9 >> 3)) >> (uVar9 & 7) & 1) == 0 ||
         (uVar7 = (int)uVar13 - 1, uVar13 = (ulong)uVar7, uVar7 != 0xffffffff))) {
LAB_00143930:
    uVar9 = uVar9 - 1;
    if (uVar9 == 0) break;
  }
LAB_00143935:
  *(uint *)(lVar2 + 0x10) = uVar9;
  return 0;
}



void job_write_callback(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,long param_10)

{
  undefined8 uVar1;
  long lVar2;
  undefined4 extraout_XMM0_Da;
  undefined in_stack_ffffffffffffffe8;
  
  uVar1 = bufferevent_get_output(*(undefined8 *)(param_10 + 0x20));
  lVar2 = evbuffer_get_length(uVar1);
  log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "job write %p: %s, pid %ld, output left %zu",param_10,*(undefined8 *)(param_10 + 8),
           (long)*(int *)(param_10 + 0x10),lVar2,in_stack_ffffffffffffffe8);
  if (lVar2 != 0) {
    return;
  }
  shutdown(*(int *)(param_10 + 0x18),1);
  bufferevent_disable(*(undefined8 *)(param_10 + 0x20),4);
  return;
}



undefined4 *
job_run(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,char *param_9,
       uint *param_10,char *param_11,undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  __pid_t _Var2;
  int iVar3;
  char **ppcVar4;
  undefined8 extraout_RAX;
  undefined8 uVar5;
  char *__path;
  int *__fds;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  undefined8 extraout_RDX_10;
  undefined8 uVar6;
  char **ppcVar7;
  undefined8 uVar8;
  undefined *puVar9;
  undefined8 uVar10;
  undefined4 *puVar11;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Da_11;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 uVar13;
  undefined auVar14 [16];
  undefined uVar15;
  int local_48;
  uint local_44;
  long local_40;
  
  uVar10 = 1;
  uVar6 = 1;
  __fds = &local_48;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar5 = param_13;
  uVar8 = param_14;
  iVar1 = socketpair(1,1,0,__fds);
  if (iVar1 != 0) {
    puVar11 = (undefined4 *)0x0;
LAB_001440bd:
    if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
      return puVar11;
    }
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  auVar14 = environ_create(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           uVar10,uVar6,extraout_RDX,__fds,uVar5,param_14);
  ppcVar4 = auVar14._0_8_;
  uVar6 = environ_copy(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,global_environ,ppcVar4,auVar14._8_8_,__fds,
                       uVar5,param_14);
  uVar10 = extraout_RDX_00;
  if (param_10 != (uint *)0x0) {
    uVar6 = environ_copy(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         *(long **)(param_10 + 0x48),ppcVar4,extraout_RDX_00,__fds,uVar5,param_14);
    uVar10 = extraout_RDX_01;
  }
  ppcVar7 = ppcVar4;
  server_fill_environ(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,ppcVar4
                      ,uVar10,__fds,uVar5,param_14);
  _Var2 = fork();
  if (_Var2 == -1) {
    puVar11 = (undefined4 *)0x0;
    environ_free((long *)ppcVar4);
    close(local_48);
    close(local_44);
    goto LAB_001440bd;
  }
  if (_Var2 != 0) {
    environ_free((long *)ppcVar4);
    close(local_44);
    auVar14 = xmalloc(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      0x50,ppcVar7,extraout_RDX_02,__fds,uVar5,param_14);
    puVar11 = auVar14._0_8_;
    *puVar11 = 0;
    xstrdup(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5,
            param_6,param_7,param_8,param_9,ppcVar7,auVar14._8_8_,__fds,uVar5,param_14);
    puVar11[5] = 0;
    *(undefined8 *)(puVar11 + 2) = extraout_RAX;
    puVar11[4] = _Var2;
    *(undefined4 **)(puVar11 + 0x10) = all_jobs;
    if (all_jobs != (undefined4 *)0x0) {
      *(undefined4 **)(all_jobs + 0x12) = puVar11 + 0x10;
    }
    *(undefined8 *)(puVar11 + 10) = param_12;
    *(undefined4 ***)(puVar11 + 0x12) = &all_jobs;
    puVar11[6] = local_48;
    *(undefined8 *)(puVar11 + 0xe) = uVar8;
    *(undefined8 *)(puVar11 + 0xc) = param_13;
    all_jobs = puVar11;
    setblocking(local_48,0);
    uVar15 = (undefined)uVar8;
    uVar5 = bufferevent_new(puVar11[6],0,job_write_callback,job_callback,puVar11);
    *(undefined8 *)(puVar11 + 8) = uVar5;
    uVar12 = bufferevent_enable(uVar5,6);
    log_emit(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "run job %p: %s, pid %ld",puVar11,*(undefined8 *)(puVar11 + 2),(long)(int)puVar11[4],
             param_14,uVar15);
    goto LAB_001440bd;
  }
  clear_signals(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,1);
  uVar15 = (undefined)uVar8;
  if (param_11 != (char *)0x0) {
    iVar1 = chdir(param_11);
    uVar8 = extraout_RDX_03;
    uVar12 = extraout_XMM0_Da_04;
    uVar13 = extraout_XMM0_Db_02;
    if (iVar1 == 0) goto LAB_00143fcd;
  }
  __path = (char *)find_home();
  if (__path != (char *)0x0) {
    iVar1 = chdir(__path);
    uVar8 = extraout_RDX_04;
    uVar12 = extraout_XMM0_Da_05;
    uVar13 = extraout_XMM0_Db_03;
    if (iVar1 == 0) goto LAB_00143fcd;
  }
  chdir("/");
  uVar8 = extraout_RDX_05;
  uVar12 = extraout_XMM0_Da_06;
  uVar13 = extraout_XMM0_Db_04;
LAB_00143fcd:
  environ_push(CONCAT44(uVar13,uVar12),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               (long *)ppcVar4,(undefined *)ppcVar7,uVar8,__fds,uVar5,param_14);
  environ_free((long *)ppcVar4);
  uVar6 = 0;
  iVar1 = dup2(local_44,0);
  uVar8 = extraout_RDX_06;
  uVar12 = extraout_XMM0_Da_07;
  if (iVar1 != -1) {
    uVar6 = 1;
    iVar1 = dup2(local_44,1);
    uVar8 = extraout_RDX_07;
    uVar12 = extraout_XMM0_Da_08;
    if (iVar1 != -1) {
      if (1 < local_44) {
        close(local_44);
      }
      close(local_48);
      uVar8 = 2;
      iVar1 = open("/dev/null",2,0);
      if (iVar1 < 0) {
                    // WARNING: Subroutine does not return
        fatal(extraout_XMM0_Da_09,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              "open failed",uVar8,extraout_RDX_08,__fds,uVar5,param_14,uVar15);
      }
      uVar6 = 2;
      iVar3 = dup2(iVar1,2);
      uVar8 = extraout_RDX_09;
      uVar12 = extraout_XMM0_Da_10;
      if (iVar3 != -1) {
        if (iVar1 != 2) {
          close(iVar1);
        }
        closefrom(3);
        uVar5 = 0;
        puVar9 = &DAT_00178ff3;
        execl("/bin/sh","sh",&DAT_00177429);
                    // WARNING: Subroutine does not return
        fatal(extraout_XMM0_Da_11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              "execl failed",puVar9,extraout_RDX_10,param_9,uVar5,param_14,uVar15);
      }
    }
  }
                    // WARNING: Subroutine does not return
  fatal(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"dup2 failed",uVar6,uVar8,
        __fds,uVar5,param_14,uVar15);
}



void job_free(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             void *param_9)

{
  long lVar1;
  void *__ptr;
  undefined1 unaff_BPL;
  undefined8 in_R8;
  undefined8 in_R9;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"free job %p: %s",
           param_9,*(undefined8 *)((long)param_9 + 8),in_R8,in_R9,unaff_BPL);
  lVar1 = *(long *)((long)param_9 + 0x40);
  if (lVar1 != 0) {
    *(undefined8 *)(lVar1 + 0x48) = *(undefined8 *)((long)param_9 + 0x48);
  }
  __ptr = *(void **)((long)param_9 + 8);
  **(long **)((long)param_9 + 0x48) = lVar1;
  free(__ptr);
  if ((*(code **)((long)param_9 + 0x30) != (code *)0x0) && (*(long *)((long)param_9 + 0x38) != 0)) {
    (**(code **)((long)param_9 + 0x30))();
  }
  if (*(int *)((long)param_9 + 0x10) != -1) {
    kill(*(int *)((long)param_9 + 0x10),0xf);
  }
  if (*(long *)((long)param_9 + 0x20) != 0) {
    bufferevent_free();
  }
  if (*(int *)((long)param_9 + 0x18) != -1) {
    close(*(int *)((long)param_9 + 0x18));
  }
  free(param_9);
  return;
}



void job_callback(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,int *param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  undefined1 unaff_BPL;
  undefined4 uVar1;
  
  uVar1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "job error %p: %s, pid %ld",param_11,*(undefined8 *)(param_11 + 2),
                   (long)param_11[4],param_14,unaff_BPL);
  if (*param_11 == 1) {
    if (*(code **)(param_11 + 10) != (code *)0x0) {
      uVar1 = (**(code **)(param_11 + 10))(param_11);
    }
    job_free(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11);
    return;
  }
  bufferevent_disable(*(undefined8 *)(param_11 + 8),2);
  *param_11 = 2;
  return;
}



void job_died(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             int *param_9,int param_10)

{
  undefined8 in_R9;
  undefined4 uVar1;
  undefined1 in_stack_ffffffffffffffe8;
  
  uVar1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "job died %p: %s, pid %ld",param_9,*(undefined8 *)(param_9 + 2),(long)param_9[4],
                   in_R9,in_stack_ffffffffffffffe8);
  param_9[5] = param_10;
  if (*param_9 != 2) {
    param_9[4] = -1;
    *param_9 = 1;
    return;
  }
  if (*(code **)(param_9 + 10) != (code *)0x0) {
    uVar1 = (**(code **)(param_9 + 10))(param_9);
  }
  job_free(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  return;
}



void key_bindings_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_00144278:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x28);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x30) != 1)) {
        *(undefined4 *)(*param_1 + 0x30) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x28);
      lVar3 = *(long *)(lVar2 + 0x18);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x20);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x20) == param_2) {
          lVar3 = *(long *)(param_2 + 0x18);
          *(long *)(lVar1 + 0x20) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x28) = lVar2;
            lVar3 = lVar2;
LAB_00144497:
            *(long *)(lVar3 + 0x18) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x28) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x28);
            *(long *)(param_2 + 0x28) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x18) == lVar1) goto LAB_00144497;
              *(long *)(lVar3 + 0x20) = param_2;
            }
          }
          *(long *)(param_2 + 0x18) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x18);
          *(long *)(lVar1 + 0x28) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x30) = 0;
        lVar1 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar2 + 0x30) = 1;
        *(long *)(lVar2 + 0x18) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x28) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x18) == lVar2) {
          *(long *)(lVar1 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar2;
        *(long *)(lVar2 + 0x28) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 0;
        *(undefined4 *)(lVar2 + 0x30) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x18) == param_2) {
        lVar3 = *(long *)(param_2 + 0x20);
        *(long *)(lVar1 + 0x18) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x28) = lVar2;
          lVar3 = lVar2;
LAB_0014439e:
          if (*(long *)(lVar3 + 0x18) == lVar1) {
            *(long *)(lVar3 + 0x18) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x20) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x28) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x28);
          *(long *)(param_2 + 0x28) = lVar3;
          if (lVar3 != 0) goto LAB_0014439e;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x20) = lVar1;
        *(long *)(lVar1 + 0x28) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x30) = 0;
      lVar1 = *(long *)(lVar2 + 0x20);
      *(undefined4 *)(lVar2 + 0x30) = 1;
      lVar3 = *(long *)(lVar1 + 0x18);
      *(long *)(lVar2 + 0x20) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x28) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x28);
      *(long *)(lVar1 + 0x28) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x18) == lVar2) {
        *(long *)(lVar3 + 0x18) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x20) = lVar1;
      }
      *(long *)(lVar1 + 0x18) = lVar2;
      *(long *)(lVar2 + 0x28) = lVar1;
      goto LAB_00144278;
    }
    *(undefined4 *)(lVar3 + 0x30) = 0;
    *(undefined4 *)(lVar1 + 0x30) = 0;
    *(undefined4 *)(lVar2 + 0x30) = 1;
    param_2 = lVar2;
  } while( true );
}



void key_bindings_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_00144545(param_1,param_2,param_3);
  return;
}



void FUN_00144545(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x30) != 0)) goto LAB_001445fb;
    if (*param_1 == param_3) goto joined_r0x0014473e;
    lVar2 = *(long *)(param_2 + 0x18);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x30) == 1) {
        lVar1 = *(long *)(lVar2 + 0x20);
        *(undefined4 *)(lVar2 + 0x30) = 0;
        *(undefined4 *)(param_2 + 0x30) = 1;
        *(long *)(param_2 + 0x18) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x28) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x28);
        *(long *)(lVar2 + 0x28) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x28) + 0x18) == param_2) {
          *(long *)(lVar3 + 0x18) = lVar2;
          lVar1 = *(long *)(param_2 + 0x18);
        }
        else {
          *(long *)(lVar3 + 0x20) = lVar2;
        }
        *(long *)(lVar2 + 0x20) = param_2;
        *(long *)(param_2 + 0x28) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x18);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x30) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x20);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) == 0)) goto LAB_00144534;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x30) != 0)) goto LAB_001446e2;
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 1;
        *(long *)(lVar1 + 0x20) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x28) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x18) == lVar1) {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x18) = lVar1;
        *(long *)(lVar1 + 0x28) = lVar3;
        lVar3 = *(long *)(param_2 + 0x18);
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
        if (lVar2 != 0) goto LAB_001446f5;
      }
      else {
LAB_001446e2:
        lVar3 = *(long *)(param_2 + 0x18);
        *(undefined4 *)(lVar1 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
LAB_001446f5:
        *(undefined4 *)(lVar2 + 0x30) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x20);
      *(long *)(param_2 + 0x18) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x28) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x28);
      *(long *)(lVar3 + 0x28) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x28) + 0x18) == param_2) {
        *(long *)(lVar2 + 0x18) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x20) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x20) = param_2;
      *(long *)(param_2 + 0x28) = lVar3;
      goto joined_r0x0014473e;
    }
    lVar2 = *(long *)(param_2 + 0x20);
    lVar3 = *(long *)(lVar2 + 0x18);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x30) == 1) {
      *(undefined4 *)(lVar2 + 0x30) = 0;
      *(undefined4 *)(param_2 + 0x30) = 1;
      *(long *)(param_2 + 0x20) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x28) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x28);
      *(long *)(lVar2 + 0x28) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x18) == param_2) {
        *(long *)(lVar4 + 0x18) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x20) = lVar2;
        lVar1 = *(long *)(param_2 + 0x20);
      }
      *(long *)(lVar2 + 0x18) = param_2;
      lVar3 = *(long *)(lVar1 + 0x18);
      *(long *)(param_2 + 0x28) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x30) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x20);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x30) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 1;
        *(long *)(lVar1 + 0x18) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x28) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x18) == lVar1) {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar1;
        lVar4 = *(long *)(param_2 + 0x20);
        *(long *)(lVar1 + 0x28) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x20);
        *(undefined4 *)(lVar4 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
        if (lVar2 != 0) goto LAB_001445b0;
        goto LAB_001445b7;
      }
LAB_0014459f:
      lVar4 = *(long *)(param_2 + 0x20);
      *(undefined4 *)(lVar1 + 0x30) = *(undefined4 *)(param_2 + 0x30);
      *(undefined4 *)(param_2 + 0x30) = 0;
LAB_001445b0:
      *(undefined4 *)(lVar2 + 0x30) = 0;
LAB_001445b7:
      lVar2 = *(long *)(lVar4 + 0x18);
      *(long *)(param_2 + 0x20) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x28) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x28);
      *(long *)(lVar4 + 0x28) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x18) == param_2) {
        *(long *)(lVar2 + 0x18) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x20) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x18) = param_2;
      *(long *)(param_2 + 0x28) = lVar4;
joined_r0x0014473e:
      if (param_3 == 0) {
        return;
      }
LAB_001445fb:
      *(undefined4 *)(param_3 + 0x30) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x20);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x30) != 0)) goto LAB_0014459f;
LAB_00144534:
    *(undefined4 *)(lVar1 + 0x30) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x28);
  } while( true );
}



long key_bindings_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x20);
  if (*(long *)(param_2 + 0x18) == 0) {
    lVar7 = *(long *)(param_2 + 0x28);
    iVar4 = *(int *)(param_2 + 0x30);
    if (lVar6 != 0) goto LAB_0014496c;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x18);
      } while (*(long *)(lVar5 + 0x18) != 0);
      lVar7 = *(long *)(lVar5 + 0x28);
      lVar6 = *(long *)(lVar5 + 0x20);
      iVar4 = *(int *)(lVar5 + 0x30);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x28) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x28);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x18) == lVar5) {
        *(long *)(lVar7 + 0x18) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x20) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x1c);
      uVar2 = *(undefined4 *)(param_2 + 0x20);
      uVar3 = *(undefined4 *)(param_2 + 0x24);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x18) = *(undefined4 *)(param_2 + 0x18);
      *(undefined4 *)(lVar5 + 0x1c) = uVar1;
      *(undefined4 *)(lVar5 + 0x20) = uVar2;
      *(undefined4 *)(lVar5 + 0x24) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x2c);
      uVar2 = *(undefined4 *)(param_2 + 0x30);
      uVar3 = *(undefined4 *)(param_2 + 0x34);
      *(undefined4 *)(lVar5 + 0x28) = *(undefined4 *)(param_2 + 0x28);
      *(undefined4 *)(lVar5 + 0x2c) = uVar1;
      *(undefined4 *)(lVar5 + 0x30) = uVar2;
      *(undefined4 *)(lVar5 + 0x34) = uVar3;
      lVar8 = *(long *)(param_2 + 0x28);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x18) == param_2) {
        *(long *)(lVar8 + 0x18) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x20) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x18) + 0x28) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x20) != 0) {
        *(long *)(*(long *)(param_2 + 0x20) + 0x28) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x28)) {
      }
      goto joined_r0x00144981;
    }
    lVar7 = *(long *)(param_2 + 0x28);
    iVar4 = *(int *)(param_2 + 0x30);
    lVar6 = *(long *)(param_2 + 0x18);
LAB_0014496c:
    *(long *)(lVar6 + 0x28) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x18) == param_2) {
    *(long *)(lVar7 + 0x18) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x20) = lVar6;
  }
joined_r0x00144981:
  if (iVar4 == 0) {
    key_bindings_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



ulong * key_bindings_RB_INSERT(ulong **param_1,ulong *param_2)

{
  ulong uVar1;
  ulong uVar2;
  ulong *puVar3;
  ulong *puVar4;
  ulong *puVar5;
  int iVar6;
  bool bVar7;
  
  puVar5 = *param_1;
  if (puVar5 == (ulong *)0x0) {
    param_2[5] = 0;
    param_2[4] = 0;
    param_2[3] = 0;
    *(undefined4 *)(param_2 + 6) = 1;
    *param_1 = param_2;
LAB_00144a6b:
    key_bindings_RB_INSERT_COLOR((long *)param_1,(long)param_2);
    return (ulong *)0x0;
  }
  uVar1 = *param_2;
  uVar2 = *puVar5;
  bVar7 = uVar1 < uVar2;
  if (bVar7) goto LAB_00144a37;
  do {
    if (bVar7 || uVar1 == uVar2) {
      return puVar5;
    }
    iVar6 = 1;
    puVar4 = (ulong *)puVar5[4];
    puVar3 = puVar5;
    while( true ) {
      puVar5 = puVar4;
      if (puVar5 == (ulong *)0x0) {
        param_2[5] = (ulong)puVar3;
        param_2[4] = 0;
        param_2[3] = 0;
        *(undefined4 *)(param_2 + 6) = 1;
        if (iVar6 == -1) {
          puVar3[3] = (ulong)param_2;
        }
        else {
          puVar3[4] = (ulong)param_2;
        }
        goto LAB_00144a6b;
      }
      uVar2 = *puVar5;
      bVar7 = uVar1 < uVar2;
      if (!bVar7) break;
LAB_00144a37:
      iVar6 = -1;
      puVar4 = (ulong *)puVar5[3];
      puVar3 = puVar5;
    }
  } while( true );
}



void key_bindings_RB_FIND(ulong **param_1,ulong *param_2)

{
  ulong uVar1;
  ulong uVar2;
  ulong *puVar3;
  bool bVar4;
  
  puVar3 = *param_1;
  if (puVar3 != (ulong *)0x0) {
    uVar1 = *param_2;
    uVar2 = *puVar3;
    bVar4 = uVar1 < uVar2;
    if (bVar4) goto LAB_00144ade;
    while (!bVar4 && uVar1 != uVar2) {
      puVar3 = (ulong *)puVar3[4];
      while( true ) {
        if (puVar3 == (ulong *)0x0) {
          return;
        }
        uVar2 = *puVar3;
        bVar4 = uVar1 < uVar2;
        if (!bVar4) break;
LAB_00144ade:
        puVar3 = (ulong *)puVar3[3];
      }
    }
  }
  return;
}



ulong * key_bindings_RB_NFIND(ulong **param_1,ulong *param_2)

{
  ulong *puVar1;
  ulong *puVar2;
  ulong *puVar3;
  
  if (*param_1 == (ulong *)0x0) {
    return (ulong *)0x0;
  }
  puVar3 = (ulong *)0x0;
  puVar1 = *param_1;
  do {
    if (*param_2 < *puVar1) {
      puVar2 = (ulong *)puVar1[3];
      puVar3 = puVar1;
    }
    else {
      if (*param_2 <= *puVar1) {
        return puVar1;
      }
      puVar2 = (ulong *)puVar1[4];
    }
    puVar1 = puVar2;
  } while (puVar2 != (ulong *)0x0);
  return puVar3;
}



long key_bindings_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x20);
  if (*(long *)(param_1 + 0x20) == 0) {
    lVar2 = *(long *)(param_1 + 0x28);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x18) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x20))) {
      while (lVar1 = *(long *)(lVar2 + 0x28), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x20);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x18);
    } while (*(long *)(lVar2 + 0x18) != 0);
  }
  return lVar2;
}



void FUN_00144b90(void **param_1)

{
  void *pvVar1;
  void *__ptr;
  
  pvVar1 = param_1[1];
  if (param_1[1] != (void *)0x0) {
    do {
      __ptr = pvVar1;
      pvVar1 = *(void **)((long)__ptr + 0x18);
    } while (pvVar1 != (void *)0x0);
    do {
      pvVar1 = (void *)key_bindings_RB_NEXT((long)__ptr);
      key_bindings_RB_REMOVE((long *)(param_1 + 1),(long)__ptr);
      cmd_list_free(*(int **)((long)__ptr + 8));
      free(__ptr);
      __ptr = pvVar1;
    } while (pvVar1 != (void *)0x0);
  }
  free(*param_1);
  free(param_1);
  return;
}



long key_bindings_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x18);
  if (*(long *)(param_1 + 0x18) == 0) {
    lVar2 = *(long *)(param_1 + 0x28);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x20) != param_1)) &&
       (*(long *)(lVar2 + 0x18) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x28), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x18) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x20);
    } while (*(long *)(lVar2 + 0x20) != 0);
  }
  return lVar2;
}



long key_bindings_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x20);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x18);
    }
  }
  return lVar2;
}



void key_tables_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_00144cb8:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x28);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x30) != 1)) {
        *(undefined4 *)(*param_1 + 0x30) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x28);
      lVar3 = *(long *)(lVar2 + 0x18);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x20);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x20) == param_2) {
          lVar3 = *(long *)(param_2 + 0x18);
          *(long *)(lVar1 + 0x20) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x28) = lVar2;
            lVar3 = lVar2;
LAB_00144ed7:
            *(long *)(lVar3 + 0x18) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x28) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x28);
            *(long *)(param_2 + 0x28) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x18) == lVar1) goto LAB_00144ed7;
              *(long *)(lVar3 + 0x20) = param_2;
            }
          }
          *(long *)(param_2 + 0x18) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x18);
          *(long *)(lVar1 + 0x28) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x30) = 0;
        lVar1 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar2 + 0x30) = 1;
        *(long *)(lVar2 + 0x18) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x28) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x18) == lVar2) {
          *(long *)(lVar1 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar2;
        *(long *)(lVar2 + 0x28) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 0;
        *(undefined4 *)(lVar2 + 0x30) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x18) == param_2) {
        lVar3 = *(long *)(param_2 + 0x20);
        *(long *)(lVar1 + 0x18) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x28) = lVar2;
          lVar3 = lVar2;
LAB_00144dde:
          if (*(long *)(lVar3 + 0x18) == lVar1) {
            *(long *)(lVar3 + 0x18) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x20) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x28) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x28);
          *(long *)(param_2 + 0x28) = lVar3;
          if (lVar3 != 0) goto LAB_00144dde;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x20) = lVar1;
        *(long *)(lVar1 + 0x28) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x30) = 0;
      lVar1 = *(long *)(lVar2 + 0x20);
      *(undefined4 *)(lVar2 + 0x30) = 1;
      lVar3 = *(long *)(lVar1 + 0x18);
      *(long *)(lVar2 + 0x20) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x28) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x28);
      *(long *)(lVar1 + 0x28) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x18) == lVar2) {
        *(long *)(lVar3 + 0x18) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x20) = lVar1;
      }
      *(long *)(lVar1 + 0x18) = lVar2;
      *(long *)(lVar2 + 0x28) = lVar1;
      goto LAB_00144cb8;
    }
    *(undefined4 *)(lVar3 + 0x30) = 0;
    *(undefined4 *)(lVar1 + 0x30) = 0;
    *(undefined4 *)(lVar2 + 0x30) = 1;
    param_2 = lVar2;
  } while( true );
}



void key_tables_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_00144f85(param_1,param_2,param_3);
  return;
}



void FUN_00144f85(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x30) != 0)) goto LAB_0014503b;
    if (*param_1 == param_3) goto joined_r0x0014517e;
    lVar2 = *(long *)(param_2 + 0x18);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x30) == 1) {
        lVar1 = *(long *)(lVar2 + 0x20);
        *(undefined4 *)(lVar2 + 0x30) = 0;
        *(undefined4 *)(param_2 + 0x30) = 1;
        *(long *)(param_2 + 0x18) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x28) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x28);
        *(long *)(lVar2 + 0x28) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x28) + 0x18) == param_2) {
          *(long *)(lVar3 + 0x18) = lVar2;
          lVar1 = *(long *)(param_2 + 0x18);
        }
        else {
          *(long *)(lVar3 + 0x20) = lVar2;
        }
        *(long *)(lVar2 + 0x20) = param_2;
        *(long *)(param_2 + 0x28) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x18);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x30) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x20);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) == 0)) goto LAB_00144f74;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x30) != 0)) goto LAB_00145122;
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 1;
        *(long *)(lVar1 + 0x20) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x28) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x18) == lVar1) {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x18) = lVar1;
        *(long *)(lVar1 + 0x28) = lVar3;
        lVar3 = *(long *)(param_2 + 0x18);
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
        if (lVar2 != 0) goto LAB_00145135;
      }
      else {
LAB_00145122:
        lVar3 = *(long *)(param_2 + 0x18);
        *(undefined4 *)(lVar1 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
LAB_00145135:
        *(undefined4 *)(lVar2 + 0x30) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x20);
      *(long *)(param_2 + 0x18) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x28) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x28);
      *(long *)(lVar3 + 0x28) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x28) + 0x18) == param_2) {
        *(long *)(lVar2 + 0x18) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x20) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x20) = param_2;
      *(long *)(param_2 + 0x28) = lVar3;
      goto joined_r0x0014517e;
    }
    lVar2 = *(long *)(param_2 + 0x20);
    lVar3 = *(long *)(lVar2 + 0x18);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x30) == 1) {
      *(undefined4 *)(lVar2 + 0x30) = 0;
      *(undefined4 *)(param_2 + 0x30) = 1;
      *(long *)(param_2 + 0x20) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x28) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x28);
      *(long *)(lVar2 + 0x28) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x18) == param_2) {
        *(long *)(lVar4 + 0x18) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x20) = lVar2;
        lVar1 = *(long *)(param_2 + 0x20);
      }
      *(long *)(lVar2 + 0x18) = param_2;
      lVar3 = *(long *)(lVar1 + 0x18);
      *(long *)(param_2 + 0x28) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x30) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x20);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x30) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 1;
        *(long *)(lVar1 + 0x18) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x28) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x18) == lVar1) {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar1;
        lVar4 = *(long *)(param_2 + 0x20);
        *(long *)(lVar1 + 0x28) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x20);
        *(undefined4 *)(lVar4 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
        if (lVar2 != 0) goto LAB_00144ff0;
        goto LAB_00144ff7;
      }
LAB_00144fdf:
      lVar4 = *(long *)(param_2 + 0x20);
      *(undefined4 *)(lVar1 + 0x30) = *(undefined4 *)(param_2 + 0x30);
      *(undefined4 *)(param_2 + 0x30) = 0;
LAB_00144ff0:
      *(undefined4 *)(lVar2 + 0x30) = 0;
LAB_00144ff7:
      lVar2 = *(long *)(lVar4 + 0x18);
      *(long *)(param_2 + 0x20) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x28) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x28);
      *(long *)(lVar4 + 0x28) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x18) == param_2) {
        *(long *)(lVar2 + 0x18) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x20) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x18) = param_2;
      *(long *)(param_2 + 0x28) = lVar4;
joined_r0x0014517e:
      if (param_3 == 0) {
        return;
      }
LAB_0014503b:
      *(undefined4 *)(param_3 + 0x30) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x20);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x30) != 0)) goto LAB_00144fdf;
LAB_00144f74:
    *(undefined4 *)(lVar1 + 0x30) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x28);
  } while( true );
}



long key_tables_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x20);
  if (*(long *)(param_2 + 0x18) == 0) {
    lVar7 = *(long *)(param_2 + 0x28);
    iVar4 = *(int *)(param_2 + 0x30);
    if (lVar6 != 0) goto LAB_001453ac;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x18);
      } while (*(long *)(lVar5 + 0x18) != 0);
      lVar7 = *(long *)(lVar5 + 0x28);
      lVar6 = *(long *)(lVar5 + 0x20);
      iVar4 = *(int *)(lVar5 + 0x30);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x28) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x28);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x18) == lVar5) {
        *(long *)(lVar7 + 0x18) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x20) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x1c);
      uVar2 = *(undefined4 *)(param_2 + 0x20);
      uVar3 = *(undefined4 *)(param_2 + 0x24);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x18) = *(undefined4 *)(param_2 + 0x18);
      *(undefined4 *)(lVar5 + 0x1c) = uVar1;
      *(undefined4 *)(lVar5 + 0x20) = uVar2;
      *(undefined4 *)(lVar5 + 0x24) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x2c);
      uVar2 = *(undefined4 *)(param_2 + 0x30);
      uVar3 = *(undefined4 *)(param_2 + 0x34);
      *(undefined4 *)(lVar5 + 0x28) = *(undefined4 *)(param_2 + 0x28);
      *(undefined4 *)(lVar5 + 0x2c) = uVar1;
      *(undefined4 *)(lVar5 + 0x30) = uVar2;
      *(undefined4 *)(lVar5 + 0x34) = uVar3;
      lVar8 = *(long *)(param_2 + 0x28);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x18) == param_2) {
        *(long *)(lVar8 + 0x18) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x20) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x18) + 0x28) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x20) != 0) {
        *(long *)(*(long *)(param_2 + 0x20) + 0x28) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x28)) {
      }
      goto joined_r0x001453c1;
    }
    lVar7 = *(long *)(param_2 + 0x28);
    iVar4 = *(int *)(param_2 + 0x30);
    lVar6 = *(long *)(param_2 + 0x18);
LAB_001453ac:
    *(long *)(lVar6 + 0x28) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x18) == param_2) {
    *(long *)(lVar7 + 0x18) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x20) = lVar6;
  }
joined_r0x001453c1:
  if (iVar4 == 0) {
    key_tables_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



char ** key_tables_RB_INSERT(char **param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  
  if ((char **)*param_1 == (char **)0x0) {
    param_2[5] = (char *)0x0;
    param_2[4] = (char *)0x0;
    param_2[3] = (char *)0x0;
    *(undefined4 *)(param_2 + 6) = 1;
    *param_1 = (char *)param_2;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    do {
      ppcVar3 = ppcVar1;
      iVar2 = strcmp(__s1,*ppcVar3);
      if (iVar2 < 0) {
        ppcVar1 = (char **)ppcVar3[3];
      }
      else {
        if (iVar2 == 0) {
          return ppcVar3;
        }
        ppcVar1 = (char **)ppcVar3[4];
      }
    } while (ppcVar1 != (char **)0x0);
    param_2[5] = (char *)ppcVar3;
    param_2[4] = (char *)0x0;
    param_2[3] = (char *)0x0;
    *(undefined4 *)(param_2 + 6) = 1;
    if (iVar2 < 0) {
      ppcVar3[3] = (char *)param_2;
    }
    else {
      ppcVar3[4] = (char *)param_2;
    }
  }
  key_tables_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (char **)0x0;
}



char ** key_tables_RB_FIND(char **param_1,char **param_2)

{
  char *__s1;
  int iVar1;
  char **ppcVar2;
  
  ppcVar2 = (char **)*param_1;
  if (ppcVar2 != (char **)0x0) {
    __s1 = *param_2;
    do {
      while( true ) {
        iVar1 = strcmp(__s1,*ppcVar2);
        if (iVar1 < 0) break;
        if (iVar1 == 0) {
          return ppcVar2;
        }
        ppcVar2 = (char **)ppcVar2[4];
        if (ppcVar2 == (char **)0x0) {
          return (char **)0x0;
        }
      }
      ppcVar2 = (char **)ppcVar2[3];
    } while (ppcVar2 != (char **)0x0);
  }
  return ppcVar2;
}



char ** key_tables_RB_NFIND(long *param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  char **ppcVar4;
  
  if ((char **)*param_1 == (char **)0x0) {
    ppcVar4 = (char **)0x0;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    ppcVar4 = (char **)0x0;
    do {
      while( true ) {
        ppcVar3 = ppcVar1;
        iVar2 = strcmp(__s1,*ppcVar3);
        if (-1 < iVar2) break;
        ppcVar1 = (char **)ppcVar3[3];
        ppcVar4 = ppcVar3;
        if ((char **)ppcVar3[3] == (char **)0x0) {
          return ppcVar3;
        }
      }
      if (iVar2 == 0) {
        return ppcVar3;
      }
      ppcVar1 = (char **)ppcVar3[4];
    } while ((char **)ppcVar3[4] != (char **)0x0);
  }
  return ppcVar4;
}



long key_tables_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x20);
  if (*(long *)(param_1 + 0x20) == 0) {
    lVar2 = *(long *)(param_1 + 0x28);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x18) != param_1)) &&
       (*(long *)(lVar2 + 0x20) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x28), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x20) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x18);
    } while (*(long *)(lVar2 + 0x18) != 0);
  }
  return lVar2;
}



long key_tables_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x18);
  if (*(long *)(param_1 + 0x18) == 0) {
    lVar2 = *(long *)(param_1 + 0x28);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x20) != param_1)) &&
       (*(long *)(lVar2 + 0x18) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x28), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x18) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x20);
    } while (*(long *)(lVar2 + 0x20) != 0);
  }
  return lVar2;
}



long key_tables_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x20);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x18);
    }
  }
  return lVar2;
}



void key_table_cmp(char **param_1,char **param_2)

{
  strcmp(*param_1,*param_2);
  return;
}



ulong key_bindings_cmp(ulong *param_1,ulong *param_2)

{
  ulong uVar1;
  
  uVar1 = 0xffffffff;
  if (*param_2 <= *param_1) {
    uVar1 = (ulong)(*param_2 < *param_1);
  }
  return uVar1;
}



char ** key_bindings_get_table
                  (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  char *param_9,int param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  char *extraout_RAX;
  undefined8 extraout_RDX;
  char **ppcVar2;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined auVar3 [16];
  char *local_58 [7];
  long local_20;
  
  ppcVar2 = local_58;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_58[0] = param_9;
  ppcVar1 = key_tables_RB_FIND((char **)&key_tables,local_58);
  if ((ppcVar1 == (char **)0x0) && (param_10 != 0)) {
    auVar3 = xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x38,
                     ppcVar2,extraout_RDX,param_12,param_13,param_14);
    ppcVar1 = auVar3._0_8_;
    xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,param_6,
            param_7,param_8,param_9,ppcVar2,auVar3._8_8_,param_12,param_13,param_14);
    ppcVar1[1] = (char *)0x0;
    *ppcVar1 = extraout_RAX;
    *(undefined4 *)(ppcVar1 + 2) = 1;
    key_tables_RB_INSERT((char **)&key_tables,ppcVar1);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return ppcVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void key_bindings_unref_table(void **param_1)

{
  void **ppvVar1;
  
  ppvVar1 = param_1 + 2;
  *(int *)ppvVar1 = *(int *)ppvVar1 + -1;
  if (*(int *)ppvVar1 == 0) {
    FUN_00144b90(param_1);
    return;
  }
  return;
}



void key_bindings_add(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     char *param_9,ulong param_10,undefined8 param_11,ulong param_12,
                     undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  ulong *extraout_RAX;
  ulong uVar2;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  undefined4 uVar3;
  undefined4 extraout_var;
  undefined4 extraout_var_00;
  undefined4 uVar4;
  ulong *puVar5;
  ulong *puVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar7;
  
  puVar5 = (ulong *)0x1;
  uVar2 = param_12;
  ppcVar1 = key_bindings_get_table
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                       param_11,param_12,param_13,param_14);
  puVar6 = (ulong *)ppcVar1[1];
joined_r0x001457d6:
  do {
    uVar3 = extraout_EDX;
    uVar4 = extraout_var;
    uVar7 = extraout_XMM0_Da;
    if (puVar6 == (ulong *)0x0) {
LAB_00145800:
      xmalloc(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x38,puVar5,
              CONCAT44(uVar4,uVar3),uVar2,param_13,param_14);
      *extraout_RAX = param_10;
      puVar6 = extraout_RAX;
      key_bindings_RB_INSERT((ulong **)(ppcVar1 + 1),extraout_RAX);
      *(int *)(puVar6 + 2) = (int)param_11;
      puVar6[1] = param_12;
      return;
    }
    if (param_10 < *puVar6) {
      puVar6 = (ulong *)puVar6[3];
      goto joined_r0x001457d6;
    }
    if (param_10 <= *puVar6) {
      puVar5 = puVar6;
      key_bindings_RB_REMOVE((long *)(ppcVar1 + 1),(long)puVar6);
      cmd_list_free((int *)puVar6[1]);
      free(puVar6);
      uVar3 = extraout_EDX_00;
      uVar4 = extraout_var_00;
      uVar7 = extraout_XMM0_Da_00;
      goto LAB_00145800;
    }
    puVar6 = (ulong *)puVar6[4];
  } while( true );
}



void key_bindings_remove(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,char *param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  char **ppcVar2;
  ulong *__ptr;
  
  ppcVar2 = key_bindings_get_table
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
                       param_11,param_12,param_13,param_14);
  if (ppcVar2 != (char **)0x0) {
    __ptr = (ulong *)ppcVar2[1];
    while (__ptr != (ulong *)0x0) {
      if (param_10 < *__ptr) {
        __ptr = (ulong *)__ptr[3];
      }
      else {
        if (param_10 <= *__ptr) {
          key_bindings_RB_REMOVE((long *)(ppcVar2 + 1),(long)__ptr);
          cmd_list_free((int *)__ptr[1]);
          free(__ptr);
          if (ppcVar2[1] != (char *)0x0) {
            return;
          }
          key_tables_RB_REMOVE(&key_tables,(long)ppcVar2);
          ppcVar1 = ppcVar2 + 2;
          *(int *)ppcVar1 = *(int *)ppcVar1 + -1;
          if (*(int *)ppcVar1 != 0) {
            return;
          }
          FUN_00144b90(ppcVar2);
          return;
        }
        __ptr = (ulong *)__ptr[4];
      }
    }
  }
  return;
}



void key_bindings_remove_table
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               char *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  char **ppcVar2;
  
  ppcVar2 = key_bindings_get_table
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
                       param_11,param_12,param_13,param_14);
  if (ppcVar2 != (char **)0x0) {
    key_tables_RB_REMOVE(&key_tables,(long)ppcVar2);
    ppcVar1 = ppcVar2 + 2;
    *(int *)ppcVar1 = *(int *)ppcVar1 + -1;
    if (*(int *)ppcVar1 == 0) {
      FUN_00144b90(ppcVar2);
      return;
    }
  }
  return;
}



void key_bindings_init(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12
                      ,undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  undefined8 *puVar2;
  byte *pbVar3;
  undefined8 extraout_RDX;
  ulong uVar4;
  int **ppiVar5;
  char *pcVar6;
  long *plVar7;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar8;
  undefined in_stack_ffffffffffffffb8;
  int *local_40;
  long local_38;
  long local_30;
  
  uVar4 = 0;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  puVar2 = cmdq_new(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,param_10,
                    param_11,param_12,param_13,param_14);
  uVar8 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  pcVar6 = "bind C-b send-prefix";
  while( true ) {
    pbVar3 = (byte *)(uVar4 & 0xffffffff);
    ppiVar5 = &local_40;
    plVar7 = &local_38;
    iVar1 = cmd_string_parse(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,pcVar6,
                             &local_40,"<default-keys>",pbVar3,&local_38,param_14);
    if (iVar1 != 0) {
                    // WARNING: Subroutine does not return
      fatalx(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "bad default key",ppiVar5,extraout_RDX,pbVar3,plVar7,param_14,in_stack_ffffffffffffffb8
            );
    }
    uVar4 = uVar4 + 1;
    cmdq_run(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             (int *)puVar2,local_40,(undefined4 *)0x0,pbVar3,plVar7,param_14);
    uVar8 = cmd_list_free(local_40);
    if (uVar4 == 0x53) break;
    pcVar6 = (&PTR_s_bind_C_b_send_prefix_00198f80)[uVar4];
  }
  cmdq_free((int *)puVar2);
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void key_bindings_dispatch
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined4 *param_11,ulong param_12,undefined8 param_13)

{
  int *piVar1;
  long lVar2;
  long *plVar3;
  undefined1 in_stack_00000008;
  
  piVar1 = *(int **)(param_9 + 8);
  plVar3 = *(long **)(piVar1 + 2);
  if (plVar3 != (long *)0x0) {
    param_12 = 1;
    param_13 = 0;
    do {
      lVar2 = *plVar3;
      plVar3 = (long *)plVar3[4];
      if ((*(byte *)(lVar2 + 0x34) & 2) == 0) {
        param_12 = 0;
      }
    } while (plVar3 != (long *)0x0);
    if (((int)param_12 == 0) && ((*(byte *)(param_10 + 0x421) & 8) != 0)) {
      cmdq_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 (long)*(int **)(param_10 + 0x5b0),"client is read-only",param_11,param_12,0,piVar1,
                 in_stack_00000008);
      return;
    }
  }
  cmdq_run((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           *(int **)(param_10 + 0x5b0),piVar1,param_11,param_12,param_13,piVar1);
  return;
}



ulong key_string_lookup_string
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                byte *param_9)

{
  byte bVar1;
  char cVar2;
  int iVar3;
  ulong uVar4;
  ulong uVar5;
  char *pcVar6;
  undefined8 uVar7;
  size_t sVar8;
  ulong uVar9;
  undefined7 extraout_var;
  uint *puVar10;
  uint uVar11;
  ulong uVar12;
  ulong uVar13;
  byte *pbVar14;
  byte bVar15;
  undefined8 uVar16;
  undefined **ppuVar17;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar18;
  undefined4 extraout_XMM0_Da_01;
  ushort local_42;
  wchar_t local_40;
  undefined8 local_3c;
  byte local_32;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  iVar3 = strcasecmp((char *)param_9,"None");
  uVar4 = 0xffff00000000;
  if (iVar3 == 0) goto LAB_00145b86;
  bVar15 = *param_9;
  if (bVar15 == 0x30) {
    bVar1 = param_9[1];
    if (bVar1 != 0x78) {
LAB_00145c15:
      uVar9 = 0;
      goto LAB_00145ada;
    }
    iVar3 = __isoc99_sscanf(param_9 + 2,"%hx%n",&local_42,&local_40);
    if ((iVar3 == 1) && (local_40 < L'\x05')) {
      uVar4 = (ulong)local_42;
      goto LAB_00145b86;
    }
  }
  else {
    if (bVar15 == 0x5e) {
      bVar1 = param_9[1];
      if (bVar1 == 0) goto LAB_00145c15;
      uVar9 = 0x400000000000;
      param_9 = param_9 + 1;
      bVar15 = bVar1;
    }
    else {
      uVar9 = 0;
      if (bVar15 == 0) goto LAB_00145bd0;
    }
    bVar1 = param_9[1];
LAB_00145ada:
    uVar5 = 0;
    uVar16 = 0x400000000000;
    puVar10 = &switchD_00145b2f::switchdataD_0017ce08;
    while (bVar1 == 0x2d) {
      if (bVar15 == 0x43) {
switchD_00145b2f_caseD_63:
        uVar5 = uVar5 | 0x400000000000;
        goto switchD_00145b2f_caseD_4e;
      }
      switch(bVar15) {
      case 0x4d:
      case 0x6d:
        uVar5 = uVar5 | 0x200000000000;
      default:
switchD_00145b2f_caseD_4e:
        bVar15 = param_9[2];
        if (bVar15 == 0) goto LAB_00145bd0;
LAB_00145bb5:
        bVar1 = param_9[3];
        param_9 = param_9 + 2;
        break;
      case 0x53:
      case 0x73:
        bVar15 = param_9[2];
        uVar5 = uVar5 | 0x800000000000;
        if (bVar15 != 0) goto LAB_00145bb5;
        goto LAB_00145bd0;
      case 99:
        goto switchD_00145b2f_caseD_63;
      }
    }
    uVar12 = uVar9 | uVar5;
    if (((char)bVar15 < '\0') || (bVar1 != 0)) {
      uVar7 = utf8_open(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        &local_3c,(uint)bVar15,(ulong)bVar1,&switchD_00145b2f::switchdataD_0017ce08,
                        0x800000000000,0x400000000000);
      if ((int)uVar7 == 0) {
        sVar8 = strlen((char *)param_9);
        uVar4 = (ulong)local_32;
        if ((sVar8 == uVar4) && (1 < local_32)) {
          pbVar14 = param_9 + 1;
          uVar18 = extraout_XMM0_Da_00;
          do {
            bVar15 = *pbVar14;
            pbVar14 = pbVar14 + 1;
            uVar9 = utf8_append(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                (char *)&local_3c,(ulong)bVar15,uVar4,puVar10,sVar8,uVar16);
            puVar10 = (uint *)(ulong)local_32;
            uVar11 = (int)pbVar14 - (int)param_9;
            uVar4 = (ulong)uVar11;
            uVar18 = extraout_XMM0_Da_01;
          } while (uVar11 < local_32);
          if (((int)uVar9 == 1) &&
             (cVar2 = utf8_combine((char *)&local_3c,&local_40),
             (int)CONCAT71(extraout_var,cVar2) == 1)) {
            uVar4 = (long)local_40 | uVar12;
            goto LAB_00145b86;
          }
        }
      }
      else {
        ppuVar17 = &PTR_DAT_00199230;
        pcVar6 = "F1";
        uVar4 = 0;
        while (iVar3 = strcasecmp((char *)param_9,pcVar6), iVar3 != 0) {
          uVar11 = (int)uVar4 + 1;
          uVar4 = (ulong)uVar11;
          if (uVar11 == 0x5a) goto LAB_00145bd0;
          pcVar6 = *ppuVar17;
          ppuVar17 = ppuVar17 + 2;
        }
        uVar4 = *(ulong *)(&DAT_00199228 + uVar4 * 0x10);
        if (uVar4 != 0xfffe00000000) {
          uVar13 = uVar4;
          if (uVar4 < 0x100000000000) goto LAB_00145b5f;
          goto LAB_00145b80;
        }
      }
    }
    else {
      uVar13 = (ulong)(char)bVar15;
      if ((0x1f < uVar13) && (uVar13 != 0x7f)) {
LAB_00145b5f:
        uVar4 = uVar13;
        if (((uVar9 | uVar5 & 0x400000000000) != 0) &&
           (pcVar6 = strchr("!#()+,-.0123456789:;<=>?\'\r\t",(int)uVar13), pcVar6 == (char *)0x0)) {
          if (uVar13 - 0x61 < 0x1a) {
            uVar4 = uVar13 - 0x60;
          }
          else {
            uVar4 = uVar13 - 0x40;
            if (0x1f < uVar4) {
              if (uVar13 == 0x20) {
                uVar4 = 0;
              }
              else {
                if (uVar13 != 0x3f) goto LAB_00145bd0;
                uVar4 = 0x10000000002d;
              }
            }
          }
          uVar12 = uVar5 & 0xffffbfffffffffff;
        }
LAB_00145b80:
        uVar4 = uVar4 | uVar12;
        goto LAB_00145b86;
      }
    }
  }
LAB_00145bd0:
  uVar4 = 0xfffe00000000;
LAB_00145b86:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char * key_string_lookup_key
                 (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 ulong param_9)

{
  wchar_t wVar1;
  uint uVar2;
  char *pcVar3;
  ulong uVar4;
  undefined8 uVar5;
  ulong *puVar6;
  ulong uVar7;
  undefined8 in_R8;
  undefined8 in_R9;
  ulong uVar8;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined in_stack_ffffffffffffffc8;
  undefined8 local_34;
  byte local_2a;
  char local_28;
  undefined local_27;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  DAT_0019ea50 = 0;
  pcVar3 = "None";
  if (((param_9 == 0xffff00000000) || (pcVar3 = "Unknown", param_9 == 0xfffe00000000)) ||
     (pcVar3 = "Mouse", param_9 == 0x100000000002)) goto LAB_00145ee0;
  uVar8 = param_9 & 0xffff1fffffffffff;
  if (uVar8 == 0) {
    uVar8 = 0x20;
    param_9 = param_9 & 0xa00000000000;
LAB_00145e57:
    strlcat(&DAT_0019ea50,"C-",0x18);
    uVar7 = param_9 >> 0x2d;
    param_1 = extraout_XMM0_Da;
  }
  else {
    if ((param_9 >> 0x2e & 1) != 0) goto LAB_00145e57;
    uVar7 = param_9 >> 0x2d;
  }
  if ((uVar7 & 1) != 0) {
    strlcat(&DAT_0019ea50,"M-",0x18);
    param_1 = extraout_XMM0_Da_00;
  }
  if ((param_9 >> 0x2f & 1) != 0) {
    strlcat(&DAT_0019ea50,"S-",0x18);
    param_1 = extraout_XMM0_Da_01;
  }
  uVar4 = 0;
  uVar7 = 0x10000000002e;
  puVar6 = &DAT_00199238;
  while (uVar8 != uVar7) {
    uVar2 = (int)uVar4 + 1;
    uVar4 = (ulong)uVar2;
    if (uVar2 == 0x5a) {
      wVar1 = (wchar_t)uVar8;
      if (uVar8 - 0x80 < 0xfffffffff80) {
        uVar5 = utf8_split(wVar1,&local_34);
        if ((int)uVar5 == 1) {
          __memcpy_chk(&DAT_0019ea50,&local_34,(ulong)local_2a,0x18);
          pcVar3 = &DAT_0019ea50;
          (&DAT_0019ea50)[local_2a] = 0;
          goto LAB_00145ee0;
        }
        param_1 = extraout_XMM0_Da_02;
        if (0xff < uVar8) goto LAB_00145fe1;
LAB_00146036:
        xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_28,8,
                  "\\%llo",uVar8,in_R8,in_R9,in_stack_ffffffffffffffc8);
      }
      else {
        if ((uVar8 == 0x7f) || (0xff < uVar8)) {
LAB_00145fe1:
          __snprintf_chk(&DAT_0019ea50,0x18,1,0x18,"Invalid#%llx",uVar8);
          pcVar3 = &DAT_0019ea50;
          goto LAB_00145ee0;
        }
        if (uVar8 < 0x21) {
          uVar2 = wVar1 + L'@';
          if (uVar8 - 1 < 0x1a) {
            uVar2 = wVar1 + L'`';
          }
          xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_28,8,
                    &DAT_0017ca9f,(ulong)uVar2,in_R8,in_R9,in_stack_ffffffffffffffc8);
        }
        else {
          if (0x5e < uVar8 - 0x20) goto LAB_00146036;
          local_28 = (char)uVar8;
          local_27 = 0;
        }
      }
      strlcat(&DAT_0019ea50,&local_28,0x18);
      pcVar3 = &DAT_0019ea50;
      goto LAB_00145ee0;
    }
    uVar7 = *puVar6;
    puVar6 = puVar6 + 2;
  }
  strlcat(&DAT_0019ea50,(&key_string_table)[uVar4 * 2],0x18);
  pcVar3 = &DAT_0019ea50;
LAB_00145ee0:
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return pcVar3;
}



void layout_find_bottomright(int *param_1)

{
  int iVar1;
  
  iVar1 = *param_1;
  while (iVar1 != 2) {
    param_1 = **(int ***)(*(long *)(param_1 + 0xc) + 8);
    iVar1 = *param_1;
  }
  return;
}



ulong layout_checksum(char *param_1,undefined8 param_2,undefined4 param_3)

{
  ulong uVar1;
  int iVar2;
  
  iVar2 = CONCAT22((short)((uint)param_3 >> 0x10),(short)*param_1);
  uVar1 = 0;
  if (*param_1 != '\0') {
    do {
      param_1 = param_1 + 1;
      uVar1 = (ulong)(uint)((int)CONCAT62((int6)(uVar1 >> 0x10),
                                          (ushort)uVar1 >> 1 | (ushort)((uVar1 & 1) != 0) << 0xf) +
                           iVar2);
      iVar2 = CONCAT22((short)((uint)iVar2 >> 0x10),(short)*param_1);
    } while (*param_1 != '\0');
    return uVar1;
  }
  return 0;
}



undefined8
layout_append(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             int *param_9,char *param_10,char *param_11)

{
  int *piVar1;
  undefined4 uVar2;
  uint uVar3;
  char *pcVar4;
  undefined8 uVar5;
  size_t sVar6;
  char *pcVar7;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  char acStack_78 [72];
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_11 != (char *)0x0) {
    if (*(long *)(param_9 + 8) == 0) {
      pcVar7 = "%ux%u,%u,%u";
    }
    else {
      pcVar7 = "%ux%u,%u,%u,%u";
    }
    uVar3 = xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,acStack_78,
                      0x40,pcVar7,(ulong)(uint)param_9[4],(ulong)(uint)param_9[5],
                      (ulong)(uint)param_9[6],(char)param_9[7]);
    if ((uVar3 < 0x40) && (pcVar7 = strlcat(param_10,acStack_78,(long)param_11), pcVar7 < param_11))
    {
      if (*param_9 == 0) {
        pcVar7 = "}{";
      }
      else {
        uVar5 = 0;
        pcVar7 = "][";
        if (*param_9 != 1) goto LAB_00146220;
      }
      pcVar4 = strlcat(param_10,pcVar7 + 1,(long)param_11);
      if (pcVar4 < param_11) {
        uVar2 = extraout_XMM0_Da;
        for (piVar1 = *(int **)(param_9 + 10); piVar1 != (int *)0x0;
            piVar1 = *(int **)(piVar1 + 0xe)) {
          uVar5 = layout_append(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar1
                                ,param_10,param_11);
          if (((int)uVar5 != 0) ||
             (pcVar4 = strlcat(param_10,",",(long)param_11), param_11 <= pcVar4)) goto LAB_00146240;
          uVar2 = extraout_XMM0_Da_00;
        }
        sVar6 = strlen(param_10);
        uVar5 = 0;
        param_10[sVar6 - 1] = *pcVar7;
        goto LAB_00146220;
      }
    }
  }
LAB_00146240:
  uVar5 = 0xffffffff;
LAB_00146220:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar5;
}



long layout_dump(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                int *param_9)

{
  char cVar1;
  ulong uVar2;
  char *pcVar3;
  uint uVar4;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffdfd8;
  long local_2020;
  char local_2018;
  char local_2017 [8199];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_2018 = '\0';
  uVar2 = layout_append(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        &local_2018,(char *)0x2000);
  if ((int)uVar2 == 0) {
    uVar2 = uVar2 & 0xffffffff;
    pcVar3 = &local_2018;
    cVar1 = local_2018;
    if (local_2018 != '\0') {
      do {
        uVar4 = (uint)(ushort)((ushort)uVar2 >> 1 | (ushort)((uVar2 & 1) != 0) << 0xf) +
                (uint)(ushort)(short)cVar1;
        uVar2 = (ulong)uVar4;
        cVar1 = pcVar3[1];
        pcVar3 = pcVar3 + 1;
      } while (cVar1 != '\0');
      uVar2 = (ulong)(ushort)uVar4;
    }
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,&local_2020,"%04x,%s",uVar2,&local_2018,in_R8,in_R9,
              in_stack_ffffffffffffdfd8);
  }
  else {
    local_2020 = 0;
  }
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return local_2020;
}



void layout_assign(long *param_1,uint *param_2)

{
  uint *puVar1;
  
  if (*param_2 < 2) {
    puVar1 = *(uint **)(param_2 + 10);
    if (puVar1 != (uint *)0x0) {
      do {
        layout_assign(param_1,puVar1);
        puVar1 = *(uint **)(puVar1 + 0xe);
      } while (puVar1 != (uint *)0x0);
      return;
    }
  }
  else if (*param_2 == 2) {
    layout_make_leaf(param_2,*param_1);
    *param_1 = *(long *)(*param_1 + 0x1f8);
  }
  return;
}



uint * layout_construct(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,byte **param_10)

{
  byte bVar1;
  ushort *puVar2;
  uint **ppuVar3;
  int iVar4;
  ushort **ppuVar5;
  byte *pbVar6;
  uint *puVar7;
  uint *puVar8;
  byte *pbVar9;
  byte *pbVar10;
  byte *pbVar11;
  byte bVar12;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar13;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar14;
  undefined4 extraout_XMM0_Db_00;
  uint local_30;
  uint local_2c;
  uint local_28;
  uint local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  ppuVar5 = __ctype_b_loc();
  if ((*(byte *)((long)*ppuVar5 + (ulong)**param_10 * 2 + 1) & 8) != 0) {
    puVar7 = &local_24;
    puVar8 = &local_28;
    iVar4 = __isoc99_sscanf(*param_10,&DAT_0017ceb9,&local_30,&local_2c);
    if (iVar4 == 4) {
      pbVar10 = *param_10;
      puVar2 = *ppuVar5;
      bVar12 = *pbVar10;
      bVar1 = *(byte *)((long)puVar2 + (ulong)bVar12 * 2 + 1);
      while ((bVar1 & 8) != 0) {
        pbVar10 = pbVar10 + 1;
        *param_10 = pbVar10;
        bVar12 = *pbVar10;
        bVar1 = *(byte *)((long)puVar2 + (ulong)bVar12 * 2 + 1);
      }
      if (bVar12 == 0x78) {
        pbVar11 = pbVar10 + 1;
        *param_10 = pbVar11;
        bVar12 = pbVar10[1];
        if ((*(byte *)((long)puVar2 + (ulong)bVar12 * 2 + 1) & 8) != 0) {
          pbVar10 = pbVar10 + 2;
          do {
            pbVar11 = pbVar10;
            *param_10 = pbVar11;
            bVar12 = *pbVar11;
            pbVar10 = pbVar11 + 1;
          } while ((*(byte *)((long)puVar2 + (ulong)bVar12 * 2 + 1) & 8) != 0);
        }
        if (bVar12 == 0x2c) {
          pbVar10 = pbVar11 + 1;
          *param_10 = pbVar10;
          bVar12 = pbVar11[1];
          if ((*(byte *)((long)puVar2 + (ulong)bVar12 * 2 + 1) & 8) != 0) {
            pbVar11 = pbVar11 + 2;
            do {
              pbVar10 = pbVar11;
              *param_10 = pbVar10;
              bVar12 = *pbVar10;
              pbVar11 = pbVar10 + 1;
            } while ((*(byte *)((long)puVar2 + (ulong)bVar12 * 2 + 1) & 8) != 0);
          }
          if (bVar12 == 0x2c) {
            pbVar11 = pbVar10 + 1;
            *param_10 = pbVar11;
            pbVar6 = (byte *)(ulong)pbVar10[1];
            if ((*(byte *)((long)puVar2 + (long)pbVar6 * 2 + 1) & 8) != 0) {
              pbVar9 = pbVar10 + 2;
              do {
                pbVar11 = pbVar9;
                *param_10 = pbVar11;
                pbVar6 = (byte *)(ulong)*pbVar11;
                pbVar9 = pbVar11 + 1;
                pbVar10 = pbVar6;
              } while ((*(byte *)((long)puVar2 + (long)pbVar6 * 2 + 1) & 8) != 0);
            }
            if ((char)pbVar6 == ',') {
              *param_10 = pbVar11 + 1;
              pbVar6 = (byte *)(ulong)pbVar11[1];
              if ((*(byte *)((long)puVar2 + (long)pbVar6 * 2 + 1) & 8) != 0) {
                pbVar9 = pbVar11 + 2;
                do {
                  *param_10 = pbVar9;
                  pbVar6 = (byte *)(ulong)*pbVar9;
                  pbVar9 = pbVar9 + 1;
                  pbVar10 = pbVar6;
                } while ((*(byte *)((long)puVar2 + (long)pbVar6 * 2 + 1) & 8) != 0);
              }
              if ((char)pbVar6 == 'x') {
                *param_10 = pbVar11;
              }
            }
            puVar7 = (uint *)layout_create_cell(extraout_XMM0_Da,param_2,param_3,param_4,param_5,
                                                param_6,param_7,param_8,param_9,pbVar10,pbVar6,
                                                puVar2,puVar8,puVar7);
            puVar7[4] = local_30;
            puVar7[5] = local_2c;
            puVar7[6] = local_28;
            puVar7[7] = local_24;
            pbVar10 = *param_10;
            bVar12 = *pbVar10;
            if (bVar12 == 0x5d) goto LAB_001465e3;
            uVar13 = extraout_XMM0_Da_00;
            uVar14 = extraout_XMM0_Db;
            if ((char)bVar12 < '^') {
              if (bVar12 == 0x5b) {
                *puVar7 = 1;
LAB_00146570:
                do {
                  *param_10 = pbVar10 + 1;
                  puVar8 = layout_construct(CONCAT44(uVar14,uVar13),param_2,param_3,param_4,param_5,
                                            param_6,param_7,param_8,puVar7,param_10);
                  if (puVar8 == (uint *)0x0) goto LAB_001465d5;
                  ppuVar3 = *(uint ***)(puVar7 + 0xc);
                  *(undefined8 *)(puVar8 + 0xe) = 0;
                  *(uint ***)(puVar8 + 0x10) = ppuVar3;
                  *ppuVar3 = puVar8;
                  *(uint **)(puVar7 + 0xc) = puVar8 + 0xe;
                  pbVar10 = *param_10;
                  bVar12 = *pbVar10;
                  uVar13 = extraout_XMM0_Da_01;
                  uVar14 = extraout_XMM0_Db_00;
                } while (bVar12 == 0x2c);
                if (*puVar7 == 0) {
                  if (bVar12 == 0x7d) goto LAB_001465c5;
                }
                else if ((*puVar7 == 1) && (bVar12 == 0x5d)) {
LAB_001465c5:
                  *param_10 = pbVar10 + 1;
                  goto LAB_001465e3;
                }
              }
              else if ((bVar12 != 0x5c) && ((bVar12 == 0 || (bVar12 == 0x2c)))) goto LAB_001465e3;
            }
            else {
              if (bVar12 == 0x7b) {
                *puVar7 = 0;
                goto LAB_00146570;
              }
              if (bVar12 == 0x7d) goto LAB_001465e3;
            }
LAB_001465d5:
            layout_free_cell(puVar7);
          }
        }
      }
    }
  }
  puVar7 = (uint *)0x0;
LAB_001465e3:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar7;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
layout_parse(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
            uint *param_9,uint *param_10,undefined8 param_11,undefined8 param_12,ulong param_13,
            undefined8 param_14)

{
  uint *puVar1;
  char cVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  undefined8 uVar6;
  uint *puVar7;
  ushort uVar8;
  undefined8 extraout_RDX;
  uint **ppuVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Db;
  uint *local_50;
  ushort local_42;
  uint *local_40;
  long local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_50 = param_10;
  iVar3 = __isoc99_sscanf(param_10,&DAT_0017cecd,&local_42);
  if (iVar3 == 1) {
    uVar8 = 0;
    puVar1 = (uint *)((long)local_50 + 5);
    cVar2 = *(char *)((long)local_50 + 5);
    puVar7 = puVar1;
    while (cVar2 != '\0') {
      puVar7 = (uint *)((long)puVar7 + 1);
      uVar8 = (uVar8 >> 1 | (ushort)((uVar8 & 1) != 0) << 0xf) + (short)cVar2;
      cVar2 = *(char *)puVar7;
    }
    local_50 = puVar1;
    if (local_42 == uVar8) {
      ppuVar9 = &local_50;
      local_40 = layout_construct(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,0,(byte **)ppuVar9);
      if (local_40 != (uint *)0x0) {
        if (*(char *)local_50 == '\0') {
          while( true ) {
            uVar4 = window_count_panes((long)param_9);
            uVar5 = layout_count_cells(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,
                                       param_7,param_8,local_40,ppuVar9,extraout_RDX,puVar7,param_13
                                       ,param_14);
            if (uVar5 <= uVar4 && uVar4 != uVar5) break;
            if (uVar4 == uVar5) {
              uVar4 = param_9[0x5e];
              uVar5 = param_9[0x5f];
              window_resize((long)param_9,local_40[4],local_40[5]);
              layout_free_cell(*(uint **)(param_9 + 0x58));
              local_38 = *(long *)(param_9 + 0x52);
              *(uint **)(param_9 + 0x58) = local_40;
              layout_assign(&local_38,local_40);
              uVar6 = layout_fix_offsets((int *)local_40);
              uVar6 = layout_fix_panes(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                                       ,(long)param_9,local_40[4],local_40[5],puVar7,param_13,
                                       param_14);
              layout_resize(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9,uVar4,uVar5,(ulong)puVar7);
              uVar10 = window_resize((long)param_9,uVar4,uVar5);
              uVar10 = layout_print_cell(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,
                                         param_8,local_40,"layout_parse",0);
              notify_window_layout_changed
                        (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
              uVar6 = 0;
              goto LAB_0014678c;
            }
            uVar4 = *local_40;
            puVar1 = local_40;
            while (uVar4 != 2) {
              puVar1 = **(uint ***)(*(long *)(puVar1 + 0xc) + 8);
              uVar4 = *puVar1;
            }
            ppuVar9 = &local_40;
            layout_destroy_cell(puVar1,(long *)&local_40);
          }
        }
        layout_free_cell(local_40);
      }
    }
  }
  uVar6 = 0xffffffff;
LAB_0014678c:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



void layout_set_even_h(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9)

{
  undefined8 *puVar1;
  ulong uVar2;
  uint uVar3;
  int *piVar4;
  undefined4 *puVar5;
  ulong uVar6;
  ulong uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar8;
  undefined8 extraout_RDX_02;
  long lVar9;
  char *pcVar10;
  long lVar11;
  undefined8 in_R8;
  ulong uVar12;
  undefined8 in_R9;
  int iVar13;
  uint uVar14;
  undefined4 uVar15;
  
  pcVar10 = "layout_set_even_h";
  layout_print_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(uint **)(param_9 + 0x160),"layout_set_even_h",1);
  uVar3 = window_count_panes(param_9);
  if (1 < uVar3) {
    uVar6 = (ulong)uVar3;
    uVar3 = ((*(int *)(param_9 + 0x178) + 1) - uVar3) / uVar3;
    uVar14 = 2;
    if (1 < uVar3) {
      uVar14 = uVar3;
    }
    uVar15 = layout_free(param_9);
    piVar4 = (int *)layout_create_cell(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,0,pcVar10,extraout_RDX,uVar6,in_R8,in_R9);
    uVar12 = 0;
    uVar6 = 0;
    *(int **)(param_9 + 0x160) = piVar4;
    uVar15 = layout_set_size((long)piVar4,*(undefined4 *)(param_9 + 0x178),
                             *(undefined4 *)(param_9 + 0x17c),0,0);
    lVar11 = 0;
    uVar15 = layout_make_node(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar4,
                              0,extraout_RDX_00,uVar6,uVar12,in_R9);
    lVar9 = *(long *)(param_9 + 0x148);
    if (lVar9 != 0) {
      uVar7 = uVar6;
      uVar8 = extraout_RDX_01;
      uVar2 = 0;
      do {
        uVar6 = uVar2;
        puVar5 = (undefined4 *)
                 layout_create_cell(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    piVar4,lVar11,uVar8,uVar7,uVar12,in_R9);
        iVar13 = (int)uVar6;
        uVar12 = 0;
        layout_set_size((long)puVar5,uVar14,*(undefined4 *)(param_9 + 0x17c),iVar13,0);
        lVar11 = lVar9;
        uVar15 = layout_make_leaf(puVar5,lVar9);
        puVar1 = *(undefined8 **)(piVar4 + 0xc);
        uVar3 = iVar13 + uVar14 + 1;
        *(undefined8 *)(puVar5 + 0xe) = 0;
        lVar9 = *(long *)(lVar9 + 0x1f8);
        *(undefined8 **)(puVar5 + 0x10) = puVar1;
        *puVar1 = puVar5;
        *(undefined4 **)(piVar4 + 0xc) = puVar5 + 0xe;
        uVar7 = uVar6;
        uVar8 = extraout_RDX_02;
        uVar2 = (ulong)uVar3;
      } while (lVar9 != 0);
      if (uVar3 - 1 < *(uint *)(param_9 + 0x178)) {
        piVar4 = **(int ***)(puVar5 + 0x10);
        layout_resize_adjust(piVar4,0,(*(uint *)(param_9 + 0x178) + 1) - uVar3);
      }
    }
    uVar8 = layout_fix_offsets(piVar4);
    uVar15 = layout_fix_panes(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                              *(uint *)(param_9 + 0x178),*(uint *)(param_9 + 0x17c),uVar6,uVar12,
                              in_R9);
    layout_print_cell(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      *(uint **)(param_9 + 0x160),"layout_set_even_h",1);
    server_redraw_window(param_9);
    return;
  }
  return;
}



void layout_set_even_v(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9)

{
  undefined8 *puVar1;
  ulong uVar2;
  uint uVar3;
  int *piVar4;
  undefined4 *puVar5;
  ulong uVar6;
  undefined8 uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar8;
  undefined8 extraout_RDX_02;
  long lVar9;
  char *pcVar10;
  long lVar11;
  undefined8 in_R8;
  ulong uVar12;
  undefined8 in_R9;
  int iVar13;
  uint uVar14;
  undefined4 uVar15;
  
  pcVar10 = "layout_set_even_v";
  layout_print_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(uint **)(param_9 + 0x160),"layout_set_even_v",1);
  uVar3 = window_count_panes(param_9);
  if (1 < uVar3) {
    uVar6 = (ulong)uVar3;
    uVar3 = ((*(int *)(param_9 + 0x17c) + 1) - uVar3) / uVar3;
    uVar14 = 2;
    if (1 < uVar3) {
      uVar14 = uVar3;
    }
    uVar15 = layout_free(param_9);
    piVar4 = (int *)layout_create_cell(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,0,pcVar10,extraout_RDX,uVar6,in_R8,in_R9);
    uVar6 = 0;
    uVar7 = 0;
    *(int **)(param_9 + 0x160) = piVar4;
    uVar15 = layout_set_size((long)piVar4,*(undefined4 *)(param_9 + 0x178),
                             *(undefined4 *)(param_9 + 0x17c),0,0);
    lVar11 = 1;
    uVar15 = layout_make_node(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar4,
                              1,extraout_RDX_00,uVar7,uVar6,in_R9);
    lVar9 = *(long *)(param_9 + 0x148);
    if (lVar9 != 0) {
      uVar8 = extraout_RDX_01;
      uVar12 = uVar6;
      uVar2 = 0;
      do {
        uVar6 = uVar2;
        puVar5 = (undefined4 *)
                 layout_create_cell(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    piVar4,lVar11,uVar8,uVar7,uVar12,in_R9);
        iVar13 = (int)uVar6;
        uVar7 = 0;
        layout_set_size((long)puVar5,*(undefined4 *)(param_9 + 0x178),uVar14,0,iVar13);
        lVar11 = lVar9;
        uVar15 = layout_make_leaf(puVar5,lVar9);
        puVar1 = *(undefined8 **)(piVar4 + 0xc);
        uVar3 = iVar13 + uVar14 + 1;
        *(undefined8 *)(puVar5 + 0xe) = 0;
        lVar9 = *(long *)(lVar9 + 0x1f8);
        *(undefined8 **)(puVar5 + 0x10) = puVar1;
        *puVar1 = puVar5;
        *(undefined4 **)(piVar4 + 0xc) = puVar5 + 0xe;
        uVar8 = extraout_RDX_02;
        uVar12 = uVar6;
        uVar2 = (ulong)uVar3;
      } while (lVar9 != 0);
      if (uVar3 - 1 < *(uint *)(param_9 + 0x17c)) {
        piVar4 = **(int ***)(puVar5 + 0x10);
        layout_resize_adjust(piVar4,1,(*(uint *)(param_9 + 0x17c) + 1) - uVar3);
      }
    }
    uVar8 = layout_fix_offsets(piVar4);
    uVar15 = layout_fix_panes(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                              *(uint *)(param_9 + 0x178),*(uint *)(param_9 + 0x17c),uVar7,uVar6,
                              in_R9);
    layout_print_cell(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      *(uint **)(param_9 + 0x160),"layout_set_even_v",1);
    server_redraw_window(param_9);
    return;
  }
  return;
}



void layout_set_tiled(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9)

{
  int **ppiVar1;
  undefined8 *puVar2;
  bool bVar3;
  undefined8 uVar4;
  uint uVar5;
  uint uVar6;
  int *piVar7;
  int *piVar8;
  undefined4 *puVar9;
  ulong uVar10;
  long lVar11;
  uint uVar12;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong extraout_RDX_01;
  undefined8 extraout_RDX_02;
  ulong extraout_RDX_03;
  ulong extraout_RDX_04;
  ulong extraout_RDX_05;
  ulong extraout_RDX_06;
  ulong uVar13;
  uint uVar14;
  uint uVar15;
  int iVar16;
  char *pcVar17;
  ulong uVar18;
  long lVar19;
  undefined8 in_R8;
  undefined8 in_R9;
  uint uVar20;
  long lVar21;
  undefined4 uVar22;
  uint local_64;
  uint local_60;
  uint local_5c;
  
  pcVar17 = "layout_set_tiled";
  layout_print_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(uint **)(param_9 + 0x160),"layout_set_tiled",1);
  local_5c = window_count_panes(param_9);
  if (local_5c < 2) {
    return;
  }
  uVar18 = 1;
  do {
    uVar10 = uVar18;
    uVar14 = (uint)uVar10;
    uVar15 = uVar14 + 1;
    local_64 = uVar14;
    if (local_5c <= uVar15 * uVar14) break;
    uVar18 = (ulong)uVar15;
    local_64 = uVar15;
  } while (uVar15 * uVar15 < local_5c);
  uVar5 = ((*(int *)(param_9 + 0x178) + 1) - local_64) / local_64;
  if (uVar5 < 2) {
    uVar5 = 2;
  }
  uVar6 = (*(int *)(param_9 + 0x17c) - uVar14) / uVar15;
  uVar14 = 2;
  if (1 < uVar6) {
    uVar14 = uVar6;
  }
  uVar22 = layout_free(param_9);
  piVar7 = (int *)layout_create_cell(uVar22,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     0,pcVar17,extraout_RDX,uVar10,in_R8,in_R9);
  iVar16 = uVar5 + 1;
  uVar10 = 0;
  lVar11 = 0;
  *(int **)(param_9 + 0x160) = piVar7;
  uVar6 = (uVar14 + 1) * uVar15 - 1;
  uVar22 = layout_set_size((long)piVar7,iVar16 * local_64 + -1,uVar6,0,0);
  uVar18 = 1;
  uVar22 = layout_make_node(uVar22,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar7,1,
                            extraout_RDX_00,lVar11,uVar10,in_R9);
  lVar21 = *(long *)(param_9 + 0x148);
  if (lVar21 != 0) {
    local_60 = 0;
    uVar13 = extraout_RDX_01;
    if (uVar15 != 0) {
      do {
        piVar8 = (int *)layout_create_cell(uVar22,param_2,param_3,param_4,param_5,param_6,param_7,
                                           param_8,piVar7,uVar18,uVar13,lVar11,uVar10,in_R9);
        uVar10 = 0;
        lVar11 = 0;
        uVar22 = layout_set_size((long)piVar8,*(undefined4 *)(param_9 + 0x178),uVar14,0,0);
        ppiVar1 = *(int ***)(piVar7 + 0xc);
        local_60 = local_60 + 1;
        *(undefined8 *)(piVar8 + 0xe) = 0;
        *(int ***)(piVar8 + 0x10) = ppiVar1;
        *ppiVar1 = piVar8;
        *(int **)(piVar7 + 0xc) = piVar8 + 0xe;
        bVar3 = uVar15 <= local_60;
        if ((local_5c == 1) || (local_64 == 1)) {
          uVar22 = layout_make_leaf(piVar8,lVar21);
          lVar21 = *(long *)(lVar21 + 0x1f8);
          bVar3 = bVar3 || lVar21 == 0;
          uVar13 = extraout_RDX_06;
        }
        else {
          lVar19 = 0;
          uVar20 = 0;
          uVar22 = layout_make_node(uVar22,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    piVar8,0,extraout_RDX_02,lVar11,uVar10,in_R9);
          uVar18 = extraout_RDX_03;
          if (local_64 == 0) {
            bVar3 = bVar3 || lVar21 == 0;
            uVar13 = extraout_RDX_03;
          }
          else {
            do {
              puVar9 = (undefined4 *)
                       layout_create_cell(uVar22,param_2,param_3,param_4,param_5,param_6,param_7,
                                          param_8,piVar8,lVar19,uVar18,lVar11,uVar10,in_R9);
              uVar10 = 0;
              lVar11 = 0;
              layout_set_size((long)puVar9,uVar5,uVar14,0,0);
              lVar19 = lVar21;
              uVar22 = layout_make_leaf(puVar9,lVar21);
              puVar2 = *(undefined8 **)(piVar8 + 0xc);
              lVar21 = *(long *)(lVar21 + 0x1f8);
              *(undefined8 *)(puVar9 + 0xe) = 0;
              *(undefined8 **)(puVar9 + 0x10) = puVar2;
              *puVar2 = puVar9;
              *(undefined4 **)(piVar8 + 0xc) = puVar9 + 0xe;
              if (lVar21 == 0) {
                if (local_64 != uVar20) {
                  uVar12 = *(uint *)(param_9 + 0x178);
                  uVar20 = (uVar20 + 1) * iVar16 - 1;
                  lVar11 = param_9;
                  if (uVar12 <= uVar20) goto LAB_00146e50;
                  bVar3 = true;
                  goto LAB_00146e29;
                }
                bVar3 = true;
                break;
              }
              uVar20 = uVar20 + 1;
              uVar18 = extraout_RDX_04;
            } while (uVar20 != local_64);
            uVar12 = *(uint *)(param_9 + 0x178);
            uVar13 = (ulong)uVar12;
            uVar20 = iVar16 * uVar20 - 1;
            lVar11 = param_9;
            if (uVar20 < uVar12) {
LAB_00146e29:
              lVar11 = param_9;
              uVar22 = layout_resize_adjust(**(int ***)(puVar9 + 0x10),0,uVar12 - uVar20);
              uVar13 = extraout_RDX_05;
            }
          }
        }
        uVar18 = (ulong)local_64;
        local_5c = local_5c - local_64;
      } while (!bVar3);
    }
  }
LAB_00146e50:
  if (uVar6 < *(uint *)(param_9 + 0x17c)) {
    layout_resize_adjust
              (**(int ***)(*(long *)(piVar7 + 0xc) + 8),1,*(uint *)(param_9 + 0x17c) - uVar6);
  }
  uVar4 = layout_fix_offsets(piVar7);
  uVar22 = layout_fix_panes(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            *(uint *)(param_9 + 0x178),*(uint *)(param_9 + 0x17c),lVar11,uVar10,
                            in_R9);
  layout_print_cell(uVar22,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(uint **)(param_9 + 0x160),"layout_set_tiled",1);
  server_redraw_window(param_9);
  return;
}



void layout_set_main_h(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9)

{
  uint uVar1;
  int **ppiVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  char *pcVar6;
  int *piVar7;
  undefined4 *puVar8;
  int *piVar9;
  ulong uVar10;
  undefined8 uVar11;
  uint uVar12;
  int iVar13;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 *puVar14;
  undefined8 *extraout_RDX_06;
  undefined8 *extraout_RDX_07;
  uint uVar15;
  uint uVar16;
  undefined8 uVar17;
  long lVar18;
  ulong uVar19;
  undefined8 in_R8;
  undefined8 uVar20;
  undefined8 in_R9;
  uint uVar21;
  int iVar22;
  long lVar23;
  bool bVar24;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar25;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  uint local_58;
  uint local_3c;
  
  layout_print_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(uint **)(param_9 + 0x160),"layout_set_main_h",1);
  uVar5 = window_count_panes(param_9);
  if (uVar5 < 2) {
    return;
  }
  uVar1 = *(uint *)(param_9 + 0x178);
  uVar10 = (ulong)uVar1;
  uVar19 = 1;
  if (2 < uVar1 + 1) {
    uVar19 = (ulong)(uVar1 + 1) / 3;
  }
  uVar3 = (uint)((uVar5 - 2) / uVar19);
  uVar15 = uVar3 + 1;
  uVar4 = (uVar5 - 2) / uVar15;
  uVar16 = uVar4 + 1;
  uVar5 = (uVar1 + 2) - uVar5;
  uVar1 = uVar5 / uVar16;
  pcVar6 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                              param_5,param_6,param_7,param_8,*(char ***)(param_9 + 0x188),
                              "main-pane-height",(ulong)uVar5 % (ulong)uVar16,uVar10,in_R8,in_R9);
  uVar5 = (int)pcVar6 + 1;
  pcVar6 = options_get_number(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                              param_4,param_5,param_6,param_7,param_8,*(char ***)(param_9 + 0x188),
                              "other-pane-height",extraout_RDX,uVar10,in_R8,in_R9);
  uVar12 = (int)pcVar6 + 1;
  if (uVar12 < 2) {
    uVar21 = *(uint *)(param_9 + 0x17c);
  }
  else {
    uVar21 = *(uint *)(param_9 + 0x17c);
    uVar12 = uVar21 - uVar12;
    if (uVar5 < uVar12) {
      uVar5 = uVar12;
    }
  }
  local_3c = 3;
  if (2 < uVar5) {
    local_3c = uVar5;
  }
  iVar13 = uVar15 * 3;
  uVar5 = iVar13 - 1;
  uVar10 = (ulong)uVar5;
  if (uVar21 < local_3c + uVar5) {
    uVar19 = (ulong)(iVar13 + 2U);
    if (uVar21 < iVar13 + 2U) {
      local_3c = 4;
      iVar22 = 3;
      uVar5 = 2;
    }
    else {
      local_3c = uVar21 - uVar5;
      uVar5 = 2;
      iVar22 = local_3c - 1;
    }
  }
  else {
    uVar19 = (ulong)local_3c;
    iVar22 = local_3c - 1;
    uVar5 = ((uVar21 - uVar3) - local_3c) / uVar15;
    iVar13 = (uVar5 + 1) * uVar15;
  }
  uVar25 = layout_free(param_9);
  piVar7 = (int *)layout_create_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     0,uVar19,extraout_RDX_00,uVar10,in_R8,in_R9);
  uVar20 = 0;
  uVar11 = 0;
  *(int **)(param_9 + 0x160) = piVar7;
  uVar25 = layout_set_size((long)piVar7,*(undefined4 *)(param_9 + 0x178),iVar22 + iVar13,0,0);
  uVar17 = 1;
  uVar25 = layout_make_node(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar7,1,
                            extraout_RDX_01,uVar11,uVar20,in_R9);
  puVar8 = (undefined4 *)
           layout_create_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar7,
                              uVar17,extraout_RDX_02,uVar11,uVar20,in_R9);
  uVar19 = 0;
  uVar10 = 0;
  layout_set_size((long)puVar8,*(undefined4 *)(param_9 + 0x178),iVar22,0,0);
  lVar18 = *(long *)(param_9 + 0x148);
  uVar25 = layout_make_leaf(puVar8,lVar18);
  puVar14 = *(undefined8 **)(piVar7 + 0xc);
  *(undefined8 *)(puVar8 + 0xe) = 0;
  local_58 = 0;
  *(undefined8 **)(puVar8 + 0x10) = puVar14;
  *puVar14 = puVar8;
  *(undefined4 **)(piVar7 + 0xc) = puVar8 + 0xe;
  lVar23 = *(long *)(*(long *)(param_9 + 0x148) + 0x1f8);
  do {
    if (lVar23 == 0) break;
    piVar9 = (int *)layout_create_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,piVar7,lVar18,puVar14,uVar10,uVar19,in_R9);
    uVar19 = 0;
    uVar11 = 0;
    uVar25 = layout_set_size((long)piVar9,*(undefined4 *)(param_9 + 0x178),uVar5,0,0);
    ppiVar2 = *(int ***)(piVar7 + 0xc);
    *(undefined8 *)(piVar9 + 0xe) = 0;
    *(int ***)(piVar9 + 0x10) = ppiVar2;
    *ppiVar2 = piVar9;
    *(int **)(piVar7 + 0xc) = piVar9 + 0xe;
    if (uVar16 == 1) {
      lVar18 = lVar23;
      uVar25 = layout_make_leaf(piVar9,lVar23);
      lVar23 = *(long *)(lVar23 + 0x1f8);
      puVar14 = extraout_RDX_07;
    }
    else {
      lVar18 = 0;
      uVar25 = layout_make_node(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                piVar9,0,extraout_RDX_03,uVar11,uVar19,in_R9);
      uVar17 = extraout_RDX_04;
      uVar12 = 0;
      do {
        puVar8 = (undefined4 *)
                 layout_create_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    piVar9,lVar18,uVar17,uVar11,uVar19,in_R9);
        uVar19 = 0;
        uVar11 = 0;
        layout_set_size((long)puVar8,uVar1,uVar5,0,0);
        lVar18 = lVar23;
        uVar25 = layout_make_leaf(puVar8,lVar23);
        puVar14 = *(undefined8 **)(piVar9 + 0xc);
        lVar23 = *(long *)(lVar23 + 0x1f8);
        *(undefined8 *)(puVar8 + 0xe) = 0;
        *(undefined8 **)(puVar8 + 0x10) = puVar14;
        *puVar14 = puVar8;
        *(undefined4 **)(piVar9 + 0xc) = puVar8 + 0xe;
        uVar21 = uVar16;
        if (lVar23 == 0) {
          if (uVar16 != uVar12) {
            uVar21 = uVar12 + 1;
          }
          break;
        }
        bVar24 = uVar4 != uVar12;
        uVar17 = extraout_RDX_05;
        uVar12 = uVar12 + 1;
      } while (bVar24);
      uVar12 = *(uint *)(param_9 + 0x178);
      puVar14 = (undefined8 *)(ulong)uVar12;
      uVar21 = uVar21 * (uVar1 + 1) - 1;
      if (uVar21 < uVar12) {
        lVar18 = 0;
        uVar25 = layout_resize_adjust(**(int ***)(puVar8 + 0x10),0,uVar12 - uVar21);
        puVar14 = extraout_RDX_06;
      }
    }
    uVar10 = (ulong)local_58;
    bVar24 = uVar3 != local_58;
    local_58 = local_58 + 1;
  } while (bVar24);
  uVar5 = uVar5 * uVar15 + uVar3 + local_3c;
  if (uVar5 < *(uint *)(param_9 + 0x17c)) {
    layout_resize_adjust
              (**(int ***)(*(long *)(piVar7 + 0xc) + 8),1,*(uint *)(param_9 + 0x17c) - uVar5);
  }
  uVar11 = layout_fix_offsets(piVar7);
  uVar25 = layout_fix_panes(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            *(uint *)(param_9 + 0x178),*(uint *)(param_9 + 0x17c),uVar10,uVar19,
                            in_R9);
  layout_print_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(uint **)(param_9 + 0x160),"layout_set_main_h",1);
  server_redraw_window(param_9);
  return;
}



void layout_set_main_v(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9)

{
  uint uVar1;
  int **ppiVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  char *pcVar6;
  int *piVar7;
  undefined4 *puVar8;
  int *piVar9;
  ulong uVar10;
  undefined8 uVar11;
  uint uVar12;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 uVar13;
  undefined8 extraout_RDX_05;
  undefined8 *puVar14;
  undefined8 *extraout_RDX_06;
  undefined8 *extraout_RDX_07;
  uint uVar15;
  uint uVar16;
  char *pcVar17;
  long lVar18;
  ulong uVar19;
  undefined8 in_R8;
  undefined8 uVar20;
  undefined8 in_R9;
  uint uVar21;
  int iVar22;
  long lVar23;
  bool bVar24;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar25;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  uint local_58;
  uint local_3c;
  
  layout_print_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(uint **)(param_9 + 0x160),"layout_set_main_v",1);
  uVar5 = window_count_panes(param_9);
  if (uVar5 < 2) {
    return;
  }
  uVar1 = *(uint *)(param_9 + 0x17c);
  uVar10 = (ulong)uVar1;
  uVar19 = 1;
  if (2 < uVar1 + 1) {
    uVar19 = (ulong)(uVar1 + 1) / 3;
  }
  uVar3 = (uint)((uVar5 - 2) / uVar19);
  uVar15 = uVar3 + 1;
  uVar4 = (uVar5 - 2) / uVar15;
  uVar16 = uVar4 + 1;
  uVar5 = (uVar1 + 2) - uVar5;
  uVar1 = uVar5 / uVar16;
  pcVar6 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                              param_5,param_6,param_7,param_8,*(char ***)(param_9 + 0x188),
                              "main-pane-width",(ulong)uVar5 % (ulong)uVar16,uVar10,in_R8,in_R9);
  pcVar17 = "other-pane-width";
  uVar5 = (int)pcVar6 + 1;
  pcVar6 = options_get_number(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                              param_4,param_5,param_6,param_7,param_8,*(char ***)(param_9 + 0x188),
                              "other-pane-width",extraout_RDX,uVar10,in_R8,in_R9);
  uVar12 = (int)pcVar6 + 1;
  if (uVar12 < 2) {
    uVar21 = *(uint *)(param_9 + 0x178);
  }
  else {
    uVar21 = *(uint *)(param_9 + 0x178);
    uVar12 = uVar21 - uVar12;
    if (uVar5 < uVar12) {
      uVar5 = uVar12;
    }
  }
  local_3c = 3;
  if (2 < uVar5) {
    local_3c = uVar5;
  }
  uVar5 = uVar15 * 3;
  if (uVar21 < local_3c + (uVar5 - 1)) {
    uVar10 = (ulong)(uVar5 + 2);
    if (uVar21 < uVar5 + 2) {
      local_3c = 4;
      iVar22 = 3;
      uVar12 = 2;
    }
    else {
      local_3c = uVar21 - (uVar5 - 1);
      uVar12 = 2;
      iVar22 = local_3c - 1;
    }
  }
  else {
    uVar10 = (ulong)local_3c;
    iVar22 = local_3c - 1;
    uVar12 = ((uVar21 - uVar3) - local_3c) / uVar15;
    uVar5 = (uVar12 + 1) * uVar15;
    pcVar17 = (char *)(ulong)uVar5;
  }
  uVar25 = layout_free(param_9);
  piVar7 = (int *)layout_create_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     0,pcVar17,extraout_RDX_00,uVar10,in_R8,in_R9);
  uVar20 = 0;
  uVar11 = 0;
  *(int **)(param_9 + 0x160) = piVar7;
  uVar25 = layout_set_size((long)piVar7,iVar22 + uVar5,*(undefined4 *)(param_9 + 0x17c),0,0);
  uVar13 = 0;
  uVar25 = layout_make_node(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar7,0,
                            extraout_RDX_01,uVar11,uVar20,in_R9);
  puVar8 = (undefined4 *)
           layout_create_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar7,
                              uVar13,extraout_RDX_02,uVar11,uVar20,in_R9);
  uVar19 = 0;
  uVar11 = 0;
  layout_set_size((long)puVar8,iVar22,*(undefined4 *)(param_9 + 0x17c),0,0);
  uVar10 = *(ulong *)(param_9 + 0x148);
  uVar25 = layout_make_leaf(puVar8,uVar10);
  puVar14 = *(undefined8 **)(piVar7 + 0xc);
  *(undefined8 *)(puVar8 + 0xe) = 0;
  local_58 = 0;
  *(undefined8 **)(puVar8 + 0x10) = puVar14;
  *puVar14 = puVar8;
  *(undefined4 **)(piVar7 + 0xc) = puVar8 + 0xe;
  lVar23 = *(long *)(*(long *)(param_9 + 0x148) + 0x1f8);
  do {
    if (lVar23 == 0) break;
    piVar9 = (int *)layout_create_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,piVar7,uVar10,puVar14,uVar11,uVar19,in_R9);
    uVar19 = 0;
    uVar11 = 0;
    uVar25 = layout_set_size((long)piVar9,uVar12,*(undefined4 *)(param_9 + 0x17c),0,0);
    ppiVar2 = *(int ***)(piVar7 + 0xc);
    *(undefined8 *)(piVar9 + 0xe) = 0;
    *(int ***)(piVar9 + 0x10) = ppiVar2;
    *ppiVar2 = piVar9;
    *(int **)(piVar7 + 0xc) = piVar9 + 0xe;
    if (uVar16 == 1) {
      uVar25 = layout_make_leaf(piVar9,lVar23);
      lVar23 = *(long *)(lVar23 + 0x1f8);
      puVar14 = extraout_RDX_07;
    }
    else {
      lVar18 = 1;
      uVar25 = layout_make_node(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                piVar9,1,extraout_RDX_03,uVar11,uVar19,in_R9);
      uVar13 = extraout_RDX_04;
      uVar5 = 0;
      do {
        puVar8 = (undefined4 *)
                 layout_create_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    piVar9,lVar18,uVar13,uVar11,uVar19,in_R9);
        uVar19 = 0;
        uVar11 = 0;
        layout_set_size((long)puVar8,uVar12,uVar1,0,0);
        lVar18 = lVar23;
        uVar25 = layout_make_leaf(puVar8,lVar23);
        puVar14 = *(undefined8 **)(piVar9 + 0xc);
        lVar23 = *(long *)(lVar23 + 0x1f8);
        *(undefined8 *)(puVar8 + 0xe) = 0;
        *(undefined8 **)(puVar8 + 0x10) = puVar14;
        *puVar14 = puVar8;
        *(undefined4 **)(piVar9 + 0xc) = puVar8 + 0xe;
        uVar21 = uVar16;
        if (lVar23 == 0) {
          if (uVar16 != uVar5) {
            uVar21 = uVar5 + 1;
          }
          break;
        }
        bVar24 = uVar4 != uVar5;
        uVar13 = extraout_RDX_05;
        uVar5 = uVar5 + 1;
      } while (bVar24);
      uVar5 = *(uint *)(param_9 + 0x17c);
      puVar14 = (undefined8 *)(ulong)uVar5;
      uVar21 = uVar21 * (uVar1 + 1) - 1;
      if (uVar21 < uVar5) {
        uVar25 = layout_resize_adjust(**(int ***)(puVar8 + 0x10),1,uVar5 - uVar21);
        puVar14 = extraout_RDX_06;
      }
    }
    uVar10 = (ulong)local_58;
    bVar24 = uVar3 != local_58;
    local_58 = local_58 + 1;
  } while (bVar24);
  uVar5 = uVar12 * uVar15 + uVar3 + local_3c;
  if (uVar5 < *(uint *)(param_9 + 0x178)) {
    layout_resize_adjust
              (**(int ***)(*(long *)(piVar7 + 0xc) + 8),0,*(uint *)(param_9 + 0x178) - uVar5);
  }
  uVar13 = layout_fix_offsets(piVar7);
  uVar25 = layout_fix_panes(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            *(uint *)(param_9 + 0x178),*(uint *)(param_9 + 0x17c),uVar11,uVar19,
                            in_R9);
  layout_print_cell(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(uint **)(param_9 + 0x160),"layout_set_main_v",1);
  server_redraw_window(param_9);
  return;
}



int layout_set_lookup(char *param_1)

{
  int iVar1;
  size_t __n;
  int iVar2;
  undefined1 *puVar3;
  int iVar4;
  
  puVar3 = layout_sets;
  iVar2 = 0;
  __n = strlen(param_1);
  iVar1 = strncmp("even-horizontal",param_1,__n);
  iVar4 = -1;
  if (iVar1 != 0) goto LAB_00147845;
  do {
    iVar4 = iVar2;
LAB_00147845:
    do {
      iVar2 = iVar2 + 1;
      puVar3 = (undefined1 *)((long)puVar3 + 0x10);
      if (iVar2 == 5) {
        return iVar4;
      }
      iVar1 = strncmp(*(char **)puVar3,param_1,__n);
    } while (iVar1 != 0);
  } while (iVar4 == -1);
  return -1;
}



uint layout_set_select(long param_1,uint param_2)

{
  uint uVar1;
  
  uVar1 = 4;
  if (param_2 < 5) {
    uVar1 = param_2;
  }
  if (*(code **)(layout_sets + (ulong)uVar1 * 0x10 + 8) != (code *)0x0) {
    (**(code **)(layout_sets + (ulong)uVar1 * 0x10 + 8))();
  }
  *(uint *)(param_1 + 0x158) = uVar1;
  return uVar1;
}



uint layout_set_next(long param_1)

{
  code *pcVar1;
  uint uVar2;
  
  if ((*(int *)(param_1 + 0x158) == -1) || (uVar2 = *(int *)(param_1 + 0x158) + 1, 4 < uVar2)) {
    pcVar1 = layout_set_even_h;
    uVar2 = 0;
  }
  else {
    pcVar1 = *(code **)(layout_sets + (ulong)uVar2 * 0x10 + 8);
    if (pcVar1 == (code *)0x0) {
      *(uint *)(param_1 + 0x158) = uVar2;
      return uVar2;
    }
  }
  (*pcVar1)(param_1);
  *(uint *)(param_1 + 0x158) = uVar2;
  return uVar2;
}



ulong layout_set_previous(long param_1)

{
  int iVar1;
  uint uVar2;
  code *pcVar3;
  ulong uVar4;
  
  iVar1 = *(int *)(param_1 + 0x158);
  if ((iVar1 == -1) || (iVar1 == 0)) {
    pcVar3 = layout_set_tiled;
    uVar2 = 4;
    uVar4 = 4;
  }
  else {
    uVar2 = iVar1 - 1;
    uVar4 = (ulong)uVar2;
    pcVar3 = *(code **)(layout_sets + uVar4 * 0x10 + 8);
    if (pcVar3 == (code *)0x0) {
      *(uint *)(param_1 + 0x158) = uVar2;
      return (ulong)uVar2;
    }
  }
  (*pcVar3)(param_1);
  *(uint *)(param_1 + 0x158) = uVar2;
  return uVar4;
}



void layout_create_cell(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,undefined8 param_10,undefined8 param_11,
                       undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)
           xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x48,param_10,
                   param_11,param_12,param_13,param_14);
  *puVar1 = 2;
  *(undefined8 *)(puVar1 + 2) = param_9;
  *(undefined4 **)(puVar1 + 0xc) = puVar1 + 10;
  *(undefined8 *)(puVar1 + 4) = 0xffffffffffffffff;
  *(undefined8 *)(puVar1 + 6) = 0xffffffffffffffff;
  *(undefined8 *)(puVar1 + 8) = 0;
  *(undefined8 *)(puVar1 + 10) = 0;
  return;
}



void layout_free_cell(uint *param_1)

{
  long *plVar1;
  long lVar2;
  uint *puVar3;
  
  if (*param_1 < 2) {
    puVar3 = *(uint **)(param_1 + 10);
    if (puVar3 != (uint *)0x0) {
      lVar2 = *(long *)(puVar3 + 0xe);
      plVar1 = *(long **)(puVar3 + 0x10);
      if (lVar2 == 0) goto LAB_00147a7c;
      do {
        *(long **)(lVar2 + 0x40) = plVar1;
        plVar1 = *(long **)(puVar3 + 0x10);
        while( true ) {
          *plVar1 = lVar2;
          layout_free_cell(puVar3);
          puVar3 = *(uint **)(param_1 + 10);
          if (puVar3 == (uint *)0x0) goto LAB_00147a35;
          lVar2 = *(long *)(puVar3 + 0xe);
          plVar1 = *(long **)(puVar3 + 0x10);
          if (lVar2 != 0) break;
LAB_00147a7c:
          *(long **)(param_1 + 0xc) = plVar1;
        }
      } while( true );
    }
  }
  else if ((*param_1 == 2) && (*(long *)(param_1 + 8) != 0)) {
    *(undefined8 *)(*(long *)(param_1 + 8) + 0x10) = 0;
  }
LAB_00147a35:
  free(param_1);
  return;
}



void layout_print_cell(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      uint *param_9,undefined8 param_10,uint param_11)

{
  uint *puVar1;
  undefined4 uVar2;
  
  uVar2 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "%s:%*s%p type %u [parent %p] wp=%p [%u,%u %ux%u]",param_10,(ulong)param_11,
                   &DAT_00178815,param_9,(char)*param_9);
  if ((*param_9 < 2) && (puVar1 = *(uint **)(param_9 + 10), puVar1 != (uint *)0x0)) {
    do {
      uVar2 = layout_print_cell(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar1
                                ,param_10,param_11 + 1);
      puVar1 = *(uint **)(puVar1 + 0xe);
    } while (puVar1 != (uint *)0x0);
    return;
  }
  return;
}



void layout_set_size(long param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5)

{
  *(undefined4 *)(param_1 + 0x10) = param_2;
  *(undefined4 *)(param_1 + 0x14) = param_3;
  *(undefined4 *)(param_1 + 0x18) = param_4;
  *(undefined4 *)(param_1 + 0x1c) = param_5;
  return;
}



void layout_make_leaf(undefined4 *param_1,long param_2)

{
  *param_1 = 2;
  *(undefined8 *)(param_1 + 10) = 0;
  *(undefined4 **)(param_1 + 0xc) = param_1 + 10;
  *(undefined4 **)(param_2 + 0x10) = param_1;
  *(long *)(param_1 + 8) = param_2;
  return;
}



void layout_make_node(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     int *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  undefined1 in_AL;
  
  if ((int)param_10 != 2) {
    *param_9 = (int)param_10;
    *(int **)(param_9 + 0xc) = param_9 + 10;
    *(undefined8 *)(param_9 + 10) = 0;
    if (*(long *)(param_9 + 8) != 0) {
      *(undefined8 *)(*(long *)(param_9 + 8) + 0x10) = 0;
    }
    *(undefined8 *)(param_9 + 8) = 0;
    return;
  }
                    // WARNING: Subroutine does not return
  fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad layout type",param_10,
         param_11,param_12,param_13,param_14,in_AL);
}



void layout_fix_offsets(int *param_1)

{
  int *piVar1;
  int iVar2;
  int *piVar3;
  int iVar4;
  
  piVar3 = *(int **)(param_1 + 10);
  if (*param_1 == 0) {
    if (piVar3 != (int *)0x0) {
      iVar4 = param_1[6];
      do {
        iVar2 = param_1[7];
        piVar3[6] = iVar4;
        piVar3[7] = iVar2;
        if (*piVar3 != 2) {
          layout_fix_offsets(piVar3);
        }
        piVar1 = piVar3 + 4;
        piVar3 = *(int **)(piVar3 + 0xe);
        iVar4 = iVar4 + 1 + *piVar1;
      } while (piVar3 != (int *)0x0);
    }
  }
  else if (piVar3 != (int *)0x0) {
    iVar4 = param_1[7];
    do {
      iVar2 = param_1[6];
      piVar3[7] = iVar4;
      piVar3[6] = iVar2;
      if (*piVar3 != 2) {
        layout_fix_offsets(piVar3);
      }
      piVar1 = piVar3 + 5;
      piVar3 = *(int **)(piVar3 + 0xe);
      iVar4 = iVar4 + 1 + *piVar1;
    } while (piVar3 != (int *)0x0);
    return;
  }
  return;
}



void layout_fix_panes(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,uint param_10,uint param_11,undefined8 param_12,ulong param_13,
                     undefined8 param_14)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  uint uVar4;
  uint uVar5;
  
  for (lVar2 = *(long *)(param_9 + 0x148); lVar2 != 0; lVar2 = *(long *)(lVar2 + 0x1f8)) {
    lVar3 = *(long *)(lVar2 + 0x10);
    if (lVar3 != 0) {
      uVar4 = *(uint *)(lVar3 + 0x18);
      uVar1 = *(uint *)(lVar3 + 0x1c);
      uVar5 = *(uint *)(lVar3 + 0x10);
      *(uint *)(lVar2 + 0x28) = uVar4;
      *(uint *)(lVar2 + 0x2c) = uVar1;
      if (uVar4 < param_10) {
        param_13 = (ulong)(param_10 - uVar4);
        if (param_10 <= uVar4 + uVar5) {
          uVar5 = param_10 - uVar4;
        }
      }
      uVar4 = *(uint *)(lVar3 + 0x14);
      if (((uVar1 < param_11) && (param_11 <= uVar1 + uVar4)) && (param_11 - uVar1 != 1)) {
        uVar4 = param_11 - uVar1;
      }
      param_1 = window_pane_resize(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   lVar2,uVar5,uVar4,(ulong)uVar1,param_13,param_14);
    }
  }
  return;
}



int layout_count_cells(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                      undefined8 param_13,undefined8 param_14)

{
  uint *puVar1;
  int iVar2;
  undefined8 extraout_RDX;
  int iVar3;
  undefined4 extraout_XMM0_Da;
  undefined1 in_stack_ffffffffffffffe8;
  
  if (*param_9 < 2) {
    iVar3 = 0;
    for (puVar1 = *(uint **)(param_9 + 10); puVar1 != (uint *)0x0; puVar1 = *(uint **)(puVar1 + 0xe)
        ) {
      iVar2 = layout_count_cells(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 puVar1,param_10,param_11,param_12,param_13,param_14);
      iVar3 = iVar3 + iVar2;
      param_1 = extraout_XMM0_Da;
      param_11 = extraout_RDX;
    }
    return iVar3;
  }
  if (*param_9 != 2) {
                    // WARNING: Subroutine does not return
    fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad layout type",
           param_10,param_11,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
  }
  return 1;
}



uint layout_resize_check(int *param_1,int param_2)

{
  int *piVar1;
  uint uVar2;
  uint uVar3;
  
  if (*param_1 == 2) {
    uVar3 = param_1[5];
    if (param_2 == 0) {
      uVar3 = param_1[4];
    }
    uVar2 = uVar3 - 2;
    if (uVar3 < 3) {
      uVar2 = 0;
    }
    return uVar2;
  }
  piVar1 = *(int **)(param_1 + 10);
  if (*param_1 == param_2) {
    uVar3 = 0;
    for (; piVar1 != (int *)0x0; piVar1 = *(int **)(piVar1 + 0xe)) {
      uVar2 = layout_resize_check(piVar1,param_2);
      uVar3 = uVar3 + uVar2;
    }
  }
  else {
    uVar3 = 0xffffffff;
    while (piVar1 != (int *)0x0) {
      uVar2 = layout_resize_check(piVar1,param_2);
      piVar1 = *(int **)(piVar1 + 0xe);
      if (uVar2 < uVar3) {
        uVar3 = uVar2;
      }
    }
  }
  return uVar3;
}



void layout_resize_adjust(int *param_1,int param_2,int param_3)

{
  uint uVar1;
  int *piVar2;
  
  if (param_2 == 0) {
    param_1[4] = param_1[4] + param_3;
    if (*param_1 != 0) {
LAB_00147e9a:
      piVar2 = *(int **)(param_1 + 10);
      if (piVar2 == (int *)0x0) {
        return;
      }
      do {
        layout_resize_adjust(piVar2,param_2,param_3);
        piVar2 = *(int **)(piVar2 + 0xe);
      } while (piVar2 != (int *)0x0);
      return;
    }
  }
  else {
    param_1[5] = param_1[5] + param_3;
    if (param_2 == 2) {
      return;
    }
    if (*param_1 != param_2) goto LAB_00147e9a;
  }
LAB_00147e0b:
  do {
    if (param_3 == 0) {
      return;
    }
    piVar2 = *(int **)(param_1 + 10);
    do {
    } while (piVar2 == (int *)0x0);
    do {
      while (0 < param_3) {
        param_3 = param_3 + -1;
        layout_resize_adjust(piVar2,param_2,1);
LAB_00147e4e:
        piVar2 = *(int **)(piVar2 + 0xe);
        if (piVar2 == (int *)0x0) goto LAB_00147e0b;
        if (param_3 == 0) {
          return;
        }
      }
      uVar1 = layout_resize_check(piVar2,param_2);
      if (uVar1 != 0) {
        param_3 = param_3 + 1;
        layout_resize_adjust(piVar2,param_2,-1);
        goto LAB_00147e4e;
      }
      piVar2 = *(int **)(piVar2 + 0xe);
    } while (piVar2 != (int *)0x0);
  } while( true );
}



void layout_destroy_cell(uint *param_1,long *param_2)

{
  uint *puVar1;
  long lVar2;
  undefined8 *puVar3;
  long lVar4;
  long lVar5;
  long *plVar6;
  int *piVar7;
  
  puVar1 = *(uint **)(param_1 + 2);
  if (puVar1 == (uint *)0x0) {
    layout_free_cell(param_1);
    *param_2 = 0;
    return;
  }
  if (*(uint **)(puVar1 + 10) == param_1) {
    piVar7 = *(int **)(param_1 + 0xe);
  }
  else {
    piVar7 = **(int ***)(*(long *)(param_1 + 0x10) + 8);
  }
  if (*puVar1 == 0) {
    layout_resize_adjust(piVar7,0,param_1[4] + 1);
    lVar2 = *(long *)(param_1 + 0xe);
    plVar6 = *(long **)(param_1 + 0x10);
  }
  else {
    layout_resize_adjust(piVar7,*puVar1,param_1[5] + 1);
    lVar2 = *(long *)(param_1 + 0xe);
    plVar6 = *(long **)(param_1 + 0x10);
  }
  if (lVar2 == 0) {
    *(long **)(puVar1 + 0xc) = plVar6;
  }
  else {
    *(long **)(lVar2 + 0x40) = plVar6;
    plVar6 = *(long **)(param_1 + 0x10);
  }
  *plVar6 = lVar2;
  layout_free_cell(param_1);
  lVar2 = *(long *)(puVar1 + 10);
  if (*(long *)(lVar2 + 0x38) == 0) {
    puVar3 = *(undefined8 **)(lVar2 + 0x40);
    *(undefined8 **)(puVar1 + 0xc) = puVar3;
    *puVar3 = 0;
    lVar4 = *(long *)(puVar1 + 2);
    *(long *)(lVar2 + 8) = lVar4;
    if (lVar4 == 0) {
      *(undefined8 *)(lVar2 + 0x18) = 0;
      *param_2 = lVar2;
    }
    else {
      lVar5 = *(long *)(puVar1 + 0xe);
      *(long *)(lVar2 + 0x38) = lVar5;
      if (lVar5 == 0) {
        *(long *)(lVar4 + 0x30) = lVar2 + 0x38;
      }
      else {
        *(long *)(lVar5 + 0x40) = lVar2 + 0x38;
      }
      plVar6 = *(long **)(puVar1 + 0x10);
      *(long **)(lVar2 + 0x40) = plVar6;
      *plVar6 = lVar2;
    }
    layout_free_cell(puVar1);
    return;
  }
  return;
}



void layout_init(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,long param_10,undefined8 param_11,undefined8 param_12,ulong param_13,
                undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  undefined4 *puVar3;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  
  puVar3 = (undefined4 *)
           layout_create_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                              param_10,param_11,param_12,param_13,param_14);
  uVar1 = *(uint *)(param_9 + 0x17c);
  uVar2 = *(uint *)(param_9 + 0x178);
  *(undefined4 **)(param_9 + 0x160) = puVar3;
  puVar3[4] = uVar2;
  puVar3[5] = uVar1;
  *(undefined8 *)(puVar3 + 6) = 0;
  *puVar3 = 2;
  *(undefined8 *)(puVar3 + 10) = 0;
  *(undefined4 **)(puVar3 + 0xc) = puVar3 + 10;
  *(undefined4 **)(param_10 + 0x10) = puVar3;
  *(long *)(puVar3 + 8) = param_10;
  layout_fix_panes(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,param_9,uVar2,uVar1,puVar3 + 10,param_13,param_14);
  return;
}



void layout_free(long param_1)

{
  layout_free_cell(*(uint **)(param_1 + 0x160));
  return;
}



void layout_resize(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,uint param_10,uint param_11,ulong param_12)

{
  uint uVar1;
  uint uVar2;
  uint extraout_EDX;
  uint extraout_EDX_00;
  uint uVar3;
  ulong uVar4;
  int *piVar5;
  undefined8 uVar6;
  
  uVar4 = (ulong)param_10;
  piVar5 = *(int **)(param_9 + 0x160);
  uVar1 = layout_resize_check(piVar5,0);
  uVar3 = extraout_EDX;
  if ((int)extraout_EDX < 0) {
    uVar2 = -uVar1;
    param_12 = (ulong)uVar2;
    uVar3 = extraout_EDX;
    if (SBORROW4(extraout_EDX,uVar2) != (int)(extraout_EDX + uVar1) < 0) {
      uVar3 = uVar2;
    }
  }
  if (uVar1 == 0) {
    if ((uint)piVar5[4] < (uint)uVar4) {
      uVar3 = (uint)uVar4 - piVar5[4];
LAB_00148145:
      layout_resize_adjust(piVar5,0,uVar3);
    }
  }
  else if (uVar3 != 0) goto LAB_00148145;
  uVar1 = layout_resize_check(piVar5,1);
  uVar3 = extraout_EDX_00;
  if ((int)extraout_EDX_00 < 0) {
    uVar2 = -uVar1;
    param_12 = (ulong)uVar2;
    uVar3 = extraout_EDX_00;
    if (SBORROW4(extraout_EDX_00,uVar2) != (int)(extraout_EDX_00 + uVar1) < 0) {
      uVar3 = uVar2;
    }
  }
  if (uVar1 == 0) {
    if (param_11 <= (uint)piVar5[5]) goto LAB_00148107;
    uVar3 = param_11 - piVar5[5];
  }
  else if (uVar3 == 0) goto LAB_00148107;
  layout_resize_adjust(piVar5,1,uVar3);
LAB_00148107:
  uVar6 = layout_fix_offsets(piVar5);
  layout_fix_panes(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,(uint)uVar4
                   ,param_11,param_12,param_9,uVar4);
  return;
}



ulong layout_resize_pane_grow(int *param_1,uint param_2)

{
  uint uVar1;
  uint extraout_EDX;
  uint uVar2;
  uint extraout_EDX_00;
  int *piVar3;
  int iVar4;
  ulong uVar5;
  
  uVar5 = (ulong)param_2;
  for (piVar3 = *(int **)(param_1 + 0xe); piVar3 != (int *)0x0; piVar3 = *(int **)(piVar3 + 0xe)) {
    uVar1 = layout_resize_check(piVar3,(int)uVar5);
    iVar4 = (int)uVar5;
    uVar2 = extraout_EDX;
    if (uVar1 != 0) goto LAB_00148198;
  }
  piVar3 = **(int ***)(*(long *)(param_1 + 0x10) + 8);
  while( true ) {
    if (piVar3 == (int *)0x0) {
      return 0;
    }
    uVar1 = layout_resize_check(piVar3,(int)uVar5);
    iVar4 = (int)uVar5;
    uVar2 = extraout_EDX_00;
    if (uVar1 != 0) break;
    piVar3 = **(int ***)(*(long *)(piVar3 + 0x10) + 8);
  }
LAB_00148198:
  if (uVar2 <= uVar1) {
    uVar1 = uVar2;
  }
  uVar5 = (ulong)uVar1;
  layout_resize_adjust(param_1,iVar4,uVar1);
  layout_resize_adjust(piVar3,iVar4,-(int)uVar5);
  return uVar5 & 0xffffffff;
}



ulong layout_resize_pane_shrink(int *param_1,uint param_2)

{
  uint uVar1;
  int extraout_EDX;
  int *piVar2;
  int iVar3;
  ulong uVar4;
  
  uVar4 = (ulong)param_2;
  piVar2 = param_1;
  do {
    uVar1 = layout_resize_check(piVar2,(int)uVar4);
    iVar3 = (int)uVar4;
    if (uVar1 != 0) {
      if (piVar2 == (int *)0x0) {
        return 0;
      }
      uVar4 = 0;
      if (*(int **)(param_1 + 0xe) != (int *)0x0) {
        if ((uint)-extraout_EDX <= uVar1) {
          uVar1 = -extraout_EDX;
        }
        uVar4 = (ulong)uVar1;
        layout_resize_adjust(*(int **)(param_1 + 0xe),iVar3,uVar1);
        layout_resize_adjust(piVar2,iVar3,-(int)uVar4);
      }
      return uVar4 & 0xffffffff;
    }
    piVar2 = **(int ***)(*(long *)(piVar2 + 0x10) + 8);
  } while (piVar2 != (int *)0x0);
  return 0;
}



void layout_resize_pane(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,uint param_10,int param_11,undefined8 param_12,ulong param_13,
                       undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  uint *puVar3;
  int iVar4;
  int iVar5;
  ulong uVar6;
  int iVar7;
  uint *puVar8;
  undefined4 uVar9;
  
  puVar8 = *(uint **)(param_9 + 0x10);
  puVar3 = *(uint **)(*(uint **)(param_9 + 0x10) + 2);
  while( true ) {
    if (puVar3 == (uint *)0x0) {
      return;
    }
    if (*puVar3 == param_10) break;
    puVar8 = puVar3;
    puVar3 = *(uint **)(puVar3 + 2);
  }
  iVar7 = param_11;
  if (**(uint ***)(*(long *)(puVar3 + 0xc) + 8) == puVar8) {
    puVar8 = **(uint ***)(*(long *)(puVar8 + 0x10) + 8);
  }
  do {
    if (iVar7 == 0) break;
    if (param_11 < 1) {
      uVar6 = layout_resize_pane_shrink((int *)puVar8,param_10);
      iVar5 = (int)uVar6;
      iVar4 = iVar5;
    }
    else {
      uVar6 = layout_resize_pane_grow((int *)puVar8,param_10);
      iVar4 = (int)uVar6;
      iVar5 = -iVar4;
    }
    iVar7 = iVar7 + iVar5;
  } while (iVar4 != 0);
  uVar2 = layout_fix_offsets(*(int **)(*(long *)(param_9 + 8) + 0x160));
  lVar1 = *(long *)(param_9 + 8);
  uVar9 = layout_fix_panes(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                           *(uint *)(lVar1 + 0x178),*(uint *)(lVar1 + 0x17c),param_12,param_13,
                           param_14);
  notify_window_layout_changed
            (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*(uint **)(param_9 + 8));
  return;
}



void layout_resize_pane_to
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,int param_11)

{
  uint uVar1;
  uint *puVar2;
  uint *puVar3;
  int iVar4;
  uint *puVar5;
  
  puVar2 = *(uint **)(*(uint **)(param_9 + 0x10) + 2);
  puVar5 = *(uint **)(param_9 + 0x10);
  if (puVar2 == (uint *)0x0) {
    return;
  }
  do {
    puVar3 = puVar2;
    if (*puVar3 == param_10) {
      uVar1 = puVar5[5];
      if (param_10 == 0) {
        uVar1 = puVar5[4];
      }
      iVar4 = param_11 - uVar1;
      if (**(uint ***)(*(long *)(puVar3 + 0xc) + 8) == puVar5) {
        iVar4 = uVar1 - param_11;
      }
      layout_resize_pane(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,iVar4,(ulong)uVar1,(ulong)puVar5,
                         *(uint ***)(*(long *)(puVar3 + 0xc) + 8));
      return;
    }
    puVar2 = *(uint **)(puVar3 + 2);
    puVar5 = puVar3;
  } while (*(uint **)(puVar3 + 2) != (uint *)0x0);
  return;
}



void layout_assign_pane(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined4 *param_9,long param_10,undefined8 param_11,undefined8 param_12,
                       ulong param_13,undefined8 param_14)

{
  long lVar1;
  
  *param_9 = 2;
  *(undefined8 *)(param_9 + 10) = 0;
  *(undefined4 **)(param_9 + 0xc) = param_9 + 10;
  *(undefined4 **)(param_10 + 0x10) = param_9;
  *(long *)(param_9 + 8) = param_10;
  lVar1 = *(long *)(param_10 + 8);
  layout_fix_panes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                   *(uint *)(lVar1 + 0x178),*(uint *)(lVar1 + 0x17c),param_12,param_13,param_14);
  return;
}



undefined4 *
layout_split_pane(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,undefined4 *param_10,int *param_11,ulong param_12)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  undefined4 *puVar5;
  long lVar6;
  long lVar7;
  int **ppiVar8;
  undefined8 *puVar9;
  undefined4 *puVar10;
  int *piVar11;
  uint uVar12;
  int *piVar13;
  int iVar14;
  undefined4 *puVar15;
  ulong uVar16;
  uint uVar17;
  int iVar18;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar19;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined auVar20 [16];
  undefined in_stack_ffffffffffffffa8;
  
  iVar14 = (int)param_10;
  puVar5 = *(undefined4 **)(param_9 + 0x10);
  iVar18 = (int)param_12;
  uVar1 = puVar5[4];
  uVar2 = puVar5[5];
  uVar3 = puVar5[6];
  uVar16 = (ulong)uVar3;
  iVar4 = puVar5[7];
  uVar17 = uVar1;
  if ((iVar14 != 0) && (piVar13 = param_11, uVar17 = uVar2, iVar14 != 1)) goto LAB_00148826;
  if (uVar17 < 5) {
    return (undefined4 *)0x0;
  }
  piVar13 = *(int **)(puVar5 + 2);
  puVar15 = puVar5;
  if (piVar13 == (int *)0x0) {
    piVar11 = (int *)layout_create_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                        param_8,0,param_10,param_11,param_12,param_9,uVar16);
    uVar19 = extraout_XMM0_Da_01;
LAB_001484c8:
    piVar13 = piVar11 + 10;
    *piVar11 = iVar14;
    *(undefined8 *)(piVar11 + 10) = 0;
    *(int **)(piVar11 + 0xc) = piVar13;
    if (*(long *)(piVar11 + 8) != 0) {
      *(undefined8 *)(*(long *)(piVar11 + 8) + 0x10) = 0;
    }
    lVar6 = *(long *)(puVar5 + 2);
    *(undefined8 *)(piVar11 + 8) = 0;
    piVar11[4] = uVar1;
    piVar11[5] = uVar2;
    piVar11[6] = uVar3;
    piVar11[7] = iVar4;
    if (lVar6 == 0) {
      *(int **)(*(long *)(param_9 + 8) + 0x160) = piVar11;
      *(int **)(puVar5 + 2) = piVar11;
      *(undefined8 *)(puVar5 + 0xe) = 0;
LAB_00148673:
      *(undefined4 **)(piVar11 + 0xc) = puVar5 + 0xe;
    }
    else {
      lVar7 = *(long *)(puVar5 + 0xe);
      *(long *)(piVar11 + 0xe) = lVar7;
      if (lVar7 == 0) {
        *(int **)(lVar6 + 0x30) = piVar11 + 0xe;
      }
      else {
        *(int **)(lVar7 + 0x40) = piVar11 + 0xe;
      }
      ppiVar8 = *(int ***)(puVar5 + 0x10);
      *(int ***)(piVar11 + 0x10) = ppiVar8;
      *ppiVar8 = piVar11;
      lVar6 = *(long *)(piVar11 + 10);
      *(int **)(puVar5 + 2) = piVar11;
      *(long *)(puVar5 + 0xe) = lVar6;
      if (lVar6 == 0) goto LAB_00148673;
      *(undefined4 **)(lVar6 + 0x40) = puVar5 + 0xe;
    }
    *(undefined4 **)(piVar11 + 10) = puVar5;
    *(int **)(puVar5 + 0x10) = piVar13;
    puVar10 = (undefined4 *)
              layout_create_cell(uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 piVar11,puVar5 + 0xe,piVar13,param_12,param_9,(ulong)uVar3);
    param_1 = extraout_XMM0_Da_00;
    if (iVar18 == 0) {
      puVar9 = *(undefined8 **)(piVar11 + 0xc);
      *(undefined8 *)(puVar10 + 0xe) = 0;
      *(undefined8 **)(puVar10 + 0x10) = puVar9;
      *puVar9 = puVar10;
      piVar13 = puVar10 + 0xe;
      *(int **)(piVar11 + 0xc) = piVar13;
      param_10 = puVar10;
    }
    else {
      lVar6 = *(long *)(piVar11 + 10);
      *(long *)(puVar10 + 0xe) = lVar6;
      if (lVar6 == 0) {
        *(undefined4 **)(piVar11 + 0xc) = puVar10 + 0xe;
      }
      else {
        *(undefined4 **)(lVar6 + 0x40) = puVar10 + 0xe;
      }
      *(undefined4 **)(piVar11 + 10) = puVar10;
      *(int **)(puVar10 + 0x10) = piVar13;
      param_10 = puVar5;
      puVar15 = puVar10;
    }
  }
  else {
    if (*piVar13 != iVar14) {
      auVar20 = layout_create_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   piVar13,param_10,param_11,param_12,param_9,uVar16);
      piVar13 = auVar20._8_8_;
      piVar11 = auVar20._0_8_;
      param_1 = extraout_XMM0_Da;
      uVar19 = extraout_XMM0_Da;
      if (iVar14 == 2) goto LAB_00148826;
      goto LAB_001484c8;
    }
    puVar10 = (undefined4 *)
              layout_create_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 piVar13,param_10,param_11,param_12,param_9,uVar16);
    param_12 = param_12 & 0xffffffff;
    param_1 = extraout_XMM0_Da_02;
    if (iVar18 == 0) {
      lVar6 = *(long *)(puVar5 + 0xe);
      *(long *)(puVar10 + 0xe) = lVar6;
      if (lVar6 == 0) {
        *(undefined4 **)(piVar13 + 0xc) = puVar10 + 0xe;
      }
      else {
        *(undefined4 **)(lVar6 + 0x40) = puVar10 + 0xe;
      }
      piVar13 = puVar5 + 0xe;
      *(undefined4 **)(puVar5 + 0xe) = puVar10;
      *(int **)(puVar10 + 0x10) = piVar13;
      param_10 = puVar10;
    }
    else {
      puVar9 = *(undefined8 **)(puVar5 + 0x10);
      *(undefined4 **)(puVar10 + 0xe) = puVar5;
      *(undefined8 **)(puVar10 + 0x10) = puVar9;
      *puVar9 = puVar10;
      piVar13 = puVar10 + 0xe;
      *(int **)(puVar5 + 0x10) = piVar13;
      param_10 = puVar5;
      puVar15 = puVar10;
    }
  }
  uVar17 = (uint)param_11;
  if (iVar14 == 0) {
    if ((int)uVar17 < 0) {
      uVar17 = (uVar1 + 1 >> 1) - 1;
    }
    else if (iVar18 != 0) {
      uVar17 = ~uVar17 + uVar1;
    }
    uVar12 = 2;
    if ((1 < uVar17) && (uVar12 = uVar1 - 2, uVar17 < uVar1 - 2)) {
      uVar12 = uVar17;
    }
    puVar15[5] = uVar2;
    iVar18 = (uVar1 - 1) - uVar12;
    puVar15[6] = uVar3;
    puVar15[4] = iVar18;
    puVar15[7] = iVar4;
    param_10[4] = uVar12;
    param_10[5] = uVar2;
    param_10[6] = uVar3 + 1 + iVar18;
    param_10[7] = iVar4;
  }
  else {
    if (iVar14 != 1) {
LAB_00148826:
                    // WARNING: Subroutine does not return
      fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad layout type",
             param_10,piVar13,param_12,param_9,(ulong)uVar3,in_stack_ffffffffffffffa8);
    }
    if ((int)uVar17 < 0) {
      uVar17 = (uVar2 + 1 >> 1) - 1;
    }
    else if (iVar18 != 0) {
      uVar17 = ~uVar17 + uVar2;
    }
    uVar12 = 2;
    if ((1 < uVar17) && (uVar12 = uVar2 - 2, uVar17 < uVar2 - 2)) {
      uVar12 = uVar17;
    }
    puVar15[4] = uVar1;
    iVar18 = (uVar2 - 1) - uVar12;
    puVar15[6] = uVar3;
    puVar15[5] = iVar18;
    puVar15[7] = iVar4;
    param_10[5] = uVar12;
    param_10[4] = uVar1;
    param_10[6] = uVar3;
    param_10[7] = iVar4 + 1 + iVar18;
  }
  *puVar5 = 2;
  *(undefined8 *)(puVar5 + 10) = 0;
  *(undefined4 **)(puVar5 + 0xc) = puVar5 + 10;
  *(undefined4 **)(param_9 + 0x10) = puVar5;
  *(long *)(puVar5 + 8) = param_9;
  return puVar10;
}



void layout_close_pane(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                      undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  uint *puVar3;
  int *piVar4;
  undefined4 uVar5;
  
  uVar5 = layout_destroy_cell(*(uint **)(param_9 + 0x10),(long *)(*(long *)(param_9 + 8) + 0x160));
  puVar3 = *(uint **)(param_9 + 8);
  piVar4 = *(int **)(puVar3 + 0x58);
  if (piVar4 != (int *)0x0) {
    uVar2 = layout_fix_offsets(piVar4);
    lVar1 = *(long *)(param_9 + 8);
    uVar5 = layout_fix_panes(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                             *(uint *)(lVar1 + 0x178),*(uint *)(lVar1 + 0x17c),param_12,
                             (ulong)piVar4,param_14);
    puVar3 = *(uint **)(param_9 + 8);
  }
  notify_window_layout_changed(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar3)
  ;
  return;
}



void FUN_001488a0(undefined8 param_1,undefined8 param_2)

{
  FILE *pFVar1;
  int iVar2;
  long in_FS_OFFSET;
  char *local_38;
  void *local_30;
  undefined local_28 [24];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  iVar2 = __vasprintf_chk(&local_38,1,param_1,param_2);
  if ((iVar2 != -1) && (iVar2 = stravis(&local_30,local_38,0x1b), iVar2 != -1)) {
    gettimeofday((timeval *)local_28,(__timezone_ptr_t)0x0);
    pFVar1 = DAT_0019ea70;
    iVar2 = fileno(DAT_0019ea70);
    if (iVar2 < 3) {
      iVar2 = __fprintf_chk(pFVar1,1,"%s\n",local_30);
    }
    else {
      iVar2 = __fprintf_chk(pFVar1,1,"%lld.%06d %s\n",local_28._0_8_,local_28._8_4_,local_30);
    }
    if (iVar2 != -1) {
      fflush(DAT_0019ea70);
      free(local_30);
      free(local_38);
      if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
        __stack_chk_fail();
      }
      return;
    }
  }
                    // WARNING: Subroutine does not return
  exit(1);
}



void log_add_level(void)

{
  DAT_0019ea68 = DAT_0019ea68 + 1;
  return;
}



undefined4 log_get_level(void)

{
  return DAT_0019ea68;
}



void log_open_fp(FILE *param_1)

{
  FILE *__stream;
  int iVar1;
  
  __stream = DAT_0019ea70;
  if (DAT_0019ea70 != (FILE *)0x0) {
    iVar1 = fileno(DAT_0019ea70);
    if (2 < iVar1) {
      fclose(__stream);
    }
  }
  DAT_0019ea70 = param_1;
  setvbuf(param_1,(char *)0x0,1,0);
  event_set_log_callback(FUN_00148bf0);
  return;
}



void log_open(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             undefined8 param_9)

{
  long lVar1;
  __pid_t _Var2;
  FILE *pFVar3;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined in_stack_ffffffffffffffe8;
  undefined7 uStack_17;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (DAT_0019ea68 != 0) {
    _Var2 = getpid();
    xasprintf(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              (long *)&stack0xffffffffffffffe8,"tmate-%s-%ld.log",param_9,(long)_Var2,in_R8,in_R9,
              in_stack_ffffffffffffffe8);
    pFVar3 = fopen((char *)CONCAT71(uStack_17,in_stack_ffffffffffffffe8),"w");
    free((void *)CONCAT71(uStack_17,in_stack_ffffffffffffffe8));
    if (pFVar3 != (FILE *)0x0) {
      log_open_fp(pFVar3);
    }
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void log_close(void)

{
  FILE *__stream;
  int iVar1;
  
  __stream = DAT_0019ea70;
  if (DAT_0019ea70 != (FILE *)0x0) {
    iVar1 = fileno(DAT_0019ea70);
    if (2 < iVar1) {
      fclose(__stream);
    }
  }
  DAT_0019ea70 = (FILE *)0x0;
  event_set_log_callback(0);
  return;
}



void log_emit(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,int param_9
             ,undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
             undefined8 param_14,undefined param_15)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined in_register_00001204 [12];
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [16];
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._4_12_ = in_register_00001204;
    local_88._0_4_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_a8 = param_11;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  if (param_9 <= DAT_0019ea68) {
    local_d0 = &param_15;
    local_d8 = 0x10;
    local_c8 = local_b8;
    local_d4 = 0x30;
    if (DAT_0019ea70 != 0) {
      FUN_001488a0(param_10,&local_d8);
    }
  }
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00148bf0(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  undefined1 in_stack_00000008;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s",param_10,param_12,
           param_13,param_14,in_stack_00000008);
  return;
}



void fatal(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
          undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
          undefined8 param_13,undefined8 param_14,undefined param_15)

{
  char in_AL;
  int iVar1;
  int *piVar2;
  char *pcVar3;
  long in_FS_OFFSET;
  undefined in_register_00001204 [12];
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined8 local_e0;
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  undefined8 local_c0;
  undefined local_b8 [8];
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._4_12_ = in_register_00001204;
    local_88._0_4_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(undefined8 *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_d8 = 8;
  local_c8 = local_b8;
  local_d4 = 0x30;
  local_b0 = param_10;
  local_a8 = param_11;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  piVar2 = __errno_location();
  pcVar3 = strerror(*piVar2);
  iVar1 = __asprintf_chk(&local_e0,1,"fatal: %s: %s",param_9,pcVar3);
  if ((iVar1 != -1) && (DAT_0019ea70 != 0)) {
    FUN_001488a0(local_e0,&local_d8);
  }
                    // WARNING: Subroutine does not return
  exit(1);
}



void fatalx(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
           undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
           undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
           undefined8 param_13,undefined8 param_14,undefined param_15)

{
  char in_AL;
  int iVar1;
  long in_FS_OFFSET;
  undefined in_register_00001204 [12];
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined8 local_e0;
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  undefined8 local_c0;
  undefined local_b8 [8];
  undefined8 local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._4_12_ = in_register_00001204;
    local_88._0_4_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(undefined8 *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_d8 = 8;
  local_c8 = local_b8;
  local_d4 = 0x30;
  local_b0 = param_10;
  local_a8 = param_11;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  iVar1 = __asprintf_chk(&local_e0,1,"fatal: %s",param_9);
  if ((iVar1 != -1) && (DAT_0019ea70 != 0)) {
    FUN_001488a0(local_e0,&local_d8);
  }
                    // WARNING: Subroutine does not return
  exit(1);
}



void mode_key_tree_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_00148df8:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x28);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x30) != 1)) {
        *(undefined4 *)(*param_1 + 0x30) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x28);
      lVar3 = *(long *)(lVar2 + 0x18);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x20);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x20) == param_2) {
          lVar3 = *(long *)(param_2 + 0x18);
          *(long *)(lVar1 + 0x20) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x28) = lVar2;
            lVar3 = lVar2;
LAB_00149017:
            *(long *)(lVar3 + 0x18) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x28) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x28);
            *(long *)(param_2 + 0x28) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x18) == lVar1) goto LAB_00149017;
              *(long *)(lVar3 + 0x20) = param_2;
            }
          }
          *(long *)(param_2 + 0x18) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x18);
          *(long *)(lVar1 + 0x28) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x30) = 0;
        lVar1 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar2 + 0x30) = 1;
        *(long *)(lVar2 + 0x18) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x28) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x18) == lVar2) {
          *(long *)(lVar1 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar2;
        *(long *)(lVar2 + 0x28) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 0;
        *(undefined4 *)(lVar2 + 0x30) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x18) == param_2) {
        lVar3 = *(long *)(param_2 + 0x20);
        *(long *)(lVar1 + 0x18) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x28) = lVar2;
          lVar3 = lVar2;
LAB_00148f1e:
          if (*(long *)(lVar3 + 0x18) == lVar1) {
            *(long *)(lVar3 + 0x18) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x20) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x28) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x28);
          *(long *)(param_2 + 0x28) = lVar3;
          if (lVar3 != 0) goto LAB_00148f1e;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x20) = lVar1;
        *(long *)(lVar1 + 0x28) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x30) = 0;
      lVar1 = *(long *)(lVar2 + 0x20);
      *(undefined4 *)(lVar2 + 0x30) = 1;
      lVar3 = *(long *)(lVar1 + 0x18);
      *(long *)(lVar2 + 0x20) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x28) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x28);
      *(long *)(lVar1 + 0x28) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x18) == lVar2) {
        *(long *)(lVar3 + 0x18) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x20) = lVar1;
      }
      *(long *)(lVar1 + 0x18) = lVar2;
      *(long *)(lVar2 + 0x28) = lVar1;
      goto LAB_00148df8;
    }
    *(undefined4 *)(lVar3 + 0x30) = 0;
    *(undefined4 *)(lVar1 + 0x30) = 0;
    *(undefined4 *)(lVar2 + 0x30) = 1;
    param_2 = lVar2;
  } while( true );
}



void mode_key_tree_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_001490c5(param_1,param_2,param_3);
  return;
}



void FUN_001490c5(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x30) != 0)) goto LAB_0014917b;
    if (*param_1 == param_3) goto joined_r0x001492be;
    lVar2 = *(long *)(param_2 + 0x18);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x30) == 1) {
        lVar1 = *(long *)(lVar2 + 0x20);
        *(undefined4 *)(lVar2 + 0x30) = 0;
        *(undefined4 *)(param_2 + 0x30) = 1;
        *(long *)(param_2 + 0x18) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x28) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x28);
        *(long *)(lVar2 + 0x28) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x28) + 0x18) == param_2) {
          *(long *)(lVar3 + 0x18) = lVar2;
          lVar1 = *(long *)(param_2 + 0x18);
        }
        else {
          *(long *)(lVar3 + 0x20) = lVar2;
        }
        *(long *)(lVar2 + 0x20) = param_2;
        *(long *)(param_2 + 0x28) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x18);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x30) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x20);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x30) == 0)) goto LAB_001490b4;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x30) != 0)) goto LAB_00149262;
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 1;
        *(long *)(lVar1 + 0x20) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x28) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x18) == lVar1) {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x18) = lVar1;
        *(long *)(lVar1 + 0x28) = lVar3;
        lVar3 = *(long *)(param_2 + 0x18);
        lVar2 = *(long *)(lVar3 + 0x18);
        *(undefined4 *)(lVar3 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
        if (lVar2 != 0) goto LAB_00149275;
      }
      else {
LAB_00149262:
        lVar3 = *(long *)(param_2 + 0x18);
        *(undefined4 *)(lVar1 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
LAB_00149275:
        *(undefined4 *)(lVar2 + 0x30) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x20);
      *(long *)(param_2 + 0x18) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x28) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x28);
      *(long *)(lVar3 + 0x28) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x28) + 0x18) == param_2) {
        *(long *)(lVar2 + 0x18) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x20) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x20) = param_2;
      *(long *)(param_2 + 0x28) = lVar3;
      goto joined_r0x001492be;
    }
    lVar2 = *(long *)(param_2 + 0x20);
    lVar3 = *(long *)(lVar2 + 0x18);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x30) == 1) {
      *(undefined4 *)(lVar2 + 0x30) = 0;
      *(undefined4 *)(param_2 + 0x30) = 1;
      *(long *)(param_2 + 0x20) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x28) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x28);
      *(long *)(lVar2 + 0x28) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x18) == param_2) {
        *(long *)(lVar4 + 0x18) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x20) = lVar2;
        lVar1 = *(long *)(param_2 + 0x20);
      }
      *(long *)(lVar2 + 0x18) = param_2;
      lVar3 = *(long *)(lVar1 + 0x18);
      *(long *)(param_2 + 0x28) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x30) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x20);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x30) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar3 + 0x30) = 0;
        *(undefined4 *)(lVar1 + 0x30) = 1;
        *(long *)(lVar1 + 0x18) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x28) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x28);
        *(long *)(lVar3 + 0x28) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x18) == lVar1) {
          *(long *)(lVar2 + 0x18) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar1;
        lVar4 = *(long *)(param_2 + 0x20);
        *(long *)(lVar1 + 0x28) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x20);
        *(undefined4 *)(lVar4 + 0x30) = *(undefined4 *)(param_2 + 0x30);
        *(undefined4 *)(param_2 + 0x30) = 0;
        if (lVar2 != 0) goto LAB_00149130;
        goto LAB_00149137;
      }
LAB_0014911f:
      lVar4 = *(long *)(param_2 + 0x20);
      *(undefined4 *)(lVar1 + 0x30) = *(undefined4 *)(param_2 + 0x30);
      *(undefined4 *)(param_2 + 0x30) = 0;
LAB_00149130:
      *(undefined4 *)(lVar2 + 0x30) = 0;
LAB_00149137:
      lVar2 = *(long *)(lVar4 + 0x18);
      *(long *)(param_2 + 0x20) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x28) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x28);
      *(long *)(lVar4 + 0x28) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x18) == param_2) {
        *(long *)(lVar2 + 0x18) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x20) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x18) = param_2;
      *(long *)(param_2 + 0x28) = lVar4;
joined_r0x001492be:
      if (param_3 == 0) {
        return;
      }
LAB_0014917b:
      *(undefined4 *)(param_3 + 0x30) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x20);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x30) != 0)) goto LAB_0014911f;
LAB_001490b4:
    *(undefined4 *)(lVar1 + 0x30) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x28);
  } while( true );
}



long mode_key_tree_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x20);
  if (*(long *)(param_2 + 0x18) == 0) {
    lVar7 = *(long *)(param_2 + 0x28);
    iVar4 = *(int *)(param_2 + 0x30);
    if (lVar6 != 0) goto LAB_001494ec;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x18);
      } while (*(long *)(lVar5 + 0x18) != 0);
      lVar7 = *(long *)(lVar5 + 0x28);
      lVar6 = *(long *)(lVar5 + 0x20);
      iVar4 = *(int *)(lVar5 + 0x30);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x28) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x28);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x18) == lVar5) {
        *(long *)(lVar7 + 0x18) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x20) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x1c);
      uVar2 = *(undefined4 *)(param_2 + 0x20);
      uVar3 = *(undefined4 *)(param_2 + 0x24);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x18) = *(undefined4 *)(param_2 + 0x18);
      *(undefined4 *)(lVar5 + 0x1c) = uVar1;
      *(undefined4 *)(lVar5 + 0x20) = uVar2;
      *(undefined4 *)(lVar5 + 0x24) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x2c);
      uVar2 = *(undefined4 *)(param_2 + 0x30);
      uVar3 = *(undefined4 *)(param_2 + 0x34);
      *(undefined4 *)(lVar5 + 0x28) = *(undefined4 *)(param_2 + 0x28);
      *(undefined4 *)(lVar5 + 0x2c) = uVar1;
      *(undefined4 *)(lVar5 + 0x30) = uVar2;
      *(undefined4 *)(lVar5 + 0x34) = uVar3;
      lVar8 = *(long *)(param_2 + 0x28);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x18) == param_2) {
        *(long *)(lVar8 + 0x18) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x20) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x18) + 0x28) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x20) != 0) {
        *(long *)(*(long *)(param_2 + 0x20) + 0x28) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x28)) {
      }
      goto joined_r0x00149501;
    }
    lVar7 = *(long *)(param_2 + 0x28);
    iVar4 = *(int *)(param_2 + 0x30);
    lVar6 = *(long *)(param_2 + 0x18);
LAB_001494ec:
    *(long *)(lVar6 + 0x28) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x18) == param_2) {
    *(long *)(lVar7 + 0x18) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x20) = lVar6;
  }
joined_r0x00149501:
  if (iVar4 == 0) {
    mode_key_tree_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



ulong * mode_key_tree_RB_INSERT(ulong **param_1,ulong *param_2)

{
  ulong *puVar1;
  ulong *puVar2;
  int iVar3;
  
  puVar1 = *param_1;
  if (puVar1 != (ulong *)0x0) {
    iVar3 = *(int *)(puVar1 + 1);
    do {
      if (*(int *)(param_2 + 1) < iVar3) {
LAB_001495bf:
        puVar2 = (ulong *)puVar1[3];
        iVar3 = -1;
      }
      else {
        if (*(int *)(param_2 + 1) <= iVar3) {
          if (*param_2 < *puVar1) goto LAB_001495bf;
          if (*param_2 <= *puVar1) {
            return puVar1;
          }
        }
        puVar2 = (ulong *)puVar1[4];
        iVar3 = 1;
      }
      if (puVar2 == (ulong *)0x0) goto LAB_001495ce;
      iVar3 = *(int *)(puVar2 + 1);
      puVar1 = puVar2;
    } while( true );
  }
  param_2[5] = 0;
  param_2[4] = 0;
  param_2[3] = 0;
  *(undefined4 *)(param_2 + 6) = 1;
  *param_1 = param_2;
LAB_001495f3:
  mode_key_tree_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (ulong *)0x0;
LAB_001495ce:
  param_2[5] = (ulong)puVar1;
  param_2[4] = 0;
  param_2[3] = 0;
  *(undefined4 *)(param_2 + 6) = 1;
  if (iVar3 == -1) {
    puVar1[3] = (ulong)param_2;
  }
  else {
    puVar1[4] = (ulong)param_2;
  }
  goto LAB_001495f3;
}



void mode_key_tree_RB_FIND(ulong **param_1,ulong *param_2)

{
  int iVar1;
  int iVar2;
  ulong *puVar3;
  
  puVar3 = *param_1;
  if (puVar3 == (ulong *)0x0) {
    return;
  }
  iVar2 = *(int *)(param_2 + 1);
  iVar1 = *(int *)(puVar3 + 1);
  if (iVar2 < iVar1) goto LAB_00149666;
  do {
    if (iVar2 <= iVar1) {
      if (*param_2 < *puVar3) goto LAB_00149666;
      if (*param_2 <= *puVar3) {
        return;
      }
    }
    puVar3 = (ulong *)puVar3[4];
    while( true ) {
      if (puVar3 == (ulong *)0x0) {
        return;
      }
      iVar1 = *(int *)(puVar3 + 1);
      if (iVar1 <= iVar2) break;
LAB_00149666:
      puVar3 = (ulong *)puVar3[3];
    }
  } while( true );
}



ulong * mode_key_tree_RB_NFIND(ulong **param_1,ulong *param_2)

{
  ulong *puVar1;
  ulong *puVar2;
  ulong *puVar3;
  
  if (*param_1 == (ulong *)0x0) {
    return (ulong *)0x0;
  }
  puVar3 = (ulong *)0x0;
  puVar1 = *param_1;
  do {
    if (*(int *)(param_2 + 1) < *(int *)(puVar1 + 1)) {
LAB_001496b0:
      puVar2 = (ulong *)puVar1[3];
      puVar3 = puVar1;
    }
    else {
      if (*(int *)(param_2 + 1) <= *(int *)(puVar1 + 1)) {
        if (*param_2 < *puVar1) goto LAB_001496b0;
        if (*param_2 <= *puVar1) {
          return puVar1;
        }
      }
      puVar2 = (ulong *)puVar1[4];
    }
    puVar1 = puVar2;
    if (puVar2 == (ulong *)0x0) {
      return puVar3;
    }
  } while( true );
}



long mode_key_tree_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x20);
  if (*(long *)(param_1 + 0x20) == 0) {
    lVar2 = *(long *)(param_1 + 0x28);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x18) != param_1)) &&
       (*(long *)(lVar2 + 0x20) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x28), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x20) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x18);
    } while (*(long *)(lVar2 + 0x18) != 0);
  }
  return lVar2;
}



long mode_key_tree_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x18);
  if (*(long *)(param_1 + 0x18) == 0) {
    lVar2 = *(long *)(param_1 + 0x28);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x20) != param_1)) &&
       (*(long *)(lVar2 + 0x18) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x28), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x18) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x20);
    } while (*(long *)(lVar2 + 0x20) != 0);
  }
  return lVar2;
}



long mode_key_tree_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x20);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x18);
    }
  }
  return lVar2;
}



ulong mode_key_cmp(ulong *param_1,ulong *param_2)

{
  ulong uVar1;
  
  uVar1 = 0xffffffff;
  if ((*(int *)(param_2 + 1) <= *(int *)(param_1 + 1)) &&
     (uVar1 = 1, *(int *)(param_1 + 1) <= *(int *)(param_2 + 1))) {
    uVar1 = 0xffffffff;
    if (*param_2 <= *param_1) {
      uVar1 = (ulong)(*param_2 < *param_1);
    }
  }
  return uVar1;
}



void mode_key_tostring(int *param_1,int param_2)

{
  FUN_001497f8(param_1,param_2);
  return;
}



void FUN_001497f8(int *param_1,int param_2)

{
  for (; (*(long *)(param_1 + 2) != 0 && (*param_1 != param_2)); param_1 = param_1 + 4) {
  }
  return;
}



undefined4 mode_key_fromstring(undefined4 *param_1,char *param_2)

{
  char *__s1;
  int iVar1;
  
  __s1 = *(char **)(param_1 + 2);
  while( true ) {
    if (__s1 == (char *)0x0) {
      return 0;
    }
    iVar1 = strcasecmp(__s1,param_2);
    if (iVar1 == 0) break;
    __s1 = *(char **)(param_1 + 6);
    param_1 = param_1 + 4;
  }
  return *param_1;
}



undefined1 * mode_key_findtable(char *param_1)

{
  int iVar1;
  char *__s2;
  undefined1 *puVar2;
  
  __s2 = "vi-edit";
  puVar2 = mode_key_tables;
  do {
    iVar1 = strcasecmp(param_1,__s2);
    if (iVar1 == 0) {
      return puVar2;
    }
    __s2 = *(char **)(puVar2 + 0x20);
    puVar2 = puVar2 + 0x20;
  } while (__s2 != (char *)0x0);
  return (undefined1 *)0x0;
}



void mode_key_init_trees(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,undefined8 param_9,ulong *param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  undefined4 uVar1;
  ulong **ppuVar2;
  undefined8 *puVar3;
  int iVar4;
  ulong uVar5;
  ulong extraout_RDX;
  ulong *puVar6;
  long *plVar7;
  undefined4 extraout_XMM0_Da;
  
  uVar5 = 0;
  puVar3 = &mode_key_tree_vi_edit;
  puVar6 = &mode_key_vi_edit;
  plVar7 = (long *)mode_key_tables;
  while( true ) {
    *puVar3 = 0;
    iVar4 = (int)uVar5;
    while (iVar4 != -1) {
      param_10 = (ulong *)xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  0x38,param_10,uVar5,param_12,param_13,param_14);
      ppuVar2 = (ulong **)plVar7[2];
      *param_10 = *puVar6;
      *(undefined4 *)(param_10 + 1) = *(undefined4 *)(puVar6 + 1);
      uVar1 = *(undefined4 *)((long)puVar6 + 0xc);
      param_10[2] = 0;
      *(undefined4 *)((long)param_10 + 0xc) = uVar1;
      mode_key_tree_RB_INSERT(ppuVar2,param_10);
      iVar4 = *(int *)(puVar6 + 3);
      uVar5 = extraout_RDX;
      puVar6 = puVar6 + 2;
      param_1 = extraout_XMM0_Da;
    }
    if (plVar7[4] == 0) break;
    puVar6 = (ulong *)plVar7[7];
    puVar3 = (undefined8 *)plVar7[6];
    uVar5 = (ulong)*(uint *)(puVar6 + 1);
    plVar7 = plVar7 + 4;
  }
  return;
}



void mode_key_init(undefined8 *param_1,undefined8 param_2)

{
  *param_1 = param_2;
  *(undefined4 *)(param_1 + 1) = 0;
  return;
}



uint mode_key_lookup(undefined8 *param_1,ulong param_2,undefined8 *param_3)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  long in_FS_OFFSET;
  ulong local_48;
  int local_40;
  long local_10;
  
  iVar3 = *(int *)(param_1 + 1);
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_48 = param_2;
  local_40 = iVar3;
  lVar1 = mode_key_tree_RB_FIND((ulong **)*param_1,&local_48);
  if (lVar1 == 0) {
    uVar2 = (uint)(iVar3 == 0);
  }
  else {
    uVar2 = *(uint *)(lVar1 + 0xc);
    if (uVar2 - 0x17 < 7) {
      *(int *)(param_1 + 1) = 1 - iVar3;
    }
    if (param_3 != (undefined8 *)0x0) {
      *param_3 = *(undefined8 *)(lVar1 + 0x10);
    }
  }
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar2;
}



void name_time_callback(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,undefined8 param_10,uint *param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  undefined1 in_stack_00000008;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "@%u name timer expired",(ulong)*param_11,param_12,param_13,param_14,in_stack_00000008);
  return;
}



int name_time_expired(long param_1,long *param_2)

{
  long lVar1;
  long lVar2;
  
  lVar2 = *param_2 - *(long *)(param_1 + 0x90);
  lVar1 = param_2[1] - *(long *)(param_1 + 0x98);
  if (lVar1 < 0) {
    lVar2 = lVar2 + -1;
    lVar1 = lVar1 + 1000000;
  }
  if ((lVar2 == 0) && (lVar1 < 0x7a121)) {
    return 500000 - (int)lVar1;
  }
  return 0;
}



char * format_window_name(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,uint *param_9,undefined8 param_10,undefined8 param_11,
                         undefined *param_12,long *param_13,char **param_14)

{
  undefined8 uVar1;
  uint **ppuVar2;
  char *pcVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  
  ppuVar2 = (uint **)format_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0
                                   ,0,param_11,param_12,param_13,param_14);
  uVar1 = format_defaults_window
                    (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     ppuVar2,param_9,extraout_RDX,param_12,param_13,param_14);
  uVar1 = format_defaults_pane
                    (uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)ppuVar2,
                     *(uint **)(param_9 + 0x4e),extraout_RDX_00,param_12,param_13,param_14);
  pcVar3 = options_get_string(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(param_9 + 0x62),"automatic-rename-format",extraout_RDX_01,
                              param_12,param_13,param_14);
  pcVar3 = format_expand(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,(long *)ppuVar2,pcVar3,extraout_RDX_02,
                         param_12,param_13,param_14);
  format_free(ppuVar2);
  return pcVar3;
}



void check_window_name(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long *param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
                      long *param_13,char **param_14)

{
  long *plVar1;
  int iVar2;
  char *pcVar3;
  long lVar4;
  char *__s1;
  char *pcVar5;
  uint uVar6;
  long lVar7;
  undefined8 extraout_RDX;
  undefined8 uVar8;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined in_stack_ffffffffffffffb8;
  undefined7 uStack_47;
  long lStack_40;
  undefined8 local_38;
  long local_30;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_9[0x27] != 0) {
    pcVar3 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                (char **)param_9[0x31],"automatic-rename",param_11,param_12,param_13
                                ,param_14);
    if (pcVar3 != (char *)0x0) {
      if ((*(byte *)(param_9[0x27] + 0x30) & 0x40) == 0) {
        log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "@%u active pane not changed",(ulong)*(uint *)param_9,param_12,param_13,param_14,
                 in_stack_ffffffffffffffb8);
      }
      else {
        log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "@%u active pane changed",(ulong)*(uint *)param_9,param_12,param_13,param_14,
                 in_stack_ffffffffffffffb8);
        uVar9 = 0;
        gettimeofday((timeval *)&stack0xffffffffffffffb8,(__timezone_ptr_t)0x0);
        lVar7 = CONCAT71(uStack_47,in_stack_ffffffffffffffb8) - param_9[0x12];
        lVar4 = lStack_40 - param_9[0x13];
        if (lVar4 < 0) {
          lVar7 = lVar7 + -1;
          lVar4 = lVar4 + 1000000;
        }
        plVar1 = param_9 + 2;
        if ((lVar4 < 0x7a121) && (lVar7 == 0)) {
          uVar6 = 500000 - (int)lVar4;
          if (uVar6 != 0) {
            iVar2 = event_initialized(plVar1);
            if (iVar2 == 0) {
              param_13 = param_9;
              event_set(plVar1,0xffffffff,0,name_time_callback);
            }
            iVar2 = event_pending(plVar1,1,0);
            if (iVar2 == 0) {
              log_emit(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3
                       ,"@%u name timer queued (%d left)",(ulong)*(uint *)param_9,(ulong)uVar6,
                       param_13,param_14,in_stack_ffffffffffffffb8);
              local_30 = (long)(int)uVar6;
              local_38 = 0;
              event_add(plVar1,&local_38);
            }
            else {
              log_emit(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3
                       ,"@%u name timer already queued (%d left)",(ulong)*(uint *)param_9,
                       (ulong)uVar6,param_13,param_14,in_stack_ffffffffffffffb8);
            }
            goto LAB_00149c1f;
          }
        }
        param_9[0x12] = CONCAT71(uStack_47,in_stack_ffffffffffffffb8);
        param_9[0x13] = lStack_40;
        iVar2 = event_initialized(plVar1);
        uVar8 = extraout_RDX;
        uVar10 = extraout_XMM0_Qa;
        if (iVar2 != 0) {
          uVar10 = event_del(plVar1);
          uVar8 = extraout_RDX_01;
        }
        *(uint *)(param_9[0x27] + 0x30) = *(uint *)(param_9[0x27] + 0x30) & 0xffffffbf;
        __s1 = format_window_name(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  (uint *)param_9,uVar9,uVar8,param_12,param_13,param_14);
        pcVar3 = (char *)param_9[1];
        iVar2 = strcmp(__s1,pcVar3);
        if (iVar2 == 0) {
          log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "@%u name not changed (still %s)",(ulong)*(uint *)param_9,pcVar3,param_13,
                   param_14,in_stack_ffffffffffffffb8);
        }
        else {
          pcVar5 = __s1;
          uVar9 = log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,3,"@%u new name %s (was %s)",(ulong)*(uint *)param_9,__s1,pcVar3,
                           param_14,in_stack_ffffffffffffffb8);
          window_set_name(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (uint *)param_9,__s1,extraout_RDX_00,pcVar5,pcVar3,param_14);
          server_status_window((long)param_9);
        }
        free(__s1);
      }
    }
  }
LAB_00149c1f:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
parse_window_name(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 char *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  byte *__ptr;
  char *pcVar1;
  size_t sVar2;
  ushort **ppuVar3;
  ulong uVar4;
  ushort *extraout_RDX;
  ushort *extraout_RDX_00;
  ushort *extraout_RDX_01;
  ushort *puVar5;
  byte *pbVar6;
  byte *pbVar7;
  byte *pbVar8;
  undefined8 uVar9;
  undefined uVar10;
  undefined uVar11;
  byte bVar12;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 uVar13;
  
  bVar12 = 0;
  uVar10 = &stack0xffffffffffffffe0 < (undefined *)0x8;
  uVar11 = &stack0x00000000 == (undefined *)0x28;
  __ptr = (byte *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          param_10,param_11,param_12,param_13,param_14);
  uVar4 = 5;
  pbVar8 = __ptr;
  pbVar7 = (byte *)"exec ";
  do {
    if (uVar4 == 0) break;
    uVar4 = uVar4 - 1;
    uVar10 = *pbVar8 < *pbVar7;
    uVar11 = *pbVar8 == *pbVar7;
    pbVar8 = pbVar8 + (ulong)bVar12 * -2 + 1;
    pbVar7 = pbVar7 + (ulong)bVar12 * -2 + 1;
  } while ((bool)uVar11);
  pbVar8 = __ptr + 5;
  if ((!(bool)uVar10 && !(bool)uVar11) != (bool)uVar10) {
    pbVar8 = __ptr;
  }
  bVar12 = *pbVar8;
  if (bVar12 != 0x20) goto LAB_00149dac;
  do {
    do {
      bVar12 = pbVar8[1];
      pbVar8 = pbVar8 + 1;
    } while (bVar12 == 0x20);
LAB_00149dac:
  } while (bVar12 == 0x2d);
  uVar9 = 0x20;
  pcVar1 = strchr((char *)pbVar8,0x20);
  if (pcVar1 != (char *)0x0) {
    *pcVar1 = '\0';
  }
  bVar12 = *pbVar8;
  puVar5 = extraout_RDX;
  uVar13 = extraout_XMM0_Qa;
  if (bVar12 != 0) {
    sVar2 = strlen((char *)pbVar8);
    puVar5 = extraout_RDX_00;
    uVar13 = extraout_XMM0_Qa_00;
    if (pbVar8 < pbVar8 + (sVar2 - 1)) {
      ppuVar3 = __ctype_b_loc();
      pbVar7 = pbVar8 + (sVar2 - 1);
      do {
        uVar4 = (ulong)*pbVar7;
        puVar5 = *ppuVar3;
        if ((*(byte *)(puVar5 + uVar4) & 8) != 0) break;
        pbVar6 = pbVar7 + -1;
        *pbVar7 = 0;
        pbVar7 = pbVar6;
      } while (pbVar6 != pbVar8);
      bVar12 = *pbVar8;
      uVar13 = extraout_XMM0_Qa_01;
    }
    if (bVar12 == 0x2f) {
      pbVar8 = (byte *)__xpg_basename((char *)pbVar8);
      puVar5 = extraout_RDX_01;
      uVar13 = extraout_XMM0_Qa_02;
    }
  }
  uVar9 = xstrdup(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(char *)pbVar8,
                  uVar9,puVar5,uVar4,param_13,param_14);
  free(__ptr);
  return uVar9;
}



undefined8
default_window_name(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  char *__ptr;
  undefined8 uVar1;
  undefined8 extraout_RDX;
  long lVar2;
  undefined8 extraout_XMM0_Qa;
  
  lVar2 = *(long *)(*(long *)(param_9 + 0x138) + 0x38);
  __ptr = cmd_stringify_argv(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(int *)(*(long *)(param_9 + 0x138) + 0x34),lVar2,param_11,param_12,
                             param_13,param_14);
  if ((__ptr != (char *)0x0) && (*__ptr != '\0')) {
    uVar1 = parse_window_name(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,__ptr,lVar2,extraout_RDX,param_12,param_13,param_14);
    free(__ptr);
    return uVar1;
  }
  uVar1 = parse_window_name(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                            ,*(char **)(*(long *)(param_9 + 0x138) + 0x40),lVar2,extraout_RDX,
                            param_12,param_13,param_14);
  free(__ptr);
  return uVar1;
}



void FUN_00149eb0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,uint *param_10,undefined8 param_11,uint *param_12,long *param_13
                 ,char **param_14)

{
  uint *puVar1;
  long lVar2;
  long *plVar3;
  long *plVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  uint *__ptr;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  
  __ptr = notify_queue;
  if (notify_queue != (uint *)0x0) {
    do {
      uVar5 = (undefined4)param_1;
      puVar1 = *(uint **)(__ptr + 8);
      if (*__ptr < 8) {
        switch(*__ptr) {
        case 0:
          uVar5 = control_notify_window_layout_changed
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(int **)(__ptr + 6),param_10,param_11,param_12,param_13,param_14);
          param_11 = extraout_RDX_06;
          break;
        case 1:
          param_10 = *(uint **)(__ptr + 6);
          uVar5 = control_notify_window_unlinked
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(undefined8 *)(__ptr + 4),param_10,param_11,param_12,param_13,param_14
                            );
          param_11 = extraout_RDX_09;
          break;
        case 2:
          param_10 = *(uint **)(__ptr + 6);
          uVar5 = control_notify_window_linked
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(undefined8 *)(__ptr + 4),param_10,param_11,param_12,param_13,param_14
                            );
          param_11 = extraout_RDX_08;
          break;
        case 3:
          uVar5 = control_notify_window_renamed
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(uint **)(__ptr + 6));
          param_11 = extraout_RDX_05;
          break;
        case 4:
          uVar5 = control_notify_attached_session_changed
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(long **)(__ptr + 2));
          param_11 = extraout_RDX_04;
          break;
        case 5:
          uVar5 = control_notify_session_renamed
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(uint **)(__ptr + 4));
          param_11 = extraout_RDX_03;
          break;
        case 6:
          uVar5 = control_notify_session_created
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(undefined8 *)(__ptr + 4),param_10,param_11,param_12,param_13,param_14
                            );
          param_11 = extraout_RDX;
          break;
        case 7:
          uVar5 = control_notify_session_close
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(undefined8 *)(__ptr + 4),param_10,param_11,param_12,param_13,param_14
                            );
          param_11 = extraout_RDX_07;
        }
      }
      if (*(long *)(__ptr + 2) != 0) {
        uVar5 = server_client_unref(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    *(long *)(__ptr + 2));
        param_11 = extraout_RDX_00;
      }
      if (*(long *)(__ptr + 4) != 0) {
        uVar5 = session_unref(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(long *)(__ptr + 4));
        param_11 = extraout_RDX_01;
      }
      if (*(void **)(__ptr + 6) != (void *)0x0) {
        window_remove_ref(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          *(void **)(__ptr + 6),param_10,param_11,param_12,param_13,param_14);
      }
      lVar2 = *(long *)(__ptr + 8);
      plVar4 = *(long **)(__ptr + 10);
      plVar3 = plVar4;
      if (lVar2 != 0) {
        *(long **)(lVar2 + 0x28) = plVar4;
        plVar4 = *(long **)(__ptr + 10);
        plVar3 = (long *)PTR_notify_queue_0019e608;
      }
      PTR_notify_queue_0019e608 = (undefined *)plVar3;
      *plVar4 = lVar2;
      free(__ptr);
      param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
      param_11 = extraout_RDX_02;
      __ptr = puVar1;
    } while (puVar1 != (uint *)0x0);
  }
  return;
}



void notify_enable(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,uint *param_10,undefined8 param_11,uint *param_12,
                  long *param_13,char **param_14)

{
  notify_enabled = 1;
  FUN_00149eb0(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
               param_11,param_12,param_13,param_14);
  return;
}



void notify_disable(void)

{
  notify_enabled = 0;
  return;
}



void notify_add(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined4 param_9,long param_10,long param_11,long param_12,undefined8 param_13,
               undefined8 param_14)

{
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)
           xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x30,param_11,
                   param_12,param_13,param_14);
  *puVar1 = param_9;
  *(long *)(puVar1 + 2) = param_10;
  *(long *)(puVar1 + 4) = param_11;
  *(long *)(puVar1 + 6) = param_12;
  *(undefined8 *)(puVar1 + 8) = 0;
  *(undefined **)(puVar1 + 10) = PTR_notify_queue_0019e608;
  *(undefined4 **)PTR_notify_queue_0019e608 = puVar1;
  PTR_notify_queue_0019e608 = (undefined *)(puVar1 + 8);
  if (param_10 != 0) {
    *(int *)(param_10 + 0x5b8) = *(int *)(param_10 + 0x5b8) + 1;
  }
  if (param_11 != 0) {
    *(int *)(param_11 + 0x128) = *(int *)(param_11 + 0x128) + 1;
  }
  if (param_12 != 0) {
    *(int *)(param_12 + 400) = *(int *)(param_12 + 400) + 1;
  }
  return;
}



void notify_drain(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,uint *param_10,undefined8 param_11,uint *param_12,long *param_13
                 ,char **param_14)

{
  if (notify_enabled != 0) {
    FUN_00149eb0(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                 param_11,param_12,param_13,param_14);
    return;
  }
  return;
}



void notify_input(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined4 *param_9,undefined8 param_10)

{
  long *plVar1;
  
  if (notify_enabled == 0) {
    return;
  }
  plVar1 = clients;
  if (clients != (long *)0x0) {
    do {
      while ((*(byte *)((long)plVar1 + 0x421) & 0x20) == 0) {
        plVar1 = (long *)plVar1[0xb8];
        if (plVar1 == (long *)0x0) {
          return;
        }
      }
      param_1 = control_notify_input
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar1,
                           param_9,param_10);
      plVar1 = (long *)plVar1[0xb8];
    } while (plVar1 != (long *)0x0);
  }
  return;
}



void notify_window_layout_changed
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  uint *puVar2;
  undefined8 uVar3;
  long *in_R8;
  char **in_R9;
  
  puVar2 = (uint *)0x0;
  uVar3 = 0;
  uVar1 = notify_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,0,0,
                     (long)param_9,in_R8,in_R9);
  if (notify_enabled != 0) {
    FUN_00149eb0(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar3,puVar2,
                 extraout_RDX,param_9,in_R8,in_R9);
    return;
  }
  return;
}



void notify_window_unlinked
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint *param_10,undefined8 param_11,undefined8 param_12,long *param_13,
               char **param_14)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  uint *puVar2;
  undefined8 uVar3;
  
  puVar2 = (uint *)0x0;
  uVar3 = 1;
  uVar1 = notify_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0,param_9,
                     (long)param_10,param_13,param_14);
  if (notify_enabled != 0) {
    FUN_00149eb0(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar3,puVar2,
                 extraout_RDX,param_10,param_13,param_14);
    return;
  }
  return;
}



void notify_window_linked
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint *param_10,undefined8 param_11,undefined8 param_12,long *param_13,
               char **param_14)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  uint *puVar2;
  undefined8 uVar3;
  
  puVar2 = (uint *)0x0;
  uVar3 = 2;
  uVar1 = notify_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,0,param_9,
                     (long)param_10,param_13,param_14);
  if (notify_enabled != 0) {
    FUN_00149eb0(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar3,puVar2,
                 extraout_RDX,param_10,param_13,param_14);
    return;
  }
  return;
}



void notify_window_renamed
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  uint *puVar2;
  undefined8 uVar3;
  long *in_R8;
  char **in_R9;
  
  puVar2 = (uint *)0x0;
  uVar3 = 3;
  uVar1 = notify_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,0,0,
                     (long)param_9,in_R8,in_R9);
  if (notify_enabled != 0) {
    FUN_00149eb0(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar3,puVar2,
                 extraout_RDX,param_9,in_R8,in_R9);
    return;
  }
  return;
}



void notify_attached_session_changed
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9)

{
  undefined8 uVar1;
  uint *puVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  long *in_R8;
  char **in_R9;
  
  puVar2 = (uint *)0x0;
  uVar3 = 4;
  uVar1 = notify_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,4,(long)param_9
                     ,0,0,in_R8,in_R9);
  if (notify_enabled != 0) {
    FUN_00149eb0(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar3,param_9,
                 extraout_RDX,puVar2,in_R8,in_R9);
    return;
  }
  return;
}



void notify_session_renamed
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  undefined8 uVar1;
  uint *puVar2;
  undefined8 extraout_RDX;
  uint *puVar3;
  undefined8 uVar4;
  long *in_R8;
  char **in_R9;
  
  puVar2 = (uint *)0x0;
  puVar3 = (uint *)0x0;
  uVar4 = 5;
  uVar1 = notify_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,5,0,param_9,0,
                     in_R8,in_R9);
  if (notify_enabled != 0) {
    FUN_00149eb0(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar4,puVar3,
                 extraout_RDX,puVar2,in_R8,in_R9);
    return;
  }
  return;
}



void notify_session_created
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  undefined8 uVar1;
  uint *puVar2;
  undefined8 extraout_RDX;
  uint *puVar3;
  undefined8 uVar4;
  long *in_R8;
  char **in_R9;
  
  puVar2 = (uint *)0x0;
  puVar3 = (uint *)0x0;
  uVar4 = 6;
  uVar1 = notify_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,6,0,param_9,0,
                     in_R8,in_R9);
  if (notify_enabled != 0) {
    FUN_00149eb0(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar4,puVar3,
                 extraout_RDX,puVar2,in_R8,in_R9);
    return;
  }
  return;
}



void notify_session_closed
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  undefined8 uVar1;
  uint *puVar2;
  undefined8 extraout_RDX;
  uint *puVar3;
  undefined8 uVar4;
  long *in_R8;
  char **in_R9;
  
  puVar2 = (uint *)0x0;
  puVar3 = (uint *)0x0;
  uVar4 = 7;
  uVar1 = notify_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,7,0,param_9,0,
                     in_R8,in_R9);
  if (notify_enabled != 0) {
    FUN_00149eb0(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar4,puVar3,
                 extraout_RDX,puVar2,in_R8,in_R9);
    return;
  }
  return;
}



void options_table_populate_tree
               (undefined8 param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               int param_9,char **param_10,undefined8 param_11,undefined *param_12,
               undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined **ppuVar2;
  char *pcVar3;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined in_stack_ffffffffffffffd8;
  
  iVar1 = 1;
  pcVar3 = "buffer-limit";
  ppuVar2 = &options_table;
  do {
    if (param_9 == iVar1) {
      if (*(int *)(ppuVar2 + 1) == 0) {
        param_12 = ppuVar2[4];
        options_set_string((int)param_1,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8
                           ,param_10,pcVar3,"%s",param_12,param_13,param_14,
                           in_stack_ffffffffffffffd8);
        param_1 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
        param_11 = extraout_RDX_01;
        goto LAB_0014a37c;
      }
      if (*(int *)(ppuVar2 + 1) != 7) {
        options_set_number(param_1,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           param_10,pcVar3,ppuVar2[5],param_12,param_13,param_14);
        param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
        param_11 = extraout_RDX;
        goto LAB_0014a37c;
      }
      param_12 = (undefined *)0x0;
      options_set_style(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                        pcVar3,ppuVar2[4],0,param_13,param_14);
      param_1 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
      pcVar3 = ppuVar2[7];
      param_11 = extraout_RDX_00;
    }
    else {
LAB_0014a37c:
      pcVar3 = ppuVar2[7];
    }
    if (pcVar3 == (char *)0x0) {
      return;
    }
    iVar1 = *(int *)((long)ppuVar2 + 0x44);
    ppuVar2 = ppuVar2 + 7;
    if (iVar1 == 0) {
                    // WARNING: Subroutine does not return
      fatalx((int)param_1,(int)param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "no scope for %s",pcVar3,param_11,param_12,param_13,param_14,in_stack_ffffffffffffffd8)
      ;
    }
  } while( true );
}



undefined *
options_table_print_entry
          (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,int param_11,undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined in_stack_fffffffffffffff8;
  
  DAT_0019ea80 = 0;
  if (7 < *(uint *)(param_9 + 8)) {
    return &DAT_0019ea80;
  }
  switch(*(undefined4 *)(param_9 + 8)) {
  case 0:
    pcVar1 = *(char **)(param_10 + 0x10);
    if (param_11 == 0) {
      xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_0019ea80,0x2000
                ,&DAT_0017b5d5,pcVar1,param_13,param_14,in_stack_fffffffffffffff8);
      goto LAB_0014a44a;
    }
    break;
  case 1:
    xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_0019ea80,0x2000,
              &DAT_0017ad5a,*(undefined8 *)(param_10 + 0x18),param_13,param_14,
              in_stack_fffffffffffffff8);
    return &DAT_0019ea80;
  case 2:
    pcVar1 = key_string_lookup_key
                       (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(ulong *)(param_10 + 0x18));
    param_1 = extraout_XMM0_Da_00;
    break;
  case 3:
    pcVar1 = colour_tostring(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(ulong *)(param_10 + 0x18));
    param_1 = extraout_XMM0_Da_01;
    break;
  case 4:
    pcVar1 = attributes_tostring(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 *(byte *)(param_10 + 0x18));
    param_1 = extraout_XMM0_Da_02;
    break;
  case 5:
    if (*(long *)(param_10 + 0x18) == 0) {
      strlcpy(&DAT_0019ea80,"off",0x2000);
    }
    else {
      strlcpy(&DAT_0019ea80,"on",0x2000);
    }
    goto LAB_0014a44a;
  case 6:
    pcVar1 = *(char **)(*(long *)(param_9 + 0x18) + *(long *)(param_10 + 0x18) * 8);
    break;
  case 7:
    pcVar1 = style_tostring(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (byte *)(param_10 + 0x20));
    param_1 = extraout_XMM0_Da;
  }
  xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_0019ea80,0x2000,
            "%s",pcVar1,param_13,param_14,in_stack_fffffffffffffff8);
LAB_0014a44a:
  return &DAT_0019ea80;
}



undefined8 options_table_find(char *param_1,long *param_2)

{
  int iVar1;
  size_t __n;
  undefined **ppuVar2;
  char *__s1;
  
  __s1 = "buffer-limit";
  ppuVar2 = &options_table;
  do {
    __n = strlen(param_1);
    iVar1 = strncmp(__s1,param_1,__n);
    if (iVar1 == 0) {
      if (*param_2 != 0) {
        return 0xffffffff;
      }
      *param_2 = (long)ppuVar2;
      iVar1 = strcmp(__s1,param_1);
      if (iVar1 == 0) {
        return 0;
      }
    }
    __s1 = ppuVar2[7];
    ppuVar2 = ppuVar2 + 7;
    if (__s1 == (char *)0x0) {
      return 0;
    }
  } while( true );
}



void options_tree_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_0014a5e8:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x48);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x50) != 1)) {
        *(undefined4 *)(*param_1 + 0x50) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x48);
      lVar3 = *(long *)(lVar2 + 0x38);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x40);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x50) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x40) == param_2) {
          lVar3 = *(long *)(param_2 + 0x38);
          *(long *)(lVar1 + 0x40) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x48) = lVar2;
            lVar3 = lVar2;
LAB_0014a807:
            *(long *)(lVar3 + 0x38) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x48) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x48);
            *(long *)(param_2 + 0x48) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x38) == lVar1) goto LAB_0014a807;
              *(long *)(lVar3 + 0x40) = param_2;
            }
          }
          *(long *)(param_2 + 0x38) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x38);
          *(long *)(lVar1 + 0x48) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x50) = 0;
        lVar1 = *(long *)(lVar3 + 0x40);
        *(undefined4 *)(lVar2 + 0x50) = 1;
        *(long *)(lVar2 + 0x38) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x48) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x48);
        *(long *)(lVar3 + 0x48) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x38) == lVar2) {
          *(long *)(lVar1 + 0x38) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x40) = lVar3;
        }
        *(long *)(lVar3 + 0x40) = lVar2;
        *(long *)(lVar2 + 0x48) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x50) = 0;
        *(undefined4 *)(lVar1 + 0x50) = 0;
        *(undefined4 *)(lVar2 + 0x50) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x50) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x38) == param_2) {
        lVar3 = *(long *)(param_2 + 0x40);
        *(long *)(lVar1 + 0x38) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x48) = lVar2;
          lVar3 = lVar2;
LAB_0014a70e:
          if (*(long *)(lVar3 + 0x38) == lVar1) {
            *(long *)(lVar3 + 0x38) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x40) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x48) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x48);
          *(long *)(param_2 + 0x48) = lVar3;
          if (lVar3 != 0) goto LAB_0014a70e;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x40) = lVar1;
        *(long *)(lVar1 + 0x48) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x50) = 0;
      lVar1 = *(long *)(lVar2 + 0x40);
      *(undefined4 *)(lVar2 + 0x50) = 1;
      lVar3 = *(long *)(lVar1 + 0x38);
      *(long *)(lVar2 + 0x40) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x48) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x48);
      *(long *)(lVar1 + 0x48) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x38) == lVar2) {
        *(long *)(lVar3 + 0x38) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x40) = lVar1;
      }
      *(long *)(lVar1 + 0x38) = lVar2;
      *(long *)(lVar2 + 0x48) = lVar1;
      goto LAB_0014a5e8;
    }
    *(undefined4 *)(lVar3 + 0x50) = 0;
    *(undefined4 *)(lVar1 + 0x50) = 0;
    *(undefined4 *)(lVar2 + 0x50) = 1;
    param_2 = lVar2;
  } while( true );
}



void options_tree_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_0014a8b5(param_1,param_2,param_3);
  return;
}



void FUN_0014a8b5(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x50) != 0)) goto LAB_0014a96b;
    if (*param_1 == param_3) goto joined_r0x0014aaae;
    lVar2 = *(long *)(param_2 + 0x38);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x50) == 1) {
        lVar1 = *(long *)(lVar2 + 0x40);
        *(undefined4 *)(lVar2 + 0x50) = 0;
        *(undefined4 *)(param_2 + 0x50) = 1;
        *(long *)(param_2 + 0x38) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x48) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x48);
        *(long *)(lVar2 + 0x48) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x48) + 0x38) == param_2) {
          *(long *)(lVar3 + 0x38) = lVar2;
          lVar1 = *(long *)(param_2 + 0x38);
        }
        else {
          *(long *)(lVar3 + 0x40) = lVar2;
        }
        *(long *)(lVar2 + 0x40) = param_2;
        *(long *)(param_2 + 0x48) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x38);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x50) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x40);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x50) == 0)) goto LAB_0014a8a4;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x50) != 0)) goto LAB_0014aa52;
        lVar2 = *(long *)(lVar3 + 0x38);
        *(undefined4 *)(lVar3 + 0x50) = 0;
        *(undefined4 *)(lVar1 + 0x50) = 1;
        *(long *)(lVar1 + 0x40) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x48) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x48);
        *(long *)(lVar3 + 0x48) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x38) == lVar1) {
          *(long *)(lVar2 + 0x38) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x40) = lVar3;
        }
        *(long *)(lVar3 + 0x38) = lVar1;
        *(long *)(lVar1 + 0x48) = lVar3;
        lVar3 = *(long *)(param_2 + 0x38);
        lVar2 = *(long *)(lVar3 + 0x38);
        *(undefined4 *)(lVar3 + 0x50) = *(undefined4 *)(param_2 + 0x50);
        *(undefined4 *)(param_2 + 0x50) = 0;
        if (lVar2 != 0) goto LAB_0014aa65;
      }
      else {
LAB_0014aa52:
        lVar3 = *(long *)(param_2 + 0x38);
        *(undefined4 *)(lVar1 + 0x50) = *(undefined4 *)(param_2 + 0x50);
        *(undefined4 *)(param_2 + 0x50) = 0;
LAB_0014aa65:
        *(undefined4 *)(lVar2 + 0x50) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x40);
      *(long *)(param_2 + 0x38) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x48) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x48);
      *(long *)(lVar3 + 0x48) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x48) + 0x38) == param_2) {
        *(long *)(lVar2 + 0x38) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x40) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x40) = param_2;
      *(long *)(param_2 + 0x48) = lVar3;
      goto joined_r0x0014aaae;
    }
    lVar2 = *(long *)(param_2 + 0x40);
    lVar3 = *(long *)(lVar2 + 0x38);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x50) == 1) {
      *(undefined4 *)(lVar2 + 0x50) = 0;
      *(undefined4 *)(param_2 + 0x50) = 1;
      *(long *)(param_2 + 0x40) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x48) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x48);
      *(long *)(lVar2 + 0x48) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x38) == param_2) {
        *(long *)(lVar4 + 0x38) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x40) = lVar2;
        lVar1 = *(long *)(param_2 + 0x40);
      }
      *(long *)(lVar2 + 0x38) = param_2;
      lVar3 = *(long *)(lVar1 + 0x38);
      *(long *)(param_2 + 0x48) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x50) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x40);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x50) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x40);
        *(undefined4 *)(lVar3 + 0x50) = 0;
        *(undefined4 *)(lVar1 + 0x50) = 1;
        *(long *)(lVar1 + 0x38) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x48) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x48);
        *(long *)(lVar3 + 0x48) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x38) == lVar1) {
          *(long *)(lVar2 + 0x38) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x40) = lVar3;
        }
        *(long *)(lVar3 + 0x40) = lVar1;
        lVar4 = *(long *)(param_2 + 0x40);
        *(long *)(lVar1 + 0x48) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x40);
        *(undefined4 *)(lVar4 + 0x50) = *(undefined4 *)(param_2 + 0x50);
        *(undefined4 *)(param_2 + 0x50) = 0;
        if (lVar2 != 0) goto LAB_0014a920;
        goto LAB_0014a927;
      }
LAB_0014a90f:
      lVar4 = *(long *)(param_2 + 0x40);
      *(undefined4 *)(lVar1 + 0x50) = *(undefined4 *)(param_2 + 0x50);
      *(undefined4 *)(param_2 + 0x50) = 0;
LAB_0014a920:
      *(undefined4 *)(lVar2 + 0x50) = 0;
LAB_0014a927:
      lVar2 = *(long *)(lVar4 + 0x38);
      *(long *)(param_2 + 0x40) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x48) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x48);
      *(long *)(lVar4 + 0x48) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x38) == param_2) {
        *(long *)(lVar2 + 0x38) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x40) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x38) = param_2;
      *(long *)(param_2 + 0x48) = lVar4;
joined_r0x0014aaae:
      if (param_3 == 0) {
        return;
      }
LAB_0014a96b:
      *(undefined4 *)(param_3 + 0x50) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x40);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x50) != 0)) goto LAB_0014a90f;
LAB_0014a8a4:
    *(undefined4 *)(lVar1 + 0x50) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x48);
  } while( true );
}



long options_tree_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x40);
  if (*(long *)(param_2 + 0x38) == 0) {
    lVar7 = *(long *)(param_2 + 0x48);
    iVar4 = *(int *)(param_2 + 0x50);
    if (lVar6 != 0) goto LAB_0014acdc;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x38);
      } while (*(long *)(lVar5 + 0x38) != 0);
      lVar7 = *(long *)(lVar5 + 0x48);
      lVar6 = *(long *)(lVar5 + 0x40);
      iVar4 = *(int *)(lVar5 + 0x50);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x48) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x48);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x38) == lVar5) {
        *(long *)(lVar7 + 0x38) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x40) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x3c);
      uVar2 = *(undefined4 *)(param_2 + 0x40);
      uVar3 = *(undefined4 *)(param_2 + 0x44);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x38) = *(undefined4 *)(param_2 + 0x38);
      *(undefined4 *)(lVar5 + 0x3c) = uVar1;
      *(undefined4 *)(lVar5 + 0x40) = uVar2;
      *(undefined4 *)(lVar5 + 0x44) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x4c);
      uVar2 = *(undefined4 *)(param_2 + 0x50);
      uVar3 = *(undefined4 *)(param_2 + 0x54);
      *(undefined4 *)(lVar5 + 0x48) = *(undefined4 *)(param_2 + 0x48);
      *(undefined4 *)(lVar5 + 0x4c) = uVar1;
      *(undefined4 *)(lVar5 + 0x50) = uVar2;
      *(undefined4 *)(lVar5 + 0x54) = uVar3;
      lVar8 = *(long *)(param_2 + 0x48);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x38) == param_2) {
        *(long *)(lVar8 + 0x38) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x40) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x38) + 0x48) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x40) != 0) {
        *(long *)(*(long *)(param_2 + 0x40) + 0x48) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x48)) {
      }
      goto joined_r0x0014acf1;
    }
    lVar7 = *(long *)(param_2 + 0x48);
    iVar4 = *(int *)(param_2 + 0x50);
    lVar6 = *(long *)(param_2 + 0x38);
LAB_0014acdc:
    *(long *)(lVar6 + 0x48) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x38) == param_2) {
    *(long *)(lVar7 + 0x38) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x40) = lVar6;
  }
joined_r0x0014acf1:
  if (iVar4 == 0) {
    options_tree_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



void FUN_0014ad70(long *param_1,void **param_2)

{
  options_tree_RB_REMOVE(param_1,(long)param_2);
  free(*param_2);
  if (*(int *)(param_2 + 1) != 0) {
    free(param_2);
    return;
  }
  free(param_2[2]);
  free(param_2);
  return;
}



char ** options_tree_RB_INSERT(char **param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  
  if ((char **)*param_1 == (char **)0x0) {
    param_2[9] = (char *)0x0;
    param_2[8] = (char *)0x0;
    param_2[7] = (char *)0x0;
    *(undefined4 *)(param_2 + 10) = 1;
    *param_1 = (char *)param_2;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    do {
      ppcVar3 = ppcVar1;
      iVar2 = strcmp(__s1,*ppcVar3);
      if (iVar2 < 0) {
        ppcVar1 = (char **)ppcVar3[7];
      }
      else {
        if (iVar2 == 0) {
          return ppcVar3;
        }
        ppcVar1 = (char **)ppcVar3[8];
      }
    } while (ppcVar1 != (char **)0x0);
    param_2[9] = (char *)ppcVar3;
    param_2[8] = (char *)0x0;
    param_2[7] = (char *)0x0;
    *(undefined4 *)(param_2 + 10) = 1;
    if (iVar2 < 0) {
      ppcVar3[7] = (char *)param_2;
    }
    else {
      ppcVar3[8] = (char *)param_2;
    }
  }
  options_tree_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (char **)0x0;
}



char ** options_tree_RB_FIND(char **param_1,char **param_2)

{
  char *__s1;
  int iVar1;
  char **ppcVar2;
  
  ppcVar2 = (char **)*param_1;
  if (ppcVar2 != (char **)0x0) {
    __s1 = *param_2;
    do {
      while( true ) {
        iVar1 = strcmp(__s1,*ppcVar2);
        if (iVar1 < 0) break;
        if (iVar1 == 0) {
          return ppcVar2;
        }
        ppcVar2 = (char **)ppcVar2[8];
        if (ppcVar2 == (char **)0x0) {
          return (char **)0x0;
        }
      }
      ppcVar2 = (char **)ppcVar2[7];
    } while (ppcVar2 != (char **)0x0);
  }
  return ppcVar2;
}



char ** options_tree_RB_NFIND(long *param_1,char **param_2)

{
  char *__s1;
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  char **ppcVar4;
  
  if ((char **)*param_1 == (char **)0x0) {
    ppcVar4 = (char **)0x0;
  }
  else {
    __s1 = *param_2;
    ppcVar1 = (char **)*param_1;
    ppcVar4 = (char **)0x0;
    do {
      while( true ) {
        ppcVar3 = ppcVar1;
        iVar2 = strcmp(__s1,*ppcVar3);
        if (-1 < iVar2) break;
        ppcVar1 = (char **)ppcVar3[7];
        ppcVar4 = ppcVar3;
        if ((char **)ppcVar3[7] == (char **)0x0) {
          return ppcVar3;
        }
      }
      if (iVar2 == 0) {
        return ppcVar3;
      }
      ppcVar1 = (char **)ppcVar3[8];
    } while ((char **)ppcVar3[8] != (char **)0x0);
  }
  return ppcVar4;
}



long options_tree_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x40);
  if (*(long *)(param_1 + 0x40) == 0) {
    lVar2 = *(long *)(param_1 + 0x48);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x38) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x40))) {
      while (lVar1 = *(long *)(lVar2 + 0x48), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x40);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x38);
    } while (*(long *)(lVar2 + 0x38) != 0);
  }
  return lVar2;
}



long options_tree_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x38);
  if (*(long *)(param_1 + 0x38) == 0) {
    lVar2 = *(long *)(param_1 + 0x48);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x40) != param_1)) &&
       (*(long *)(lVar2 + 0x38) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x48), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x38) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x40);
    } while (*(long *)(lVar2 + 0x40) != 0);
  }
  return lVar2;
}



long options_tree_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x40);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x38);
    }
  }
  return lVar2;
}



void options_create(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  undefined8 *puVar1;
  
  puVar1 = (undefined8 *)
           xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x10,param_11,
                   param_12,param_13,param_14);
  *puVar1 = 0;
  puVar1[1] = param_9;
  return;
}



void options_free(long *param_1)

{
  void **ppvVar1;
  void **ppvVar2;
  
  ppvVar2 = (void **)*param_1;
  if ((void **)*param_1 != (void **)0x0) {
    do {
      ppvVar1 = ppvVar2;
      ppvVar2 = (void **)ppvVar1[7];
    } while ((void **)ppvVar1[7] != (void **)0x0);
    do {
      ppvVar2 = ppvVar1;
      ppvVar1 = (void **)options_tree_RB_NEXT((long)ppvVar1);
      FUN_0014ad70(param_1,ppvVar2);
    } while (ppvVar1 != (void **)0x0);
  }
  free(param_1);
  return;
}



long options_first(long *param_1)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *param_1;
  if (*param_1 != 0) {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x38);
    } while (lVar1 != 0);
    return lVar2;
  }
  return 0;
}



long options_next(long param_1)

{
  long lVar1;
  
  lVar1 = options_tree_RB_NEXT(param_1);
  return lVar1;
}



void options_find1(char **param_1,char *param_2)

{
  long in_FS_OFFSET;
  char *local_68 [11];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_68[0] = param_2;
  options_tree_RB_FIND(param_1,local_68);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char ** options_find(char **param_1,char *param_2)

{
  char **ppcVar1;
  long in_FS_OFFSET;
  char *local_78 [11];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_78[0] = param_2;
  ppcVar1 = options_tree_RB_FIND(param_1,local_78);
  do {
    if (ppcVar1 != (char **)0x0) {
LAB_0014b193:
      if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
        return ppcVar1;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    param_1 = (char **)param_1[1];
    if (param_1 == (char **)0x0) {
      ppcVar1 = (char **)0x0;
      goto LAB_0014b193;
    }
    ppcVar1 = options_tree_RB_FIND(param_1,local_78);
  } while( true );
}



void options_remove(char **param_1,char *param_2)

{
  char **ppcVar1;
  long in_FS_OFFSET;
  char *local_68 [11];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_68[0] = param_2;
  ppcVar1 = options_tree_RB_FIND(param_1,local_68);
  if (ppcVar1 != (char **)0x0) {
    FUN_0014ad70((long *)param_1,ppcVar1);
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char ** options_set_string(undefined4 param_1,undefined4 param_2,undefined4 param_3,
                          undefined4 param_4,undefined4 param_5,undefined4 param_6,
                          undefined4 param_7,undefined4 param_8,char **param_9,char *param_10,
                          undefined8 param_11,undefined8 param_12,undefined8 param_13,
                          undefined8 param_14,undefined param_15)

{
  char in_AL;
  char **ppcVar1;
  char *pcVar2;
  undefined8 extraout_RDX;
  char **ppcVar3;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar4;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined auVar5 [16];
  char *local_138;
  undefined *local_130;
  undefined *local_128;
  long local_e0;
  undefined local_d8 [24];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  undefined4 local_a8;
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  
  ppcVar3 = &local_138;
  if (in_AL != '\0') {
    local_98._4_12_ = in_register_00001224;
    local_98._0_4_ = param_2;
    local_88._4_12_ = in_register_00001244;
    local_88._0_4_ = param_3;
    local_78._4_12_ = in_register_00001264;
    local_78._0_4_ = param_4;
    local_68._4_12_ = in_register_00001284;
    local_68._0_4_ = param_5;
    local_58._4_12_ = in_register_000012a4;
    local_58._0_4_ = param_6;
    local_48._4_12_ = in_register_000012c4;
    local_48._0_4_ = param_7;
    local_38._4_12_ = in_register_000012e4;
    local_38._0_4_ = param_8;
    local_a8 = param_1;
  }
  local_e0 = *(long *)(in_FS_OFFSET + 0x28);
  local_138 = param_10;
  local_c0 = param_12;
  local_b8 = param_13;
  local_b0 = param_14;
  ppcVar1 = options_tree_RB_FIND(param_9,&local_138);
  if (ppcVar1 == (char **)0x0) {
    auVar5 = xmalloc((int)extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     0x58,ppcVar3,extraout_RDX,param_12,param_13,param_14);
    ppcVar1 = auVar5._0_8_;
    pcVar2 = (char *)xstrdup(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,param_10,ppcVar3,auVar5._8_8_,param_12,param_13,param_14);
    *ppcVar1 = pcVar2;
    options_tree_RB_INSERT(param_9,ppcVar1);
    uVar4 = 0x80000080000;
    ppcVar1[4] = (char *)0x80000080000;
    ppcVar1[5] = (char *)0x20;
    *(undefined4 *)(ppcVar1 + 6) = 0x1010000;
  }
  else {
    uVar4 = extraout_XMM0_Qa;
    if (*(int *)(ppcVar1 + 1) == 0) {
      free(ppcVar1[2]);
      uVar4 = extraout_XMM0_Qa_00;
    }
  }
  local_130 = &param_15;
  local_128 = local_d8;
  local_138 = (char *)0x3000000018;
  *(undefined4 *)(ppcVar1 + 1) = 0;
  xvasprintf(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)(ppcVar1 + 2),
             param_11,&local_138,param_12,param_13,param_14);
  if (local_e0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return ppcVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char * options_get_string(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,char **param_9,char *param_10,undefined8 param_11,
                         undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  undefined8 extraout_RDX;
  undefined unaff_BPL;
  undefined4 extraout_XMM0_Da;
  
  ppcVar1 = options_find(param_9,param_10);
  if (ppcVar1 == (char **)0x0) {
                    // WARNING: Subroutine does not return
    fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "missing option %s",param_10,extraout_RDX,param_12,param_13,param_14,unaff_BPL);
  }
  if (*(uint *)(ppcVar1 + 1) == 0) {
    return ppcVar1[2];
  }
                    // WARNING: Subroutine does not return
  fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
         "option %s not a string",param_10,(ulong)*(uint *)(ppcVar1 + 1),param_12,param_13,param_14,
         unaff_BPL);
}



char ** options_set_number(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                          undefined4 param_4,undefined4 param_5,undefined4 param_6,
                          undefined4 param_7,undefined4 param_8,char **param_9,char *param_10,
                          char *param_11,undefined8 param_12,undefined8 param_13,undefined8 param_14
                          )

{
  char **ppcVar1;
  char *pcVar2;
  undefined8 extraout_RDX;
  char **ppcVar3;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined8 extraout_XMM0_Qa;
  undefined auVar4 [16];
  char *local_88 [11];
  long local_30;
  
  ppcVar3 = local_88;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_88[0] = param_10;
  ppcVar1 = options_tree_RB_FIND(param_9,local_88);
  if (ppcVar1 == (char **)0x0) {
    auVar4 = xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x58,
                     ppcVar3,extraout_RDX,param_12,param_13,param_14);
    ppcVar1 = auVar4._0_8_;
    pcVar2 = (char *)xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,param_10,ppcVar3,auVar4._8_8_,param_12,param_13,param_14);
    *ppcVar1 = pcVar2;
    options_tree_RB_INSERT(param_9,ppcVar1);
    *(undefined4 *)(ppcVar1 + 4) = 0x80000;
    *(undefined4 *)((long)ppcVar1 + 0x24) = 0x800;
    *(undefined4 *)(ppcVar1 + 5) = 0x20;
    *(undefined4 *)((long)ppcVar1 + 0x2c) = 0;
    *(undefined4 *)(ppcVar1 + 6) = 0x1010000;
  }
  else if (*(int *)(ppcVar1 + 1) == 0) {
    free(ppcVar1[2]);
  }
  *(undefined4 *)(ppcVar1 + 1) = 1;
  ppcVar1[3] = param_11;
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return ppcVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char * options_get_number(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,char **param_9,char *param_10,undefined8 param_11,
                         undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  undefined8 extraout_RDX;
  undefined unaff_BPL;
  undefined4 extraout_XMM0_Da;
  
  ppcVar1 = options_find(param_9,param_10);
  if (ppcVar1 == (char **)0x0) {
                    // WARNING: Subroutine does not return
    fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "missing option %s",param_10,extraout_RDX,param_12,param_13,param_14,unaff_BPL);
  }
  if (*(int *)(ppcVar1 + 1) == 1) {
    return ppcVar1[3];
  }
                    // WARNING: Subroutine does not return
  fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
         "option %s not a number",param_10,extraout_RDX,param_12,param_13,param_14,unaff_BPL);
}



char ** options_set_style(undefined8 param_1,undefined8 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,char **param_9,char *param_10,byte *param_11,
                         undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  undefined8 uVar2;
  char *pcVar3;
  int iVar4;
  undefined8 extraout_RDX;
  undefined *puVar5;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined8 extraout_XMM0_Qa;
  undefined4 uVar6;
  undefined auVar7 [16];
  undefined local_98 [16];
  undefined4 local_88;
  long local_40;
  
  iVar4 = (int)param_12;
  puVar5 = local_98;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_98._8_8_ = local_98._0_8_;
  local_98._0_8_ = param_10;
  ppcVar1 = options_tree_RB_FIND(param_9,(char **)local_98);
  if ((ppcVar1 == (char **)0x0) || (iVar4 == 0)) {
    local_88 = 0x1010000;
    local_98 = grid_default_cell._0_16_;
    auVar7 = grid_default_cell._0_16_;
    uVar2 = style_parse(grid_default_cell,(undefined4 *)local_98,param_11);
    uVar6 = auVar7._0_4_;
    if ((int)uVar2 == -1) goto LAB_0014b610;
    if (ppcVar1 != (char **)0x0) goto LAB_0014b54b;
    auVar7 = xmalloc(extraout_XMM0_Da,uVar6,param_3,param_4,param_5,param_6,param_7,param_8,0x58,
                     puVar5,extraout_RDX,param_12,param_13,param_14);
    ppcVar1 = auVar7._0_8_;
    pcVar3 = (char *)xstrdup(extraout_XMM0_Qa,uVar6,param_3,param_4,param_5,param_6,param_7,param_8,
                             param_10,puVar5,auVar7._8_8_,param_12,param_13,param_14);
    *ppcVar1 = pcVar3;
    options_tree_RB_INSERT(param_9,ppcVar1);
  }
  else {
    local_98 = *(undefined (*) [16])(ppcVar1 + 4);
    local_88 = *(undefined4 *)(ppcVar1 + 6);
    uVar2 = style_parse(grid_default_cell,(undefined4 *)local_98,param_11);
    if ((int)uVar2 == -1) {
LAB_0014b610:
      ppcVar1 = (char **)0x0;
      goto LAB_0014b575;
    }
LAB_0014b54b:
    if (*(int *)(ppcVar1 + 1) == 0) {
      free(ppcVar1[2]);
    }
  }
  *(undefined4 *)(ppcVar1 + 1) = 2;
  ppcVar1[4] = (char *)local_98._0_8_;
  ppcVar1[5] = (char *)local_98._8_8_;
  *(undefined4 *)(ppcVar1 + 6) = local_88;
LAB_0014b575:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return ppcVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char ** options_get_style(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,char **param_9,char *param_10,undefined8 param_11,
                         undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  undefined8 extraout_RDX;
  undefined unaff_BPL;
  undefined4 extraout_XMM0_Da;
  
  ppcVar1 = options_find(param_9,param_10);
  if (ppcVar1 == (char **)0x0) {
                    // WARNING: Subroutine does not return
    fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "missing option %s",param_10,extraout_RDX,param_12,param_13,param_14,unaff_BPL);
  }
  if (*(int *)(ppcVar1 + 1) == 2) {
    return ppcVar1 + 4;
  }
                    // WARNING: Subroutine does not return
  fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
         "option %s not a style",param_10,extraout_RDX,param_12,param_13,param_14,unaff_BPL);
}



void paste_name_tree_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_0014b668:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x30);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x38) != 1)) {
        *(undefined4 *)(*param_1 + 0x38) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x30);
      lVar3 = *(long *)(lVar2 + 0x20);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x28);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x38) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x28) == param_2) {
          lVar3 = *(long *)(param_2 + 0x20);
          *(long *)(lVar1 + 0x28) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x30) = lVar2;
            lVar3 = lVar2;
LAB_0014b887:
            *(long *)(lVar3 + 0x20) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x30) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x30);
            *(long *)(param_2 + 0x30) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x20) == lVar1) goto LAB_0014b887;
              *(long *)(lVar3 + 0x28) = param_2;
            }
          }
          *(long *)(param_2 + 0x20) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x20);
          *(long *)(lVar1 + 0x30) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x38) = 0;
        lVar1 = *(long *)(lVar3 + 0x28);
        *(undefined4 *)(lVar2 + 0x38) = 1;
        *(long *)(lVar2 + 0x20) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x30) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x30);
        *(long *)(lVar3 + 0x30) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x20) == lVar2) {
          *(long *)(lVar1 + 0x20) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x28) = lVar3;
        }
        *(long *)(lVar3 + 0x28) = lVar2;
        *(long *)(lVar2 + 0x30) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x38) = 0;
        *(undefined4 *)(lVar1 + 0x38) = 0;
        *(undefined4 *)(lVar2 + 0x38) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x38) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x20) == param_2) {
        lVar3 = *(long *)(param_2 + 0x28);
        *(long *)(lVar1 + 0x20) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x30) = lVar2;
          lVar3 = lVar2;
LAB_0014b78e:
          if (*(long *)(lVar3 + 0x20) == lVar1) {
            *(long *)(lVar3 + 0x20) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x28) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x30) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x30);
          *(long *)(param_2 + 0x30) = lVar3;
          if (lVar3 != 0) goto LAB_0014b78e;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x28) = lVar1;
        *(long *)(lVar1 + 0x30) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x38) = 0;
      lVar1 = *(long *)(lVar2 + 0x28);
      *(undefined4 *)(lVar2 + 0x38) = 1;
      lVar3 = *(long *)(lVar1 + 0x20);
      *(long *)(lVar2 + 0x28) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x30) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x30);
      *(long *)(lVar1 + 0x30) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x20) == lVar2) {
        *(long *)(lVar3 + 0x20) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x28) = lVar1;
      }
      *(long *)(lVar1 + 0x20) = lVar2;
      *(long *)(lVar2 + 0x30) = lVar1;
      goto LAB_0014b668;
    }
    *(undefined4 *)(lVar3 + 0x38) = 0;
    *(undefined4 *)(lVar1 + 0x38) = 0;
    *(undefined4 *)(lVar2 + 0x38) = 1;
    param_2 = lVar2;
  } while( true );
}



void paste_name_tree_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_0014b935(param_1,param_2,param_3);
  return;
}



void FUN_0014b935(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x38) != 0)) goto LAB_0014b9eb;
    if (*param_1 == param_3) goto joined_r0x0014bb2e;
    lVar2 = *(long *)(param_2 + 0x20);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x38) == 1) {
        lVar1 = *(long *)(lVar2 + 0x28);
        *(undefined4 *)(lVar2 + 0x38) = 0;
        *(undefined4 *)(param_2 + 0x38) = 1;
        *(long *)(param_2 + 0x20) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x30) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x30);
        *(long *)(lVar2 + 0x30) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x30) + 0x20) == param_2) {
          *(long *)(lVar3 + 0x20) = lVar2;
          lVar1 = *(long *)(param_2 + 0x20);
        }
        else {
          *(long *)(lVar3 + 0x28) = lVar2;
        }
        *(long *)(lVar2 + 0x28) = param_2;
        *(long *)(param_2 + 0x30) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x20);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x38) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x28);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x38) == 0)) goto LAB_0014b924;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x38) != 0)) goto LAB_0014bad2;
        lVar2 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar3 + 0x38) = 0;
        *(undefined4 *)(lVar1 + 0x38) = 1;
        *(long *)(lVar1 + 0x28) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x30) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x30);
        *(long *)(lVar3 + 0x30) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x20) == lVar1) {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x28) = lVar3;
        }
        *(long *)(lVar3 + 0x20) = lVar1;
        *(long *)(lVar1 + 0x30) = lVar3;
        lVar3 = *(long *)(param_2 + 0x20);
        lVar2 = *(long *)(lVar3 + 0x20);
        *(undefined4 *)(lVar3 + 0x38) = *(undefined4 *)(param_2 + 0x38);
        *(undefined4 *)(param_2 + 0x38) = 0;
        if (lVar2 != 0) goto LAB_0014bae5;
      }
      else {
LAB_0014bad2:
        lVar3 = *(long *)(param_2 + 0x20);
        *(undefined4 *)(lVar1 + 0x38) = *(undefined4 *)(param_2 + 0x38);
        *(undefined4 *)(param_2 + 0x38) = 0;
LAB_0014bae5:
        *(undefined4 *)(lVar2 + 0x38) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x28);
      *(long *)(param_2 + 0x20) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x30) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x30);
      *(long *)(lVar3 + 0x30) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x30) + 0x20) == param_2) {
        *(long *)(lVar2 + 0x20) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x28) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x28) = param_2;
      *(long *)(param_2 + 0x30) = lVar3;
      goto joined_r0x0014bb2e;
    }
    lVar2 = *(long *)(param_2 + 0x28);
    lVar3 = *(long *)(lVar2 + 0x20);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x38) == 1) {
      *(undefined4 *)(lVar2 + 0x38) = 0;
      *(undefined4 *)(param_2 + 0x38) = 1;
      *(long *)(param_2 + 0x28) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x30) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x30);
      *(long *)(lVar2 + 0x30) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x20) == param_2) {
        *(long *)(lVar4 + 0x20) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x28) = lVar2;
        lVar1 = *(long *)(param_2 + 0x28);
      }
      *(long *)(lVar2 + 0x20) = param_2;
      lVar3 = *(long *)(lVar1 + 0x20);
      *(long *)(param_2 + 0x30) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x38) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x28);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x38) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x28);
        *(undefined4 *)(lVar3 + 0x38) = 0;
        *(undefined4 *)(lVar1 + 0x38) = 1;
        *(long *)(lVar1 + 0x20) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x30) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x30);
        *(long *)(lVar3 + 0x30) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x20) == lVar1) {
          *(long *)(lVar2 + 0x20) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x28) = lVar3;
        }
        *(long *)(lVar3 + 0x28) = lVar1;
        lVar4 = *(long *)(param_2 + 0x28);
        *(long *)(lVar1 + 0x30) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x28);
        *(undefined4 *)(lVar4 + 0x38) = *(undefined4 *)(param_2 + 0x38);
        *(undefined4 *)(param_2 + 0x38) = 0;
        if (lVar2 != 0) goto LAB_0014b9a0;
        goto LAB_0014b9a7;
      }
LAB_0014b98f:
      lVar4 = *(long *)(param_2 + 0x28);
      *(undefined4 *)(lVar1 + 0x38) = *(undefined4 *)(param_2 + 0x38);
      *(undefined4 *)(param_2 + 0x38) = 0;
LAB_0014b9a0:
      *(undefined4 *)(lVar2 + 0x38) = 0;
LAB_0014b9a7:
      lVar2 = *(long *)(lVar4 + 0x20);
      *(long *)(param_2 + 0x28) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x30) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x30);
      *(long *)(lVar4 + 0x30) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x20) == param_2) {
        *(long *)(lVar2 + 0x20) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x28) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x20) = param_2;
      *(long *)(param_2 + 0x30) = lVar4;
joined_r0x0014bb2e:
      if (param_3 == 0) {
        return;
      }
LAB_0014b9eb:
      *(undefined4 *)(param_3 + 0x38) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x28);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x38) != 0)) goto LAB_0014b98f;
LAB_0014b924:
    *(undefined4 *)(lVar1 + 0x38) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x30);
  } while( true );
}



long paste_name_tree_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x28);
  if (*(long *)(param_2 + 0x20) == 0) {
    lVar7 = *(long *)(param_2 + 0x30);
    iVar4 = *(int *)(param_2 + 0x38);
    if (lVar6 != 0) goto LAB_0014bd5c;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x20);
      } while (*(long *)(lVar5 + 0x20) != 0);
      lVar7 = *(long *)(lVar5 + 0x30);
      lVar6 = *(long *)(lVar5 + 0x28);
      iVar4 = *(int *)(lVar5 + 0x38);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x30) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x30);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x20) == lVar5) {
        *(long *)(lVar7 + 0x20) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x28) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x24);
      uVar2 = *(undefined4 *)(param_2 + 0x28);
      uVar3 = *(undefined4 *)(param_2 + 0x2c);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x20) = *(undefined4 *)(param_2 + 0x20);
      *(undefined4 *)(lVar5 + 0x24) = uVar1;
      *(undefined4 *)(lVar5 + 0x28) = uVar2;
      *(undefined4 *)(lVar5 + 0x2c) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x34);
      uVar2 = *(undefined4 *)(param_2 + 0x38);
      uVar3 = *(undefined4 *)(param_2 + 0x3c);
      *(undefined4 *)(lVar5 + 0x30) = *(undefined4 *)(param_2 + 0x30);
      *(undefined4 *)(lVar5 + 0x34) = uVar1;
      *(undefined4 *)(lVar5 + 0x38) = uVar2;
      *(undefined4 *)(lVar5 + 0x3c) = uVar3;
      lVar8 = *(long *)(param_2 + 0x30);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x20) == param_2) {
        *(long *)(lVar8 + 0x20) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x28) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x20) + 0x30) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x28) != 0) {
        *(long *)(*(long *)(param_2 + 0x28) + 0x30) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x30)) {
      }
      goto joined_r0x0014bd71;
    }
    lVar7 = *(long *)(param_2 + 0x30);
    iVar4 = *(int *)(param_2 + 0x38);
    lVar6 = *(long *)(param_2 + 0x20);
LAB_0014bd5c:
    *(long *)(lVar6 + 0x30) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x20) == param_2) {
    *(long *)(lVar7 + 0x20) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x28) = lVar6;
  }
joined_r0x0014bd71:
  if (iVar4 == 0) {
    paste_name_tree_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



long paste_name_tree_RB_INSERT(long *param_1,long param_2)

{
  char *__s1;
  long lVar1;
  int iVar2;
  long lVar3;
  
  if (*param_1 == 0) {
    *(undefined8 *)(param_2 + 0x30) = 0;
    *(undefined8 *)(param_2 + 0x28) = 0;
    *(undefined8 *)(param_2 + 0x20) = 0;
    *(undefined4 *)(param_2 + 0x38) = 1;
    *param_1 = param_2;
  }
  else {
    __s1 = *(char **)(param_2 + 0x10);
    lVar1 = *param_1;
    do {
      lVar3 = lVar1;
      iVar2 = strcmp(__s1,*(char **)(lVar3 + 0x10));
      if (iVar2 < 0) {
        lVar1 = *(long *)(lVar3 + 0x20);
      }
      else {
        if (iVar2 == 0) {
          return lVar3;
        }
        lVar1 = *(long *)(lVar3 + 0x28);
      }
    } while (lVar1 != 0);
    *(long *)(param_2 + 0x30) = lVar3;
    *(undefined8 *)(param_2 + 0x28) = 0;
    *(undefined8 *)(param_2 + 0x20) = 0;
    *(undefined4 *)(param_2 + 0x38) = 1;
    if (iVar2 < 0) {
      *(long *)(lVar3 + 0x20) = param_2;
    }
    else {
      *(long *)(lVar3 + 0x28) = param_2;
    }
  }
  paste_name_tree_RB_INSERT_COLOR(param_1,param_2);
  return 0;
}



long paste_name_tree_RB_FIND(long *param_1,long param_2)

{
  char *__s1;
  int iVar1;
  long lVar2;
  
  lVar2 = *param_1;
  if (lVar2 != 0) {
    __s1 = *(char **)(param_2 + 0x10);
    do {
      while( true ) {
        iVar1 = strcmp(__s1,*(char **)(lVar2 + 0x10));
        if (iVar1 < 0) break;
        if (iVar1 == 0) {
          return lVar2;
        }
        lVar2 = *(long *)(lVar2 + 0x28);
        if (lVar2 == 0) {
          return 0;
        }
      }
      lVar2 = *(long *)(lVar2 + 0x20);
    } while (lVar2 != 0);
  }
  return lVar2;
}



void FUN_0014bf20(undefined8 param_1)

{
  long in_FS_OFFSET;
  undefined auStack_78 [16];
  undefined8 local_68;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_68 = param_1;
  paste_name_tree_RB_FIND(&paste_by_name,(long)auStack_78);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long paste_name_tree_RB_NFIND(long *param_1,long param_2)

{
  char *__s1;
  long lVar1;
  int iVar2;
  long lVar3;
  long lVar4;
  
  if (*param_1 == 0) {
    lVar4 = 0;
  }
  else {
    __s1 = *(char **)(param_2 + 0x10);
    lVar1 = *param_1;
    lVar4 = 0;
    do {
      while( true ) {
        lVar3 = lVar1;
        iVar2 = strcmp(__s1,*(char **)(lVar3 + 0x10));
        if (-1 < iVar2) break;
        lVar1 = *(long *)(lVar3 + 0x20);
        lVar4 = lVar3;
        if (*(long *)(lVar3 + 0x20) == 0) {
          return lVar3;
        }
      }
      if (iVar2 == 0) {
        return lVar3;
      }
      lVar1 = *(long *)(lVar3 + 0x28);
    } while (*(long *)(lVar3 + 0x28) != 0);
  }
  return lVar4;
}



long paste_name_tree_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x28);
  if (*(long *)(param_1 + 0x28) == 0) {
    lVar2 = *(long *)(param_1 + 0x30);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x20) != param_1)) &&
       (*(long *)(lVar2 + 0x28) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x30), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x28) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x20);
    } while (*(long *)(lVar2 + 0x20) != 0);
  }
  return lVar2;
}



long paste_name_tree_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x20);
  if (*(long *)(param_1 + 0x20) == 0) {
    lVar2 = *(long *)(param_1 + 0x30);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x28) != param_1)) &&
       (*(long *)(lVar2 + 0x20) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x30), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x20) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x28);
    } while (*(long *)(lVar2 + 0x28) != 0);
  }
  return lVar2;
}



long paste_name_tree_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x28);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x20);
    }
  }
  return lVar2;
}



void paste_time_tree_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_0014c0c8:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x50);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x58) != 1)) {
        *(undefined4 *)(*param_1 + 0x58) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x50);
      lVar3 = *(long *)(lVar2 + 0x40);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x48);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x58) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x48) == param_2) {
          lVar3 = *(long *)(param_2 + 0x40);
          *(long *)(lVar1 + 0x48) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x50) = lVar2;
            lVar3 = lVar2;
LAB_0014c2e7:
            *(long *)(lVar3 + 0x40) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x50) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x50);
            *(long *)(param_2 + 0x50) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x40) == lVar1) goto LAB_0014c2e7;
              *(long *)(lVar3 + 0x48) = param_2;
            }
          }
          *(long *)(param_2 + 0x40) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x40);
          *(long *)(lVar1 + 0x50) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x58) = 0;
        lVar1 = *(long *)(lVar3 + 0x48);
        *(undefined4 *)(lVar2 + 0x58) = 1;
        *(long *)(lVar2 + 0x40) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x50) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x50);
        *(long *)(lVar3 + 0x50) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x40) == lVar2) {
          *(long *)(lVar1 + 0x40) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x48) = lVar3;
        }
        *(long *)(lVar3 + 0x48) = lVar2;
        *(long *)(lVar2 + 0x50) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x58) = 0;
        *(undefined4 *)(lVar1 + 0x58) = 0;
        *(undefined4 *)(lVar2 + 0x58) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x58) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x40) == param_2) {
        lVar3 = *(long *)(param_2 + 0x48);
        *(long *)(lVar1 + 0x40) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x50) = lVar2;
          lVar3 = lVar2;
LAB_0014c1ee:
          if (*(long *)(lVar3 + 0x40) == lVar1) {
            *(long *)(lVar3 + 0x40) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x48) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x50) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x50);
          *(long *)(param_2 + 0x50) = lVar3;
          if (lVar3 != 0) goto LAB_0014c1ee;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x48) = lVar1;
        *(long *)(lVar1 + 0x50) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x58) = 0;
      lVar1 = *(long *)(lVar2 + 0x48);
      *(undefined4 *)(lVar2 + 0x58) = 1;
      lVar3 = *(long *)(lVar1 + 0x40);
      *(long *)(lVar2 + 0x48) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x50) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x50);
      *(long *)(lVar1 + 0x50) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x40) == lVar2) {
        *(long *)(lVar3 + 0x40) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x48) = lVar1;
      }
      *(long *)(lVar1 + 0x40) = lVar2;
      *(long *)(lVar2 + 0x50) = lVar1;
      goto LAB_0014c0c8;
    }
    *(undefined4 *)(lVar3 + 0x58) = 0;
    *(undefined4 *)(lVar1 + 0x58) = 0;
    *(undefined4 *)(lVar2 + 0x58) = 1;
    param_2 = lVar2;
  } while( true );
}



void paste_time_tree_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_0014c395(param_1,param_2,param_3);
  return;
}



void FUN_0014c395(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x58) != 0)) goto LAB_0014c44b;
    if (*param_1 == param_3) goto joined_r0x0014c58e;
    lVar2 = *(long *)(param_2 + 0x40);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x58) == 1) {
        lVar1 = *(long *)(lVar2 + 0x48);
        *(undefined4 *)(lVar2 + 0x58) = 0;
        *(undefined4 *)(param_2 + 0x58) = 1;
        *(long *)(param_2 + 0x40) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x50) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x50);
        *(long *)(lVar2 + 0x50) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x50) + 0x40) == param_2) {
          *(long *)(lVar3 + 0x40) = lVar2;
          lVar1 = *(long *)(param_2 + 0x40);
        }
        else {
          *(long *)(lVar3 + 0x48) = lVar2;
        }
        *(long *)(lVar2 + 0x48) = param_2;
        *(long *)(param_2 + 0x50) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x40);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x58) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x48);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x58) == 0)) goto LAB_0014c384;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x58) != 0)) goto LAB_0014c532;
        lVar2 = *(long *)(lVar3 + 0x40);
        *(undefined4 *)(lVar3 + 0x58) = 0;
        *(undefined4 *)(lVar1 + 0x58) = 1;
        *(long *)(lVar1 + 0x48) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x50) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x50);
        *(long *)(lVar3 + 0x50) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x40) == lVar1) {
          *(long *)(lVar2 + 0x40) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x48) = lVar3;
        }
        *(long *)(lVar3 + 0x40) = lVar1;
        *(long *)(lVar1 + 0x50) = lVar3;
        lVar3 = *(long *)(param_2 + 0x40);
        lVar2 = *(long *)(lVar3 + 0x40);
        *(undefined4 *)(lVar3 + 0x58) = *(undefined4 *)(param_2 + 0x58);
        *(undefined4 *)(param_2 + 0x58) = 0;
        if (lVar2 != 0) goto LAB_0014c545;
      }
      else {
LAB_0014c532:
        lVar3 = *(long *)(param_2 + 0x40);
        *(undefined4 *)(lVar1 + 0x58) = *(undefined4 *)(param_2 + 0x58);
        *(undefined4 *)(param_2 + 0x58) = 0;
LAB_0014c545:
        *(undefined4 *)(lVar2 + 0x58) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x48);
      *(long *)(param_2 + 0x40) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x50) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x50);
      *(long *)(lVar3 + 0x50) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x50) + 0x40) == param_2) {
        *(long *)(lVar2 + 0x40) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x48) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x48) = param_2;
      *(long *)(param_2 + 0x50) = lVar3;
      goto joined_r0x0014c58e;
    }
    lVar2 = *(long *)(param_2 + 0x48);
    lVar3 = *(long *)(lVar2 + 0x40);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x58) == 1) {
      *(undefined4 *)(lVar2 + 0x58) = 0;
      *(undefined4 *)(param_2 + 0x58) = 1;
      *(long *)(param_2 + 0x48) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x50) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x50);
      *(long *)(lVar2 + 0x50) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x40) == param_2) {
        *(long *)(lVar4 + 0x40) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x48) = lVar2;
        lVar1 = *(long *)(param_2 + 0x48);
      }
      *(long *)(lVar2 + 0x40) = param_2;
      lVar3 = *(long *)(lVar1 + 0x40);
      *(long *)(param_2 + 0x50) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x58) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x48);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x58) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x48);
        *(undefined4 *)(lVar3 + 0x58) = 0;
        *(undefined4 *)(lVar1 + 0x58) = 1;
        *(long *)(lVar1 + 0x40) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x50) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x50);
        *(long *)(lVar3 + 0x50) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x40) == lVar1) {
          *(long *)(lVar2 + 0x40) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x48) = lVar3;
        }
        *(long *)(lVar3 + 0x48) = lVar1;
        lVar4 = *(long *)(param_2 + 0x48);
        *(long *)(lVar1 + 0x50) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x48);
        *(undefined4 *)(lVar4 + 0x58) = *(undefined4 *)(param_2 + 0x58);
        *(undefined4 *)(param_2 + 0x58) = 0;
        if (lVar2 != 0) goto LAB_0014c400;
        goto LAB_0014c407;
      }
LAB_0014c3ef:
      lVar4 = *(long *)(param_2 + 0x48);
      *(undefined4 *)(lVar1 + 0x58) = *(undefined4 *)(param_2 + 0x58);
      *(undefined4 *)(param_2 + 0x58) = 0;
LAB_0014c400:
      *(undefined4 *)(lVar2 + 0x58) = 0;
LAB_0014c407:
      lVar2 = *(long *)(lVar4 + 0x40);
      *(long *)(param_2 + 0x48) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x50) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x50);
      *(long *)(lVar4 + 0x50) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x40) == param_2) {
        *(long *)(lVar2 + 0x40) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x48) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x40) = param_2;
      *(long *)(param_2 + 0x50) = lVar4;
joined_r0x0014c58e:
      if (param_3 == 0) {
        return;
      }
LAB_0014c44b:
      *(undefined4 *)(param_3 + 0x58) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x48);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x58) != 0)) goto LAB_0014c3ef;
LAB_0014c384:
    *(undefined4 *)(lVar1 + 0x58) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x50);
  } while( true );
}



long paste_time_tree_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x48);
  if (*(long *)(param_2 + 0x40) == 0) {
    lVar7 = *(long *)(param_2 + 0x50);
    iVar4 = *(int *)(param_2 + 0x58);
    if (lVar6 != 0) goto LAB_0014c7bc;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x40);
      } while (*(long *)(lVar5 + 0x40) != 0);
      lVar7 = *(long *)(lVar5 + 0x50);
      lVar6 = *(long *)(lVar5 + 0x48);
      iVar4 = *(int *)(lVar5 + 0x58);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x50) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x50);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x40) == lVar5) {
        *(long *)(lVar7 + 0x40) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x48) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x44);
      uVar2 = *(undefined4 *)(param_2 + 0x48);
      uVar3 = *(undefined4 *)(param_2 + 0x4c);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x40) = *(undefined4 *)(param_2 + 0x40);
      *(undefined4 *)(lVar5 + 0x44) = uVar1;
      *(undefined4 *)(lVar5 + 0x48) = uVar2;
      *(undefined4 *)(lVar5 + 0x4c) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x54);
      uVar2 = *(undefined4 *)(param_2 + 0x58);
      uVar3 = *(undefined4 *)(param_2 + 0x5c);
      *(undefined4 *)(lVar5 + 0x50) = *(undefined4 *)(param_2 + 0x50);
      *(undefined4 *)(lVar5 + 0x54) = uVar1;
      *(undefined4 *)(lVar5 + 0x58) = uVar2;
      *(undefined4 *)(lVar5 + 0x5c) = uVar3;
      lVar8 = *(long *)(param_2 + 0x50);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x40) == param_2) {
        *(long *)(lVar8 + 0x40) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x48) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x40) + 0x50) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x48) != 0) {
        *(long *)(*(long *)(param_2 + 0x48) + 0x50) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x50)) {
      }
      goto joined_r0x0014c7d1;
    }
    lVar7 = *(long *)(param_2 + 0x50);
    iVar4 = *(int *)(param_2 + 0x58);
    lVar6 = *(long *)(param_2 + 0x40);
LAB_0014c7bc:
    *(long *)(lVar6 + 0x50) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x40) == param_2) {
    *(long *)(lVar7 + 0x40) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x48) = lVar6;
  }
joined_r0x0014c7d1:
  if (iVar4 == 0) {
    paste_time_tree_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



long paste_time_tree_RB_INSERT(long *param_1,long param_2)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  int iVar5;
  bool bVar6;
  
  lVar4 = *param_1;
  if (lVar4 == 0) {
    *(undefined8 *)(param_2 + 0x50) = 0;
    *(undefined8 *)(param_2 + 0x48) = 0;
    *(undefined8 *)(param_2 + 0x40) = 0;
    *(undefined4 *)(param_2 + 0x58) = 1;
    *param_1 = param_2;
LAB_0014c8bb:
    paste_time_tree_RB_INSERT_COLOR(param_1,param_2);
    return 0;
  }
  uVar1 = *(uint *)(param_2 + 0x1c);
  bVar6 = uVar1 < *(uint *)(lVar4 + 0x1c);
  if (!bVar6 && uVar1 != *(uint *)(lVar4 + 0x1c)) goto LAB_0014c887;
  do {
    if (!bVar6) {
      return lVar4;
    }
    iVar5 = 1;
    lVar3 = *(long *)(lVar4 + 0x48);
    lVar2 = lVar4;
    while( true ) {
      lVar4 = lVar3;
      if (lVar4 == 0) {
        *(long *)(param_2 + 0x50) = lVar2;
        *(undefined8 *)(param_2 + 0x48) = 0;
        *(undefined8 *)(param_2 + 0x40) = 0;
        *(undefined4 *)(param_2 + 0x58) = 1;
        if (iVar5 == -1) {
          *(long *)(lVar2 + 0x40) = param_2;
        }
        else {
          *(long *)(lVar2 + 0x48) = param_2;
        }
        goto LAB_0014c8bb;
      }
      bVar6 = uVar1 < *(uint *)(lVar4 + 0x1c);
      if (uVar1 <= *(uint *)(lVar4 + 0x1c)) break;
LAB_0014c887:
      iVar5 = -1;
      lVar3 = *(long *)(lVar4 + 0x40);
      lVar2 = lVar4;
    }
  } while( true );
}



void paste_time_tree_RB_FIND(long *param_1,long param_2)

{
  uint uVar1;
  long lVar2;
  bool bVar3;
  
  lVar2 = *param_1;
  if (lVar2 != 0) {
    uVar1 = *(uint *)(param_2 + 0x1c);
    bVar3 = uVar1 < *(uint *)(lVar2 + 0x1c);
    if (!bVar3 && uVar1 != *(uint *)(lVar2 + 0x1c)) goto LAB_0014c92e;
    while (bVar3) {
      lVar2 = *(long *)(lVar2 + 0x48);
      while( true ) {
        if (lVar2 == 0) {
          return;
        }
        bVar3 = uVar1 < *(uint *)(lVar2 + 0x1c);
        if (uVar1 <= *(uint *)(lVar2 + 0x1c)) break;
LAB_0014c92e:
        lVar2 = *(long *)(lVar2 + 0x40);
      }
    }
  }
  return;
}



long paste_time_tree_RB_NFIND(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  if (*param_1 == 0) {
    return 0;
  }
  lVar3 = 0;
  lVar1 = *param_1;
  do {
    if (*(uint *)(lVar1 + 0x1c) < *(uint *)(param_2 + 0x1c)) {
      lVar2 = *(long *)(lVar1 + 0x40);
      lVar3 = lVar1;
    }
    else {
      if (*(uint *)(lVar1 + 0x1c) <= *(uint *)(param_2 + 0x1c)) {
        return lVar1;
      }
      lVar2 = *(long *)(lVar1 + 0x48);
    }
    lVar1 = lVar2;
  } while (lVar2 != 0);
  return lVar3;
}



long paste_time_tree_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x48);
  if (*(long *)(param_1 + 0x48) == 0) {
    lVar2 = *(long *)(param_1 + 0x50);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x40) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x48))) {
      while (lVar1 = *(long *)(lVar2 + 0x50), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x48);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x40);
    } while (*(long *)(lVar2 + 0x40) != 0);
  }
  return lVar2;
}



long paste_time_tree_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x40);
  if (*(long *)(param_1 + 0x40) == 0) {
    lVar2 = *(long *)(param_1 + 0x50);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x48) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x40))) {
      while (lVar1 = *(long *)(lVar2 + 0x50), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x40);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x48);
    } while (*(long *)(lVar2 + 0x48) != 0);
  }
  return lVar2;
}



long paste_time_tree_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x48);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x40);
    }
  }
  return lVar2;
}



void paste_cmp_names(long param_1,long param_2)

{
  strcmp(*(char **)(param_1 + 0x10),*(char **)(param_2 + 0x10));
  return;
}



ulong paste_cmp_times(long param_1,long param_2)

{
  ulong uVar1;
  
  uVar1 = 0xffffffff;
  if (*(uint *)(param_1 + 0x1c) <= *(uint *)(param_2 + 0x1c)) {
    uVar1 = (ulong)(*(uint *)(param_1 + 0x1c) < *(uint *)(param_2 + 0x1c));
  }
  return uVar1;
}



undefined8 paste_buffer_name(long param_1)

{
  return *(undefined8 *)(param_1 + 0x10);
}



undefined8 paste_buffer_data(undefined8 *param_1,undefined8 *param_2)

{
  if (param_2 != (undefined8 *)0x0) {
    *param_2 = param_1[1];
  }
  return *param_1;
}



long paste_walk(long param_1)

{
  long lVar1;
  long lVar2;
  
  if (param_1 != 0) {
    lVar1 = paste_time_tree_RB_NEXT(param_1);
    return lVar1;
  }
  lVar1 = paste_by_time;
  if (paste_by_time == 0) {
    lVar2 = 0;
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x40);
    } while (*(long *)(lVar2 + 0x40) != 0);
  }
  return lVar2;
}



long paste_get_top(undefined8 *param_1)

{
  long lVar1;
  long lVar2;
  
  lVar1 = paste_by_time;
  if (paste_by_time != 0) {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x40);
    } while (*(long *)(lVar2 + 0x40) != 0);
    if (param_1 != (undefined8 *)0x0) {
      *param_1 = *(undefined8 *)(lVar2 + 0x10);
    }
    return lVar2;
  }
  return 0;
}



undefined8 paste_get_name(char *param_1)

{
  undefined8 uVar1;
  
  if ((param_1 != (char *)0x0) && (*param_1 != '\0')) {
    uVar1 = FUN_0014bf20(param_1);
    return uVar1;
  }
  return 0;
}



void paste_free(void **param_1)

{
  paste_name_tree_RB_REMOVE(&paste_by_name,(long)param_1);
  paste_time_tree_RB_REMOVE(&paste_by_time,(long)param_1);
  if (*(int *)(param_1 + 3) != 0) {
    paste_num_automatic = paste_num_automatic + -1;
  }
  free(*param_1);
  free(param_1[2]);
  free(param_1);
  return;
}



void paste_add(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              undefined8 param_9,long param_10,undefined8 param_11,undefined8 param_12,
              undefined8 param_13,void **param_14)

{
  void **ppvVar1;
  char *pcVar2;
  void **ppvVar3;
  undefined8 *puVar4;
  long lVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar6;
  char *pcVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffc8;
  
  if (param_10 == 0) {
    return;
  }
  pcVar7 = "buffer-limit";
  pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              global_options,"buffer-limit",param_11,param_12,param_13,param_14);
  ppvVar1 = paste_by_time;
  uVar6 = extraout_RDX;
  uVar8 = extraout_XMM0_Da;
  if (paste_by_time != (void **)0x0) {
    do {
      ppvVar3 = ppvVar1;
      ppvVar1 = (void **)ppvVar3[9];
    } while ((void **)ppvVar3[9] != (void **)0x0);
    do {
      while( true ) {
        param_14 = ppvVar3;
        ppvVar3 = (void **)paste_time_tree_RB_PREV((long)ppvVar3);
        uVar6 = extraout_RDX_01;
        uVar8 = extraout_XMM0_Da_00;
        if (paste_num_automatic < (uint)pcVar2) goto LAB_0014cc60;
        if (*(int *)(param_14 + 3) != 0) break;
        if (ppvVar3 == (void **)0x0) goto LAB_0014cc60;
      }
      uVar8 = paste_free(param_14);
      uVar6 = extraout_RDX_00;
    } while (ppvVar3 != (void **)0x0);
  }
LAB_0014cc60:
  pcVar2 = (char *)0x0;
  puVar4 = (undefined8 *)
           xmalloc(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x60,pcVar7,uVar6,
                   param_12,param_13,param_14);
  puVar4[2] = 0;
  do {
    free(pcVar2);
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,param_6
              ,param_7,param_8,puVar4 + 2,"buffer%04u",(ulong)paste_next_index,param_12,param_13,
              param_14,in_stack_ffffffffffffffc8);
    pcVar2 = (char *)puVar4[2];
    paste_next_index = paste_next_index + 1;
    if ((pcVar2 == (char *)0x0) || (*pcVar2 == '\0')) break;
    lVar5 = FUN_0014bf20(pcVar2);
  } while (lVar5 != 0);
  *puVar4 = param_9;
  puVar4[1] = param_10;
  *(undefined4 *)(puVar4 + 3) = 1;
  *(int *)((long)puVar4 + 0x1c) = paste_next_order;
  paste_num_automatic = paste_num_automatic + 1;
  paste_next_order = paste_next_order + 1;
  paste_name_tree_RB_INSERT(&paste_by_name,(long)puVar4);
  paste_time_tree_RB_INSERT((long *)&paste_by_time,(long)puVar4);
  return;
}



undefined8
paste_rename(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
            char *param_9,char *param_10,long *param_11,undefined8 param_12,undefined8 param_13,
            undefined8 param_14)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined in_stack_ffffffffffffffd8;
  
  if (param_11 == (long *)0x0) {
    if (param_9 == (char *)0x0) {
      return 0xffffffff;
    }
    if (*param_9 == '\0') {
      return 0xffffffff;
    }
    if (param_10 == (char *)0x0) {
      return 0xffffffff;
    }
    if (*param_10 == '\0') {
      return 0xffffffff;
    }
  }
  else {
    *param_11 = 0;
    if ((param_9 == (char *)0x0) || (*param_9 == '\0')) {
      lVar1 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"no buffer",
                      param_10,param_11,param_12,param_13,param_14);
      *param_11 = lVar1;
      return 0xffffffff;
    }
    if ((param_10 == (char *)0x0) || (*param_10 == '\0')) {
      lVar1 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      "new name is empty",param_10,param_11,param_12,param_13,param_14);
      *param_11 = lVar1;
      return 0xffffffff;
    }
  }
  lVar1 = FUN_0014bf20(param_9);
  if (lVar1 == 0) {
    if (param_11 != (long *)0x0) {
      xasprintf(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                "no buffer %s",param_9,param_12,param_13,param_14,in_stack_ffffffffffffffd8);
      return 0xffffffff;
    }
  }
  else {
    lVar2 = FUN_0014bf20(param_10);
    if (lVar2 == 0) {
      lVar2 = lVar1;
      paste_name_tree_RB_REMOVE(&paste_by_name,lVar1);
      free(*(void **)(lVar1 + 0x10));
      uVar3 = xstrdup(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      param_10,lVar2,extraout_RDX,param_12,param_13,param_14);
      *(undefined8 *)(lVar1 + 0x10) = uVar3;
      if (*(int *)(lVar1 + 0x18) != 0) {
        paste_num_automatic = paste_num_automatic + -1;
      }
      *(undefined4 *)(lVar1 + 0x18) = 0;
      paste_name_tree_RB_INSERT(&paste_by_name,lVar1);
      return 0;
    }
    if (param_11 != (long *)0x0) {
      xasprintf(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11
                ,"buffer %s already exists",param_10,param_12,param_13,param_14,
                in_stack_ffffffffffffffd8);
    }
  }
  return 0xffffffff;
}



undefined8
paste_set(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
         undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,void *param_9,
         void *param_10,char *param_11,undefined8 *param_12,undefined8 param_13,void **param_14)

{
  int iVar1;
  void **ppvVar2;
  void *extraout_RAX;
  void **ppvVar3;
  undefined8 uVar4;
  void *pvVar5;
  undefined8 uVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined auVar7 [16];
  
  if (param_12 != (undefined8 *)0x0) {
    *param_12 = 0;
  }
  if (param_10 != (void *)0x0) {
    if (param_11 == (char *)0x0) {
      paste_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                (long)param_10,0,param_12,param_13,param_14);
      uVar6 = 0;
    }
    else if (*param_11 == '\0') {
      uVar6 = 0xffffffff;
      if (param_12 != (undefined8 *)0x0) {
        uVar4 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        "empty buffer name",param_10,param_11,param_12,param_13,param_14);
        *param_12 = uVar4;
      }
    }
    else {
      pvVar5 = param_10;
      auVar7 = xmalloc((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x60,
                       param_10,param_11,param_12,param_13,param_14);
      ppvVar2 = auVar7._0_8_;
      xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,param_11,pvVar5,auVar7._8_8_,param_12,param_13,param_14);
      *ppvVar2 = param_9;
      ppvVar2[2] = extraout_RAX;
      ppvVar2[1] = param_10;
      *(undefined4 *)(ppvVar2 + 3) = 0;
      iVar1 = paste_next_order + 1;
      *(int *)((long)ppvVar2 + 0x1c) = paste_next_order;
      paste_next_order = iVar1;
      if (*param_11 != '\0') {
        ppvVar3 = (void **)FUN_0014bf20(param_11);
        if (ppvVar3 != (void **)0x0) {
          paste_free(ppvVar3);
        }
      }
      uVar6 = 0;
      paste_name_tree_RB_INSERT(&paste_by_name,(long)ppvVar2);
      paste_time_tree_RB_INSERT(&paste_by_time,(long)ppvVar2);
    }
    return uVar6;
  }
  free(param_9);
  return 0;
}



undefined2 *
paste_make_sample(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 byte **param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  undefined2 *puVar2;
  byte *pbVar3;
  undefined4 extraout_XMM0_Da;
  
  pbVar3 = param_9[1];
  if ((byte *)0xc8 < pbVar3) {
    pbVar3 = (byte *)0xc8;
  }
  puVar2 = (undefined2 *)
           xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,
                         (long)pbVar3,8,param_12,param_13,param_14);
  uVar1 = utf8_strvis(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      puVar2,*param_9,(ulong)pbVar3,0x19,param_13,param_14);
  if ((param_9[1] < (byte *)0xc9) && (uVar1 < 0xc9)) {
    return puVar2;
  }
  strlcpy((char *)(puVar2 + 100),"...",4);
  return puVar2;
}



void FUN_0014d060(undefined8 param_1,undefined8 param_2,long param_3)

{
                    // WARNING: Could not recover jumptable at 0x0014d064. Too many branches
                    // WARNING: Treating indirect jump as call
  (**(code **)(param_3 + 0x10))();
  return;
}



void FUN_0014d070(long param_1)

{
  long lVar1;
  
  lVar1 = param_1 + 0x10048;
  event_del(lVar1);
  event_set(lVar1,*(undefined4 *)(param_1 + 0x10040),
            (-(uint)(*(int *)(param_1 + 0x10038) == 0) & 0xfffffffc) + 6,FUN_0014d170,param_1);
  event_add(lVar1,0);
  return;
}



undefined4
proc_send(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
         undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
         uint param_10,undefined4 param_11,void *param_12,undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  undefined1 in_stack_ffffffffffffffb8;
  
  if ((*(uint *)(param_9 + 0x100c8) & 1) == 0) {
    log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "sending message %d to peer %p (%zu bytes)",(ulong)param_10,param_9,param_13,param_14,
             in_stack_ffffffffffffffb8);
    uVar1 = imsg_compose(param_9 + 8,param_10,8,-1,param_11,param_12,(ushort)param_13);
    if ((int)uVar1 == 1) {
      FUN_0014d070(param_9);
      return 0;
    }
  }
  return 0xffffffff;
}



void FUN_0014d170(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,uint param_10,long param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  ssize_t sVar3;
  long *plVar4;
  int *piVar5;
  long in_FS_OFFSET;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Da;
  uint in_stack_ffffffffffffffa8;
  byte local_50;
  int local_48;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(byte *)(param_11 + 0x100c8) & 1) == 0) {
    if ((param_10 & 2) != 0) {
      sVar3 = imsg_read((long)(long **)(param_11 + 8));
      if (sVar3 == -1) {
        piVar5 = __errno_location();
        if (*piVar5 == 0xb) goto LAB_0014d2fe;
      }
      else if (sVar3 != 0) {
LAB_0014d2fe:
        while (plVar4 = imsg_get((long **)(param_11 + 8),(undefined4 *)&stack0xffffffffffffffa8),
              plVar4 != (long *)0xffffffffffffffff) {
          if (plVar4 == (long *)0x0) {
LAB_0014d24a:
            if ((param_10 & 4) == 0) goto LAB_0014d264;
            goto LAB_0014d250;
          }
          uVar6 = log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           3,"peer %p message %d",param_11,(ulong)in_stack_ffffffffffffffa8,param_13
                           ,param_14,(char)in_stack_ffffffffffffffa8);
          if ((in_stack_ffffffffffffffa8 != 0xc) && (local_50 != 8)) {
            uVar6 = log_emit(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                             "peer %p bad version %d",param_11,(ulong)local_50,param_13,param_14,
                             (char)in_stack_ffffffffffffffa8);
            proc_send(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,0xc,
                      0xffffffff,(void *)0x0,0,param_14);
            *(uint *)(param_11 + 0x100c8) = *(uint *)(param_11 + 0x100c8) | 1;
            if (local_48 != -1) {
              close(local_48);
            }
            imsg_free((long)&stack0xffffffffffffffa8);
            goto LAB_0014d24a;
          }
          (**(code **)(param_11 + 0x100d0))
                    (&stack0xffffffffffffffa8,*(undefined8 *)(param_11 + 0x100d8));
          imsg_free((long)&stack0xffffffffffffffa8);
        }
      }
      goto LAB_0014d1ef;
    }
    if ((param_10 & 4) != 0) goto LAB_0014d250;
  }
  else {
    if ((param_10 & 4) != 0) {
LAB_0014d250:
      uVar2 = msgbuf_write((long **)(param_11 + 0x10028));
      if ((0 < (int)uVar2) || (piVar5 = __errno_location(), *piVar5 == 0xb)) {
LAB_0014d264:
        if (((*(byte *)(param_11 + 0x100c8) & 1) == 0) || (*(int *)(param_11 + 0x10038) != 0))
        goto LAB_0014d1b1;
      }
LAB_0014d1ef:
      (**(code **)(param_11 + 0x100d0))(0,*(undefined8 *)(param_11 + 0x100d8));
      goto LAB_0014d1b9;
    }
    if (*(int *)(param_11 + 0x10038) == 0) goto LAB_0014d1ef;
  }
LAB_0014d1b1:
  FUN_0014d070(param_11);
LAB_0014d1b9:
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void proc_send_s(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,uint param_10,char *param_11,undefined8 param_12,undefined8 param_13,
                undefined8 param_14)

{
  size_t sVar1;
  undefined4 extraout_XMM0_Da;
  
  sVar1 = strlen(param_11);
  proc_send(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
            param_10,0xffffffff,param_11,sVar1 + 1,param_14);
  return;
}



undefined8 *
proc_start(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,char *param_9,
          undefined8 param_10,int param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  undefined uVar1;
  int iVar2;
  __pid_t _Var3;
  undefined8 uVar4;
  undefined8 extraout_RAX;
  undefined *puVar5;
  long lVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 uVar7;
  undefined8 *puVar8;
  undefined *puVar9;
  long in_FS_OFFSET;
  byte bVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined auVar12 [16];
  char in_stack_fffffffffffffe48;
  undefined local_136 [65];
  undefined local_f5 [197];
  long local_30;
  
  bVar10 = 0;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_11 == 0) {
    if (tmate_foreground != 0) goto LAB_0014d3d7;
    log_open(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
LAB_0014d4d0:
    iVar2 = uname((utsname *)&stack0xfffffffffffffe48);
    uVar7 = socket_path;
  }
  else {
    if (tmate_foreground == 0) {
      uVar7 = param_12;
      _Var3 = fork();
      if (_Var3 == -1) {
                    // WARNING: Subroutine does not return
        fatal(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              "fork failed",param_10,extraout_RDX_01,uVar7,param_13,param_14,
              in_stack_fffffffffffffe48);
      }
      if (_Var3 != 0) {
        puVar8 = (undefined8 *)0x0;
        goto LAB_0014d494;
      }
      uVar4 = 0;
      iVar2 = daemon(1,0);
      if (iVar2 != 0) {
                    // WARNING: Subroutine does not return
        fatal(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              "daemon failed",uVar4,extraout_RDX_02,uVar7,param_13,param_14,
              in_stack_fffffffffffffe48);
      }
      clear_signals(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_03),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,0);
      iVar2 = event_reinit();
      param_1 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_04);
      if (iVar2 != 0) {
                    // WARNING: Subroutine does not return
        fatalx(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               "event_reinit failed",uVar4,extraout_RDX_03,uVar7,param_13,param_14,
               in_stack_fffffffffffffe48);
      }
      if (tmate_foreground == 0) {
        log_open(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_04),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_9);
        goto LAB_0014d4d0;
      }
    }
    clear_signals(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0);
LAB_0014d3d7:
    log_open_fp(stdout);
    iVar2 = uname((utsname *)&stack0xfffffffffffffe48);
    uVar7 = socket_path;
  }
  if (iVar2 < 0) {
    puVar8 = (undefined8 *)&stack0xfffffffffffffe48;
    for (lVar6 = 0x30; lVar6 != 0; lVar6 = lVar6 + -1) {
      *puVar8 = 0;
      puVar8 = puVar8 + (ulong)bVar10 * -2 + 1;
    }
    *(undefined4 *)puVar8 = 0;
    *(undefined2 *)((long)puVar8 + 4) = 0;
  }
  socket_path = uVar7;
  _Var3 = getpid();
  log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "%s started (%ld): socket %s, protocol %d",param_9,(long)_Var3,uVar7,8,
           in_stack_fffffffffffffe48);
  uVar1 = event_get_method();
  uVar4 = event_get_version();
  puVar5 = local_136;
  puVar9 = local_f5;
  uVar11 = log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                    "on %s %s %s; libevent %s (%s)",&stack0xfffffffffffffe48,puVar5,puVar9,uVar4,
                    uVar1);
  uVar7 = 0x18;
  auVar12 = xcalloc(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x18,
                    extraout_RDX,puVar5,puVar9,uVar4);
  puVar8 = auVar12._0_8_;
  uVar7 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,param_9,uVar7,auVar12._8_8_,puVar5,puVar9,uVar4);
  puVar8[2] = param_12;
  *puVar8 = extraout_RAX;
  set_signals(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,FUN_0014d060,puVar8,
              extraout_RDX_00,puVar5,puVar9,uVar4);
LAB_0014d494:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return puVar8;
}



void proc_loop(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              undefined8 *param_9,undefined *param_10,undefined8 param_11,undefined8 param_12,
              undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 extraout_XMM0_Da;
  undefined1 in_stack_00000008;
  undefined1 in_stack_ffffffffffffffe8;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s loop enter",
           *param_9,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
  do {
    uVar2 = event_loop(1);
    if (*(int *)(param_9 + 1) != 0) break;
  } while ((param_10 == (undefined *)0x0) ||
          (iVar1 = (*(code *)param_10)(), uVar2 = extraout_XMM0_Da, iVar1 == 0));
  log_emit(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s loop exit",*param_9,
           param_12,param_13,param_14,in_stack_00000008);
  return;
}



void proc_exit(long param_1)

{
  *(undefined4 *)(param_1 + 8) = 1;
  return;
}



undefined8 *
proc_add_peer(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             undefined8 param_9,uint param_10,undefined8 param_11,undefined8 param_12,
             undefined8 param_13,undefined8 param_14)

{
  undefined8 *puVar1;
  undefined unaff_BL;
  undefined4 uVar2;
  
  puVar1 = (undefined8 *)
           xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x100e0,
                   param_11,param_12,param_13,param_14);
  *puVar1 = param_9;
  puVar1[0x201a] = param_11;
  puVar1[0x201b] = param_12;
  imsg_init(puVar1 + 1,param_10);
  uVar2 = event_set(puVar1 + 0x2009,param_10,2,FUN_0014d170,puVar1);
  log_emit(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"add peer %p: %d (%p)",
           puVar1,(ulong)param_10,param_12,param_14,unaff_BL);
  FUN_0014d070((long)puVar1);
  return puVar1;
}



void proc_remove_peer(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     void *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  undefined1 unaff_BPL;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"remove peer %p",
           param_9,param_12,param_13,param_14,unaff_BPL);
  event_del((long)param_9 + 0x10048);
  imsg_clear((long **)((long)param_9 + 8));
  close(*(int *)((long)param_9 + 0x10040));
  free(param_9);
  return;
}



void proc_kill_peer(long param_1)

{
  *(uint *)(param_1 + 0x100c8) = *(uint *)(param_1 + 0x100c8) | 1;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void recalculate_sizes(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  uint uVar1;
  bool bVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  long lVar6;
  char *pcVar7;
  uint *puVar8;
  undefined8 uVar9;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  ulong in_RCX;
  undefined8 extraout_RDX;
  long lVar10;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  uint uVar11;
  ulong in_R8;
  ulong in_R9;
  uint uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar17;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined in_stack_ffffffffffffffb8;
  
  uVar12 = _DAT_001a4468;
  uVar5 = _DAT_001a4464;
  lVar6 = sessions_RB_MINMAX(&sessions,-1);
  if (lVar6 != 0) {
    uVar9 = extraout_RDX;
    uVar16 = extraout_XMM0_Da;
    uVar17 = extraout_XMM0_Db;
    do {
      pcVar7 = options_get_number(CONCAT44(uVar17,uVar16),param_2,param_3,param_4,param_5,param_6,
                                  param_7,param_8,*(char ***)(lVar6 + 0x108),"status",uVar9,in_RCX,
                                  in_R8,in_R9);
      lVar10 = clients;
      iVar3 = (int)pcVar7;
      *(undefined4 *)(lVar6 + 0x114) = 0;
      if (lVar10 == 0) {
        if (0 < (int)uVar12 && 0 < (int)uVar5) {
          uVar15 = 0xffffffff;
          uVar14 = 0xffffffff;
          uVar11 = 0xffffffff;
          uVar4 = 0xffffffff;
          goto LAB_0014d9e8;
        }
LAB_0014db68:
        *(uint *)(lVar6 + 0x110) = *(uint *)(lVar6 + 0x110) | 1;
      }
      else {
        uVar15 = 0xffffffff;
        uVar4 = 0xffffffff;
        uVar14 = 0xffffffff;
        uVar11 = 0xffffffff;
        do {
          while( true ) {
            iVar3 = (int)pcVar7;
            uVar13 = *(uint *)(lVar10 + 0x420);
            if (((uVar13 & 0x40) != 0) || (*(long *)(lVar10 + 0x598) != lVar6)) break;
            if (*(uint *)(lVar10 + 0xf0) < uVar4) {
              uVar4 = *(uint *)(lVar10 + 0xf0);
            }
            uVar11 = *(uint *)(lVar10 + 0xf4);
            if ((uVar13 & 0x800000) == 0) {
              if (iVar3 != 0) goto LAB_0014d99d;
LAB_0014d806:
              uVar13 = uVar14;
              uVar1 = uVar15;
              if (uVar11 < uVar14) {
                uVar13 = uVar11;
                uVar1 = uVar11;
              }
            }
            else {
              pcVar7 = (char *)0x1;
LAB_0014d99d:
              if ((((uVar13 & 0x2000) != 0) || (uVar11 < 2)) ||
                 (uVar13 = uVar11 - 1, uVar1 = uVar13, uVar14 <= uVar13)) goto LAB_0014d806;
            }
            uVar15 = uVar1;
            iVar3 = (int)pcVar7;
            lVar10 = *(long *)(lVar10 + 0x5c0);
            *(int *)(lVar6 + 0x114) = *(int *)(lVar6 + 0x114) + 1;
            uVar14 = uVar13;
            uVar11 = uVar4;
            if (lVar10 == 0) goto LAB_0014d821;
          }
          lVar10 = *(long *)(lVar10 + 0x5c0);
        } while (lVar10 != 0);
LAB_0014d821:
        if (0 < (int)uVar12 && 0 < (int)uVar5) {
LAB_0014d9e8:
          in_RCX = (ulong)uVar5;
          bVar2 = uVar5 < uVar4;
          uVar4 = uVar11;
          if (bVar2) {
            uVar4 = uVar5;
          }
          if (uVar12 < uVar14) {
            uVar15 = uVar12;
          }
        }
        else if ((uVar4 == 0xffffffff) || (uVar15 = uVar14, uVar14 == 0xffffffff))
        goto LAB_0014db68;
        *(uint *)(lVar6 + 0x110) = *(uint *)(lVar6 + 0x110) & 0xfffffffe;
        if ((iVar3 != 0) && (uVar15 == 0)) {
          uVar15 = 1;
        }
        in_R8 = (ulong)*(uint *)(lVar6 + 0xd8);
        in_R9 = (ulong)*(uint *)(lVar6 + 0xdc);
        if ((*(uint *)(lVar6 + 0xd8) != uVar4) || (uVar15 != *(uint *)(lVar6 + 0xdc))) {
          in_RCX = (ulong)uVar15;
          log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "session size %u,%u (was %u,%u)",(ulong)uVar4,in_RCX,in_R8,in_R9,
                   in_stack_ffffffffffffffb8);
          *(uint *)(lVar6 + 0xd8) = uVar4;
          *(uint *)(lVar6 + 0xdc) = uVar15;
        }
      }
      lVar6 = sessions_RB_NEXT(lVar6);
      uVar9 = extraout_RDX_00;
      uVar16 = extraout_XMM0_Da_01;
      uVar17 = extraout_XMM0_Db_00;
    } while (lVar6 != 0);
  }
  puVar8 = (uint *)windows_RB_MINMAX(&windows,-1);
  uVar9 = extraout_RDX_01;
  uVar16 = extraout_XMM0_Da_02;
  uVar17 = extraout_XMM0_Db_01;
  do {
    while( true ) {
      if (puVar8 == (uint *)0x0) {
        return;
      }
      if (*(long *)(puVar8 + 0x4e) != 0) break;
LAB_0014d8d0:
      puVar8 = (uint *)windows_RB_NEXT((long)puVar8);
      uVar9 = extraout_RDX_02;
      uVar16 = extraout_XMM0_Da_03;
      uVar17 = extraout_XMM0_Db_02;
    }
    pcVar7 = options_get_number(CONCAT44(uVar17,uVar16),param_2,param_3,param_4,param_5,param_6,
                                param_7,param_8,*(char ***)(puVar8 + 0x62),"aggressive-resize",uVar9
                                ,in_RCX,in_R8,in_R9);
    lVar6 = sessions_RB_MINMAX(&sessions,-1);
    if (lVar6 == 0) goto LAB_0014d8d0;
    uVar12 = 0xffffffff;
    uVar5 = 0xffffffff;
    do {
      if ((*(byte *)(lVar6 + 0x110) & 1) == 0) {
        if ((int)pcVar7 == 0) {
          uVar9 = session_has(lVar6,(long)puVar8);
          uVar4 = (uint)uVar9;
        }
        else {
          uVar4 = (uint)(*(uint **)(*(long *)(lVar6 + 0xe0) + 8) == puVar8);
        }
        if (uVar4 != 0) {
          if (*(uint *)(lVar6 + 0xd8) < uVar5) {
            uVar5 = *(uint *)(lVar6 + 0xd8);
          }
          if (*(uint *)(lVar6 + 0xdc) < uVar12) {
            uVar12 = *(uint *)(lVar6 + 0xdc);
          }
        }
      }
      lVar6 = sessions_RB_NEXT(lVar6);
    } while (lVar6 != 0);
    if ((uVar5 == 0xffffffff) || (uVar12 == 0xffffffff)) goto LAB_0014d8d0;
    pcVar7 = options_get_number(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04),param_2,param_3,
                                param_4,param_5,param_6,param_7,param_8,*(char ***)(puVar8 + 0x62),
                                "force-width",extraout_RDX_03,in_RCX,in_R8,in_R9);
    uVar4 = (uint)pcVar7;
    if ((uVar4 < 2) || (uVar14 = 0x2000, uVar5 <= uVar4)) {
      uVar14 = 0;
      uVar4 = uVar5;
    }
    pcVar7 = options_get_number(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_05),param_2,param_3,
                                param_4,param_5,param_6,param_7,param_8,*(char ***)(puVar8 + 0x62),
                                "force-height",extraout_RDX_04,in_RCX,in_R8,in_R9);
    uVar5 = (uint)pcVar7;
    if ((1 < uVar5) && (uVar5 < uVar12)) {
      uVar14 = uVar14 | 0x4000;
      uVar12 = uVar5;
    }
    in_R8 = (ulong)puVar8[0x5e];
    in_R9 = (ulong)puVar8[0x5f];
    if ((puVar8[0x5e] == uVar4) && (uVar12 == puVar8[0x5f])) goto LAB_0014d8d0;
    in_RCX = (ulong)uVar12;
    pcVar7 = "window size %u,%u (was %u,%u)";
    uVar9 = log_emit(extraout_XMM0_Da_06,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                     "window size %u,%u (was %u,%u)",(ulong)uVar4,in_RCX,in_R8,in_R9,
                     in_stack_ffffffffffffffb8);
    uVar5 = puVar8[0x60];
    puVar8[0x60] = uVar14 | uVar5 & 0xffff9fff;
    if ((uVar5 & 0x1000) == 0) {
      layout_resize(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)puVar8,uVar4
                    ,uVar12,in_RCX);
      window_resize((long)puVar8,uVar4,uVar12);
    }
    else {
      window_unzoom(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar8,pcVar7,
                    extraout_RDX_05,in_RCX,in_R8,in_R9);
      layout_resize(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_08),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,(long)puVar8,uVar4,uVar12,in_RCX);
      window_resize((long)puVar8,uVar4,uVar12);
      bVar2 = window_pane_visible(*(long *)(puVar8 + 0x4e));
      if ((int)CONCAT71(extraout_var_00,bVar2) != 0) {
        window_zoom(extraout_XMM0_Da_09,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    *(long *)(puVar8 + 0x4e));
      }
    }
    lVar6 = *(long *)(puVar8 + 0x4e);
    lVar10 = lVar6;
    do {
      while( true ) {
        bVar2 = window_pane_visible(lVar10);
        if ((int)CONCAT71(extraout_var,bVar2) != 0) goto LAB_0014db30;
        lVar10 = **(long **)(*(long *)(*(long *)(puVar8 + 0x4e) + 0x200) + 8);
        *(long *)(puVar8 + 0x4e) = lVar10;
        if (lVar10 != 0) break;
        lVar10 = **(long **)(*(long *)(puVar8 + 0x54) + 8);
        *(long *)(puVar8 + 0x4e) = lVar10;
        if (lVar6 == lVar10) goto LAB_0014db30;
      }
    } while (lVar6 != lVar10);
LAB_0014db30:
    uVar16 = server_redraw_window((long)puVar8);
    notify_window_layout_changed
              (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar8);
    puVar8 = (uint *)windows_RB_NEXT((long)puVar8);
    uVar9 = extraout_RDX_06;
    uVar16 = extraout_XMM0_Da_07;
    uVar17 = extraout_XMM0_Db_05;
  } while( true );
}



int screen_redraw_cell_border1(long param_1,uint param_2,uint param_3)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  
  uVar2 = *(uint *)(param_1 + 0x28);
  uVar1 = *(uint *)(param_1 + 0x2c);
  if ((((uVar2 <= param_2) && (param_2 < *(int *)(param_1 + 0x20) + uVar2)) && (uVar1 <= param_3))
     && (param_3 < *(int *)(param_1 + 0x24) + uVar1)) {
    return 0;
  }
  if (((uVar1 == 0) || (uVar1 - 1 <= param_3)) && (param_3 <= *(int *)(param_1 + 0x24) + uVar1)) {
    if (uVar2 == 0) {
      uVar2 = *(uint *)(param_1 + 0x20);
      if (param_2 == uVar2) {
        return 1;
      }
      goto LAB_0014dc3d;
    }
    if (uVar2 - 1 == param_2) {
      return 1;
    }
    if (param_2 == *(int *)(param_1 + 0x20) + uVar2) {
      return 1;
    }
  }
  else if (uVar2 == 0) {
    uVar2 = *(uint *)(param_1 + 0x20);
    goto LAB_0014dc3d;
  }
  if (param_2 < uVar2 - 1) {
    return -1;
  }
  uVar2 = uVar2 + *(int *)(param_1 + 0x20);
LAB_0014dc3d:
  iVar3 = -1;
  if ((param_2 <= uVar2) && ((uVar1 == 0 || (iVar3 = 1, uVar1 - 1 != param_3)))) {
    iVar3 = (uint)(uVar1 + *(int *)(param_1 + 0x24) == param_3) * 2 + -1;
  }
  return iVar3;
}



int screen_redraw_cell_border(long param_1,uint param_2,uint param_3)

{
  long lVar1;
  bool bVar2;
  int iVar3;
  undefined7 extraout_var;
  
  lVar1 = *(long *)(*(long *)(*(long *)(*(long *)(param_1 + 0x598) + 0xe0) + 8) + 0x148);
  while( true ) {
    if (lVar1 == 0) {
      return 0;
    }
    bVar2 = window_pane_visible(lVar1);
    if (((int)CONCAT71(extraout_var,bVar2) != 0) &&
       (iVar3 = screen_redraw_cell_border1(lVar1,param_2,param_3), iVar3 != -1)) break;
    lVar1 = *(long *)(lVar1 + 0x1f8);
  }
  return iVar3;
}



undefined4 screen_redraw_check_cell(long param_1,uint param_2,uint param_3,long *param_4)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  int iVar4;
  undefined7 extraout_var;
  uint uVar5;
  
  lVar1 = *(long *)(*(long *)(*(long *)(param_1 + 0x598) + 0xe0) + 8);
  if ((param_2 <= *(uint *)(lVar1 + 0x178)) && (param_3 <= *(uint *)(lVar1 + 0x17c))) {
    for (lVar2 = *(long *)(lVar1 + 0x148); lVar2 != 0; lVar2 = *(long *)(lVar2 + 0x1f8)) {
      bVar3 = window_pane_visible(lVar2);
      if ((int)CONCAT71(extraout_var,bVar3) != 0) {
        iVar4 = *(int *)(lVar2 + 0x28);
        *param_4 = lVar2;
        if ((((iVar4 == 0) || (iVar4 - 1U <= param_2)) &&
            (param_2 <= (uint)(iVar4 + *(int *)(lVar2 + 0x20)))) &&
           (((iVar4 = *(int *)(lVar2 + 0x2c), iVar4 == 0 || (iVar4 - 1U <= param_3)) &&
            (param_3 <= (uint)(iVar4 + *(int *)(lVar2 + 0x24)))))) {
          iVar4 = screen_redraw_cell_border(param_1,param_2,param_3);
          if (iVar4 == 0) {
            return 0;
          }
          uVar5 = 8;
          if (param_2 == 0) {
LAB_0014dde4:
            iVar4 = screen_redraw_cell_border(param_1,param_2 + 1,param_3);
            if (iVar4 != 0) {
              uVar5 = uVar5 | 4;
            }
            if (param_3 == 0) goto LAB_0014de13;
LAB_0014dea0:
            iVar4 = screen_redraw_cell_border(param_1,param_2,param_3 - 1);
            if (iVar4 != 0) goto LAB_0014de13;
          }
          else {
            uVar5 = screen_redraw_cell_border(param_1,param_2 - 1,param_3);
            if (uVar5 != 0) {
              uVar5 = 8;
            }
            if (param_2 <= *(uint *)(lVar1 + 0x178)) goto LAB_0014dde4;
            if (param_3 != 0) goto LAB_0014dea0;
LAB_0014de13:
            uVar5 = uVar5 | 2;
          }
          if (param_3 <= *(uint *)(lVar1 + 0x17c)) {
            iVar4 = screen_redraw_cell_border(param_1,param_2,param_3 + 1);
            if (iVar4 != 0) {
              uVar5 = uVar5 | 1;
            }
          }
          switch(uVar5) {
          case 3:
            return 1;
          case 5:
            return 3;
          case 6:
            return 5;
          case 7:
            return 9;
          case 9:
            return 4;
          case 10:
            return 6;
          case 0xb:
            return 10;
          case 0xc:
            return 2;
          case 0xd:
            return 7;
          case 0xe:
            return 8;
          case 0xf:
            return 0xb;
          }
        }
      }
    }
    *param_4 = 0;
  }
  return 0xc;
}



uint screen_redraw_check_is
               (uint param_1,uint param_2,uint param_3,long param_4,long param_5,long param_6)

{
  int iVar1;
  uint uVar2;
  
  iVar1 = screen_redraw_cell_border1(param_5,param_1,param_2);
  if (iVar1 == 1) {
    iVar1 = window_count_panes(param_4);
    if (iVar1 != 2) {
      return 1;
    }
    if (param_6 == 0) {
      return 1;
    }
    if (param_3 == 0xc) {
      return 1;
    }
    if (param_3 == 0) {
      return 1;
    }
    if ((*(int *)(param_6 + 0x28) == 0) && (*(uint *)(param_6 + 0x20) == *(uint *)(param_4 + 0x178))
       ) {
      if (*(int *)(param_6 + 0x2c) == 0) {
        uVar2 = *(uint *)(param_6 + 0x20) >> 1;
        if (param_5 != param_6) {
          return (uint)(uVar2 < param_1);
        }
        return (uint)(param_1 <= uVar2);
      }
    }
    else {
      if (*(int *)(param_6 + 0x2c) != 0) {
        return param_3;
      }
      if (*(uint *)(param_6 + 0x24) != *(uint *)(param_4 + 0x17c)) {
        return param_3;
      }
      if (*(int *)(param_6 + 0x28) == 0) {
        uVar2 = *(uint *)(param_6 + 0x24) >> 1;
        if (param_5 != param_6) {
          return (uint)(uVar2 < param_2);
        }
        return (uint)(param_2 <= uVar2);
      }
    }
  }
  return 0;
}



void screen_redraw_pane(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,long param_10,undefined8 param_11,ulong param_12,ulong param_13,
                       undefined8 param_14)

{
  int iVar1;
  bool bVar2;
  int iVar3;
  undefined7 extraout_var;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar4;
  uint uVar5;
  uint uVar6;
  long lVar7;
  uint uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Db;
  
  lVar7 = param_10;
  bVar2 = window_pane_visible(param_10);
  if ((int)CONCAT71(extraout_var,bVar2) != 0) {
    iVar1 = *(int *)(param_10 + 0x2c);
    iVar3 = status_at_line(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_9,lVar7,extraout_RDX,param_12,
                           param_13,param_14);
    uVar8 = iVar1 + (uint)(iVar3 == 0);
    uVar5 = 0;
    uVar4 = extraout_RDX_00;
    uVar9 = extraout_XMM0_Da_00;
    if (*(int *)(param_10 + 0x24) != 0) {
      do {
        param_12 = (ulong)*(uint *)(param_10 + 0x28);
        param_13 = (ulong)uVar8;
        uVar6 = uVar5 + 1;
        lVar7 = param_10;
        uVar9 = tty_draw_pane(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              param_9 + 0xe0,param_10,uVar5,*(uint *)(param_10 + 0x28),uVar8);
        uVar4 = extraout_RDX_01;
        uVar5 = uVar6;
      } while (uVar6 < *(uint *)(param_10 + 0x24));
    }
    tty_reset(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9 + 0xe0,lVar7,
              uVar4,param_12,param_13,param_14);
    return;
  }
  return;
}



void screen_redraw_draw_borders
               (undefined8 param_1,long param_2,int param_3,uint param_4,undefined8 param_5,
               undefined8 param_6,char *param_7)

{
  long lVar1;
  long lVar2;
  char **ppcVar3;
  char **ppcVar4;
  bool bVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  undefined7 extraout_var;
  char **ppcVar11;
  uint *puVar12;
  uint *puVar13;
  char **ppcVar14;
  char *pcVar15;
  long in_FS_OFFSET;
  bool bVar16;
  undefined4 uVar17;
  undefined4 uVar18;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined auVar19 [16];
  undefined8 extraout_XMM0_Qb_00;
  undefined extraout_XMM0 [16];
  undefined in_XMM1 [16];
  undefined4 uVar20;
  undefined in_XMM2 [16];
  undefined4 uVar21;
  undefined in_XMM3 [16];
  undefined in_XMM4 [16];
  undefined auVar22 [16];
  undefined4 in_XMM5_Da;
  undefined4 in_XMM6_Da;
  undefined4 in_XMM7_Da;
  undefined1 in_stack_fffffffffffffdc8;
  uint local_21c;
  uint local_214;
  ulong *local_210;
  ulong *local_208;
  uint local_200;
  char *local_1f0;
  undefined local_1e8 [16];
  undefined4 local_1d8;
  undefined local_1c8;
  undefined uStack_1c7;
  undefined auStack_1c6 [14];
  undefined4 local_1b8;
  undefined local_1a8 [16];
  undefined4 local_198;
  undefined local_188;
  undefined uStack_187;
  undefined auStack_186 [14];
  undefined4 local_178;
  undefined local_168 [16];
  undefined4 local_158;
  uint local_148 [66];
  long local_40;
  undefined8 extraout_XMM0_Qb;
  
  uVar17 = in_XMM1._0_4_;
  lVar1 = param_2 + 0xe0;
  lVar2 = *(long *)(param_2 + 0x598);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_1f0 = (char *)0x0;
  ppcVar3 = *(char ***)(*(long *)(lVar2 + 0xe0) + 8);
  ppcVar4 = (char **)ppcVar3[0x31];
  pcVar15 = (char *)(ulong)*(uint *)((long)ppcVar3 + 0x17c);
  ppcVar11 = (char **)(ulong)*(uint *)(ppcVar3 + 0x2f);
  if ((*(uint *)((long)ppcVar3 + 0x17c) < (*(int *)(param_2 + 0xf4) - param_3) + param_4) ||
     (*(uint *)(ppcVar3 + 0x2f) < *(uint *)(param_2 + 0xf0))) {
    param_7 = "force-width, force-height";
    uVar6 = *(uint *)(ppcVar3 + 0x30) & 0x6000;
    if ((uVar6 != 0x6000) &&
       ((param_7 = "force-width", uVar6 != 0x2000 && (param_7 = "force-height", uVar6 != 0x4000))))
    {
      param_7 = "a smaller client";
    }
    param_1 = xsnprintf((int)param_1,uVar17,in_XMM2._0_4_,in_XMM3._0_4_,in_XMM4._0_4_,in_XMM5_Da,
                        in_XMM6_Da,in_XMM7_Da,local_148,0x100,"(size %ux%u from %s)",ppcVar11,
                        pcVar15,param_7,in_stack_fffffffffffffdc8);
    uVar17 = in_XMM1._0_4_;
    uVar21 = in_XMM3._0_4_;
    uVar20 = in_XMM2._0_4_;
    puVar13 = local_148;
    do {
      puVar12 = puVar13;
      uVar7 = *puVar12 + 0xfefefeff & ~*puVar12;
      uVar6 = uVar7 & 0x80808080;
      puVar13 = puVar12 + 1;
    } while (uVar6 == 0);
    bVar16 = (uVar7 & 0x8080) == 0;
    if (bVar16) {
      uVar6 = uVar6 >> 0x10;
    }
    if (bVar16) {
      puVar13 = (uint *)((long)puVar12 + 6);
    }
    local_200 = ((param_4 - 1) + *(int *)(param_2 + 0xf4)) - param_3;
    ppcVar14 = (char **)((long)puVar13 +
                        ((-3 - (ulong)CARRY1((byte)uVar6,(byte)uVar6)) - (long)local_148));
    if (*(uint *)((long)ppcVar3 + 0x17c) < local_200) {
      local_214 = *(uint *)(param_2 + 0xf0);
      ppcVar11 = (char **)(ulong)local_214;
      if (ppcVar11 < ppcVar14) goto LAB_0014e450;
    }
    else {
      local_214 = *(uint *)(param_2 + 0xf0);
LAB_0014e450:
      ppcVar11 = (char **)(ulong)(local_214 - *(int *)(ppcVar3 + 0x2f));
      if (ppcVar11 <= ppcVar14) goto LAB_0014e466;
    }
    local_214 = local_214 - (int)ppcVar14;
    auVar19._0_8_ =
         style_apply(param_1,uVar17,uVar20,uVar21,in_XMM4._0_4_,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,
                     (undefined8 *)&local_188,ppcVar4,"pane-border-style",ppcVar11,pcVar15,param_7);
    auVar19._0_8_ =
         style_apply(auVar19._0_8_,in_XMM1._0_4_,uVar20,uVar21,in_XMM4._0_4_,in_XMM5_Da,in_XMM6_Da,
                     in_XMM7_Da,(undefined8 *)&local_1c8,ppcVar4,"pane-active-border-style",ppcVar11
                     ,pcVar15,param_7);
    uVar21 = in_XMM1._0_4_;
    auVar19._8_8_ = extraout_XMM0_Qb;
    uStack_187 = 0x80;
    in_XMM2[1] = 0x80;
    in_XMM2[0] = local_188;
    in_XMM2._2_14_ = auStack_186;
    uVar20 = in_XMM2._0_4_;
    uStack_1c7 = 0x80;
    local_198 = local_178;
    in_XMM3[1] = 0x80;
    in_XMM3[0] = local_1c8;
    in_XMM3._2_14_ = auStack_1c6;
    uVar17 = in_XMM3._0_4_;
    local_1d8 = local_1b8;
    local_1a8[1] = 0x90;
    local_1a8[0] = local_188;
    local_1a8._2_14_ = auStack_186;
    local_1e8[1] = 0x90;
    local_1e8[0] = local_1c8;
    local_1e8._2_14_ = auStack_1c6;
    bVar16 = true;
    if (param_3 != *(int *)(param_2 + 0xf4)) goto LAB_0014e349;
  }
  else {
LAB_0014e466:
    auVar19._0_8_ =
         style_apply(param_1,uVar17,in_XMM2._0_4_,in_XMM3._0_4_,in_XMM4._0_4_,in_XMM5_Da,in_XMM6_Da,
                     in_XMM7_Da,(undefined8 *)&local_188,ppcVar4,"pane-border-style",ppcVar11,
                     pcVar15,param_7);
    style_apply(auVar19._0_8_,uVar17,in_XMM2._0_4_,in_XMM3._0_4_,in_XMM4._0_4_,in_XMM5_Da,in_XMM6_Da
                ,in_XMM7_Da,(undefined8 *)&local_1c8,ppcVar4,"pane-active-border-style",ppcVar11,
                pcVar15,param_7);
    local_198 = local_178;
    uStack_187 = 0x80;
    auVar19[1] = 0x80;
    auVar19[0] = local_188;
    auVar19._2_14_ = auStack_186;
    uStack_1c7 = 0x80;
    in_XMM1[1] = 0x80;
    in_XMM1[0] = local_1c8;
    in_XMM1._2_14_ = auStack_1c6;
    local_1d8 = local_1b8;
    local_1a8[1] = 0x90;
    local_1a8[0] = local_188;
    local_1a8._2_14_ = auStack_186;
    local_1e8[1] = 0x90;
    local_1e8[0] = local_1c8;
    local_1e8._2_14_ = auStack_1c6;
    bVar16 = false;
    local_200 = 0;
    local_214 = 0;
    if (param_3 == *(int *)(param_2 + 0xf4)) goto LAB_0014e520;
LAB_0014e349:
    local_208 = (ulong *)&local_1c8;
    local_210 = (ulong *)&local_188;
    uStack_187 = 0x80;
    uStack_1c7 = 0x80;
    uVar6 = 0;
    local_21c = param_4;
    do {
      uVar7 = 0;
      if (*(int *)(param_2 + 0xf0) != 0) {
        do {
          ppcVar11 = &local_1f0;
          uVar8 = screen_redraw_check_cell(param_2,uVar7,uVar6,(long *)&local_1f0);
          auVar19 = extraout_XMM0;
          if ((uVar8 != 0) &&
             ((((uVar8 != 0xc || (!bVar16)) || (uVar7 <= local_214)) || (uVar6 != local_200)))) {
            pcVar15 = ppcVar3[0x27];
            param_7 = local_1f0;
            uVar9 = screen_redraw_check_is
                              (uVar7,uVar6,uVar8,(long)ppcVar3,(long)pcVar15,(long)local_1f0);
            bVar5 = server_is_marked(lVar2,*(long *)(lVar2 + 0xe0),marked_pane._48_8_);
            auVar19._0_8_ = extraout_XMM0_Qa;
            if (((int)CONCAT71(extraout_var,bVar5) == 0) ||
               (ppcVar11 = ppcVar3, pcVar15 = (char *)marked_pane._48_8_, param_7 = local_1f0,
               uVar10 = screen_redraw_check_is
                                  (uVar7,uVar6,uVar8,(long)ppcVar3,marked_pane._48_8_,
                                   (long)local_1f0), auVar19._0_8_ = extraout_XMM0_Qa_00,
               uVar10 == 0)) {
              ppcVar11 = (char **)(ulong)uVar9;
              if (uVar9 == 0) {
                uVar17 = tty_attributes(auVar19._0_8_,in_XMM1._0_4_,in_XMM2._0_4_,in_XMM3._0_4_,
                                        in_XMM4._0_4_,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,lVar1,
                                        local_210,0,(ulong)ppcVar11,pcVar15,param_7);
              }
              else {
                uVar17 = tty_attributes(auVar19._0_8_,in_XMM1._0_4_,in_XMM2._0_4_,in_XMM3._0_4_,
                                        in_XMM4._0_4_,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,lVar1,
                                        local_208,0,(ulong)ppcVar11,pcVar15,param_7);
              }
            }
            else if (uVar9 == 0) {
              uVar17 = tty_attributes(extraout_XMM0_Qa_00,in_XMM1._0_4_,in_XMM2._0_4_,in_XMM3._0_4_,
                                      in_XMM4._0_4_,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,lVar1,
                                      (ulong *)local_1a8,0,(ulong)ppcVar11,pcVar15,param_7);
            }
            else {
              uVar17 = tty_attributes(extraout_XMM0_Qa_00,in_XMM1._0_4_,in_XMM2._0_4_,in_XMM3._0_4_,
                                      in_XMM4._0_4_,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,lVar1,
                                      (ulong *)local_1e8,0,(ulong)ppcVar11,pcVar15,param_7);
            }
            tty_cursor(uVar17,in_XMM1._0_4_,in_XMM2._0_4_,in_XMM3._0_4_,in_XMM4._0_4_,in_XMM5_Da,
                       in_XMM6_Da,in_XMM7_Da,lVar1,uVar7,local_21c,ppcVar11,pcVar15,param_7);
            auVar19._0_8_ = tty_putc(lVar1," xqlkmjwvtun~"[uVar8]);
            auVar19._8_8_ = extraout_XMM0_Qb_00;
          }
          uVar7 = uVar7 + 1;
        } while (uVar7 < *(uint *)(param_2 + 0xf0));
      }
      uVar17 = in_XMM3._0_4_;
      uVar20 = in_XMM2._0_4_;
      uVar21 = in_XMM1._0_4_;
      uVar6 = uVar6 + 1;
      local_21c = local_21c + 1;
    } while (uVar6 < (uint)(*(int *)(param_2 + 0xf4) - param_3));
    if (!bVar16) goto LAB_0014e520;
  }
  local_158 = 0x1010000;
  local_168 = grid_default_cell._0_16_;
  auVar22 = grid_default_cell._0_16_;
  uVar18 = tty_attributes(auVar19._0_8_,uVar21,uVar20,uVar17,SUB164(grid_default_cell._0_16_,0),
                          in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,lVar1,(ulong *)local_168,0,
                          (ulong)ppcVar11,pcVar15,param_7);
  tty_cursor(uVar18,uVar21,uVar20,uVar17,auVar22._0_4_,in_XMM5_Da,in_XMM6_Da,in_XMM7_Da,lVar1,
             local_214,local_200,ppcVar11,pcVar15,param_7);
  tty_puts(lVar1,(char *)local_148);
LAB_0014e520:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void screen_redraw_draw_status
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10)

{
  ulong uVar1;
  
  uVar1 = 0;
  if (param_10 == 0) {
    uVar1 = (ulong)(*(int *)(param_9 + 0xf4) - 1);
  }
  tty_draw_line(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9 + 0xe0,0,
                param_9 + 0x3a8,0,0,uVar1);
  return;
}


/*
Unable to decompile 'screen_redraw_draw_number'
Cause: 
Low-level Error: Overlapping input varnodes
*/


void screen_redraw_draw_panes
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10)

{
  bool bVar1;
  undefined7 extraout_var;
  long lVar2;
  uint uVar3;
  uint uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar5;
  
  lVar2 = *(long *)(*(long *)(*(long *)(*(long *)(param_9 + 0x598) + 0xe0) + 8) + 0x148);
  if (lVar2 != 0) {
    do {
      while (bVar1 = window_pane_visible(lVar2), (int)CONCAT71(extraout_var,bVar1) != 0) {
        if (*(int *)(lVar2 + 0x24) != 0) {
          uVar5 = extraout_XMM0_Da;
          uVar3 = 0;
          do {
            uVar4 = uVar3 + 1;
            uVar5 = tty_draw_pane(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  param_9 + 0xe0,lVar2,uVar3,*(uint *)(lVar2 + 0x28),
                                  *(int *)(lVar2 + 0x2c) + param_10);
            uVar3 = uVar4;
          } while (uVar4 < *(uint *)(lVar2 + 0x24));
        }
        if ((*(byte *)(param_9 + 0x421) & 1) == 0) break;
        screen_redraw_draw_number(param_9,lVar2,param_10);
        lVar2 = *(long *)(lVar2 + 0x1f8);
        if (lVar2 == 0) {
          return;
        }
      }
      lVar2 = *(long *)(lVar2 + 0x1f8);
    } while (lVar2 != 0);
  }
  return;
}



void screen_redraw_screen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13
               ,char *param_14)

{
  char **ppcVar1;
  char *pcVar2;
  int iVar3;
  undefined8 extraout_RDX;
  undefined8 uVar4;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  uint uVar5;
  ulong uVar6;
  int iVar7;
  bool bVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar11;
  undefined8 uVar10;
  undefined4 extraout_XMM0_Db_00;
  
  iVar3 = (int)param_12;
  if ((*(byte *)(param_9 + 0x420) & 0x40) != 0) {
    return;
  }
  iVar7 = (int)param_11;
  ppcVar1 = *(char ***)(*(long *)(param_9 + 0x598) + 0x108);
  pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              ppcVar1,"status-position",param_11,param_12,param_13,param_14);
  bVar8 = (int)pcVar2 == 0;
  if ((*(long *)(param_9 + 0x4b0) == 0) && (*(long *)(param_9 + 0x550) == 0)) {
    pcVar2 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,ppcVar1,"status",extraout_RDX,
                                param_12,param_13,param_14);
    uVar6 = (ulong)pcVar2 & 0xffffffff;
    uVar4 = extraout_RDX_03;
    uVar9 = extraout_XMM0_Da_00;
    uVar11 = extraout_XMM0_Db_00;
    if (((int)pcVar2 == 0) || (!bVar8)) {
      if ((int)pcVar2 == 0) {
        iVar7 = 0;
      }
      uVar5 = 0;
    }
    else {
      uVar5 = 1;
    }
  }
  else {
    uVar5 = (uint)bVar8;
    uVar6 = 1;
    uVar4 = extraout_RDX;
    uVar9 = extraout_XMM0_Da;
    uVar11 = extraout_XMM0_Db;
  }
  uVar10 = CONCAT44(uVar11,uVar9);
  if (iVar3 != 0) {
    uVar10 = screen_redraw_draw_borders
                       (CONCAT44(uVar11,uVar9),param_9,(int)uVar6,uVar5,param_12,param_13,param_14);
    uVar4 = extraout_RDX_00;
  }
  uVar9 = (undefined4)uVar10;
  if (param_10 != 0) {
    uVar6 = (ulong)uVar5;
    uVar9 = screen_redraw_draw_panes
                      (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar5)
    ;
    uVar4 = extraout_RDX_01;
  }
  if (iVar7 != 0) {
    uVar6 = (ulong)uVar5;
    uVar9 = screen_redraw_draw_status
                      (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar5);
    uVar4 = extraout_RDX_02;
  }
  tty_reset(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9 + 0xe0,uVar6,uVar4
            ,param_12,param_13,param_14);
  return;
}



void screen_write_start(long *param_1,long param_2,long param_3)

{
  *param_1 = param_2;
  if ((param_2 != 0) && (param_3 == 0)) {
    param_3 = *(long *)(param_2 + 0x140);
  }
  param_1[1] = param_3;
  return;
}



void screen_write_stop(void)

{
  return;
}



long screen_write_strlen(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,undefined8 param_9,undefined8 param_10,undefined8 param_11,
                        undefined8 param_12,size_t param_13,undefined8 param_14,undefined param_15)

{
  byte bVar1;
  char in_AL;
  undefined8 uVar2;
  ulong uVar3;
  ulong extraout_RDX;
  ulong extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong uVar4;
  ulong extraout_RDX_02;
  byte *__s;
  uint uVar5;
  long lVar6;
  byte *pbVar7;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  byte *local_110;
  undefined8 local_104;
  byte local_fa;
  byte local_f9;
  undefined4 local_f8;
  undefined4 local_f4;
  undefined *local_f0;
  undefined *local_e8;
  long local_e0;
  undefined local_d8 [8];
  undefined8 local_d0;
  undefined8 local_c8;
  undefined8 local_c0;
  size_t local_b8;
  undefined8 local_b0;
  undefined local_a8 [16];
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  
  if (in_AL != '\0') {
    local_a8._8_8_ = in_XMM0_Qb;
    local_a8._0_8_ = param_1;
    local_98._4_12_ = in_register_00001224;
    local_98._0_4_ = param_2;
    local_88._4_12_ = in_register_00001244;
    local_88._0_4_ = param_3;
    local_78._4_12_ = in_register_00001264;
    local_78._0_4_ = param_4;
    local_68._4_12_ = in_register_00001284;
    local_68._0_4_ = param_5;
    local_58._4_12_ = in_register_000012a4;
    local_58._0_4_ = param_6;
    local_48._4_12_ = in_register_000012c4;
    local_48._0_4_ = param_7;
    local_38._4_12_ = in_register_000012e4;
    local_38._0_4_ = param_8;
  }
  local_e0 = *(long *)(in_FS_OFFSET + 0x28);
  local_f0 = &param_15;
  lVar6 = 0;
  local_e8 = local_d8;
  local_f8 = 8;
  local_f4 = 0x30;
  local_d0 = param_10;
  local_c8 = param_11;
  local_c0 = param_12;
  local_b8 = param_13;
  local_b0 = param_14;
  uVar8 = xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long *)&local_110,param_9,&local_f8,param_12,param_13,param_14);
  uVar5 = (uint)*local_110;
  if (*local_110 != 0) {
    uVar4 = extraout_RDX;
    pbVar7 = local_110;
    do {
      while ((__s = pbVar7 + 1, -1 < (char)uVar5 ||
             (uVar2 = utf8_open(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                &local_104,uVar5,uVar4,param_12,param_13,param_14),
             uVar4 = extraout_RDX_00, uVar8 = extraout_XMM0_Da, (int)uVar2 != 0))) {
        lVar6 = lVar6 + (ulong)((byte)(*pbVar7 - 0x20) < 0x5f);
LAB_0014ed49:
        uVar5 = (uint)*__s;
        pbVar7 = __s;
        if (*__s == 0) goto LAB_0014edb5;
      }
      param_13 = strlen((char *)__s);
      uVar4 = extraout_RDX_01;
      uVar8 = extraout_XMM0_Da_00;
      if (param_13 < (ulong)local_fa - 1) break;
      do {
        bVar1 = *__s;
        __s = __s + 1;
        uVar3 = utf8_append(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (char *)&local_104,(ulong)bVar1,uVar4,param_12,param_13,param_14);
        uVar4 = extraout_RDX_02;
        uVar8 = extraout_XMM0_Da_01;
      } while ((int)uVar3 == 0);
      if ((int)uVar3 != 1) goto LAB_0014ed49;
      uVar5 = (uint)*__s;
      lVar6 = lVar6 + (ulong)local_f9;
      pbVar7 = __s;
    } while (*__s != 0);
  }
LAB_0014edb5:
  free(local_110);
  if (local_e0 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return lVar6;
}



long screen_write_cstrlen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               size_t param_13,undefined8 param_14,undefined param_15)

{
  byte *pbVar1;
  byte bVar2;
  char in_AL;
  size_t sVar3;
  char *__ptr;
  byte *pbVar4;
  byte *pbVar5;
  long lVar6;
  char *pcVar7;
  undefined8 extraout_RDX;
  ulong uVar8;
  byte bVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined in_stack_ffffffffffffff08;
  byte *local_f0;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [8];
  undefined8 local_c0;
  undefined8 local_b8;
  undefined8 local_b0;
  size_t local_a8;
  undefined8 local_a0;
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  
  if (in_AL != '\0') {
    local_98._8_8_ = in_XMM0_Qb;
    local_98._0_8_ = param_1;
    local_88._4_12_ = in_register_00001224;
    local_88._0_4_ = param_2;
    local_78._4_12_ = in_register_00001244;
    local_78._0_4_ = param_3;
    local_68._4_12_ = in_register_00001264;
    local_68._0_4_ = param_4;
    local_58._4_12_ = in_register_00001284;
    local_58._0_4_ = param_5;
    local_48._4_12_ = in_register_000012a4;
    local_48._0_4_ = param_6;
    local_38._4_12_ = in_register_000012c4;
    local_38._0_4_ = param_7;
    local_28._4_12_ = in_register_000012e4;
    local_28._0_4_ = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  local_e0 = &param_15;
  local_e8 = 8;
  local_d8 = local_c8;
  local_e4 = 0x30;
  local_c0 = param_10;
  local_b8 = param_11;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)&local_f0,
             param_9,&local_e8,param_12,param_13,param_14);
  sVar3 = strlen((char *)local_f0);
  __ptr = (char *)xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          sVar3 + 1,param_9,extraout_RDX,param_12,param_13,param_14);
  bVar9 = *local_f0;
  pcVar7 = __ptr;
  pbVar5 = local_f0;
  while (uVar8 = (ulong)bVar9, bVar9 != 0) {
    while (((char)uVar8 != '#' || (pbVar5[1] != 0x5b))) {
      pbVar5 = pbVar5 + 1;
      *pcVar7 = (char)uVar8;
      pcVar7 = pcVar7 + 1;
      uVar8 = (ulong)*pbVar5;
      if (*pbVar5 == 0) goto LAB_0014ef30;
    }
    bVar9 = *pbVar5;
    if ((bVar9 != 0) && (pbVar4 = pbVar5, bVar2 = 0x5b, bVar9 != 0x5d)) {
      while ((bVar9 = bVar2, pbVar5 = pbVar4 + 1, bVar9 != 0x5d && (bVar9 != 0))) {
        pbVar1 = pbVar4 + 2;
        pbVar4 = pbVar5;
        bVar2 = *pbVar1;
      }
    }
    pbVar5 = pbVar5 + (bVar9 == 0x5d);
    bVar9 = *pbVar5;
  }
LAB_0014ef30:
  *pcVar7 = '\0';
  lVar6 = screen_write_strlen(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4
                              ,param_5,param_6,param_7,param_8,"%s",__ptr,uVar8,pcVar7,param_13,
                              param_14,in_stack_ffffffffffffff08);
  free(local_f0);
  free(__ptr);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar6;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}


/*
Unable to decompile 'screen_write_initctx'
Cause: 
Low-level Error: Overlapping input varnodes
*/


void screen_write_mode_set(long param_1,uint param_2)

{
  uint *puVar1;
  
  puVar1 = (uint *)(*(long *)(param_1 + 8) + 0x30);
  *puVar1 = *puVar1 | param_2;
  return;
}



void screen_write_mode_clear(long param_1,uint param_2)

{
  uint *puVar1;
  
  puVar1 = (uint *)(*(long *)(param_1 + 8) + 0x30);
  *puVar1 = *puVar1 & ~param_2;
  return;
}



void screen_write_cursorup(long param_1,uint param_2)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  
  lVar2 = *(long *)(param_1 + 8);
  if (param_2 == 0) {
    param_2 = 1;
  }
  uVar1 = *(uint *)(lVar2 + 0x14);
  if (uVar1 < *(uint *)(lVar2 + 0x28)) {
    if (uVar1 <= param_2) {
      param_2 = uVar1;
    }
  }
  else {
    uVar3 = uVar1 - *(uint *)(lVar2 + 0x28);
    if (uVar3 <= param_2) {
      param_2 = uVar3;
    }
  }
  if (*(int *)(lVar2 + 0x10) == *(int *)(*(long *)(lVar2 + 8) + 4)) {
    *(int *)(lVar2 + 0x10) = *(int *)(lVar2 + 0x10) + -1;
  }
  if (param_2 != 0) {
    *(uint *)(lVar2 + 0x14) = uVar1 - param_2;
  }
  return;
}



void screen_write_cursordown(long param_1,uint param_2)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  
  lVar2 = *(long *)(param_1 + 8);
  if (param_2 == 0) {
    param_2 = 1;
  }
  uVar1 = *(uint *)(lVar2 + 0x14);
  if (*(uint *)(lVar2 + 0x2c) < uVar1) {
    uVar3 = ~uVar1 + *(int *)(*(long *)(lVar2 + 8) + 8);
    if (uVar3 <= param_2) {
      param_2 = uVar3;
    }
  }
  else {
    uVar3 = *(uint *)(lVar2 + 0x2c) - uVar1;
    if (uVar3 <= param_2) {
      param_2 = uVar3;
    }
  }
  if (*(int *)(lVar2 + 0x10) == *(int *)(*(long *)(lVar2 + 8) + 4)) {
    *(int *)(lVar2 + 0x10) = *(int *)(lVar2 + 0x10) + -1;
  }
  if (param_2 != 0) {
    *(uint *)(lVar2 + 0x14) = param_2 + uVar1;
  }
  return;
}



void screen_write_cursorright(long param_1,uint param_2)

{
  long lVar1;
  uint uVar2;
  
  lVar1 = *(long *)(param_1 + 8);
  if (param_2 == 0) {
    param_2 = 1;
  }
  uVar2 = ~*(uint *)(lVar1 + 0x10) + *(int *)(*(long *)(lVar1 + 8) + 4);
  if (uVar2 <= param_2) {
    param_2 = uVar2;
  }
  if (param_2 != 0) {
    *(uint *)(lVar1 + 0x10) = param_2 + *(uint *)(lVar1 + 0x10);
  }
  return;
}



void screen_write_cursorleft(long param_1,uint param_2)

{
  uint uVar1;
  
  if (param_2 == 0) {
    param_2 = 1;
  }
  uVar1 = *(uint *)(*(long *)(param_1 + 8) + 0x10);
  if (uVar1 <= param_2) {
    param_2 = uVar1;
  }
  if (param_2 != 0) {
    *(uint *)(*(long *)(param_1 + 8) + 0x10) = uVar1 - param_2;
  }
  return;
}



void screen_write_backspace(long param_1)

{
  int iVar1;
  int iVar2;
  long lVar3;
  long lVar4;
  
  lVar3 = *(long *)(param_1 + 8);
  if (*(int *)(lVar3 + 0x10) == 0) {
    if (*(int *)(lVar3 + 0x14) != 0) {
      lVar4 = *(long *)(lVar3 + 8);
      iVar1 = *(int *)(lVar3 + 0x14) + -1;
      if ((*(byte *)(*(long *)(lVar4 + 0x18) + (ulong)(uint)(iVar1 + *(int *)(lVar4 + 0xc)) * 0x1c +
                    0x18) & 1) != 0) {
        iVar2 = *(int *)(lVar4 + 4);
        *(int *)(lVar3 + 0x14) = iVar1;
        *(int *)(lVar3 + 0x10) = iVar2 + -1;
        return;
      }
    }
  }
  else {
    *(int *)(lVar3 + 0x10) = *(int *)(lVar3 + 0x10) + -1;
  }
  return;
}



void screen_write_alignmenttest
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined4 *param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int iVar2;
  ulong uVar3;
  ulong extraout_RDX;
  uint uVar4;
  ulong uVar5;
  uint uVar6;
  long lVar7;
  long in_FS_OFFSET;
  undefined8 uVar8;
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined4 local_98;
  long local_88 [11];
  long local_30;
  
  lVar1 = *(long *)(param_9 + 8);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  screen_write_initctx(param_9,local_88,0);
  local_98 = 0x1010000;
  local_a8 = 0x80000;
  uStack_a4 = 0x800;
  uStack_a0 = 0x20;
  uStack_9c = 0;
  uVar8 = utf8_set((undefined *)&uStack_a0,0x45);
  lVar7 = *(long *)(lVar1 + 8);
  iVar2 = -1;
  uVar3 = (ulong)*(uint *)(lVar7 + 8);
  if (*(uint *)(lVar7 + 8) != 0) {
    uVar6 = 0;
    do {
      uVar5 = 0;
      if (*(int *)(lVar7 + 4) != 0) {
        do {
          uVar4 = (int)uVar5 + 1;
          param_12 = &local_a8;
          uVar8 = grid_view_set_cell((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,
                                     param_8,lVar7,uVar5,uVar6,&local_a8,param_13,param_14);
          lVar7 = *(long *)(lVar1 + 8);
          uVar3 = extraout_RDX;
          uVar5 = (ulong)uVar4;
        } while (uVar4 < *(uint *)(lVar7 + 4));
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < *(uint *)(lVar7 + 8));
    iVar2 = *(uint *)(lVar7 + 8) - 1;
  }
  *(int *)(lVar1 + 0x2c) = iVar2;
  *(undefined8 *)(lVar1 + 0x10) = 0;
  *(undefined4 *)(lVar1 + 0x28) = 0;
  tty_write(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_alignmenttest,
            local_88,uVar3,param_12,param_13,param_14);
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_insertcharacter
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  undefined8 extraout_RDX_00;
  long in_FS_OFFSET;
  undefined8 uVar4;
  long alStack_78 [2];
  uint local_68;
  long local_20;
  
  lVar1 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 == 0) {
    param_10 = 1;
  }
  uVar2 = *(int *)(*(long *)(lVar1 + 8) + 4) - *(int *)(lVar1 + 0x10);
  if (uVar2 <= param_10) {
    param_10 = uVar2;
  }
  if (param_10 != 0) {
    uVar4 = screen_write_initctx(param_9,alStack_78,0);
    uVar3 = extraout_RDX;
    if (*(uint *)(lVar1 + 0x10) <= *(int *)(*(long *)(lVar1 + 8) + 4) - 1U) {
      param_12 = (ulong)param_10;
      uVar4 = grid_view_insert_cells
                        ((int)uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         *(long *)(lVar1 + 8),*(uint *)(lVar1 + 0x10),*(int *)(lVar1 + 0x14),
                         param_10);
      uVar3 = extraout_RDX_00;
    }
    local_68 = param_10;
    tty_write(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_insertcharacter,
              alStack_78,uVar3,param_12,param_13,param_14);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_deletecharacter
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  undefined8 extraout_RDX_00;
  long in_FS_OFFSET;
  undefined8 uVar4;
  long alStack_78 [2];
  uint local_68;
  long local_20;
  
  lVar1 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 == 0) {
    param_10 = 1;
  }
  uVar2 = *(int *)(*(long *)(lVar1 + 8) + 4) - *(int *)(lVar1 + 0x10);
  if (uVar2 <= param_10) {
    param_10 = uVar2;
  }
  if (param_10 != 0) {
    uVar4 = screen_write_initctx(param_9,alStack_78,0);
    uVar3 = extraout_RDX;
    if (*(uint *)(lVar1 + 0x10) <= *(int *)(*(long *)(lVar1 + 8) + 4) - 1U) {
      param_12 = (ulong)param_10;
      uVar4 = grid_view_delete_cells
                        ((int)uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         *(long *)(lVar1 + 8),(ulong)*(uint *)(lVar1 + 0x10),*(int *)(lVar1 + 0x14),
                         param_10,param_13,param_14);
      uVar3 = extraout_RDX_00;
    }
    local_68 = param_10;
    tty_write(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_deletecharacter,
              alStack_78,uVar3,param_12,param_13,param_14);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_clearcharacter
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  undefined8 extraout_RDX_00;
  long in_FS_OFFSET;
  undefined8 uVar4;
  long alStack_78 [2];
  uint local_68;
  long local_20;
  
  lVar1 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 == 0) {
    param_10 = 1;
  }
  uVar2 = *(int *)(*(long *)(lVar1 + 8) + 4) - *(int *)(lVar1 + 0x10);
  if (uVar2 <= param_10) {
    param_10 = uVar2;
  }
  if (param_10 != 0) {
    uVar4 = screen_write_initctx(param_9,alStack_78,0);
    uVar3 = extraout_RDX;
    if (*(uint *)(lVar1 + 0x10) <= *(int *)(*(long *)(lVar1 + 8) + 4) - 1U) {
      param_13 = 1;
      param_12 = (ulong)param_10;
      uVar4 = grid_view_clear((int)uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(long *)(lVar1 + 8),(ulong)*(uint *)(lVar1 + 0x10),
                              *(int *)(lVar1 + 0x14),param_12,1,param_14);
      uVar3 = extraout_RDX_00;
    }
    local_68 = param_10;
    tty_write(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_clearcharacter,
              alStack_78,uVar3,param_12,param_13,param_14);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_insertline
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,undefined8 param_11,ulong param_12,ulong param_13,
               undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long lVar3;
  long in_FS_OFFSET;
  undefined8 uVar4;
  undefined8 uVar5;
  long alStack_78 [2];
  uint local_68;
  long local_20;
  
  lVar3 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 == 0) {
    param_10 = 1;
  }
  uVar2 = *(uint *)(lVar3 + 0x14);
  if ((uVar2 < *(uint *)(lVar3 + 0x28)) || (*(uint *)(lVar3 + 0x2c) < uVar2)) {
    uVar2 = *(int *)(*(long *)(lVar3 + 8) + 8) - uVar2;
    if (uVar2 <= param_10) {
      param_10 = uVar2;
    }
    if (param_10 != 0) {
      screen_write_initctx(param_9,alStack_78,0);
      uVar5 = grid_view_insert_lines(*(long *)(lVar3 + 8),*(int *)(lVar3 + 0x14),param_10);
      local_68 = param_10;
      tty_write(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_insertline,
                alStack_78,extraout_RDX_00,param_12,param_13,param_14);
    }
    goto LAB_0014f53d;
  }
  uVar2 = (*(uint *)(lVar3 + 0x2c) + 1) - uVar2;
  if (uVar2 <= param_10) {
    param_10 = uVar2;
  }
  if (param_10 == 0) goto LAB_0014f53d;
  uVar5 = screen_write_initctx(param_9,alStack_78,0);
  uVar2 = *(uint *)(lVar3 + 0x14);
  if (uVar2 < *(uint *)(lVar3 + 0x28)) {
    lVar3 = *(long *)(lVar3 + 8);
LAB_0014f592:
    uVar4 = grid_view_insert_lines(lVar3,uVar2,param_10);
    uVar5 = extraout_RDX;
  }
  else {
    uVar1 = *(uint *)(lVar3 + 0x2c);
    param_13 = (ulong)uVar1;
    lVar3 = *(long *)(lVar3 + 8);
    if (uVar1 < uVar2) goto LAB_0014f592;
    param_12 = (ulong)param_10;
    uVar4 = grid_view_insert_lines_region
                      (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,uVar1,
                       uVar2,param_10,param_13,param_14);
    uVar5 = extraout_RDX_01;
  }
  local_68 = param_10;
  tty_write(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_insertline,
            alStack_78,uVar5,param_12,param_13,param_14);
LAB_0014f53d:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_deleteline
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,undefined8 param_11,ulong param_12,ulong param_13,
               undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long lVar3;
  long in_FS_OFFSET;
  undefined8 uVar4;
  undefined8 uVar5;
  long alStack_78 [2];
  uint local_68;
  long local_20;
  
  lVar3 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 == 0) {
    param_10 = 1;
  }
  uVar2 = *(uint *)(lVar3 + 0x14);
  if ((uVar2 < *(uint *)(lVar3 + 0x28)) || (*(uint *)(lVar3 + 0x2c) < uVar2)) {
    uVar2 = *(int *)(*(long *)(lVar3 + 8) + 8) - uVar2;
    if (uVar2 <= param_10) {
      param_10 = uVar2;
    }
    if (param_10 != 0) {
      uVar5 = screen_write_initctx(param_9,alStack_78,0);
      uVar5 = grid_view_delete_lines
                        (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         *(long *)(lVar3 + 8),*(int *)(lVar3 + 0x14),param_10,param_12,param_13,
                         param_14);
      local_68 = param_10;
      tty_write(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_deleteline,
                alStack_78,extraout_RDX_00,param_12,param_13,param_14);
    }
    goto LAB_0014f65d;
  }
  uVar2 = (*(uint *)(lVar3 + 0x2c) + 1) - uVar2;
  if (uVar2 <= param_10) {
    param_10 = uVar2;
  }
  if (param_10 == 0) goto LAB_0014f65d;
  uVar5 = screen_write_initctx(param_9,alStack_78,0);
  uVar2 = *(uint *)(lVar3 + 0x14);
  if (uVar2 < *(uint *)(lVar3 + 0x28)) {
    lVar3 = *(long *)(lVar3 + 8);
LAB_0014f6b2:
    uVar4 = grid_view_delete_lines
                      (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,uVar2,
                       param_10,param_12,param_13,param_14);
    uVar5 = extraout_RDX;
  }
  else {
    uVar1 = *(uint *)(lVar3 + 0x2c);
    param_13 = (ulong)uVar1;
    lVar3 = *(long *)(lVar3 + 8);
    if (uVar1 < uVar2) goto LAB_0014f6b2;
    param_12 = (ulong)param_10;
    uVar4 = grid_view_delete_lines_region
                      (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,uVar1,
                       uVar2,param_10,param_13,param_14);
    uVar5 = extraout_RDX_01;
  }
  local_68 = param_10;
  tty_write(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_deleteline,
            alStack_78,uVar5,param_12,param_13,param_14);
LAB_0014f65d:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_clearline
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  ulong uVar4;
  undefined8 extraout_RDX;
  undefined8 uVar5;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 uVar6;
  long alStack_78 [11];
  long local_20;
  
  lVar1 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar6 = screen_write_initctx(param_9,alStack_78,0);
  lVar2 = *(long *)(lVar1 + 8);
  uVar5 = 1;
  uVar4 = (ulong)*(uint *)(lVar2 + 4);
  uVar3 = grid_view_clear(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,0,
                          *(int *)(lVar1 + 0x14),uVar4,1,in_R9);
  tty_write(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_clearline,
            alStack_78,extraout_RDX,uVar4,uVar5,in_R9);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_clearendofline
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  ulong uVar4;
  undefined8 extraout_RDX;
  undefined8 uVar5;
  undefined8 extraout_RDX_00;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined8 uVar6;
  long alStack_78 [11];
  long local_20;
  
  lVar3 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar6 = screen_write_initctx(param_9,alStack_78,0);
  uVar1 = *(uint *)(lVar3 + 0x10);
  uVar2 = *(uint *)(*(long *)(lVar3 + 8) + 4);
  uVar4 = (ulong)uVar2;
  uVar5 = extraout_RDX;
  if (uVar1 <= uVar2 - 1) {
    uVar4 = (ulong)(uVar2 - uVar1);
    in_R8 = 1;
    uVar6 = grid_view_clear((int)uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            *(long *)(lVar3 + 8),(ulong)uVar1,*(int *)(lVar3 + 0x14),uVar4,1,in_R9);
    uVar5 = extraout_RDX_00;
  }
  tty_write(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_clearendofline,
            alStack_78,uVar5,uVar4,in_R8,in_R9);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_clearstartofline
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  long lVar1;
  long lVar2;
  ulong uVar3;
  ulong uVar4;
  undefined8 extraout_RDX;
  undefined8 uVar5;
  undefined8 extraout_RDX_00;
  undefined8 uVar6;
  ulong uVar7;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined8 uVar9;
  long alStack_78 [11];
  long local_20;
  
  lVar1 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar8 = screen_write_initctx(param_9,alStack_78,0);
  lVar2 = *(long *)(lVar1 + 8);
  uVar3 = (ulong)*(uint *)(lVar2 + 4);
  if (*(uint *)(lVar2 + 4) - 1 < *(uint *)(lVar1 + 0x10)) {
    uVar6 = 1;
    uVar7 = uVar3;
    uVar9 = grid_view_clear(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,0,
                            *(int *)(lVar1 + 0x14),uVar3,1,uVar3);
    uVar4 = uVar3;
    uVar5 = extraout_RDX;
    uVar3 = uVar7;
  }
  else {
    uVar4 = (ulong)(*(uint *)(lVar1 + 0x10) + 1);
    uVar6 = 1;
    uVar9 = grid_view_clear(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,0,
                            *(int *)(lVar1 + 0x14),uVar4,1,uVar3);
    uVar5 = extraout_RDX_00;
  }
  tty_write(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_clearstartofline,
            alStack_78,uVar5,uVar4,uVar6,uVar3);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_cursormove(long param_1,uint param_2,uint param_3)

{
  long lVar1;
  uint uVar2;
  uint uVar3;
  
  lVar1 = *(long *)(param_1 + 8);
  uVar2 = *(int *)(*(long *)(lVar1 + 8) + 8) - 1;
  if (param_3 < uVar2) {
    uVar2 = param_3;
  }
  uVar3 = *(int *)(*(long *)(lVar1 + 8) + 4) - 1;
  *(uint *)(lVar1 + 0x14) = uVar2;
  if (param_2 < uVar3) {
    uVar3 = param_2;
  }
  *(uint *)(lVar1 + 0x10) = uVar3;
  return;
}



void screen_write_reverseindex
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  long lVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  undefined8 extraout_RDX_00;
  long in_FS_OFFSET;
  undefined8 uVar4;
  long alStack_78 [11];
  long local_20;
  
  lVar2 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar4 = screen_write_initctx(param_9,alStack_78,0);
  iVar1 = *(int *)(lVar2 + 0x14);
  if (iVar1 == *(int *)(lVar2 + 0x28)) {
    uVar4 = grid_view_scroll_region_down(*(long *)(lVar2 + 8),iVar1,*(int *)(lVar2 + 0x2c));
    uVar3 = extraout_RDX_00;
  }
  else {
    uVar3 = extraout_RDX;
    if (iVar1 != 0) {
      *(int *)(lVar2 + 0x14) = iVar1 + -1;
    }
  }
  tty_write(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_reverseindex,
            alStack_78,uVar3,param_12,param_13,param_14);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_scrollregion(long param_1,uint param_2,uint param_3)

{
  long lVar1;
  uint uVar2;
  
  lVar1 = *(long *)(param_1 + 8);
  uVar2 = *(int *)(*(long *)(lVar1 + 8) + 8) - 1;
  if (uVar2 <= param_2) {
    param_2 = uVar2;
  }
  if (param_3 < uVar2) {
    uVar2 = param_3;
  }
  if (param_2 < uVar2) {
    *(undefined8 *)(lVar1 + 0x10) = 0;
    *(uint *)(lVar1 + 0x28) = param_2;
    *(uint *)(lVar1 + 0x2c) = uVar2;
  }
  return;
}



void screen_write_linefeed
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13
               ,undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  byte *pbVar4;
  long lVar5;
  ulong uVar6;
  ulong extraout_RDX;
  long in_FS_OFFSET;
  undefined8 uVar7;
  long alStack_78 [2];
  int local_68;
  long local_20;
  
  lVar3 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar7 = screen_write_initctx(param_9,alStack_78,0);
  pbVar4 = *(byte **)(lVar3 + 8);
  uVar2 = *(uint *)(lVar3 + 0x14);
  uVar6 = (ulong)uVar2;
  lVar5 = *(long *)(pbVar4 + 0x18) + (ulong)(uVar2 + *(int *)(pbVar4 + 0xc)) * 0x1c;
  if (param_10 == 0) {
    *(uint *)(lVar5 + 0x18) = *(uint *)(lVar5 + 0x18) & 0xfffffffe;
    uVar1 = *(uint *)(lVar3 + 0x2c);
  }
  else {
    *(uint *)(lVar5 + 0x18) = *(uint *)(lVar5 + 0x18) | 1;
    uVar1 = *(uint *)(lVar3 + 0x2c);
  }
  if (uVar2 == uVar1) {
    uVar7 = grid_view_scroll_region_up
                      (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,pbVar4,
                       (ulong)*(uint *)(lVar3 + 0x28),uVar2,lVar5,param_13,param_14);
    uVar6 = extraout_RDX;
  }
  else if (uVar2 < *(int *)(pbVar4 + 8) - 1U) {
    uVar6 = (ulong)(uVar2 + 1);
    *(uint *)(lVar3 + 0x14) = uVar2 + 1;
  }
  local_68 = param_10;
  tty_write(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_linefeed,
            alStack_78,uVar6,lVar5,param_13,param_14);
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void screen_write_carriagereturn(long param_1)

{
  *(undefined4 *)(*(long *)(param_1 + 8) + 0x10) = 0;
  return;
}



void screen_write_clearendofscreen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,ulong param_13,
               ulong param_14)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  long lVar4;
  int iVar5;
  undefined8 extraout_RDX;
  undefined8 uVar6;
  undefined8 extraout_RDX_00;
  byte *pbVar7;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined8 uVar9;
  long alStack_88 [11];
  long local_30;
  
  lVar4 = *(long *)(param_9 + 8);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar9 = screen_write_initctx(param_9,alStack_88,0);
  uVar8 = (undefined4)uVar9;
  pbVar7 = *(byte **)(lVar4 + 8);
  iVar5 = *(int *)(lVar4 + 0x14);
  uVar1 = *(uint *)(pbVar7 + 4);
  iVar2 = *(int *)(pbVar7 + 8);
  if ((iVar5 == 0) && ((*pbVar7 & 1) != 0)) {
    uVar9 = grid_view_clear_history
                      (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)pbVar7);
    uVar6 = extraout_RDX_00;
  }
  else {
    uVar3 = *(uint *)(lVar4 + 0x10);
    if (uVar3 <= uVar1 - 1) {
      uVar8 = grid_view_clear(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (long)pbVar7,(ulong)uVar3,iVar5,(ulong)(uVar1 - uVar3),1,param_14);
      iVar5 = *(int *)(lVar4 + 0x14);
      pbVar7 = *(byte **)(lVar4 + 8);
    }
    param_14 = (ulong)(iVar5 + 1U);
    param_12 = (ulong)uVar1;
    param_13 = (ulong)(uint)((iVar2 + -1) - iVar5);
    uVar9 = grid_view_clear(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)pbVar7,0,iVar5 + 1U,param_12,param_13,param_14);
    uVar6 = extraout_RDX;
  }
  tty_write(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_clearendofscreen,
            alStack_88,uVar6,param_12,param_13,param_14);
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_clearstartofscreen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  uint uVar1;
  long lVar2;
  ulong uVar3;
  uint uVar4;
  undefined8 extraout_RDX;
  undefined8 uVar5;
  undefined8 extraout_RDX_00;
  long lVar6;
  undefined8 uVar7;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined8 uVar9;
  long alStack_78 [11];
  long local_20;
  
  lVar2 = *(long *)(param_9 + 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar8 = screen_write_initctx(param_9,alStack_78,0);
  lVar6 = *(long *)(lVar2 + 8);
  uVar4 = *(uint *)(lVar2 + 0x14);
  uVar1 = *(uint *)(lVar6 + 4);
  if (uVar4 != 0) {
    uVar8 = grid_view_clear(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar6,0,0,
                            (ulong)uVar1,(ulong)uVar4,in_R9);
    uVar4 = *(uint *)(lVar2 + 0x14);
    lVar6 = *(long *)(lVar2 + 8);
  }
  if (uVar1 - 1 < *(uint *)(lVar2 + 0x10)) {
    uVar7 = 1;
    uVar3 = (ulong)uVar1;
    uVar9 = grid_view_clear(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar6,0,
                            uVar4,uVar3,1,in_R9);
    uVar5 = extraout_RDX;
  }
  else {
    uVar3 = (ulong)(*(uint *)(lVar2 + 0x10) + 1);
    uVar7 = 1;
    uVar9 = grid_view_clear(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar6,0,
                            uVar4,uVar3,1,in_R9);
    uVar5 = extraout_RDX_00;
  }
  tty_write(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_clearstartofscreen
            ,alStack_78,uVar5,uVar3,uVar7,in_R9);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_clearscreen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,ulong param_13,
               undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  byte *pbVar5;
  undefined8 extraout_RDX;
  undefined8 uVar6;
  undefined8 extraout_RDX_00;
  long in_FS_OFFSET;
  undefined8 uVar7;
  long alStack_88 [11];
  long local_30;
  
  lVar3 = *(long *)(param_9 + 8);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  lVar4 = *(long *)(lVar3 + 8);
  uVar1 = *(uint *)(lVar4 + 4);
  uVar2 = *(uint *)(lVar4 + 8);
  uVar7 = screen_write_initctx(param_9,alStack_88,0);
  pbVar5 = *(byte **)(lVar3 + 8);
  if ((*pbVar5 & 1) == 0) {
    param_13 = (ulong)uVar2;
    param_12 = (ulong)uVar1;
    uVar7 = grid_view_clear((int)uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)pbVar5,0,0,param_12,param_13,param_14);
    uVar6 = extraout_RDX_00;
  }
  else {
    uVar7 = grid_view_clear_history
                      (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)pbVar5);
    uVar6 = extraout_RDX;
  }
  tty_write(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_clearscreen,
            alStack_88,uVar6,param_12,param_13,param_14);
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_reset(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                       ulong param_13,undefined8 param_14)

{
  long lVar1;
  ulong uVar2;
  uint uVar3;
  uint uVar4;
  undefined8 uVar5;
  
  lVar1 = *(long *)(param_9 + 8);
  uVar5 = screen_reset_tabs(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                            param_10,param_11,param_12,param_13,param_14);
  uVar2 = *(ulong *)(param_9 + 8);
  uVar3 = *(int *)(*(long *)(lVar1 + 8) + 8) - 1;
  uVar4 = *(int *)(*(long *)(uVar2 + 8) + 8) - 1;
  if (uVar4 < uVar3) {
    uVar3 = uVar4;
  }
  if (uVar3 != 0) {
    *(undefined8 *)(uVar2 + 0x10) = 0;
    *(undefined4 *)(uVar2 + 0x28) = 0;
    *(uint *)(uVar2 + 0x2c) = uVar3;
  }
  *(uint *)(lVar1 + 0x30) = *(uint *)(lVar1 + 0x30) & 0xfffff491;
  screen_write_clearscreen
            (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             (ulong)uVar4,uVar2,param_13,param_14);
  *(undefined8 *)(*(long *)(param_9 + 8) + 0x10) = 0;
  return;
}



void screen_write_clearhistory(long param_1)

{
  long lVar1;
  
  lVar1 = *(long *)(*(long *)(param_1 + 8) + 8);
  grid_move_lines(lVar1,0,*(undefined4 *)(lVar1 + 0xc),*(undefined4 *)(lVar1 + 8));
  *(undefined4 *)(lVar1 + 0xc) = 0;
  return;
}



undefined8
screen_write_combine
          (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          undefined8 *param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  byte bVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  undefined8 uVar5;
  uint uVar6;
  ulong uVar7;
  ulong uVar8;
  undefined8 *puVar9;
  undefined8 *puVar10;
  long in_FS_OFFSET;
  byte bVar11;
  undefined4 uVar12;
  undefined1 in_stack_ffffffffffffffb8;
  undefined4 uStack_44;
  undefined8 uStack_40;
  byte abStack_38 [8];
  long local_30;
  
  bVar11 = 0;
  lVar2 = *(long *)(param_9 + 8);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar6 = *(uint *)(lVar2 + 0x10);
  lVar3 = *(long *)(lVar2 + 8);
  if (uVar6 != 0) {
    if (*(char *)((long)param_10 + 10) == '\0') {
                    // WARNING: Subroutine does not return
      fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"UTF-8 data empty",
             (ulong)uVar6,param_11,param_12,param_13,param_14,in_stack_ffffffffffffffb8);
    }
    uVar12 = grid_view_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                lVar3,(ulong)(uVar6 - 1),*(int *)(lVar2 + 0x14),
                                (undefined4 *)&stack0xffffffffffffffb8,param_13,param_14);
    uVar7 = (ulong)abStack_38[2];
    bVar1 = *(byte *)((long)param_10 + 10);
    uVar8 = (ulong)bVar1;
    if ((uint)abStack_38[2] + (uint)bVar1 < 10) {
      puVar9 = (undefined8 *)((long)&uStack_44 + uVar7 + 4);
      uVar6 = (uint)bVar1;
      if (uVar6 < 8) {
        if ((bVar1 & 4) == 0) {
          if ((uVar6 != 0) && (*(undefined *)puVar9 = *(undefined *)param_10, (bVar1 & 2) != 0)) {
            *(undefined2 *)((long)&uStack_44 + uVar8 + uVar7 + 2) =
                 *(undefined2 *)((long)param_10 + (uVar8 - 2));
          }
        }
        else {
          *(undefined4 *)puVar9 = *(undefined4 *)param_10;
          *(undefined4 *)((long)&uStack_44 + uVar8 + uVar7) =
               *(undefined4 *)((long)param_10 + (uVar8 - 4));
        }
      }
      else {
        *puVar9 = *param_10;
        *(undefined8 *)(&stack0xffffffffffffffb8 + uVar8 + uVar7) =
             *(undefined8 *)((long)param_10 + (uVar8 - 8));
        lVar4 = (long)puVar9 -
                (long)(undefined8 *)((ulong)(abStack_38 + uVar7) & 0xfffffffffffffff8);
        puVar9 = (undefined8 *)((long)param_10 - lVar4);
        puVar10 = (undefined8 *)((ulong)(abStack_38 + uVar7) & 0xfffffffffffffff8);
        for (uVar8 = (ulong)(uVar6 + (int)lVar4 >> 3); uVar8 != 0; uVar8 = uVar8 - 1) {
          *puVar10 = *puVar9;
          puVar9 = puVar9 + (ulong)bVar11 * -2 + 1;
          puVar10 = puVar10 + (ulong)bVar11 * -2 + 1;
        }
      }
      abStack_38[2] = abStack_38[2] + bVar1;
      grid_view_set_cell(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,
                         (ulong)(*(int *)(lVar2 + 0x10) - 1),*(int *)(lVar2 + 0x14),
                         (undefined4 *)&stack0xffffffffffffffb8,param_13,param_14);
      uVar5 = 0;
      goto LAB_0014fe0c;
    }
  }
  uVar5 = 0xffffffff;
LAB_0014fe0c:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_overwrite
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13
               ,undefined8 param_14)

{
  long lVar1;
  long lVar2;
  uint uVar3;
  ulong uVar4;
  long in_FS_OFFSET;
  undefined4 uVar5;
  byte local_58;
  long local_40;
  
  lVar1 = *(long *)(param_9 + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = *(long *)(lVar1 + 8);
  uVar5 = grid_view_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                             (ulong)*(uint *)(lVar1 + 0x10),*(int *)(lVar1 + 0x14),
                             (undefined4 *)&local_58,param_13,param_14);
  if ((local_58 & 4) != 0) {
    for (uVar3 = *(uint *)(lVar1 + 0x10); uVar3 != 0; uVar3 = uVar3 - 1) {
      uVar5 = grid_view_get_cell(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2
                                 ,(ulong)uVar3,*(int *)(lVar1 + 0x14),(undefined4 *)&local_58,
                                 param_13,param_14);
      if ((local_58 & 4) == 0) goto LAB_0014ff12;
      uVar5 = grid_view_set_cell(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2
                                 ,(ulong)uVar3,*(int *)(lVar1 + 0x14),
                                 (undefined4 *)grid_default_cell,param_13,param_14);
    }
    uVar3 = 0;
LAB_0014ff12:
    uVar5 = grid_view_set_cell(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                               (ulong)uVar3,*(int *)(lVar1 + 0x14),(undefined4 *)grid_default_cell,
                               param_13,param_14);
  }
  uVar3 = param_10 + *(int *)(lVar1 + 0x10);
  if (uVar3 < *(uint *)(*(long *)(lVar1 + 8) + 4)) {
    do {
      uVar5 = grid_view_get_cell(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2
                                 ,(ulong)uVar3,*(int *)(lVar1 + 0x14),(undefined4 *)&local_58,
                                 param_13,param_14);
      if ((local_58 & 4) == 0) break;
      uVar4 = (ulong)uVar3;
      uVar3 = uVar3 + 1;
      uVar5 = grid_view_set_cell(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2
                                 ,uVar4,*(int *)(lVar1 + 0x14),(undefined4 *)grid_default_cell,
                                 param_13,param_14);
    } while (uVar3 < *(uint *)(*(long *)(lVar1 + 8) + 4));
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}


/*
Unable to decompile 'screen_write_cell'
Cause: 
Low-level Error: Overlapping input varnodes
*/


void screen_write_putc(undefined8 param_1,long param_2,undefined param_3)

{
  utf8_set((undefined *)(param_2 + 8),param_3);
  screen_write_cell(param_1,param_2);
  return;
}



void screen_write_vnputs(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,undefined8 param_9,ulong param_10,long param_11,undefined8 param_12,
                        undefined8 param_13,size_t param_14)

{
  byte bVar1;
  undefined8 uVar2;
  ulong uVar3;
  ulong extraout_RDX;
  ulong uVar4;
  ulong extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong extraout_RDX_02;
  ulong extraout_RDX_03;
  ulong extraout_RDX_04;
  byte *__s;
  uint uVar5;
  ulong uVar6;
  long in_FS_OFFSET;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  byte *local_58;
  undefined8 local_4c;
  byte local_42;
  byte local_41;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar7 = xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long *)&local_58,param_12,param_13,param_12,param_13,param_14);
  uVar5 = (uint)*local_58;
  if (*local_58 != 0) {
    uVar4 = extraout_RDX;
    __s = local_58;
    uVar6 = 0;
LAB_0015039c:
    do {
      if ((char)uVar5 < '\0') {
        uVar2 = utf8_open(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_4c,
                          uVar5,uVar4,param_12,param_13,param_14);
        uVar4 = extraout_RDX_00;
        uVar7 = extraout_XMM0_Da;
        if ((int)uVar2 != 0) goto LAB_001503a1;
        __s = __s + 1;
        param_14 = strlen((char *)__s);
        uVar4 = extraout_RDX_01;
        uVar7 = extraout_XMM0_Da_00;
        if (param_14 < (ulong)local_42 - 1) break;
        do {
          bVar1 = *__s;
          __s = __s + 1;
          uVar3 = utf8_append(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (char *)&local_4c,(ulong)bVar1,uVar4,param_12,param_13,param_14);
          uVar4 = extraout_RDX_02;
          uVar7 = extraout_XMM0_Da_01;
        } while ((int)uVar3 == 0);
        if ((int)uVar3 == 1) {
          uVar3 = (ulong)local_41;
          if ((0 < (long)param_10) && (param_10 < uVar3 + uVar6)) {
            if (uVar6 < param_10) {
              do {
                uVar6 = uVar6 + 1;
                utf8_set((undefined *)(param_11 + 8),0x20);
                screen_write_cell(param_9,param_11);
              } while (param_10 != uVar6);
            }
            break;
          }
          utf8_copy((undefined8 *)(param_11 + 8),&local_4c);
          uVar7 = screen_write_cell(param_9,param_11);
          uVar5 = (uint)*__s;
          uVar4 = extraout_RDX_03;
          uVar6 = uVar3 + uVar6;
          if (*__s == 0) break;
          goto LAB_0015039c;
        }
      }
      else {
LAB_001503a1:
        if ((0 < (long)param_10) && (param_10 < uVar6 + 1)) break;
        bVar1 = *__s;
        if (bVar1 == 1) {
          *(char *)(param_11 + 1) = *(char *)(param_11 + 1) + -0x80;
        }
        else if ((byte)(bVar1 - 0x20) < 0x5f) {
          uVar6 = uVar6 + 1;
          utf8_set((undefined *)(undefined8 *)(param_11 + 8),bVar1);
          uVar7 = screen_write_cell(param_9,param_11);
          uVar4 = extraout_RDX_04;
        }
        __s = __s + 1;
      }
      uVar5 = (uint)*__s;
    } while (*__s != 0);
  }
  free(local_58);
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void screen_write_puts(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      undefined8 param_9,long param_10,undefined8 param_11,undefined8 param_12,
                      undefined8 param_13,size_t param_14,undefined param_15)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [24];
  undefined8 local_a0;
  undefined8 local_98;
  size_t local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._8_8_ = in_XMM0_Qb;
    local_88._0_8_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_c8 = local_b8;
  local_d8 = 0x18;
  local_d4 = 0x30;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  screen_write_vnputs(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      0xffffffffffffffff,param_10,param_11,&local_d8,param_14);
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_nputs(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,ulong param_10,long param_11,undefined8 param_12,
                       undefined8 param_13,size_t param_14,undefined param_15)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [32];
  undefined8 local_98;
  size_t local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._8_8_ = in_XMM0_Qb;
    local_88._0_8_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_d8 = 0x20;
  local_c8 = local_b8;
  local_d4 = 0x30;
  local_98 = param_13;
  local_90 = param_14;
  screen_write_vnputs(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      param_10,param_11,param_12,&local_d8,param_14);
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_cnputs(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,undefined8 param_9,ulong param_10,undefined (*param_11) [16],
                        undefined8 param_12,undefined8 param_13,size_t param_14,undefined param_15)

{
  byte *__s;
  byte bVar1;
  char in_AL;
  size_t sVar2;
  undefined8 uVar3;
  ulong uVar4;
  ulong uVar5;
  ulong extraout_RDX;
  ulong uVar6;
  ulong extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong extraout_RDX_02;
  ulong extraout_RDX_03;
  ulong extraout_RDX_04;
  ulong extraout_RDX_05;
  byte *pbVar7;
  ulong uVar8;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qb;
  undefined extraout_XMM0 [16];
  undefined extraout_XMM0_00 [16];
  undefined extraout_XMM0_01 [16];
  undefined auVar9 [16];
  undefined extraout_XMM0_02 [16];
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  byte *local_140;
  undefined8 local_134;
  byte local_12a;
  byte local_129;
  undefined local_128 [16];
  undefined4 local_118;
  undefined4 local_108;
  undefined4 local_104;
  undefined *local_100;
  undefined *local_f8;
  long local_f0;
  undefined local_e8 [32];
  undefined8 local_c8;
  size_t local_c0;
  undefined8 local_b8;
  undefined local_a8 [16];
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined8 extraout_XMM0_Qb_00;
  
  if (in_AL != '\0') {
    local_a8._4_12_ = in_register_00001224;
    local_a8._0_4_ = param_2;
    local_98._4_12_ = in_register_00001244;
    local_98._0_4_ = param_3;
    local_88._4_12_ = in_register_00001264;
    local_88._0_4_ = param_4;
    local_78._4_12_ = in_register_00001284;
    local_78._0_4_ = param_5;
    local_68._4_12_ = in_register_000012a4;
    local_68._0_4_ = param_6;
    local_58._4_12_ = in_register_000012c4;
    local_58._0_4_ = param_7;
    local_48._4_12_ = in_register_000012e4;
    local_48._0_4_ = param_8;
    local_b8 = param_1;
  }
  local_f0 = *(long *)(in_FS_OFFSET + 0x28);
  local_100 = &param_15;
  local_108 = 0x20;
  local_f8 = local_e8;
  local_104 = 0x30;
  local_c8 = param_13;
  local_c0 = param_14;
  xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)&local_140,
             param_12,&local_108,param_12,param_13,param_14);
  auVar9 = *param_11;
  local_118 = *(undefined4 *)param_11[1];
  bVar1 = *local_140;
  local_128 = auVar9;
  if (bVar1 == 0) {
LAB_001507b3:
    free(local_140);
    if (local_f0 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    return;
  }
  uVar6 = extraout_RDX;
  pbVar7 = local_140;
  uVar8 = 0;
LAB_00150780:
  uVar5 = uVar8;
  if (bVar1 == 0x23) {
    if (pbVar7[1] != 0x5b) goto LAB_00150759;
    __s = pbVar7 + 2;
    sVar2 = strcspn((char *)__s,"]");
    pbVar7 = __s + sVar2;
    if (*pbVar7 == 0) goto LAB_001507b3;
    *pbVar7 = 0;
    pbVar7 = pbVar7 + 1;
    style_parse((byte *)param_11,(undefined4 *)local_128,__s);
    uVar6 = extraout_RDX_05;
    auVar9 = extraout_XMM0_02;
  }
  else {
    if ((char)bVar1 < '\0') {
      uVar3 = utf8_open(auVar9._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        &local_134,(uint)bVar1,uVar6,param_12,param_13,param_14);
      uVar6 = extraout_RDX_01;
      auVar9 = extraout_XMM0;
      if ((int)uVar3 == 0) {
        pbVar7 = pbVar7 + 1;
        param_14 = strlen((char *)pbVar7);
        uVar6 = extraout_RDX_02;
        auVar9 = extraout_XMM0_00;
        if (param_14 < (ulong)local_12a - 1) goto LAB_001507b3;
        do {
          bVar1 = *pbVar7;
          pbVar7 = pbVar7 + 1;
          uVar4 = utf8_append(auVar9._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (char *)&local_134,(ulong)bVar1,uVar6,param_12,param_13,param_14);
          uVar6 = extraout_RDX_03;
          auVar9 = extraout_XMM0_01;
        } while ((int)uVar4 == 0);
        if ((int)uVar4 != 1) goto LAB_00150777;
        uVar5 = local_129 + uVar8;
        if ((0 < (long)param_10) && (param_10 < uVar5)) {
          if (uVar8 < param_10) {
            do {
              uVar8 = uVar8 + 1;
              utf8_set(*param_11 + 8,0x20);
              screen_write_cell(param_9,param_11);
            } while (param_10 != uVar8);
          }
          goto LAB_001507b3;
        }
        utf8_copy((undefined8 *)(local_128 + 8),&local_134);
        auVar9._0_8_ = screen_write_cell(param_9,local_128);
        auVar9._8_8_ = extraout_XMM0_Qb_00;
        uVar6 = extraout_RDX_04;
        goto LAB_00150777;
      }
    }
LAB_00150759:
    if ((0 < (long)param_10) && (param_10 < uVar8 + 1)) goto LAB_001507b3;
    if ((byte)(*pbVar7 - 0x20) < 0x5f) {
      uVar8 = uVar8 + 1;
      utf8_set(local_128 + 8,*pbVar7);
      auVar9._0_8_ = screen_write_cell(param_9,local_128);
      auVar9._8_8_ = extraout_XMM0_Qb;
      uVar6 = extraout_RDX_00;
    }
    pbVar7 = pbVar7 + 1;
    uVar5 = uVar8;
  }
LAB_00150777:
  bVar1 = *pbVar7;
  uVar8 = uVar5;
  if (bVar1 == 0) goto LAB_001507b3;
  goto LAB_00150780;
}



void screen_write_copy(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,long param_10,uint param_11,uint param_12,int param_13,
                      undefined8 param_14)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  uint uVar4;
  int iVar5;
  uint *puVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  undefined4 uVar13;
  long local_80;
  undefined4 local_58 [6];
  long local_40;
  ulong uVar10;
  
  lVar2 = *(long *)(param_10 + 8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = *(uint *)(*(long *)(param_9 + 8) + 0x10);
  uVar8 = param_12 + (int)param_14;
  if (param_12 < uVar8) {
    iVar5 = *(int *)(*(long *)(param_9 + 8) + 0x14) - param_12;
    uVar9 = param_13 + param_11;
    uVar10 = (ulong)uVar9;
    local_80 = (ulong)param_12 * 0x1c;
    do {
      uVar13 = (undefined4)param_1;
      if (param_12 < (uint)(*(int *)(lVar2 + 8) + *(int *)(lVar2 + 0xc))) {
        puVar6 = (uint *)(local_80 + *(long *)(lVar2 + 0x18));
        uVar7 = *puVar6;
        uVar11 = *(uint *)(lVar2 + 4);
        uVar4 = param_11;
        if (uVar7 <= param_11) {
          uVar4 = uVar7;
        }
        uVar12 = (ulong)uVar4;
        if ((uVar9 == uVar11) && (uVar7 < uVar9)) {
          if (uVar4 < uVar7) {
LAB_00150a40:
            do {
              grid_get_cell(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                            uVar12,(ulong)param_12,local_58,uVar10,param_14);
              uVar11 = (int)uVar12 + 1;
              uVar12 = (ulong)uVar11;
              param_1 = screen_write_cell(param_9,local_58);
              uVar13 = (undefined4)param_1;
            } while (uVar11 < uVar7);
            uVar11 = *(uint *)(lVar2 + 4);
            goto LAB_00150a69;
          }
        }
        else {
          uVar7 = uVar9;
          if (uVar4 < uVar9) goto LAB_00150a40;
LAB_00150a69:
          if ((uVar9 != uVar11) || (uVar9 <= *puVar6)) goto LAB_001509a8;
        }
        param_1 = screen_write_clearendofline
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                            );
      }
      else {
        param_1 = screen_write_clearline
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                            );
      }
LAB_001509a8:
      lVar3 = *(long *)(param_9 + 8);
      uVar11 = iVar5 + 1 + param_12;
      uVar7 = *(int *)(*(long *)(lVar3 + 8) + 8) - 1;
      if (uVar11 <= uVar7) {
        uVar7 = uVar11;
      }
      uVar11 = *(int *)(*(long *)(lVar3 + 8) + 4) - 1;
      *(uint *)(lVar3 + 0x14) = uVar7;
      if (uVar1 < uVar11) {
        uVar11 = uVar1;
      }
      local_80 = local_80 + 0x1c;
      param_12 = param_12 + 1;
      *(uint *)(lVar3 + 0x10) = uVar11;
    } while (param_12 != uVar8);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void screen_write_setselection
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,undefined4 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined8 uVar1;
  long alStack_78 [2];
  undefined4 local_68;
  undefined8 local_60;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = screen_write_initctx(param_9,alStack_78,0);
  local_68 = param_11;
  local_60 = param_10;
  tty_write(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_setselection,
            alStack_78,extraout_RDX,param_12,param_13,param_14);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_write_rawstring
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,undefined4 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined8 uVar1;
  long alStack_78 [2];
  undefined4 local_68;
  undefined8 local_60;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = screen_write_initctx(param_9,alStack_78,0);
  local_68 = param_11;
  local_60 = param_10;
  tty_write(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,tty_cmd_rawstring,
            alStack_78,extraout_RDX,param_12,param_13,param_14);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void screen_free(void **param_1)

{
  free(param_1[7]);
  free(*param_1);
  free(param_1[4]);
  grid_destroy(param_1[1]);
  return;
}



void screen_reset_tabs(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                      undefined8 param_13,undefined8 param_14)

{
  byte *pbVar1;
  uint uVar2;
  void *pvVar3;
  uint uVar4;
  undefined8 extraout_RDX;
  undefined8 uVar5;
  undefined4 extraout_XMM0_Da;
  undefined in_stack_ffffffffffffffe8;
  
  free(*(void **)(param_9 + 0x38));
  uVar5 = 1;
  uVar2 = *(uint *)(*(long *)(param_9 + 8) + 4);
  pvVar3 = calloc((ulong)(uVar2 + 7 >> 3),1);
  *(void **)(param_9 + 0x38) = pvVar3;
  if (pvVar3 == (void *)0x0) {
                    // WARNING: Subroutine does not return
    fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
          "bit_alloc failed",uVar5,extraout_RDX,param_12,param_13,param_14,in_stack_ffffffffffffffe8
         );
  }
  uVar4 = 8;
  if (8 < uVar2) {
    while( true ) {
      pbVar1 = (byte *)((long)pvVar3 + (ulong)(uVar4 >> 3));
      *pbVar1 = *pbVar1 | 1;
      if (*(uint *)(*(long *)(param_9 + 8) + 4) <= uVar4 + 8) break;
      pvVar3 = *(void **)(param_9 + 0x38);
      uVar4 = uVar4 + 8;
    }
  }
  return;
}



void screen_reinit(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  long lVar2;
  undefined4 uVar3;
  
  *(undefined8 *)(param_9 + 0x10) = 0;
  iVar1 = *(int *)(*(long *)(param_9 + 8) + 8);
  *(undefined4 *)(param_9 + 0x28) = 0;
  *(undefined4 *)(param_9 + 0x30) = 0x11;
  *(int *)(param_9 + 0x2c) = iVar1 + -1;
  uVar3 = screen_reset_tabs(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            param_10,param_11,param_12,param_13,param_14);
  lVar2 = *(long *)(param_9 + 8);
  grid_clear_lines(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                   (ulong)*(uint *)(lVar2 + 0xc),(ulong)*(uint *)(lVar2 + 8),param_12,param_13,
                   param_14);
  *(undefined4 *)(param_9 + 0x40) = 0;
  *(undefined4 *)(param_9 + 0x48) = 0;
  return;
}



void screen_init(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                undefined8 *param_9,undefined4 param_10,uint param_11,ulong param_12,
                undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  undefined4 *puVar2;
  undefined8 extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong uVar3;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined auVar4 [16];
  
  uVar3 = (ulong)param_11;
  puVar2 = grid_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                       uVar3,param_12 & 0xffffffff,param_12,param_13,param_14);
  param_9[1] = puVar2;
  uVar1 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,"",uVar3,extraout_RDX,param_12,param_13,param_14);
  *(undefined4 *)(param_9 + 3) = 0;
  *param_9 = extraout_RAX;
  auVar4 = xstrdup(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"",uVar3,
                   extraout_RDX_00,param_12,param_13,param_14);
  param_9[7] = 0;
  param_9[4] = auVar4._0_8_;
  screen_reinit(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,(long)param_9,uVar3,auVar4._8_8_,param_12,param_13,param_14)
  ;
  return;
}



void screen_set_cursor_style(long param_1,uint param_2)

{
  if (param_2 < 7) {
    *(uint *)(param_1 + 0x18) = param_2;
  }
  return;
}



void screen_set_cursor_colour
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  char *pcVar2;
  undefined8 extraout_XMM0_Qa;
  
  pcVar2 = param_10;
  free(*(void **)(param_9 + 0x20));
  uVar1 = xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                  pcVar2,extraout_RDX,param_12,param_13,param_14);
  *(undefined8 *)(param_9 + 0x20) = uVar1;
  return;
}



void screen_set_title(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     void **param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  void *pvVar1;
  undefined8 extraout_RDX;
  char *pcVar2;
  undefined8 extraout_XMM0_Qa;
  
  pcVar2 = param_10;
  free(*param_9);
  pvVar1 = (void *)xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           param_10,pcVar2,extraout_RDX,param_12,param_13,param_14);
  *param_9 = pvVar1;
  return;
}



void screen_resize_x(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                    undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  
  uVar1 = (uint)param_10;
  if (uVar1 != 0) {
    if (uVar1 <= *(uint *)(param_9 + 0x10)) {
      *(uint *)(param_9 + 0x10) = uVar1 - 1;
    }
    *(uint *)(*(long *)(param_9 + 8) + 4) = uVar1;
    return;
  }
                    // WARNING: Subroutine does not return
  fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"zero size",param_10,
         param_11,param_12,param_13,param_14,(char)*(long *)(param_9 + 8));
}



void screen_resize_y(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,
                    undefined8 param_13,undefined8 param_14)

{
  undefined (*pauVar1) [16];
  byte *pbVar2;
  int iVar3;
  long lVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  ulong uVar8;
  uint uVar9;
  uint uVar10;
  undefined1 in_stack_ffffffffffffffc8;
  
  pbVar2 = *(byte **)(param_9 + 8);
  uVar7 = (uint)param_10;
  if (uVar7 == 0) {
                    // WARNING: Subroutine does not return
    fatalx((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"zero size",param_10
           ,param_11,param_12,param_13,param_14,in_stack_ffffffffffffffc8);
  }
  uVar6 = *(uint *)(pbVar2 + 8);
  if (uVar7 < uVar6) {
    param_12 = (ulong)*(uint *)(param_9 + 0x14);
    uVar9 = uVar6 - uVar7;
    uVar10 = (uVar6 - *(uint *)(param_9 + 0x14)) - 1;
    if (uVar10 != 0) {
      if (uVar9 < uVar10) {
        uVar10 = uVar9;
      }
      uVar9 = uVar9 - uVar10;
      param_1 = grid_view_delete_lines
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)pbVar2,uVar6 - uVar10,uVar10,param_12,param_13,param_14);
      param_12 = (ulong)*(uint *)(param_9 + 0x14);
    }
    if ((*pbVar2 & 1) == 0) {
      if ((uVar9 != 0) && (uVar5 = (uint)param_12, uVar5 != 0)) {
        if (uVar9 <= uVar5) {
          uVar5 = uVar9;
        }
        param_1 = grid_view_delete_lines
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (long)pbVar2,0,uVar5,param_12,param_13,param_14);
        param_12 = (ulong)*(uint *)(param_9 + 0x14);
      }
      iVar3 = *(int *)(pbVar2 + 0xc);
    }
    else {
      iVar3 = *(int *)(pbVar2 + 0xc) + uVar9;
      *(int *)(pbVar2 + 0xc) = iVar3;
    }
    *(uint *)(param_9 + 0x14) = uVar10 + (uVar7 - uVar6) + (int)param_12;
  }
  else {
    iVar3 = *(int *)(pbVar2 + 0xc);
  }
  lVar4 = xreallocarray((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(undefined8 *)(pbVar2 + 0x18),(ulong)(uVar7 + iVar3),0x1c,param_12,param_13
                        ,param_14);
  *(long *)(pbVar2 + 0x18) = lVar4;
  if (uVar6 < uVar7) {
    uVar10 = *(uint *)(pbVar2 + 0xc);
    if ((uVar10 == 0) || ((*pbVar2 & 1) == 0)) {
      uVar9 = 0;
    }
    else {
      uVar9 = uVar7 - uVar6;
      if (uVar10 < uVar7 - uVar6) {
        uVar9 = uVar10;
      }
      uVar10 = uVar10 - uVar9;
      *(uint *)(pbVar2 + 0xc) = uVar10;
      *(int *)(param_9 + 0x14) = *(int *)(param_9 + 0x14) + uVar9;
    }
    uVar6 = uVar9 + uVar10 + uVar6;
    if (uVar6 < uVar10 + uVar7) {
      while( true ) {
        uVar8 = (ulong)uVar6;
        uVar6 = uVar6 + 1;
        pauVar1 = (undefined (*) [16])(lVar4 + uVar8 * 0x1c);
        *(undefined8 *)pauVar1[1] = 0;
        *(undefined4 *)(pauVar1[1] + 8) = 0;
        *pauVar1 = (undefined  [16])0x0;
        if (*(int *)(pbVar2 + 0xc) + uVar7 <= uVar6) break;
        lVar4 = *(long *)(pbVar2 + 0x18);
      }
    }
  }
  lVar4 = *(long *)(param_9 + 8);
  *(uint *)(pbVar2 + 8) = uVar7;
  *(undefined4 *)(param_9 + 0x28) = 0;
  *(int *)(param_9 + 0x2c) = *(int *)(lVar4 + 8) + -1;
  return;
}



void screen_set_selection
               (long param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 *param_7)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  
  uVar1 = param_7[1];
  uVar2 = param_7[2];
  uVar3 = param_7[3];
  *(undefined4 *)(param_1 + 0x60) = *param_7;
  *(undefined4 *)(param_1 + 100) = uVar1;
  *(undefined4 *)(param_1 + 0x68) = uVar2;
  *(undefined4 *)(param_1 + 0x6c) = uVar3;
  uVar1 = param_7[4];
  *(undefined4 *)(param_1 + 0x40) = 1;
  *(undefined4 *)(param_1 + 0x70) = uVar1;
  *(undefined4 *)(param_1 + 0x44) = param_6;
  *(undefined4 *)(param_1 + 0x50) = param_2;
  *(undefined4 *)(param_1 + 0x54) = param_3;
  *(undefined4 *)(param_1 + 0x58) = param_4;
  *(undefined4 *)(param_1 + 0x5c) = param_5;
  return;
}



void screen_clear_selection(long param_1)

{
  *(undefined4 *)(param_1 + 0x40) = 0;
  *(undefined4 *)(param_1 + 0x48) = 0;
  return;
}



bool screen_check_selection(long param_1,uint param_2,uint param_3)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  
  iVar2 = *(int *)(param_1 + 0x40);
  if (iVar2 == 0) goto LAB_00151002;
  uVar3 = *(uint *)(param_1 + 0x54);
  uVar1 = *(uint *)(param_1 + 0x5c);
  if (*(int *)(param_1 + 0x44) == 0) {
    iVar2 = 0;
    if (uVar3 < uVar1) {
      if ((uVar3 <= param_3) && (param_3 <= uVar1)) {
        if (param_3 == uVar3) {
          return *(uint *)(param_1 + 0x50) <= param_2;
        }
        iVar2 = 1;
        if (param_3 == uVar1) {
          return param_2 <= *(uint *)(param_1 + 0x58);
        }
      }
      goto LAB_00151002;
    }
    if (uVar1 < uVar3) {
      if (((param_3 <= uVar3) && (uVar1 <= param_3)) &&
         ((param_3 != uVar1 || (*(uint *)(param_1 + 0x58) <= param_2)))) {
        return param_2 <= *(int *)(param_1 + 0x50) - (uint)(*(int *)(param_1 + 0x4c) == 0) ||
               param_3 != uVar3;
      }
      goto LAB_00151002;
    }
    if (param_3 != uVar3) goto LAB_00151002;
    uVar3 = *(uint *)(param_1 + 0x58);
    uVar1 = *(uint *)(param_1 + 0x50);
    if (uVar3 < uVar1) {
      return param_2 <= uVar1 - (*(int *)(param_1 + 0x4c) == 0) && uVar3 <= param_2;
    }
    goto LAB_001510b2;
  }
  if (uVar3 < uVar1) {
    if ((param_3 < uVar3) || (uVar1 < param_3)) {
LAB_00151000:
      iVar2 = 0;
LAB_00151002:
      return SUB41(iVar2,0);
    }
  }
  else if (uVar1 < uVar3) {
    if ((uVar3 < param_3) || (param_3 < uVar1)) goto LAB_00151000;
  }
  else if (param_3 != uVar3) {
    return false;
  }
  uVar3 = *(uint *)(param_1 + 0x58);
  uVar1 = *(uint *)(param_1 + 0x50);
  if (uVar3 < uVar1) {
    return uVar3 <= param_2 && param_2 <= uVar1;
  }
LAB_001510b2:
  return uVar1 <= param_2 && param_2 <= uVar3;
}



void screen_reflow(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,uint param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  void *pvVar1;
  uint uVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined4 extraout_XMM0_Da;
  
  pvVar1 = *(void **)(param_9 + 8);
  puVar4 = grid_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       *(undefined4 *)((long)pvVar1 + 4),(ulong)*(uint *)((long)pvVar1 + 8),
                       (ulong)*(uint *)((long)pvVar1 + 0x10),param_12,param_13,param_14);
  *(undefined4 **)(param_9 + 8) = puVar4;
  uVar2 = grid_reflow(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      (long)puVar4,pvVar1,param_10,param_12,param_13,param_14);
  iVar3 = 0;
  if (uVar2 < *(uint *)(param_9 + 0x14)) {
    iVar3 = *(uint *)(param_9 + 0x14) - uVar2;
  }
  *(int *)(param_9 + 0x14) = iVar3;
  return;
}



void screen_resize(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,uint param_10,ulong param_11,ulong param_12,undefined8 param_13,
                  undefined8 param_14)

{
  long lVar1;
  int iVar2;
  ulong extraout_RDX;
  ulong extraout_RDX_00;
  uint uVar3;
  ulong uVar4;
  uint uVar5;
  undefined4 uVar6;
  
  iVar2 = (int)param_12;
  lVar1 = *(long *)(param_9 + 8);
  uVar4 = (ulong)param_10;
  if (param_10 == 0) {
    uVar4 = 1;
  }
  uVar5 = 1;
  if ((uint)param_11 != 0) {
    uVar5 = (uint)param_11;
  }
  uVar3 = (uint)uVar4;
  if (*(uint *)(lVar1 + 4) != uVar3) {
    if (uVar3 <= *(uint *)(param_9 + 0x10)) {
      param_11 = (ulong)(uVar3 - 1);
      *(uint *)(param_9 + 0x10) = uVar3 - 1;
    }
    *(uint *)(lVar1 + 4) = uVar3;
    param_1 = screen_reset_tabs(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                param_9,uVar4,param_11,param_12,param_13,param_14);
    lVar1 = *(long *)(param_9 + 8);
    param_11 = extraout_RDX;
  }
  uVar6 = (undefined4)param_1;
  if (*(uint *)(lVar1 + 8) != uVar5) {
    uVar6 = screen_resize_y(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            (ulong)uVar5,param_11,param_12,param_13,param_14);
    param_11 = extraout_RDX_00;
  }
  if (iVar2 == 0) {
    return;
  }
  screen_reflow(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar3,param_11
                ,param_12,param_13,param_14);
  return;
}



void server_client_free(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,undefined8 param_10,void *param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  undefined1 unaff_BPL;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "free client %p (%d references)",param_11,(ulong)*(uint *)((long)param_11 + 0x5b8),
           param_13,param_14,unaff_BPL);
  if (*(int *)((long)param_11 + 0x5b8) != 0) {
    return;
  }
  free(param_11);
  return;
}



void FUN_00151210(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined uVar2;
  int iVar3;
  undefined8 extraout_RDX;
  undefined8 uVar4;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  
  uVar4 = 0x5414;
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = (undefined)*(undefined4 *)(param_9 + 0x24);
  iVar3 = ioctl(*(int *)(param_9 + 0x78),0x5414,&stack0xffffffffffffffe8);
  if (iVar3 == -1) {
                    // WARNING: Subroutine does not return
    fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"ioctl failed",
          uVar4,extraout_RDX,param_12,param_13,param_14,uVar2);
  }
  *(uint *)(param_9 + 0x30) = *(uint *)(param_9 + 0x30) & 0xfffffff7;
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 server_client_check_nested(long param_1)

{
  int iVar1;
  long lVar2;
  
  if (*(long *)(param_1 + 0xe8) == 0) {
    return 0;
  }
  lVar2 = environ_find(*(char ***)(param_1 + 0xb8),"TMUX");
  if ((lVar2 != 0) && (**(char **)(lVar2 + 8) != '\0')) {
    for (lVar2 = window_pane_tree_RB_MINMAX(&all_window_panes,-1); lVar2 != 0;
        lVar2 = window_pane_tree_RB_NEXT(lVar2)) {
      iVar1 = strcmp((char *)(lVar2 + 0x54),*(char **)(param_1 + 0xe8));
      if (iVar1 == 0) {
        return 1;
      }
    }
  }
  return 0;
}



char * server_client_get_key_table
                 (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  
  if (*(long *)(param_9 + 0x598) == 0) {
    return "root";
  }
  pcVar1 = options_get_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(*(long *)(param_9 + 0x598) + 0x108),"key-table",param_11,
                              param_12,param_13,param_14);
  if (*pcVar1 != '\0') {
    return pcVar1;
  }
  return "root";
}



void server_client_set_key_table
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  char **ppcVar1;
  undefined8 extraout_RDX;
  undefined8 uVar2;
  
  if (param_10 == (char *)0x0) {
    param_10 = server_client_get_key_table
                         (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
                          param_11,param_12,param_13,param_14);
  }
  uVar2 = key_bindings_unref_table(*(void ***)(param_9 + 0x428));
  ppcVar1 = key_bindings_get_table
                      (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,1,
                       extraout_RDX,param_12,param_13,param_14);
  *(char ***)(param_9 + 0x428) = ppcVar1;
  *(int *)(ppcVar1 + 2) = *(int *)(ppcVar1 + 2) + 1;
  return;
}



void server_client_repeat_timer
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,long param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  if ((*(byte *)(param_11 + 0x420) & 0x20) == 0) {
    return;
  }
  server_client_set_key_table
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,(char *)0x0,
             param_11,param_12,param_13,param_14);
  *(uint *)(param_11 + 0x420) = *(uint *)(param_11 + 0x420) & 0xffffffdf;
  server_status_client(param_11);
  return;
}



void server_client_create
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  undefined8 *puVar2;
  undefined8 *puVar3;
  undefined8 *puVar4;
  undefined8 uVar5;
  char **ppcVar6;
  undefined8 uVar7;
  code *pcVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  timeval *__tv;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined auVar10 [16];
  undefined1 in_stack_00000008;
  undefined in_stack_ffffffffffffffe8;
  
  uVar9 = setblocking(param_9,0);
  puVar2 = (undefined8 *)
           xcalloc(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x5d0,
                   extraout_RDX,param_12,param_13,param_14);
  uVar5 = server_proc;
  *(undefined4 *)(puVar2 + 0xb7) = 1;
  puVar4 = puVar2;
  puVar3 = proc_add_peer(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         uVar5,param_9,server_client_dispatch,puVar2,param_13,param_14);
  uVar5 = 0;
  __tv = (timeval *)(puVar2 + 0x13);
  *puVar2 = puVar3;
  iVar1 = gettimeofday(__tv,(__timezone_ptr_t)0x0);
  if (iVar1 == 0) {
    *(undefined4 *)(puVar2 + 0x15) = *(undefined4 *)(puVar2 + 0x13);
    *(undefined4 *)((long)puVar2 + 0xac) = *(undefined4 *)((long)puVar2 + 0x9c);
    *(undefined4 *)(puVar2 + 0x16) = *(undefined4 *)(puVar2 + 0x14);
    *(undefined4 *)((long)puVar2 + 0xb4) = *(undefined4 *)((long)puVar2 + 0xa4);
    auVar10 = environ_create(*(undefined4 *)(puVar2 + 0x13),param_2,param_3,param_4,param_5,param_6,
                             param_7,param_8,__tv,uVar5,extraout_RDX_00,puVar4,param_13,param_14);
    *(undefined4 *)((long)puVar2 + 0xc) = 0xffffffff;
    puVar2[0x17] = auVar10._0_8_;
    puVar2[0x19] = 0;
    puVar4 = cmdq_new(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      puVar2,uVar5,auVar10._8_8_,puVar4,param_13,param_14);
    puVar2[0xb6] = puVar4;
    *(undefined4 *)(puVar4 + 2) = 1;
    uVar5 = evbuffer_new();
    puVar2[0x51] = uVar5;
    uVar5 = evbuffer_new();
    puVar2[0x53] = uVar5;
    uVar5 = evbuffer_new();
    uVar7 = 0;
    *(undefined4 *)(puVar2 + 0x26) = 0xffffffff;
    puVar2[0x54] = uVar5;
    puVar2[0x1e] = 0x1800000050;
    puVar2[0x18] = 0;
    puVar2[0xb3] = 0;
    puVar2[0xb4] = 0;
    uVar5 = screen_init(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        puVar2 + 0x75,0x50,1,0,param_13,param_14);
    *(uint *)(puVar2 + 0x84) = *(uint *)(puVar2 + 0x84) | 0x8000;
    puVar2[0xa9] = puVar2 + 0xa8;
    puVar2[0x96] = 0;
    puVar2[0xa8] = 0;
    puVar2[0xaa] = 0;
    puVar2[0xab] = 0;
    puVar2[0xac] = 0;
    ppcVar6 = key_bindings_get_table
                        (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"root",1,
                         extraout_RDX_01,uVar7,param_13,param_14);
    puVar2[0x85] = ppcVar6;
    pcVar8 = server_client_repeat_timer;
    *(int *)(ppcVar6 + 2) = *(int *)(ppcVar6 + 2) + 1;
    puVar4 = puVar2;
    uVar9 = event_set(puVar2 + 0x55,0xffffffff,0);
    puVar2[0xb8] = 0;
    puVar2[0xb9] = DAT_001a3fe8;
    *DAT_001a3fe8 = (long)puVar2;
    DAT_001a3fe8 = puVar2 + 0xb8;
    log_emit(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"new client %p",puVar2,
             pcVar8,puVar4,param_14,in_stack_00000008);
    return;
  }
                    // WARNING: Subroutine does not return
  fatal(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
        "gettimeofday failed",uVar5,extraout_RDX_00,puVar4,param_13,param_14,
        in_stack_ffffffffffffffe8);
}



int server_client_open(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,long *param_10)

{
  undefined8 uVar1;
  long lVar2;
  char **ppcVar3;
  byte *pbVar4;
  byte *pbVar5;
  byte *pbVar6;
  uint uVar7;
  int *in_R9;
  bool bVar8;
  bool bVar9;
  
  uVar7 = *(uint *)(param_9 + 0x420);
  bVar8 = false;
  bVar9 = (uVar7 & 0x2000) == 0;
  if (!bVar9) {
    return 0;
  }
  ppcVar3 = (char **)0x9;
  pbVar4 = *(byte **)(param_9 + 0xd8);
  pbVar6 = (byte *)0x17f733;
  do {
    pbVar5 = pbVar4;
    if (ppcVar3 == (char **)0x0) break;
    ppcVar3 = (char **)((long)ppcVar3 + -1);
    pbVar5 = pbVar4 + 1;
    bVar8 = *pbVar4 < *pbVar6;
    bVar9 = *pbVar4 == *pbVar6;
    pbVar4 = pbVar5;
    pbVar6 = pbVar6 + 1;
  } while (bVar9);
  if ((!bVar8 && !bVar9) == bVar8) {
    lVar2 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    "can\'t use /dev/tty",pbVar5,param_9,ppcVar3,(ulong)uVar7,in_R9);
    *param_10 = lVar2;
    return -1;
  }
  uVar7 = uVar7 & 1;
  if (uVar7 != 0) {
    uVar1 = tty_open((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9 + 0xe0,param_10,param_9,ppcVar3,(byte *)(ulong)uVar7,in_R9);
    return -(uint)((int)uVar1 != 0);
  }
  lVar2 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"not a terminal",
                  pbVar5,param_9,ppcVar3,(byte *)(ulong)uVar7,in_R9);
  *param_10 = lVar2;
  return -1;
}



void server_client_unref(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9)

{
  int *piVar1;
  undefined8 in_R8;
  undefined8 in_R9;
  undefined1 unaff_R12B;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "unref client %p (%d references)",param_9,(ulong)*(uint *)(param_9 + 0x5b8),in_R8,in_R9,
           unaff_R12B);
  piVar1 = (int *)(param_9 + 0x5b8);
  *piVar1 = *piVar1 + -1;
  if (*piVar1 != 0) {
    return;
  }
  event_once(0xffffffff,1,server_client_free,param_9,0);
  return;
}



void server_client_lost(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       void **param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                       long param_13,undefined8 param_14)

{
  uint *puVar1;
  void *pvVar2;
  undefined8 *puVar3;
  int *piVar4;
  undefined8 uVar5;
  int iVar6;
  void **ppvVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined unaff_BL;
  void **ppvVar8;
  char *pcVar9;
  undefined4 uVar10;
  
  *(uint *)(param_9 + 0x84) = *(uint *)(param_9 + 0x84) | 0x200;
  uVar5 = status_prompt_clear(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (long)param_9,param_10,param_11,param_12,param_13,param_14);
  uVar10 = status_message_clear
                     (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                      param_10,extraout_RDX,param_12,param_13,param_14);
  if ((code *)param_9[0x4f] != (code *)0x0) {
    uVar10 = (*(code *)param_9[0x4f])(param_9,1,param_9[0x50]);
  }
  pvVar2 = param_9[0xb8];
  ppvVar7 = (void **)param_9[0xb9];
  ppvVar8 = ppvVar7;
  if (pvVar2 != (void *)0x0) {
    *(void ***)((long)pvVar2 + 0x5c8) = ppvVar7;
    ppvVar7 = (void **)param_9[0xb9];
    ppvVar8 = DAT_001a3fe8;
  }
  DAT_001a3fe8 = ppvVar8;
  *ppvVar7 = pvVar2;
  pcVar9 = "lost client %p";
  uVar5 = log_emit(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"lost client %p"
                   ,param_9,param_12,param_13,param_14,unaff_BL);
  if ((*(byte *)(param_9 + 0x84) & 1) != 0) {
    tty_free(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)(param_9 + 0x1c));
  }
  free(param_9[0x1b]);
  free(param_9[0x1a]);
  evbuffer_free(param_9[0x51]);
  evbuffer_free(param_9[0x53]);
  if (param_9[0x54] != param_9[0x53]) {
    evbuffer_free();
  }
  iVar6 = event_initialized(param_9 + 0x65);
  if (iVar6 != 0) {
    event_del(param_9 + 0x65);
  }
  screen_free(param_9 + 0x75);
  free(param_9[0x18]);
  free(param_9[0x19]);
  event_del(param_9 + 0x55);
  key_bindings_unref_table((void **)param_9[0x85]);
  iVar6 = event_initialized(param_9 + 0x86);
  if (iVar6 != 0) {
    event_del(param_9 + 0x86);
  }
  free(param_9[0x96]);
  iVar6 = event_initialized(param_9 + 0x97);
  if (iVar6 != 0) {
    event_del(param_9 + 0x97);
  }
  ppvVar7 = (void **)param_9[0xa8];
  while (ppvVar8 = ppvVar7, ppvVar7 != (void **)0x0) {
    while( true ) {
      ppvVar7 = (void **)ppvVar8[3];
      free(*ppvVar8);
      pvVar2 = ppvVar8[3];
      if (pvVar2 != (void *)0x0) break;
      puVar3 = (undefined8 *)ppvVar8[4];
      param_9[0xa9] = puVar3;
      *puVar3 = 0;
      free(ppvVar8);
      ppvVar8 = ppvVar7;
      if (ppvVar7 == (void **)0x0) goto LAB_001518f9;
    }
    *(void **)((long)pvVar2 + 0x20) = ppvVar8[4];
    *(void **)ppvVar8[4] = pvVar2;
    free(ppvVar8);
  }
LAB_001518f9:
  free(param_9[0xaa]);
  free(param_9[0xab]);
  piVar4 = (int *)param_9[0xb6];
  puVar1 = (uint *)(piVar4 + 1);
  *puVar1 = *puVar1 | 1;
  cmdq_free(piVar4);
  param_9[0xb6] = (void *)0x0;
  uVar10 = environ_free((long *)param_9[0x17]);
  uVar10 = proc_remove_peer(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,
                            pcVar9,extraout_RDX_00,param_12,param_13,param_14);
  *param_9 = (void *)0x0;
  server_client_unref(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9);
  uVar5 = server_add_accept(0);
  uVar5 = recalculate_sizes(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  server_check_unattached(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  server_update_socket();
  return;
}



void server_client_detach
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,uint param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  char *pcVar2;
  undefined1 unaff_BL;
  undefined8 extraout_XMM0_Qa;
  
  lVar1 = param_9[0xb3];
  if (lVar1 != 0) {
    pcVar2 = "client-detached";
    hooks_run(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              *(char ***)(lVar1 + 0x100),param_9,0,"client-detached",param_13,param_14,unaff_BL);
    proc_send_s(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,
                param_10,*(char **)(lVar1 + 8),pcVar2,param_13,param_14);
    return;
  }
  return;
}



ulong server_client_check_mouse
                (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9)

{
  uint uVar1;
  ulong uVar2;
  uint *puVar3;
  undefined4 *puVar4;
  ulong uVar5;
  uint uVar6;
  int iVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar8;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  int iVar9;
  char *pcVar10;
  uint uVar11;
  ulong uVar12;
  long lVar13;
  int iVar14;
  uint uVar15;
  uint uVar16;
  undefined4 uVar17;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined8 uVar18;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffb8;
  
  puVar4 = *(undefined4 **)(param_9 + 0x598);
  uVar12 = (ulong)*(uint *)(param_9 + 0x1b8);
  uVar2 = (ulong)*(uint *)(param_9 + 0x1b0);
  uVar17 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                    "mouse %02x at %u,%u (last %u,%u) (%d)",(ulong)*(uint *)(param_9 + 0x1b4),
                    (ulong)*(uint *)(param_9 + 0x1ac),uVar2,uVar12,
                    (char)*(undefined4 *)(param_9 + 0x1bc));
  uVar16 = *(uint *)(param_9 + 0x1b4);
  if ((uVar16 & 0x20) == 0) {
    uVar6 = *(uint *)(param_9 + 0x1ac);
    uVar15 = *(uint *)(param_9 + 0x1b0);
    if ((uVar16 & 0x40) == 0) {
      if ((uVar16 & 3) == 3) {
        uVar5 = (ulong)uVar15;
        pcVar10 = "up at %u,%u";
        uVar16 = *(uint *)(param_9 + 0x1c0);
        iVar14 = 2;
        uVar18 = log_emit(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                          "up at %u,%u",(ulong)uVar6,uVar5,uVar2,uVar12,in_stack_ffffffffffffffb8);
        uVar8 = extraout_RDX_04;
      }
      else {
        uVar5 = (ulong)uVar15;
        pcVar10 = "down at %u,%u";
        iVar14 = 1;
        uVar18 = log_emit(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                          "down at %u,%u",(ulong)uVar6,uVar5,uVar2,uVar12,in_stack_ffffffffffffffb8)
        ;
        uVar8 = extraout_RDX_00;
      }
    }
    else {
      uVar5 = (ulong)uVar15;
      pcVar10 = "wheel at %u,%u";
      iVar14 = 4;
      uVar18 = log_emit(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                        "wheel at %u,%u",(ulong)uVar6,uVar5,uVar2,uVar12,in_stack_ffffffffffffffb8);
      uVar8 = extraout_RDX_03;
    }
  }
  else if (*(int *)(param_9 + 0x1d8) == 0) {
    uVar6 = *(uint *)(param_9 + 0x1b8);
    uVar15 = *(uint *)(param_9 + 0x1bc);
    pcVar10 = "drag start at %u,%u";
    uVar16 = *(uint *)(param_9 + 0x1c0);
    iVar14 = 3;
    uVar5 = (ulong)uVar15;
    uVar18 = log_emit(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                      "drag start at %u,%u",(ulong)uVar6,uVar5,uVar2,uVar12,
                      in_stack_ffffffffffffffb8);
    uVar8 = extraout_RDX_02;
  }
  else {
    uVar6 = *(uint *)(param_9 + 0x1ac);
    uVar15 = *(uint *)(param_9 + 0x1b0);
    pcVar10 = "drag update at %u,%u";
    iVar14 = 3;
    uVar5 = (ulong)uVar15;
    uVar18 = log_emit(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                      "drag update at %u,%u",(ulong)uVar6,uVar5,uVar2,uVar12,
                      in_stack_ffffffffffffffb8);
    uVar8 = extraout_RDX;
  }
  *(undefined4 *)(param_9 + 0x1c4) = *puVar4;
  uVar1 = status_at_line(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         pcVar10,uVar8,uVar5,uVar2,uVar12);
  *(uint *)(param_9 + 0x1a8) = uVar1;
  if (uVar1 == 0xffffffff) {
    *(undefined4 *)(param_9 + 0x1c8) = 0xffffffff;
LAB_00151b6a:
    lVar13 = *(long *)(*(long *)(puVar4 + 0x38) + 8);
    puVar3 = *(uint **)(lVar13 + 0x148);
    if (puVar3 != (uint *)0x0) {
      do {
        while( true ) {
          uVar1 = puVar3[8] + puVar3[10];
          uVar11 = puVar3[9] + puVar3[0xb];
          if ((uVar1 != uVar6) || (uVar15 + 1 < puVar3[0xb])) break;
          if (uVar15 <= uVar11) {
LAB_00151bc7:
            iVar9 = 3;
            goto LAB_00151bcc;
          }
LAB_00151b99:
          puVar3 = *(uint **)(puVar3 + 0x7e);
          if (puVar3 == (uint *)0x0) goto LAB_00151cf8;
        }
        if ((uVar15 != uVar11) || (uVar6 + 1 < puVar3[10])) goto LAB_00151b99;
        if (uVar6 <= uVar1) goto LAB_00151bc7;
        puVar3 = *(uint **)(puVar3 + 0x7e);
      } while (puVar3 != (uint *)0x0);
    }
LAB_00151cf8:
    puVar3 = (uint *)window_get_active_at(lVar13,uVar6,uVar15);
    if (puVar3 == (uint *)0x0) {
      return 0xfffe00000000;
    }
    iVar9 = 1;
    log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "mouse at %u,%u is on pane %%%u",(ulong)uVar6,(ulong)uVar15,(ulong)*puVar3,lVar13,
             in_stack_ffffffffffffffb8);
LAB_00151bcc:
    *(uint *)(param_9 + 0x1cc) = *puVar3;
    *(undefined4 *)(param_9 + 0x1c8) = **(undefined4 **)(puVar3 + 2);
  }
  else {
    if (uVar1 != uVar15) {
      *(undefined4 *)(param_9 + 0x1c8) = 0xffffffff;
      if (uVar1 == 0) {
        uVar15 = (uVar15 - 1) + (uint)(uVar15 == 0);
      }
      else if ((0 < (int)uVar1) && (uVar1 <= uVar15)) {
        uVar15 = uVar1 - 1;
      }
      goto LAB_00151b6a;
    }
    puVar4 = (undefined4 *)
             status_get_window_at
                       (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                        param_6,param_7,param_8,param_9,uVar6,extraout_RDX_01,uVar5,uVar2,uVar12);
    if (puVar4 == (undefined4 *)0x0) {
      return 0xfffe00000000;
    }
    uVar17 = *puVar4;
    iVar9 = 2;
    *(undefined4 *)(param_9 + 0x1cc) = 0xffffffff;
    *(undefined4 *)(param_9 + 0x1c8) = uVar17;
  }
  if (iVar14 == 3) {
    uVar6 = uVar16 & 3;
    if (*(code **)(param_9 + 0x1e0) != (code *)0x0) {
      (**(code **)(param_9 + 0x1e0))(param_9,param_9 + 0x198);
LAB_00151f18:
      *(uint *)(param_9 + 0x1d8) = uVar6 + 1;
      return 0xfffe00000000;
    }
    if (uVar6 == 1) {
      *(undefined4 *)(param_9 + 0x1d8) = 2;
      uVar2 = 0x100000000018;
      if ((iVar9 != 1) && (uVar2 = 0x100000000019, iVar9 != 2)) {
        uVar2 = 0x10000000001a;
      }
    }
    else if (uVar6 == 2) {
      *(undefined4 *)(param_9 + 0x1d8) = 3;
      uVar2 = 0x10000000001b;
      if ((iVar9 != 1) && (uVar2 = 0x10000000001c, iVar9 != 2)) {
        uVar2 = 0x10000000001d;
      }
    }
    else {
      if (uVar6 != 0) goto LAB_00151f18;
      *(undefined4 *)(param_9 + 0x1d8) = 1;
      uVar2 = 0x100000000015;
      if ((iVar9 != 1) && (uVar2 = 0x100000000016, iVar9 != 2)) {
        uVar2 = 0x100000000017;
      }
    }
  }
  else {
    iVar7 = *(int *)(param_9 + 0x1d8);
    if (iVar7 != 0) {
      if (*(code **)(param_9 + 0x1e8) != (code *)0x0) {
        (**(code **)(param_9 + 0x1e8))(param_9,param_9 + 0x198);
        iVar7 = *(int *)(param_9 + 0x1d8);
      }
      *(undefined8 *)(param_9 + 0x1e0) = 0;
      *(undefined8 *)(param_9 + 0x1e8) = 0;
      if (iVar7 == 2) {
        uVar2 = 0x100000000022;
        if ((iVar9 != 2) && (uVar2 = 0x100000000021, iVar9 == 3)) {
          uVar2 = 0x100000000023;
        }
      }
      else if (iVar7 == 3) {
        uVar2 = 0x100000000025;
        if ((iVar9 != 2) && (uVar2 = 0x100000000024, iVar9 == 3)) {
          uVar2 = 0x100000000026;
        }
      }
      else {
        uVar2 = 0x100000000002;
        if (((iVar7 == 1) && (uVar2 = 0x10000000001f, iVar9 != 2)) &&
           (uVar2 = 0x10000000001e, iVar9 == 3)) {
          uVar2 = 0x100000000020;
        }
      }
      *(undefined4 *)(param_9 + 0x1d8) = 0;
      return uVar2;
    }
    uVar6 = uVar16 & 3;
    if (iVar14 == 4) {
      if (uVar6 == 0) {
        uVar2 = 0x100000000027;
        if (iVar9 != 1) {
          uVar2 = (ulong)(iVar9 != 2) + 0x100000000028;
        }
      }
      else {
        uVar2 = 0x10000000002a;
        if (iVar9 != 1) {
          uVar2 = (ulong)(iVar9 != 2) + 0x10000000002b;
        }
      }
    }
    else if (iVar14 == 2) {
      if (uVar6 == 1) {
        uVar2 = 0x10000000000f;
        if (iVar9 != 1) {
          uVar2 = (ulong)(iVar9 != 2) + 0x100000000010;
        }
      }
      else if (uVar6 == 2) {
        uVar2 = 0x100000000012;
        if (iVar9 != 1) {
          uVar2 = (ulong)(iVar9 != 2) + 0x100000000013;
        }
      }
      else {
        if (uVar6 != 0) {
          return 0xfffe00000000;
        }
        uVar2 = 0x10000000000c;
        if (iVar9 != 1) {
          uVar2 = (ulong)(iVar9 != 2) + 0x10000000000d;
        }
      }
    }
    else if (uVar6 == 1) {
      uVar2 = 0x100000000006;
      if (iVar9 != 1) {
        uVar2 = (ulong)(iVar9 != 2) + 0x100000000007;
      }
    }
    else if (uVar6 == 2) {
      uVar2 = 0x100000000009;
      if (iVar9 != 1) {
        uVar2 = (ulong)(iVar9 != 2) + 0x10000000000a;
      }
    }
    else {
      if (uVar6 != 0) {
        return 0xfffe00000000;
      }
      uVar2 = 0x100000000003;
      if (iVar9 != 1) {
        uVar2 = (ulong)(iVar9 != 2) + 0x100000000004;
      }
    }
  }
  if ((uVar16 & 8) != 0) {
    uVar2 = uVar2 | 0x200000000000;
  }
  if ((uVar16 & 0x10) != 0) {
    uVar2 = uVar2 | 0x400000000000;
  }
  if ((uVar16 & 4) == 0) {
    return uVar2;
  }
  return uVar2 | 0x800000000000;
}



ulong server_client_assume_paste
                (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  char *pcVar2;
  long lVar3;
  long lVar4;
  undefined unaff_BL;
  uint uVar5;
  ulong uVar6;
  undefined4 extraout_XMM0_Da;
  
  pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(param_9 + 0x108),"assume-paste-time",param_11,param_12,
                              param_13,param_14);
  uVar6 = (ulong)pcVar2 & 0xffffffff;
  if ((int)pcVar2 != 0) {
    lVar3 = *(long *)(param_9 + 0x38) - *(long *)(param_9 + 0x48);
    lVar4 = *(long *)(param_9 + 0x40) - *(long *)(param_9 + 0x50);
    if (lVar4 < 0) {
      lVar3 = lVar3 + -1;
      uVar1 = *(undefined8 *)(param_9 + 8);
      lVar4 = lVar4 + 1000000;
    }
    else {
      uVar1 = *(undefined8 *)(param_9 + 8);
    }
    if ((lVar3 == 0) && (lVar4 < (int)pcVar2 * 1000)) {
      log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "session %s pasting (flag %d)",uVar1,(ulong)(*(uint *)(param_9 + 0x110) >> 1 & 1),
               uVar1,param_14,unaff_BL);
      uVar5 = *(uint *)(param_9 + 0x110) & 2;
      uVar6 = (ulong)uVar5;
      if (uVar5 == 0) {
        *(uint *)(param_9 + 0x110) = *(uint *)(param_9 + 0x110) | 2;
      }
      else {
        uVar6 = 1;
      }
    }
    else {
      log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "session %s not pasting",uVar1,lVar3,uVar1,param_14,unaff_BL);
      *(uint *)(param_9 + 0x110) = *(uint *)(param_9 + 0x110) & 0xfffffffd;
      uVar6 = 0;
    }
  }
  return uVar6;
}



void server_client_handle_key
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,char *param_12,ulong param_13,
               undefined8 param_14)

{
  int *piVar1;
  void **ppvVar2;
  long lVar3;
  void **ppvVar4;
  bool bVar5;
  int iVar6;
  long extraout_RAX;
  undefined7 extraout_var;
  long lVar7;
  char *pcVar8;
  uint *puVar9;
  char *pcVar10;
  ulong uVar11;
  uint uVar12;
  uint uVar13;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  char **ppcVar14;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined8 uVar16;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 uVar17;
  undefined auVar18 [16];
  undefined in_stack_ffffffffffffff68;
  char *local_88;
  long local_80;
  char *local_78 [7];
  long local_40;
  
  lVar3 = *(long *)(param_9 + 0x598);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((lVar3 == 0) || ((*(uint *)(param_9 + 0x420) & 0x240) != 0)) goto LAB_0015226d;
  pcVar8 = (char *)(param_9 + 0xa8);
  uVar16 = 0;
  puVar9 = *(uint **)(*(long *)(lVar3 + 0xe0) + 8);
  iVar6 = gettimeofday((timeval *)pcVar8,(__timezone_ptr_t)0x0);
  if (iVar6 != 0) {
                    // WARNING: Subroutine does not return
    fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
          "gettimeofday failed",uVar16,extraout_RDX,param_12,param_13,param_14,
          in_stack_ffffffffffffff68);
  }
  uVar16 = session_update_activity(lVar3);
  uVar13 = *(uint *)(param_9 + 0x420);
  uVar12 = uVar13 & 0x800;
  if (((uVar13 & 0x100) != 0) && (param_12 = param_10 + -0x30, param_12 < (char *)0xa)) {
    if (uVar12 == 0) {
      window_unzoom(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar9,pcVar8,
                    (ulong)uVar12,param_12,param_13,param_14);
      window_pane_at_index
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,(long)puVar9,(int)param_10 - 0x30,extraout_RDX_00,param_12,
                 param_13,param_14);
      if ((extraout_RAX != 0) &&
         (bVar5 = window_pane_visible(extraout_RAX), (int)CONCAT71(extraout_var,bVar5) != 0)) {
        window_set_active_pane((long)puVar9,extraout_RAX);
      }
      server_clear_identify(param_9);
    }
    goto LAB_0015226d;
  }
  if (uVar12 == 0) {
    if ((uVar13 & 0x800000) == 0) {
      status_message_clear
                (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,pcVar8,
                 (ulong)uVar12,param_12,param_13,param_14);
    }
    uVar16 = server_clear_identify(param_9);
    if (*(long *)(param_9 + 0x550) != 0) {
      if ((*(byte *)(param_9 + 0x421) & 8) == 0) {
        status_prompt_key(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          (ulong)param_10,extraout_RDX_04,(long)param_12,param_13,param_14);
      }
      goto LAB_0015226d;
    }
  }
  else if (*(long *)(param_9 + 0x550) != 0) goto LAB_0015226d;
  piVar1 = (int *)(param_9 + 0x198);
  if (param_10 == (char *)0x100000000002) {
    if (((*(byte *)(param_9 + 0x421) & 8) != 0) ||
       (param_10 = (char *)server_client_check_mouse
                                     ((int)uVar16,param_2,param_3,param_4,param_5,param_6,param_7,
                                      param_8,param_9), param_10 == (char *)0xfffe00000000))
    goto LAB_0015226d;
    *(char **)(param_9 + 0x1a0) = param_10;
    ppcVar14 = *(char ***)(lVar3 + 0x108);
    pcVar8 = "mouse";
    *(undefined4 *)(param_9 + 0x198) = 1;
    pcVar10 = options_get_number(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_07),param_2,param_3,
                                 param_4,param_5,param_6,param_7,param_8,ppcVar14,"mouse",
                                 extraout_RDX_05,param_12,param_13,param_14);
    uVar16 = CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_08);
    uVar15 = extraout_XMM0_Da_08;
    if (pcVar10 == (char *)0x0) goto LAB_00152444;
  }
  else {
    *(undefined4 *)(param_9 + 0x198) = 0;
  }
  if ((((ulong)param_10 & 0xffff1fffffffffff) - 0x100000000002 < 0x2b) ||
     (uVar11 = server_client_assume_paste
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,
                          pcVar8,0xffffeffffffffffe,param_12,param_13,param_14), (int)uVar11 == 0))
  {
    do {
      ppcVar14 = local_78;
      local_78[0] = param_10;
      auVar18 = key_bindings_RB_FIND((ulong **)(*(long *)(param_9 + 0x428) + 8),(ulong *)local_78);
      uVar16 = auVar18._8_8_;
      lVar7 = auVar18._0_8_;
      if (lVar7 == 0) {
        if ((*(byte *)(param_9 + 0x420) & 0x20) == 0) goto code_r0x001523ea;
      }
      else if (((*(byte *)(param_9 + 0x420) & 0x20) == 0) || (*(int *)(lVar7 + 0x10) != 0)) {
        ppvVar4 = *(void ***)(param_9 + 0x428);
        ppcVar14 = *(char ***)(lVar3 + 0x108);
        ppvVar2 = ppvVar4 + 2;
        *(int *)ppvVar2 = *(int *)ppvVar2 + 1;
        pcVar8 = options_get_number(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,ppcVar14,
                                    "repeat-time",uVar16,param_12,param_13,param_14);
        iVar6 = (int)pcVar8;
        if ((iVar6 == 0) ||
           (param_12 = (char *)(ulong)*(uint *)(lVar7 + 0x10), *(uint *)(lVar7 + 0x10) == 0)) {
          uVar13 = *(uint *)(param_9 + 0x420) & 0xffffffdf;
          *(uint *)(param_9 + 0x420) = uVar13;
          server_client_set_key_table
                    (CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_06),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_9,(char *)0x0,(ulong)uVar13,param_12,
                     param_13,param_14);
        }
        else {
          *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x20;
          param_12 = (char *)(long)(iVar6 / 1000);
          local_80 = (long)(iVar6 % 1000) * 1000;
          local_88 = param_12;
          event_del(param_9 + 0x2a8);
          event_add(param_9 + 0x2a8,&local_88);
        }
        uVar16 = server_status_client(param_9);
        key_bindings_dispatch
                  (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar7,param_9,
                   piVar1,(ulong)param_12,param_13);
        key_bindings_unref_table(ppvVar4);
        goto LAB_0015226d;
      }
      server_client_set_key_table
                (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_9,(char *)0x0,uVar16,param_12,param_13,param_14);
      *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) & 0xffffffdf;
      server_status_client(param_9);
    } while( true );
  }
  uVar15 = extraout_XMM0_Da_09;
  if ((*(byte *)(param_9 + 0x421) & 8) != 0) goto LAB_0015226d;
LAB_0015264d:
  puVar9 = *(uint **)(puVar9 + 0x4e);
LAB_00152486:
  if (puVar9 != (uint *)0x0) {
    window_pane_key(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar9,param_9,
                    lVar3,(ulong)param_10,(long)piVar1,param_14);
  }
LAB_0015226d:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
code_r0x001523ea:
  pcVar8 = server_client_get_key_table
                     (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,param_9,ppcVar14,uVar16,param_12,param_13,
                      param_14);
  iVar6 = strcmp(**(char ***)(param_9 + 0x428),pcVar8);
  if (iVar6 != 0) {
    server_client_set_key_table
              (CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_9,(char *)0x0,extraout_RDX_01,param_12,param_13,
               param_14);
    server_status_client(param_9);
    goto LAB_0015226d;
  }
  pcVar8 = options_get_number(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,
                              param_4,param_5,param_6,param_7,param_8,*(char ***)(lVar3 + 0x108),
                              "prefix",extraout_RDX_01,param_12,param_13,param_14);
  uVar16 = extraout_RDX_02;
  uVar15 = extraout_XMM0_Da_03;
  uVar17 = extraout_XMM0_Db_02;
  if ((pcVar8 == param_10) ||
     (pcVar8 = options_get_number(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,*(char ***)(lVar3 + 0x108)
                                  ,"prefix2",extraout_RDX_02,param_12,param_13,param_14),
     uVar16 = extraout_RDX_03, uVar15 = extraout_XMM0_Da_04, uVar17 = extraout_XMM0_Db_03,
     param_10 == pcVar8)) {
    server_client_set_key_table
              (CONCAT44(uVar17,uVar15),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               param_9,"prefix",uVar16,param_12,param_13,param_14);
    server_status_client(param_9);
    goto LAB_0015226d;
  }
LAB_00152444:
  if ((*(byte *)(param_9 + 0x421) & 8) != 0) goto LAB_0015226d;
  if (0x2a < ((ulong)param_10 & 0xffff1fffffffffff) - 0x100000000002) goto LAB_0015264d;
  puVar9 = (uint *)cmd_mouse_pane(piVar1,(int **)0x0,(long *)0x0);
  uVar15 = extraout_XMM0_Da_05;
  goto LAB_00152486;
}



void server_client_check_resize
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  if ((*(byte *)(param_9 + 0x30) & 8) == 0) {
    return;
  }
  FUN_00151210(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
               param_11,param_12,param_13,param_14);
  return;
}



void server_client_check_focus
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  char *pcVar4;
  uint uVar5;
  
  pcVar4 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              global_options,"focus-events",param_11,param_12,param_13,param_14);
  if (pcVar4 != (char *)0x0) {
    uVar1 = *(uint *)(param_9 + 0x30);
    uVar5 = uVar1 & 0xffffffef;
    *(uint *)(param_9 + 0x30) = uVar5;
    if ((*(byte *)(param_9 + 0x179) & 8) != 0) {
      if ((param_9 == *(long *)(*(long *)(param_9 + 8) + 0x138)) &&
         (lVar3 = clients, *(long *)(param_9 + 0x140) == param_9 + 0x148)) {
        for (; lVar3 != 0; lVar3 = *(long *)(lVar3 + 0x5c0)) {
          lVar2 = *(long *)(lVar3 + 0x598);
          if ((((lVar2 != 0) && ((*(byte *)(lVar3 + 0x421) & 0x80) != 0)) &&
              ((*(byte *)(lVar2 + 0x110) & 1) == 0)) &&
             (*(long *)(param_9 + 8) == *(long *)(*(long *)(lVar2 + 0xe0) + 8))) {
            if (((uVar1 & 0x10) != 0) || ((uVar1 & 4) == 0)) {
              bufferevent_write(*(undefined8 *)(param_9 + 0x80),&DAT_0017f7f4,3);
              uVar5 = *(uint *)(param_9 + 0x30);
            }
            *(uint *)(param_9 + 0x30) = uVar5 | 4;
            return;
          }
        }
      }
      if ((uVar1 & 0x14) != 0) {
        bufferevent_write(*(undefined8 *)(param_9 + 0x80),&DAT_0017f7f0,3);
        uVar5 = *(uint *)(param_9 + 0x30);
      }
      *(uint *)(param_9 + 0x30) = uVar5 & 0xfffffffb;
    }
  }
  return;
}



void server_client_reset_state
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  char **ppcVar2;
  long lVar3;
  ulong uVar4;
  bool bVar5;
  char *pcVar6;
  undefined7 extraout_var;
  uint uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar8;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  int iVar9;
  ulong uVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar12;
  
  if ((*(uint *)(param_9 + 0x420) & 0x2040) != 0) {
    return;
  }
  iVar9 = 1;
  lVar1 = param_9 + 0xe0;
  ppcVar2 = *(char ***)(*(long *)(param_9 + 0x598) + 0x108);
  lVar3 = *(long *)(*(long *)(*(long *)(*(long *)(param_9 + 0x598) + 0xe0) + 8) + 0x138);
  uVar4 = *(ulong *)(lVar3 + 0x140);
  uVar12 = tty_region(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,0,
                      *(int *)(param_9 + 0xf4) - 1,param_12,param_13,param_14);
  pcVar6 = options_get_number(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppcVar2
                              ,"status",extraout_RDX,param_12,param_13,param_14);
  if ((*(byte *)(param_9 + 0x422) & 0x80) == 0) {
    iVar9 = (int)pcVar6;
  }
  bVar5 = window_pane_visible(lVar3);
  if ((int)CONCAT71(extraout_var,bVar5) != 0) {
    uVar7 = *(int *)(uVar4 + 0x14) + *(int *)(lVar3 + 0x2c);
    if (uVar7 < (uint)(*(int *)(param_9 + 0xf4) - iVar9)) {
      uVar11 = extraout_XMM0_Da;
      if (iVar9 != 0) {
        pcVar6 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                    param_4,param_5,param_6,param_7,param_8,ppcVar2,
                                    "status-position",(ulong)uVar7,param_12,param_13,param_14);
        uVar7 = *(int *)(uVar4 + 0x14) + *(int *)(lVar3 + 0x2c) + (uint)(pcVar6 == (char *)0x0);
        uVar11 = extraout_XMM0_Da_01;
      }
      uVar12 = tty_cursor(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                          *(int *)(uVar4 + 0x10) + *(int *)(lVar3 + 0x28),uVar7,param_12,param_13,
                          param_14);
      uVar8 = extraout_RDX_02;
      goto LAB_0015288c;
    }
  }
  uVar12 = tty_cursor(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1
                      ,0,0,param_12,param_13,param_14);
  uVar8 = extraout_RDX_00;
LAB_0015288c:
  uVar7 = *(uint *)(uVar4 + 0x30);
  pcVar6 = options_get_number(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppcVar2
                              ,"mouse",uVar8,param_12,param_13,param_14);
  if (pcVar6 != (char *)0x0) {
    uVar7 = uVar7 & 0xffffff9f | 0x40;
  }
  uVar10 = (ulong)uVar7;
  uVar11 = tty_update_mode(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,lVar1,uVar7,uVar4,param_12,pcVar6,param_14);
  tty_reset(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,uVar10,
            extraout_RDX_01,param_12,pcVar6,param_14);
  return;
}



void server_client_check_exit
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  long lVar1;
  undefined8 in_R9;
  undefined4 extraout_XMM0_Da;
  
  if ((*(byte *)(param_9 + 0x84) & 4) == 0) {
    return;
  }
  lVar1 = evbuffer_get_length(param_9[0x51]);
  if (lVar1 == 0) {
    lVar1 = evbuffer_get_length(param_9[0x53]);
    if (lVar1 == 0) {
      lVar1 = evbuffer_get_length(param_9[0x54]);
      if (lVar1 == 0) {
        proc_send(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,
                  0xcb,0xffffffff,param_9 + 0x12,4,in_R9);
        *(uint *)(param_9 + 0x84) = *(uint *)(param_9 + 0x84) & 0xfffffffb;
        return;
      }
    }
  }
  return;
}



void server_client_set_title
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
               undefined8 param_13,char **param_14)

{
  char *__s2;
  int iVar1;
  char *pcVar2;
  uint **ppuVar3;
  time_t tVar4;
  char *__s1;
  tm *ptVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  long *plVar6;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined auVar7 [16];
  
  pcVar2 = options_get_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(*(long *)(param_9 + 0x598) + 0x108),"set-titles-string",
                              param_11,param_12,param_13,param_14);
  ppuVar3 = (uint **)format_create(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                   param_8,0,0,extraout_RDX,param_12,param_13,param_14);
  plVar6 = (long *)0x0;
  ptVar5 = (tm *)0x0;
  format_defaults(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  ppuVar3,param_9,(uint *)0x0,(uint *)0x0,(uint *)0x0,param_14);
  tVar4 = time((time_t *)0x0);
  __s1 = format_expand_time(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,(long *)ppuVar3,pcVar2,tVar4,ptVar5,plVar6,param_14);
  __s2 = *(char **)(param_9 + 0xc0);
  if (__s2 != (char *)0x0) {
    pcVar2 = __s2;
    iVar1 = strcmp(__s1,__s2);
    if (iVar1 == 0) goto LAB_00152a55;
  }
  free(__s2);
  auVar7 = xstrdup(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__s1,
                   pcVar2,extraout_RDX_00,ptVar5,plVar6,param_14);
  *(char **)(param_9 + 0xc0) = auVar7._0_8_;
  tty_set_title(extraout_XMM0_Qa_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                param_9 + 0xe0,auVar7._0_8_,auVar7._8_8_,ptVar5,plVar6,param_14);
LAB_00152a55:
  free(__s1);
  format_free(ppuVar3);
  return;
}



void server_client_check_redraw
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
               char *param_13,char **param_14)

{
  long lVar1;
  int iVar2;
  uint uVar3;
  char *pcVar4;
  uint uVar6;
  uint uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  long lVar8;
  uint uVar9;
  char *pcVar10;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar12;
  undefined8 uVar13;
  ulong uVar5;
  
  uVar11 = (undefined4)param_1;
  uVar6 = *(uint *)(param_9 + 0x420);
  uVar5 = (ulong)uVar6;
  if ((uVar6 & 0x2040) != 0) {
    return;
  }
  if ((uVar6 & 0x18) != 0) {
    pcVar10 = "set-titles";
    pcVar4 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(*(long *)(param_9 + 0x598) + 0x108),"set-titles",uVar5,
                                param_12,param_13,param_14);
    uVar12 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    uVar13 = extraout_RDX_00;
    if (pcVar4 != (char *)0x0) {
      uVar12 = server_client_set_title
                         (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,param_9,pcVar10,extraout_RDX_00,param_12,
                          param_13,param_14);
      uVar13 = extraout_RDX_01;
    }
    if (*(long *)(param_9 + 0x4b0) == 0) {
      if (*(long *)(param_9 + 0x550) == 0) {
        uVar5 = status_redraw(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                              ,pcVar10,uVar13,(ulong)param_12,param_13,param_14);
        iVar2 = (int)uVar5;
        uVar11 = extraout_XMM0_Da_02;
      }
      else {
        uVar5 = status_prompt_redraw(param_9);
        iVar2 = (int)uVar5;
        uVar11 = extraout_XMM0_Da_01;
      }
    }
    else {
      uVar5 = status_message_redraw(param_9);
      iVar2 = (int)uVar5;
      uVar11 = extraout_XMM0_Da_00;
    }
    uVar5 = (ulong)*(uint *)(param_9 + 0x420);
    if (iVar2 == 0) {
      uVar6 = *(uint *)(param_9 + 0x420) & 0xffffffef;
      uVar5 = (ulong)uVar6;
      *(uint *)(param_9 + 0x420) = uVar6;
    }
  }
  uVar6 = *(uint *)(param_9 + 400);
  uVar9 = *(uint *)(param_9 + 0x110);
  lVar1 = param_9 + 0xe0;
  *(uint *)(param_9 + 400) = uVar6 & 0xfffffffc | 1;
  uVar7 = (uint)uVar5;
  if ((uVar5 & 8) == 0) {
    if ((uVar5 & 0x1000) == 0) {
      lVar8 = *(long *)(*(long *)(*(long *)(*(long *)(param_9 + 0x598) + 0xe0) + 8) + 0x148);
      if (lVar8 == 0) {
        uVar3 = uVar7 & 0x400;
      }
      else {
        do {
          while ((*(byte *)(lVar8 + 0x30) & 1) != 0) {
            uVar12 = tty_update_mode(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     lVar1,uVar9,0,param_12,param_13,param_14);
            uVar11 = screen_redraw_pane(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,
                                        param_8,param_9,lVar8,extraout_RDX,(ulong)param_12,
                                        (ulong)param_13,param_14);
            lVar8 = *(long *)(lVar8 + 0x1f8);
            uVar9 = *(uint *)(param_9 + 0x110);
            if (lVar8 == 0) goto LAB_00152b39;
          }
          lVar8 = *(long *)(lVar8 + 0x1f8);
        } while (lVar8 != 0);
LAB_00152b39:
        uVar7 = *(uint *)(param_9 + 0x420);
        uVar3 = uVar7 & 0x400;
      }
    }
    else {
      uVar13 = tty_update_mode(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                               uVar9,0,param_12,param_13,param_14);
      uVar11 = (undefined4)uVar13;
      uVar12 = extraout_RDX_02;
      for (lVar8 = *(long *)(*(long *)(*(long *)(*(long *)(param_9 + 0x598) + 0xe0) + 8) + 0x148);
          lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x1f8)) {
        uVar13 = screen_redraw_pane(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    param_9,lVar8,uVar12,(ulong)param_12,(ulong)param_13,param_14);
        uVar11 = (undefined4)uVar13;
        uVar12 = extraout_RDX_03;
      }
      uVar9 = *(uint *)(param_9 + 0x110);
      uVar3 = *(uint *)(param_9 + 0x420) & 0x400;
      uVar7 = *(uint *)(param_9 + 0x420) & 0xffffefff;
      *(uint *)(param_9 + 0x420) = uVar7;
    }
    if (uVar3 != 0) {
      uVar12 = tty_update_mode(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                               uVar9,0,param_12,param_13,param_14);
      param_12 = (undefined *)0x1;
      uVar11 = screen_redraw_screen
                         (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,0
                          ,1,param_13,(char *)param_14);
      uVar7 = *(uint *)(param_9 + 0x420);
      uVar9 = *(uint *)(param_9 + 0x110);
    }
    if ((uVar7 & 0x10) != 0) {
      uVar12 = tty_update_mode(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                               uVar9,0,param_12,param_13,param_14);
      param_12 = (undefined *)0x0;
      uVar11 = screen_redraw_screen
                         (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,1
                          ,0,param_13,(char *)param_14);
      uVar9 = *(uint *)(param_9 + 0x110);
    }
  }
  else {
    uVar12 = tty_update_mode(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                             uVar9,0,param_12,param_13,param_14);
    param_12 = (undefined *)0x1;
    uVar11 = screen_redraw_screen
                       (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,1,1
                        ,param_13,(char *)param_14);
    uVar9 = *(uint *)(param_9 + 0x110);
    *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) & 0xfffffbef;
  }
  *(uint *)(param_9 + 400) = uVar6 & 3 | *(uint *)(param_9 + 400) & 0xfffffffc;
  tty_update_mode(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,uVar9,0,
                  param_12,param_13,param_14);
  *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) & 0xfff7fbe7;
  return;
}



void server_client_loop(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,undefined8 param_10,undefined8 param_11,
                       undefined *param_12,long *param_13,char **param_14)

{
  long **pplVar1;
  long lVar2;
  bool bVar3;
  uint uVar4;
  long *plVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  long extraout_RDX_01;
  long extraout_RDX_02;
  long lVar6;
  undefined8 uVar7;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar8;
  undefined8 extraout_XMM0_Qa_00;
  
  plVar5 = clients;
  if (clients != (long *)0x0) {
    do {
      param_1 = server_client_check_exit
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar5);
      if (plVar5[0xb3] != 0) {
        uVar7 = server_client_check_redraw
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)plVar5,param_10,extraout_RDX,param_12,(char *)param_13,param_14);
        param_1 = server_client_reset_state
                            (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (long)plVar5,param_10,extraout_RDX_00,(ulong)param_12,param_13,param_14
                            );
      }
      pplVar1 = (long **)(plVar5 + 0xb8);
      plVar5 = *pplVar1;
    } while (*pplVar1 != (long *)0x0);
  }
  uVar7 = 0xffffffff;
  bVar3 = false;
  plVar5 = (long *)windows_RB_MINMAX(&windows,-1);
  uVar8 = extraout_XMM0_Qa;
  if (plVar5 != (long *)0x0) {
    do {
      lVar6 = plVar5[0x27];
      lVar2 = plVar5[0x29];
      if ((*(uint *)(plVar5 + 0x30) & 4) != 0) {
        bVar3 = true;
      }
      if (plVar5[0x26] != lVar6) {
        bVar3 = true;
      }
      *(uint *)(plVar5 + 0x30) = *(uint *)(plVar5 + 0x30) & 0xfffffffb;
      for (; lVar2 != 0; lVar2 = *(long *)(lVar2 + 0x1f8)) {
        if (*(int *)(lVar2 + 0x78) == -1) {
LAB_00152ded:
          uVar4 = *(uint *)(lVar2 + 0x30);
        }
        else {
          uVar8 = server_client_check_focus
                            (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                             uVar7,lVar6,param_12,param_13,param_14);
          uVar4 = *(uint *)(lVar2 + 0x30);
          lVar6 = extraout_RDX_01;
          if ((uVar4 & 8) != 0) {
            uVar8 = FUN_00151210(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2
                                 ,uVar7,extraout_RDX_01,param_12,param_13,param_14);
            lVar6 = extraout_RDX_02;
            goto LAB_00152ded;
          }
        }
        *(uint *)(lVar2 + 0x30) = uVar4 & 0xfffffffe;
      }
      check_window_name(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar5,uVar7,
                        lVar6,param_12,param_13,param_14);
      plVar5 = (long *)windows_RB_NEXT((long)plVar5);
      uVar8 = extraout_XMM0_Qa_00;
    } while (plVar5 != (long *)0x0);
    if (bVar3) {
      tmate_sync_layout();
      return;
    }
  }
  return;
}



void server_client_dispatch_command
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,long param_13,
               undefined8 param_14)

{
  uint *puVar1;
  ulong uVar2;
  undefined8 uVar3;
  int *piVar4;
  void *extraout_RAX;
  void ***pppvVar5;
  ulong uVar6;
  undefined8 extraout_RDX;
  uint uVar7;
  long lVar8;
  long *plVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined auVar11 [16];
  undefined in_stack_ffffffffffffffc8;
  void **local_30;
  long local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = (ulong)*(ushort *)(param_10 + 4);
  uVar6 = uVar2 - 0x10;
  if (uVar6 < 4) {
                    // WARNING: Subroutine does not return
    fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_COMMAND size",
           param_10,uVar6,param_12,param_13,param_14,in_stack_ffffffffffffffc8);
  }
  puVar1 = *(uint **)(param_10 + 0x18);
  uVar7 = *puVar1;
  lVar8 = uVar2 - 0x14;
  if ((lVar8 != 0) && (*(char *)((long)puVar1 + (uVar2 - 0x11)) != '\0')) {
                    // WARNING: Subroutine does not return
    fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad MSG_COMMAND string",
           lVar8,uVar6,param_12,param_13,param_14,in_stack_ffffffffffffffc8);
  }
  pppvVar5 = &local_30;
  uVar3 = cmd_unpack_argv(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (char *)(puVar1 + 1),lVar8,(ulong)uVar7,(long *)pppvVar5,param_13,param_14
                         );
  if ((int)uVar3 == 0) {
    uVar10 = extraout_XMM0_Da;
    if (uVar7 == 0) {
      uVar3 = 8;
      auVar11 = xcalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,8
                        ,extraout_RDX,pppvVar5,param_13,param_14);
      local_30 = auVar11._0_8_;
      uVar10 = xstrdup(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,"new-session",uVar3,auVar11._8_8_,pppvVar5,
                       param_13,param_14);
      *auVar11._0_8_ = extraout_RAX;
      uVar7 = 1;
    }
    plVar9 = &local_28;
    uVar6 = 0;
    piVar4 = cmd_list_parse(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar7,
                            (long)local_30,(char *)0x0,0,plVar9,param_14);
    if (piVar4 != (int *)0x0) {
      uVar10 = cmd_free_argv(uVar7,local_30);
      if ((cfg_client == param_9) && (cfg_finished == 0)) {
        cmdq_append(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    (long)*(int **)(param_9 + 0x5b0),piVar4,(undefined4 *)0x0,uVar6,plVar9,param_14)
        ;
      }
      else {
        cmdq_run(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 *(int **)(param_9 + 0x5b0),piVar4,(undefined4 *)0x0,uVar6,plVar9,param_14);
      }
      cmd_list_free(piVar4);
      goto LAB_00152efa;
    }
    cmdq_error(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,*(long *)(param_9 + 0x5b0),"%s",local_28,uVar6,(long)plVar9,
               param_14,in_stack_ffffffffffffffc8);
    cmd_free_argv(uVar7,local_30);
  }
  else {
    cmdq_error(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,*(long *)(param_9 + 0x5b0),"command too long",extraout_RDX,
               (ulong)pppvVar5,param_13,param_14,in_stack_ffffffffffffffc8);
  }
  *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 4;
LAB_00152efa:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void server_client_dispatch_identify
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  uint *__name;
  int iVar2;
  long extraout_RAX;
  undefined8 uVar3;
  long lVar4;
  long extraout_RAX_00;
  uint *puVar5;
  ulong uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined unaff_BL;
  ulong uVar7;
  long *plVar8;
  char *pcVar9;
  long lVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined auVar12 [16];
  
  uVar11 = (undefined4)param_1;
  if ((*(uint *)(param_9 + 0x84) & 0x40000) != 0) {
                    // WARNING: Subroutine does not return
    fatalx(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "out-of-order identify message",param_10,param_11,param_12,param_13,param_14,unaff_BL);
  }
  __name = *(uint **)(param_10 + 6);
  uVar7 = (ulong)*(ushort *)(param_10 + 1);
  uVar1 = *param_10;
  uVar6 = (ulong)uVar1;
  lVar10 = uVar7 - 0x10;
  puVar5 = &switchD_00153035::switchdataD_0017f9f0;
  switch(uVar1) {
  case 100:
    if (lVar10 != 4) {
                    // WARNING: Subroutine does not return
      fatalx(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "bad MSG_IDENTIFY_FLAGS size",uVar7,uVar6,&switchD_00153035::switchdataD_0017f9f0,
             lVar10,param_14,unaff_BL);
    }
    uVar1 = *__name;
    *(uint *)(param_9 + 0x84) = *(uint *)(param_9 + 0x84) | uVar1;
    param_1 = log_emit(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                       "client %p IDENTIFY_FLAGS %#x",param_9,(ulong)uVar1,4,param_14,unaff_BL);
    uVar1 = *param_10;
    break;
  case 0x65:
    if ((lVar10 == 0) || (*(char *)((long)__name + (uVar7 - 0x11)) != '\0')) {
                    // WARNING: Subroutine does not return
      fatalx(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "bad MSG_IDENTIFY_TERM string",uVar7,uVar6,&switchD_00153035::switchdataD_0017f9f0,
             lVar10,param_14,unaff_BL);
    }
    lVar4 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(char *)__name,
                    uVar7,uVar6,&switchD_00153035::switchdataD_0017f9f0,lVar10,param_14);
    param_9[0x1a] = lVar4;
    param_1 = log_emit(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3
                       ,"client %p IDENTIFY_TERM %s",param_9,__name,lVar10,param_14,unaff_BL);
    uVar1 = *param_10;
    goto joined_r0x001532a3;
  case 0x66:
    if ((lVar10 == 0) || (*(char *)((long)__name + (uVar7 - 0x11)) != '\0')) {
                    // WARNING: Subroutine does not return
      fatalx(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "bad MSG_IDENTIFY_TTYNAME string",uVar7,uVar6,&switchD_00153035::switchdataD_0017f9f0,
             lVar10,param_14,unaff_BL);
    }
    lVar4 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(char *)__name,
                    uVar7,uVar6,&switchD_00153035::switchdataD_0017f9f0,lVar10,param_14);
    param_9[0x1b] = lVar4;
    param_1 = log_emit(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3
                       ,"client %p IDENTIFY_TTYNAME %s",param_9,__name,lVar10,param_14,unaff_BL);
    uVar1 = *param_10;
joined_r0x001532a3:
    if (uVar1 != 0x6a) {
      return;
    }
    goto LAB_0015309e;
  case 0x68:
    if (lVar10 != 0) {
                    // WARNING: Subroutine does not return
      fatalx(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "bad MSG_IDENTIFY_STDIN size",uVar7,uVar6,&switchD_00153035::switchdataD_0017f9f0,
             lVar10,param_14,unaff_BL);
    }
    uVar1 = param_10[4];
    *(uint *)((long)param_9 + 0xc) = uVar1;
    param_1 = log_emit(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                       "client %p IDENTIFY_STDIN %d",param_9,(ulong)uVar1,0,param_14,unaff_BL);
    uVar1 = *param_10;
    break;
  case 0x69:
    if ((lVar10 == 0) || (*(char *)((long)__name + (uVar7 - 0x11)) != '\0')) {
                    // WARNING: Subroutine does not return
      fatalx(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "bad MSG_IDENTIFY_ENVIRON string",uVar7,uVar6,&switchD_00153035::switchdataD_0017f9f0,
             lVar10,param_14,unaff_BL);
    }
    pcVar9 = strchr((char *)__name,0x3d);
    uVar11 = extraout_XMM0_Da_01;
    if (pcVar9 != (char *)0x0) {
      uVar11 = environ_put(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4
                           ,param_5,param_6,param_7,param_8,(char **)param_9[0x17],(char *)__name,
                           extraout_RDX_01,puVar5,lVar10,param_14);
    }
    param_1 = log_emit(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                       "client %p IDENTIFY_ENVIRON %s",param_9,__name,lVar10,param_14,unaff_BL);
    uVar1 = *param_10;
    break;
  case 0x6b:
    if (lVar10 != 4) {
                    // WARNING: Subroutine does not return
      fatalx(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "bad MSG_IDENTIFY_CLIENTPID size",uVar7,uVar6,&switchD_00153035::switchdataD_0017f9f0,
             lVar10,param_14,unaff_BL);
    }
    uVar1 = *__name;
    *(uint *)(param_9 + 1) = uVar1;
    param_1 = log_emit(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                       "client %p IDENTIFY_CLIENTPID %ld",param_9,(long)(int)uVar1,4,param_14,
                       unaff_BL);
    uVar1 = *param_10;
    break;
  case 0x6c:
    if ((lVar10 == 0) || (*(char *)((long)__name + (uVar7 - 0x11)) != '\0')) {
                    // WARNING: Subroutine does not return
      fatalx(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "bad MSG_IDENTIFY_CWD string",uVar7,uVar6,&switchD_00153035::switchdataD_0017f9f0,
             lVar10,param_14,unaff_BL);
    }
    uVar3 = 1;
    iVar2 = access((char *)__name,1);
    if (iVar2 == 0) {
      uVar11 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,(char *)__name,uVar3,extraout_RDX,puVar5,lVar10,
                       param_14);
      param_9[0x19] = extraout_RAX;
    }
    else {
      auVar12 = find_home();
      pcVar9 = auVar12._0_8_;
      if (pcVar9 == (char *)0x0) {
        pcVar9 = "/";
      }
      uVar11 = xstrdup(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_04),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,pcVar9,uVar3,auVar12._8_8_,puVar5,lVar10,
                       param_14);
      param_9[0x19] = extraout_RAX_00;
    }
    param_1 = log_emit(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                       "client %p IDENTIFY_CWD %s",param_9,__name,lVar10,param_14,unaff_BL);
    uVar1 = *param_10;
  }
  if (uVar1 == 0x6a) {
LAB_0015309e:
    uVar1 = *(uint *)(param_9 + 0x84);
    *(uint *)(param_9 + 0x84) = uVar1 | 0x40000;
    if ((uVar1 & 0x2000) != 0) {
      param_9[0x4f] = (long)control_callback;
      uVar11 = evbuffer_free(param_9[0x54]);
      param_9[0x54] = param_9[0x53];
      if ((*(byte *)((long)param_9 + 0x421) & 0x40) != 0) {
        uVar11 = evbuffer_add_printf(param_9[0x53],&DAT_0017f96e);
      }
      proc_send(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,0xd4,
                0xffffffff,(void *)0x0,0,param_14);
      *(undefined4 *)(param_9 + 0x26) = 0xffffffff;
      close(*(int *)((long)param_9 + 0xc));
      *(undefined4 *)((long)param_9 + 0xc) = 0xffffffff;
      return;
    }
    if (*(int *)((long)param_9 + 0xc) != -1) {
      pcVar9 = (char *)param_9[0x1a];
      plVar8 = param_9;
      uVar3 = tty_init(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_9 + 0x1c,param_9,*(int *)((long)param_9 + 0xc),pcVar9,lVar10,param_14);
      if ((int)uVar3 == 0) {
        if ((*(uint *)(param_9 + 0x84) & 0x10000) != 0) {
          *(uint *)(param_9 + 0x32) = *(uint *)(param_9 + 0x32) | 8;
        }
        if ((*(uint *)(param_9 + 0x84) & 0x20000) != 0) {
          *(uint *)((long)param_9 + 0x194) = *(uint *)((long)param_9 + 0x194) | 1;
        }
        tty_resize(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,(long)(param_9 + 0x1c),plVar8,extraout_RDX_00,
                   (ulong)pcVar9,lVar10,param_14);
        if ((*(uint *)(param_9 + 0x84) & 0x2000) == 0) {
          *(uint *)(param_9 + 0x84) = *(uint *)(param_9 + 0x84) | 1;
        }
      }
      else {
        close(*(int *)((long)param_9 + 0xc));
        *(undefined4 *)((long)param_9 + 0xc) = 0xffffffff;
      }
    }
  }
  return;
}



void server_client_dispatch_shell
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  bool bVar1;
  char *pcVar2;
  undefined7 extraout_var;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar3;
  undefined8 extraout_XMM0_Qa_00;
  
  pcVar2 = options_get_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              global_s_options,"default-shell",param_11,param_12,param_13,param_14);
  uVar3 = extraout_XMM0_Qa;
  if ((*pcVar2 == '\0') ||
     (bVar1 = areshell(pcVar2), uVar3 = extraout_XMM0_Qa_00, (int)CONCAT71(extraout_var,bVar1) != 0)
     ) {
    pcVar2 = "/bin/sh";
  }
  proc_send_s(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,0xd1,pcVar2,
              param_12,param_13,param_14);
  proc_kill_peer(*param_9);
  return;
}



void server_client_dispatch
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9,void **param_10,undefined8 param_11,undefined8 param_12,long param_13,
               undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  uint uVar3;
  void *pvVar4;
  int iVar5;
  undefined8 uVar6;
  code *pcVar7;
  ulong uVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  timeval *ptVar9;
  timeval *__tv;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar11;
  undefined4 extraout_XMM0_Db_00;
  undefined in_stack_ffffffffffffdfd8;
  undefined7 uStack_2027;
  undefined local_2020 [8192];
  long local_20;
  
  uVar10 = (undefined4)param_1;
  uVar2 = *(uint *)(param_10 + 0x84);
  uVar8 = (ulong)uVar2;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if ((uVar2 & 0x200) == 0) {
    if (param_9 == (uint *)0x0) {
      server_client_lost(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                         param_10,param_11,uVar8,param_13,param_14);
    }
    else {
      lVar1 = (ulong)*(ushort *)(param_9 + 1) - 0x10;
      uVar3 = *param_9;
      if (uVar3 < 0xd9) {
        if (uVar3 < 200) {
          if (uVar3 < 0x67) {
            if (99 < uVar3) {
              server_client_dispatch_identify
                        (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long *)param_10,param_9,param_11,uVar8,param_13,param_14);
            }
          }
          else if (uVar3 - 0x68 < 5) {
            server_client_dispatch_identify
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long *)param_10,param_9,param_11,uVar8,param_13,param_14);
          }
        }
        else {
          switch(uVar3) {
          case 200:
            server_client_dispatch_command
                      (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_10
                       ,(long)param_9,&switchD_0015352b::switchdataD_0017fa14,uVar8,param_13,
                       param_14);
            break;
          case 0xcd:
            if (lVar1 != 0) {
                    // WARNING: Subroutine does not return
              fatalx(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "bad MSG_EXITING size",lVar1,&switchD_0015352b::switchdataD_0017fa14,uVar8,
                     param_13,param_14,in_stack_ffffffffffffdfd8);
            }
            param_10[0xb3] = (void *)0x0;
            uVar10 = tty_close(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)(param_10 + 0x1c));
            proc_send(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)*param_10
                      ,0xcc,0xffffffff,(void *)0x0,0,param_14);
            break;
          case 0xd0:
            if (lVar1 != 0) {
                    // WARNING: Subroutine does not return
              fatalx(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "bad MSG_RESIZE size",lVar1,&switchD_0015352b::switchdataD_0017fa14,uVar8,
                     param_13,param_14,in_stack_ffffffffffffdfd8);
            }
            if ((uVar2 & 0x2000) == 0) {
              uVar6 = tty_resize(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 (long)(param_10 + 0x1c),0,&switchD_0015352b::switchdataD_0017fa14,
                                 (ulong)uVar2 & 0xffffffffffff20ff,param_13,param_14);
              uVar11 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
              if ((int)uVar6 != 0) {
                recalculate_sizes(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8);
                uVar11 = server_redraw_client((long)param_10);
              }
              if (param_10[0xb3] != (void *)0x0) {
                hooks_run(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          *(char ***)((long)param_10[0xb3] + 0x100),param_10,0,"client-resized",
                          param_13,param_14,in_stack_ffffffffffffdfd8);
              }
            }
            break;
          case 0xd1:
            if (lVar1 != 0) {
                    // WARNING: Subroutine does not return
              fatalx(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "bad MSG_SHELL size",lVar1,&switchD_0015352b::switchdataD_0017fa14,uVar8,
                     param_13,param_14,in_stack_ffffffffffffdfd8);
            }
            server_client_dispatch_shell
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long *)param_10,0,&switchD_0015352b::switchdataD_0017fa14,uVar8,param_13,
                       param_14);
            break;
          case 0xd4:
            if (lVar1 != 0x2008) {
                    // WARNING: Subroutine does not return
              fatalx(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "bad MSG_STDIN size",lVar1,&switchD_0015352b::switchdataD_0017fa14,uVar8,
                     param_13,param_14,in_stack_ffffffffffffdfd8);
            }
            memcpy(&stack0xffffffffffffdfd8,*(void **)(param_9 + 6),0x2008);
            pcVar7 = (code *)param_10[0x4f];
            if (pcVar7 != (code *)0x0) {
              if (CONCAT71(uStack_2027,in_stack_ffffffffffffdfd8) < 1) {
                *(undefined4 *)(param_10 + 0x52) = 1;
                uVar10 = 1;
              }
              else {
                evbuffer_add(param_10[0x51],local_2020);
                pcVar7 = (code *)param_10[0x4f];
                uVar10 = *(undefined4 *)(param_10 + 0x52);
              }
              (*pcVar7)(param_10,uVar10,param_10[0x50]);
            }
            break;
          case 0xd7:
          case 0xd8:
            if (lVar1 != 0) {
                    // WARNING: Subroutine does not return
              fatalx(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "bad MSG_WAKEUP size",lVar1,&switchD_0015352b::switchdataD_0017fa14,uVar8,
                     param_13,param_14,in_stack_ffffffffffffdfd8);
            }
            if ((uVar2 & 0x40) != 0) {
              uVar8 = (ulong)(uVar2 & 0xffffffbf);
              *(uint *)(param_10 + 0x84) = uVar2 & 0xffffffbf;
              if (*(int *)(param_10 + 0x26) != -1) {
                __tv = (timeval *)(param_10 + 0x15);
                ptVar9 = (timeval *)0x0;
                pvVar4 = param_10[0xb3];
                iVar5 = gettimeofday(__tv,(__timezone_ptr_t)0x0);
                uVar11 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
                if (iVar5 != 0) {
                    // WARNING: Subroutine does not return
                  fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        "gettimeofday failed",ptVar9,extraout_RDX,uVar8,param_13,param_14,
                        in_stack_ffffffffffffdfd8);
                }
                uVar6 = extraout_RDX;
                if (pvVar4 != (void *)0x0) {
                  uVar11 = session_update_activity(pvVar4);
                  uVar6 = extraout_RDX_00;
                  ptVar9 = __tv;
                }
                tty_start_tty(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (long)(param_10 + 0x1c),ptVar9,uVar6,uVar8,param_13,param_14);
                uVar11 = server_redraw_client((long)param_10);
                recalculate_sizes(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
              }
            }
          }
        }
      }
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void server_client_push_stdout
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  int iVar1;
  ulong uVar2;
  undefined8 uVar3;
  ulong uVar4;
  ulong in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar5;
  undefined uVar6;
  undefined local_2040 [8192];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = evbuffer_get_length(param_9[0x53]);
  if (uVar2 != 0) {
    do {
      uVar4 = uVar2;
      if (0x2000 < uVar2) {
        uVar4 = 0x2000;
      }
      uVar3 = evbuffer_pullup(param_9[0x53],0xffffffffffffffff);
      uVar5 = __memcpy_chk(local_2040,uVar3,uVar4,0x2000);
      uVar2 = uVar4;
      iVar1 = proc_send(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,0xd5,
                        0xffffffff,&stack0xffffffffffffdfb8,0x2008,in_R9);
      uVar6 = (undefined)uVar2;
      if (iVar1 != 0) {
        uVar3 = 0;
        *(int *)(param_9 + 0xb7) = *(int *)(param_9 + 0xb7) + 1;
        uVar5 = event_once(0xffffffff,1,FUN_00153940,param_9);
        log_emit(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "%s: client %p, queued","server_client_push_stdout",param_9,uVar3,in_R9,uVar6);
        break;
      }
      evbuffer_drain(param_9[0x53],uVar4);
      uVar2 = evbuffer_get_length(param_9[0x53]);
      in_R9 = uVar2;
      log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "%s: client %p, sent %zu, left %zu","server_client_push_stdout",param_9,uVar4,uVar2,
               uVar6);
    } while (uVar2 != 0);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00153940(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,long *param_11)

{
  undefined4 uVar1;
  
  if ((*(byte *)((long)param_11 + 0x421) & 2) != 0) {
    server_client_unref((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)param_11);
    return;
  }
  uVar1 = server_client_push_stdout
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11);
  server_client_unref(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_11);
  return;
}



void server_client_push_stderr
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  int iVar1;
  ulong uVar2;
  undefined8 uVar3;
  ulong uVar4;
  ulong in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar5;
  undefined uVar6;
  undefined local_2040 [8192];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_9[0x54] == param_9[0x53]) {
    server_client_push_stdout
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  }
  else {
    uVar2 = evbuffer_get_length();
    if (uVar2 != 0) {
      do {
        uVar4 = uVar2;
        if (0x2000 < uVar2) {
          uVar4 = 0x2000;
        }
        uVar3 = evbuffer_pullup(param_9[0x54],0xffffffffffffffff);
        uVar5 = __memcpy_chk(local_2040,uVar3,uVar4,0x2000);
        uVar2 = uVar4;
        iVar1 = proc_send(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,
                          0xd3,0xffffffff,&stack0xffffffffffffdfb8,0x2008,in_R9);
        uVar6 = (undefined)uVar2;
        if (iVar1 != 0) {
          uVar3 = 0;
          *(int *)(param_9 + 0xb7) = *(int *)(param_9 + 0xb7) + 1;
          uVar5 = event_once(0xffffffff,1,FUN_00153b20,param_9);
          log_emit(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "%s: client %p, queued","server_client_push_stderr",param_9,uVar3,in_R9,uVar6);
          break;
        }
        evbuffer_drain(param_9[0x54],uVar4);
        uVar2 = evbuffer_get_length(param_9[0x54]);
        in_R9 = uVar2;
        log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "%s: client %p, sent %zu, left %zu","server_client_push_stderr",param_9,uVar4,uVar2
                 ,uVar6);
      } while (uVar2 != 0);
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00153b20(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,long *param_11)

{
  undefined4 uVar1;
  
  if ((*(byte *)((long)param_11 + 0x421) & 2) != 0) {
    server_client_unref((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)param_11);
    return;
  }
  uVar1 = server_client_push_stderr
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11);
  server_client_unref(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_11);
  return;
}



void server_callback_identify(undefined8 param_1,undefined8 param_2,long param_3)

{
  if ((*(uint *)(param_3 + 0x420) & 0x100) != 0) {
    *(uint *)(param_3 + 400) = *(uint *)(param_3 + 400) & 0xfffffffc;
    *(uint *)(param_3 + 0x420) = *(uint *)(param_3 + 0x420) & 0xfffffeff | 8;
  }
  return;
}



void FUN_00153b90(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  long *plVar1;
  undefined8 uVar2;
  char *__s;
  size_t sVar3;
  char *pcVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Db;
  
  __s = options_get_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           *(char ***)(param_9[0xb3] + 0x108),"lock-command",param_11,param_12,
                           param_13,param_14);
  sVar3 = strlen(__s);
  if (0x3ff0 < sVar3 + 1) {
    return;
  }
  plVar1 = param_9 + 0x1c;
  uVar5 = tty_stop_tty(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,(long)plVar1);
  pcVar4 = tty_term_string(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           param_9[0x25],0xc0,extraout_RDX,param_12,param_13,param_14);
  uVar5 = tty_raw((long)plVar1,pcVar4);
  pcVar4 = tty_term_string(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           param_9[0x25],7,extraout_RDX_00,param_12,param_13,param_14);
  uVar5 = tty_raw((long)plVar1,pcVar4);
  pcVar4 = tty_term_string(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           param_9[0x25],0x1c,extraout_RDX_01,param_12,param_13,param_14);
  uVar2 = tty_raw((long)plVar1,pcVar4);
  *(uint *)(param_9 + 0x84) = *(uint *)(param_9 + 0x84) | 0x40;
  proc_send_s(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,0xce,__s,
              param_12,param_13,param_14);
  return;
}



void server_fill_environ(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,uint *param_9,char **param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  __pid_t _Var1;
  char *pcVar2;
  undefined unaff_BL;
  uint uVar3;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined1 in_stack_00000008;
  
  uVar3 = 0xffffffff;
  if (param_9 != (uint *)0x0) {
    pcVar2 = options_get_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                global_options,"default-terminal",param_11,param_12,param_13,
                                param_14);
    environ_set(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                "TERM","%s",pcVar2,param_13,param_14,unaff_BL);
    uVar3 = *param_9;
  }
  _Var1 = getpid();
  environ_set(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
              "TMUX","%s,%ld,%u",socket_path,(long)_Var1,(ulong)uVar3,in_stack_00000008);
  return;
}



void server_redraw_client(long param_1)

{
  *(uint *)(param_1 + 0x420) = *(uint *)(param_1 + 0x420) | 8;
  return;
}



void server_status_client(long param_1)

{
  *(uint *)(param_1 + 0x420) = *(uint *)(param_1 + 0x420) | 0x10;
  return;
}



void server_redraw_session(long param_1)

{
  long lVar1;
  
  lVar1 = clients;
  if (clients != 0) {
    do {
      while (*(long *)(lVar1 + 0x598) != param_1) {
        lVar1 = *(long *)(lVar1 + 0x5c0);
        if (lVar1 == 0) {
          return;
        }
      }
      *(uint *)(lVar1 + 0x420) = *(uint *)(lVar1 + 0x420) | 8;
      lVar1 = *(long *)(lVar1 + 0x5c0);
    } while (lVar1 != 0);
  }
  return;
}



void server_redraw_session_group(long param_1)

{
  long lVar1;
  long lVar2;
  long *plVar3;
  long lVar4;
  
  plVar3 = session_group_find(param_1);
  lVar2 = clients;
  if (plVar3 == (long *)0x0) {
    for (; lVar2 != 0; lVar2 = *(long *)(lVar2 + 0x5c0)) {
      if (param_1 == *(long *)(lVar2 + 0x598)) {
        *(uint *)(lVar2 + 0x420) = *(uint *)(lVar2 + 0x420) | 8;
      }
    }
  }
  else {
    for (lVar1 = *plVar3; lVar4 = lVar2, lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x130)) {
      for (; lVar4 != 0; lVar4 = *(long *)(lVar4 + 0x5c0)) {
        while (*(long *)(lVar4 + 0x598) == lVar1) {
          *(uint *)(lVar4 + 0x420) = *(uint *)(lVar4 + 0x420) | 8;
          lVar4 = *(long *)(lVar4 + 0x5c0);
          if (lVar4 == 0) goto LAB_00153da0;
        }
      }
LAB_00153da0:
    }
  }
  return;
}



void server_status_session(long param_1)

{
  long lVar1;
  
  lVar1 = clients;
  if (clients != 0) {
    do {
      while (*(long *)(lVar1 + 0x598) != param_1) {
        lVar1 = *(long *)(lVar1 + 0x5c0);
        if (lVar1 == 0) {
          return;
        }
      }
      *(uint *)(lVar1 + 0x420) = *(uint *)(lVar1 + 0x420) | 0x10;
      lVar1 = *(long *)(lVar1 + 0x5c0);
    } while (lVar1 != 0);
  }
  return;
}



void server_status_session_group(long param_1)

{
  long lVar1;
  long lVar2;
  long *plVar3;
  long lVar4;
  
  plVar3 = session_group_find(param_1);
  lVar2 = clients;
  if (plVar3 == (long *)0x0) {
    for (; lVar2 != 0; lVar2 = *(long *)(lVar2 + 0x5c0)) {
      if (param_1 == *(long *)(lVar2 + 0x598)) {
        *(uint *)(lVar2 + 0x420) = *(uint *)(lVar2 + 0x420) | 0x10;
      }
    }
  }
  else {
    for (lVar1 = *plVar3; lVar4 = lVar2, lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x130)) {
      for (; lVar4 != 0; lVar4 = *(long *)(lVar4 + 0x5c0)) {
        while (*(long *)(lVar4 + 0x598) == lVar1) {
          *(uint *)(lVar4 + 0x420) = *(uint *)(lVar4 + 0x420) | 0x10;
          lVar4 = *(long *)(lVar4 + 0x5c0);
          if (lVar4 == 0) goto LAB_00153e90;
        }
      }
LAB_00153e90:
    }
  }
  return;
}



void server_redraw_window(long param_1)

{
  long lVar1;
  
  lVar1 = clients;
  if (clients != 0) {
    do {
      while ((*(long *)(lVar1 + 0x598) == 0 ||
             (*(long *)(*(long *)(*(long *)(lVar1 + 0x598) + 0xe0) + 8) != param_1))) {
        lVar1 = *(long *)(lVar1 + 0x5c0);
        if (lVar1 == 0) goto LAB_00153f20;
      }
      *(uint *)(lVar1 + 0x420) = *(uint *)(lVar1 + 0x420) | 8;
      lVar1 = *(long *)(lVar1 + 0x5c0);
    } while (lVar1 != 0);
  }
LAB_00153f20:
  *(uint *)(param_1 + 0x180) = *(uint *)(param_1 + 0x180) | 4;
  return;
}



void server_redraw_window_borders(long param_1)

{
  long lVar1;
  
  lVar1 = clients;
  if (clients != 0) {
    do {
      while ((*(long *)(lVar1 + 0x598) == 0 ||
             (*(long *)(*(long *)(*(long *)(lVar1 + 0x598) + 0xe0) + 8) != param_1))) {
        lVar1 = *(long *)(lVar1 + 0x5c0);
        if (lVar1 == 0) {
          return;
        }
      }
      *(uint *)(lVar1 + 0x420) = *(uint *)(lVar1 + 0x420) | 0x400;
      lVar1 = *(long *)(lVar1 + 0x5c0);
    } while (lVar1 != 0);
  }
  return;
}



void server_status_window(long param_1)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  
  for (lVar2 = sessions_RB_MINMAX(&sessions,-1); lVar2 != 0; lVar2 = sessions_RB_NEXT(lVar2)) {
    uVar3 = session_has(lVar2,param_1);
    lVar1 = clients;
    if ((int)uVar3 != 0) {
      for (; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x5c0)) {
        if (*(long *)(lVar1 + 0x598) == lVar2) {
          *(uint *)(lVar1 + 0x420) = *(uint *)(lVar1 + 0x420) | 0x10;
        }
      }
    }
  }
  return;
}



void server_lock(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  long *plVar1;
  
  plVar1 = clients;
  if (clients != (long *)0x0) {
    do {
      while ((plVar1[0xb3] == 0 || ((*(uint *)(plVar1 + 0x84) & 0x2040) != 0))) {
        plVar1 = (long *)plVar1[0xb8];
        if (plVar1 == (long *)0x0) {
          return;
        }
      }
      param_1 = FUN_00153b90(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar1,
                             param_10,param_11,param_12,param_13,param_14);
      plVar1 = (long *)plVar1[0xb8];
      param_11 = extraout_RDX;
    } while (plVar1 != (long *)0x0);
  }
  return;
}



void server_lock_session(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  long **pplVar1;
  undefined8 extraout_RDX;
  long *plVar2;
  
  plVar2 = clients;
  if (clients != (long *)0x0) {
    do {
      while ((plVar2[0xb3] != param_9 || ((*(uint *)(plVar2 + 0x84) & 0x2040) != 0))) {
        pplVar1 = (long **)(plVar2 + 0xb8);
        plVar2 = *pplVar1;
        if (*pplVar1 == (long *)0x0) {
          return;
        }
      }
      param_1 = FUN_00153b90(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar2,
                             param_10,param_11,param_12,param_13,param_14);
      pplVar1 = (long **)(plVar2 + 0xb8);
      param_11 = extraout_RDX;
      plVar2 = *pplVar1;
    } while (*pplVar1 != (long *)0x0);
  }
  return;
}



void server_lock_client(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  if ((*(uint *)(param_9 + 0x84) & 0x2040) != 0) {
    return;
  }
  FUN_00153b90(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
               param_11,param_12,param_13,param_14);
  return;
}



undefined8
server_link_window(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,long param_10,long param_11,ulong param_12,int **param_13,
                  char **param_14,long *param_15)

{
  long *plVar1;
  long *plVar2;
  char *pcVar3;
  uint *puVar4;
  void *pvVar5;
  ulong uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar7;
  undefined8 extraout_RDX_02;
  char **ppcVar8;
  int **ppiVar9;
  int **ppiVar10;
  char **ppcVar11;
  ulong uVar12;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 uVar13;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined auVar14 [16];
  
  uVar12 = param_12 & 0xffffffff;
  uVar6 = param_12;
  ppiVar9 = param_13;
  ppcVar11 = param_14;
  plVar1 = session_group_find(param_9);
  plVar2 = session_group_find(param_11);
  if ((((param_9 != param_11) && (plVar1 != (long *)0x0)) && (plVar2 != (long *)0x0)) &&
     (plVar1 == plVar2)) {
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,param_15,"sessions are grouped",extraout_RDX,uVar6,ppiVar9,ppcVar11,
              (char)param_13);
    return 0xffffffff;
  }
  if ((int)param_12 == -1) {
    pcVar3 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,*(char ***)(param_11 + 0x108),
                                "base-index",extraout_RDX,uVar6,ppiVar9,ppcVar11);
    ppcVar8 = *(char ***)(param_10 + 8);
    uVar12 = (ulong)~(uint)pcVar3;
    uVar13 = extraout_XMM0_Da_00;
LAB_00154160:
    puVar4 = session_attach(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                            (uint *)ppcVar8,uVar12,param_15,(long *)ppiVar9,ppcVar11);
    if (puVar4 == (uint *)0x0) {
      return 0xffffffff;
    }
    uVar7 = extraout_RDX_00;
    uVar13 = extraout_XMM0_Da_01;
    if ((int)param_14 == 0) goto LAB_00154182;
  }
  else {
    ppiVar9 = (int **)(param_11 + 0xf8);
    ppiVar10 = ppiVar9;
    auVar14 = winlink_find_by_index
                        (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         ppiVar9,param_12 & 0xffffffff,extraout_RDX,uVar6,ppiVar9,ppcVar11);
    pvVar5 = auVar14._0_8_;
    uVar13 = extraout_XMM0_Da_02;
    if (pvVar5 == (void *)0x0) {
LAB_00154216:
      ppcVar8 = *(char ***)(param_10 + 8);
      ppiVar9 = ppiVar10;
      goto LAB_00154160;
    }
    ppcVar11 = *(char ***)((long)pvVar5 + 8);
    ppcVar8 = *(char ***)(param_10 + 8);
    if (ppcVar11 == ppcVar8) {
      xasprintf(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,param_15,"same index: %d",param_12 & 0xffffffff,uVar6,
                ppiVar9,ppcVar11,(char)param_13);
      return 0xffffffff;
    }
    if ((int)param_13 == 0) goto LAB_00154160;
    notify_window_unlinked
              (extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
               (uint *)ppcVar11,auVar14._8_8_,uVar6,(long *)ppiVar9,ppcVar11);
    *(uint *)((long)pvVar5 + 0x38) = *(uint *)((long)pvVar5 + 0x38) & 0xfffffff8;
    uVar7 = winlink_stack_remove((long *)(param_11 + 0xe8),(long)pvVar5);
    uVar13 = winlink_remove(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long *)ppiVar9,pvVar5,extraout_RDX_01,uVar6,ppiVar9,ppcVar11);
    ppiVar10 = ppiVar9;
    if (*(void **)(param_11 + 0xe0) != pvVar5) goto LAB_00154216;
    puVar4 = *(uint **)(param_10 + 8);
    *(undefined8 *)(param_11 + 0xe0) = 0;
    puVar4 = session_attach(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                            puVar4,param_12 & 0xffffffff,param_15,(long *)ppiVar9,ppcVar11);
    uVar7 = extraout_RDX_02;
    uVar13 = extraout_XMM0_Da_03;
    if (puVar4 == (uint *)0x0) {
      return 0xffffffff;
    }
  }
  session_select(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                 (ulong)*puVar4,uVar7,param_15,(uint *)ppiVar9,ppcVar11);
LAB_00154182:
  server_redraw_session_group(param_11);
  return 0;
}



long server_next_session(long param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar1 = sessions_RB_MINMAX(&sessions,-1);
  if (lVar1 == 0) {
    return 0;
  }
  lVar3 = 0;
  do {
    if (param_1 == lVar1) {
LAB_001542df:
      lVar2 = sessions_RB_NEXT(lVar1);
    }
    else {
      if (lVar3 != 0) {
        if (*(long *)(lVar1 + 0x38) == *(long *)(lVar3 + 0x38)) {
          if (*(long *)(lVar1 + 0x40) < *(long *)(lVar3 + 0x40)) {
            lVar3 = lVar1;
          }
        }
        else if (*(long *)(lVar1 + 0x38) < *(long *)(lVar3 + 0x38)) {
          lVar3 = lVar1;
        }
        goto LAB_001542df;
      }
      lVar2 = sessions_RB_NEXT(lVar1);
      lVar3 = lVar1;
    }
    lVar1 = lVar2;
    if (lVar1 == 0) {
      return lVar3;
    }
  } while( true );
}



void server_destroy_session
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
               ulong param_13,ulong param_14)

{
  char *pcVar1;
  long lVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  uint *puVar4;
  undefined8 uVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Db_00;
  undefined8 uVar7;
  undefined4 extraout_XMM0_Db_01;
  
  lVar2 = 0;
  pcVar1 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(param_9 + 0x108),"detach-on-destroy",param_11,param_12,
                              param_13,param_14);
  uVar3 = extraout_RDX;
  uVar6 = extraout_XMM0_Da;
  uVar8 = extraout_XMM0_Db;
  if (pcVar1 == (char *)0x0) {
    lVar2 = server_next_session(param_9);
    uVar3 = extraout_RDX_03;
    uVar6 = extraout_XMM0_Da_01;
    uVar8 = extraout_XMM0_Db_01;
  }
  uVar7 = CONCAT44(uVar8,uVar6);
  if (clients != (uint *)0x0) {
    puVar4 = clients;
LAB_00154394:
    do {
      if (*(long *)(puVar4 + 0x166) == param_9) {
        if (lVar2 != 0) {
          *(undefined8 *)(puVar4 + 0x168) = 0;
          uVar5 = 0;
          *(long *)(puVar4 + 0x166) = lVar2;
          uVar3 = server_client_set_key_table
                            (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (long)puVar4,(char *)0x0,uVar3,param_12,param_13,param_14);
          uVar6 = status_timer_start(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     (long)puVar4,uVar5,extraout_RDX_00,param_12,param_13,param_14);
          notify_attached_session_changed
                    (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar4);
          session_update_activity(lVar2);
          uVar3 = 0;
          gettimeofday((timeval *)(lVar2 + 0x28),(__timezone_ptr_t)0x0);
          puVar4[0x108] = puVar4[0x108] | 8;
          uVar7 = alerts_check_session
                            (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                             param_4,param_5,param_6,param_7,param_8,lVar2,uVar3,extraout_RDX_01,
                             (ulong)param_12,param_13,param_14);
          puVar4 = *(uint **)(puVar4 + 0x170);
          uVar3 = extraout_RDX_02;
          if (puVar4 == (uint *)0x0) break;
          goto LAB_00154394;
        }
        puVar4[0x108] = puVar4[0x108] | 4;
        *(undefined8 *)(puVar4 + 0x166) = 0;
      }
      puVar4 = *(uint **)(puVar4 + 0x170);
    } while (puVar4 != (uint *)0x0);
  }
  recalculate_sizes(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  return;
}



void server_destroy_session_group
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
               long *param_13,char **param_14)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  long *plVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar6;
  
  plVar4 = session_group_find(param_9);
  uVar6 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  if (plVar4 == (long *)0x0) {
    server_destroy_session
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,param_9,param_10,extraout_RDX,param_12,(ulong)param_13,
               (ulong)param_14);
    return;
  }
  lVar2 = *plVar4;
  uVar3 = extraout_RDX;
  while (lVar2 != 0) {
    lVar1 = *(long *)(lVar2 + 0x130);
    uVar5 = server_destroy_session
                      (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,param_10,
                       uVar3,param_12,(ulong)param_13,(ulong)param_14);
    uVar6 = session_destroy(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                            param_10,extraout_RDX_00,param_12,param_13,param_14);
    lVar2 = lVar1;
    uVar3 = extraout_RDX_01;
  }
  return;
}



void server_unlink_window
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,void *param_10,undefined8 param_11,undefined *param_12,long *param_13,
               char **param_14)

{
  bool bVar1;
  undefined3 extraout_var;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  bVar1 = session_detach(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,param_13,param_14);
  if (CONCAT31(extraout_var,bVar1) != 0) {
    server_destroy_session_group
              (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               param_10,extraout_RDX,param_12,param_13,param_14);
    return;
  }
  server_redraw_session_group(param_9);
  return;
}



void server_check_unattached
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  undefined8 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  long lVar4;
  char *pcVar5;
  undefined8 in_RCX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  char *pcVar6;
  long *in_R8;
  char **in_R9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  
  lVar4 = sessions_RB_MINMAX(&sessions,-1);
  uVar1 = extraout_RDX;
  uVar2 = extraout_XMM0_Da;
  uVar3 = extraout_XMM0_Db;
  do {
    while( true ) {
      if (lVar4 == 0) {
        return;
      }
      if ((*(byte *)(lVar4 + 0x110) & 1) != 0) break;
LAB_00154500:
      lVar4 = sessions_RB_NEXT(lVar4);
      uVar1 = extraout_RDX_00;
      uVar2 = extraout_XMM0_Da_00;
      uVar3 = extraout_XMM0_Db_00;
    }
    pcVar6 = "destroy-unattached";
    pcVar5 = options_get_number(CONCAT44(uVar3,uVar2),param_2,param_3,param_4,param_5,param_6,
                                param_7,param_8,*(char ***)(lVar4 + 0x108),"destroy-unattached",
                                uVar1,in_RCX,in_R8,in_R9);
    if (pcVar5 == (char *)0x0) goto LAB_00154500;
    session_destroy(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    lVar4,pcVar6,extraout_RDX_01,in_RCX,in_R8,in_R9);
    lVar4 = sessions_RB_NEXT(lVar4);
    uVar1 = extraout_RDX_02;
    uVar2 = extraout_XMM0_Da_02;
    uVar3 = extraout_XMM0_Db_01;
  } while( true );
}



void server_set_identify(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int iVar2;
  char *pcVar3;
  long in_FS_OFFSET;
  long local_38;
  long local_30;
  long local_20;
  
  lVar1 = param_9 + 0x430;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar3 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(*(long *)(param_9 + 0x598) + 0x108),"display-panes-time",
                              param_11,param_12,param_13,param_14);
  local_38 = (long)((int)pcVar3 / 1000);
  local_30 = (long)((int)pcVar3 % 1000) * 1000;
  iVar2 = event_initialized(lVar1);
  if (iVar2 != 0) {
    event_del(lVar1);
  }
  event_set(lVar1,0xffffffff,0,server_callback_identify,param_9);
  event_add(lVar1,&local_38);
  *(uint *)(param_9 + 400) = *(uint *)(param_9 + 400) | 3;
  *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x108;
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void server_clear_identify(long param_1)

{
  if ((*(uint *)(param_1 + 0x420) & 0x100) != 0) {
    *(uint *)(param_1 + 400) = *(uint *)(param_1 + 400) & 0xfffffffc;
    *(uint *)(param_1 + 0x420) = *(uint *)(param_1 + 0x420) & 0xfffffeff | 8;
  }
  return;
}



undefined4
server_set_stdin_callback
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long *param_9,
          undefined *param_10,long param_11,undefined8 *param_12,undefined8 param_13,
          undefined8 param_14)

{
  undefined8 uVar1;
  undefined4 uVar2;
  
  uVar2 = (undefined4)param_1;
  if ((param_9 == (long *)0x0) || (param_9[0xb3] != 0)) {
    uVar2 = 0xffffffff;
    uVar1 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    "no client with stdin",param_10,param_11,param_12,param_13,param_14);
    *param_12 = uVar1;
  }
  else if ((*(uint *)(param_9 + 0x84) & 1) == 0) {
    if (param_9[0x4f] == 0) {
      *(int *)(param_9 + 0xb7) = *(int *)(param_9 + 0xb7) + 1;
      param_9[0x50] = param_11;
      param_9[0x4f] = (long)param_10;
      if (*(int *)(param_9 + 0x52) != 0) {
        uVar2 = (*(code *)param_10)(param_9,1);
      }
      proc_send(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,0xd4,
                0xffffffff,(void *)0x0,0,param_14);
      uVar2 = 0;
    }
    else {
      uVar2 = 0xffffffff;
      uVar1 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"stdin in use"
                      ,param_10,param_11,param_12,param_13,param_14);
      *param_12 = uVar1;
    }
  }
  else {
    uVar2 = 0xffffffff;
    uVar1 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"stdin is a tty"
                    ,param_10,param_11,param_12,param_13,param_14);
    *param_12 = uVar1;
  }
  return uVar2;
}



void server_unzoom_window
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               ulong param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  
  uVar2 = window_unzoom(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        param_10,param_11,param_12,param_13,param_14);
  lVar1 = clients;
  if ((int)uVar2 == 0) {
    for (; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x5c0)) {
      if ((*(long *)(lVar1 + 0x598) != 0) &&
         (param_9 == *(uint **)(*(long *)(*(long *)(lVar1 + 0x598) + 0xe0) + 8))) {
        *(uint *)(lVar1 + 0x420) = *(uint *)(lVar1 + 0x420) | 8;
      }
    }
    param_9[0x60] = param_9[0x60] | 4;
    server_status_window((long)param_9);
    return;
  }
  return;
}



void server_kill_window(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       uint *param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
                       long *param_13,char **param_14)

{
  long lVar1;
  bool bVar2;
  long lVar3;
  undefined8 uVar4;
  undefined7 extraout_var;
  void *pvVar5;
  char *pcVar6;
  long *plVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  uint *puVar8;
  char *pcVar9;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 uVar10;
  
  lVar3 = sessions_RB_MINMAX(&sessions,-1);
  uVar10 = extraout_XMM0_Qa;
  do {
    do {
      lVar1 = lVar3;
      if (lVar1 == 0) {
        recalculate_sizes(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
        return;
      }
      lVar3 = sessions_RB_NEXT(lVar1);
      puVar8 = param_9;
      uVar4 = session_has(lVar1,(long)param_9);
      uVar10 = extraout_XMM0_Qa_00;
    } while ((int)uVar4 == 0);
    server_unzoom_window
              (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               puVar8,extraout_RDX,param_12,(ulong)param_13,param_14);
    while (pvVar5 = (void *)winlink_find_by_window((long *)(lVar1 + 0xf8),(long)param_9),
          uVar10 = extraout_RDX_01, uVar4 = extraout_XMM0_Qa_02, pvVar5 != (void *)0x0) {
      bVar2 = session_detach(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,lVar1,pvVar5,extraout_RDX_01,param_12,param_13,param_14);
      if ((int)CONCAT71(extraout_var,bVar2) != 0) {
        uVar4 = server_destroy_session_group
                          (extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,lVar1,pvVar5,extraout_RDX_00,param_12,param_13,param_14);
        uVar10 = extraout_RDX_04;
        break;
      }
      server_redraw_session_group(lVar1);
    }
    pcVar9 = "renumber-windows";
    pcVar6 = options_get_number(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(lVar1 + 0x108),"renumber-windows",uVar10,param_12,
                                param_13,param_14);
    uVar10 = extraout_XMM0_Qa_03;
    if (pcVar6 != (char *)0x0) {
      plVar7 = session_group_find(lVar1);
      if (plVar7 == (long *)0x0) {
        uVar10 = session_renumber_windows
                           (extraout_XMM0_Qa_04,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,lVar1,pcVar9,extraout_RDX_02,param_12,param_13,param_14);
      }
      else {
        uVar4 = extraout_RDX_02;
        uVar10 = extraout_XMM0_Qa_04;
        for (lVar1 = *plVar7; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x130)) {
          uVar10 = session_renumber_windows
                             (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,
                              pcVar9,uVar4,param_12,param_13,param_14);
          uVar4 = extraout_RDX_03;
        }
      }
    }
  } while( true );
}



void server_destroy_pane(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,uint *param_9,int param_10,undefined8 param_11,char *param_12,
                        long *param_13,char **param_14)

{
  uint *puVar1;
  char *pcVar2;
  long lVar3;
  ulong uVar4;
  char **ppcVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  char *pcVar6;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 extraout_XMM0_Qa_05;
  undefined in_stack_ffffffffffffff68;
  long local_90;
  long local_88 [3];
  long local_70;
  undefined8 local_48;
  undefined8 uStack_40;
  undefined4 local_38;
  long local_30;
  
  puVar1 = *(uint **)(param_9 + 2);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_9[0x1e] == 0xffffffff) {
    pcVar6 = "remain-on-exit";
    pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(puVar1 + 0x62),"remain-on-exit",param_11,param_12,
                                param_13,param_14);
    uVar7 = extraout_RDX;
    uVar8 = extraout_XMM0_Qa;
    if (pcVar2 != (char *)0x0) goto LAB_0015492a;
  }
  else {
    bufferevent_free(*(undefined8 *)(param_9 + 0x20));
    close(param_9[0x1e]);
    param_9[0x1e] = 0xffffffff;
    pcVar6 = "remain-on-exit";
    pcVar2 = options_get_number(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,*(char ***)(puVar1 + 0x62),"remain-on-exit",extraout_RDX_02,
                                param_12,param_13,param_14);
    uVar7 = extraout_RDX_03;
    uVar8 = extraout_XMM0_Qa_01;
    if (pcVar2 != (char *)0x0) {
      screen_write_start((long *)&stack0xffffffffffffff68,(long)param_9,(long)(param_9 + 0x52));
      screen_write_scrollregion
                ((long)&stack0xffffffffffffff68,0,*(int *)(*(long *)(local_90 + 8) + 8) - 1);
      uVar7 = screen_write_cursormove
                        ((long)&stack0xffffffffffffff68,0,*(int *)(*(long *)(local_90 + 8) + 8) - 1)
      ;
      screen_write_linefeed
                (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 (long)&stack0xffffffffffffff68,1,extraout_RDX_04,param_12,param_13,param_14);
      local_38 = 0x1010000;
      uStack_40 = 0x20;
      local_48 = 0x80000080100;
      screen_write_puts(0x80000080000,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        &stack0xffffffffffffff68,(long)&local_48,"Pane is dead",param_12,param_13,
                        (size_t)param_14,in_stack_ffffffffffffff68);
      uVar7 = screen_write_stop();
      param_9[0xc] = param_9[0xc] | 1;
      if (param_10 != 0) {
        uVar4 = cmd_find_from_pane(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   local_88,(long)param_9,extraout_RDX_05,(ulong)param_12,
                                   (ulong)param_13,(ulong)param_14);
        if ((int)uVar4 == 0) {
          ppcVar5 = (char **)hooks_get(local_70);
          hooks_run(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    ppcVar5,0,(long)local_88,"pane-died",param_13,param_14,in_stack_ffffffffffffff68
                   );
        }
      }
      goto LAB_0015492a;
    }
  }
  uVar7 = server_unzoom_window
                    (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar1,pcVar6,
                     uVar7,param_12,(ulong)param_13,param_14);
  layout_close_pane(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                    pcVar6,extraout_RDX_00,param_12,param_13,param_14);
  uVar8 = window_remove_pane((long)puVar1,param_9);
  uVar7 = extraout_RDX_01;
  if (param_10 != 0) {
    param_9 = puVar1;
    uVar4 = cmd_find_from_window
                      (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_88,
                       (long)puVar1,extraout_RDX_01,(ulong)param_12,(ulong)param_13,(ulong)param_14)
    ;
    uVar7 = extraout_RDX_06;
    uVar8 = extraout_XMM0_Qa_03;
    if ((int)uVar4 == 0) {
      ppcVar5 = (char **)hooks_get(local_70);
      param_12 = "pane-exited";
      param_9 = (uint *)0x0;
      hooks_run(extraout_XMM0_Qa_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppcVar5,
                0,(long)local_88,"pane-exited",param_13,param_14,in_stack_ffffffffffffff68);
      uVar7 = extraout_RDX_07;
      uVar8 = extraout_XMM0_Qa_05;
    }
  }
  lVar3 = clients;
  if (*(long *)(puVar1 + 0x52) == 0) {
    server_kill_window(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar1,param_9,
                       uVar7,param_12,param_13,param_14);
  }
  else {
    for (; lVar3 != 0; lVar3 = *(long *)(lVar3 + 0x5c0)) {
      while ((*(long *)(lVar3 + 0x598) == 0 ||
             (puVar1 != *(uint **)(*(long *)(*(long *)(lVar3 + 0x598) + 0xe0) + 8)))) {
        lVar3 = *(long *)(lVar3 + 0x5c0);
        if (lVar3 == 0) goto LAB_001549d0;
      }
      *(uint *)(lVar3 + 0x420) = *(uint *)(lVar3 + 0x420) | 8;
    }
LAB_001549d0:
    puVar1[0x60] = puVar1[0x60] | 4;
  }
LAB_0015492a:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



bool server_loop(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
                long *param_13,char **param_14)

{
  long lVar1;
  char *pcVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  char *pcVar3;
  char **ppcVar4;
  undefined8 uVar5;
  undefined8 extraout_XMM0_Qa;
  
  uVar5 = server_client_loop(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                             ,param_10,param_11,param_12,param_13,param_14);
  pcVar3 = "exit-unattached";
  ppcVar4 = global_options;
  pcVar2 = options_get_number(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              global_options,"exit-unattached",extraout_RDX,param_12,param_13,
                              param_14);
  lVar1 = clients;
  if ((pcVar2 == (char *)0x0) && (sessions != 0)) {
    return false;
  }
  while( true ) {
    if (lVar1 == 0) {
      cmd_wait_for_flush(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         ppcVar4,pcVar3,extraout_RDX_00,param_12,param_13,param_14);
      return clients == 0;
    }
    if (*(long *)(lVar1 + 0x598) != 0) break;
    lVar1 = *(long *)(lVar1 + 0x5c0);
  }
  return false;
}



void FUN_00154be0(int param_1)

{
  int iVar1;
  long lVar2;
  long lVar3;
  
  lVar2 = windows_RB_MINMAX(&windows,-1);
  do {
    if (lVar2 == 0) {
      return;
    }
    for (lVar3 = *(long *)(lVar2 + 0x148); lVar3 != 0; lVar3 = *(long *)(lVar3 + 0x1f8)) {
      while ((*(int *)(lVar3 + 0x50) == param_1 && (iVar1 = killpg(param_1,0x12), iVar1 != 0))) {
        kill(param_1,0x12);
        lVar3 = *(long *)(lVar3 + 0x1f8);
        if (lVar3 == 0) goto LAB_00154c50;
      }
    }
LAB_00154c50:
    lVar2 = windows_RB_NEXT(lVar2);
  } while( true );
}



void server_set_marked(undefined8 param_1,long param_2,undefined8 param_3)

{
  cmd_find_clear_state((undefined8 *)marked_pane,0,0);
  marked_pane._24_8_ = param_1;
  marked_pane._32_8_ = param_2;
  marked_pane._48_8_ = param_3;
  marked_pane._40_8_ = *(undefined8 *)(param_2 + 8);
  return;
}



void server_clear_marked(void)

{
  cmd_find_clear_state((undefined8 *)marked_pane,0,0);
  return;
}



bool server_is_marked(long param_1,long param_2,long param_3)

{
  bool bVar1;
  
  if ((((param_1 != 0 && param_2 != 0) && (param_3 != 0)) && (marked_pane._24_8_ == param_1)) &&
     ((marked_pane._32_8_ == param_2 && (marked_pane._48_8_ == param_3)))) {
    bVar1 = cmd_find_valid_state(0x1a3fa0);
    return bVar1;
  }
  return false;
}



void server_check_marked(void)

{
  cmd_find_valid_state(0x1a3fa0);
  return;
}



int server_create_socket(void)

{
  int __fd;
  __mode_t __mask;
  int iVar1;
  char *pcVar2;
  int *piVar3;
  long lVar4;
  sockaddr *psVar5;
  long in_FS_OFFSET;
  sockaddr local_98 [7];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  psVar5 = local_98;
  for (lVar4 = 0xd; lVar4 != 0; lVar4 = lVar4 + -1) {
    *(undefined8 *)psVar5 = 0;
    psVar5 = (sockaddr *)((long)psVar5 + 8);
  }
  local_98[0].sa_family = 1;
  *(undefined4 *)psVar5 = 0;
  *(undefined2 *)((long)psVar5 + 4) = 0;
  pcVar2 = strlcpy(local_98[0].sa_data,socket_path,0x6c);
  if (pcVar2 < (char *)0x6c) {
    unlink(local_98[0].sa_data);
    __fd = socket(1,1,0);
    if (__fd != -1) {
      __mask = umask(0x4f);
      iVar1 = bind(__fd,local_98,0x6e);
      if (iVar1 != -1) {
        umask(__mask);
        iVar1 = listen(__fd,0x10);
        if (iVar1 != -1) {
          setblocking(__fd,0);
          goto LAB_00154e0a;
        }
      }
    }
    __fd = -1;
  }
  else {
    piVar3 = __errno_location();
    __fd = -1;
    *piVar3 = 0x24;
  }
LAB_00154e0a:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return __fd;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void server_send_exit(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                     long *param_13,char **param_14)

{
  void **ppvVar1;
  long lVar2;
  long lVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar4;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  void **ppvVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined8 uVar6;
  undefined4 extraout_XMM0_Db;
  
  uVar6 = cmd_wait_for_flush(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                             ,param_10,param_11,param_12,param_13,param_14);
  uVar4 = extraout_RDX;
  ppvVar1 = clients;
  while (ppvVar5 = ppvVar1, ppvVar1 != (void **)0x0) {
    while( true ) {
      ppvVar1 = (void **)ppvVar5[0xb8];
      if ((*(byte *)(ppvVar5 + 0x84) & 0x40) != 0) break;
      param_13 = (long *)0x0;
      param_12 = 0;
      param_10 = 0xd2;
      proc_send((int)uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)*ppvVar5,
                0xd2,0xffffffff,(void *)0x0,0,param_14);
      uVar6 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
      ppvVar5[0xb3] = (void *)0x0;
      uVar4 = extraout_RDX_01;
      ppvVar5 = ppvVar1;
      if (ppvVar1 == (void **)0x0) goto LAB_00154ed3;
    }
    uVar6 = server_client_lost(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppvVar5
                               ,param_10,uVar4,param_12,(long)param_13,param_14);
    ppvVar5[0xb3] = (void *)0x0;
    uVar4 = extraout_RDX_00;
  }
LAB_00154ed3:
  uVar6 = 0xffffffff;
  lVar2 = sessions_RB_MINMAX(&sessions,-1);
  while (lVar2 != 0) {
    lVar3 = sessions_RB_NEXT(lVar2);
    session_destroy(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    lVar2,uVar6,extraout_RDX_02,param_12,param_13,param_14);
    lVar2 = lVar3;
  }
  return;
}



void server_update_socket(void)

{
  int iVar1;
  long lVar2;
  int iVar3;
  long in_FS_OFFSET;
  stat sStack_a8;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = sessions_RB_MINMAX(&sessions,-1);
  do {
    if (lVar2 == 0) {
      iVar3 = 0;
      if (DAT_0019e6f8 != 0) {
LAB_00154f83:
        DAT_0019e6f8 = iVar3;
        iVar1 = __xstat(1,socket_path,&sStack_a8);
        if (iVar1 == 0) {
          if (iVar3 == 0) {
            sStack_a8.st_mode = sStack_a8.st_mode & 0xffffffb6;
          }
          else {
            if ((sStack_a8.st_mode & 0x100) != 0) {
              sStack_a8.st_mode = sStack_a8.st_mode | 0x40;
            }
            if ((sStack_a8.st_mode & 0x20) != 0) {
              sStack_a8.st_mode = sStack_a8.st_mode | 8;
            }
            if ((sStack_a8.st_mode & 4) != 0) {
              sStack_a8.st_mode = sStack_a8.st_mode | 1;
            }
          }
          chmod(socket_path,sStack_a8.st_mode);
        }
      }
LAB_00154fca:
      if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
        return;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    if ((*(byte *)(lVar2 + 0x110) & 1) == 0) {
      iVar3 = 1;
      if (DAT_0019e6f8 != 1) goto LAB_00154f83;
      goto LAB_00154fca;
    }
    lVar2 = sessions_RB_NEXT(lVar2);
  } while( true );
}



void server_add_accept(int param_1)

{
  int iVar1;
  long in_FS_OFFSET;
  long local_28;
  undefined8 local_20;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_28 = (long)param_1;
  local_20 = 0;
  iVar1 = event_initialized(server_ev_accept);
  if (iVar1 != 0) {
    event_del(server_ev_accept);
  }
  if (param_1 == 0) {
    event_set(server_ev_accept,server_fd,2,server_accept,0);
    event_add(server_ev_accept,0);
  }
  else {
    event_set(server_ev_accept,server_fd,1,server_accept,0);
    event_add(server_ev_accept,&local_28);
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



uint server_start(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 ulong *param_9,int param_10,char *param_11,undefined8 param_12,undefined8 param_13,
                 undefined8 param_14)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  uint *__fds;
  code *pcVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  ulong uVar5;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  ulong extraout_RDX_10;
  undefined8 extraout_RDX_11;
  undefined8 extraout_RDX_12;
  undefined8 extraout_RDX_13;
  undefined8 extraout_RDX_14;
  ulong extraout_RDX_15;
  undefined8 uVar6;
  ulong *puVar7;
  code *pcVar8;
  undefined8 *puVar9;
  char **ppcVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 uVar12;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined in_stack_ffffffffffffffa8;
  uint local_50;
  uint local_4c;
  char *local_48;
  undefined *local_40;
  char *local_38;
  char *local_30;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (tmate_foreground == 0) {
    __fds = &local_50;
    uVar6 = 1;
    iVar1 = socketpair(1,1,0,(int *)__fds);
    param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    if (iVar1 != 0) {
                    // WARNING: Subroutine does not return
      fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
            "socketpair failed",uVar6,extraout_RDX,__fds,param_13,param_14,in_stack_ffffffffffffffa8
           );
    }
  }
  pcVar4 = server_signal;
  puVar7 = param_9;
  server_proc = proc_start(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"server",
                           param_9,1,server_signal,param_13,param_14);
  if (server_proc != (undefined8 *)0x0) {
    uVar5 = (ulong)local_50;
    close(local_50);
    iVar1 = log_get_level();
    uVar6 = extraout_RDX_00;
    uVar11 = extraout_XMM0_Da_00;
    if (3 < iVar1) {
      uVar11 = tty_create_log(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                              param_4,param_5,param_6,param_7,param_8);
      uVar6 = extraout_RDX_13;
    }
    windows = 0;
    DAT_001a3fe8 = &clients;
    DAT_001a4018 = &session_groups;
    all_window_panes = 0;
    clients = 0;
    sessions = 0;
    session_groups = 0;
    uVar6 = mode_key_init_trees(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar5
                                ,puVar7,uVar6,pcVar4,param_13,param_14);
    uVar11 = tmate_session_init(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                param_9);
    key_bindings_init(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,puVar7,
                      extraout_RDX_01,pcVar4,param_13,param_14);
    uVar6 = 0;
    gettimeofday((timeval *)start_time,(__timezone_ptr_t)0x0);
    server_fd = server_create_socket();
    if (server_fd != -1) {
      uVar12 = server_update_socket();
      uVar5 = (ulong)tmate_foreground;
      if (tmate_foreground == 0) {
        uVar12 = server_client_create
                           (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_4c,
                            uVar6,uVar5,pcVar4,param_13,param_14);
        uVar5 = extraout_RDX_15;
      }
      if (-1 < param_10) {
        unlink(param_11);
        free(param_11);
        close(param_10);
        uVar12 = CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04);
        uVar5 = extraout_RDX_10;
      }
      pcVar2 = options_get_number(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  global_s_options,"status-keys",uVar5,pcVar4,param_13,param_14);
      uVar6 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02);
      if (pcVar2 == (char *)0x0) {
        local_48 = "set-option";
        local_40 = &DAT_0017fb45;
        local_38 = "status-keys";
        local_30 = "emacs";
        uVar6 = tmate_exec_cmd_args(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,4,&local_48,
                                    extraout_RDX_03,pcVar4,param_13,param_14);
        uVar12 = extraout_RDX_12;
      }
      else {
        uVar12 = extraout_RDX_03;
        if (pcVar2 == (char *)0x1) {
          local_48 = "set-option";
          local_40 = &DAT_0017fb45;
          local_38 = "status-keys";
          local_30 = "vi";
          uVar6 = tmate_exec_cmd_args(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,
                                      param_3,param_4,param_5,param_6,param_7,param_8,4,&local_48,
                                      extraout_RDX_03,pcVar4,param_13,param_14);
          uVar12 = extraout_RDX_09;
        }
      }
      pcVar2 = "mode-keys";
      ppcVar10 = global_w_options;
      pcVar3 = options_get_number(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  global_w_options,"mode-keys",uVar12,pcVar4,param_13,param_14);
      if (pcVar3 == (char *)0x0) {
        pcVar2 = (char *)&local_48;
        ppcVar10 = (char **)0x4;
        local_48 = "set-window-option";
        local_40 = &DAT_0017fb45;
        local_38 = "status-keys";
        local_30 = "emacs";
        uVar11 = tmate_exec_cmd_args(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,
                                     param_3,param_4,param_5,param_6,param_7,param_8,4,
                                     (char **)pcVar2,extraout_RDX_04,pcVar4,param_13,param_14);
        uVar6 = extraout_RDX_11;
      }
      else {
        uVar6 = extraout_RDX_04;
        uVar11 = extraout_XMM0_Da_03;
        if (pcVar3 == (char *)0x1) {
          pcVar2 = (char *)&local_48;
          ppcVar10 = (char **)0x4;
          local_48 = "set-window-option";
          local_40 = &DAT_0017fb45;
          local_38 = "status-keys";
          local_30 = "vi";
          uVar11 = tmate_exec_cmd_args(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,
                                       param_3,param_4,param_5,param_6,param_7,param_8,4,
                                       (char **)pcVar2,extraout_RDX_04,pcVar4,param_13,param_14);
          uVar6 = extraout_RDX_08;
        }
      }
      uVar6 = start_cfg(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppcVar10,
                        pcVar2,uVar6,pcVar4,param_13,param_14);
      status_prompt_load_history
                (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppcVar10,pcVar2,
                 extraout_RDX_05,pcVar4,param_13,param_14);
      uVar11 = server_add_accept(0);
      uVar6 = extraout_RDX_06;
      if (tmate_foreground != 0) {
        uVar11 = run_initial_client_cmd
                           (uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
        uVar6 = extraout_RDX_14;
      }
      pcVar8 = server_loop;
      puVar9 = server_proc;
      uVar6 = proc_loop(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,server_proc,
                        server_loop,uVar6,pcVar4,param_13,param_14);
      status_prompt_save_history
                (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar9,pcVar8,
                 extraout_RDX_07,pcVar4,param_13,param_14);
      unlink(socket_path);
                    // WARNING: Subroutine does not return
      exit(0);
    }
                    // WARNING: Subroutine does not return
    fatal(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
          "couldn\'t create socket",uVar6,extraout_RDX_02,pcVar4,param_13,param_14,
          in_stack_ffffffffffffffa8);
  }
  close(local_4c);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return local_50;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void server_accept(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  int param_9,uint param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  uint __fd;
  int *piVar2;
  undefined uVar3;
  undefined7 uVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  sockaddr *__addr;
  long in_FS_OFFSET;
  bool bVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffff48;
  socklen_t local_ac;
  sockaddr local_a8 [8];
  long local_20;
  
  uVar3 = (undefined)param_12;
  uVar4 = (undefined7)((ulong)param_12 >> 8);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_ac = 0x80;
  server_add_accept(0);
  if ((param_10 & 2) != 0) {
    __addr = local_a8;
    __fd = accept(param_9,__addr,&local_ac);
    if (__fd == 0xffffffff) {
      piVar2 = __errno_location();
      iVar1 = *piVar2;
      bVar5 = iVar1 == 4;
      if ((iVar1 != 0xb && !bVar5) && (iVar1 != 0x67)) {
        if (1 < iVar1 - 0x17U) {
                    // WARNING: Subroutine does not return
          fatal(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                "accept failed",__addr,CONCAT71((int7)((ulong)extraout_RDX_00 >> 8),bVar5),
                CONCAT71(uVar4,iVar1 == 0xb || bVar5),param_13,param_14,in_stack_ffffffffffffff48);
        }
        server_add_accept(1);
      }
    }
    else if (server_exit == 0) {
      server_client_create
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,__fd,__addr,extraout_RDX,CONCAT71(uVar4,uVar3),param_13,param_14);
    }
    else {
      close(__fd);
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void server_child_exited(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,uint param_9,uint param_10,undefined8 param_11,char *param_12,
                        long *param_13,char **param_14)

{
  int *piVar1;
  long lVar2;
  long lVar3;
  undefined8 extraout_RDX;
  uint *puVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Db;
  
  lVar2 = windows_RB_MINMAX(&windows,-1);
  uVar5 = extraout_XMM0_Da;
  do {
    do {
      if (lVar2 == 0) {
        piVar1 = all_jobs;
        while( true ) {
          if (piVar1 == (int *)0x0) {
            return;
          }
          if (piVar1[4] == param_9) break;
          piVar1 = *(int **)(piVar1 + 0x10);
        }
        job_died(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,piVar1,param_10);
        return;
      }
      lVar3 = windows_RB_NEXT(lVar2);
      puVar4 = *(uint **)(lVar2 + 0x148);
      lVar2 = lVar3;
      uVar5 = extraout_XMM0_Da_00;
    } while (puVar4 == (uint *)0x0);
    do {
      if (puVar4[0x14] == param_9) {
        puVar4[0x1d] = param_10;
        uVar5 = server_destroy_pane(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,
                                    param_4,param_5,param_6,param_7,param_8,puVar4,1,extraout_RDX,
                                    param_12,param_13,param_14);
        break;
      }
      puVar4 = *(uint **)(puVar4 + 0x7e);
    } while (puVar4 != (uint *)0x0);
  } while( true );
}



void server_child_signal(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        )

{
  uint uVar1;
  int *piVar2;
  char *in_RCX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint *puVar3;
  long *in_R8;
  char **in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffe8;
  uint local_14;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  while( true ) {
    puVar3 = &local_14;
    uVar1 = waitpid(-1,(int *)&local_14,3);
    if (uVar1 == 0xffffffff) break;
    if (uVar1 == 0) goto LAB_0015568a;
    if ((char)local_14 == '\x7f') {
      if (1 < (local_14 >> 8 & 0xff) - 0x15) {
        FUN_00154be0(uVar1);
      }
    }
    else if (((local_14 & 0x7f) == 0) || ('\x01' < (char)((char)(local_14 & 0x7f) + '\x01'))) {
      server_child_exited(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,uVar1,local_14,extraout_RDX,in_RCX,in_R8,
                          in_R9);
    }
  }
  piVar2 = __errno_location();
  if (*piVar2 != 10) {
                    // WARNING: Subroutine does not return
    fatal(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
          "waitpid failed",puVar3,extraout_RDX_00,in_RCX,in_R8,in_R9,in_stack_ffffffffffffffe8);
  }
LAB_0015568a:
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void server_signal(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  long *param_13,char **param_14)

{
  int iVar1;
  
  iVar1 = (int)param_9;
  if (iVar1 != 0xf) {
    if (0xf < iVar1) {
      if (iVar1 == 0x11) {
        server_child_signal(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
        return;
      }
      return;
    }
    if (iVar1 != 2) {
      if (iVar1 != 10) {
        return;
      }
      event_del();
      iVar1 = server_create_socket();
      if (iVar1 == -1) {
        server_add_accept(0);
        return;
      }
      close(server_fd);
      server_fd = iVar1;
      server_update_socket();
      server_add_accept(0);
      return;
    }
  }
  server_exit = 1;
  server_send_exit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                   param_11,param_12,param_13,param_14);
  return;
}



void server_child_stopped(int param_1,uint param_2)

{
  if (1 < (param_2 >> 8 & 0xff) - 0x15) {
    FUN_00154be0(param_1);
    return;
  }
  return;
}



void session_free(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,void *param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  undefined1 unaff_BPL;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "session %s freed (%d references)",*(undefined8 *)((long)param_11 + 8),
           (ulong)*(uint *)((long)param_11 + 0x128),param_13,param_14,unaff_BPL);
  if (*(int *)((long)param_11 + 0x128) != 0) {
    return;
  }
  environ_free(*(long **)((long)param_11 + 0x120));
  options_free(*(long **)((long)param_11 + 0x108));
  hooks_free(*(long **)((long)param_11 + 0x100));
  free(*(void **)((long)param_11 + 8));
  free(param_11);
  return;
}



void session_lock_timer(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9,undefined8 param_10,long param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  undefined8 uVar2;
  undefined8 extraout_RDX;
  undefined1 unaff_BPL;
  char *pcVar3;
  
  if ((*(byte *)(param_11 + 0x110) & 1) != 0) {
    return;
  }
  uVar2 = *(undefined8 *)(param_11 + 0x38);
  pcVar3 = "session %s locked, activity time %lld";
  uVar1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "session %s locked, activity time %lld",*(undefined8 *)(param_11 + 8),uVar2,
                   param_13,param_14,unaff_BPL);
  uVar2 = server_lock_session(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11
                              ,pcVar3,extraout_RDX,uVar2,param_13,param_14);
  recalculate_sizes(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  return;
}



undefined8
FUN_00155840(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9
            ,long param_10,undefined8 param_11,undefined8 param_12,uint *param_13,
            undefined8 param_14)

{
  undefined8 extraout_RDX;
  long lVar1;
  undefined8 uVar2;
  
  winlink_stack_remove((long *)(param_9 + 0xe8),param_10);
  lVar1 = *(long *)(param_9 + 0xe0);
  winlink_stack_push((long *)(param_9 + 0xe8),lVar1);
  *(long *)(param_9 + 0xe0) = param_10;
  winlink_clear_flags(param_10);
  uVar2 = tmate_sync_layout();
  window_update_activity
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*(uint **)(param_10 + 8),
             lVar1,extraout_RDX,param_12,param_13,param_14);
  return 0;
}



void sessions_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_00155898:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x150);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x158) != 1)) {
        *(undefined4 *)(*param_1 + 0x158) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x150);
      lVar3 = *(long *)(lVar2 + 0x140);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x148);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x158) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x148) == param_2) {
          lVar3 = *(long *)(param_2 + 0x140);
          *(long *)(lVar1 + 0x148) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x150) = lVar2;
            lVar3 = lVar2;
LAB_00155b7a:
            *(long *)(lVar3 + 0x140) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x150) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x150);
            *(long *)(param_2 + 0x150) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x140) == lVar1) goto LAB_00155b7a;
              *(long *)(lVar3 + 0x148) = param_2;
            }
          }
          *(long *)(param_2 + 0x140) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x140);
          *(long *)(lVar1 + 0x150) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x158) = 0;
        lVar1 = *(long *)(lVar3 + 0x148);
        *(undefined4 *)(lVar2 + 0x158) = 1;
        *(long *)(lVar2 + 0x140) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x150) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x150);
        *(long *)(lVar3 + 0x150) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x140) == lVar2) {
          *(long *)(lVar1 + 0x140) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x148) = lVar3;
        }
        *(long *)(lVar3 + 0x148) = lVar2;
        *(long *)(lVar2 + 0x150) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x158) = 0;
        *(undefined4 *)(lVar1 + 0x158) = 0;
        *(undefined4 *)(lVar2 + 0x158) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x158) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x140) == param_2) {
        lVar3 = *(long *)(param_2 + 0x148);
        *(long *)(lVar1 + 0x140) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x150) = lVar2;
          lVar3 = lVar2;
LAB_00155a2d:
          if (*(long *)(lVar3 + 0x140) == lVar1) {
            *(long *)(lVar3 + 0x140) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x148) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x150) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x150);
          *(long *)(param_2 + 0x150) = lVar3;
          if (lVar3 != 0) goto LAB_00155a2d;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x148) = lVar1;
        *(long *)(lVar1 + 0x150) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x158) = 0;
      lVar1 = *(long *)(lVar2 + 0x148);
      *(undefined4 *)(lVar2 + 0x158) = 1;
      lVar3 = *(long *)(lVar1 + 0x140);
      *(long *)(lVar2 + 0x148) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x150) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x150);
      *(long *)(lVar1 + 0x150) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x140) == lVar2) {
        *(long *)(lVar3 + 0x140) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x148) = lVar1;
      }
      *(long *)(lVar1 + 0x140) = lVar2;
      *(long *)(lVar2 + 0x150) = lVar1;
      goto LAB_00155898;
    }
    *(undefined4 *)(lVar3 + 0x158) = 0;
    *(undefined4 *)(lVar1 + 0x158) = 0;
    *(undefined4 *)(lVar2 + 0x158) = 1;
    param_2 = lVar2;
  } while( true );
}



void sessions_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_00155c4a(param_1,param_2,param_3);
  return;
}



void FUN_00155c4a(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x158) != 0)) goto LAB_00155d4e;
    if (*param_1 == param_3) goto joined_r0x00155f35;
    lVar2 = *(long *)(param_2 + 0x140);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x158) == 1) {
        lVar1 = *(long *)(lVar2 + 0x148);
        *(undefined4 *)(lVar2 + 0x158) = 0;
        *(undefined4 *)(param_2 + 0x158) = 1;
        *(long *)(param_2 + 0x140) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x150) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x150);
        *(long *)(lVar2 + 0x150) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x150) + 0x140) == param_2) {
          *(long *)(lVar3 + 0x140) = lVar2;
          lVar1 = *(long *)(param_2 + 0x140);
        }
        else {
          *(long *)(lVar3 + 0x148) = lVar2;
        }
        *(long *)(lVar2 + 0x148) = param_2;
        *(long *)(param_2 + 0x150) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x140);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x158) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x148);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x158) == 0)) goto LAB_00155c33;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x158) != 0)) goto LAB_00155eac;
        lVar2 = *(long *)(lVar3 + 0x140);
        *(undefined4 *)(lVar3 + 0x158) = 0;
        *(undefined4 *)(lVar1 + 0x158) = 1;
        *(long *)(lVar1 + 0x148) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x150) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x150);
        *(long *)(lVar3 + 0x150) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x140) == lVar1) {
          *(long *)(lVar2 + 0x140) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x148) = lVar3;
        }
        *(long *)(lVar3 + 0x140) = lVar1;
        *(long *)(lVar1 + 0x150) = lVar3;
        lVar3 = *(long *)(param_2 + 0x140);
        lVar2 = *(long *)(lVar3 + 0x140);
        *(undefined4 *)(lVar3 + 0x158) = *(undefined4 *)(param_2 + 0x158);
        *(undefined4 *)(param_2 + 0x158) = 0;
        if (lVar2 != 0) goto LAB_00155ecb;
      }
      else {
LAB_00155eac:
        lVar3 = *(long *)(param_2 + 0x140);
        *(undefined4 *)(lVar1 + 0x158) = *(undefined4 *)(param_2 + 0x158);
        *(undefined4 *)(param_2 + 0x158) = 0;
LAB_00155ecb:
        *(undefined4 *)(lVar2 + 0x158) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x148);
      *(long *)(param_2 + 0x140) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x150) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x150);
      *(long *)(lVar3 + 0x150) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x150) + 0x140) == param_2) {
        *(long *)(lVar2 + 0x140) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x148) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x148) = param_2;
      *(long *)(param_2 + 0x150) = lVar3;
      goto joined_r0x00155f35;
    }
    lVar2 = *(long *)(param_2 + 0x148);
    lVar3 = *(long *)(lVar2 + 0x140);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x158) == 1) {
      *(undefined4 *)(lVar2 + 0x158) = 0;
      *(undefined4 *)(param_2 + 0x158) = 1;
      *(long *)(param_2 + 0x148) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x150) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x150);
      *(long *)(lVar2 + 0x150) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x140) == param_2) {
        *(long *)(lVar4 + 0x140) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x148) = lVar2;
        lVar1 = *(long *)(param_2 + 0x148);
      }
      *(long *)(lVar2 + 0x140) = param_2;
      lVar3 = *(long *)(lVar1 + 0x140);
      *(long *)(param_2 + 0x150) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x158) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x148);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x158) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x148);
        *(undefined4 *)(lVar3 + 0x158) = 0;
        *(undefined4 *)(lVar1 + 0x158) = 1;
        *(long *)(lVar1 + 0x140) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x150) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x150);
        *(long *)(lVar3 + 0x150) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x140) == lVar1) {
          *(long *)(lVar2 + 0x140) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x148) = lVar3;
        }
        *(long *)(lVar3 + 0x148) = lVar1;
        lVar4 = *(long *)(param_2 + 0x148);
        *(long *)(lVar1 + 0x150) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x148);
        *(undefined4 *)(lVar4 + 0x158) = *(undefined4 *)(param_2 + 0x158);
        *(undefined4 *)(param_2 + 0x158) = 0;
        if (lVar2 != 0) goto LAB_00155ce5;
        goto LAB_00155cef;
      }
LAB_00155cc8:
      lVar4 = *(long *)(param_2 + 0x148);
      *(undefined4 *)(lVar1 + 0x158) = *(undefined4 *)(param_2 + 0x158);
      *(undefined4 *)(param_2 + 0x158) = 0;
LAB_00155ce5:
      *(undefined4 *)(lVar2 + 0x158) = 0;
LAB_00155cef:
      lVar2 = *(long *)(lVar4 + 0x140);
      *(long *)(param_2 + 0x148) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x150) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x150);
      *(long *)(lVar4 + 0x150) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x140) == param_2) {
        *(long *)(lVar2 + 0x140) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x148) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x140) = param_2;
      *(long *)(param_2 + 0x150) = lVar4;
joined_r0x00155f35:
      if (param_3 == 0) {
        return;
      }
LAB_00155d4e:
      *(undefined4 *)(param_3 + 0x158) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x148);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x158) != 0)) goto LAB_00155cc8;
LAB_00155c33:
    *(undefined4 *)(lVar1 + 0x158) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x150);
  } while( true );
}



long sessions_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x148);
  if (*(long *)(param_2 + 0x140) == 0) {
    lVar7 = *(long *)(param_2 + 0x150);
    iVar4 = *(int *)(param_2 + 0x158);
    if (lVar6 != 0) goto LAB_00156222;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x140);
      } while (*(long *)(lVar5 + 0x140) != 0);
      lVar7 = *(long *)(lVar5 + 0x150);
      lVar6 = *(long *)(lVar5 + 0x148);
      iVar4 = *(int *)(lVar5 + 0x158);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x150) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x150);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x140) == lVar5) {
        *(long *)(lVar7 + 0x140) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x148) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x144);
      uVar2 = *(undefined4 *)(param_2 + 0x148);
      uVar3 = *(undefined4 *)(param_2 + 0x14c);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x140) = *(undefined4 *)(param_2 + 0x140);
      *(undefined4 *)(lVar5 + 0x144) = uVar1;
      *(undefined4 *)(lVar5 + 0x148) = uVar2;
      *(undefined4 *)(lVar5 + 0x14c) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x154);
      uVar2 = *(undefined4 *)(param_2 + 0x158);
      uVar3 = *(undefined4 *)(param_2 + 0x15c);
      *(undefined4 *)(lVar5 + 0x150) = *(undefined4 *)(param_2 + 0x150);
      *(undefined4 *)(lVar5 + 0x154) = uVar1;
      *(undefined4 *)(lVar5 + 0x158) = uVar2;
      *(undefined4 *)(lVar5 + 0x15c) = uVar3;
      lVar8 = *(long *)(param_2 + 0x150);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x140) == param_2) {
        *(long *)(lVar8 + 0x140) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x148) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x140) + 0x150) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x148) != 0) {
        *(long *)(*(long *)(param_2 + 0x148) + 0x150) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x150)) {
      }
      goto joined_r0x00156240;
    }
    lVar7 = *(long *)(param_2 + 0x150);
    iVar4 = *(int *)(param_2 + 0x158);
    lVar6 = *(long *)(param_2 + 0x140);
LAB_00156222:
    *(long *)(lVar6 + 0x150) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x140) == param_2) {
    *(long *)(lVar7 + 0x140) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x148) = lVar6;
  }
joined_r0x00156240:
  if (iVar4 == 0) {
    sessions_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



long sessions_RB_INSERT(long *param_1,long param_2)

{
  char *__s1;
  long lVar1;
  int iVar2;
  long lVar3;
  
  if (*param_1 == 0) {
    *(undefined8 *)(param_2 + 0x150) = 0;
    *(undefined8 *)(param_2 + 0x148) = 0;
    *(undefined8 *)(param_2 + 0x140) = 0;
    *(undefined4 *)(param_2 + 0x158) = 1;
    *param_1 = param_2;
  }
  else {
    __s1 = *(char **)(param_2 + 8);
    lVar1 = *param_1;
    do {
      lVar3 = lVar1;
      iVar2 = strcmp(__s1,*(char **)(lVar3 + 8));
      if (iVar2 < 0) {
        lVar1 = *(long *)(lVar3 + 0x140);
      }
      else {
        if (iVar2 == 0) {
          return lVar3;
        }
        lVar1 = *(long *)(lVar3 + 0x148);
      }
    } while (lVar1 != 0);
    *(long *)(param_2 + 0x150) = lVar3;
    *(undefined8 *)(param_2 + 0x148) = 0;
    *(undefined8 *)(param_2 + 0x140) = 0;
    *(undefined4 *)(param_2 + 0x158) = 1;
    if (iVar2 < 0) {
      *(long *)(lVar3 + 0x140) = param_2;
    }
    else {
      *(long *)(lVar3 + 0x148) = param_2;
    }
  }
  sessions_RB_INSERT_COLOR(param_1,param_2);
  return 0;
}



long sessions_RB_FIND(long *param_1,long param_2)

{
  char *__s1;
  int iVar1;
  long lVar2;
  
  lVar2 = *param_1;
  if (lVar2 != 0) {
    __s1 = *(char **)(param_2 + 8);
    do {
      while( true ) {
        iVar1 = strcmp(__s1,*(char **)(lVar2 + 8));
        if (iVar1 < 0) break;
        if (iVar1 == 0) {
          return lVar2;
        }
        lVar2 = *(long *)(lVar2 + 0x148);
        if (lVar2 == 0) {
          return 0;
        }
      }
      lVar2 = *(long *)(lVar2 + 0x140);
    } while (lVar2 != 0);
  }
  return lVar2;
}



long sessions_RB_NFIND(long *param_1,long param_2)

{
  char *__s1;
  long lVar1;
  int iVar2;
  long lVar3;
  long lVar4;
  
  if (*param_1 == 0) {
    lVar4 = 0;
  }
  else {
    __s1 = *(char **)(param_2 + 8);
    lVar1 = *param_1;
    lVar4 = 0;
    do {
      while( true ) {
        lVar3 = lVar1;
        iVar2 = strcmp(__s1,*(char **)(lVar3 + 8));
        if (-1 < iVar2) break;
        lVar1 = *(long *)(lVar3 + 0x140);
        lVar4 = lVar3;
        if (*(long *)(lVar3 + 0x140) == 0) {
          return lVar3;
        }
      }
      if (iVar2 == 0) {
        return lVar3;
      }
      lVar1 = *(long *)(lVar3 + 0x148);
    } while (*(long *)(lVar3 + 0x148) != 0);
  }
  return lVar4;
}



long sessions_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x148);
  if (*(long *)(param_1 + 0x148) == 0) {
    lVar2 = *(long *)(param_1 + 0x150);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x140) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x148))) {
      while (lVar1 = *(long *)(lVar2 + 0x150), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x148);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x140);
    } while (*(long *)(lVar2 + 0x140) != 0);
  }
  return lVar2;
}



long sessions_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x140);
  if (*(long *)(param_1 + 0x140) == 0) {
    lVar2 = *(long *)(param_1 + 0x150);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x148) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x140))) {
      while (lVar1 = *(long *)(lVar2 + 0x150), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x140);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x148);
    } while (*(long *)(lVar2 + 0x148) != 0);
  }
  return lVar2;
}



long sessions_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x148);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x140);
    }
  }
  return lVar2;
}



void session_cmp(long param_1,long param_2)

{
  strcmp(*(char **)(param_1 + 8),*(char **)(param_2 + 8));
  return;
}



undefined8 session_alive(long param_1)

{
  long lVar1;
  long lVar2;
  long extraout_RDX;
  
  lVar1 = sessions;
  if (sessions == 0) {
    return 0;
  }
  do {
    lVar2 = lVar1;
    lVar1 = *(long *)(lVar2 + 0x140);
  } while (*(long *)(lVar2 + 0x140) != 0);
  if (param_1 != lVar2) {
    do {
      lVar2 = sessions_RB_NEXT(lVar2);
      if (lVar2 == 0) {
        return 0;
      }
    } while (extraout_RDX != lVar2);
  }
  return 1;
}



void session_find(undefined8 param_1)

{
  long in_FS_OFFSET;
  undefined auStack_178 [8];
  undefined8 local_170;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_170 = param_1;
  sessions_RB_FIND(&sessions,(long)auStack_178);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int * session_find_by_id(int param_1)

{
  int *piVar1;
  int *piVar2;
  int extraout_EDX;
  
  piVar1 = sessions;
  if (sessions == (int *)0x0) {
    return (int *)0x0;
  }
  do {
    piVar2 = piVar1;
    piVar1 = *(int **)(piVar2 + 0x50);
  } while (*(int **)(piVar2 + 0x50) != (int *)0x0);
  if (*piVar2 != param_1) {
    do {
      piVar2 = (int *)sessions_RB_NEXT((long)piVar2);
      if (piVar2 == (int *)0x0) {
        return (int *)0x0;
      }
    } while (*piVar2 != extraout_EDX);
  }
  return piVar2;
}



int * session_find_by_id_str(char *param_1)

{
  longlong lVar1;
  int *piVar2;
  long in_FS_OFFSET;
  char *local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if (*param_1 == '$') {
    lVar1 = strtonum(param_1 + 1,0,0xffffffff,&local_18);
    if (local_18 == (char *)0x0) {
      piVar2 = session_find_by_id((int)lVar1);
      goto LAB_00156722;
    }
  }
  piVar2 = (int *)0x0;
LAB_00156722:
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return piVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void session_unref(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9)

{
  int *piVar1;
  undefined8 in_R8;
  undefined8 in_R9;
  undefined1 unaff_R12B;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "session %s has %d references",*(undefined8 *)(param_9 + 8),
           (ulong)*(uint *)(param_9 + 0x128),in_R8,in_R9,unaff_R12B);
  piVar1 = (int *)(param_9 + 0x128);
  *piVar1 = *piVar1 + -1;
  if (*piVar1 != 0) {
    return;
  }
  event_once(0xffffffff,1,session_free,param_9,0);
  return;
}



bool session_check_name(char *param_1)

{
  size_t sVar1;
  
  if (*param_1 != '\0') {
    sVar1 = strcspn(param_1,":.");
    return param_1[sVar1] == '\0';
  }
  return false;
}


/*
Unable to decompile 'session_update_activity'
Cause: 
Low-level Error: Overlapping input varnodes
*/


long session_next_session(long param_1)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  
  if ((sessions == 0) || (lVar4 = sessions, uVar2 = session_alive(param_1), (int)uVar2 == 0)) {
    return 0;
  }
  lVar3 = sessions_RB_NEXT(param_1);
  if (lVar3 == 0) {
    do {
      lVar1 = *(long *)(lVar4 + 0x140);
      lVar3 = lVar4;
      if (lVar1 == 0) break;
      lVar4 = *(long *)(lVar1 + 0x140);
      lVar3 = lVar1;
    } while (lVar4 != 0);
  }
  if (lVar3 == param_1) {
    lVar3 = 0;
  }
  return lVar3;
}



long session_previous_session(long param_1)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  long lVar4;
  
  if ((sessions == 0) || (lVar4 = sessions, uVar2 = session_alive(param_1), (int)uVar2 == 0)) {
    return 0;
  }
  lVar3 = sessions_RB_PREV(param_1);
  if (lVar3 == 0) {
    do {
      lVar1 = *(long *)(lVar4 + 0x148);
      lVar3 = lVar4;
      if (lVar1 == 0) break;
      lVar4 = *(long *)(lVar1 + 0x148);
      lVar3 = lVar1;
    } while (lVar4 != 0);
  }
  if (lVar3 == param_1) {
    lVar3 = 0;
  }
  return lVar3;
}



undefined8 session_has(long param_1,long param_2)

{
  long lVar1;
  
  lVar1 = winlinks_RB_MINMAX((long *)(param_1 + 0xf8),-1);
  while( true ) {
    if (lVar1 == 0) {
      return 0;
    }
    if (*(long *)(lVar1 + 8) == param_2) break;
    lVar1 = winlinks_RB_NEXT(lVar1);
  }
  return 1;
}



bool session_is_linked(long param_1,long param_2)

{
  long lVar1;
  int iVar2;
  long *plVar3;
  long lVar4;
  
  plVar3 = session_groups;
  if (session_groups != (long *)0x0) {
    do {
      lVar4 = *plVar3;
      for (lVar1 = lVar4; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x130)) {
        if (param_1 == lVar1) {
          iVar2 = 0;
          do {
            lVar4 = *(long *)(lVar4 + 0x130);
            iVar2 = iVar2 + 1;
          } while (lVar4 != 0);
          return *(int *)(param_2 + 400) != iVar2;
        }
      }
      plVar3 = (long *)plVar3[2];
    } while (plVar3 != (long *)0x0);
  }
  return *(int *)(param_2 + 400) != 1;
}



long session_next_alert(long param_1)

{
  if (param_1 == 0) {
    return 0;
  }
  if ((*(byte *)(param_1 + 0x38) & 7) != 0) {
    return param_1;
  }
  do {
    param_1 = winlink_next(param_1);
    if (param_1 == 0) {
      return 0;
    }
  } while ((*(byte *)(param_1 + 0x38) & 7) == 0);
  return param_1;
}



undefined8
session_next(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9
            ,int param_10,undefined8 param_11,undefined8 param_12,uint *param_13,undefined8 param_14
            )

{
  long lVar1;
  undefined8 uVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 uVar3;
  undefined8 extraout_XMM0_Qa_03;
  
  if (*(long *)(param_9 + 0xe0) != 0) {
    lVar1 = winlink_next(*(long *)(param_9 + 0xe0));
    uVar2 = extraout_RDX;
    uVar3 = extraout_XMM0_Qa;
    if (param_10 == 0) {
      if ((lVar1 != 0) ||
         (lVar1 = winlinks_RB_MINMAX((long *)(param_9 + 0xf8),-1), uVar2 = extraout_RDX_03,
         uVar3 = extraout_XMM0_Qa_03, lVar1 != 0)) {
LAB_00156b75:
        if (*(long *)(param_9 + 0xe0) != lVar1) {
          uVar2 = FUN_00155840(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,lVar1,uVar2,param_12,param_13,param_14);
          return uVar2;
        }
        return 1;
      }
    }
    else {
      while (lVar1 != 0) {
        if ((*(byte *)(lVar1 + 0x38) & 7) != 0) goto LAB_00156b75;
        lVar1 = winlink_next(lVar1);
        uVar2 = extraout_RDX_00;
        uVar3 = extraout_XMM0_Qa_00;
      }
      lVar1 = winlinks_RB_MINMAX((long *)(param_9 + 0xf8),-1);
      uVar2 = extraout_RDX_01;
      uVar3 = extraout_XMM0_Qa_01;
      while (lVar1 != 0) {
        if ((*(byte *)(lVar1 + 0x38) & 7) != 0) goto LAB_00156b75;
        lVar1 = winlink_next(lVar1);
        uVar2 = extraout_RDX_02;
        uVar3 = extraout_XMM0_Qa_02;
      }
    }
  }
  return 0xffffffff;
}



long session_previous_alert(long param_1)

{
  if (param_1 == 0) {
    return 0;
  }
  if ((*(byte *)(param_1 + 0x38) & 7) != 0) {
    return param_1;
  }
  do {
    param_1 = winlink_previous(param_1);
    if (param_1 == 0) {
      return 0;
    }
  } while ((*(byte *)(param_1 + 0x38) & 7) == 0);
  return param_1;
}



undefined8
session_previous(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,int param_10,undefined8 param_11,undefined8 param_12,uint *param_13,
                undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 uVar3;
  undefined8 extraout_XMM0_Qa_03;
  
  if (*(long *)(param_9 + 0xe0) != 0) {
    lVar1 = winlink_previous(*(long *)(param_9 + 0xe0));
    uVar2 = extraout_RDX;
    uVar3 = extraout_XMM0_Qa;
    if (param_10 == 0) {
      if ((lVar1 != 0) ||
         (lVar1 = winlinks_RB_MINMAX((long *)(param_9 + 0xf8),1), uVar2 = extraout_RDX_03,
         uVar3 = extraout_XMM0_Qa_03, lVar1 != 0)) {
LAB_00156c95:
        if (*(long *)(param_9 + 0xe0) != lVar1) {
          uVar2 = FUN_00155840(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,lVar1,uVar2,param_12,param_13,param_14);
          return uVar2;
        }
        return 1;
      }
    }
    else {
      while (lVar1 != 0) {
        if ((*(byte *)(lVar1 + 0x38) & 7) != 0) goto LAB_00156c95;
        lVar1 = winlink_previous(lVar1);
        uVar2 = extraout_RDX_00;
        uVar3 = extraout_XMM0_Qa_00;
      }
      lVar1 = winlinks_RB_MINMAX((long *)(param_9 + 0xf8),1);
      uVar2 = extraout_RDX_01;
      uVar3 = extraout_XMM0_Qa_01;
      while (lVar1 != 0) {
        if ((*(byte *)(lVar1 + 0x38) & 7) != 0) goto LAB_00156c95;
        lVar1 = winlink_previous(lVar1);
        uVar2 = extraout_RDX_02;
        uVar3 = extraout_XMM0_Qa_02;
      }
    }
  }
  return 0xffffffff;
}



undefined8
session_select(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
              uint *param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined auVar3 [16];
  
  auVar3 = winlink_find_by_index
                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      (int **)(param_9 + 0xf8),param_10,param_11,param_12,param_13,param_14);
  lVar1 = auVar3._0_8_;
  if (lVar1 == 0) {
    return 0xffffffff;
  }
  if (lVar1 != *(long *)(param_9 + 0xe0)) {
    uVar2 = FUN_00155840(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,param_9,lVar1,auVar3._8_8_,param_12,param_13,
                         param_14);
    return uVar2;
  }
  return 1;
}



undefined8
session_last(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9
            ,undefined8 param_10,undefined8 param_11,undefined8 param_12,uint *param_13,
            undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  
  lVar1 = *(long *)(param_9 + 0xe8);
  if (lVar1 == 0) {
    return 0xffffffff;
  }
  if (*(long *)(param_9 + 0xe0) != lVar1) {
    uVar2 = FUN_00155840(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         lVar1,param_11,param_12,param_13,param_14);
    return uVar2;
  }
  return 1;
}



undefined8
session_set_current(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,long param_10,undefined8 param_11,undefined8 param_12,uint *param_13
                   ,undefined8 param_14)

{
  undefined8 uVar1;
  
  if (param_10 == 0) {
    return 0xffffffff;
  }
  if (*(long *)(param_9 + 0xe0) != param_10) {
    uVar1 = FUN_00155840(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,param_13,param_14);
    return uVar1;
  }
  return 1;
}



long * session_group_find(long param_1)

{
  long lVar1;
  long *plVar2;
  
  plVar2 = session_groups;
  if (session_groups != (long *)0x0) {
    do {
      for (lVar1 = *plVar2; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x130)) {
        if (lVar1 == param_1) {
          return plVar2;
        }
      }
      plVar2 = (long *)plVar2[2];
    } while (plVar2 != (long *)0x0);
  }
  return plVar2;
}



ulong session_group_index(undefined4 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,long param_9,undefined8 param_10,undefined8 param_11,
                         undefined8 param_12,ulong param_13,undefined8 param_14)

{
  long lVar1;
  undefined1 in_stack_fffffffffffffff8;
  
  if (session_groups == 0) {
LAB_00156e16:
                    // WARNING: Subroutine does not return
    fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"session group not found"
           ,param_10,param_11,param_12,param_13,param_14,in_stack_fffffffffffffff8);
  }
  param_13 = 0;
  lVar1 = session_groups;
  if (session_groups != param_9) {
    do {
      lVar1 = *(long *)(lVar1 + 0x10);
      param_13 = (ulong)((int)param_13 + 1);
      if (lVar1 == 0) goto LAB_00156e16;
    } while (param_9 != lVar1);
  }
  return param_13;
}



void session_group_add(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,long param_10,long param_11,undefined8 param_12,
                      undefined8 param_13,undefined8 param_14)

{
  long *plVar1;
  long *plVar2;
  
  plVar1 = session_groups;
  if (session_groups != (long *)0x0) {
    do {
      param_11 = *plVar1;
      if (param_11 == 0) {
        param_11 = 0;
      }
      else {
        do {
          if (param_9 == param_11) {
            plVar2 = (long *)plVar1[1];
            goto LAB_00156e75;
          }
          param_11 = *(long *)(param_11 + 0x130);
        } while (param_11 != 0);
      }
      plVar1 = (long *)plVar1[2];
    } while (plVar1 != (long *)0x0);
  }
  plVar1 = (long *)xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x20,
                           param_10,param_11,param_12,param_13,param_14);
  plVar1[2] = 0;
  plVar1[3] = (long)DAT_001a4018;
  *DAT_001a4018 = plVar1;
  DAT_001a4018 = (long **)(plVar1 + 2);
  *(undefined8 *)(param_9 + 0x130) = 0;
  *(long **)(param_9 + 0x138) = plVar1;
  *plVar1 = param_9;
  plVar2 = (long *)(param_9 + 0x130);
  plVar1[1] = (long)plVar2;
LAB_00156e75:
  *(undefined8 *)(param_10 + 0x130) = 0;
  *(long **)(param_10 + 0x138) = plVar2;
  *plVar2 = param_10;
  plVar1[1] = param_10 + 0x130;
  return;
}



void session_group_remove(long param_1)

{
  long lVar1;
  undefined8 *puVar2;
  long *plVar3;
  long *plVar4;
  long *__ptr;
  
  __ptr = session_groups;
  if (session_groups == (long *)0x0) {
    return;
  }
  do {
    for (lVar1 = *__ptr; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x130)) {
      if (param_1 == lVar1) {
        lVar1 = *(long *)(param_1 + 0x130);
        plVar4 = *(long **)(param_1 + 0x138);
        if (lVar1 == 0) {
          __ptr[1] = (long)plVar4;
        }
        else {
          *(long **)(lVar1 + 0x138) = plVar4;
          plVar4 = *(long **)(param_1 + 0x138);
        }
        *plVar4 = lVar1;
        if (*(long *)(*__ptr + 0x130) != 0) {
          return;
        }
        puVar2 = *(undefined8 **)(*__ptr + 0x138);
        __ptr[1] = (long)puVar2;
        *puVar2 = 0;
        if (*__ptr != 0) {
          return;
        }
        lVar1 = __ptr[2];
        plVar4 = (long *)__ptr[3];
        plVar3 = plVar4;
        if (lVar1 != 0) {
          *(long **)(lVar1 + 0x18) = plVar4;
          plVar4 = (long *)__ptr[3];
          plVar3 = DAT_001a4018;
        }
        DAT_001a4018 = plVar3;
        *plVar4 = lVar1;
        free(__ptr);
        return;
      }
    }
    __ptr = (long *)__ptr[2];
    if (__ptr == (long *)0x0) {
      return;
    }
  } while( true );
}



void session_destroy(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                    long *param_13,char **param_14)

{
  long lVar1;
  void *pvVar2;
  uint *puVar3;
  int iVar4;
  char *pcVar5;
  long lVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 unaff_RBX;
  undefined1 *puVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined8 uVar9;
  undefined1 in_stack_00000008;
  undefined uVar10;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"session %s destroyed",
           *(undefined8 *)(param_9 + 8),param_12,param_13,param_14,(char)unaff_RBX);
  sessions_RB_REMOVE(&sessions,param_9);
  notify_session_closed
            (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  free(*(void **)(param_9 + 0x118));
  iVar4 = event_initialized(param_9 + 0x58);
  if (iVar4 != 0) {
    event_del(param_9 + 0x58);
  }
  uVar8 = session_group_remove(param_9);
  lVar1 = *(long *)(param_9 + 0xe8);
  uVar9 = extraout_RDX;
  while (lVar1 != 0) {
    uVar8 = winlink_stack_remove((long *)(param_9 + 0xe8),lVar1);
    uVar9 = extraout_RDX_00;
    lVar1 = *(long *)(param_9 + 0xe8);
  }
  uVar10 = (undefined)unaff_RBX;
  pvVar2 = *(void **)(param_9 + 0xf8);
  while (pvVar2 != (void *)0x0) {
    uVar9 = notify_window_unlinked
                      (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       *(uint **)((long)pvVar2 + 8),uVar9,param_12,param_13,param_14);
    uVar8 = winlink_remove(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long *)(param_9 + 0xf8),pvVar2,extraout_RDX_01,param_12,param_13,
                           param_14);
    uVar10 = (undefined)unaff_RBX;
    uVar9 = extraout_RDX_02;
    pvVar2 = *(void **)(param_9 + 0xf8);
  }
  free(*(void **)(param_9 + 0x10));
  uVar9 = session_unref(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        param_9);
  if ((tmate_foreground != 0) && (server_exit == 0)) {
    pcVar5 = options_get_number(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                global_options,"tmate-foreground-restart",(ulong)tmate_foreground,
                                param_12,param_13,param_14);
    if ((int)pcVar5 != 0) {
      usleep(500000);
      next_session_id = 0;
      uVar8 = run_initial_client_cmd
                        (extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                        );
      log_emit(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
               "Session shell restarted",extraout_RDX_03,param_12,param_13,param_14,uVar10);
      lVar1 = sessions;
      if (sessions != 0) {
        do {
          lVar6 = lVar1;
          lVar1 = *(long *)(lVar6 + 0x140);
        } while (lVar1 != 0);
        puVar7 = window_copy_mode;
        puVar3 = *(uint **)(*(long *)(*(long *)(lVar6 + 0xe0) + 8) + 0x138);
        window_pane_set_mode((long)puVar3,(undefined **)window_copy_mode);
        uVar9 = window_copy_init_for_output
                          (extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,(long)puVar3,puVar7,extraout_RDX_04,param_12,param_13,param_14);
        uVar9 = window_copy_add(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar3
                                ,"%s","Session shell restarted",param_12,param_13,(size_t)param_14,
                                uVar10);
        window_copy_add(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar3,"%s",
                        "Note: press the following sequence to disconnect from SSH: <Enter>~.",
                        param_12,param_13,(size_t)param_14,in_stack_00000008);
        return;
      }
    }
    return;
  }
  log_emit((int)uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,"Session closed",
           (ulong)tmate_foreground,param_12,param_13,param_14,uVar10);
  tmate_write_fin();
  return;
}



int session_group_count(long *param_1)

{
  long lVar1;
  int iVar2;
  
  iVar2 = 0;
  for (lVar1 = *param_1; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x130)) {
    iVar2 = iVar2 + 1;
  }
  return iVar2;
}



void session_group_synchronize1
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,long *param_13,
               char **param_14)

{
  int **ppiVar1;
  void *pvVar2;
  uint *puVar3;
  uint *puVar4;
  long lVar5;
  undefined8 uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long *plVar7;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 uVar9;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Db_02;
  undefined auVar11 [16];
  void *local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(long *)(param_9 + 0xf8) != 0) {
    if (*(uint **)(param_10 + 0xe0) != (uint *)0x0) {
      auVar11 = winlink_find_by_index
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (int **)(param_9 + 0xf8),(ulong)**(uint **)(param_10 + 0xe0),param_11,
                           param_12,param_13,param_14);
      uVar9 = auVar11._8_8_;
      if (((auVar11._0_8_ == 0) &&
          (((lVar5 = *(long *)(param_10 + 0xe8), uVar8 = extraout_XMM0_Da, uVar10 = extraout_XMM0_Db
            , lVar5 == 0 || (lVar5 == *(long *)(param_10 + 0xe0))) ||
           (uVar6 = FUN_00155840(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4
                                 ,param_5,param_6,param_7,param_8,param_10,lVar5,uVar9,param_12,
                                 (uint *)param_13,param_14), uVar9 = extraout_RDX_04,
           uVar8 = extraout_XMM0_Da_05, uVar10 = extraout_XMM0_Db_01, (int)uVar6 != 0)))) &&
         (uVar9 = session_previous(CONCAT44(uVar10,uVar8),param_2,param_3,param_4,param_5,param_6,
                                   param_7,param_8,param_10,0,uVar9,param_12,(uint *)param_13,
                                   param_14), (int)uVar9 != 0)) {
        session_next(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_06),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_10,0,extraout_RDX_05,param_12,
                     (uint *)param_13,param_14);
      }
    }
    local_38 = *(void **)(param_10 + 0xf8);
    *(undefined8 *)(param_10 + 0xf8) = 0;
    ppiVar1 = (int **)(param_10 + 0xf8);
    puVar3 = (uint *)winlinks_RB_MINMAX((long *)(int **)(param_9 + 0xf8),-1);
    uVar9 = extraout_RDX;
    uVar8 = extraout_XMM0_Da_00;
    while (puVar3 != (uint *)0x0) {
      puVar4 = winlink_add(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppiVar1,
                           (ulong)*puVar3,uVar9,param_12,param_13,param_14);
      uVar8 = winlink_set_window((long)puVar4,*(long *)(puVar3 + 2));
      notify_window_linked
                (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                 *(uint **)(puVar4 + 2),extraout_RDX_00,param_12,param_13,param_14);
      puVar4[0xe] = puVar4[0xe] | puVar3[0xe] & 7;
      puVar3 = (uint *)winlinks_RB_NEXT((long)puVar3);
      uVar9 = extraout_RDX_01;
      uVar8 = extraout_XMM0_Da_01;
    }
    puVar3 = *(uint **)(param_10 + 0xe0);
    if (puVar3 == (uint *)0x0) {
      puVar3 = *(uint **)(param_9 + 0xe0);
    }
    auVar11 = winlink_find_by_index
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppiVar1,
                         (ulong)*puVar3,uVar9,param_12,param_13,param_14);
    plVar7 = auVar11._8_8_;
    puVar3 = *(uint **)(param_10 + 0xe8);
    *(undefined8 *)(param_10 + 0xe8) = 0;
    *(long *)(param_10 + 0xe0) = auVar11._0_8_;
    *(long *)(param_10 + 0xf0) = param_10 + 0xe8;
    uVar8 = extraout_XMM0_Da_02;
    for (; pvVar2 = local_38, puVar3 != (uint *)0x0; puVar3 = *(uint **)(puVar3 + 0x18)) {
      auVar11 = winlink_find_by_index
                          (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppiVar1,
                           (ulong)*puVar3,plVar7,param_12,param_13,param_14);
      plVar7 = auVar11._8_8_;
      lVar5 = auVar11._0_8_;
      if (lVar5 != 0) {
        plVar7 = *(long **)(param_10 + 0xf0);
        *(undefined8 *)(lVar5 + 0x60) = 0;
        *(long **)(lVar5 + 0x68) = plVar7;
        *plVar7 = lVar5;
        *(long *)(param_10 + 0xf0) = lVar5 + 0x60;
      }
      uVar8 = extraout_XMM0_Da_03;
    }
    while (local_38 = pvVar2, pvVar2 != (void *)0x0) {
      lVar5 = winlink_find_by_window_id((long *)ppiVar1,**(int **)((long)pvVar2 + 8));
      uVar9 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_04);
      uVar6 = extraout_RDX_02;
      if (lVar5 == 0) {
        uVar9 = notify_window_unlinked
                          (extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_10,*(uint **)((long)pvVar2 + 8),extraout_RDX_02,param_12,
                           param_13,param_14);
        uVar6 = extraout_RDX_03;
      }
      winlink_remove(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)&local_38
                     ,pvVar2,uVar6,param_12,param_13,param_14);
      pvVar2 = local_38;
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void session_group_synchronize_to
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  long lVar1;
  long lVar2;
  long *plVar3;
  long lVar4;
  long *in_R8;
  char **in_R9;
  
  plVar3 = session_groups;
  if (session_groups == (long *)0x0) {
    return;
  }
  do {
    lVar1 = *plVar3;
    if (lVar1 != 0) {
      lVar2 = lVar1;
      lVar4 = param_9;
      if (param_9 == lVar1) break;
      while (lVar2 = *(long *)(lVar2 + 0x130), lVar2 != 0) {
        if (param_9 == lVar2) {
          lVar2 = lVar1;
          if (param_9 != lVar1) goto LAB_00157469;
          goto LAB_0015745d;
        }
      }
    }
    plVar3 = (long *)plVar3[2];
    if (plVar3 == (long *)0x0) {
      return;
    }
  } while( true );
  while (lVar4 = lVar2, lVar2 == lVar1) {
LAB_0015745d:
    lVar2 = *(long *)(lVar4 + 0x130);
    if (lVar2 == 0) break;
  }
LAB_00157469:
  session_group_synchronize1
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,param_9,lVar1,
             plVar3,in_R8,in_R9);
  return;
}



void session_group_synchronize_from
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               long *param_13,char **param_14)

{
  long **pplVar1;
  long lVar2;
  long *plVar3;
  long *extraout_RDX;
  long lVar4;
  
  plVar3 = session_groups;
  if (session_groups == (long *)0x0) {
    return;
  }
  do {
    lVar4 = *plVar3;
    if (lVar4 != 0) {
      lVar2 = lVar4;
      if (param_9 == lVar4) goto LAB_001574d8;
      while (lVar2 = *(long *)(lVar2 + 0x130), lVar2 != 0) {
        if (param_9 == lVar2) {
          do {
            while (param_9 != lVar4) {
              param_1 = session_group_synchronize1
                                  (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   param_9,lVar4,plVar3,param_12,param_13,param_14);
              lVar4 = *(long *)(lVar4 + 0x130);
              plVar3 = extraout_RDX;
              if (lVar4 == 0) {
                return;
              }
            }
LAB_001574d8:
            lVar4 = *(long *)(lVar4 + 0x130);
          } while (lVar4 != 0);
          return;
        }
      }
    }
    pplVar1 = (long **)(plVar3 + 2);
    plVar3 = *pplVar1;
  } while (*pplVar1 != (long *)0x0);
  return;
}



uint * session_new(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  uint *param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,char **param_14,uint param_15,long *param_16)

{
  int **ppiVar1;
  undefined8 uVar2;
  bool bVar3;
  uint *puVar4;
  char **ppcVar5;
  long *plVar6;
  char *pcVar7;
  uint *puVar8;
  undefined7 extraout_var;
  undefined8 uVar9;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 uVar10;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  ulong uVar11;
  char *pcVar12;
  int **ppiVar13;
  char **ppcVar14;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined auVar17 [16];
  
  ppiVar1 = (int **)(param_9 + 0x3e);
  uVar11 = (ulong)param_15;
  uVar9 = param_12;
  ppiVar13 = ppiVar1;
  uVar10 = param_13;
  ppcVar14 = param_14;
  puVar4 = winlink_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppiVar1,
                       uVar11,param_11,param_12,param_13,param_14);
  if (puVar4 == (uint *)0x0) {
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,param_16,"index in use: %d",(ulong)param_15,uVar9,uVar10,ppcVar14,
              (char)param_10);
  }
  else {
    auVar17 = environ_create(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,ppiVar13,uVar11,extraout_RDX,uVar9,uVar10,ppcVar14);
    ppcVar5 = auVar17._0_8_;
    uVar2 = environ_copy(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,global_environ,ppcVar5,auVar17._8_8_,uVar9,
                         uVar10,ppcVar14);
    uVar2 = environ_copy(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         *(long **)(param_9 + 0x48),ppcVar5,extraout_RDX_00,uVar9,uVar10,ppcVar14);
    uVar2 = server_fill_environ(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                param_9,ppcVar5,extraout_RDX_01,uVar9,uVar10,ppcVar14);
    plVar6 = (long *)options_get_string(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,
                                        param_8,*(char ***)(param_9 + 0x42),"default-shell",
                                        extraout_RDX_02,uVar9,uVar10,ppcVar14);
    uVar10 = extraout_RDX_03;
    uVar15 = extraout_XMM0_Da_01;
    uVar16 = extraout_XMM0_Db_01;
    if ((*(char *)plVar6 == '\0') ||
       (bVar3 = areshell((char *)plVar6), uVar10 = extraout_RDX_08, uVar15 = extraout_XMM0_Da_05,
       uVar16 = extraout_XMM0_Db_04, (int)CONCAT71(extraout_var,bVar3) != 0)) {
      plVar6 = (long *)&DAT_00178fee;
    }
    pcVar7 = options_get_number(CONCAT44(uVar16,uVar15),param_2,param_3,param_4,param_5,param_6,
                                param_7,param_8,*(char ***)(param_9 + 0x42),"history-limit",uVar10,
                                uVar9,plVar6,ppcVar14);
    puVar8 = window_create(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_10,(uint)param_11,param_12,param_13,(uint *)plVar6,param_14
                           ,ppcVar5,*(undefined8 *)(param_9 + 0x46),param_9[0x36],param_9[0x37],
                           (uint)pcVar7);
    if (puVar8 == (uint *)0x0) {
      winlink_remove(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,(long *)ppiVar1,puVar4,extraout_RDX_04,param_13
                     ,plVar6,param_14);
      environ_free((long *)ppcVar5);
      puVar4 = (uint *)0x0;
    }
    else {
      uVar15 = winlink_set_window((long)puVar4,(long)puVar8);
      notify_window_linked
                (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,puVar8
                 ,extraout_RDX_05,param_13,plVar6,param_14);
      uVar9 = environ_free((long *)ppcVar5);
      pcVar12 = "set-remain-on-exit";
      pcVar7 = options_get_number(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  *(char ***)(param_9 + 0x42),"set-remain-on-exit",extraout_RDX_06,
                                  param_13,plVar6,param_14);
      uVar9 = extraout_RDX_07;
      uVar15 = extraout_XMM0_Da_04;
      if (pcVar7 != (char *)0x0) {
        pcVar12 = "remain-on-exit";
        options_set_number(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04),param_2,param_3,param_4
                           ,param_5,param_6,param_7,param_8,*(char ***)(puVar8 + 0x62),
                           "remain-on-exit",(char *)0x1,param_13,plVar6,param_14);
        uVar9 = extraout_RDX_09;
        uVar15 = extraout_XMM0_Da_06;
      }
      session_group_synchronize_from
                (uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                 pcVar12,uVar9,param_13,plVar6,param_14);
    }
  }
  return puVar4;
}


/*
Unable to decompile 'session_create'
Cause: 
Low-level Error: Overlapping input varnodes
*/


uint * session_attach(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,uint *param_10,ulong param_11,long *param_12,long *param_13,
                     char **param_14)

{
  uint *puVar1;
  long *plVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined unaff_BPL;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar3;
  undefined4 extraout_XMM0_Db;
  
  plVar2 = param_12;
  puVar1 = winlink_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (int **)(param_9 + 0xf8),param_11 & 0xffffffff,param_11,param_12,param_13,
                       param_14);
  if (puVar1 == (uint *)0x0) {
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,param_12,"index in use: %d",param_11 & 0xffffffff,plVar2,param_13,
              param_14,unaff_BPL);
  }
  else {
    uVar3 = winlink_set_window((long)puVar1,(long)param_10);
    notify_window_linked
              (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
               extraout_RDX,plVar2,param_13,param_14);
    uVar3 = tmate_sync_layout();
    session_group_synchronize_from
              (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
               extraout_RDX_00,plVar2,param_13,param_14);
  }
  return puVar1;
}



bool session_detach(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,void *param_10,undefined8 param_11,undefined8 param_12,
                   long *param_13,char **param_14)

{
  void *pvVar1;
  undefined8 uVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  bool bVar3;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  uVar4 = (undefined4)param_1;
  if (*(void **)(param_9 + 0xe0) == param_10) {
    pvVar1 = *(void **)(param_9 + 0xe8);
    if ((param_10 != pvVar1) && (pvVar1 != (void *)0x0)) {
      uVar2 = FUN_00155840(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           (long)pvVar1,param_11,param_12,(uint *)param_13,param_14);
      param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
      param_11 = extraout_RDX_02;
      uVar4 = extraout_XMM0_Da;
      if ((int)uVar2 == 0) goto LAB_00157a4a;
    }
    uVar2 = session_previous(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                             ,0,param_11,param_12,(uint *)param_13,param_14);
    param_11 = extraout_RDX_03;
    uVar4 = extraout_XMM0_Da_00;
    if ((int)uVar2 != 0) {
      session_next(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_9,0,extraout_RDX_03,param_12,(uint *)param_13,
                   param_14);
      param_11 = extraout_RDX_04;
      uVar4 = extraout_XMM0_Da_01;
    }
  }
LAB_00157a4a:
  *(uint *)((long)param_10 + 0x38) = *(uint *)((long)param_10 + 0x38) & 0xfffffff8;
  notify_window_unlinked
            (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
             *(uint **)((long)param_10 + 8),param_11,param_12,param_13,param_14);
  uVar2 = winlink_stack_remove((long *)(param_9 + 0xe8),(long)param_10);
  winlink_remove(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 (long *)(param_9 + 0xf8),param_10,extraout_RDX,param_12,param_13,param_14);
  uVar4 = tmate_sync_layout();
  uVar4 = session_group_synchronize_from
                    (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                     extraout_RDX_00,param_12,param_13,param_14);
  bVar3 = *(long *)(param_9 + 0xf8) == 0;
  if (bVar3) {
    session_destroy(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                    extraout_RDX_01,param_12,param_13,param_14);
  }
  return bVar3;
}



void session_renumber_windows
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  int **ppiVar1;
  char *pcVar2;
  long lVar3;
  uint *puVar4;
  long lVar5;
  undefined8 uVar6;
  void *pvVar7;
  void *pvVar8;
  long *extraout_RDX;
  long *extraout_RDX_00;
  long *plVar9;
  long *extraout_RDX_01;
  undefined8 extraout_RDX_02;
  ulong uVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  uint local_4c;
  long local_48;
  long local_40;
  
  ppiVar1 = (int **)(param_9 + 0xf8);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_48 = *(long *)(param_9 + 0xf8);
  *(undefined8 *)(param_9 + 0xf8) = 0;
  pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(param_9 + 0x108),"base-index",param_11,param_12,param_13,
                              param_14);
  uVar10 = (ulong)pcVar2 & 0xffffffff;
  lVar3 = winlinks_RB_MINMAX(&local_48,-1);
  if (lVar3 == 0) {
    local_4c = 0;
    plVar9 = extraout_RDX;
    uVar11 = extraout_XMM0_Da;
  }
  else {
    local_4c = 0;
    plVar9 = extraout_RDX;
    uVar11 = extraout_XMM0_Da;
    do {
      puVar4 = winlink_add(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppiVar1,
                           uVar10,plVar9,param_12,param_13,param_14);
      winlink_set_window((long)puVar4,*(long *)(lVar3 + 8));
      puVar4[0xe] = puVar4[0xe] | *(uint *)(lVar3 + 0x38) & 7;
      if (*(long *)(param_9 + 0xe0) == lVar3) {
        local_4c = *puVar4;
      }
      uVar10 = (ulong)((int)uVar10 + 1);
      lVar3 = winlinks_RB_NEXT(lVar3);
      plVar9 = extraout_RDX_00;
      uVar11 = extraout_XMM0_Da_00;
    } while (lVar3 != 0);
  }
  lVar3 = *(long *)(param_9 + 0xe8);
  *(undefined8 *)(param_9 + 0xe8) = 0;
  *(long *)(param_9 + 0xf0) = param_9 + 0xe8;
  for (; lVar3 != 0; lVar3 = *(long *)(lVar3 + 0x60)) {
    lVar5 = winlink_find_by_window((long *)ppiVar1,*(long *)(lVar3 + 8));
    plVar9 = extraout_RDX_01;
    if (lVar5 != 0) {
      plVar9 = *(long **)(param_9 + 0xf0);
      *(undefined8 *)(lVar5 + 0x60) = 0;
      *(long **)(lVar5 + 0x68) = plVar9;
      *plVar9 = lVar5;
      *(long *)(param_9 + 0xf0) = lVar5 + 0x60;
    }
    uVar11 = extraout_XMM0_Da_01;
  }
  uVar6 = winlink_find_by_index
                    (uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppiVar1,
                     (ulong)local_4c,plVar9,param_12,param_13,param_14);
  *(undefined8 *)(param_9 + 0xe0) = uVar6;
  pvVar7 = (void *)winlinks_RB_MINMAX(&local_48,-1);
  while (pvVar7 != (void *)0x0) {
    pvVar8 = (void *)winlinks_RB_NEXT((long)pvVar7);
    winlink_remove(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,&local_48,pvVar7,extraout_RDX_02,param_12,param_13,
                   param_14);
    pvVar7 = pvVar8;
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void set_signals(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  long lVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar3;
  undefined *puVar4;
  undefined *puVar5;
  undefined8 *puVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar7;
  undefined uVar8;
  sigset_t local_b0;
  int local_30;
  long local_20;
  
  puVar4 = &stack0xffffffffffffff48;
  puVar5 = &stack0xffffffffffffff48;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  puVar6 = (undefined8 *)&stack0xffffffffffffff48;
  for (lVar2 = 0x13; lVar2 != 0; lVar2 = lVar2 + -1) {
    *puVar6 = 0;
    puVar6 = puVar6 + 1;
  }
  sigemptyset(&local_b0);
  local_30 = 0x10000000;
  uVar8 = 1;
  iVar1 = sigaction(0xd,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
  uVar3 = extraout_RDX;
  uVar7 = extraout_XMM0_Da;
  if (iVar1 == 0) {
    iVar1 = sigaction(0xc,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
    uVar3 = extraout_RDX_00;
    puVar4 = puVar5;
    uVar7 = extraout_XMM0_Da_00;
    if (iVar1 == 0) {
      event_set(ev_sigint,2,0x18,param_9,param_10);
      event_add(ev_sigint,0);
      event_set(ev_sighup,1,0x18,param_9,param_10);
      event_add(ev_sighup,0);
      event_set(ev_sigchld,0x11,0x18,param_9,param_10);
      event_add(ev_sigchld,0);
      event_set(ev_sigcont,0x12,0x18,param_9,param_10);
      event_add(ev_sigcont,0);
      event_set(ev_sigterm,0xf,0x18,param_9,param_10);
      event_add(ev_sigterm,0);
      event_set(ev_sigusr1,10,0x18,param_9,param_10);
      event_add(ev_sigusr1,0);
      event_set(ev_sigwinch,0x1c,0x18,param_9,param_10);
      event_add(ev_sigwinch,0);
      if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
        return;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
  }
                    // WARNING: Subroutine does not return
  fatal(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"sigaction failed",puVar4,
        uVar3,lVar2,param_13,param_14,uVar8);
}



void clear_signals(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  int param_9)

{
  int iVar1;
  long lVar2;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 uVar3;
  undefined *puVar4;
  undefined *puVar5;
  undefined *puVar6;
  undefined *puVar7;
  undefined *puVar8;
  undefined *puVar9;
  undefined *puVar10;
  undefined *puVar11;
  undefined *puVar12;
  undefined8 *puVar13;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 uVar14;
  undefined uVar15;
  sigset_t local_b0;
  int local_30;
  long local_20;
  
  puVar4 = &stack0xffffffffffffff48;
  puVar5 = &stack0xffffffffffffff48;
  puVar6 = &stack0xffffffffffffff48;
  puVar7 = &stack0xffffffffffffff48;
  puVar8 = &stack0xffffffffffffff48;
  puVar9 = &stack0xffffffffffffff48;
  puVar10 = &stack0xffffffffffffff48;
  puVar11 = &stack0xffffffffffffff48;
  puVar12 = &stack0xffffffffffffff48;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  puVar13 = (undefined8 *)&stack0xffffffffffffff48;
  for (lVar2 = 0x13; lVar2 != 0; lVar2 = lVar2 + -1) {
    *puVar13 = 0;
    puVar13 = puVar13 + 1;
  }
  sigemptyset(&local_b0);
  local_30 = 0x10000000;
  uVar15 = 0;
  iVar1 = sigaction(0xd,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
  uVar3 = extraout_RDX;
  uVar14 = extraout_XMM0_Da;
  if (iVar1 == 0) {
    iVar1 = sigaction(0xc,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
    uVar3 = extraout_RDX_00;
    puVar4 = puVar5;
    uVar14 = extraout_XMM0_Da_00;
    if (iVar1 == 0) {
      if (param_9 == 0) {
        event_del(ev_sigint);
        event_del(ev_sighup);
        event_del(ev_sigchld);
        event_del(ev_sigcont);
        event_del(ev_sigterm);
        event_del(ev_sigusr1);
        event_del(ev_sigwinch);
LAB_00158004:
        if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
          return;
        }
                    // WARNING: Subroutine does not return
        __stack_chk_fail();
      }
      iVar1 = sigaction(2,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
      uVar3 = extraout_RDX_01;
      puVar4 = puVar6;
      uVar14 = extraout_XMM0_Da_01;
      if (iVar1 == 0) {
        iVar1 = sigaction(1,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
        uVar3 = extraout_RDX_02;
        puVar4 = puVar7;
        uVar14 = extraout_XMM0_Da_02;
        if (iVar1 == 0) {
          iVar1 = sigaction(0x11,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
          uVar3 = extraout_RDX_03;
          puVar4 = puVar8;
          uVar14 = extraout_XMM0_Da_03;
          if (iVar1 == 0) {
            iVar1 = sigaction(0x12,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
            uVar3 = extraout_RDX_04;
            puVar4 = puVar9;
            uVar14 = extraout_XMM0_Da_04;
            if (iVar1 == 0) {
              iVar1 = sigaction(0xf,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
              uVar3 = extraout_RDX_05;
              puVar4 = puVar10;
              uVar14 = extraout_XMM0_Da_05;
              if (iVar1 == 0) {
                iVar1 = sigaction(10,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
                uVar3 = extraout_RDX_06;
                puVar4 = puVar11;
                uVar14 = extraout_XMM0_Da_06;
                if (iVar1 == 0) {
                  iVar1 = sigaction(0x1c,(sigaction *)&stack0xffffffffffffff48,(sigaction *)0x0);
                  uVar3 = extraout_RDX_07;
                  puVar4 = puVar12;
                  uVar14 = extraout_XMM0_Da_07;
                  if (iVar1 == 0) goto LAB_00158004;
                }
              }
            }
          }
        }
      }
    }
  }
                    // WARNING: Subroutine does not return
  fatal(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"sigaction failed",puVar4,
        uVar3,lVar2,in_R8,in_R9,uVar15);
}



void status_timer_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,long param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  char *pcVar4;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar5;
  
  lVar1 = *(long *)(param_11 + 0x598);
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  uVar3 = event_del(param_11 + 0x328);
  if (lVar1 != 0) {
    if ((*(long *)(param_11 + 0x4b0) == 0) && (*(long *)(param_11 + 0x550) == 0)) {
      *(uint *)(param_11 + 0x420) = *(uint *)(param_11 + 0x420) | 0x10;
    }
    pcVar4 = options_get_number(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(lVar1 + 0x108),"status-interval",extraout_RDX,param_12,
                                param_13,param_14);
    uVar5 = extraout_XMM0_Da;
    if (pcVar4 != (char *)0x0) {
      uVar5 = event_add(param_11 + 0x328,&stack0xffffffffffffffc8);
    }
    log_emit(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "client %p, status interval %d",param_11,pcVar4,param_13,param_14,(char)pcVar4);
  }
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long status_prompt_find_history_file
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  char cVar1;
  long lVar2;
  char *pcVar3;
  long lVar4;
  undefined8 extraout_RDX;
  char *pcVar5;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined in_stack_ffffffffffffffe8;
  undefined7 uStack_17;
  
  pcVar5 = "history-file";
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar3 = options_get_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              global_options,"history-file",param_11,param_12,param_13,param_14);
  cVar1 = *pcVar3;
  if (cVar1 != '\0') {
    if (cVar1 == '/') {
      lVar4 = xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      pcVar3,pcVar5,extraout_RDX,param_12,param_13,param_14);
      goto LAB_00158192;
    }
    if ((cVar1 == '~') && (pcVar3[1] == '/')) {
      lVar4 = find_home();
      if (lVar4 != 0) {
        xasprintf(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  (long *)&stack0xffffffffffffffe8,&DAT_0017fd51,lVar4,pcVar3 + 1,param_13,param_14,
                  in_stack_ffffffffffffffe8);
        lVar4 = CONCAT71(uStack_17,in_stack_ffffffffffffffe8);
        goto LAB_00158192;
      }
    }
  }
  lVar4 = 0;
LAB_00158192:
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void status_prompt_save_history
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  char *__filename;
  FILE *__stream;
  int *piVar1;
  char *pcVar2;
  undefined unaff_BL;
  uint uVar3;
  ulong uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  
  __filename = (char *)status_prompt_find_history_file
                                 (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  param_9,param_10,param_11,param_12,param_13,param_14);
  if (__filename == (char *)0x0) {
    return;
  }
  log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "saving history to %s",__filename,param_12,param_13,param_14,unaff_BL);
  __stream = fopen(__filename,"w");
  if (__stream != (FILE *)0x0) {
    free(__filename);
    if (status_prompt_hsize != 0) {
      uVar4 = 0;
      do {
        uVar3 = (int)uVar4 + 1;
        fputs(*(char **)(status_prompt_hlist + uVar4 * 8),__stream);
        fputc(10,__stream);
        uVar4 = (ulong)uVar3;
      } while (uVar3 < status_prompt_hsize);
    }
    fclose(__stream);
    return;
  }
  piVar1 = __errno_location();
  pcVar2 = strerror(*piVar1);
  log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"%s: %s",
           __filename,pcVar2,param_13,param_14,unaff_BL);
  free(__filename);
  return;
}



void status_timer_start(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
                       long param_13,undefined8 param_14)

{
  long lVar1;
  long lVar2;
  int iVar3;
  char *pcVar4;
  code *pcVar5;
  undefined8 extraout_RDX;
  undefined8 uVar6;
  undefined8 extraout_RDX_00;
  undefined8 uVar7;
  undefined8 extraout_XMM0_Qa;
  
  lVar1 = param_9 + 0x328;
  lVar2 = *(long *)(param_9 + 0x598);
  iVar3 = event_initialized(lVar1);
  if (iVar3 == 0) {
    pcVar5 = status_timer_callback;
    param_13 = param_9;
    uVar7 = event_set(lVar1,0xffffffff,0);
    param_12 = pcVar5;
    uVar6 = extraout_RDX_00;
  }
  else {
    uVar7 = event_del(lVar1);
    uVar6 = extraout_RDX;
  }
  if (lVar2 != 0) {
    pcVar4 = options_get_number(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(lVar2 + 0x108),"status",uVar6,param_12,param_13,param_14
                               );
    if (pcVar4 != (char *)0x0) {
      status_timer_callback
                (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0xffffffff
                 ,0,param_9,param_12,param_13,param_14);
      return;
    }
  }
  return;
}



void status_timer_start_all
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
               long param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  long lVar1;
  
  lVar1 = clients;
  if (clients != 0) {
    do {
      param_1 = status_timer_start(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   lVar1,param_10,param_11,param_12,param_13,param_14);
      lVar1 = *(long *)(lVar1 + 0x5c0);
      param_11 = extraout_RDX;
    } while (lVar1 != 0);
  }
  return;
}



int status_at_line(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int iVar2;
  char *pcVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  lVar1 = *(long *)(param_9 + 0x598);
  pcVar3 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(lVar1 + 0x108),"status",param_11,param_12,param_13,
                              param_14);
  if (pcVar3 == (char *)0x0) {
    iVar2 = -1;
  }
  else {
    pcVar3 = options_get_number(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,*(char ***)(lVar1 + 0x108),"status-position",extraout_RDX,
                                param_12,param_13,param_14);
    iVar2 = 0;
    if (pcVar3 != (char *)0x0) {
      iVar2 = *(int *)(param_9 + 0xf4) + -1;
    }
  }
  return iVar2;
}



undefined8
status_get_window_at
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          int param_10,undefined8 param_11,ulong param_12,undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  undefined8 uVar2;
  long lVar3;
  char *__s;
  size_t sVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint uVar5;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  uVar5 = param_10 + *(int *)(param_9 + 0x5a8);
  lVar3 = winlinks_RB_MINMAX((long *)(*(long *)(param_9 + 0x598) + 0xf8),-1);
  uVar1 = extraout_RDX;
  uVar2 = extraout_XMM0_Qa;
  while( true ) {
    if (lVar3 == 0) {
      return 0;
    }
    __s = options_get_string(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(char ***)(*(long *)(lVar3 + 8) + 0x188),"window-status-separator",
                             uVar1,param_12,param_13,param_14);
    sVar4 = strlen(__s);
    param_12 = (ulong)uVar5;
    if (param_12 < *(ulong *)(lVar3 + 0x10)) break;
    uVar5 = uVar5 - ((int)*(ulong *)(lVar3 + 0x10) + (int)sVar4);
    lVar3 = winlinks_RB_NEXT(lVar3);
    uVar1 = extraout_RDX_00;
    uVar2 = extraout_XMM0_Qa_00;
  }
  return *(undefined8 *)(lVar3 + 8);
}



char * status_replace(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,tm *param_10,char *param_11,undefined *param_12,
                     undefined8 param_13,char **param_14)

{
  uint **ppuVar1;
  char *pcVar2;
  long *plVar3;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar4;
  undefined8 extraout_XMM0_Qa_00;
  
  if (param_11 != (char *)0x0) {
    if ((*(byte *)(param_9 + 0x422) & 8) == 0) {
      ppuVar1 = (uint **)format_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,0,1,param_11,param_12,param_13,param_14);
      uVar4 = extraout_XMM0_Qa;
    }
    else {
      ppuVar1 = (uint **)format_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,0,3,param_11,param_12,param_13,param_14);
      uVar4 = extraout_XMM0_Qa_00;
    }
    plVar3 = (long *)0x0;
    uVar4 = format_defaults(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppuVar1,
                            param_9,(uint *)0x0,(uint *)param_10,(uint *)0x0,param_14);
    pcVar2 = format_expand_time(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                (long *)ppuVar1,param_11,(time_t)param_12,param_10,plVar3,param_14);
    format_free(ppuVar1);
    return pcVar2;
  }
  pcVar2 = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"",
                           param_10,0,param_12,param_13,param_14);
  return pcVar2;
}



char * status_redraw_get_left
                 (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,undefined *param_10,byte *param_11,char **param_12,size_t param_13,
                 char **param_14)

{
  long lVar1;
  char *pcVar2;
  char *pcVar3;
  char **ppcVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar5;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined in_stack_ffffffffffffffd8;
  
  lVar1 = *(long *)(param_9 + 0x598);
  ppcVar4 = param_12;
  uVar5 = style_apply_update(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             param_11,*(char ***)(lVar1 + 0x108),"status-left-style",param_12,
                             param_13,param_14);
  pcVar2 = options_get_string(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(lVar1 + 0x108),"status-left",extraout_RDX,ppcVar4,param_13
                              ,param_14);
  pcVar2 = status_replace(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          param_9,(tm *)0x0,pcVar2,param_10,param_13,param_14);
  pcVar3 = options_get_number(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,*(char ***)(lVar1 + 0x108),"status-left-length",
                              extraout_RDX_00,param_10,param_13,param_14);
  *param_12 = pcVar3;
  pcVar3 = (char *)screen_write_cstrlen
                             (extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,"%s",pcVar2,extraout_RDX_01,param_10,param_13,param_14,
                              in_stack_ffffffffffffffd8);
  if (pcVar3 < *param_12) {
    *param_12 = pcVar3;
  }
  return pcVar2;
}



char * status_redraw_get_right
                 (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,undefined *param_10,byte *param_11,char **param_12,size_t param_13,
                 char **param_14)

{
  long lVar1;
  char *pcVar2;
  char *pcVar3;
  char **ppcVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 uVar5;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined in_stack_ffffffffffffffd8;
  
  lVar1 = *(long *)(param_9 + 0x598);
  ppcVar4 = param_12;
  uVar5 = style_apply_update(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             param_11,*(char ***)(lVar1 + 0x108),"status-right-style",param_12,
                             param_13,param_14);
  pcVar2 = options_get_string(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(lVar1 + 0x108),"status-right",extraout_RDX,ppcVar4,
                              param_13,param_14);
  pcVar2 = status_replace(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          param_9,(tm *)0x0,pcVar2,param_10,param_13,param_14);
  pcVar3 = options_get_number(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,*(char ***)(lVar1 + 0x108),"status-right-length",
                              extraout_RDX_00,param_10,param_13,param_14);
  *param_12 = pcVar3;
  pcVar3 = (char *)screen_write_cstrlen
                             (extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,"%s",pcVar2,extraout_RDX_01,param_10,param_13,param_14,
                              in_stack_ffffffffffffffd8);
  if (pcVar3 < *param_12) {
    *param_12 = pcVar3;
  }
  return pcVar2;
}



void status_print(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,tm *param_10,undefined *param_11,byte *param_12,undefined8 param_13,
                 char **param_14)

{
  char **ppcVar1;
  char *pcVar2;
  long lVar3;
  long lVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar5;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  lVar4 = *(long *)(param_9 + 0x598);
  ppcVar1 = *(char ***)(*(long *)&param_10->tm_hour + 0x188);
  lVar3 = lVar4;
  uVar5 = style_apply_update(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             param_12,ppcVar1,"window-status-style",lVar4,param_13,param_14);
  pcVar2 = options_get_string(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppcVar1,
                              "window-status-format",extraout_RDX,lVar3,param_13,param_14);
  uVar5 = extraout_XMM0_Qa;
  if (*(tm **)(lVar4 + 0xe0) == param_10) {
    lVar3 = lVar4;
    uVar5 = style_apply_update(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,param_12,ppcVar1,"window-status-current-style",lVar4,param_13
                               ,param_14);
    pcVar2 = options_get_string(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                ppcVar1,"window-status-current-format",extraout_RDX_00,lVar3,
                                param_13,param_14);
    uVar5 = extraout_XMM0_Qa_00;
  }
  if (*(tm **)(lVar4 + 0xe8) == param_10) {
    uVar5 = style_apply_update(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               param_12,ppcVar1,"window-status-last-style",lVar4,param_13,param_14);
  }
  if ((param_10[1].tm_sec & 1U) == 0) {
    if ((param_10[1].tm_sec & 6U) != 0) {
      uVar5 = style_apply_update(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 param_12,ppcVar1,"window-status-activity-style",lVar4,param_13,
                                 param_14);
    }
  }
  else {
    uVar5 = style_apply_update(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               param_12,ppcVar1,"window-status-bell-style",lVar4,param_13,param_14);
  }
  status_replace(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                 pcVar2,param_11,param_13,param_14);
  return;
}



ulong status_redraw(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,
                   char *param_13,char **param_14)

{
  undefined8 *puVar1;
  long lVar2;
  tm *ptVar3;
  ulong uVar4;
  char *pcVar5;
  undefined *puVar6;
  long *plVar7;
  tm *ptVar8;
  long lVar9;
  char **ppcVar10;
  int *piVar11;
  uint uVar12;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  int iVar13;
  int iVar14;
  uint uVar15;
  uint uVar16;
  int iVar17;
  long in_FS_OFFSET;
  undefined4 uVar18;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar19;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  undefined8 extraout_XMM0_Qa_03;
  undefined8 extraout_XMM0_Qa_04;
  undefined8 extraout_XMM0_Qa_05;
  undefined8 uVar20;
  undefined8 extraout_XMM0_Qa_06;
  undefined extraout_XMM0 [16];
  undefined extraout_XMM0_00 [16];
  undefined auVar21 [16];
  undefined auVar22 [16];
  undefined4 uVar23;
  undefined4 uVar24;
  undefined auVar25 [16];
  undefined4 uVar26;
  undefined auVar27 [16];
  undefined4 uVar28;
  undefined auVar29 [16];
  undefined4 uVar30;
  undefined auVar31 [16];
  undefined4 uVar32;
  undefined auVar33 [16];
  undefined auVar34 [16];
  undefined uVar35;
  char *local_220;
  char *local_218;
  void **local_1f0;
  uint local_1e0;
  uint local_1dc;
  int local_1d8;
  undefined4 uStack_1d4;
  uint local_1d0;
  undefined4 uStack_1cc;
  long local_1c8 [2];
  undefined8 local_1b8;
  undefined8 uStack_1b0;
  undefined4 local_1a8;
  undefined local_198 [16];
  undefined4 local_188;
  undefined local_178 [16];
  undefined4 local_168;
  undefined local_158 [16];
  undefined4 local_148;
  undefined local_138 [16];
  undefined local_128 [16];
  undefined local_118 [16];
  undefined local_108 [16];
  undefined local_f8 [16];
  undefined local_e8 [16];
  undefined local_d8 [16];
  undefined8 local_c8;
  void *local_b8 [15];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(int *)(param_9 + 0xf4) != 0) {
    lVar2 = *(long *)(param_9 + 0x598);
    pcVar5 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(lVar2 + 0x108),"status",param_11,param_12,param_13,
                                param_14);
    if ((pcVar5 != (char *)0x0) ||
       ((param_12 = (ulong)*(uint *)(param_9 + 0xf4), *(uint *)(param_9 + 0xf4) != 0 &&
        ((*(byte *)(param_9 + 0x422) & 0x80) != 0)))) {
      uVar16 = 0;
      puVar6 = (undefined *)time((time_t *)0x0);
      puVar1 = (undefined8 *)(param_9 + 0x3a8);
      uVar18 = style_apply(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           &local_1b8,*(char ***)(lVar2 + 0x108),"status-style",param_12,param_13,
                           param_14);
      auVar22 = *(undefined (*) [16])(param_9 + 0x3b8);
      ppcVar10 = (char **)0x0;
      auVar21 = *(undefined (*) [16])(param_9 + 0x3a8);
      auVar25 = *(undefined (*) [16])(param_9 + 0x3c8);
      auVar27 = *(undefined (*) [16])(param_9 + 0x3d8);
      auVar29 = *(undefined (*) [16])(param_9 + 1000);
      auVar31 = *(undefined (*) [16])(param_9 + 0x3f8);
      auVar33 = *(undefined (*) [16])(param_9 + 0x408);
      local_c8 = *(undefined8 *)(param_9 + 0x418);
      local_138 = auVar21;
      local_128 = auVar22;
      local_118 = auVar25;
      local_108 = auVar27;
      local_f8 = auVar29;
      local_e8 = auVar31;
      local_d8 = auVar33;
      screen_init(uVar18,auVar21._0_4_,auVar22._0_4_,auVar25._0_4_,auVar27._0_4_,auVar29._0_4_,
                  auVar31._0_4_,auVar33._0_4_,puVar1,*(undefined4 *)(param_9 + 0xf0),1,0,param_13,
                  param_14);
      screen_write_start(local_1c8,0,(long)puVar1);
      uVar23 = auVar22._0_4_;
      uVar18 = auVar21._0_4_;
      if (*(int *)(param_9 + 0xf0) != 0) {
        do {
          uVar16 = uVar16 + 1;
          screen_write_putc(local_1c8,(long)&local_1b8,0x20);
          uVar23 = auVar22._0_4_;
          uVar18 = auVar21._0_4_;
        } while (uVar16 < *(uint *)(param_9 + 0xf0));
      }
      uVar19 = screen_write_stop();
      uVar32 = auVar33._0_4_;
      uVar30 = auVar31._0_4_;
      uVar28 = auVar29._0_4_;
      uVar26 = auVar27._0_4_;
      uVar24 = auVar25._0_4_;
      if (*(uint *)(param_9 + 0xf4) < 2) {
        local_218 = (char *)0x0;
        local_220 = (char *)0x0;
      }
      else {
        auVar22._8_8_ = uStack_1b0;
        auVar22._0_8_ = local_1b8;
        local_188 = local_1a8;
        local_220 = status_redraw_get_left
                              (uVar19,(int)local_1b8,uVar23,uVar24,uVar26,uVar28,uVar30,uVar32,
                               param_9,puVar6,(byte *)&local_198,(char **)&local_1d8,
                               (size_t)param_13,param_14);
        ppcVar10 = (char **)&local_1d0;
        auVar21._8_8_ = uStack_1b0;
        auVar21._0_8_ = local_1b8;
        local_168 = local_1a8;
        local_218 = status_redraw_get_right
                              (extraout_XMM0_Qa_00,auVar22._0_4_,(int)local_1b8,auVar25._0_4_,
                               auVar27._0_4_,auVar29._0_4_,auVar31._0_4_,auVar33._0_4_,param_9,
                               puVar6,(byte *)&local_178,ppcVar10,(size_t)param_13,param_14);
        tmate_status(extraout_XMM0_Qa_01,auVar22._0_4_,auVar21._0_4_,auVar25._0_4_,auVar27._0_4_,
                     auVar29._0_4_,auVar31._0_4_,auVar33._0_4_,local_220,local_218,extraout_RDX,
                     ppcVar10,param_13,param_14);
        uVar32 = auVar33._0_4_;
        uVar30 = auVar31._0_4_;
        uVar28 = auVar29._0_4_;
        uVar26 = auVar27._0_4_;
        uVar24 = auVar25._0_4_;
        uVar23 = auVar21._0_4_;
        uVar18 = auVar22._0_4_;
        local_1e0 = *(uint *)(param_9 + 0xf0);
        if ((local_1e0 != 0) && (local_1d0 + local_1d8 < local_1e0)) {
          local_1e0 = local_1e0 - (local_1d0 + local_1d8);
          plVar7 = (long *)(lVar2 + 0xf8);
          ptVar8 = (tm *)winlinks_RB_MINMAX(plVar7,-1);
          uVar35 = (undefined)lVar2;
          if (ptVar8 == (tm *)0x0) {
            screen_init(extraout_XMM0_Da_00,auVar22._0_4_,auVar21._0_4_,auVar25._0_4_,auVar27._0_4_,
                        auVar29._0_4_,auVar31._0_4_,auVar33._0_4_,local_b8,0,1,0,param_13,param_14);
            screen_write_start(local_1c8,0,(long)local_b8);
            lVar9 = winlinks_RB_MINMAX(plVar7,-1);
            uVar32 = auVar33._0_4_;
            uVar30 = auVar31._0_4_;
            uVar28 = auVar29._0_4_;
            uVar23 = auVar21._0_4_;
            uVar18 = auVar22._0_4_;
            uVar26 = auVar27._0_4_;
            uVar24 = auVar25._0_4_;
            uVar16 = 0;
            local_1dc = 0;
            uVar19 = extraout_XMM0_Qa_06;
            if (lVar9 != 0) goto LAB_00158b68;
            screen_write_stop();
LAB_00158eab:
            screen_write_start(local_1c8,0,(long)puVar1);
            uVar19 = screen_write_cursormove((long)local_1c8,0,0);
            uVar4 = CONCAT44(uStack_1d4,local_1d8);
            if (uVar4 != 0) {
              iVar17 = 0;
              iVar14 = 0;
              uVar15 = 0;
LAB_00158efd:
              param_13 = local_220;
              screen_write_cnputs(uVar19,uVar18,uVar23,uVar24,uVar26,uVar28,uVar30,uVar32,local_1c8,
                                  uVar4,&local_198,"%s",local_220,(size_t)param_14,uVar35);
              goto LAB_00158cf6;
            }
            iVar13 = *(int *)(param_9 + 0xf0);
            iVar14 = 0;
            uVar15 = 0;
LAB_00158ede:
            uVar20 = screen_write_cursormove((long)local_1c8,iVar13 - local_1d0,0);
            uVar19 = extraout_RDX_05;
          }
          else {
            local_1dc = 0;
            uVar16 = 0;
            do {
              free(ptVar8->tm_zone);
              piVar11 = &ptVar8->tm_wday;
              ptVar8->tm_wday = (undefined4)local_1b8;
              ptVar8->tm_yday = local_1b8._4_4_;
              *(undefined8 *)&ptVar8->tm_isdst = uStack_1b0;
              *(undefined4 *)&ptVar8->tm_gmtoff = local_1a8;
              auVar34 = status_print(local_1b8,auVar22._0_4_,auVar21._0_4_,auVar25._0_4_,
                                     auVar27._0_4_,auVar29._0_4_,auVar31._0_4_,auVar33._0_4_,param_9
                                     ,ptVar8,puVar6,(byte *)piVar11,param_13,param_14);
              ptVar8->tm_zone = auVar34._0_8_;
              lVar9 = screen_write_cstrlen
                                (extraout_XMM0_Qa_02,auVar22._0_4_,auVar21._0_4_,auVar25._0_4_,
                                 auVar27._0_4_,auVar29._0_4_,auVar31._0_4_,auVar33._0_4_,"%s",
                                 auVar34._0_8_,auVar34._8_8_,piVar11,(size_t)param_13,param_14,
                                 uVar35);
              ptVar3 = *(tm **)(lVar2 + 0xe0);
              ptVar8->tm_mon = (int)lVar9;
              ptVar8->tm_year = (int)((ulong)lVar9 >> 0x20);
              if (ptVar3 == ptVar8) {
                local_1dc = uVar16;
              }
              pcVar5 = options_get_string(extraout_XMM0_Qa_03,auVar22._0_4_,auVar21._0_4_,
                                          auVar25._0_4_,auVar27._0_4_,auVar29._0_4_,auVar31._0_4_,
                                          auVar33._0_4_,
                                          *(char ***)(*(long *)&ptVar8->tm_hour + 0x188),
                                          "window-status-separator",extraout_RDX_01,piVar11,param_13
                                          ,param_14);
              lVar9 = screen_write_strlen(extraout_XMM0_Qa_04,auVar22._0_4_,auVar21._0_4_,
                                          auVar25._0_4_,auVar27._0_4_,auVar29._0_4_,auVar31._0_4_,
                                          auVar33._0_4_,"%s",pcVar5,extraout_RDX_02,piVar11,
                                          (size_t)param_13,param_14,uVar35);
              uVar16 = uVar16 + (int)lVar9 + ptVar8->tm_mon;
              ptVar8 = (tm *)winlinks_RB_NEXT((long)ptVar8);
            } while (ptVar8 != (tm *)0x0);
            screen_init(extraout_XMM0_Da_01,auVar22._0_4_,auVar21._0_4_,auVar25._0_4_,auVar27._0_4_,
                        auVar29._0_4_,auVar31._0_4_,auVar33._0_4_,local_b8,uVar16,1,0,param_13,
                        param_14);
            screen_write_start(local_1c8,0,(long)local_b8);
            lVar9 = winlinks_RB_MINMAX(plVar7,-1);
            auVar34 = extraout_XMM0;
            while (uVar19 = auVar34._0_8_, lVar9 != 0) {
LAB_00158b68:
              uVar20 = *(undefined8 *)(lVar9 + 0x30);
              pcVar5 = "%s";
              uVar19 = screen_write_cnputs(uVar19,auVar22._0_4_,auVar21._0_4_,auVar25._0_4_,
                                           auVar27._0_4_,auVar29._0_4_,auVar31._0_4_,auVar33._0_4_,
                                           local_1c8,0xffffffffffffffff,
                                           (undefined (*) [16])(lVar9 + 0x18),"%s",uVar20,
                                           (size_t)param_14,uVar35);
              param_13 = options_get_string(uVar19,auVar22._0_4_,auVar21._0_4_,auVar25._0_4_,
                                            auVar27._0_4_,auVar29._0_4_,auVar31._0_4_,auVar33._0_4_,
                                            *(char ***)(*(long *)(lVar9 + 8) + 0x188),
                                            "window-status-separator",extraout_RDX_03,pcVar5,uVar20,
                                            param_14);
              screen_write_nputs(extraout_XMM0_Qa_05,auVar22._0_4_,auVar21._0_4_,auVar25._0_4_,
                                 auVar27._0_4_,auVar29._0_4_,auVar31._0_4_,auVar33._0_4_,local_1c8,
                                 0xffffffffffffffff,(long)&local_1b8,"%s",param_13,(size_t)param_14,
                                 uVar35);
              lVar9 = winlinks_RB_NEXT(lVar9);
              auVar34 = extraout_XMM0_00;
            }
            local_1f0 = local_b8;
            screen_write_stop();
            uVar32 = auVar33._0_4_;
            uVar30 = auVar31._0_4_;
            uVar28 = auVar29._0_4_;
            uVar26 = auVar27._0_4_;
            uVar24 = auVar25._0_4_;
            uVar23 = auVar21._0_4_;
            uVar18 = auVar22._0_4_;
            if (uVar16 <= local_1e0) goto LAB_00158eab;
            local_1dc = local_1dc + *(int *)(*(long *)(lVar2 + 0xe0) + 0x10);
            if (local_1e0 <= local_1dc) {
              ppcVar10 = (char **)(ulong)local_1e0;
              if (local_1e0 != 0) {
                uVar12 = local_1e0 - 1;
                uVar15 = local_1dc - uVar12;
                if (uVar12 != 0) {
                  if (local_1dc + 1 < uVar16) {
                    local_1e0 = local_1e0 - 2;
                    uVar15 = uVar15 + 1;
                    iVar14 = 1;
                    goto LAB_00158c36;
                  }
                  iVar14 = 1;
                  iVar17 = 0;
                  local_1e0 = uVar12;
                  goto LAB_00158c4a;
                }
              }
LAB_00158f71:
              screen_free(local_1f0);
              goto LAB_001589b0;
            }
            local_1e0 = local_1e0 - 1;
            iVar14 = 0;
            uVar15 = 0;
LAB_00158c36:
            ppcVar10 = (char **)(ulong)local_1e0;
            iVar17 = 1;
            if (local_1e0 == 0) goto LAB_00158f71;
LAB_00158c4a:
            lVar9 = winlinks_RB_MINMAX(plVar7,-1);
            uVar32 = auVar33._0_4_;
            uVar30 = auVar31._0_4_;
            uVar28 = auVar29._0_4_;
            uVar23 = auVar21._0_4_;
            uVar18 = auVar22._0_4_;
            uVar26 = auVar27._0_4_;
            uVar24 = auVar25._0_4_;
            if (lVar9 != 0) {
              uVar16 = 0;
              do {
                uVar12 = uVar16 + *(int *)(lVar9 + 0x10);
                if ((*(byte *)(lVar9 + 0x38) & 7) != 0) {
                  if ((iVar14 == 1) && (uVar16 < uVar15)) {
                    iVar14 = -1;
                  }
                  if ((iVar17 == 1) && (local_1e0 + uVar15 < uVar12)) {
                    iVar17 = -1;
                  }
                }
                lVar9 = winlinks_RB_NEXT(lVar9);
                uVar32 = auVar33._0_4_;
                uVar30 = auVar31._0_4_;
                uVar28 = auVar29._0_4_;
                uVar23 = auVar21._0_4_;
                uVar18 = auVar22._0_4_;
                uVar26 = auVar27._0_4_;
                uVar24 = auVar25._0_4_;
                uVar16 = uVar12;
              } while (lVar9 != 0);
            }
            screen_write_start(local_1c8,0,(long)puVar1);
            uVar19 = screen_write_cursormove((long)local_1c8,0,0);
            uVar4 = CONCAT44(uStack_1d4,local_1d8);
            uVar16 = local_1e0;
            if (uVar4 != 0) goto LAB_00158efd;
LAB_00158cf6:
            if (iVar14 != 0) {
              auVar25._8_8_ = uStack_1b0;
              auVar25._0_8_ = local_1b8;
              local_148 = local_1a8;
              local_158 = auVar25;
              if (iVar14 == -1) {
                local_158._2_14_ = auVar25._2_14_;
                local_158._0_2_ = (ushort)local_1b8 ^ 0x1000;
              }
              screen_write_putc(local_1c8,(long)local_158,0x3c);
              uVar24 = auVar25._0_4_;
            }
            iVar13 = *(int *)(param_9 + 0xf0);
            if (iVar17 == 0) goto LAB_00158ede;
            screen_write_cursormove((long)local_1c8,iVar13 + ~local_1d0,0);
            auVar27._8_8_ = uStack_1b0;
            auVar27._0_8_ = local_1b8;
            local_148 = local_1a8;
            local_158 = auVar27;
            if (iVar17 == -1) {
              local_158._2_14_ = auVar27._2_14_;
              local_158._0_2_ = (ushort)local_1b8 ^ 0x1000;
            }
            uVar20 = screen_write_putc(local_1c8,(long)local_158,0x3e);
            uVar26 = auVar27._0_4_;
            uVar19 = extraout_RDX_04;
          }
          local_1f0 = local_b8;
          if (CONCAT44(uStack_1cc,local_1d0) != 0) {
            param_13 = local_218;
            uVar20 = screen_write_cnputs(uVar20,uVar18,uVar23,uVar24,uVar26,uVar28,uVar30,uVar32,
                                         local_1c8,CONCAT44(uStack_1cc,local_1d0),&local_178,"%s",
                                         local_218,(size_t)param_14,uVar35);
            uVar19 = extraout_RDX_06;
          }
          if (uVar16 < local_1e0) {
            pcVar5 = options_get_number(uVar20,uVar18,uVar23,uVar24,uVar26,uVar28,uVar30,uVar32,
                                        *(char ***)(lVar2 + 0x108),"status-justify",uVar19,
                                        (ulong)local_1e0,param_13,param_14);
            if (pcVar5 == (char *)0x1) {
              local_1d8 = (local_1e0 - uVar16 >> 1) + local_1d8;
            }
            else if (pcVar5 == (char *)0x2) {
              local_1d8 = (local_1d8 + local_1e0) - uVar16;
            }
          }
          uVar12 = (local_1d8 + 1) - (uint)(iVar14 == 0);
          *(uint *)(param_9 + 0x5a8) = uVar15 - uVar12;
          uVar19 = screen_write_cursormove((long)local_1c8,uVar12,0);
          ppcVar10 = (char **)0x0;
          param_13 = (char *)(ulong)uVar16;
          param_14 = (char **)0x1;
          screen_write_copy(uVar19,uVar18,uVar23,uVar24,uVar26,uVar28,uVar30,uVar32,(long)local_1c8,
                            (long)local_1f0,uVar15,0,uVar16,1);
          screen_free(local_1f0);
          screen_write_stop();
        }
      }
LAB_001589b0:
      free(local_220);
      free(local_218);
      uVar4 = grid_compare(extraout_XMM0_Da,uVar18,uVar23,uVar24,uVar26,uVar28,uVar30,uVar32,
                           *(long *)(param_9 + 0x3b0),local_138._8_8_,extraout_RDX_00,ppcVar10,
                           param_13,param_14);
      if ((int)uVar4 == 0) {
        screen_free((void **)local_138);
        uVar4 = uVar4 & 0xffffffff;
        goto LAB_00158797;
      }
      screen_free((void **)local_138);
    }
  }
  uVar4 = 1;
LAB_00158797:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void status_message_clear
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  undefined8 extraout_RDX;
  undefined8 uVar2;
  undefined8 extraout_RDX_00;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar3;
  
  if (*(void **)(param_9 + 0x4b0) != (void *)0x0) {
    free(*(void **)(param_9 + 0x4b0));
    uVar1 = *(uint *)(param_9 + 0x420);
    *(uint *)(param_9 + 400) = *(uint *)(param_9 + 400) & 0xfffffffc;
    *(undefined8 *)(param_9 + 0x4b0) = 0;
    uVar2 = extraout_RDX;
    uVar3 = extraout_XMM0_Qa;
    if ((uVar1 & 0x800000) != 0) {
      *(uint *)(param_9 + 0x420) = uVar1 & 0xff7fffff;
      uVar3 = recalculate_sizes(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8);
      uVar1 = *(uint *)(param_9 + 0x420);
      uVar2 = extraout_RDX_00;
    }
    *(uint *)(param_9 + 0x420) = uVar1 | 8;
    screen_reinit(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9 + 0x3a8,
                  param_10,uVar2,param_12,param_13,param_14);
    return;
  }
  return;
}



void status_message_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,long param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  status_message_clear
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,param_10,
             param_11,param_12,param_13,param_14);
  return;
}



ulong status_message_redraw(long param_1)

{
  long lVar1;
  ulong uVar2;
  undefined8 uVar3;
  char *pcVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong uVar5;
  size_t in_R8;
  size_t in_R9;
  long in_FS_OFFSET;
  undefined4 uVar6;
  undefined8 uVar7;
  undefined8 extraout_XMM0_Qa;
  undefined4 uVar8;
  undefined auVar9 [16];
  undefined4 uVar10;
  undefined auVar11 [16];
  undefined4 uVar12;
  undefined auVar13 [16];
  undefined4 uVar14;
  undefined auVar15 [16];
  undefined4 uVar16;
  undefined auVar17 [16];
  undefined4 uVar18;
  undefined auVar19 [16];
  undefined4 in_XMM7_Da;
  undefined in_stack_ffffffffffffff18;
  long local_d8 [2];
  undefined8 local_c8 [4];
  undefined4 local_a8;
  undefined4 uStack_a4;
  undefined4 uStack_a0;
  undefined4 uStack_9c;
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined8 local_38;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar5 = 0;
  if ((*(int *)(param_1 + 0xf0) != 0) && (*(int *)(param_1 + 0xf4) != 0)) {
    local_a8 = *(undefined4 *)(param_1 + 0x3a8);
    uStack_a4 = *(undefined4 *)(param_1 + 0x3ac);
    uStack_a0 = *(undefined4 *)(param_1 + 0x3b0);
    uStack_9c = *(undefined4 *)(param_1 + 0x3b4);
    auVar9 = *(undefined (*) [16])(param_1 + 0x3b8);
    uVar3 = 0;
    auVar11 = *(undefined (*) [16])(param_1 + 0x3c8);
    auVar13 = *(undefined (*) [16])(param_1 + 0x3d8);
    auVar15 = *(undefined (*) [16])(param_1 + 1000);
    auVar17 = *(undefined (*) [16])(param_1 + 0x3f8);
    auVar19 = *(undefined (*) [16])(param_1 + 0x408);
    local_38 = *(undefined8 *)(param_1 + 0x418);
    lVar1 = *(long *)(param_1 + 0x598);
    local_98 = auVar9;
    local_88 = auVar11;
    local_78 = auVar13;
    local_68 = auVar15;
    local_58 = auVar17;
    local_48 = auVar19;
    uVar7 = screen_init(local_a8,auVar9._0_4_,auVar11._0_4_,auVar13._0_4_,auVar15._0_4_,
                        auVar17._0_4_,auVar19._0_4_,in_XMM7_Da,(undefined8 *)(param_1 + 0x3a8),
                        *(int *)(param_1 + 0xf0),1,0,in_R8,in_R9);
    uVar2 = screen_write_strlen(uVar7,auVar9._0_4_,auVar11._0_4_,auVar13._0_4_,auVar15._0_4_,
                                auVar17._0_4_,auVar19._0_4_,in_XMM7_Da,"%s",
                                *(undefined8 *)(param_1 + 0x4b0),extraout_RDX,uVar3,in_R8,in_R9,
                                in_stack_ffffffffffffff18);
    uVar5 = (ulong)*(uint *)(param_1 + 0xf0);
    if (uVar2 < *(uint *)(param_1 + 0xf0)) {
      uVar5 = uVar2;
    }
    style_apply(extraout_XMM0_Qa,auVar9._0_4_,auVar11._0_4_,auVar13._0_4_,auVar15._0_4_,
                auVar17._0_4_,auVar19._0_4_,in_XMM7_Da,local_c8,*(char ***)(lVar1 + 0x108),
                "message-style",uVar3,in_R8,in_R9);
    screen_write_start(local_d8,0,(long)(undefined8 *)(param_1 + 0x3a8));
    uVar7 = screen_write_cursormove((long)local_d8,0,0);
    uVar3 = *(undefined8 *)(param_1 + 0x4b0);
    pcVar4 = "%s";
    screen_write_nputs(uVar7,auVar9._0_4_,auVar11._0_4_,auVar13._0_4_,auVar15._0_4_,auVar17._0_4_,
                       auVar19._0_4_,in_XMM7_Da,local_d8,uVar5,(long)local_c8,"%s",uVar3,in_R9,
                       in_stack_ffffffffffffff18);
    uVar18 = auVar19._0_4_;
    uVar16 = auVar17._0_4_;
    uVar14 = auVar15._0_4_;
    uVar12 = auVar13._0_4_;
    uVar10 = auVar11._0_4_;
    uVar8 = auVar9._0_4_;
    if (uVar5 < *(uint *)(param_1 + 0xf0)) {
      do {
        uVar5 = uVar5 + 1;
        screen_write_putc(local_d8,(long)local_c8,0x20);
        uVar18 = auVar19._0_4_;
        uVar16 = auVar17._0_4_;
        uVar14 = auVar15._0_4_;
        uVar12 = auVar13._0_4_;
        uVar10 = auVar11._0_4_;
        uVar8 = auVar9._0_4_;
      } while (uVar5 < *(uint *)(param_1 + 0xf0));
    }
    uVar6 = screen_write_stop();
    uVar5 = grid_compare(uVar6,uVar8,uVar10,uVar12,uVar14,uVar16,uVar18,in_XMM7_Da,
                         *(long *)(param_1 + 0x3b0),CONCAT44(uStack_9c,uStack_a0),extraout_RDX_00,
                         pcVar4,uVar3,in_R9);
    if ((int)uVar5 == 0) {
      screen_free((void **)&local_a8);
      uVar5 = uVar5 & 0xffffffff;
    }
    else {
      screen_free((void **)&local_a8);
      uVar5 = 1;
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void status_prompt_clear(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                        long param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  void *__ptr;
  undefined8 extraout_XMM0_Qa;
  
  __ptr = *(void **)(param_9 + 0x550);
  if (__ptr != (void *)0x0) {
    if ((*(code **)(param_9 + 0x570) != (code *)0x0) &&
       (param_13 = *(long *)(param_9 + 0x578), param_13 != 0)) {
      (**(code **)(param_9 + 0x570))(param_13);
      __ptr = *(void **)(param_9 + 0x550);
    }
    free(__ptr);
    *(undefined8 *)(param_9 + 0x550) = 0;
    free(*(void **)(param_9 + 0x558));
    *(uint *)(param_9 + 400) = *(uint *)(param_9 + 400) & 0xfffffffc;
    *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 8;
    *(undefined8 *)(param_9 + 0x558) = 0;
    screen_reinit(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  param_9 + 0x3a8,param_10,extraout_RDX,param_12,param_13,param_14);
    return;
  }
  return;
}



void status_message_set(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                       long param_13,undefined8 param_14,undefined param_15)

{
  uint uVar1;
  long lVar2;
  long *plVar3;
  void **ppvVar4;
  void *pvVar5;
  char in_AL;
  int iVar6;
  char *pcVar7;
  undefined8 *puVar8;
  time_t tVar9;
  undefined8 extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 uVar10;
  undefined8 extraout_RDX_04;
  void **__ptr;
  char *pcVar11;
  undefined8 uVar12;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar13;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  long local_108;
  long local_100;
  undefined4 local_f8;
  undefined4 local_f4;
  undefined *local_f0;
  undefined *local_e8;
  long local_e0;
  undefined local_d8 [16];
  undefined8 local_c8;
  undefined8 local_c0;
  long local_b8;
  undefined8 local_b0;
  undefined local_a8 [16];
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  
  if (in_AL != '\0') {
    local_a8._8_8_ = in_XMM0_Qb;
    local_a8._0_8_ = param_1;
    local_98._4_12_ = in_register_00001224;
    local_98._0_4_ = param_2;
    local_88._4_12_ = in_register_00001244;
    local_88._0_4_ = param_3;
    local_78._4_12_ = in_register_00001264;
    local_78._0_4_ = param_4;
    local_68._4_12_ = in_register_00001284;
    local_68._0_4_ = param_5;
    local_58._4_12_ = in_register_000012a4;
    local_58._0_4_ = param_6;
    local_48._4_12_ = in_register_000012c4;
    local_48._0_4_ = param_7;
    local_38._4_12_ = in_register_000012e4;
    local_38._0_4_ = param_8;
  }
  local_e0 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar11 = "message-limit";
  local_c8 = param_11;
  local_c0 = param_12;
  local_b8 = param_13;
  local_b0 = param_14;
  pcVar7 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              global_options,"message-limit",param_11,param_12,param_13,param_14);
  uVar12 = status_prompt_clear(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                               param_5,param_6,param_7,param_8,param_9,pcVar11,extraout_RDX,param_12
                               ,param_13,param_14);
  uVar12 = status_message_clear
                     (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,pcVar11
                      ,extraout_RDX_00,param_12,param_13,param_14);
  local_f0 = &param_15;
  local_e8 = local_d8;
  local_f8 = 0x10;
  local_f4 = 0x30;
  uVar13 = xvasprintf(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      (long *)(param_9 + 0x4b0),param_10,&local_f8,param_12,param_13,param_14);
  uVar12 = 0x28;
  puVar8 = (undefined8 *)
           xcalloc(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x28,
                   extraout_RDX_01,param_12,param_13,param_14);
  tVar9 = time((time_t *)0x0);
  pcVar11 = *(char **)(param_9 + 0x4b0);
  puVar8[2] = tVar9;
  iVar6 = *(int *)(param_9 + 0x538);
  uVar1 = iVar6 + 1;
  *(uint *)(param_9 + 0x538) = uVar1;
  *(int *)(puVar8 + 1) = iVar6;
  uVar12 = xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,pcVar11,uVar12,(ulong)uVar1,param_12,param_13,param_14);
  puVar8[3] = 0;
  *puVar8 = extraout_RAX;
  plVar3 = *(long **)(param_9 + 0x548);
  puVar8[4] = plVar3;
  *plVar3 = (long)puVar8;
  *(undefined8 **)(param_9 + 0x548) = puVar8 + 3;
  ppvVar4 = *(void ***)(param_9 + 0x540);
  uVar10 = extraout_RDX_02;
  while (__ptr = ppvVar4, ppvVar4 != (void **)0x0) {
    while( true ) {
      ppvVar4 = (void **)__ptr[3];
      if (*(uint *)(param_9 + 0x538) <= (uint)(*(int *)(__ptr + 1) + (int)pcVar7))
      goto LAB_00159480;
      free(*__ptr);
      pvVar5 = __ptr[3];
      puVar8 = (undefined8 *)__ptr[4];
      if (pvVar5 != (void *)0x0) break;
      *(undefined8 **)(param_9 + 0x548) = puVar8;
      *puVar8 = 0;
      free(__ptr);
      uVar12 = CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02);
      uVar10 = extraout_RDX_04;
      __ptr = ppvVar4;
      if (ppvVar4 == (void **)0x0) goto LAB_00159480;
    }
    *(undefined8 **)((long)pvVar5 + 0x20) = puVar8;
    *(void **)__ptr[4] = pvVar5;
    free(__ptr);
    uVar12 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
    uVar10 = extraout_RDX_03;
  }
LAB_00159480:
  pcVar11 = options_get_number(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               *(char ***)(*(long *)(param_9 + 0x598) + 0x108),"display-time",uVar10
                               ,param_12,param_13,param_14);
  iVar6 = (int)pcVar11;
  if (0 < iVar6) {
    lVar2 = param_9 + 0x4b8;
    local_108 = (long)(iVar6 / 1000);
    local_100 = (long)(iVar6 % 1000) * 1000;
    iVar6 = event_initialized(lVar2);
    if (iVar6 != 0) {
      event_del(lVar2);
    }
    event_set(lVar2,0xffffffff,0,status_message_callback,param_9);
    event_add(lVar2,&local_108);
  }
  *(uint *)(param_9 + 400) = *(uint *)(param_9 + 400) | 3;
  *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
  if (local_e0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void status_prompt_set(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,char *param_10,char *param_11,undefined *param_12,
                      undefined8 param_13,undefined8 param_14,uint param_15)

{
  uint **ppuVar1;
  time_t tVar2;
  char *pcVar3;
  size_t sVar4;
  tm *ptVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  long lVar6;
  long *plVar7;
  char **ppcVar8;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar9;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 extraout_XMM0_Qa_02;
  
  ppcVar8 = (char **)(ulong)param_15;
  ppuVar1 = (uint **)format_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0
                                   ,0,param_11,param_12,param_13,ppcVar8);
  plVar7 = (long *)0x0;
  ptVar5 = (tm *)0x0;
  lVar6 = param_9;
  format_defaults(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppuVar1,
                  param_9,(uint *)0x0,(uint *)0x0,(uint *)0x0,ppcVar8);
  tVar2 = time((time_t *)0x0);
  uVar9 = status_message_clear
                    (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9,lVar6,extraout_RDX,ptVar5,plVar7,ppcVar8);
  uVar9 = status_prompt_clear(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                              lVar6,extraout_RDX_00,ptVar5,(long)plVar7,ppcVar8);
  pcVar3 = format_expand_time(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (long *)ppuVar1,param_10,tVar2,ptVar5,plVar7,ppcVar8);
  *(char **)(param_9 + 0x550) = pcVar3;
  pcVar3 = format_expand_time(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,(long *)ppuVar1,param_11,tVar2,ptVar5,plVar7,ppcVar8);
  *(char **)(param_9 + 0x558) = pcVar3;
  sVar4 = strlen(pcVar3);
  *(undefined **)(param_9 + 0x568) = param_12;
  *(size_t *)(param_9 + 0x560) = sVar4;
  *(undefined8 *)(param_9 + 0x570) = param_13;
  *(undefined8 *)(param_9 + 0x578) = param_14;
  ppcVar8 = *(char ***)(*(long *)(param_9 + 0x598) + 0x108);
  *(undefined4 *)(param_9 + 0x580) = 0;
  *(uint *)(param_9 + 0x584) = param_15;
  pcVar3 = options_get_number(extraout_XMM0_Qa_02,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,ppcVar8,"status-keys",extraout_RDX_01,ptVar5,plVar7,
                              (ulong)param_15);
  if ((int)pcVar3 == 0) {
    mode_key_init((undefined8 *)(param_9 + 0x588),&mode_key_tree_emacs_edit);
  }
  else {
    mode_key_init((undefined8 *)(param_9 + 0x588),&mode_key_tree_vi_edit);
  }
  *(uint *)(param_9 + 400) = *(uint *)(param_9 + 400) | 3;
  *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
  format_free(ppuVar1);
  return;
}



void status_prompt_update
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,char *param_11,undefined *param_12,undefined8 param_13,
               char **param_14)

{
  uint **ppuVar1;
  time_t tVar2;
  char *pcVar3;
  size_t sVar4;
  tm *ptVar5;
  long *plVar6;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 extraout_XMM0_Qa_01;
  
  ppuVar1 = (uint **)format_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0
                                   ,0,param_11,param_12,param_13,param_14);
  plVar6 = (long *)0x0;
  ptVar5 = (tm *)0x0;
  format_defaults(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppuVar1,
                  param_9,(uint *)0x0,(uint *)0x0,(uint *)0x0,param_14);
  tVar2 = time((time_t *)0x0);
  free(*(void **)(param_9 + 0x550));
  pcVar3 = format_expand_time(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,(long *)ppuVar1,param_10,tVar2,ptVar5,plVar6,param_14);
  *(char **)(param_9 + 0x550) = pcVar3;
  free(*(void **)(param_9 + 0x558));
  pcVar3 = format_expand_time(extraout_XMM0_Qa_01,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,(long *)ppuVar1,param_11,tVar2,ptVar5,plVar6,param_14);
  *(char **)(param_9 + 0x558) = pcVar3;
  sVar4 = strlen(pcVar3);
  *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
  *(size_t *)(param_9 + 0x560) = sVar4;
  *(undefined4 *)(param_9 + 0x580) = 0;
  format_free(ppuVar1);
  return;
}



ulong status_prompt_redraw(long param_1)

{
  long lVar1;
  char **ppcVar2;
  ulong uVar3;
  ulong uVar4;
  ulong uVar5;
  ulong uVar6;
  char *pcVar7;
  undefined8 *puVar8;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  uint uVar9;
  size_t in_R8;
  size_t sVar10;
  size_t in_R9;
  ulong uVar11;
  ulong uVar12;
  long in_FS_OFFSET;
  undefined4 uVar13;
  undefined8 uVar14;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar15;
  undefined8 extraout_XMM0_Qa_00;
  undefined4 uVar16;
  undefined auVar17 [16];
  undefined4 uVar18;
  undefined auVar19 [16];
  undefined4 uVar20;
  undefined auVar21 [16];
  undefined4 uVar22;
  undefined auVar23 [16];
  undefined4 uVar24;
  undefined auVar25 [16];
  undefined4 uVar26;
  undefined auVar27 [16];
  undefined4 in_XMM7_Da;
  undefined in_stack_ffffffffffffff08;
  long local_e8 [2];
  undefined8 local_d8;
  undefined4 local_b8;
  undefined4 uStack_b4;
  undefined4 uStack_b0;
  undefined4 uStack_ac;
  undefined local_a8 [16];
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined8 local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar5 = 0;
  if ((*(int *)(param_1 + 0xf0) != 0) && (*(int *)(param_1 + 0xf4) != 0)) {
    local_b8 = *(undefined4 *)(param_1 + 0x3a8);
    uStack_b4 = *(undefined4 *)(param_1 + 0x3ac);
    uStack_b0 = *(undefined4 *)(param_1 + 0x3b0);
    uStack_ac = *(undefined4 *)(param_1 + 0x3b4);
    auVar17 = *(undefined (*) [16])(param_1 + 0x3b8);
    uVar15 = 0;
    auVar19 = *(undefined (*) [16])(param_1 + 0x3c8);
    auVar21 = *(undefined (*) [16])(param_1 + 0x3d8);
    auVar23 = *(undefined (*) [16])(param_1 + 1000);
    local_48 = *(undefined8 *)(param_1 + 0x418);
    auVar25 = *(undefined (*) [16])(param_1 + 0x3f8);
    auVar27 = *(undefined (*) [16])(param_1 + 0x408);
    lVar1 = *(long *)(param_1 + 0x598);
    local_a8 = auVar17;
    local_98 = auVar19;
    local_88 = auVar21;
    local_78 = auVar23;
    local_68 = auVar25;
    local_58 = auVar27;
    uVar14 = screen_init(local_b8,auVar17._0_4_,auVar19._0_4_,auVar21._0_4_,auVar23._0_4_,
                         auVar25._0_4_,auVar27._0_4_,in_XMM7_Da,(undefined8 *)(param_1 + 0x3a8),
                         *(int *)(param_1 + 0xf0),1,0,in_R8,in_R9);
    uVar4 = screen_write_strlen(uVar14,auVar17._0_4_,auVar19._0_4_,auVar21._0_4_,auVar23._0_4_,
                                auVar25._0_4_,auVar27._0_4_,in_XMM7_Da,"%s",
                                *(undefined8 *)(param_1 + 0x550),extraout_RDX,uVar15,in_R8,in_R9,
                                in_stack_ffffffffffffff08);
    ppcVar2 = *(char ***)(lVar1 + 0x108);
    puVar8 = &local_d8;
    uVar5 = (ulong)*(uint *)(param_1 + 0xf0);
    if (uVar4 < *(uint *)(param_1 + 0xf0)) {
      uVar5 = uVar4;
    }
    if (*(int *)(param_1 + 0x590) == 1) {
      style_apply(extraout_XMM0_Qa,auVar17._0_4_,auVar19._0_4_,auVar21._0_4_,auVar23._0_4_,
                  auVar25._0_4_,auVar27._0_4_,in_XMM7_Da,puVar8,ppcVar2,"message-command-style",
                  uVar15,in_R8,in_R9);
    }
    else {
      style_apply(extraout_XMM0_Qa,auVar17._0_4_,auVar19._0_4_,auVar21._0_4_,auVar23._0_4_,
                  auVar25._0_4_,auVar27._0_4_,in_XMM7_Da,puVar8,ppcVar2,"message-style",uVar15,in_R8
                  ,in_R9);
    }
    screen_write_start(local_e8,0,(long)(undefined8 *)(param_1 + 0x3a8));
    uVar15 = screen_write_cursormove((long)local_e8,0,0);
    sVar10 = *(size_t *)(param_1 + 0x550);
    pcVar7 = "%s";
    uVar15 = screen_write_nputs(uVar15,auVar17._0_4_,auVar19._0_4_,auVar21._0_4_,auVar23._0_4_,
                                auVar25._0_4_,auVar27._0_4_,in_XMM7_Da,local_e8,uVar5,(long)puVar8,
                                "%s",sVar10,in_R9,in_stack_ffffffffffffff08);
    uVar26 = auVar27._0_4_;
    uVar24 = auVar25._0_4_;
    uVar22 = auVar23._0_4_;
    uVar20 = auVar21._0_4_;
    uVar18 = auVar19._0_4_;
    uVar16 = auVar17._0_4_;
    uVar11 = (ulong)*(uint *)(param_1 + 0xf0);
    uVar4 = uVar11 - uVar5;
    uVar12 = uVar4;
    if (uVar4 != 0) {
      uVar6 = screen_write_strlen(uVar15,uVar16,uVar18,uVar20,uVar22,uVar24,uVar26,in_XMM7_Da,"%s",
                                  *(undefined8 *)(param_1 + 0x558),extraout_RDX_00,pcVar7,sVar10,
                                  in_R9,in_stack_ffffffffffffff08);
      uVar3 = *(ulong *)(param_1 + 0x560);
      if (uVar3 < uVar4) {
        uVar11 = uVar6 + uVar5;
        uVar12 = 0;
      }
      else {
        uVar12 = (uVar3 - uVar11) + 1 + uVar5;
        if (uVar3 == uVar6) {
          uVar4 = uVar4 - 1;
          uVar11 = uVar4 + uVar5;
        }
      }
      sVar10 = *(long *)(param_1 + 0x558) + uVar12;
      screen_write_nputs(extraout_XMM0_Qa_00,auVar17._0_4_,auVar19._0_4_,auVar21._0_4_,auVar23._0_4_
                         ,auVar25._0_4_,auVar27._0_4_,in_XMM7_Da,local_e8,uVar4,(long)puVar8,"%s",
                         sVar10,in_R9,in_stack_ffffffffffffff08);
      uVar26 = auVar27._0_4_;
      uVar24 = auVar25._0_4_;
      uVar22 = auVar23._0_4_;
      uVar20 = auVar21._0_4_;
      uVar18 = auVar19._0_4_;
      uVar16 = auVar17._0_4_;
      if (uVar11 < *(uint *)(param_1 + 0xf0)) {
        do {
          uVar11 = uVar11 + 1;
          screen_write_putc(local_e8,(long)puVar8,0x20);
          uVar26 = auVar27._0_4_;
          uVar24 = auVar25._0_4_;
          uVar22 = auVar23._0_4_;
          uVar20 = auVar21._0_4_;
          uVar18 = auVar19._0_4_;
          uVar16 = auVar17._0_4_;
        } while (uVar11 < *(uint *)(param_1 + 0xf0));
      }
    }
    uVar13 = screen_write_stop();
    uVar9 = ((int)uVar5 + (int)*(undefined8 *)(param_1 + 0x560)) - (int)uVar12;
    uVar13 = grid_view_get_cell(uVar13,uVar16,uVar18,uVar20,uVar22,uVar24,uVar26,in_XMM7_Da,
                                *(long *)(param_1 + 0x3b0),(ulong)uVar9,0,(undefined4 *)puVar8,
                                sVar10,in_R9);
    local_d8._1_1_ = local_d8._1_1_ ^ 0x10;
    uVar13 = grid_view_set_cell(uVar13,uVar16,uVar18,uVar20,uVar22,uVar24,uVar26,in_XMM7_Da,
                                *(long *)(param_1 + 0x3b0),(ulong)uVar9,0,(undefined4 *)puVar8,
                                sVar10,in_R9);
    uVar5 = grid_compare(uVar13,uVar16,uVar18,uVar20,uVar22,uVar24,uVar26,in_XMM7_Da,
                         *(long *)(param_1 + 0x3b0),CONCAT44(uStack_ac,uStack_b0),extraout_RDX_01,
                         puVar8,sVar10,in_R9);
    if ((int)uVar5 == 0) {
      screen_free((void **)&local_b8);
      uVar5 = uVar5 & 0xffffffff;
    }
    else {
      screen_free((void **)&local_b8);
      uVar5 = 1;
    }
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar5;
}



undefined8 status_prompt_up_history(int *param_1)

{
  int iVar1;
  
  if ((status_prompt_hsize != 0) && (status_prompt_hsize != *param_1)) {
    iVar1 = *param_1 + 1;
    *param_1 = iVar1;
    return *(undefined8 *)(status_prompt_hlist + (ulong)(uint)(status_prompt_hsize - iVar1) * 8);
  }
  return 0;
}



undefined1 * status_prompt_down_history(int *param_1)

{
  int iVar1;
  
  if ((status_prompt_hsize != 0) && (*param_1 != 0)) {
    iVar1 = *param_1 + -1;
    *param_1 = iVar1;
    if (iVar1 != 0) {
      return *(undefined1 **)(status_prompt_hlist + (ulong)(uint)(status_prompt_hsize - iVar1) * 8);
    }
  }
  return &DAT_001816c0;
}



void status_prompt_add_history
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               char *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  void **ppvVar1;
  undefined8 *puVar2;
  uint uVar3;
  int iVar4;
  void *extraout_RAX;
  undefined8 extraout_RAX_00;
  ulong uVar5;
  void **ppvVar6;
  ulong uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  ppvVar6 = status_prompt_hlist;
  uVar3 = status_prompt_hsize;
  if (status_prompt_hsize != 0) {
    iVar4 = strcmp((char *)status_prompt_hlist[status_prompt_hsize - 1],param_9);
    if (iVar4 != 0) {
      param_1 = extraout_XMM0_Da;
      if (uVar3 != 100) goto LAB_00159b40;
      free(*ppvVar6);
      ppvVar6 = status_prompt_hlist + 1;
      memmove(status_prompt_hlist,ppvVar6,0x318);
      ppvVar1 = status_prompt_hlist + (status_prompt_hsize - 1);
      xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,param_6
              ,param_7,param_8,param_9,ppvVar6,(ulong)(status_prompt_hsize - 1),param_12,param_13,
              param_14);
      *ppvVar1 = extraout_RAX;
    }
    return;
  }
LAB_00159b40:
  uVar7 = (ulong)(uVar3 + 1);
  status_prompt_hlist =
       (void **)xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              ppvVar6,uVar7,8,param_12,param_13,param_14);
  uVar5 = (ulong)status_prompt_hsize;
  status_prompt_hsize = status_prompt_hsize + 1;
  puVar2 = (undefined8 *)((long)status_prompt_hlist + uVar5 * 8);
  xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,param_9,uVar7,uVar5,(ulong)status_prompt_hsize,param_13,param_14);
  *puVar2 = extraout_RAX_00;
  return;
}



void status_prompt_load_history
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  long lVar2;
  char *pcVar3;
  FILE *__stream;
  char *pcVar4;
  int *piVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined *puVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined in_stack_ffffffffffffffc8;
  undefined7 uStack_37;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar3 = (char *)status_prompt_find_history_file
                             (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              param_9,param_10,param_11,param_12,param_13,param_14);
  if (pcVar3 != (char *)0x0) {
    log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "loading history from %s",pcVar3,param_12,param_13,param_14,in_stack_ffffffffffffffc8);
    __stream = fopen(pcVar3,"r");
    if (__stream == (FILE *)0x0) {
      piVar5 = __errno_location();
      pcVar4 = strerror(*piVar5);
      log_emit(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "%s: %s",pcVar3,pcVar4,param_13,param_14,in_stack_ffffffffffffffc8);
      free(pcVar3);
    }
    else {
      free(pcVar3);
      while( true ) {
        puVar6 = &stack0xffffffffffffffc8;
        pcVar3 = (char *)fgetln(__stream,(long *)&stack0xffffffffffffffc8);
        if (pcVar3 == (char *)0x0) break;
        lVar2 = CONCAT71(uStack_37,in_stack_ffffffffffffffc8);
        if (lVar2 != 0) {
          if (pcVar3[lVar2 + -1] == '\n') {
            pcVar3[lVar2 + -1] = '\0';
            status_prompt_add_history
                      (extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       pcVar3,puVar6,extraout_RDX,param_12,param_13,param_14);
          }
          else {
            pcVar4 = (char *)xmalloc(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,
                                     param_7,param_8,lVar2 + 1,puVar6,extraout_RDX,param_12,param_13
                                     ,param_14);
            memcpy(pcVar4,pcVar3,CONCAT71(uStack_37,in_stack_ffffffffffffffc8));
            pcVar4[CONCAT71(uStack_37,in_stack_ffffffffffffffc8)] = '\0';
            status_prompt_add_history
                      (extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       pcVar4,pcVar3,extraout_RDX_00,param_12,param_13,param_14);
            free(pcVar4);
          }
        }
      }
      fclose(__stream);
    }
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long status_prompt_complete_list
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9,char *param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  char **ppcVar1;
  uint uVar2;
  undefined8 uVar3;
  int iVar4;
  size_t __n;
  long lVar5;
  uint uVar6;
  char *pcVar7;
  char *pcVar8;
  undefined **ppuVar9;
  char **ppcVar10;
  char *pcVar11;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  char *local_78;
  char *local_70;
  char *local_68 [5];
  long local_40;
  
  ppcVar10 = (char **)cmd_table;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  *param_9 = 0;
  local_78 = "even-horizontal";
  local_70 = "even-vertical";
  local_68[0] = "main-horizontal";
  local_68[1] = "main-vertical";
  local_68[2] = "tiled";
  local_68[3] = (char *)0x0;
  if (ppcVar10 == (char **)0x0) {
    __n = strlen(param_10);
    lVar5 = 0;
  }
  else {
    __n = strlen(param_10);
    lVar5 = 0;
    ppuVar9 = &cmd_table;
    do {
      while (iVar4 = strncmp(*ppcVar10,param_10,__n), iVar4 == 0) {
        lVar5 = xreallocarray(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,lVar5,(ulong)(*param_9 + 1),8,param_12,param_13,param_14);
        uVar2 = *param_9;
        uVar3 = *(undefined8 *)*ppuVar9;
        uVar6 = uVar2 + 1;
        param_12 = (ulong)uVar6;
        *param_9 = uVar6;
        *(undefined8 *)(lVar5 + (ulong)uVar2 * 8) = uVar3;
        __n = strlen(param_10);
        ppcVar10 = (char **)ppuVar9[1];
        ppuVar9 = ppuVar9 + 1;
        if (ppcVar10 == (char **)0x0) goto LAB_00159dd4;
      }
      ppcVar10 = (char **)ppuVar9[1];
      ppuVar9 = ppuVar9 + 1;
    } while (ppcVar10 != (char **)0x0);
  }
LAB_00159dd4:
  pcVar8 = "buffer-limit";
  ppcVar10 = &options_table;
  do {
    while (iVar4 = strncmp(pcVar8,param_10,__n), iVar4 == 0) {
      lVar5 = xreallocarray(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,lVar5,(ulong)(*param_9 + 1),8,param_12,param_13,param_14);
      uVar2 = *param_9;
      *param_9 = uVar2 + 1;
      *(char **)(lVar5 + (ulong)uVar2 * 8) = *ppcVar10;
      __n = strlen(param_10);
      pcVar8 = ppcVar10[7];
      ppcVar10 = ppcVar10 + 7;
      if (pcVar8 == (char *)0x0) goto LAB_00159e4e;
    }
    pcVar8 = ppcVar10[7];
    ppcVar10 = ppcVar10 + 7;
  } while (pcVar8 != (char *)0x0);
LAB_00159e4e:
  pcVar8 = "even-horizontal";
  ppcVar10 = &local_78;
  pcVar11 = "even-vertical";
  while( true ) {
    pcVar7 = pcVar8;
    iVar4 = strncmp(pcVar8,param_10,__n);
    if (iVar4 == 0) {
      lVar5 = xreallocarray(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,lVar5,(ulong)(*param_9 + 1),8,pcVar7,param_13,param_14);
      uVar2 = *param_9;
      *param_9 = uVar2 + 1;
      *(char **)(lVar5 + (ulong)uVar2 * 8) = pcVar8;
    }
    if (pcVar11 == (char *)0x0) break;
    __n = strlen(param_10);
    ppcVar1 = ppcVar10 + 2;
    pcVar8 = pcVar11;
    ppcVar10 = ppcVar10 + 1;
    pcVar11 = *ppcVar1;
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return lVar5;
}



char * status_prompt_complete_prefix
                 (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 char **param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  char *__s;
  size_t sVar1;
  size_t sVar2;
  char *__s_00;
  char **ppcVar3;
  
  __s = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,
                        param_10,param_11,param_12,param_13,param_14);
  if (1 < (uint)param_10) {
    ppcVar3 = param_9 + 1;
    do {
      __s_00 = *ppcVar3;
      sVar1 = strlen(__s_00);
      sVar2 = strlen(__s);
      if (sVar1 < sVar2) {
        sVar2 = sVar1;
      }
      if (sVar2 != 0) {
        while( true ) {
          sVar2 = sVar2 - 1;
          if (__s[sVar2] != __s_00[sVar2]) {
            __s[sVar2] = '\0';
          }
          if (sVar2 == 0) break;
          __s_00 = *ppcVar3;
        }
      }
      ppcVar3 = ppcVar3 + 1;
    } while (param_9 + (ulong)((uint)param_10 - 2) + 2 != ppcVar3);
  }
  return __s;
}



char * status_prompt_complete
                 (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,char *param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
                 undefined8 param_14)

{
  char *__s;
  char *pcVar1;
  int iVar2;
  char *pcVar3;
  size_t sVar4;
  long lVar5;
  ulong uVar6;
  uint *puVar7;
  char **ppcVar8;
  char *extraout_RAX;
  char *extraout_RAX_00;
  char *pcVar9;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 uVar10;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  uint uVar11;
  undefined *puVar12;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 uVar13;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Da_11;
  undefined4 extraout_XMM0_Da_12;
  undefined4 extraout_XMM0_Da_13;
  undefined4 extraout_XMM0_Da_14;
  undefined4 extraout_XMM0_Da_15;
  undefined4 extraout_XMM0_Da_16;
  undefined4 extraout_XMM0_Da_17;
  undefined4 extraout_XMM0_Da_18;
  undefined4 extraout_XMM0_Da_19;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined4 extraout_XMM0_Db_09;
  undefined4 extraout_XMM0_Db_10;
  undefined4 extraout_XMM0_Db_11;
  undefined4 extraout_XMM0_Db_12;
  undefined4 extraout_XMM0_Db_13;
  undefined4 extraout_XMM0_Db_14;
  undefined8 uVar14;
  undefined uVar16;
  char *in_stack_ffffffffffffff98;
  uint local_54;
  char *local_50;
  char *local_48;
  long local_40;
  
  uVar16 = SUB81(in_stack_ffffffffffffff98,0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_54 = 0;
  if (*param_10 == '\0') {
    pcVar3 = (char *)0x0;
    goto LAB_0015a2a3;
  }
  local_50 = (char *)0x0;
  if ((*param_10 != '-') || ((param_10[1] != 't' && (param_10[1] != 's')))) {
    puVar7 = &local_54;
    ppcVar8 = (char **)status_prompt_complete_list
                                 (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  puVar7,param_10,param_11,param_12,puVar7,param_14);
    if (local_54 == 0) {
      local_50 = (char *)0x0;
    }
    else if (local_54 == 1) {
      xasprintf(CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_11),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,(long *)&local_50,&DAT_00177cd6,*ppcVar8,param_12,puVar7,
                param_14,uVar16);
    }
    else {
      local_50 = status_prompt_complete_prefix
                           (CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_11),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,ppcVar8,(ulong)local_54,
                            extraout_RDX_04,param_12,puVar7,param_14);
    }
    free(ppcVar8);
    pcVar3 = local_50;
    goto LAB_0015a2a3;
  }
  pcVar3 = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                           param_10,param_11,param_12,param_13,param_14);
  puVar12 = &DAT_001816c0;
  sVar4 = strlen(pcVar3);
  if (pcVar3[sVar4 - 1] == ':') {
    pcVar3[sVar4 - 1] = '\0';
    puVar12 = &DAT_00177ecd;
  }
  ppcVar8 = (char **)0x0;
  __s = pcVar3 + 2;
  lVar5 = sessions_RB_MINMAX(&sessions,-1);
  uVar10 = extraout_RDX;
  uVar13 = extraout_XMM0_Da;
  uVar15 = extraout_XMM0_Db;
  while (lVar5 != 0) {
    while( true ) {
      sVar4 = strlen(__s);
      iVar2 = strncmp(*(char **)(lVar5 + 8),__s,sVar4);
      if (iVar2 != 0) break;
      ppcVar8 = (char **)xreallocarray(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,
                                       param_7,param_8,ppcVar8,(ulong)(local_54 + 2),8,param_12,
                                       param_13,param_14);
      uVar6 = (ulong)local_54;
      local_54 = local_54 + 1;
      ppcVar8[uVar6] = *(char **)(lVar5 + 8);
      lVar5 = sessions_RB_NEXT(lVar5);
      uVar10 = extraout_RDX_01;
      uVar13 = extraout_XMM0_Da_02;
      uVar15 = extraout_XMM0_Db_01;
      if (lVar5 == 0) goto LAB_0015a0b5;
    }
    lVar5 = sessions_RB_NEXT(lVar5);
    uVar10 = extraout_RDX_00;
    uVar13 = extraout_XMM0_Da_00;
    uVar15 = extraout_XMM0_Db_00;
  }
LAB_0015a0b5:
  if (local_54 == 1) {
    xstrdup(CONCAT44(uVar15,uVar13),param_2,param_3,param_4,param_5,param_6,param_7,param_8,*ppcVar8
            ,(ulong)local_54,uVar10,param_12,param_13,param_14);
    local_50 = extraout_RAX;
    lVar5 = session_find(*ppcVar8);
    uVar13 = extraout_XMM0_Da_18;
    uVar15 = extraout_XMM0_Db_13;
    if (lVar5 != 0) {
      puVar12 = &DAT_00177ecd;
    }
  }
  else if (local_54 != 0) {
    local_50 = status_prompt_complete_prefix
                         (CONCAT44(uVar15,uVar13),param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,ppcVar8,(ulong)local_54,uVar10,param_12,param_13,param_14);
    uVar13 = extraout_XMM0_Da_12;
    uVar15 = extraout_XMM0_Db_09;
  }
  if (local_50 == (char *)0x0) {
    pcVar9 = local_50;
    if (pcVar3[2] == ':') {
      puVar7 = (uint *)winlinks_RB_MINMAX((long *)(param_9 + 0xf8),-1);
      uVar16 = SUB81(in_stack_ffffffffffffff98,0);
      uVar10 = extraout_RDX_05;
      uVar13 = extraout_XMM0_Da_13;
      uVar15 = extraout_XMM0_Db_10;
      if (puVar7 != (uint *)0x0) {
        do {
          xasprintf(CONCAT44(uVar15,uVar13),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    (long *)&local_48,&DAT_0017fd58,*(undefined8 *)(*(long *)(puVar7 + 2) + 8),
                    pcVar9,param_13,param_14,(char)in_stack_ffffffffffffff98);
          sVar4 = strlen(__s);
          pcVar1 = local_48;
          iVar2 = strncmp(local_48,__s,sVar4);
          uVar13 = extraout_XMM0_Da_17;
          if (iVar2 == 0) {
LAB_0015a41f:
            ppcVar8 = (char **)xreallocarray(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,
                                             param_8,ppcVar8,(ulong)(local_54 + 1),8,pcVar9,param_13
                                             ,param_14);
            uVar6 = (ulong)local_54;
            local_54 = local_54 + 1;
            ppcVar8[uVar6] = local_48;
          }
          else {
            free(pcVar1);
            xasprintf(CONCAT44(extraout_XMM0_Db_11,extraout_XMM0_Da_14),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,(long *)&local_48,":%d",(ulong)*puVar7,pcVar9,
                      param_13,param_14,(char)in_stack_ffffffffffffff98);
            sVar4 = strlen(__s);
            pcVar1 = local_48;
            iVar2 = strncmp(local_48,__s,sVar4);
            uVar13 = extraout_XMM0_Da_15;
            if (iVar2 == 0) goto LAB_0015a41f;
            free(pcVar1);
          }
          puVar7 = (uint *)winlinks_RB_NEXT((long)puVar7);
          uVar16 = SUB81(in_stack_ffffffffffffff98,0);
          uVar10 = extraout_RDX_06;
          uVar13 = extraout_XMM0_Da_16;
          uVar15 = extraout_XMM0_Db_12;
        } while (puVar7 != (uint *)0x0);
      }
    }
    else {
      lVar5 = sessions_RB_MINMAX(&sessions,-1);
      uVar16 = SUB81(in_stack_ffffffffffffff98,0);
      uVar10 = extraout_RDX_02;
      uVar13 = extraout_XMM0_Da_03;
      uVar15 = extraout_XMM0_Db_02;
      while (lVar5 != 0) {
        puVar7 = (uint *)winlinks_RB_MINMAX((long *)(lVar5 + 0xf8),-1);
        if (puVar7 != (uint *)0x0) {
          uVar13 = extraout_XMM0_Da_04;
          uVar15 = extraout_XMM0_Db_03;
          do {
            while( true ) {
              pcVar9 = *(char **)(*(long *)(puVar7 + 2) + 8);
              xasprintf(CONCAT44(uVar15,uVar13),param_2,param_3,param_4,param_5,param_6,param_7,
                        param_8,(long *)&local_48,&DAT_0017fd56,*(undefined8 *)(lVar5 + 8),pcVar9,
                        param_13,param_14,(char)in_stack_ffffffffffffff98);
              sVar4 = strlen(__s);
              in_stack_ffffffffffffff98 = local_48;
              iVar2 = strncmp(local_48,__s,sVar4);
              uVar13 = extraout_XMM0_Da_08;
              if (iVar2 != 0) break;
LAB_0015a1cf:
              ppcVar8 = (char **)xreallocarray(uVar13,param_2,param_3,param_4,param_5,param_6,
                                               param_7,param_8,ppcVar8,(ulong)(local_54 + 1),8,
                                               pcVar9,param_13,param_14);
              uVar6 = (ulong)local_54;
              local_54 = local_54 + 1;
              ppcVar8[uVar6] = local_48;
              puVar7 = (uint *)winlinks_RB_NEXT((long)puVar7);
              uVar13 = extraout_XMM0_Da_09;
              uVar15 = extraout_XMM0_Db_06;
              if (puVar7 == (uint *)0x0) goto LAB_0015a20a;
            }
            free(in_stack_ffffffffffffff98);
            pcVar9 = (char *)(ulong)*puVar7;
            xasprintf(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_05),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,(long *)&local_48,"%s:%d",
                      *(undefined8 *)(lVar5 + 8),pcVar9,param_13,param_14,
                      (char)in_stack_ffffffffffffff98);
            sVar4 = strlen(__s);
            in_stack_ffffffffffffff98 = local_48;
            iVar2 = strncmp(local_48,__s,sVar4);
            uVar13 = extraout_XMM0_Da_06;
            if (iVar2 == 0) goto LAB_0015a1cf;
            free(in_stack_ffffffffffffff98);
            puVar7 = (uint *)winlinks_RB_NEXT((long)puVar7);
            uVar13 = extraout_XMM0_Da_07;
            uVar15 = extraout_XMM0_Db_05;
          } while (puVar7 != (uint *)0x0);
        }
LAB_0015a20a:
        lVar5 = sessions_RB_NEXT(lVar5);
        uVar16 = SUB81(in_stack_ffffffffffffff98,0);
        uVar10 = extraout_RDX_03;
        uVar13 = extraout_XMM0_Da_10;
        uVar15 = extraout_XMM0_Db_07;
      }
    }
    uVar14 = CONCAT44(uVar15,uVar13);
    if (local_54 == 1) {
      uVar14 = xstrdup(CONCAT44(uVar15,uVar13),param_2,param_3,param_4,param_5,param_6,param_7,
                       param_8,*ppcVar8,(ulong)local_54,uVar10,pcVar9,param_13,param_14);
      puVar12 = &DAT_00178815;
      local_50 = extraout_RAX_00;
LAB_0015a494:
      if (local_50 != (char *)0x0) goto LAB_0015a244;
    }
    else {
      if (local_54 != 0) {
        local_50 = status_prompt_complete_prefix
                             (CONCAT44(uVar15,uVar13),param_2,param_3,param_4,param_5,param_6,
                              param_7,param_8,ppcVar8,(ulong)local_54,uVar10,pcVar9,param_13,
                              param_14);
        uVar14 = CONCAT44(extraout_XMM0_Db_14,extraout_XMM0_Da_19);
        puVar12 = &DAT_001816c0;
        goto LAB_0015a494;
      }
      puVar12 = &DAT_001816c0;
      if (local_50 == (char *)0x0) goto LAB_0015a28c;
LAB_0015a244:
      xasprintf(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)&local_48,
                &DAT_0017fd4e,(ulong)(uint)(int)pcVar3[1],local_50,puVar12,param_14,uVar16);
      local_50 = local_48;
    }
    if (local_54 != 0) {
      uVar6 = 0;
      do {
        uVar11 = (int)uVar6 + 1;
        free(ppcVar8[uVar6]);
        uVar6 = (ulong)uVar11;
      } while (uVar11 < local_54);
    }
  }
  else {
    xasprintf(CONCAT44(uVar15,uVar13),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              (long *)&local_48,&DAT_0017fd4e,(ulong)(uint)(int)pcVar3[1],local_50,puVar12,param_14,
              (char)in_stack_ffffffffffffff98);
    local_50 = local_48;
  }
LAB_0015a28c:
  free(pcVar3);
  free(ppcVar8);
  pcVar3 = local_50;
LAB_0015a2a3:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return pcVar3;
}



void status_prompt_key(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,ulong param_10,undefined8 param_11,long param_12,size_t param_13,
                      undefined8 param_14)

{
  undefined uVar1;
  char **ppcVar2;
  byte *pbVar3;
  byte bVar4;
  uint uVar5;
  int iVar6;
  size_t sVar7;
  char *pcVar8;
  char *pcVar9;
  undefined8 *puVar10;
  void *pvVar11;
  size_t sVar12;
  char *__s;
  byte *pbVar13;
  ulong uVar14;
  ulong uVar15;
  int iVar16;
  uint *puVar17;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong extraout_RDX_01;
  uint *extraout_RDX_02;
  uint *extraout_RDX_03;
  uint *extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  long lVar18;
  long lVar19;
  undefined8 uVar20;
  void *__dest;
  undefined *puVar21;
  size_t sVar22;
  byte *pbVar23;
  byte *pbVar24;
  long lVar25;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 uVar26;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 uVar27;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined auVar28 [16];
  size_t local_90;
  undefined local_88 [72];
  long local_40;
  
  lVar18 = *(long *)(param_9 + 0x598);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  sVar7 = strlen(*(char **)(param_9 + 0x558));
  ppcVar2 = *(char ***)(lVar18 + 0x108);
  uVar14 = param_10;
  uVar5 = mode_key_lookup((undefined8 *)(param_9 + 0x588),param_10,(undefined8 *)0x0);
  iVar16 = status_prompt_hsize;
  puVar17 = &switchD_0015a56f::switchdataD_0017fd5c;
  switch(uVar5) {
  case 1:
    if (0x5e < param_10 - 0x20) break;
    lVar18 = xrealloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      *(undefined8 *)(param_9 + 0x558),sVar7 + 2,
                      &switchD_0015a56f::switchdataD_0017fd5c,param_12,param_13,param_14);
    sVar22 = *(size_t *)(param_9 + 0x560);
    *(long *)(param_9 + 0x558) = lVar18;
    if (sVar22 == sVar7) {
      *(size_t *)(param_9 + 0x560) = sVar7 + 1;
      *(char *)(lVar18 + sVar7) = (char)param_10;
      *(undefined *)(*(long *)(param_9 + 0x558) + *(long *)(param_9 + 0x560)) = 0;
    }
    else {
      param_13 = (sVar7 - sVar22) + 1;
      memmove((void *)(lVar18 + 1 + sVar22),(void *)(lVar18 + sVar22),param_13);
      lVar18 = *(long *)(param_9 + 0x560);
      param_12 = lVar18 + 1;
      *(long *)(param_9 + 0x560) = param_12;
      *(char *)(*(long *)(param_9 + 0x558) + lVar18) = (char)param_10;
    }
    if ((*(byte *)(param_9 + 0x584) & 1) != 0) {
      uVar20 = *(undefined8 *)(param_9 + 0x558);
      iVar16 = (**(code **)(param_9 + 0x568))(*(undefined8 *)(param_9 + 0x578));
      if (iVar16 == 0) {
        status_prompt_clear(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,param_9,uVar20,extraout_RDX_00,
                            param_12,param_13,param_14);
      }
    }
  case 0x17:
switchD_0015a56f_caseD_17:
    *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
    break;
  case 2:
    sVar22 = *(size_t *)(param_9 + 0x560);
    if (sVar22 == 0) break;
    lVar18 = *(long *)(param_9 + 0x558);
    if (sVar22 == sVar7) {
      *(size_t *)(param_9 + 0x560) = sVar7 - 1;
      *(undefined *)(lVar18 + -1 + sVar7) = 0;
    }
    else {
      memmove((void *)(lVar18 + -1 + sVar22),(void *)(lVar18 + sVar22),(sVar7 - sVar22) + 1);
      *(long *)(param_9 + 0x560) = *(long *)(param_9 + 0x560) + -1;
    }
    goto switchD_0015a56f_caseD_17;
  case 3:
    pcVar8 = (char *)0x0;
    iVar16 = (**(code **)(param_9 + 0x568))(*(undefined8 *)(param_9 + 0x578));
    uVar20 = extraout_RDX_06;
    uVar26 = extraout_XMM0_Da_08;
    uVar27 = extraout_XMM0_Db_06;
    goto joined_r0x0015ad1f;
  case 4:
    pbVar3 = *(byte **)(param_9 + 0x558);
    if (*pbVar3 != 0) {
      pbVar13 = pbVar3;
      pbVar24 = pbVar3;
      if ((*(long *)(param_9 + 0x560) != 0) &&
         (pbVar24 = pbVar3 + *(long *)(param_9 + 0x560) + -1, pbVar13 = pbVar24, pbVar23 = pbVar24,
         pbVar3 < pbVar24)) {
        do {
          if (*pbVar23 == 0x20) goto LAB_0015ac60;
          pbVar23 = pbVar23 + -1;
          pbVar13 = pbVar3;
        } while (pbVar3 != pbVar23);
      }
      bVar4 = *pbVar13;
      pbVar23 = pbVar13;
      while (bVar4 == 0x20) {
LAB_0015ac60:
        pbVar23 = pbVar23 + 1;
        bVar4 = *pbVar23;
      }
      for (; bVar4 = *pbVar24, (bVar4 & 0xdf) != 0; pbVar24 = pbVar24 + 1) {
      }
      while (bVar4 == 0x20) {
        pbVar3 = pbVar24 + -1;
        pbVar24 = pbVar24 + -1;
        bVar4 = *pbVar3;
      }
      pbVar24 = pbVar24 + (bVar4 != 0);
      if ((pbVar23 < pbVar24) && (uVar14 = (long)pbVar24 - (long)pbVar23, uVar14 < 0x40)) {
        puVar21 = local_88;
        uVar15 = 0x40;
        auVar28 = __memcpy_chk(puVar21,pbVar23,uVar14);
        local_88[uVar14] = 0;
        pcVar8 = status_prompt_complete
                           (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,lVar18,auVar28._0_8_,
                            auVar28._8_8_,uVar15,puVar21,param_14);
        if (pcVar8 != (char *)0x0) {
          sVar12 = (sVar7 + 1) - ((long)pbVar24 - *(long *)(param_9 + 0x558));
          memmove(pbVar23,pbVar24,sVar12);
          sVar22 = strlen(pcVar8);
          lVar18 = *(long *)(param_9 + 0x558);
          lVar25 = xrealloc(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,lVar18,((sVar7 + 1) - uVar14) + sVar22,extraout_RDX,uVar15,
                            puVar21,param_14);
          *(long *)(param_9 + 0x558) = lVar25;
          pbVar23 = pbVar23 + (lVar25 - lVar18);
          sVar7 = strlen(pcVar8);
          memmove(pbVar23 + sVar7,pbVar23,sVar12);
          sVar7 = strlen(pcVar8);
          memcpy(pbVar23,pcVar8,sVar7);
          sVar7 = strlen(pcVar8);
          *(byte **)(param_9 + 0x560) = pbVar23 + (sVar7 - *(long *)(param_9 + 0x558));
          free(pcVar8);
          *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
        }
      }
    }
    break;
  case 5:
    lVar18 = *(long *)(param_9 + 0x560);
    if (lVar18 == 0) break;
    goto LAB_0015aadb;
  case 6:
    goto switchD_0015a56f_caseD_6;
  case 7:
  case 0x1c:
    sVar22 = *(size_t *)(param_9 + 0x560);
    if (sVar22 != sVar7) {
      memmove((void *)(sVar22 + *(long *)(param_9 + 0x558)),
              (void *)(*(long *)(param_9 + 0x558) + 1 + sVar22),(sVar7 - sVar22) + 1);
      *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
    }
    break;
  case 8:
  case 0x1d:
    **(undefined **)(param_9 + 0x558) = 0;
    goto LAB_0015a74d;
  case 9:
  case 0x1b:
    if (*(ulong *)(param_9 + 0x560) < sVar7) {
      *(undefined *)(*(long *)(param_9 + 0x558) + *(ulong *)(param_9 + 0x560)) = 0;
      *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
    }
    break;
  case 10:
    pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,ppcVar2,"word-separators",
                                &switchD_0015a56f::switchdataD_0017fd5c,param_12,param_13,param_14);
    pvVar11 = *(void **)(param_9 + 0x558);
    lVar18 = *(long *)(param_9 + 0x560);
    lVar25 = lVar18;
    do {
      __dest = pvVar11;
      if (lVar25 == 0) goto LAB_0015a9ee;
      lVar25 = lVar25 + -1;
      pcVar9 = strchr(pcVar8,(int)*(char *)((long)pvVar11 + lVar25));
      lVar19 = lVar25;
    } while (pcVar9 != (char *)0x0);
    do {
      lVar25 = lVar19;
      if (lVar25 == 0) goto LAB_0015a9ee;
      pcVar9 = strchr(pcVar8,(int)*(char *)((long)pvVar11 + lVar25 + -1));
      lVar19 = lVar25 + -1;
    } while (pcVar9 == (char *)0x0);
    __dest = (void *)((long)pvVar11 + lVar25);
LAB_0015a9ee:
    memmove(__dest,(void *)((long)pvVar11 + lVar18),(sVar7 - lVar18) + 1);
    memset((void *)((sVar7 - *(long *)(param_9 + 0x560)) + lVar25 + *(long *)(param_9 + 0x558)),0,
           *(long *)(param_9 + 0x560) - lVar25);
    *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
    *(long *)(param_9 + 0x560) = lVar25;
    break;
  case 0xb:
    goto switchD_0015a56f_caseD_b;
  case 0xc:
    pcVar8 = *(char **)(param_9 + 0x558);
    if (*pcVar8 != '\0') {
      status_prompt_add_history
                (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,pcVar8,
                 pcVar8,&switchD_0015a56f::switchdataD_0017fd5c,param_12,param_13,param_14);
      pcVar8 = *(char **)(param_9 + 0x558);
    }
    iVar16 = (**(code **)(param_9 + 0x568))(*(undefined8 *)(param_9 + 0x578));
    uVar20 = extraout_RDX_07;
    uVar26 = extraout_XMM0_Da_09;
    uVar27 = extraout_XMM0_Db_07;
joined_r0x0015ad1f:
    if (iVar16 == 0) {
      status_prompt_clear(CONCAT44(uVar27,uVar26),param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,param_9,pcVar8,uVar20,param_12,param_13,param_14);
    }
    break;
  case 0xd:
    if ((status_prompt_hsize != 0) && (*(int *)(param_9 + 0x580) != 0)) {
      iVar6 = *(int *)(param_9 + 0x580) + -1;
      *(int *)(param_9 + 0x580) = iVar6;
      if (iVar6 != 0) {
        pcVar8 = *(char **)(status_prompt_hlist + (ulong)(uint)(iVar16 - iVar6) * 8);
        goto joined_r0x0015abd5;
      }
    }
    pcVar8 = "";
    goto LAB_0015abdb;
  case 0xe:
    if ((status_prompt_hsize == 0) || (status_prompt_hsize == *(int *)(param_9 + 0x580))) break;
    iVar16 = *(int *)(param_9 + 0x580) + 1;
    uVar5 = status_prompt_hsize - iVar16;
    *(int *)(param_9 + 0x580) = iVar16;
    pcVar8 = *(char **)(status_prompt_hlist + (ulong)uVar5 * 8);
joined_r0x0015abd5:
    if (pcVar8 == (char *)0x0) break;
LAB_0015abdb:
    free(*(void **)(param_9 + 0x558));
    xstrdup(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_07),param_2,param_3,param_4,param_5,
            param_6,param_7,param_8,pcVar8,uVar14,extraout_RDX_05,param_12,param_13,param_14);
    *(char **)(param_9 + 0x558) = __s;
    sVar7 = strlen(__s);
    *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
    *(size_t *)(param_9 + 0x560) = sVar7;
    break;
  case 0xf:
    pcVar8 = " ";
    goto LAB_0015ab2a;
  case 0x10:
    pcVar8 = " ";
    uVar26 = extraout_XMM0_Da;
    uVar27 = extraout_XMM0_Db;
    goto LAB_0015aa7a;
  case 0x11:
    pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,ppcVar2,"word-separators",
                                &switchD_0015a56f::switchdataD_0017fd5c,param_12,param_13,param_14);
LAB_0015ab2a:
    sVar22 = *(size_t *)(param_9 + 0x560);
    do {
      if (sVar7 == sVar22) goto switchD_0015a56f_caseD_17;
      sVar22 = sVar22 + 1;
      lVar18 = *(long *)(param_9 + 0x558);
      *(size_t *)(param_9 + 0x560) = sVar22;
      pcVar9 = strchr(pcVar8,(int)*(char *)(lVar18 + sVar22));
    } while (pcVar9 == (char *)0x0);
    do {
      if (sVar7 == sVar22) break;
      sVar22 = sVar22 + 1;
      *(size_t *)(param_9 + 0x560) = sVar22;
      pcVar9 = strchr(pcVar8,(int)*(char *)(lVar18 + sVar22));
    } while (pcVar9 != (char *)0x0);
    goto switchD_0015a56f_caseD_17;
  case 0x12:
    pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,ppcVar2,"word-separators",
                                &switchD_0015a56f::switchdataD_0017fd5c,param_12,param_13,param_14);
    puVar17 = extraout_RDX_02;
    uVar26 = extraout_XMM0_Da_04;
    uVar27 = extraout_XMM0_Db_02;
LAB_0015aa7a:
    sVar22 = *(size_t *)(param_9 + 0x560);
    do {
      if (sVar7 == sVar22) goto LAB_0015aab2;
      sVar22 = sVar22 + 1;
      lVar18 = *(long *)(param_9 + 0x558);
      *(size_t *)(param_9 + 0x560) = sVar22;
      pcVar9 = strchr(pcVar8,(int)*(char *)(lVar18 + sVar22));
      puVar17 = extraout_RDX_03;
      uVar26 = extraout_XMM0_Da_05;
      uVar27 = extraout_XMM0_Db_03;
    } while (pcVar9 != (char *)0x0);
    do {
      if (sVar7 == sVar22) break;
      sVar22 = sVar22 + 1;
      *(size_t *)(param_9 + 0x560) = sVar22;
      pcVar9 = strchr(pcVar8,(int)*(char *)(lVar18 + sVar22));
      puVar17 = extraout_RDX_04;
      uVar26 = extraout_XMM0_Da_06;
      uVar27 = extraout_XMM0_Db_04;
    } while (pcVar9 == (char *)0x0);
LAB_0015aab2:
    pcVar8 = options_get_number(CONCAT44(uVar27,uVar26),param_2,param_3,param_4,param_5,param_6,
                                param_7,param_8,ppcVar2,"status-keys",puVar17,param_12,param_13,
                                param_14);
    if ((pcVar8 == (char *)0x1) && (lVar18 = *(long *)(param_9 + 0x560), lVar18 != 0)) {
LAB_0015aadb:
      *(long *)(param_9 + 0x560) = lVar18 + -1;
    }
    goto switchD_0015a56f_caseD_17;
  case 0x13:
    puVar10 = (undefined8 *)paste_get_top((undefined8 *)0x0);
    if (puVar10 == (undefined8 *)0x0) break;
    pvVar11 = (void *)paste_buffer_data(puVar10,&local_90);
    uVar14 = extraout_RDX_01;
    sVar22 = local_90;
    if (local_90 != 0) {
      sVar12 = 0;
      do {
        bVar4 = *(byte *)((long)pvVar11 + sVar12);
        uVar14 = (ulong)bVar4;
        sVar22 = sVar12;
        if ((bVar4 < 0x20) || (bVar4 == 0x7f)) break;
        sVar12 = sVar12 + 1;
        sVar22 = local_90;
      } while (sVar12 != local_90);
    }
    lVar18 = xrealloc(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      *(undefined8 *)(param_9 + 0x558),sVar22 + 1 + sVar7,uVar14,param_12,param_13,
                      param_14);
    sVar12 = *(size_t *)(param_9 + 0x560);
    *(long *)(param_9 + 0x558) = lVar18;
    if (sVar12 == sVar7) {
      memcpy((void *)(lVar18 + sVar7),pvVar11,sVar22);
      lVar18 = sVar22 + *(long *)(param_9 + 0x560);
      *(long *)(param_9 + 0x560) = lVar18;
      *(undefined *)(*(long *)(param_9 + 0x558) + lVar18) = 0;
    }
    else {
      memmove((void *)(lVar18 + sVar12 + sVar22),(void *)(lVar18 + sVar12),(sVar7 - sVar12) + 1);
      memcpy((void *)(*(long *)(param_9 + 0x560) + *(long *)(param_9 + 0x558)),pvVar11,sVar22);
      *(long *)(param_9 + 0x560) = *(long *)(param_9 + 0x560) + sVar22;
    }
    goto switchD_0015a56f_caseD_17;
  case 0x14:
    pcVar8 = " ";
    goto LAB_0015a862;
  case 0x15:
    pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,ppcVar2,"word-separators",
                                &switchD_0015a56f::switchdataD_0017fd5c,param_12,param_13,param_14);
LAB_0015a862:
    lVar18 = *(long *)(param_9 + 0x560);
    do {
      if (lVar18 == 0) goto switchD_0015a56f_caseD_17;
      lVar18 = lVar18 + -1;
      lVar25 = *(long *)(param_9 + 0x558);
      *(long *)(param_9 + 0x560) = lVar18;
      pcVar9 = strchr(pcVar8,(int)*(char *)(lVar25 + lVar18));
    } while (pcVar9 != (char *)0x0);
    do {
      lVar19 = lVar18;
      if (lVar19 == 0) goto switchD_0015a56f_caseD_17;
      *(long *)(param_9 + 0x560) = lVar19 + -1;
      pcVar9 = strchr(pcVar8,(int)*(char *)(lVar25 + -1 + lVar19));
      lVar18 = lVar19 + -1;
    } while (pcVar9 == (char *)0x0);
    *(long *)(param_9 + 0x560) = lVar19;
    goto switchD_0015a56f_caseD_17;
  case 0x16:
    goto switchD_0015a56f_caseD_16;
  case 0x18:
    *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
switchD_0015a56f_caseD_6:
    if (*(ulong *)(param_9 + 0x560) < sVar7) {
      *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
      *(ulong *)(param_9 + 0x560) = *(ulong *)(param_9 + 0x560) + 1;
    }
    break;
  case 0x19:
    *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
switchD_0015a56f_caseD_b:
    if (*(size_t *)(param_9 + 0x560) != sVar7) {
      *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
      *(size_t *)(param_9 + 0x560) = sVar7;
    }
    break;
  case 0x1a:
    *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
switchD_0015a56f_caseD_16:
    if (*(long *)(param_9 + 0x560) != 0) {
LAB_0015a74d:
      *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
      *(undefined8 *)(param_9 + 0x560) = 0;
    }
    break;
  case 0x1e:
    uVar14 = *(ulong *)(param_9 + 0x560) + (ulong)(*(ulong *)(param_9 + 0x560) < sVar7);
    if (1 < uVar14) {
      puVar21 = (undefined *)(*(long *)(param_9 + 0x558) + -2 + uVar14);
      uVar1 = *puVar21;
      *puVar21 = *(undefined *)(*(long *)(param_9 + 0x558) + -1 + uVar14);
      *(undefined *)(*(long *)(param_9 + 0x558) + -1 + uVar14) = uVar1;
      *(ulong *)(param_9 + 0x560) = uVar14;
      *(uint *)(param_9 + 0x420) = *(uint *)(param_9 + 0x420) | 0x10;
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 style_parse(byte *param_1,undefined4 *param_2,byte *param_3)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int iVar6;
  uint uVar7;
  size_t sVar8;
  char *pcVar9;
  size_t sVar10;
  ulong uVar11;
  undefined8 uVar12;
  uint uVar13;
  long in_FS_OFFSET;
  byte local_a8;
  byte local_92;
  byte local_91;
  undefined2 local_6b;
  undefined local_69;
  char local_68 [40];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar12 = 0;
  local_6b = 0x2c20;
  local_69 = 0;
  if (*param_3 != 0) {
    sVar8 = strlen((char *)param_3);
    pcVar9 = strchr((char *)&local_6b,(int)(char)param_3[sVar8 - 1]);
    if (pcVar9 == (char *)0x0) {
      uVar1 = param_2[4];
      uVar2 = *param_2;
      uVar3 = param_2[1];
      uVar4 = param_2[2];
      uVar5 = param_2[3];
      uVar13 = (uint)*(byte *)((long)param_2 + 1);
      local_92 = *(byte *)((long)param_2 + 2);
      local_91 = *(byte *)((long)param_2 + 5);
      local_a8 = *(byte *)param_2;
      do {
        sVar8 = strcspn((char *)param_3,(char *)&local_6b);
        if (0x1f < sVar8) goto LAB_0015b100;
        __memcpy_chk(local_68,param_3,sVar8,0x20);
        local_68[sVar8] = '\0';
        iVar6 = strcasecmp(local_68,"default");
        if (iVar6 == 0) {
          local_92 = param_1[2];
          uVar13 = (uint)param_1[1];
          local_91 = param_1[5];
          local_a8 = *param_1 & 3 | local_a8 & 0xfc;
        }
        else if (sVar8 < 4) {
          iVar6 = strcasecmp(local_68,"none");
          if (iVar6 == 0) {
LAB_0015b0b0:
            uVar13 = 0;
          }
          else {
            if (sVar8 == 3) {
LAB_0015b05a:
              iVar6 = strncasecmp(local_68,"no",2);
              if (iVar6 == 0) {
                uVar7 = attributes_fromstring(local_68 + 2);
                if (uVar7 == 0xffffffff) goto LAB_0015b100;
                uVar13 = uVar13 & ~uVar7;
                goto LAB_0015afc3;
              }
            }
            uVar7 = attributes_fromstring(local_68);
            if (uVar7 == 0xffffffff) goto LAB_0015b100;
            uVar13 = uVar13 | uVar7;
          }
        }
        else {
          iVar6 = strncasecmp(local_68 + 1,"g=",2);
          if (iVar6 != 0) {
            iVar6 = strcasecmp(local_68,"none");
            if (iVar6 != 0) goto LAB_0015b05a;
            goto LAB_0015b0b0;
          }
          uVar11 = colour_fromstring(local_68 + 3);
          iVar6 = (int)uVar11;
          if (iVar6 == -1) {
LAB_0015b100:
            param_2[4] = uVar1;
            uVar12 = 0xffffffff;
            *param_2 = uVar2;
            param_2[1] = uVar3;
            param_2[2] = uVar4;
            param_2[3] = uVar5;
            goto LAB_0015b11a;
          }
          if ((*param_3 & 0xdf) == 0x46) {
            if (iVar6 == 8) {
              local_92 = param_1[2];
              local_a8 = *param_1 & 1 | local_a8 & 0xfe;
            }
            else {
              if ((uVar11 & 0x100) == 0) {
                local_a8 = local_a8 & 0xfe;
              }
              else {
                local_a8 = local_a8 | 1;
                uVar11 = uVar11 & 0xff;
              }
              local_92 = (byte)uVar11;
            }
          }
          else {
            if ((*param_3 & 0xdf) != 0x42) goto LAB_0015b100;
            if (iVar6 == 8) {
              local_91 = param_1[5];
              local_a8 = *param_1 & 2 | local_a8 & 0xfd;
            }
            else {
              if ((uVar11 & 0x100) == 0) {
                local_a8 = local_a8 & 0xfd;
              }
              else {
                local_a8 = local_a8 | 2;
                uVar11 = uVar11 & 0xff;
              }
              local_91 = (byte)uVar11;
            }
          }
        }
LAB_0015afc3:
        sVar10 = strspn((char *)(param_3 + sVar8),(char *)&local_6b);
        param_3 = param_3 + sVar8 + sVar10;
      } while (*param_3 != 0);
      *(byte *)((long)param_2 + 2) = local_92;
      *(char *)((long)param_2 + 1) = (char)uVar13;
      *(byte *)((long)param_2 + 5) = local_91;
      *(byte *)param_2 = local_a8;
      uVar12 = 0;
    }
    else {
      uVar12 = 0xffffffff;
    }
  }
LAB_0015b11a:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar12;
}



char * style_tostring(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     byte *param_9)

{
  byte bVar1;
  bool bVar2;
  byte bVar3;
  int iVar4;
  int iVar5;
  char *pcVar6;
  undefined *puVar7;
  uint uVar8;
  ulong uVar9;
  undefined8 in_R8;
  undefined8 in_R9;
  undefined *puVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_04;
  undefined in_stack_ffffffffffffffd8;
  
  DAT_001a0a80 = '\0';
  bVar3 = param_9[2];
  uVar9 = (ulong)bVar3;
  uVar8 = (uint)bVar3;
  if (bVar3 == 8) {
    bVar3 = *param_9;
    if ((bVar3 & 1) != 0) {
      uVar8 = 8;
      goto LAB_0015b334;
    }
    bVar2 = false;
    iVar4 = 0;
  }
  else {
    if ((*param_9 & 1) != 0) {
LAB_0015b334:
      uVar9 = (ulong)(uVar8 | 0x100);
    }
    pcVar6 = colour_tostring(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar9);
    bVar2 = true;
    iVar4 = xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      &DAT_001a0a80,0x100,"fg=%s",pcVar6,in_R8,in_R9,in_stack_ffffffffffffffd8);
    bVar3 = *param_9;
    param_1 = extraout_XMM0_Da_00;
  }
  bVar1 = param_9[5];
  uVar9 = (ulong)bVar1;
  uVar8 = (uint)bVar1;
  if (bVar1 == 8) {
    if ((bVar3 & 2) != 0) {
      uVar8 = 8;
      goto LAB_0015b319;
    }
    if ((param_9[1] & 0x7f) == 0) goto LAB_0015b2eb;
    puVar7 = attributes_tostring(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 param_9[1]);
    puVar10 = &DAT_00177cdb;
    uVar11 = extraout_XMM0_Da_03;
    if (!bVar2) {
      puVar10 = &DAT_001816c0;
    }
  }
  else {
    if ((bVar3 & 2) != 0) {
LAB_0015b319:
      uVar9 = (ulong)(uVar8 | 0x100);
    }
    pcVar6 = colour_tostring(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,uVar9);
    puVar10 = &DAT_00177cdb;
    puVar7 = &DAT_001816c0;
    if (bVar2) {
      puVar7 = &DAT_00177cdb;
    }
    iVar5 = xsnprintf(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      &DAT_001a0a80 + iVar4,0x100 - (long)iVar4,"%sbg=%s",puVar7,pcVar6,in_R9,
                      in_stack_ffffffffffffffd8);
    if ((param_9[1] & 0x7f) == 0) goto LAB_0015b2eb;
    iVar4 = iVar4 + iVar5;
    puVar7 = attributes_tostring(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7
                                 ,param_8,param_9[1]);
    uVar11 = extraout_XMM0_Da_04;
  }
  xsnprintf(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_001a0a80 + iVar4,
            0x100 - (long)iVar4,&DAT_0017fd51,puVar10,puVar7,in_R9,in_stack_ffffffffffffffd8);
LAB_0015b2eb:
  pcVar6 = &DAT_001a0a80;
  if (DAT_001a0a80 == '\0') {
    pcVar6 = "default";
  }
  return pcVar6;
}



void style_update_new(undefined8 param_1,undefined8 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     char **param_9,char *param_10,char *param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  char **ppcVar2;
  char **ppcVar3;
  char *pcVar4;
  uint uVar5;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined4 uVar6;
  
  if (param_11 == (char *)0x0) {
    return;
  }
  ppcVar2 = (char **)options_find1(param_9,param_11);
  uVar6 = (undefined4)param_2;
  if (ppcVar2 == (char **)0x0) {
    param_12 = 0;
    ppcVar2 = options_set_style(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,param_9,param_11,(byte *)"default",0,param_13,param_14);
  }
  ppcVar3 = (char **)options_find1(param_9,param_10);
  if (ppcVar3 == (char **)0x0) {
    ppcVar3 = options_set_number(extraout_XMM0_Qa_00,uVar6,param_3,param_4,param_5,param_6,param_7,
                                 param_8,param_9,param_10,(char *)0x8,param_12,param_13,param_14);
  }
  pcVar1 = ppcVar3[3];
  pcVar4 = strstr(param_10,"-bg");
  uVar5 = (uint)pcVar1;
  if (pcVar4 != (char *)0x0) {
    colour_set_bg((byte *)(ppcVar2 + 4),uVar5);
    return;
  }
  pcVar4 = strstr(param_10,"-fg");
  if (pcVar4 != (char *)0x0) {
    colour_set_fg((byte *)(ppcVar2 + 4),uVar5);
    return;
  }
  pcVar4 = strstr(param_10,"-attr");
  if (pcVar4 != (char *)0x0) {
    *(char *)((long)ppcVar2 + 0x21) = (char)pcVar1;
  }
  return;
}



void style_update_old(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     char **param_9,char *param_10,byte *param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  char *pcVar3;
  ulong uVar4;
  ulong uVar5;
  uint uVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  char in_stack_ffffffffffffff38;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar3 = strrchr(param_10,0x2d);
  uVar4 = (long)pcVar3 - (long)param_10;
  uVar6 = (uint)param_11[5];
  uVar5 = uVar4 & 0xffffffff;
  if ((*param_11 & 2) != 0) {
    uVar6 = (uint)CONCAT11(1,param_11[5]);
  }
  pcVar3 = param_10;
  uVar2 = xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    &stack0xffffffffffffff38,0x80,"%.*s-bg",uVar5,param_10,param_14,
                    in_stack_ffffffffffffff38);
  options_set_number(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     &stack0xffffffffffffff38,(char *)(long)(int)uVar6,uVar5,pcVar3,param_14);
  uVar6 = (uint)param_11[2];
  if ((*param_11 & 1) != 0) {
    uVar6 = param_11[2] | 0x100;
  }
  uVar5 = uVar4 & 0xffffffff;
  pcVar3 = param_10;
  uVar2 = xsnprintf(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    &stack0xffffffffffffff38,0x80,"%.*s-fg",uVar5,param_10,param_14,
                    in_stack_ffffffffffffff38);
  options_set_number(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     &stack0xffffffffffffff38,(char *)(long)(int)uVar6,uVar5,pcVar3,param_14);
  uVar4 = uVar4 & 0xffffffff;
  uVar2 = xsnprintf(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    &stack0xffffffffffffff38,0x80,"%.*s-attr",uVar4,param_10,param_14,
                    in_stack_ffffffffffffff38);
  options_set_number(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     &stack0xffffffffffffff38,(char *)(ulong)param_11[1],uVar4,param_10,param_14);
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void style_apply(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                undefined8 *param_9,char **param_10,char *param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  byte bVar2;
  char **ppcVar3;
  
  *(undefined4 *)(param_9 + 2) = 0x1010000;
  *param_9 = 0x80000080000;
  param_9[1] = 0x20;
  ppcVar3 = options_get_style(0x80000080000,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              param_10,param_11,param_11,param_12,param_13,param_14);
  if ((*(byte *)ppcVar3 & 1) == 0) {
    colour_set_fg((byte *)param_9,(uint)*(byte *)((long)ppcVar3 + 2));
    bVar1 = *(byte *)((long)ppcVar3 + 5);
    bVar2 = *(byte *)ppcVar3;
  }
  else {
    colour_set_fg((byte *)param_9,*(byte *)((long)ppcVar3 + 2) | 0x100);
    bVar1 = *(byte *)((long)ppcVar3 + 5);
    bVar2 = *(byte *)ppcVar3;
  }
  if ((bVar2 & 2) != 0) {
    colour_set_bg((byte *)param_9,bVar1 | 0x100);
    *(byte *)((long)param_9 + 1) = *(byte *)((long)param_9 + 1) | *(byte *)((long)ppcVar3 + 1);
    return;
  }
  colour_set_bg((byte *)param_9,(uint)bVar1);
  *(byte *)((long)param_9 + 1) = *(byte *)((long)param_9 + 1) | *(byte *)((long)ppcVar3 + 1);
  return;
}



void style_apply_update(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       byte *param_9,char **param_10,char *param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  byte bVar2;
  char **ppcVar3;
  uint uVar4;
  
  ppcVar3 = options_get_style(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              param_10,param_11,param_11,param_12,param_13,param_14);
  bVar2 = *(byte *)((long)ppcVar3 + 2);
  uVar4 = (uint)bVar2;
  if (bVar2 == 8) {
    bVar2 = *(byte *)ppcVar3;
    if ((bVar2 & 1) != 0) {
      uVar4 = 8;
      goto LAB_0015b70c;
    }
LAB_0015b6d5:
    bVar1 = *(byte *)((long)ppcVar3 + 5);
    bVar2 = bVar2 & 2;
    if (bVar1 != 8) goto LAB_0015b6e2;
LAB_0015b72a:
    if (bVar2 == 0) goto LAB_0015b6ee;
    uVar4 = 8;
  }
  else {
    if ((*(byte *)ppcVar3 & 1) == 0) {
      colour_set_fg(param_9,(uint)bVar2);
      bVar2 = *(byte *)ppcVar3;
      goto LAB_0015b6d5;
    }
LAB_0015b70c:
    colour_set_fg(param_9,uVar4 | 0x100);
    bVar1 = *(byte *)((long)ppcVar3 + 5);
    bVar2 = *(byte *)ppcVar3 & 2;
    if (bVar1 == 8) goto LAB_0015b72a;
LAB_0015b6e2:
    uVar4 = (uint)bVar1;
    if (bVar2 == 0) {
      colour_set_bg(param_9,uVar4);
      goto LAB_0015b6ee;
    }
  }
  colour_set_bg(param_9,uVar4 | 0x100);
LAB_0015b6ee:
  if (*(byte *)((long)ppcVar3 + 1) != 0) {
    param_9[1] = param_9[1] | *(byte *)((long)ppcVar3 + 1);
  }
  return;
}



bool style_equal(byte *param_1,byte *param_2)

{
  if (((param_1[2] == param_2[2]) && (param_1[5] == param_2[5])) &&
     (((*param_1 ^ *param_2) & 0xfb) == 0)) {
    return ((param_1[1] ^ param_2[1]) & 0x7f) == 0;
  }
  return false;
}



void tmate_print_stack_trace
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  char *pcVar1;
  int iVar2;
  void *__ptr;
  FILE *__stream;
  size_t sVar3;
  regmatch_t *in_RCX;
  char *pcVar4;
  ulong uVar5;
  char **ppcVar6;
  undefined *in_R8;
  undefined *puVar7;
  undefined *in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 uVar8;
  undefined in_stack_fffffffffffffc58;
  char **ppcVar9;
  regmatch_t local_398;
  int local_390;
  int local_38c;
  int local_388;
  int local_384;
  undefined local_378 [160];
  undefined local_2d8 [32];
  undefined local_2b8 [112];
  char local_248 [208];
  char local_178 [312];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar2 = backtrace(local_378,0x14);
  uVar5 = (ulong)iVar2;
  __ptr = (void *)backtrace_symbols(local_378,uVar5);
  log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
           "============ %zd stack frames ============",uVar5,in_RCX,in_R8,in_R9,
           in_stack_fffffffffffffc58);
  ppcVar9 = (char **)((long)__ptr + uVar5 * 8);
  ppcVar6 = (char **)((long)__ptr + 8);
  if (1 < uVar5) {
    do {
      while (pcVar1 = *ppcVar6, DAT_001a0bc0 == (regex_t *)0x0) {
        iVar2 = regcomp((regex_t *)&DAT_001a0b80,"(.+)\\(\\) \\[([^]]+)\\]",1);
        pcVar4 = (char *)in_RCX;
        puVar7 = in_R8;
        uVar8 = extraout_XMM0_Da_04;
        if (iVar2 == 0) {
          DAT_001a0bc0 = (regex_t *)&DAT_001a0b80;
          break;
        }
LAB_0015b980:
        in_R8 = puVar7;
        in_RCX = (regmatch_t *)pcVar4;
        pcVar1 = *ppcVar6;
        ppcVar6 = ppcVar6 + 1;
        log_emit(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,"%s",pcVar1,in_RCX,
                 in_R8,in_R9,(char)ppcVar9);
        if (ppcVar9 == ppcVar6) goto LAB_0015b9a8;
      }
      puVar7 = (undefined *)0x0;
      pcVar4 = (char *)&local_398;
      iVar2 = regexec(DAT_001a0bc0,pcVar1,3,&local_398,0);
      uVar8 = extraout_XMM0_Da_00;
      if (iVar2 != 0) goto LAB_0015b980;
      iVar2 = local_38c - local_390;
      __memcpy_chk(local_2b8,pcVar1 + local_390,(long)iVar2,100);
      local_2b8[iVar2] = 0;
      iVar2 = local_384 - local_388;
      in_R8 = local_2d8;
      __memcpy_chk(in_R8,pcVar1 + local_388,(long)iVar2,0x14);
      local_2d8[iVar2] = 0;
      pcVar4 = "addr2line -e %s %s -f -p -s";
      puVar7 = local_2b8;
      in_R9 = in_R8;
      __sprintf_chk(local_248,1,200);
      __stream = popen(local_248,"r");
      uVar8 = extraout_XMM0_Da_01;
      if (__stream == (FILE *)0x0) goto LAB_0015b980;
      in_RCX = (regmatch_t *)fgets(local_178,300,__stream);
      pclose(__stream);
      uVar8 = extraout_XMM0_Da_02;
      if (in_RCX == (regmatch_t *)0x0) goto LAB_0015b980;
      ppcVar6 = ppcVar6 + 1;
      sVar3 = strlen((char *)in_RCX);
      *(undefined *)((long)in_RCX + (sVar3 - 1)) = 0;
      log_emit(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,
               "%s(%s) [%s]",local_2b8,in_RCX,in_R8,in_R9,(char)ppcVar9);
    } while (ppcVar9 != ppcVar6);
  }
LAB_0015b9a8:
  free(__ptr);
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_0015b9e0(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 int param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  __pid_t __pid;
  char *pcVar2;
  undefined1 unaff_BPL;
  
  pcVar2 = "SIGSEGV";
  if (param_9 != 0xb) {
    pcVar2 = "SIGABRT";
  }
  uVar1 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
                   "%s printing stack trace",pcVar2,param_12,param_13,param_14,unaff_BPL);
  tmate_print_stack_trace(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  signal(param_9,(__sighandler_t)0x0);
  __pid = getpid();
  kill(__pid,param_9);
  return;
}



void tmate_catch_sigsegv(void)

{
  signal(0xb,FUN_0015b9e0);
  signal(6,FUN_0015b9e0);
  return;
}



void tmate_preload_trace_lib(void)

{
  long in_FS_OFFSET;
  undefined auStack_18 [8];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  backtrace(auStack_18,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_0015baa0(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 ulong param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  undefined1 in_stack_00000008;
  
  log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,"[%d] [%s] %s",
           param_9 & 0xffffffff,param_10,param_11,param_14,in_stack_00000008);
  return;
}



void FUN_0015bac0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long *param_9,uint *param_10,undefined8 param_11,undefined *param_12,ulong param_13
                 ,size_t param_14)

{
  tmate_dispatch_slave_message
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,param_10,
             param_11,param_12,param_13,param_14);
  return;
}



void FUN_0015bad0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long *param_9,long param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,size_t param_14,undefined param_15)

{
  long lVar1;
  char in_AL;
  long *plVar2;
  undefined *puVar3;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined4 uVar4;
  undefined8 uVar5;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined in_stack_ffffffffffffff08;
  long local_f0;
  undefined4 local_e8;
  undefined4 local_e4;
  undefined *local_e0;
  undefined *local_d8;
  long local_d0;
  undefined local_c8 [16];
  undefined8 local_b8;
  undefined8 local_b0;
  undefined8 local_a8;
  size_t local_a0;
  undefined local_98 [16];
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  
  uVar4 = (undefined4)param_1;
  if (in_AL != '\0') {
    local_98._8_8_ = in_XMM0_Qb;
    local_98._0_8_ = param_1;
    local_88._4_12_ = in_register_00001224;
    local_88._0_4_ = param_2;
    local_78._4_12_ = in_register_00001244;
    local_78._0_4_ = param_3;
    local_68._4_12_ = in_register_00001264;
    local_68._0_4_ = param_4;
    local_58._4_12_ = in_register_00001284;
    local_58._0_4_ = param_5;
    local_48._4_12_ = in_register_000012a4;
    local_48._0_4_ = param_6;
    local_38._4_12_ = in_register_000012c4;
    local_38._0_4_ = param_7;
    local_28._4_12_ = in_register_000012e4;
    local_28._0_4_ = param_8;
  }
  local_d0 = *(long *)(in_FS_OFFSET + 0x28);
  lVar1 = param_9[1];
  puVar3 = (undefined *)*param_9;
  local_f0 = 0;
  plVar2 = (long *)param_9[2];
  if (lVar1 == 0) {
    *(long **)(puVar3 + 0xb8) = plVar2;
  }
  else {
    *(long **)(lVar1 + 0x10) = plVar2;
    plVar2 = (long *)param_9[2];
  }
  *plVar2 = lVar1;
  lVar1 = *(long *)(puVar3 + 0xb0);
  local_b8 = param_11;
  local_b0 = param_12;
  local_a8 = param_13;
  local_a0 = param_14;
  if ((param_10 != 0) && (lVar1 == 0)) {
    local_e0 = &param_15;
    local_e8 = 0x10;
    local_d8 = local_c8;
    local_e4 = 0x30;
    uVar5 = xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_f0,
                       param_10,&local_e8,puVar3,param_13,param_14);
    uVar4 = tmate_status_message
                      (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x181714,
                       local_f0,extraout_RDX,puVar3,param_13,param_14,in_stack_ffffffffffffff08);
  }
  uVar5 = log_emit(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,
                   "SSH client killed (%s)",param_9[3],puVar3,param_13,param_14,
                   in_stack_ffffffffffffff08);
  if (param_9[0x10] != 0) {
    event_del();
    uVar5 = event_free(param_9[0x10]);
    param_9[0x10] = 0;
  }
  if (*(int *)(param_9 + 4) == 9) {
    tmate_encoder_set_ready_callback(*param_9 + 0x18,(undefined *)0x0,0);
    uVar5 = tmate_decoder_destroy((undefined (*) [16])(*param_9 + 0x50));
    *(undefined8 *)(*param_9 + 0xa4) = 0xffffffffffffffff;
    uVar5 = recalculate_sizes(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  }
  if (param_9[0xe] != 0) {
    uVar5 = ssh_free();
    param_9[0xe] = 0;
    param_9[0xf] = 0;
  }
  if (lVar1 == 0) {
    tmate_reconnect_session
              (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(undefined8 *)*param_9,
               local_f0);
  }
  free((void *)param_9[3]);
  free(param_9);
  if (local_d0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_0015bce0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 *param_9)

{
  uint __fd;
  int iVar1;
  long lVar2;
  int *piVar3;
  char *pcVar4;
  code *pcVar5;
  ulong uVar6;
  undefined8 uVar7;
  undefined8 *puVar8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined auVar9 [16];
  undefined in_stack_ffffffffffffffd8;
  undefined4 local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  __fd = ssh_get_fd(param_9[0xe]);
  if (-1 < (int)__fd) {
    uVar7 = 4;
    local_24 = 1;
    iVar1 = setsockopt(__fd,6,1,&local_24,4);
    if (iVar1 < 0) {
      piVar3 = __errno_location();
      if (*piVar3 != 0x16) {
        pcVar4 = strerror(*piVar3);
        log_emit(extraout_XMM0_Da_05,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
                 "setsockopt(IPPROTO_TCP, TCP_NODELAY, %d) failed %s",1,pcVar4,uVar7,in_R9,
                 in_stack_ffffffffffffffd8);
      }
    }
    uVar7 = 4;
    local_24 = 1;
    iVar1 = setsockopt(__fd,1,9,&local_24,4);
    if (iVar1 < 0) {
      piVar3 = __errno_location();
      if (*piVar3 != 0x16) {
        pcVar4 = strerror(*piVar3);
        log_emit(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
                 "setsockopt(SOL_SOCKET, SO_KEEPALIVE, %d) failed %s",1,pcVar4,uVar7,in_R9,
                 in_stack_ffffffffffffffd8);
      }
    }
    uVar7 = 4;
    local_24 = 0x1e;
    iVar1 = setsockopt(__fd,6,4,&local_24,4);
    if (iVar1 < 0) {
      piVar3 = __errno_location();
      if (*piVar3 != 0x16) {
        pcVar4 = strerror(*piVar3);
        log_emit(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
                 "setsockopt(IPPROTO_TCP, TCP_KEEPIDLE, %d) failed %s",0x1e,pcVar4,uVar7,in_R9,
                 in_stack_ffffffffffffffd8);
      }
    }
    uVar7 = 4;
    local_24 = 4;
    iVar1 = setsockopt(__fd,6,6,&local_24,4);
    if (iVar1 < 0) {
      piVar3 = __errno_location();
      if (*piVar3 != 0x16) {
        pcVar4 = strerror(*piVar3);
        log_emit(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
                 "setsockopt(IPPROTO_TCP, TCP_KEEPCNT, %d) failed %s",4,pcVar4,uVar7,in_R9,
                 in_stack_ffffffffffffffd8);
      }
    }
    uVar7 = 4;
    local_24 = 0xb;
    iVar1 = setsockopt(__fd,6,5,&local_24,4);
    if (iVar1 < 0) {
      piVar3 = __errno_location();
      if (*piVar3 != 0x16) {
        pcVar4 = strerror(*piVar3);
        log_emit(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
                 "setsockopt(IPPROTO_TCP, TCP_KEEPINTVL, %d) failed %s",0xb,pcVar4,uVar7,in_R9,
                 in_stack_ffffffffffffffd8);
      }
    }
    uVar7 = 4;
    local_24 = 80000;
    iVar1 = setsockopt(__fd,6,0x12,&local_24,4);
    if (iVar1 < 0) {
      piVar3 = __errno_location();
      if (*piVar3 != 0x16) {
        pcVar4 = strerror(*piVar3);
        log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
                 "setsockopt(IPPROTO_TCP, TCP_USER_TIMEOUT, %d) failed %s",80000,pcVar4,uVar7,in_R9,
                 in_stack_ffffffffffffffd8);
      }
    }
    pcVar5 = FUN_0015c7d0;
    uVar6 = (ulong)__fd;
    puVar8 = param_9;
    auVar9 = event_new(*(undefined8 *)*param_9,uVar6,0x12);
    lVar2 = auVar9._0_8_;
    param_9[0x10] = lVar2;
    if (lVar2 == 0) {
                    // WARNING: Subroutine does not return
      fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "out of memory",uVar6,auVar9._8_8_,pcVar5,puVar8,in_R9,in_stack_ffffffffffffffd8);
    }
    event_add(lVar2,0);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Type propagation algorithm not settling

void FUN_0015bfc0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long *param_9,char *param_10,undefined8 param_11,char **param_12,char *param_13,
                 size_t param_14)

{
  long *plVar1;
  long *plVar2;
  int iVar3;
  uint uVar4;
  uint *puVar5;
  undefined8 uVar6;
  char *pcVar7;
  char *extraout_RAX;
  char *pcVar8;
  undefined8 extraout_RAX_00;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 uVar9;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  undefined8 extraout_RDX_10;
  undefined8 extraout_RDX_11;
  undefined8 extraout_RDX_12;
  undefined8 extraout_RDX_13;
  undefined8 extraout_RDX_14;
  undefined8 extraout_RDX_15;
  undefined8 extraout_RDX_16;
  undefined8 extraout_RDX_17;
  undefined8 extraout_RDX_18;
  undefined8 extraout_RDX_19;
  undefined *puVar10;
  undefined8 uVar11;
  code *pcVar12;
  long lVar13;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Da_11;
  undefined4 extraout_XMM0_Da_12;
  undefined4 extraout_XMM0_Da_13;
  undefined4 extraout_XMM0_Da_14;
  undefined4 extraout_XMM0_Da_15;
  undefined4 extraout_XMM0_Da_16;
  undefined4 extraout_XMM0_Da_17;
  undefined4 extraout_XMM0_Da_18;
  undefined4 extraout_XMM0_Da_19;
  undefined4 extraout_XMM0_Da_20;
  undefined4 extraout_XMM0_Da_21;
  undefined4 extraout_XMM0_Da_22;
  undefined4 uVar14;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined4 extraout_XMM0_Db_09;
  undefined4 extraout_XMM0_Db_10;
  undefined4 extraout_XMM0_Db_11;
  undefined4 extraout_XMM0_Db_12;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Db_13;
  undefined4 extraout_XMM0_Db_14;
  undefined4 extraout_XMM0_Db_15;
  undefined auVar16 [16];
  undefined uVar17;
  undefined4 in_stack_ffffffffffffffb8;
  undefined4 uStack_44;
  undefined8 local_40;
  char *local_38;
  long local_30;
  
  puVar10 = &stack0xffffffffffffffb8;
  lVar13 = param_9[0xe];
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  switch(*(undefined4 *)(param_9 + 4)) {
  default:
    goto switchD_0015c002_caseD_0;
  case 1:
    auVar16 = ssh_new();
    lVar13 = auVar16._0_8_;
    param_9[0xe] = lVar13;
    if (lVar13 == 0) {
                    // WARNING: Subroutine does not return
      fatalx(extraout_XMM0_Da_08,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "cannot ssh_new()",param_10,auVar16._8_8_,param_12,param_13,param_14,
             (char)in_stack_ffffffffffffffb8);
    }
    ssh_set_callbacks(lVar13,param_9 + 5);
    in_stack_ffffffffffffffb8 = log_get_level();
    pcVar7 = options_get_number(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_09),param_2,param_3,
                                param_4,param_5,param_6,param_7,param_8,global_options,
                                "tmate-server-port",extraout_RDX_08,param_12,param_13,param_14);
    local_40._0_4_ = SUB84(pcVar7,0);
    FUN_001239e0();
    ssh_options_set(lVar13,0,param_9[3]);
    ssh_options_set(lVar13,0xd,&stack0xffffffffffffffb8);
    ssh_options_set(lVar13,1,&local_40);
    ssh_options_set(lVar13,4,"tmate");
    uVar6 = ssh_options_set(lVar13,0x16,&DAT_00179843);
    pcVar7 = options_get_string(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                global_options,"tmate-identity",extraout_RDX_09,param_12,param_13,
                                param_14);
    local_38 = pcVar7;
    if (*pcVar7 != '\0') {
      uVar6 = 0x2f;
      pcVar8 = strchr(pcVar7,0x2f);
      if (pcVar8 == (char *)0x0) {
        xasprintf(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_10),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,(long *)&local_38,"%%d/%s",pcVar7,param_12,param_13,
                  param_14,(char)in_stack_ffffffffffffffb8);
        pcVar7 = local_38;
      }
      else {
        xstrdup(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_10),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,pcVar7,uVar6,extraout_RDX_10,param_12,param_13,param_14);
        pcVar7 = extraout_RAX;
      }
      if (pcVar7 != (char *)0x0) {
        ssh_options_set(lVar13,6,pcVar7);
        unsetenv("SSH_AUTH_SOCK");
        free(pcVar7);
      }
    }
    *(undefined4 *)(param_9 + 4) = 2;
    break;
  case 2:
    break;
  case 3:
    goto switchD_0015c002_caseD_3;
  case 4:
    goto switchD_0015c002_caseD_4;
  case 5:
    goto switchD_0015c002_caseD_5;
  case 6:
    goto switchD_0015c002_caseD_6;
  case 7:
    goto switchD_0015c002_caseD_7;
  case 8:
    goto switchD_0015c002_caseD_8;
  case 9:
    goto switchD_0015c002_caseD_9;
  }
  iVar3 = ssh_connect(lVar13);
  if (iVar3 == -1) {
    uVar6 = ssh_get_error(lVar13);
    FUN_0015bad0(CONCAT44(extraout_XMM0_Db_15,extraout_XMM0_Da_22),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_9,0x17fef6,uVar6,param_12,param_13,param_14,
                 (char)in_stack_ffffffffffffffb8);
    goto switchD_0015c002_caseD_0;
  }
  if (iVar3 == 0) {
    uVar14 = extraout_XMM0_Da_11;
    if (param_9[0x10] == 0) {
      uVar14 = FUN_0015bce0(CONCAT44(extraout_XMM0_Db_07,extraout_XMM0_Da_11),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,param_9);
    }
    log_emit(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,
             "Establishing connection to %s",param_9[3],param_12,param_13,param_14,
             (char)in_stack_ffffffffffffffb8);
    *(undefined4 *)(param_9 + 4) = 3;
  }
  else if (iVar3 == -2) {
    if (param_9[0x10] == 0) {
      FUN_0015bce0(CONCAT44(extraout_XMM0_Db_07,extraout_XMM0_Da_11),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_9);
    }
    goto switchD_0015c002_caseD_0;
  }
switchD_0015c002_caseD_3:
  iVar3 = ssh_get_server_publickey(lVar13);
  if (iVar3 < 0) {
                    // WARNING: Subroutine does not return
    fatalx(extraout_XMM0_Da_12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "ssh_get_server_publickey",puVar10,extraout_RDX_11,param_12,param_13,param_14,
           (char)in_stack_ffffffffffffffb8);
  }
  param_12 = &local_38;
  iVar3 = ssh_get_publickey_hash(CONCAT44(uStack_44,in_stack_ffffffffffffffb8),2,&local_40);
  uVar6 = extraout_RDX_12;
  uVar14 = extraout_XMM0_Da_13;
  uVar15 = extraout_XMM0_Db_08;
  if (-1 < iVar3) {
    uVar6 = CONCAT44(local_40._4_4_,(undefined4)local_40);
    auVar16 = ssh_get_fingerprint_hash(2,uVar6,local_38);
    pcVar7 = auVar16._0_8_;
    if (pcVar7 == (char *)0x0) {
                    // WARNING: Subroutine does not return
      fatalx(extraout_XMM0_Da_14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "malloc failed",uVar6,auVar16._8_8_,param_12,param_13,param_14,
             (char)in_stack_ffffffffffffffb8);
    }
    uVar4 = ssh_key_type(CONCAT44(uStack_44,in_stack_ffffffffffffffb8));
    if (uVar4 == 5) {
      pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db_09,extraout_XMM0_Da_15),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,global_options,
                                  "tmate-server-ed25519-fingerprint",extraout_RDX_13,param_12,
                                  param_13,param_14);
    }
    else if (uVar4 < 6) {
      if (uVar4 == 2) {
        pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db_09,extraout_XMM0_Da_15),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,global_options,
                                    "tmate-server-rsa-fingerprint",extraout_RDX_13,param_12,param_13
                                    ,param_14);
      }
      else {
        if (uVar4 == 4) goto LAB_0015c5c9;
        pcVar8 = "";
      }
    }
    else {
      pcVar8 = "";
      if (uVar4 - 8 < 3) {
LAB_0015c5c9:
        pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db_09,extraout_XMM0_Da_15),param_2,
                                    param_3,param_4,param_5,param_6,param_7,param_8,global_options,
                                    "tmate-server-ecdsa-fingerprint",extraout_RDX_13,param_12,
                                    param_13,param_14);
      }
    }
    iVar3 = strcmp(pcVar7,pcVar8);
    FUN_001232a0();
    FUN_00123610();
    free(pcVar7);
    uVar6 = extraout_RDX_14;
    uVar14 = extraout_XMM0_Da_16;
    uVar15 = extraout_XMM0_Db_10;
    if (iVar3 == 0) {
      uVar11 = log_emit(extraout_XMM0_Da_16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        2,"Connected to %s",param_9[3],param_12,param_13,param_14,
                        (char)in_stack_ffffffffffffffb8);
      plVar1 = *(long **)(*param_9 + 0xb0);
      uVar6 = extraout_RDX_15;
      while (plVar2 = plVar1, plVar2 != (long *)0x0) {
        plVar1 = (long *)plVar2[1];
        if (param_9 != plVar2) {
          uVar11 = FUN_0015bad0(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                plVar2,0,uVar6,param_12,param_13,param_14,
                                (char)in_stack_ffffffffffffffb8);
          uVar6 = extraout_RDX_16;
        }
      }
      *(undefined4 *)(param_9 + 4) = 4;
switchD_0015c002_caseD_4:
      iVar3 = FUN_00123850();
      uVar17 = (undefined)in_stack_ffffffffffffffb8;
      if (iVar3 < 3) {
        if (0 < iVar3) {
          *(undefined4 *)(param_9 + 4) = 5;
          goto switchD_0015c002_caseD_5;
        }
        if (iVar3 == -1) {
LAB_0015c668:
          uVar6 = ssh_get_error(lVar13);
          FUN_0015bad0(CONCAT44(extraout_XMM0_Db_14,extraout_XMM0_Da_21),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_9,0x17ff7b,uVar6,param_12,param_13,
                       param_14,uVar17);
          goto switchD_0015c002_caseD_0;
        }
        if (iVar3 != 0) goto switchD_0015c002_caseD_5;
        param_10 = "Auth successful via none method";
        log_emit(extraout_XMM0_Da_17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,
                 "Auth successful via none method",extraout_RDX_17,param_12,param_13,param_14,uVar17
                );
        *(undefined4 *)(param_9 + 4) = 6;
      }
      else {
        if (iVar3 == 4) goto switchD_0015c002_caseD_0;
switchD_0015c002_caseD_5:
        param_10 = (char *)0x0;
        param_9[0xd] = *(long *)(*param_9 + 200);
        iVar3 = FUN_00123750();
        uVar17 = (undefined)in_stack_ffffffffffffffb8;
        if (iVar3 < 4) {
          if (0 < iVar3) {
            if (*(int *)(*param_9 + 0xc0) == 0) {
              FUN_0015bad0(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02),param_2,param_3,param_4
                           ,param_5,param_6,param_7,param_8,param_9,0x1801c0,extraout_RDX_04,
                           param_12,param_13,param_14,uVar17);
              goto switchD_0015c002_caseD_0;
            }
            uVar11 = 0xffffffff;
            puVar5 = (uint *)window_pane_tree_RB_MINMAX(&all_window_panes,-1);
            uVar6 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
            if (*(long *)(puVar5 + 0x7a) == 0) {
LAB_0015c050:
              window_pane_set_mode((long)puVar5,(undefined **)window_copy_mode);
              window_copy_init_from_pane
                        (extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,puVar5,0,extraout_RDX_00,param_12,param_13,param_14);
              lVar13 = *(long *)(puVar5 + 0x7c);
              *(char **)(lVar13 + 0xc0) = "SSH key passphrase";
              *(undefined4 *)(lVar13 + 0xbc) = 10;
              uVar6 = mode_key_init((undefined8 *)(lVar13 + 0x88),&mode_key_tree_vi_edit);
              uVar11 = 1;
              window_copy_update_selection
                        (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)puVar5,
                         1,extraout_RDX_01,param_12,param_13,param_14);
              uVar6 = window_copy_redraw_screen
                                (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,
                                 param_4,param_5,param_6,param_7,param_8,(long)puVar5,uVar11,
                                 extraout_RDX_02,param_12,param_13,param_14);
              *(long **)(lVar13 + 0xf8) = param_9;
              *(code **)(lVar13 + 0xf0) = FUN_0015c7e0;
              uVar9 = extraout_RDX_03;
            }
            else {
              uVar9 = extraout_RDX;
              if (*(int *)(*(long *)(puVar5 + 0x7c) + 0xbc) != 10) {
                window_pane_reset_mode(puVar5);
                goto LAB_0015c050;
              }
            }
            if (param_9[0xd] != 0) {
              tmate_status_message
                        (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x1801f8,
                         uVar11,uVar9,(undefined *)param_12,param_13,param_14,uVar17);
            }
            goto switchD_0015c002_caseD_0;
          }
          if (iVar3 == -1) goto LAB_0015c668;
          if (iVar3 == 0) {
            param_10 = "Auth successful with pubkey";
            log_emit(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,
                     "Auth successful with pubkey",extraout_RDX_04,param_12,param_13,param_14,uVar17
                    );
            *(undefined4 *)(param_9 + 4) = 6;
          }
        }
        else if (iVar3 == 4) goto switchD_0015c002_caseD_0;
      }
switchD_0015c002_caseD_6:
      auVar16 = FUN_001232c0();
      param_9[0xf] = auVar16._0_8_;
      if (auVar16._0_8_ == 0) {
                    // WARNING: Subroutine does not return
        fatalx(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               "cannot ssh_channel_new()",param_10,auVar16._8_8_,param_12,param_13,param_14,
               (char)in_stack_ffffffffffffffb8);
      }
      *(undefined4 *)(param_9 + 4) = 7;
switchD_0015c002_caseD_7:
      iVar3 = FUN_00123b10();
      uVar17 = (undefined)in_stack_ffffffffffffffb8;
      if (iVar3 == -1) {
        uVar6 = ssh_get_error(lVar13);
        FUN_0015bad0(CONCAT44(extraout_XMM0_Db_13,extraout_XMM0_Da_20),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,param_9,0x17ffd2,uVar6,param_12,param_13,
                     param_14,uVar17);
      }
      else {
        if (iVar3 == 0) {
          log_emit(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,
                   "Session opened, initializing tmate",extraout_RDX_05,param_12,param_13,param_14,
                   uVar17);
          *(undefined4 *)(param_9 + 4) = 8;
        }
        else if (iVar3 == -2) goto switchD_0015c002_caseD_0;
switchD_0015c002_caseD_8:
        iVar3 = FUN_00123b70();
        uVar17 = (undefined)in_stack_ffffffffffffffb8;
        param_1 = CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_05);
        if (iVar3 == -1) {
          uVar6 = ssh_get_error(lVar13);
          FUN_0015bad0(CONCAT44(extraout_XMM0_Db_12,extraout_XMM0_Da_19),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_9,0x17ffec,uVar6,param_12,param_13,
                       param_14,uVar17);
        }
        else {
          if (iVar3 == 0) {
            log_emit(extraout_XMM0_Da_05,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,
                     "Ready",extraout_RDX_06,param_12,param_13,param_14,uVar17);
            uVar11 = 1;
            uVar6 = FUN_001239e0();
            lVar13 = *param_9;
            *(undefined4 *)(param_9 + 4) = 9;
            if (*(char *)(lVar13 + 0xd0) != '\0') {
              tmate_send_reconnection_state
                        (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar13,uVar11
                         ,extraout_RDX_18,param_12,param_13,param_14);
              lVar13 = *param_9;
            }
            uVar6 = tmate_encoder_set_ready_callback(lVar13 + 0x18,FUN_0015c810,param_9);
            pcVar12 = FUN_0015bac0;
            tmate_decoder_init(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               *param_9 + 0x50,FUN_0015bac0,param_9,param_12,param_13,param_14);
            free(*(void **)(*param_9 + 0xe0));
            lVar13 = *param_9;
            param_1 = xstrdup(CONCAT44(extraout_XMM0_Db_11,extraout_XMM0_Da_18),param_2,param_3,
                              param_4,param_5,param_6,param_7,param_8,(char *)param_9[3],pcVar12,
                              extraout_RDX_19,param_12,param_13,param_14);
            *(undefined8 *)(lVar13 + 0xe0) = extraout_RAX_00;
          }
          else if (iVar3 == -2) goto switchD_0015c002_caseD_0;
switchD_0015c002_caseD_9:
          lVar13 = *param_9;
          while( true ) {
            tmate_decoder_get_buffer
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long *)(lVar13 + 0x50),&local_40,(ulong *)&local_38,param_12,param_13,
                       param_14);
            param_12 = (char **)0x0;
            iVar3 = FUN_00122e40();
            uVar17 = (undefined)in_stack_ffffffffffffffb8;
            local_38 = (char *)(long)iVar3;
            if ((long)local_38 < 0) break;
            if (local_38 == (char *)0x0) goto switchD_0015c002_caseD_0;
            param_1 = tmate_decoder_commit
                                (CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_06),param_2,param_3,
                                 param_4,param_5,param_6,param_7,param_8,
                                 (long)(long *)(lVar13 + 0x50),(long)local_38,extraout_RDX_07,
                                 param_12,param_13,param_14);
          }
          uVar6 = ssh_get_error(param_9[0xe]);
          FUN_0015bad0(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_07),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_9,0x180278,uVar6,param_12,param_13,
                       param_14,uVar17);
        }
      }
      goto switchD_0015c002_caseD_0;
    }
  }
  FUN_0015bad0(CONCAT44(uVar15,uVar14),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               param_9,0x17ff42,uVar6,param_12,param_13,param_14,(char)in_stack_ffffffffffffffb8);
switchD_0015c002_caseD_0:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_0015c7d0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,char *param_10,long *param_11,char **param_12,char *param_13,
                 size_t param_14)

{
  FUN_0015bfc0(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,param_10,
               param_11,param_12,param_13,param_14);
  return;
}



void FUN_0015c7e0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 char *param_9,long *param_10,undefined8 param_11,char **param_12,char *param_13,
                 size_t param_14)

{
  long lVar1;
  long *plVar2;
  undefined8 extraout_XMM0_Qa;
  undefined auVar3 [16];
  
  lVar1 = *param_10;
  plVar2 = param_10;
  auVar3 = xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                   param_11,param_12,param_13,param_14);
  *(long *)(lVar1 + 200) = auVar3._0_8_;
  FUN_0015bfc0(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
               (char *)plVar2,auVar3._8_8_,param_12,param_13,param_14);
  return;
}



void FUN_0015c810(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,size_t param_14)

{
  int iVar1;
  undefined8 uVar2;
  ulong uVar3;
  undefined8 extraout_XMM0_Qa;
  undefined1 in_stack_00000008;
  
  if (param_9[0xf] == 0) {
    return;
  }
  while( true ) {
    uVar3 = evbuffer_get_length(param_10);
    if (uVar3 == 0) {
      return;
    }
    uVar2 = evbuffer_pullup(param_10,0xffffffffffffffff);
    iVar1 = ssh_channel_write(param_9[0xf],uVar2,uVar3 & 0xffffffff);
    if (iVar1 < 0) break;
    evbuffer_drain(param_10,(long)iVar1);
  }
  uVar2 = ssh_get_error(param_9[0xe]);
  FUN_0015bad0(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               0x18000f,uVar2,param_12,param_13,param_14,in_stack_00000008);
  return;
}



undefined8
FUN_0015c8b0(undefined8 param_1,char *param_2,long param_3,undefined8 param_4,undefined8 param_5,
            long *param_6)

{
  char *pcVar1;
  
  pcVar1 = *(char **)(*param_6 + 200);
  *(undefined4 *)(*param_6 + 0xc0) = 1;
  if (pcVar1 != (char *)0x0) {
    strlcpy(param_2,pcVar1,param_3);
    return 0;
  }
  *param_2 = '\0';
  return 0;
}



void connect_ssh_client(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long *param_9,char *param_10,undefined8 param_11,char **param_12,
                       char *param_13,size_t param_14)

{
  if (param_9[0xe] == 0) {
    *(undefined4 *)(param_9 + 4) = 1;
    FUN_0015bfc0(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                 param_11,param_12,param_13,param_14);
    return;
  }
                    // WARNING: Subroutine does not return
  __assert_fail("!client->session","tmate-ssh-client.c",0x222,"connect_ssh_client");
}



long * tmate_ssh_client_alloc
                 (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  long **pplVar1;
  long *plVar2;
  long lVar3;
  ulong uVar4;
  undefined8 extraout_RDX;
  char *pcVar5;
  undefined8 *puVar6;
  byte bVar7;
  
  bVar7 = 0;
  pcVar5 = param_10;
  plVar2 = (long *)xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x88,
                           param_10,param_11,param_12,param_13,param_14);
  *plVar2 = 0;
  plVar2[0x10] = 0;
  puVar6 = (undefined8 *)((ulong)(plVar2 + 1) & 0xfffffffffffffff8);
  for (uVar4 = (ulong)(((int)plVar2 - (int)(undefined8 *)((ulong)(plVar2 + 1) & 0xfffffffffffffff8))
                       + 0x88U >> 3); uVar4 != 0; uVar4 = uVar4 - 1) {
    *puVar6 = 0;
    puVar6 = puVar6 + (ulong)bVar7 * -2 + 1;
  }
  ssh_set_log_callback(FUN_0015baa0);
  *plVar2 = param_9;
  *(undefined (*) [16])(plVar2 + 8) = (undefined  [16])0x0;
  plVar2[0xc] = 0;
  plVar2[7] = (long)FUN_0015c8b0;
  *(undefined (*) [16])(plVar2 + 10) = (undefined  [16])0x0;
  pplVar1 = *(long ***)(param_9 + 0xb8);
  plVar2[5] = 0x40;
  plVar2[2] = (long)pplVar1;
  plVar2[6] = (long)plVar2;
  plVar2[1] = 0;
  *pplVar1 = plVar2;
  *(long **)(param_9 + 0xb8) = plVar2 + 1;
  lVar3 = xstrdup(0,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,pcVar5,
                  extraout_RDX,uVar4,param_13,param_14);
  *(undefined4 *)(plVar2 + 4) = 0;
  plVar2[3] = lVar3;
  plVar2[0xe] = 0;
  plVar2[0xf] = 0;
  return plVar2;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_0015ca10(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 int param_9,long param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  int *piVar1;
  long lVar2;
  ulong uVar3;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  
  if (_DAT_001a44b8 == 0) {
    _DAT_001a44b0 = 0x100;
    _DAT_001a44b8 =
         xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x1000,param_10,
                 param_11,param_12,param_13,param_14);
    uVar3 = 0;
    _DAT_001a44b4 = 0;
    param_1 = extraout_XMM0_Da_00;
  }
  else {
    uVar3 = (ulong)_DAT_001a44b4;
  }
  if (_DAT_001a44b0 == (uint)uVar3) {
    _DAT_001a44b0 = (uint)uVar3 * 2;
    _DAT_001a44b8 =
         xrealloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,_DAT_001a44b8,
                  (ulong)_DAT_001a44b0 << 4,uVar3,param_12,param_13,param_14);
    uVar3 = (ulong)_DAT_001a44b4;
    param_1 = extraout_XMM0_Da;
  }
  piVar1 = (int *)(_DAT_001a44b8 + uVar3 * 0x10);
  *piVar1 = param_9;
  lVar2 = cmd_copy_argv(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        param_10,uVar3 * 0x10,param_12,param_13,param_14);
  *(long *)(piVar1 + 2) = lVar2;
  _DAT_001a44b4 = _DAT_001a44b4 + 1;
  return;
}



void FUN_0015cac0(int param_1,char **param_2)

{
  char **ppcVar1;
  char *pcVar2;
  uint uVar3;
  long in_FS_OFFSET;
  undefined4 local_2c;
  undefined local_25;
  undefined4 local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar3 = param_1 + 1;
  if (uVar3 < 0x10) {
    local_2c = CONCAT31(local_2c._1_3_,(char)uVar3) | 0x90;
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  }
  else if (uVar3 < 0x10000) {
    local_25 = 0xdc;
    local_24 = CONCAT22(local_24._2_2_,(ushort)uVar3 << 8 | (ushort)uVar3 >> 8);
    (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
  }
  else {
    local_24 = uVar3 >> 0x18 | (uVar3 & 0xff0000) >> 8 | (uVar3 & 0xff00) << 8 | uVar3 * 0x1000000;
    local_25 = 0xdd;
    (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
  }
  local_2c = 0xc;
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  if (0 < param_1) {
    ppcVar1 = param_2 + (ulong)(param_1 - 1) + 1;
    do {
      pcVar2 = *param_2;
      param_2 = param_2 + 1;
      msgpack_pack_string(&DAT_001a43d8,pcVar2);
    } while (param_2 != ppcVar1);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_0015cbd0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9)

{
  uint *puVar1;
  byte bVar2;
  uint uVar3;
  ulong uVar4;
  undefined8 in_R8;
  undefined8 in_R9;
  uint uVar5;
  ulong uVar6;
  ulong uVar7;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined4 local_6c;
  byte local_68;
  byte local_67;
  byte local_66;
  byte local_63;
  undefined local_60 [10];
  byte local_56;
  undefined local_45;
  undefined4 local_44;
  long local_40;
  
  uVar4 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar5 = *(int *)(param_9 + 8) + 300;
  uVar3 = *(int *)(param_9 + 8) + *(int *)(param_9 + 0xc);
  if (uVar5 < uVar3) {
    uVar4 = (ulong)(*(int *)(param_9 + 0xc) - 300);
    uVar3 = uVar5;
  }
  if (uVar3 < 0x10) {
    local_6c = CONCAT31(local_6c._1_3_,(char)uVar3) | 0x90;
    (*DAT_001a43e0)(DAT_001a43d8,&local_6c,1);
  }
  else if (uVar3 < 0x10000) {
    local_45 = 0xdc;
    local_44 = CONCAT22(local_44._2_2_,(ushort)uVar3 << 8 | (ushort)uVar3 >> 8);
    (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
  }
  else {
    local_44 = uVar3 >> 0x18 | (uVar3 & 0xff0000) >> 8 | (uVar3 & 0xff00) << 8 | uVar3 << 0x18;
    local_45 = 0xdd;
    (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
  }
  if ((uint)uVar4 < (uint)(*(int *)(param_9 + 8) + *(int *)(param_9 + 0xc))) {
    do {
      local_6c = CONCAT31(local_6c._1_3_,0x92);
      puVar1 = (uint *)(*(long *)(param_9 + 0x18) + uVar4 * 0x1c);
      uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_6c,1);
      if (*puVar1 == 0) {
        bVar2 = 0xa0;
LAB_0015cf86:
        local_6c = CONCAT31(local_6c._1_3_,bVar2);
        uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_6c,1);
LAB_0015cd29:
        uVar6 = 0;
        if (*puVar1 != 0) goto LAB_0015cd40;
LAB_0015cf69:
        bVar2 = 0x90;
LAB_0015cf23:
        local_6c = CONCAT31(local_6c._1_3_,bVar2);
        uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_6c,1);
      }
      else {
        uVar7 = 0;
        uVar6 = 0;
        do {
          uVar8 = grid_get_cell(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                param_9,uVar6,uVar4,(undefined4 *)&local_68,in_R8,in_R9);
          uVar5 = (int)uVar6 + 1;
          uVar6 = (ulong)uVar5;
          uVar7 = uVar7 + local_56;
        } while (uVar5 < *puVar1);
        uVar5 = (uint)uVar7;
        if (uVar7 < 0x20) {
          bVar2 = (byte)uVar7 | 0xa0;
          goto LAB_0015cf86;
        }
        if (0xff < uVar7) {
          if (uVar7 < 0x10000) {
            local_45 = 0xda;
            local_44 = CONCAT22(local_44._2_2_,(ushort)uVar7 << 8 | (ushort)uVar7 >> 8);
            uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
          }
          else {
            local_45 = 0xdb;
            local_44 = uVar5 >> 0x18 | (uVar5 & 0xff0000) >> 8 | (uVar5 & 0xff00) << 8 |
                       uVar5 << 0x18;
            uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
          }
          goto LAB_0015cd29;
        }
        local_44 = CONCAT31(local_44._1_3_,(byte)uVar7);
        uVar6 = 0;
        local_45 = 0xd9;
        uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
        if (*puVar1 == 0) goto LAB_0015cf69;
LAB_0015cd40:
        do {
          grid_get_cell(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar6,
                        uVar4,(undefined4 *)&local_68,in_R8,in_R9);
          uVar3 = (int)uVar6 + 1;
          uVar6 = (ulong)uVar3;
          uVar8 = (*DAT_001a43e0)(DAT_001a43d8,local_60,local_56);
          uVar5 = *puVar1;
        } while (uVar3 < uVar5);
        if (uVar5 < 0x10) {
          bVar2 = (byte)uVar5 | 0x90;
          goto LAB_0015cf23;
        }
        if (uVar5 < 0x10000) {
          local_45 = 0xdc;
          local_44 = CONCAT22(local_44._2_2_,(ushort)uVar5 << 8 | (ushort)uVar5 >> 8);
          uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
        }
        else {
          local_45 = 0xdd;
          local_44 = uVar5 >> 0x18 | (uVar5 & 0xff0000) >> 8 | (uVar5 & 0xff00) << 8 | uVar5 << 0x18
          ;
          uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
        }
      }
      uVar6 = 0;
      if (*puVar1 != 0) {
        do {
          while( true ) {
            grid_get_cell(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          uVar6,uVar4,(undefined4 *)&local_68,in_R8,in_R9);
            local_6c = (uint)local_68 << 0x18 | (uint)local_67 << 0x10 | (uint)local_66 |
                       (uint)local_63 << 8;
            if (0xff < local_6c) break;
            if (local_6c < 0x80) {
              uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_6c,1);
            }
            else {
              local_45 = 0xcc;
              local_44 = CONCAT31(local_44._1_3_,local_66);
              uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
            }
LAB_0015cddd:
            uVar5 = (int)uVar6 + 1;
            uVar6 = (ulong)uVar5;
            if (*puVar1 <= uVar5) goto LAB_0015ce60;
          }
          if (0xffff < local_6c) {
            local_45 = 0xce;
            local_44 = (uint)local_68 | ((uint)local_67 << 0x10) >> 8 | (uint)local_63 << 0x10 |
                       (uint)local_66 << 0x18;
            uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
            goto LAB_0015cddd;
          }
          local_45 = 0xcd;
          uVar5 = (int)uVar6 + 1;
          uVar6 = (ulong)uVar5;
          local_44 = CONCAT22(local_44._2_2_,(ushort)local_6c << 8 | (ushort)local_6c >> 8);
          uVar8 = (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
        } while (uVar5 < *puVar1);
      }
LAB_0015ce60:
      uVar5 = (int)uVar4 + 1;
      uVar4 = (ulong)uVar5;
    } while (uVar5 < (uint)(*(int *)(param_9 + 8) + *(int *)(param_9 + 0xc)));
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void tmate_write_header(void)

{
  long in_FS_OFFSET;
  undefined4 local_14;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_14 = CONCAT31(local_14._1_3_,0x93);
  (*DAT_001a43e0)(DAT_001a43d8,&local_14,1);
  local_14 = 0;
  (*DAT_001a43e0)(DAT_001a43d8,&local_14,1);
  local_14 = 6;
  (*DAT_001a43e0)(DAT_001a43d8,&local_14,1);
  msgpack_pack_string(&DAT_001a43d8,"2.4.0");
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_write_uname(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  int iVar1;
  undefined8 in_RCX;
  undefined8 extraout_RDX;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined in_stack_fffffffffffffe48;
  undefined4 local_1ac;
  utsname local_1a8;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = uname(&local_1a8);
  if (iVar1 < 0) {
    log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,
             "uname() failed",extraout_RDX,in_RCX,in_R8,in_R9,in_stack_fffffffffffffe48);
  }
  else {
    local_1ac = CONCAT31(local_1ac._1_3_,0x96);
    (*DAT_001a43e0)(DAT_001a43d8,&local_1ac,1);
    local_1ac = 0xd;
    (*DAT_001a43e0)(DAT_001a43d8,&local_1ac,1);
    msgpack_pack_string(&DAT_001a43d8,local_1a8.sysname);
    msgpack_pack_string(&DAT_001a43d8,local_1a8.nodename);
    msgpack_pack_string(&DAT_001a43d8,local_1a8.release);
    msgpack_pack_string(&DAT_001a43d8,local_1a8.version);
    msgpack_pack_string(&DAT_001a43d8,local_1a8.machine);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_write_ready(void)

{
  long in_FS_OFFSET;
  undefined4 local_14;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_14 = CONCAT31(local_14._1_3_,0x91);
  (*DAT_001a43e0)(DAT_001a43d8,&local_14,1);
  local_14 = 9;
  (*DAT_001a43e0)(DAT_001a43d8,&local_14,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_sync_layout(void)

{
  long lVar1;
  long lVar2;
  uint *puVar3;
  long lVar4;
  byte bVar5;
  uint uVar6;
  uint *puVar7;
  long in_FS_OFFSET;
  uint local_64;
  undefined4 local_4c;
  undefined local_45;
  undefined4 local_44;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar1 = sessions_RB_MINMAX(&sessions,-1);
  if (lVar1 == 0) goto LAB_0015d7c0;
  lVar2 = winlinks_RB_MINMAX((long *)(lVar1 + 0xf8),-1);
  if (lVar2 == 0) goto LAB_0015d7c0;
  uVar6 = 0;
  do {
    uVar6 = (uVar6 + 1) - (uint)(*(long *)(lVar2 + 8) == 0);
    lVar2 = winlinks_RB_NEXT(lVar2);
  } while (lVar2 != 0);
  if (uVar6 == 0) goto LAB_0015d7c0;
  local_4c = CONCAT31(local_4c._1_3_,0x95);
  (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
  local_4c = 1;
  (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
  local_4c = *(uint *)(lVar1 + 0xd8);
  if ((int)local_4c < -0x20) {
    if ((int)local_4c < -0x8000) {
      local_45 = 0xd2;
LAB_0015d812:
      local_44 = local_4c >> 0x18 | (local_4c & 0xff0000) >> 8 | (local_4c & 0xff00) << 8 |
                 local_4c << 0x18;
      (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
    }
    else if ((int)local_4c < -0x80) {
      local_45 = 0xd1;
LAB_0015d320:
      local_44 = CONCAT22(local_44._2_2_,(ushort)local_4c << 8 | (ushort)local_4c >> 8);
      (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
    }
    else {
      local_45 = 0xd0;
      local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
    }
  }
  else if ((int)local_4c < 0x80) {
    (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
  }
  else {
    if (0xff < (int)local_4c) {
      if ((int)local_4c < 0x10000) {
        local_45 = 0xcd;
        goto LAB_0015d320;
      }
      local_45 = 0xce;
      goto LAB_0015d812;
    }
    local_45 = 0xcc;
    local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
    (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
  }
  local_4c = *(uint *)(lVar1 + 0xdc);
  if ((int)local_4c < -0x20) {
    if ((int)local_4c < -0x8000) {
      local_45 = 0xd2;
LAB_0015dde2:
      local_44 = local_4c >> 0x18 | (local_4c & 0xff0000) >> 8 | (local_4c & 0xff00) << 8 |
                 local_4c << 0x18;
      (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
    }
    else if ((int)local_4c < -0x80) {
      local_45 = 0xd1;
LAB_0015d374:
      local_44 = CONCAT22(local_44._2_2_,(ushort)local_4c << 8 | (ushort)local_4c >> 8);
      (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
    }
    else {
      local_45 = 0xd0;
      local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
    }
  }
  else if ((int)local_4c < 0x80) {
    (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
  }
  else {
    if (0xff < (int)local_4c) {
      if ((int)local_4c < 0x10000) {
        local_45 = 0xcd;
        goto LAB_0015d374;
      }
      local_45 = 0xce;
      goto LAB_0015dde2;
    }
    local_45 = 0xcc;
    local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
    (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
  }
  if ((int)uVar6 < 0x10) {
    local_4c = CONCAT31(local_4c._1_3_,(char)uVar6) | 0x90;
    (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
  }
  else if ((int)uVar6 < 0x10000) {
    local_45 = 0xdc;
    local_44 = CONCAT22(local_44._2_2_,(ushort)uVar6 << 8 | (ushort)uVar6 >> 8);
    (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
  }
  else {
    local_44 = uVar6 >> 0x18 | (uVar6 & 0xff0000) >> 8 | (uVar6 & 0xff00) << 8 | uVar6 * 0x1000000;
    local_45 = 0xdd;
    (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
  }
  puVar3 = (uint *)winlinks_RB_MINMAX((long *)(lVar1 + 0xf8),-1);
  if (puVar3 == (uint *)0x0) {
    puVar3 = *(uint **)(lVar1 + 0xe0);
    if (puVar3 != (uint *)0x0) goto LAB_0015d773;
    local_4c = 0xffffffff;
LAB_0015de4f:
    (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
  }
  else {
    local_64 = 0xffffffff;
    do {
      lVar2 = *(long *)(puVar3 + 2);
      if (lVar2 != 0) {
        *(undefined8 *)(lVar2 + 0x130) = 0;
        if (local_64 == 0xffffffff) {
          local_64 = *puVar3;
        }
        local_4c = CONCAT31(local_4c._1_3_,0x94);
        (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
        local_4c = *puVar3;
        if ((int)local_4c < -0x20) {
          if ((int)local_4c < -0x8000) {
            local_45 = 0xd2;
LAB_0015dc65:
            local_44 = local_4c >> 0x18 | (local_4c & 0xff0000) >> 8 | (local_4c & 0xff00) << 8 |
                       local_4c << 0x18;
            (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
          }
          else if ((int)local_4c < -0x80) {
            local_45 = 0xd1;
LAB_0015d468:
            local_44 = CONCAT22(local_44._2_2_,(ushort)local_4c << 8 | (ushort)local_4c >> 8);
            (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
          }
          else {
            local_45 = 0xd0;
            local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
            (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
          }
        }
        else if ((int)local_4c < 0x80) {
          (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
        }
        else {
          if (0xff < (int)local_4c) {
            if ((int)local_4c < 0x10000) {
              local_45 = 0xcd;
              goto LAB_0015d468;
            }
            local_45 = 0xce;
            goto LAB_0015dc65;
          }
          local_45 = 0xcc;
          local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
          (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
        }
        msgpack_pack_string(&DAT_001a43d8,*(char **)(lVar2 + 8));
        lVar4 = *(long *)(lVar2 + 0x148);
        if (lVar4 == 0) {
          bVar5 = 0x90;
LAB_0015dc13:
          local_4c = CONCAT31(local_4c._1_3_,bVar5);
          (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
        }
        else {
          uVar6 = 0;
          do {
            lVar4 = *(long *)(lVar4 + 0x1f8);
            uVar6 = uVar6 + 1;
          } while (lVar4 != 0);
          if ((int)uVar6 < 0x10) {
            bVar5 = (byte)uVar6 | 0x90;
            goto LAB_0015dc13;
          }
          if ((int)uVar6 < 0x10000) {
            local_45 = 0xdc;
            local_44 = CONCAT22(local_44._2_2_,(ushort)uVar6 << 8 | (ushort)uVar6 >> 8);
            (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
          }
          else {
            local_44 = uVar6 >> 0x18 | (uVar6 & 0xff0000) >> 8 | (uVar6 & 0xff00) << 8 |
                       uVar6 * 0x1000000;
            local_45 = 0xdd;
            (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
          }
        }
        puVar7 = *(uint **)(lVar2 + 0x148);
        if (puVar7 == (uint *)0x0) {
          local_4c = 0xffffffff;
LAB_0015dc88:
          (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
        }
        else {
          uVar6 = 0xffffffff;
          do {
            local_4c = CONCAT31(local_4c._1_3_,0x95);
            (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
            local_4c = *puVar7;
            if ((int)local_4c < -0x20) {
              if ((int)local_4c < -0x8000) {
                local_45 = 0xd2;
LAB_0015d985:
                local_44 = local_4c >> 0x18 | (local_4c & 0xff0000) >> 8 | (local_4c & 0xff00) << 8
                           | local_4c << 0x18;
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
              }
              else if ((int)local_4c < -0x80) {
                local_45 = 0xd1;
LAB_0015d539:
                local_44 = CONCAT22(local_44._2_2_,(ushort)local_4c << 8 | (ushort)local_4c >> 8);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
              }
              else {
                local_45 = 0xd0;
                local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
              }
            }
            else if ((int)local_4c < 0x80) {
              (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
            }
            else {
              if (0xff < (int)local_4c) {
                if ((int)local_4c < 0x10000) {
                  local_45 = 0xcd;
                  goto LAB_0015d539;
                }
                local_45 = 0xce;
                goto LAB_0015d985;
              }
              local_45 = 0xcc;
              local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
              (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
            }
            local_4c = puVar7[8];
            if ((int)local_4c < -0x20) {
              if ((int)local_4c < -0x8000) {
                local_45 = 0xd2;
LAB_0015d9c5:
                local_44 = local_4c >> 0x18 | (local_4c & 0xff0000) >> 8 | (local_4c & 0xff00) << 8
                           | local_4c << 0x18;
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
              }
              else if ((int)local_4c < -0x80) {
                local_45 = 0xd1;
LAB_0015d583:
                local_44 = CONCAT22(local_44._2_2_,(ushort)local_4c << 8 | (ushort)local_4c >> 8);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
              }
              else {
                local_45 = 0xd0;
                local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
              }
            }
            else if ((int)local_4c < 0x80) {
              (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
            }
            else {
              if (0xff < (int)local_4c) {
                if ((int)local_4c < 0x10000) {
                  local_45 = 0xcd;
                  goto LAB_0015d583;
                }
                local_45 = 0xce;
                goto LAB_0015d9c5;
              }
              local_45 = 0xcc;
              local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
              (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
            }
            local_4c = puVar7[9];
            if ((int)local_4c < -0x20) {
              if ((int)local_4c < -0x8000) {
                local_45 = 0xd2;
LAB_0015d965:
                local_44 = local_4c >> 0x18 | (local_4c & 0xff0000) >> 8 | (local_4c & 0xff00) << 8
                           | local_4c << 0x18;
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
              }
              else if ((int)local_4c < -0x80) {
                local_45 = 0xd1;
LAB_0015d5cd:
                local_44 = CONCAT22(local_44._2_2_,(ushort)local_4c << 8 | (ushort)local_4c >> 8);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
              }
              else {
                local_45 = 0xd0;
                local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
              }
            }
            else if ((int)local_4c < 0x80) {
              (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
            }
            else {
              if (0xff < (int)local_4c) {
                if ((int)local_4c < 0x10000) {
                  local_45 = 0xcd;
                  goto LAB_0015d5cd;
                }
                local_45 = 0xce;
                goto LAB_0015d965;
              }
              local_45 = 0xcc;
              local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
              (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
            }
            local_4c = puVar7[10];
            if ((int)local_4c < -0x20) {
              if ((int)local_4c < -0x8000) {
                local_45 = 0xd2;
LAB_0015d935:
                local_44 = local_4c >> 0x18 | (local_4c & 0xff0000) >> 8 | (local_4c & 0xff00) << 8
                           | local_4c << 0x18;
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
              }
              else if ((int)local_4c < -0x80) {
                local_45 = 0xd1;
LAB_0015d617:
                local_44 = CONCAT22(local_44._2_2_,(ushort)local_4c << 8 | (ushort)local_4c >> 8);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
              }
              else {
                local_45 = 0xd0;
                local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
              }
            }
            else if ((int)local_4c < 0x80) {
              (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
            }
            else {
              if (0xff < (int)local_4c) {
                if ((int)local_4c < 0x10000) {
                  local_45 = 0xcd;
                  goto LAB_0015d617;
                }
                local_45 = 0xce;
                goto LAB_0015d935;
              }
              local_45 = 0xcc;
              local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
              (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
            }
            local_4c = puVar7[0xb];
            if ((int)local_4c < -0x20) {
              if ((int)local_4c < -0x8000) {
                local_45 = 0xd2;
LAB_0015d915:
                local_44 = local_4c >> 0x18 | (local_4c & 0xff0000) >> 8 | (local_4c & 0xff00) << 8
                           | local_4c << 0x18;
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
              }
              else if ((int)local_4c < -0x80) {
                local_45 = 0xd1;
LAB_0015d661:
                local_44 = CONCAT22(local_44._2_2_,(ushort)local_4c << 8 | (ushort)local_4c >> 8);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
              }
              else {
                local_45 = 0xd0;
                local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
                (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
              }
            }
            else if ((int)local_4c < 0x80) {
              (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
            }
            else {
              if (0xff < (int)local_4c) {
                if ((int)local_4c < 0x10000) {
                  local_45 = 0xcd;
                  goto LAB_0015d661;
                }
                local_45 = 0xce;
                goto LAB_0015d915;
              }
              local_45 = 0xcc;
              local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
              (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
            }
            if (*(uint **)(lVar2 + 0x138) == puVar7) {
              *(uint **)(lVar2 + 0x130) = puVar7;
              uVar6 = *puVar7;
            }
            puVar7 = *(uint **)(puVar7 + 0x7e);
          } while (puVar7 != (uint *)0x0);
          local_4c = uVar6;
          if ((int)uVar6 < -0x20) {
            if ((int)uVar6 < -0x8000) {
              local_45 = 0xd2;
LAB_0015dc35:
              local_44 = uVar6 >> 0x18 | (uVar6 & 0xff0000) >> 8 | (uVar6 & 0xff00) << 8 |
                         uVar6 << 0x18;
              (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
            }
            else if ((int)uVar6 < -0x80) {
              local_45 = 0xd1;
LAB_0015d723:
              local_44 = CONCAT22(local_44._2_2_,(ushort)uVar6 << 8 | (ushort)uVar6 >> 8);
              (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
            }
            else {
              local_45 = 0xd0;
              local_44 = CONCAT31(local_44._1_3_,(char)uVar6);
              (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
            }
          }
          else {
            if ((int)uVar6 < 0x80) goto LAB_0015dc88;
            if (0xff < (int)uVar6) {
              if ((int)uVar6 < 0x10000) {
                local_45 = 0xcd;
                goto LAB_0015d723;
              }
              local_45 = 0xce;
              goto LAB_0015dc35;
            }
            local_45 = 0xcc;
            local_44 = CONCAT31(local_44._1_3_,(char)uVar6);
            (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
          }
        }
      }
      puVar3 = (uint *)winlinks_RB_NEXT((long)puVar3);
    } while (puVar3 != (uint *)0x0);
    puVar3 = *(uint **)(lVar1 + 0xe0);
    if (puVar3 != (uint *)0x0) {
LAB_0015d773:
      local_64 = *puVar3;
    }
    local_4c = local_64;
    if ((int)local_64 < -0x20) {
      if ((int)local_64 < -0x8000) {
        local_45 = 0xd2;
LAB_0015ddfe:
        local_44 = local_64 >> 0x18 | (local_64 & 0xff0000) >> 8 | (local_64 & 0xff00) << 8 |
                   local_64 << 0x18;
        (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
        goto LAB_0015d7c0;
      }
      if ((int)local_64 < -0x80) {
        local_45 = 0xd1;
LAB_0015d7a7:
        local_44 = CONCAT22(local_44._2_2_,(ushort)local_64 << 8 | (ushort)local_64 >> 8);
        (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
        goto LAB_0015d7c0;
      }
      local_45 = 0xd0;
    }
    else {
      if ((int)local_64 < 0x80) goto LAB_0015de4f;
      if (0xff < (int)local_64) {
        if ((int)local_64 < 0x10000) {
          local_45 = 0xcd;
          goto LAB_0015d7a7;
        }
        local_45 = 0xce;
        goto LAB_0015ddfe;
      }
      local_45 = 0xcc;
    }
    local_44 = CONCAT31(local_44._1_3_,(undefined)local_64);
    (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
  }
LAB_0015d7c0:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_pty_data(uint *param_1,long param_2,ulong param_3)

{
  ulong uVar1;
  long in_FS_OFFSET;
  undefined4 local_4c;
  undefined local_45;
  undefined4 local_44;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_3 != 0) {
    do {
      local_4c = CONCAT31(local_4c._1_3_,0x93);
      uVar1 = 0x4000;
      if (param_3 < 0x4001) {
        uVar1 = param_3;
      }
      (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
      local_4c = 2;
      (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
      local_4c = *param_1;
      if ((int)local_4c < -0x20) {
        if ((int)local_4c < -0x8000) {
          local_45 = 0xd2;
LAB_0015e0c5:
          local_44 = local_4c >> 0x18 | (local_4c & 0xff0000) >> 8 | (local_4c & 0xff00) << 8 |
                     local_4c << 0x18;
          (*DAT_001a43e0)(DAT_001a43d8,&local_45,5);
        }
        else if ((int)local_4c < -0x80) {
          local_45 = 0xd1;
LAB_0015df81:
          local_44 = CONCAT22(local_44._2_2_,(ushort)local_4c << 8 | (ushort)local_4c >> 8);
          (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
        }
        else {
          local_45 = 0xd0;
          local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
          (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
        }
      }
      else if ((int)local_4c < 0x80) {
        (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
      }
      else {
        if (0xff < (int)local_4c) {
          if ((int)local_4c < 0x10000) {
            local_45 = 0xcd;
            goto LAB_0015df81;
          }
          local_45 = 0xce;
          goto LAB_0015e0c5;
        }
        local_45 = 0xcc;
        local_44 = CONCAT31(local_44._1_3_,(char)local_4c);
        (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
      }
      if (param_3 < 0x20) {
        local_4c = CONCAT31(local_4c._1_3_,(char)uVar1) | 0xa0;
        (*DAT_001a43e0)(DAT_001a43d8,&local_4c,1);
      }
      else if (param_3 < 0x100) {
        local_45 = 0xd9;
        local_44 = CONCAT31(local_44._1_3_,(char)uVar1);
        (*DAT_001a43e0)(DAT_001a43d8,&local_45,2);
      }
      else {
        local_45 = 0xda;
        local_44 = CONCAT22(local_44._2_2_,(ushort)uVar1 << 8 | (ushort)uVar1 >> 8);
        (*DAT_001a43e0)(DAT_001a43d8,&local_45,3);
      }
      (*DAT_001a43e0)(DAT_001a43d8,param_2,uVar1);
      param_3 = param_3 - uVar1;
      param_2 = param_2 + uVar1;
    } while (param_3 != 0);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined * tmate_should_replicate_cmd(undefined *param_1)

{
  undefined *puVar1;
  undefined **ppuVar2;
  
  if (PTR_cmd_bind_key_entry_0019e700 == (undefined *)0x0) {
    return (undefined *)0x0;
  }
  ppuVar2 = &PTR_cmd_bind_key_entry_0019e700;
  puVar1 = PTR_cmd_bind_key_entry_0019e700;
  do {
    if (param_1 == puVar1) {
      return (undefined *)0x1;
    }
    puVar1 = ppuVar2[1];
    ppuVar2 = ppuVar2 + 1;
  } while (puVar1 != (undefined *)0x0);
  return puVar1;
}



void tmate_exec_cmd_args(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,int param_9,char **param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  undefined4 uVar1;
  
  uVar1 = FUN_0015cac0(param_9,param_10);
  FUN_0015ca10(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,(long)param_10,
               extraout_RDX,param_12,param_13,param_14);
  return;
}



void tmate_set_val(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined4 uVar1;
  undefined1 in_stack_ffffffffffffffc8;
  void *local_30;
  char *local_28;
  char *local_20;
  void *local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  xasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long *)&local_30,
            "%s=%s",param_9,param_10,param_13,param_14,in_stack_ffffffffffffffc8);
  local_28 = "set-option";
  local_20 = "tmate-set";
  local_18 = local_30;
  uVar1 = FUN_0015cac0(3,&local_28);
  FUN_0015ca10(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,(long)&local_28,
               extraout_RDX,param_10,param_13,param_14);
  free(local_30);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_exec_cmd(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   undefined8 *param_9,undefined8 param_10,undefined8 param_11,long param_12,
                   undefined8 param_13,undefined8 param_14)

{
  long *plVar1;
  long lVar2;
  char **ppcVar3;
  char *extraout_RAX;
  byte *pbVar4;
  char *pcVar5;
  char *extraout_RAX_00;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 uVar6;
  undefined *puVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar13;
  undefined4 extraout_XMM0_Db_02;
  undefined8 uVar12;
  undefined auVar14 [16];
  undefined in_stack_ffffffffffffffb8;
  
  uVar6 = 0xffffffff;
  plVar1 = (long *)param_9[1];
  lVar2 = args_tree_RB_MINMAX(plVar1,-1);
  if (lVar2 == 0) {
    iVar8 = 1;
    uVar12 = extraout_RDX;
    uVar11 = extraout_XMM0_Da;
  }
  else {
    iVar8 = 1;
    do {
      while (*(long *)(lVar2 + 8) == 0) {
        lVar2 = args_tree_RB_NEXT(lVar2);
        iVar8 = iVar8 + 1;
        uVar12 = extraout_RDX_01;
        uVar11 = extraout_XMM0_Da_01;
        if (lVar2 == 0) goto LAB_0015e2e9;
      }
      lVar2 = args_tree_RB_NEXT(lVar2);
      iVar8 = iVar8 + 2;
      uVar12 = extraout_RDX_00;
      uVar11 = extraout_XMM0_Da_00;
    } while (lVar2 != 0);
  }
LAB_0015e2e9:
  iVar8 = iVar8 + *(int *)(plVar1 + 1);
  iVar9 = 1;
  auVar14 = xmalloc(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)iVar8 << 3,
                    uVar6,uVar12,param_12,param_13,param_14);
  ppcVar3 = auVar14._0_8_;
  xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,*(char **)*param_9,uVar6,auVar14._8_8_,param_12,param_13,param_14);
  puVar7 = (undefined *)0xffffffff;
  *ppcVar3 = extraout_RAX;
  pbVar4 = (byte *)args_tree_RB_MINMAX(plVar1,-1);
  uVar6 = extraout_RDX_02;
  uVar11 = extraout_XMM0_Da_03;
  uVar13 = extraout_XMM0_Db_00;
  while (iVar10 = iVar9, pbVar4 != (byte *)0x0) {
    while( true ) {
      lVar2 = (long)iVar10;
      iVar9 = iVar10 + 1;
      puVar7 = &DAT_0017caa0;
      param_12 = lVar2;
      uVar6 = xasprintf(CONCAT44(uVar13,uVar11),param_2,param_3,param_4,param_5,param_6,param_7,
                        param_8,(long *)(ppcVar3 + lVar2),&DAT_0017caa0,(ulong)*pbVar4,lVar2,
                        param_13,param_14,in_stack_ffffffffffffffb8);
      if (*(char **)(pbVar4 + 8) != (char *)0x0) break;
      pbVar4 = (byte *)args_tree_RB_NEXT((long)pbVar4);
      uVar6 = extraout_RDX_05;
      uVar11 = extraout_XMM0_Da_05;
      uVar13 = extraout_XMM0_Db_02;
      iVar10 = iVar9;
      if (pbVar4 == (byte *)0x0) goto LAB_0015e399;
    }
    pcVar5 = (char *)xstrdup(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(char **)(pbVar4 + 8),puVar7,extraout_RDX_04,param_12,param_13,
                             param_14);
    iVar9 = iVar10 + 2;
    ppcVar3[lVar2 + 1] = pcVar5;
    pbVar4 = (byte *)args_tree_RB_NEXT((long)pbVar4);
    uVar6 = extraout_RDX_03;
    uVar11 = extraout_XMM0_Da_04;
    uVar13 = extraout_XMM0_Db_01;
  }
LAB_0015e399:
  uVar12 = CONCAT44(uVar13,uVar11);
  if (0 < *(int *)(plVar1 + 1)) {
    lVar2 = 0;
    do {
      uVar12 = xstrdup(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       *(char **)(plVar1[2] + lVar2 * 8),puVar7,uVar6,param_12,param_13,param_14);
      ppcVar3[iVar9 + lVar2] = extraout_RAX_00;
      lVar2 = lVar2 + 1;
      uVar6 = extraout_RDX_06;
    } while ((int)lVar2 < *(int *)(plVar1 + 1));
  }
  uVar11 = FUN_0015cac0(iVar8,ppcVar3);
  FUN_0015ca10(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,iVar8,(long)ppcVar3,
               extraout_RDX_07,param_12,param_13,param_14);
  cmd_free_argv(iVar8,ppcVar3);
  return;
}



void tmate_failed_cmd(uint param_1,char *param_2)

{
  long in_FS_OFFSET;
  undefined4 local_2c;
  undefined local_25;
  undefined4 local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_2c = CONCAT31(local_2c._1_3_,0x93);
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  local_2c = 4;
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  local_2c = param_1;
  if ((int)param_1 < -0x20) {
    if ((int)param_1 < -0x8000) {
      local_25 = 0xd2;
LAB_0015e4e5:
      local_24 = param_1 >> 0x18 | (param_1 & 0xff0000) >> 8 | (param_1 & 0xff00) << 8 |
                 param_1 << 0x18;
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
      goto LAB_0015e4f7;
    }
    if (-0x81 < (int)param_1) {
      local_25 = 0xd0;
      local_24 = CONCAT31(local_24._1_3_,(char)param_1);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
      goto LAB_0015e4f7;
    }
    local_25 = 0xd1;
  }
  else {
    if ((int)param_1 < 0x80) {
      (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
      goto LAB_0015e4f7;
    }
    if ((int)param_1 < 0x100) {
      local_25 = 0xcc;
      local_24 = CONCAT31(local_24._1_3_,(char)param_1);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
      goto LAB_0015e4f7;
    }
    if (0xffff < (int)param_1) {
      local_25 = 0xce;
      goto LAB_0015e4e5;
    }
    local_25 = 0xcd;
  }
  local_24 = CONCAT22(local_24._2_2_,(ushort)param_1 << 8 | (ushort)param_1 >> 8);
  (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
LAB_0015e4f7:
  msgpack_pack_string(&DAT_001a43d8,param_2);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_status(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 char *param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  undefined8 extraout_RDX;
  char *pcVar2;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined auVar3 [16];
  undefined4 local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if ((((DAT_001a0bd0 == (char *)0x0) || (iVar1 = strcmp(DAT_001a0bd0,param_9), iVar1 != 0)) ||
      (DAT_001a0bc8 == (char *)0x0)) || (iVar1 = strcmp(DAT_001a0bc8,param_10), iVar1 != 0)) {
    local_24 = CONCAT31(local_24._1_3_,0x93);
    (*DAT_001a43e0)(DAT_001a43d8,&local_24,1);
    local_24 = 5;
    (*DAT_001a43e0)(DAT_001a43d8,&local_24,1);
    msgpack_pack_string(&DAT_001a43d8,param_9);
    pcVar2 = param_10;
    msgpack_pack_string(&DAT_001a43d8,param_10);
    free(DAT_001a0bd0);
    free(DAT_001a0bc8);
    auVar3 = xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9,pcVar2,extraout_RDX,param_12,param_13,param_14);
    DAT_001a0bd0 = auVar3._0_8_;
    DAT_001a0bc8 = (char *)xstrdup(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,
                                   param_7,param_8,param_10,pcVar2,auVar3._8_8_,param_12,param_13,
                                   param_14);
  }
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void tmate_sync_copy_mode(uint *param_1)

{
  long lVar1;
  long lVar2;
  long in_FS_OFFSET;
  undefined4 local_2c;
  undefined local_25;
  undefined4 local_24;
  long local_20;
  
  lVar1 = *(long *)(param_1 + 0x7c);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_2c = CONCAT31(local_2c._1_3_,0x93);
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  local_2c = 6;
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  local_2c = *param_1;
  if ((int)local_2c < -0x20) {
    if ((int)local_2c < -0x8000) {
      local_25 = 0xd2;
LAB_0015e785:
      local_24 = local_2c >> 0x18 | (local_2c & 0xff0000) >> 8 | (local_2c & 0xff00) << 8 |
                 local_2c << 0x18;
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
    }
    else if ((int)local_2c < -0x80) {
      local_25 = 0xd1;
LAB_0015e730:
      local_24 = CONCAT22(local_24._2_2_,(ushort)local_2c << 8 | (ushort)local_2c >> 8);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
    }
    else {
      local_25 = 0xd0;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
    }
  }
  else if ((int)local_2c < 0x80) {
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  }
  else {
    if (0xff < (int)local_2c) {
      if ((int)local_2c < 0x10000) {
        local_25 = 0xcd;
        goto LAB_0015e730;
      }
      local_25 = 0xce;
      goto LAB_0015e785;
    }
    local_25 = 0xcc;
    local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
    (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
  }
  if ((*(undefined1 **)(param_1 + 0x7a) != window_copy_mode) || (*(int *)(lVar1 + 0xbc) == 10)) {
    local_2c = CONCAT31(local_2c._1_3_,0x90);
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
    goto LAB_0015e7c4;
  }
  local_2c = CONCAT31(local_2c._1_3_,0x96);
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  local_2c = (uint)(*(uint **)(lVar1 + 0x78) == param_1 + 0x52);
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  local_2c = *(uint *)(lVar1 + 0x98);
  if ((int)local_2c < -0x20) {
    if ((int)local_2c < -0x8000) {
      local_25 = 0xd2;
LAB_0015eca5:
      local_24 = local_2c >> 0x18 | (local_2c & 0xff0000) >> 8 | (local_2c & 0xff00) << 8 |
                 local_2c << 0x18;
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
    }
    else if ((int)local_2c < -0x80) {
      local_25 = 0xd1;
LAB_0015e890:
      local_24 = CONCAT22(local_24._2_2_,(ushort)local_2c << 8 | (ushort)local_2c >> 8);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
    }
    else {
      local_25 = 0xd0;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
    }
  }
  else if ((int)local_2c < 0x80) {
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  }
  else {
    if (0xff < (int)local_2c) {
      if ((int)local_2c < 0x10000) {
        local_25 = 0xcd;
        goto LAB_0015e890;
      }
      local_25 = 0xce;
      goto LAB_0015eca5;
    }
    local_25 = 0xcc;
    local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
    (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
  }
  local_2c = *(uint *)(lVar1 + 0xac);
  if ((int)local_2c < -0x20) {
    if ((int)local_2c < -0x8000) {
      local_25 = 0xd2;
LAB_0015ecc5:
      local_24 = local_2c >> 0x18 | (local_2c & 0xff0000) >> 8 | (local_2c & 0xff00) << 8 |
                 local_2c << 0x18;
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
    }
    else if ((int)local_2c < -0x80) {
      local_25 = 0xd1;
LAB_0015e8e1:
      local_24 = CONCAT22(local_24._2_2_,(ushort)local_2c << 8 | (ushort)local_2c >> 8);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
    }
    else {
      local_25 = 0xd0;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
    }
  }
  else if ((int)local_2c < 0x80) {
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  }
  else {
    if (0xff < (int)local_2c) {
      if ((int)local_2c < 0x10000) {
        local_25 = 0xcd;
        goto LAB_0015e8e1;
      }
      local_25 = 0xce;
      goto LAB_0015ecc5;
    }
    local_25 = 0xcc;
    local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
    (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
  }
  local_2c = *(uint *)(lVar1 + 0xb0);
  if ((int)local_2c < -0x20) {
    if ((int)local_2c < -0x8000) {
      local_25 = 0xd2;
LAB_0015ec85:
      local_24 = local_2c >> 0x18 | (local_2c & 0xff0000) >> 8 | (local_2c & 0xff00) << 8 |
                 local_2c << 0x18;
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
    }
    else if ((int)local_2c < -0x80) {
      local_25 = 0xd1;
LAB_0015e932:
      local_24 = CONCAT22(local_24._2_2_,(ushort)local_2c << 8 | (ushort)local_2c >> 8);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
    }
    else {
      local_25 = 0xd0;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
    }
  }
  else if ((int)local_2c < 0x80) {
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  }
  else {
    if (0xff < (int)local_2c) {
      if ((int)local_2c < 0x10000) {
        local_25 = 0xcd;
        goto LAB_0015e932;
      }
      local_25 = 0xce;
      goto LAB_0015ec85;
    }
    local_25 = 0xcc;
    local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
    (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
  }
  if (*(int *)(lVar1 + 0x40) == 0) {
    local_2c = CONCAT31(local_2c._1_3_,0x90);
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  }
  else {
    local_2c = CONCAT31(local_2c._1_3_,0x93);
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
    local_2c = *(uint *)(lVar1 + 0x9c);
    if ((int)local_2c < -0x20) {
      if ((int)local_2c < -0x8000) {
        local_25 = 0xd2;
LAB_0015ef35:
        local_24 = local_2c >> 0x18 | (local_2c & 0xff0000) >> 8 | (local_2c & 0xff00) << 8 |
                   local_2c << 0x18;
        (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
      }
      else if ((int)local_2c < -0x80) {
        local_25 = 0xd1;
LAB_0015eb8c:
        local_24 = CONCAT22(local_24._2_2_,(ushort)local_2c << 8 | (ushort)local_2c >> 8);
        (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
      }
      else {
        local_25 = 0xd0;
        local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
        (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
      }
    }
    else if ((int)local_2c < 0x80) {
      (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
    }
    else {
      if (0xff < (int)local_2c) {
        if ((int)local_2c < 0x10000) {
          local_25 = 0xcd;
          goto LAB_0015eb8c;
        }
        local_25 = 0xce;
        goto LAB_0015ef35;
      }
      local_25 = 0xcc;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
    }
    lVar2 = *(long *)(*(long *)(lVar1 + 0x78) + 8);
    local_2c = *(int *)(lVar2 + 8) + *(int *)(lVar2 + 0xc) + ~*(uint *)(lVar1 + 0xa0);
    if ((int)local_2c < -0x20) {
      if ((int)local_2c < -0x8000) {
        local_25 = 0xd2;
LAB_0015ef05:
        local_24 = local_2c >> 0x18 | (local_2c & 0xff0000) >> 8 | (local_2c & 0xff00) << 8 |
                   local_2c * 0x1000000;
        (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
      }
      else if ((int)local_2c < -0x80) {
        local_25 = 0xd1;
LAB_0015ebf0:
        local_24 = CONCAT22(local_24._2_2_,(ushort)local_2c << 8 | (ushort)local_2c >> 8);
        (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
      }
      else {
        local_25 = 0xd0;
        local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
        (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
      }
    }
    else if ((int)local_2c < 0x80) {
      (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
    }
    else {
      if (0xff < (int)local_2c) {
        if ((int)local_2c < 0x10000) {
          local_25 = 0xcd;
          goto LAB_0015ebf0;
        }
        local_25 = 0xce;
        goto LAB_0015ef05;
      }
      local_25 = 0xcc;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
    }
    local_2c = *(uint *)(lVar1 + 0xa4);
    if ((int)local_2c < -0x20) {
      if ((int)local_2c < -0x8000) {
        local_25 = 0xd2;
LAB_0015ef65:
        local_24 = local_2c >> 0x18 | (local_2c & 0xff0000) >> 8 | (local_2c & 0xff00) << 8 |
                   local_2c << 0x18;
        (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
      }
      else if ((int)local_2c < -0x80) {
        local_25 = 0xd1;
LAB_0015ec41:
        local_24 = CONCAT22(local_24._2_2_,(ushort)local_2c << 8 | (ushort)local_2c >> 8);
        (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
      }
      else {
        local_25 = 0xd0;
        local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
        (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
      }
    }
    else if ((int)local_2c < 0x80) {
      (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
    }
    else {
      if (0xff < (int)local_2c) {
        if ((int)local_2c < 0x10000) {
          local_25 = 0xcd;
          goto LAB_0015ec41;
        }
        local_25 = 0xce;
        goto LAB_0015ef65;
      }
      local_25 = 0xcc;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
    }
  }
  if (*(long *)(lVar1 + 0xc0) == 0) {
    local_2c = CONCAT31(local_2c._1_3_,0x90);
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
    goto LAB_0015e7c4;
  }
  local_2c = CONCAT31(local_2c._1_3_,0x93);
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  local_2c = *(uint *)(lVar1 + 0xbc);
  if ((int)local_2c < -0x20) {
    if ((int)local_2c < -0x8000) {
      local_25 = 0xd2;
LAB_0015eb14:
      local_24 = local_2c >> 0x18 | (local_2c & 0xff0000) >> 8 | (local_2c & 0xff00) << 8 |
                 local_2c << 0x18;
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
    }
    else if ((int)local_2c < -0x80) {
      local_25 = 0xd1;
LAB_0015ea5f:
      local_24 = CONCAT22(local_24._2_2_,(ushort)local_2c << 8 | (ushort)local_2c >> 8);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
    }
    else {
      local_25 = 0xd0;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
    }
  }
  else if ((int)local_2c < 0x80) {
    (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  }
  else {
    if (0xff < (int)local_2c) {
      if ((int)local_2c < 0x10000) {
        local_25 = 0xcd;
        goto LAB_0015ea5f;
      }
      local_25 = 0xce;
      goto LAB_0015eb14;
    }
    local_25 = 0xcc;
    local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
    (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
  }
  msgpack_pack_string(&DAT_001a43d8,*(char **)(lVar1 + 0xc0));
  msgpack_pack_string(&DAT_001a43d8,*(char **)(lVar1 + 200));
LAB_0015e7c4:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_write_copy_mode(uint *param_1,char *param_2)

{
  long in_FS_OFFSET;
  undefined4 local_2c;
  undefined local_25;
  undefined4 local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_2c = CONCAT31(local_2c._1_3_,0x93);
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  local_2c = 7;
  (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
  local_2c = *param_1;
  if ((int)local_2c < -0x20) {
    if ((int)local_2c < -0x8000) {
      local_25 = 0xd2;
LAB_0015f135:
      local_24 = local_2c >> 0x18 | (local_2c & 0xff0000) >> 8 | (local_2c & 0xff00) << 8 |
                 local_2c << 0x18;
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,5);
      goto LAB_0015f147;
    }
    if (-0x81 < (int)local_2c) {
      local_25 = 0xd0;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
      goto LAB_0015f147;
    }
    local_25 = 0xd1;
  }
  else {
    if ((int)local_2c < 0x80) {
      (*DAT_001a43e0)(DAT_001a43d8,&local_2c,1);
      goto LAB_0015f147;
    }
    if ((int)local_2c < 0x100) {
      local_25 = 0xcc;
      local_24 = CONCAT31(local_24._1_3_,(char)local_2c);
      (*DAT_001a43e0)(DAT_001a43d8,&local_25,2);
      goto LAB_0015f147;
    }
    if (0xffff < (int)local_2c) {
      local_25 = 0xce;
      goto LAB_0015f135;
    }
    local_25 = 0xcd;
  }
  local_24 = CONCAT22(local_24._2_2_,(ushort)local_2c << 8 | (ushort)local_2c >> 8);
  (*DAT_001a43e0)(DAT_001a43d8,&local_25,3);
LAB_0015f147:
  msgpack_pack_string(&DAT_001a43d8,param_2);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_write_fin(void)

{
  long in_FS_OFFSET;
  undefined4 local_14;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_14 = CONCAT31(local_14._1_3_,0x91);
  (*DAT_001a43e0)(DAT_001a43d8,&local_14,1);
  local_14 = 8;
  (*DAT_001a43e0)(DAT_001a43d8,&local_14,1);
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_send_reconnection_state
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  uint *puVar2;
  int *piVar3;
  long lVar4;
  long lVar5;
  undefined8 extraout_RDX;
  byte bVar6;
  uint uVar7;
  ulong uVar8;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined8 uVar9;
  undefined in_stack_ffffffffffffffb8;
  undefined4 local_3c;
  undefined local_35;
  undefined4 local_34;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar9 = tmate_encoder_destroy((undefined (*) [16])(param_9 + 0x18));
  tmate_encoder_init(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     (long)(undefined (*) [16])(param_9 + 0x18),0,param_9,param_12,param_13,param_14
                    );
  uVar9 = tmate_write_header();
  if (*(long *)(param_9 + 0xe8) != 0) {
    local_3c = CONCAT31(local_3c._1_3_,0x92);
    (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
    local_3c = 10;
    (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
    uVar9 = msgpack_pack_string(&DAT_001a43d8,*(char **)(param_9 + 0xe8));
  }
  uVar8 = 0;
  if (*(int *)(param_9 + 0xf4) != 0) {
    do {
      uVar7 = (int)uVar8 + 1;
      piVar3 = (int *)(uVar8 * 0x10 + *(long *)(param_9 + 0xf8));
      uVar9 = FUN_0015cac0(*piVar3,*(char ***)(piVar3 + 2));
      uVar8 = (ulong)uVar7;
    } while (uVar7 < *(uint *)(param_9 + 0xf4));
  }
  tmate_write_uname(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  tmate_write_ready();
  tmate_sync_layout();
  local_3c = CONCAT31(local_3c._1_3_,0x92);
  (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
  local_3c = 0xb;
  (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
  uVar9 = 0xffffffff;
  lVar4 = sessions_RB_MINMAX(&sessions,-1);
  if (lVar4 == 0) {
                    // WARNING: Subroutine does not return
    fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"no session?",
           uVar9,extraout_RDX,param_12,param_13,param_14,in_stack_ffffffffffffffb8);
  }
  lVar5 = winlinks_RB_MINMAX((long *)(lVar4 + 0xf8),-1);
  if (lVar5 == 0) {
    bVar6 = 0x90;
  }
  else {
    uVar7 = 0;
    do {
      if (*(long *)(lVar5 + 8) != 0) {
        for (lVar1 = *(long *)(*(long *)(lVar5 + 8) + 0x148); lVar1 != 0;
            lVar1 = *(long *)(lVar1 + 0x1f8)) {
          uVar7 = uVar7 + 1;
        }
      }
      lVar5 = winlinks_RB_NEXT(lVar5);
    } while (lVar5 != 0);
    if (0xf < (int)uVar7) {
      if ((int)uVar7 < 0x10000) {
        local_35 = 0xdc;
        local_34 = CONCAT22(local_34._2_2_,(ushort)uVar7 << 8 | (ushort)uVar7 >> 8);
        (*DAT_001a43e0)(DAT_001a43d8,&local_35,3);
      }
      else {
        local_34 = uVar7 >> 0x18 | (uVar7 & 0xff0000) >> 8 | (uVar7 & 0xff00) << 8 | uVar7 << 0x18;
        local_35 = 0xdd;
        (*DAT_001a43e0)(DAT_001a43d8,&local_35,5);
      }
      goto LAB_0015f409;
    }
    bVar6 = (byte)uVar7 | 0x90;
  }
  local_3c = CONCAT31(local_3c._1_3_,bVar6);
  (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
LAB_0015f409:
  lVar4 = winlinks_RB_MINMAX((long *)(lVar4 + 0xf8),-1);
  do {
    if (lVar4 == 0) {
      if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
        __stack_chk_fail();
      }
      return;
    }
    if (*(long *)(lVar4 + 8) != 0) {
      for (puVar2 = *(uint **)(*(long *)(lVar4 + 8) + 0x148); puVar2 != (uint *)0x0;
          puVar2 = *(uint **)(puVar2 + 0x7e)) {
        local_3c._1_3_ = (undefined3)(local_3c >> 8);
        local_3c = CONCAT31(local_3c._1_3_,0x94);
        (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
        local_3c = *puVar2;
        if ((int)local_3c < -0x20) {
          if ((int)local_3c < -0x8000) {
            local_35 = 0xd2;
LAB_0015f705:
            local_34 = local_3c >> 0x18 | (local_3c & 0xff0000) >> 8 | (local_3c & 0xff00) << 8 |
                       local_3c << 0x18;
            (*DAT_001a43e0)(DAT_001a43d8,&local_35,5);
          }
          else if ((int)local_3c < -0x80) {
            local_35 = 0xd1;
LAB_0015f60d:
            local_34 = CONCAT22(local_34._2_2_,(ushort)local_3c << 8 | (ushort)local_3c >> 8);
            (*DAT_001a43e0)(DAT_001a43d8,&local_35,3);
          }
          else {
            local_35 = 0xd0;
            local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
            (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
          }
        }
        else if ((int)local_3c < 0x80) {
          (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
        }
        else {
          if (0xff < (int)local_3c) {
            if ((int)local_3c < 0x10000) {
              local_35 = 0xcd;
              goto LAB_0015f60d;
            }
            local_35 = 0xce;
            goto LAB_0015f705;
          }
          local_35 = 0xcc;
          local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
          (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
        }
        local_3c = puVar2[0x5e];
        if (local_3c < 0x100) {
          if (local_3c < 0x80) {
            (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
          }
          else {
            local_35 = 0xcc;
            local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
            (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
          }
        }
        else if (local_3c < 0x10000) {
          local_35 = 0xcd;
          local_34 = CONCAT22(local_34._2_2_,(ushort)local_3c << 8 | (ushort)local_3c >> 8);
          (*DAT_001a43e0)(DAT_001a43d8,&local_35,3);
        }
        else {
          local_35 = 0xce;
          local_34 = local_3c >> 0x18 | (local_3c & 0xff0000) >> 8 | (local_3c & 0xff00) << 8 |
                     local_3c << 0x18;
          (*DAT_001a43e0)(DAT_001a43d8,&local_35,5);
        }
        local_3c = CONCAT31(local_3c._1_3_,0x93);
        (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
        local_3c = puVar2[0x56];
        if ((int)local_3c < -0x20) {
          if ((int)local_3c < -0x8000) {
            local_35 = 0xd2;
LAB_0015f945:
            local_34 = local_3c >> 0x18 | (local_3c & 0xff0000) >> 8 | (local_3c & 0xff00) << 8 |
                       local_3c << 0x18;
            (*DAT_001a43e0)(DAT_001a43d8,&local_35,5);
          }
          else if ((int)local_3c < -0x80) {
            local_35 = 0xd1;
LAB_0015f471:
            local_34 = CONCAT22(local_34._2_2_,(ushort)local_3c << 8 | (ushort)local_3c >> 8);
            (*DAT_001a43e0)(DAT_001a43d8,&local_35,3);
          }
          else {
            local_35 = 0xd0;
            local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
            (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
          }
        }
        else if ((int)local_3c < 0x80) {
          (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
        }
        else {
          if (0xff < (int)local_3c) {
            if ((int)local_3c < 0x10000) {
              local_35 = 0xcd;
              goto LAB_0015f471;
            }
            local_35 = 0xce;
            goto LAB_0015f945;
          }
          local_35 = 0xcc;
          local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
          (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
        }
        local_3c = puVar2[0x57];
        if ((int)local_3c < -0x20) {
          if ((int)local_3c < -0x8000) {
            local_35 = 0xd2;
LAB_0015f995:
            local_34 = local_3c >> 0x18 | (local_3c & 0xff0000) >> 8 | (local_3c & 0xff00) << 8 |
                       local_3c << 0x18;
            uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_35,5);
          }
          else if ((int)local_3c < -0x80) {
            local_35 = 0xd1;
LAB_0015f4be:
            local_34 = CONCAT22(local_34._2_2_,(ushort)local_3c << 8 | (ushort)local_3c >> 8);
            uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_35,3);
          }
          else {
            local_35 = 0xd0;
            local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
            uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
          }
        }
        else if ((int)local_3c < 0x80) {
          uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
        }
        else {
          if (0xff < (int)local_3c) {
            if ((int)local_3c < 0x10000) {
              local_35 = 0xcd;
              goto LAB_0015f4be;
            }
            local_35 = 0xce;
            goto LAB_0015f995;
          }
          local_35 = 0xcc;
          local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
          uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
        }
        FUN_0015cbd0(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     *(long *)(puVar2 + 0x54));
        if (*(long *)(puVar2 + 0x72) == 0) {
          (*DAT_001a43e0)(DAT_001a43d8,&DAT_00180304,1);
        }
        else {
          local_3c = CONCAT31(local_3c._1_3_,0x93);
          (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
          local_3c = puVar2[0x70];
          if ((int)local_3c < -0x20) {
            if ((int)local_3c < -0x8000) {
              local_35 = 0xd2;
LAB_0015f815:
              local_34 = local_3c >> 0x18 | (local_3c & 0xff0000) >> 8 | (local_3c & 0xff00) << 8 |
                         local_3c << 0x18;
              (*DAT_001a43e0)(DAT_001a43d8,&local_35,5);
            }
            else if ((int)local_3c < -0x80) {
              local_35 = 0xd1;
LAB_0015f53f:
              local_34 = CONCAT22(local_34._2_2_,(ushort)local_3c << 8 | (ushort)local_3c >> 8);
              (*DAT_001a43e0)(DAT_001a43d8,&local_35,3);
            }
            else {
              local_35 = 0xd0;
              local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
              (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
            }
          }
          else if ((int)local_3c < 0x80) {
            (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
          }
          else {
            if (0xff < (int)local_3c) {
              if ((int)local_3c < 0x10000) {
                local_35 = 0xcd;
                goto LAB_0015f53f;
              }
              local_35 = 0xce;
              goto LAB_0015f815;
            }
            local_35 = 0xcc;
            local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
            (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
          }
          local_3c = puVar2[0x71];
          if ((int)local_3c < -0x20) {
            if ((int)local_3c < -0x8000) {
              local_35 = 0xd2;
LAB_0015f8a5:
              local_34 = local_3c >> 0x18 | (local_3c & 0xff0000) >> 8 | (local_3c & 0xff00) << 8 |
                         local_3c << 0x18;
              uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_35,5);
            }
            else if ((int)local_3c < -0x80) {
              local_35 = 0xd1;
LAB_0015f58d:
              local_34 = CONCAT22(local_34._2_2_,(ushort)local_3c << 8 | (ushort)local_3c >> 8);
              uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_35,3);
            }
            else {
              local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
              local_35 = 0xd0;
              uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
            }
          }
          else if ((int)local_3c < 0x80) {
            uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_3c,1);
          }
          else {
            if (0xff < (int)local_3c) {
              if ((int)local_3c < 0x10000) {
                local_35 = 0xcd;
                goto LAB_0015f58d;
              }
              local_35 = 0xce;
              goto LAB_0015f8a5;
            }
            local_34 = CONCAT31(local_34._1_3_,(char)local_3c);
            local_35 = 0xcc;
            uVar9 = (*DAT_001a43e0)(DAT_001a43d8,&local_35,2);
          }
          FUN_0015cbd0(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       *(long *)(puVar2 + 0x72));
        }
      }
    }
    lVar4 = winlinks_RB_NEXT(lVar4);
  } while( true );
}



void tmate_dispatch_slave_message
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint *param_10,undefined8 param_11,undefined *param_12,ulong param_13,
               size_t param_14)

{
  long lVar1;
  int iVar2;
  ulong uVar3;
  long lVar4;
  undefined8 uVar5;
  void *pvVar6;
  undefined8 *puVar7;
  int *piVar8;
  byte *__ptr;
  char *pcVar9;
  undefined8 extraout_RAX;
  uint *puVar10;
  undefined8 uVar11;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  uint uVar12;
  uint uVar13;
  undefined8 uVar14;
  int **ppiVar15;
  byte *pbVar16;
  byte *pbVar18;
  char **ppcVar19;
  char **ppcVar20;
  void **ppvVar21;
  long in_FS_OFFSET;
  undefined uVar22;
  undefined uVar23;
  byte bVar24;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar25;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  undefined4 extraout_XMM0_Da_10;
  undefined4 extraout_XMM0_Da_11;
  undefined4 extraout_XMM0_Da_12;
  undefined4 extraout_XMM0_Da_13;
  undefined4 extraout_XMM0_Da_14;
  undefined4 extraout_XMM0_Da_15;
  undefined4 extraout_XMM0_Da_16;
  undefined4 extraout_XMM0_Da_17;
  undefined4 extraout_XMM0_Da_18;
  undefined4 extraout_XMM0_Da_19;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 uVar26;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined4 extraout_XMM0_Db_06;
  undefined4 extraout_XMM0_Db_07;
  undefined4 extraout_XMM0_Db_08;
  undefined4 extraout_XMM0_Db_09;
  undefined auVar27 [16];
  undefined in_stack_ffffffffffffff98;
  int *local_50;
  char *local_48;
  long local_40;
  byte *pbVar17;
  
  bVar24 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  puVar10 = param_10;
  uVar3 = unpack_int(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                     (ulong)param_10,param_11,(ulong)param_12,param_13,param_14);
  if ((uint)uVar3 < 8) {
    uVar22 = 0xffe7fccb < (&switchD_0015fb49::switchdataD_00180334)[uVar3 & 0xffffffff];
    uVar23 = (&switchD_0015fb49::switchdataD_00180334)[uVar3 & 0xffffffff] == 0xffe7fccc;
    switch(uVar3 & 0xffffffff) {
    case 0:
      pvVar6 = unpack_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                             param_5,param_6,param_7,param_8,param_10,puVar10,
                             &switchD_0015fb49::switchdataD_00180334,param_12,param_13,param_14);
      tmate_status_message
                (CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_08),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,0x181714,pvVar6,extraout_RDX_03,param_12,param_13,param_14,
                 in_stack_ffffffffffffff98);
      free(pvVar6);
      break;
    case 1:
      uVar5 = unpack_int(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,param_10,(ulong)puVar10,
                         &switchD_0015fb49::switchdataD_00180334,(ulong)param_12,param_13,param_14);
      lVar4 = sessions_RB_MINMAX(&sessions,-1);
      if (((lVar4 != 0) && (lVar1 = *(long *)(*(long *)(lVar4 + 0xe0) + 8), lVar1 != 0)) &&
         (puVar10 = *(uint **)(lVar1 + 0x138), puVar10 != (uint *)0x0)) {
        window_pane_key(extraout_XMM0_Da_09,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        puVar10,0,lVar4,(long)(int)uVar5,0,param_14);
      }
      break;
    case 2:
      uVar5 = unpack_int(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,param_10,(ulong)puVar10,
                         &switchD_0015fb49::switchdataD_00180334,(ulong)param_12,param_13,param_14);
      *(int *)(param_9 + 0xa4) = (int)uVar5;
      uVar5 = unpack_int(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_10),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,param_10,(ulong)puVar10,extraout_RDX_04,
                         (ulong)param_12,param_13,param_14);
      *(int *)(param_9 + 0xa8) = (int)uVar5;
      recalculate_sizes(CONCAT44(extraout_XMM0_Db_05,extraout_XMM0_Da_11),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8);
      break;
    case 3:
      uVar5 = unpack_int(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,param_10,(ulong)puVar10,
                         &switchD_0015fb49::switchdataD_00180334,(ulong)param_12,param_13,param_14);
      pcVar9 = (char *)unpack_string(CONCAT44(extraout_XMM0_Db_06,extraout_XMM0_Da_12),param_2,
                                     param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                                     puVar10,extraout_RDX_05,param_12,param_13,param_14);
      uVar11 = 0;
      ppiVar15 = &local_50;
      ppcVar20 = &local_48;
      iVar2 = cmd_string_parse(CONCAT44(extraout_XMM0_Db_07,extraout_XMM0_Da_13),param_2,param_3,
                               param_4,param_5,param_6,param_7,param_8,pcVar9,ppiVar15,(char *)0x0,
                               (byte *)0x0,(long *)ppcVar20,param_14);
      if (iVar2 == 0) {
        puVar7 = cmdq_new(extraout_XMM0_Da_14,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,0,ppiVar15,extraout_RDX_06,uVar11,ppcVar20,param_14);
        cmdq_run(extraout_XMM0_Da_15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 (int *)puVar7,local_50,(undefined4 *)0x0,uVar11,ppcVar20,param_14);
        cmd_list_free(local_50);
        cmdq_free((int *)puVar7);
        if (cfg_ncauses != 0) {
          uVar13 = 0;
          do {
            uVar3 = (ulong)uVar13;
            uVar13 = uVar13 + 1;
            tmate_failed_cmd((uint)uVar5,*(char **)((long)cfg_causes + uVar3 * 8));
            free(*(void **)((long)cfg_causes + uVar3 * 8));
          } while (uVar13 < cfg_ncauses);
        }
        free(cfg_causes);
        cfg_causes = (void *)0x0;
        cfg_ncauses = 0;
      }
      else {
        tmate_failed_cmd((uint)uVar5,local_48);
        free(local_48);
      }
      free(pcVar9);
      break;
    case 4:
      __ptr = (byte *)unpack_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                    param_4,param_5,param_6,param_7,param_8,param_10,puVar10,
                                    &switchD_0015fb49::switchdataD_00180334,param_12,param_13,
                                    param_14);
      pcVar9 = (char *)unpack_string(CONCAT44(extraout_XMM0_Db_08,extraout_XMM0_Da_16),param_2,
                                     param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                                     puVar10,extraout_RDX_07,param_12,param_13,param_14);
      tmate_set_env(extraout_XMM0_Da_17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    (char *)__ptr,pcVar9,extraout_RDX_08,param_12,param_13,param_14);
      lVar4 = 0x18;
      pbVar17 = __ptr;
      pbVar18 = (byte *)"tmate_reconnection_data";
      do {
        pbVar16 = pbVar17;
        if (lVar4 == 0) break;
        lVar4 = lVar4 + -1;
        pbVar16 = pbVar17 + (ulong)bVar24 * -2 + 1;
        uVar22 = *pbVar17 < *pbVar18;
        uVar23 = *pbVar17 == *pbVar18;
        pbVar17 = pbVar16;
        pbVar18 = pbVar18 + (ulong)bVar24 * -2 + 1;
      } while ((bool)uVar23);
      if ((!(bool)uVar22 && !(bool)uVar23) == (bool)uVar22) {
        free(*(void **)(param_9 + 0xe8));
        xstrdup(CONCAT44(extraout_XMM0_Db_09,extraout_XMM0_Da_18),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,pcVar9,pbVar16,extraout_RDX_09,lVar4,param_13,param_14);
        *(undefined8 *)(param_9 + 0xe8) = extraout_RAX;
      }
      free(__ptr);
      free(pcVar9);
      break;
    case 5:
      *(undefined4 *)(param_9 + 0xa0) = 1;
      signal_waiting_clients
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,"tmate-ready");
      break;
    case 6:
      uVar5 = unpack_int(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,param_10,(ulong)puVar10,
                         &switchD_0015fb49::switchdataD_00180334,(ulong)param_12,param_13,param_14);
      uVar3 = unpack_int(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,param_10,(ulong)puVar10,extraout_RDX,
                         (ulong)param_12,param_13,param_14);
      lVar4 = sessions_RB_MINMAX(&sessions,-1);
      if (lVar4 != 0) {
        if ((int)uVar5 == -1) {
          lVar1 = *(long *)(*(long *)(lVar4 + 0xe0) + 8);
          if (lVar1 == 0) break;
          puVar10 = *(uint **)(lVar1 + 0x138);
          uVar25 = extraout_XMM0_Da_01;
        }
        else {
          puVar10 = (uint *)window_pane_find_by_id((int)uVar5);
          uVar25 = extraout_XMM0_Da_19;
        }
        if (puVar10 != (uint *)0x0) {
          window_pane_key(uVar25,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar10,0,
                          lVar4,uVar3,0,param_14);
        }
      }
      break;
    case 7:
      uVar5 = unpack_int(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,param_10,(ulong)puVar10,
                         &switchD_0015fb49::switchdataD_00180334,(ulong)param_12,param_13,param_14);
      uVar13 = *param_10;
      auVar27 = xmalloc(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (ulong)uVar13 << 3,puVar10,extraout_RDX_00,param_12,param_13,param_14);
      ppcVar20 = auVar27._0_8_;
      uVar25 = extraout_XMM0_Da_03;
      uVar26 = extraout_XMM0_Db_01;
      if (uVar13 != 0) {
        do {
          ppvVar21 = auVar27._0_8_;
          ppcVar19 = (char **)(ppvVar21 + 1);
          pvVar6 = unpack_string(CONCAT44(uVar26,uVar25),param_2,param_3,param_4,param_5,param_6,
                                 param_7,param_8,param_10,puVar10,auVar27._8_8_,param_12,param_13,
                                 param_14);
          auVar27._8_8_ = extraout_RDX_01;
          auVar27._0_8_ = ppcVar19;
          *ppvVar21 = pvVar6;
          uVar25 = extraout_XMM0_Da_04;
          uVar26 = extraout_XMM0_Db_02;
        } while (ppcVar19 != ppcVar20 + (ulong)(uVar13 - 1) + 1);
      }
      ppcVar19 = &local_48;
      uVar11 = 0;
      puVar7 = cmd_parse(CONCAT44(uVar26,uVar25),param_2,param_3,param_4,param_5,param_6,param_7,
                         param_8,uVar13,ppcVar20,(char *)0x0,0,(long *)ppcVar19,param_14);
      if (puVar7 == (undefined8 *)0x0) {
        tmate_failed_cmd((uint)uVar5,local_48);
        free(local_48);
      }
      else {
        uVar14 = 0x18;
        auVar27 = xcalloc(extraout_XMM0_Da_05,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,1,0x18,extraout_RDX_02,uVar11,ppcVar19,param_14);
        piVar8 = auVar27._0_8_;
        *piVar8 = 1;
        puVar7[4] = 0;
        puVar7[5] = piVar8 + 2;
        *(undefined8 **)(piVar8 + 2) = puVar7;
        *(undefined8 **)(piVar8 + 4) = puVar7 + 4;
        puVar7 = cmdq_new(extraout_XMM0_Da_06,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,0,uVar14,auVar27._8_8_,uVar11,ppcVar19,param_14);
        cmdq_run(extraout_XMM0_Da_07,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 (int *)puVar7,piVar8,(undefined4 *)0x0,uVar11,ppcVar19,param_14);
        cmd_list_free(piVar8);
        cmdq_free((int *)puVar7);
        if (cfg_ncauses != 0) {
          uVar12 = 0;
          do {
            uVar3 = (ulong)uVar12;
            uVar12 = uVar12 + 1;
            tmate_failed_cmd((uint)uVar5,*(char **)((long)cfg_causes + uVar3 * 8));
            free(*(void **)((long)cfg_causes + uVar3 * 8));
          } while (uVar12 < cfg_ncauses);
        }
        free(cfg_causes);
        cfg_causes = (void *)0x0;
        cfg_ncauses = 0;
      }
      cmd_free_argv(uVar13,ppcVar20);
    }
  }
  else {
    log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
             "Bad message type: %d",uVar3 & 0xffffffff,param_12,param_13,param_14,
             in_stack_ffffffffffffff98);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void tmate_set_env(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  char *param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  long **pplVar2;
  int iVar3;
  long extraout_RAX;
  long **pplVar4;
  long *extraout_RAX_00;
  long *plVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  char *pcVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined auVar7 [16];
  
  plVar5 = (long *)tmate_env_list;
  pcVar6 = param_10;
  if (tmate_env_list != (long **)0x0) {
    do {
      pcVar6 = param_9;
      iVar3 = strcmp((char *)plVar5[2],param_9);
      if (iVar3 == 0) {
        free((void *)plVar5[3]);
        xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                param_6,param_7,param_8,param_10,pcVar6,extraout_RDX_00,param_12,param_13,param_14);
        plVar5[3] = extraout_RAX;
        return;
      }
      plVar5 = (long *)*plVar5;
      param_11 = extraout_RDX;
      param_1 = extraout_XMM0_Da;
    } while (plVar5 != (long *)0x0);
  }
  auVar7 = xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x20,pcVar6,
                   param_11,param_12,param_13,param_14);
  pplVar4 = auVar7._0_8_;
  uVar1 = xstrdup(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,param_9,pcVar6,auVar7._8_8_,param_12,param_13,param_14);
  pplVar4[2] = extraout_RAX_00;
  plVar5 = (long *)xstrdup(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                           pcVar6,extraout_RDX_01,param_12,param_13,param_14);
  pplVar4[3] = plVar5;
  *pplVar4 = (long *)tmate_env_list;
  pplVar2 = pplVar4;
  if (tmate_env_list != (long **)0x0) {
    ((long *)tmate_env_list)[1] = (long)pplVar4;
    pplVar2 = _DAT_001a43b8;
  }
  _DAT_001a43b8 = pplVar2;
  tmate_env_list = pplVar4;
  pplVar4[1] = (long *)&tmate_env_list;
  return;
}



void tmate_format(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9)

{
  undefined8 unaff_RBX;
  long *plVar1;
  undefined8 in_R8;
  undefined8 in_R9;
  
  plVar1 = tmate_env_list;
  if (tmate_env_list != (long *)0x0) {
    do {
      param_1 = format_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           (char *)plVar1[2],"%s",plVar1[3],in_R8,in_R9,(char)unaff_RBX);
      plVar1 = (long *)*plVar1;
    } while (plVar1 != (long *)0x0);
  }
  return;
}



void __tmate_status_message
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
               undefined8 param_13,size_t param_14)

{
  uint uVar1;
  long lVar2;
  long *plVar3;
  void **ppvVar4;
  uint *puVar5;
  int iVar6;
  char *pcVar7;
  char *pcVar8;
  undefined8 *puVar9;
  time_t tVar10;
  undefined8 extraout_RAX;
  long lVar11;
  code *pcVar12;
  undefined8 extraout_RDX;
  undefined8 uVar13;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  char *pcVar14;
  char **ppcVar15;
  void **__ptr;
  void *pvVar16;
  void *__ptr_00;
  long in_FS_OFFSET;
  undefined4 uVar17;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined8 uVar18;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined in_stack_ffffffffffffff98;
  void *local_60;
  long local_58;
  long local_50;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar17 = xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      (long *)&local_60,param_9,param_10,param_12,param_9,param_14);
  uVar18 = log_emit(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,"%s",local_60,
                    param_12,param_9,param_14,in_stack_ffffffffffffff98);
  pvVar16 = local_60;
  if (clients != 0) {
    uVar13 = extraout_RDX;
    lVar11 = clients;
    do {
      while ((*(byte *)(lVar11 + 0x421) & 8) == 0) {
        pcVar7 = options_get_number(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    global_options,"message-limit",uVar13,param_12,param_9,param_14)
        ;
        ppcVar15 = global_s_options;
        if (*(long *)(lVar11 + 0x598) != 0) {
          ppcVar15 = *(char ***)(*(long *)(lVar11 + 0x598) + 0x108);
        }
        pcVar14 = "tmate-display-time";
        pcVar8 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                    param_4,param_5,param_6,param_7,param_8,ppcVar15,
                                    "tmate-display-time",extraout_RDX_00,param_12,param_9,param_14);
        uVar18 = status_prompt_clear(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,
                                     param_3,param_4,param_5,param_6,param_7,param_8,lVar11,pcVar14,
                                     extraout_RDX_01,param_12,param_9,param_14);
        uVar18 = status_message_clear
                           (uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar11,
                            pcVar14,extraout_RDX_02,param_12,param_9,param_14);
        uVar17 = xasprintf(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long *)(lVar11 + 0x4b0),"[tmate] %s",pvVar16,param_12,param_9,param_14,
                           in_stack_ffffffffffffff98);
        uVar18 = 0x28;
        puVar9 = (undefined8 *)
                 xcalloc(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x28,
                         extraout_RDX_03,param_12,param_9,param_14);
        tVar10 = time((time_t *)0x0);
        pcVar14 = *(char **)(lVar11 + 0x4b0);
        puVar9[2] = tVar10;
        iVar6 = *(int *)(lVar11 + 0x538);
        uVar1 = iVar6 + 1;
        *(uint *)(lVar11 + 0x538) = uVar1;
        *(int *)(puVar9 + 1) = iVar6;
        uVar18 = xstrdup(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,pcVar14,uVar18,(ulong)uVar1,param_12,
                         param_9,param_14);
        puVar9[3] = 0;
        *puVar9 = extraout_RAX;
        plVar3 = *(long **)(lVar11 + 0x548);
        puVar9[4] = plVar3;
        *plVar3 = (long)puVar9;
        ppvVar4 = *(void ***)(lVar11 + 0x540);
        *(undefined8 **)(lVar11 + 0x548) = puVar9 + 3;
        pcVar12 = (code *)param_12;
        while (__ptr = ppvVar4, ppvVar4 != (void **)0x0) {
          while( true ) {
            ppvVar4 = (void **)__ptr[3];
            if (*(uint *)(lVar11 + 0x538) <= (uint)(*(int *)(__ptr + 1) + (int)pcVar7))
            goto LAB_00160290;
            free(*__ptr);
            pvVar16 = __ptr[3];
            puVar9 = (undefined8 *)__ptr[4];
            if (pvVar16 != (void *)0x0) break;
            *(undefined8 **)(lVar11 + 0x548) = puVar9;
            *puVar9 = 0;
            free(__ptr);
            uVar18 = CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_03);
            __ptr = ppvVar4;
            if (ppvVar4 == (void **)0x0) goto LAB_00160290;
          }
          *(undefined8 **)((long)pvVar16 + 0x20) = puVar9;
          *(void **)__ptr[4] = pvVar16;
          free(__ptr);
          uVar18 = CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02);
        }
LAB_00160290:
        iVar6 = (int)pcVar8;
        if (0 < iVar6) {
          lVar2 = lVar11 + 0x4b8;
          local_58 = (long)(iVar6 / 1000);
          local_50 = (long)(iVar6 % 1000) * 1000;
          iVar6 = event_initialized(lVar2);
          if (iVar6 != 0) {
            event_del(lVar2);
          }
          pcVar12 = status_message_callback;
          param_9 = lVar11;
          event_set(lVar2,0xffffffff,0);
          uVar18 = event_add(lVar2,&local_58);
        }
        *(uint *)(lVar11 + 0x420) = *(uint *)(lVar11 + 0x420) | 0x800010;
        uVar18 = recalculate_sizes(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
        lVar11 = *(long *)(lVar11 + 0x5c0);
        param_12 = pcVar12;
        uVar13 = extraout_RDX_04;
        pvVar16 = local_60;
        if (lVar11 == 0) goto LAB_001602b9;
      }
      lVar11 = *(long *)(lVar11 + 0x5c0);
    } while (lVar11 != 0);
  }
LAB_001602b9:
  __ptr_00 = pvVar16;
  if (tmate_foreground == 0) {
    lVar11 = sessions_RB_MINMAX(&sessions,-1);
    if (lVar11 == 0) {
      cfg_add_cause(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,"%s",pvVar16,extraout_RDX_05,param_12,param_9,
                    param_14,in_stack_ffffffffffffff98);
      __ptr_00 = local_60;
    }
    else {
      puVar5 = *(uint **)(*(long *)(*(long *)(lVar11 + 0xe0) + 8) + 0x138);
      __ptr_00 = local_60;
      if (*(undefined1 **)(puVar5 + 0x7a) == window_copy_mode) {
        window_copy_add(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8,puVar5,"%s",pvVar16,param_12,param_9,
                        param_14,in_stack_ffffffffffffff98);
        __ptr_00 = local_60;
      }
    }
  }
  free(__ptr_00);
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_status_message
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined *param_12,
               undefined8 param_13,size_t param_14,undefined param_15)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [8];
  undefined8 local_b0;
  undefined8 local_a8;
  undefined *local_a0;
  undefined8 local_98;
  size_t local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._8_8_ = in_XMM0_Qb;
    local_88._0_8_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_d8 = 8;
  local_c8 = local_b8;
  local_d4 = 0x30;
  local_b0 = param_10;
  local_a8 = param_11;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  __tmate_status_message
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,&local_d8,
             param_11,param_12,param_13,param_14);
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_001604c0(undefined8 param_1,undefined8 param_2,long param_3)

{
  *(undefined *)(param_3 + 0x30) = 0;
  if (*(code **)(param_3 + 0x10) != (code *)0x0) {
                    // WARNING: Could not recover jumptable at 0x001604d9. Too many branches
                    // WARNING: Treating indirect jump as call
    (**(code **)(param_3 + 0x10))(*(undefined8 *)(param_3 + 0x18),*(undefined8 *)(param_3 + 0x20));
    return;
  }
  return;
}



undefined8
FUN_001604f0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9
            ,undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
            undefined8 param_14)

{
  int iVar1;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined4 extraout_XMM0_Da;
  
  iVar1 = evbuffer_add(*(undefined8 *)(param_9 + 0x20));
  if (iVar1 < 0) {
                    // WARNING: Subroutine does not return
    fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "Cannot buffer encoded data",param_10,extraout_RDX,param_12,param_13,param_14,unaff_BL);
  }
  if (*(char *)(param_9 + 0x30) != '\0') {
    return 0;
  }
  event_active(*(undefined8 *)(param_9 + 0x28),2,0);
  *(undefined *)(param_9 + 0x30) = 1;
  return 0;
}



void msgpack_pack_string(undefined8 *param_1,char *param_2)

{
  undefined8 uVar1;
  code *pcVar2;
  size_t sVar3;
  uint uVar4;
  long in_FS_OFFSET;
  byte local_26;
  undefined local_25;
  undefined4 local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  sVar3 = strlen(param_2);
  uVar1 = *param_1;
  pcVar2 = (code *)param_1[1];
  uVar4 = (uint)sVar3;
  if (sVar3 < 0x20) {
    local_26 = (byte)sVar3 | 0xa0;
    (*pcVar2)(uVar1,&local_26,1);
  }
  else if (sVar3 < 0x100) {
    local_25 = 0xd9;
    local_24 = CONCAT31(local_24._1_3_,(byte)sVar3);
    (*pcVar2)(uVar1,&local_25,2);
  }
  else if (sVar3 < 0x10000) {
    local_25 = 0xda;
    local_24 = CONCAT22(local_24._2_2_,(ushort)sVar3 << 8 | (ushort)sVar3 >> 8);
    (*pcVar2)(uVar1,&local_25,3);
  }
  else {
    local_25 = 0xdb;
    local_24 = uVar4 >> 0x18 | (uVar4 & 0xff0000) >> 8 | (uVar4 & 0xff00) << 8 | uVar4 << 0x18;
    (*pcVar2)(uVar1,&local_25,5);
  }
  (*(code *)param_1[1])(*param_1,param_2,sVar3);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void msgpack_pack_boolean(undefined8 *param_1,char param_2)

{
  if (param_2 != '\0') {
                    // WARNING: Could not recover jumptable at 0x0016065f. Too many branches
                    // WARNING: Treating indirect jump as call
    (*(code *)param_1[1])(*param_1,&DAT_00180400,1);
    return;
  }
                    // WARNING: Could not recover jumptable at 0x00160672. Too many branches
                    // WARNING: Treating indirect jump as call
  (*(code *)param_1[1])(*param_1,&DAT_001803ff,1);
  return;
}



void tmate_encoder_init(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  code *pcVar2;
  undefined unaff_BL;
  undefined8 uVar3;
  long lVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined auVar5 [16];
  
  *(long *)param_9 = param_9;
  *(code **)(param_9 + 8) = FUN_001604f0;
  uVar3 = param_10;
  auVar5 = evbuffer_new();
  *(undefined8 *)(param_9 + 0x10) = param_10;
  *(long *)(param_9 + 0x20) = auVar5._0_8_;
  *(undefined8 *)(param_9 + 0x18) = param_11;
  if (auVar5._0_8_ == 0) {
                    // WARNING: Subroutine does not return
    fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "Can\'t allocate buffer",uVar3,auVar5._8_8_,param_12,param_13,param_14,unaff_BL);
  }
  pcVar2 = FUN_001604c0;
  uVar3 = 0xffffffff;
  lVar4 = param_9;
  auVar5 = event_new(tmate_session,0xffffffff,0x12);
  lVar1 = auVar5._0_8_;
  *(long *)(param_9 + 0x28) = lVar1;
  if (lVar1 != 0) {
    event_add(lVar1,0);
    *(undefined *)(param_9 + 0x30) = 0;
    return;
  }
                    // WARNING: Subroutine does not return
  fatalx(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
         "Can\'t allocate event",uVar3,auVar5._8_8_,pcVar2,lVar4,param_14,unaff_BL);
}



void tmate_encoder_destroy(undefined (*param_1) [16])

{
  evbuffer_free(*(undefined8 *)param_1[2]);
  event_del(*(undefined8 *)(param_1[2] + 8));
  event_free(*(undefined8 *)(param_1[2] + 8));
  *(undefined8 *)param_1[3] = 0;
  *param_1 = (undefined  [16])0x0;
  param_1[1] = (undefined  [16])0x0;
  param_1[2] = (undefined  [16])0x0;
  return;
}



void tmate_encoder_set_ready_callback
               (long param_1,undefined *UNRECOVERED_JUMPTABLE,undefined8 param_3)

{
  *(undefined **)(param_1 + 0x10) = UNRECOVERED_JUMPTABLE;
  *(undefined8 *)(param_1 + 0x18) = param_3;
  if (UNRECOVERED_JUMPTABLE != (undefined *)0x0) {
                    // WARNING: Could not recover jumptable at 0x0016076b. Too many branches
                    // WARNING: Treating indirect jump as call
    (*(code *)UNRECOVERED_JUMPTABLE)(param_3,*(undefined8 *)(param_1 + 0x20));
    return;
  }
  return;
}



void tmate_decoder_error(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,undefined8 param_9,undefined8 param_10,undefined8 param_11,
                        undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  undefined in_AL;
  undefined8 extraout_RDX;
  undefined4 uVar1;
  
  uVar1 = tmate_print_stack_trace(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
                    // WARNING: Subroutine does not return
  fatalx(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"Received a bad message",
         param_10,extraout_RDX,param_12,param_13,param_14,in_AL);
}



void init_unpacker(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined4 *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14,int param_15,undefined4 param_16,
                  undefined8 param_17)

{
  if (param_15 == 6) {
    *(undefined8 *)(param_9 + 2) = param_17;
    *param_9 = param_16;
    return;
  }
                    // WARNING: Subroutine does not return
  tmate_decoder_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      param_10,param_11,param_12,param_13,param_14);
}



undefined8
unpack_int(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,uint *param_9,
          ulong param_10,undefined8 param_11,ulong param_12,undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  uint *puVar2;
  undefined8 uVar3;
  uint uVar4;
  
  uVar1 = *param_9;
  if (uVar1 != 0) {
    puVar2 = *(uint **)(param_9 + 2);
    param_10 = (ulong)*puVar2;
    uVar4 = *puVar2 - 2;
    param_12 = (ulong)uVar4;
    if (uVar4 < 2) {
      uVar3 = *(undefined8 *)(puVar2 + 2);
      *(uint **)(param_9 + 2) = puVar2 + 6;
      *param_9 = uVar1 - 1;
      return uVar3;
    }
  }
                    // WARNING: Subroutine does not return
  tmate_decoder_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      param_10,(ulong)uVar1,param_12,param_13,param_14);
}



undefined unpack_bool(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  undefined uVar1;
  uint uVar2;
  int *piVar3;
  
  uVar2 = *param_9;
  if ((uVar2 != 0) && (piVar3 = *(int **)(param_9 + 2), *piVar3 == 1)) {
    uVar1 = *(undefined *)(piVar3 + 2);
    *(int **)(param_9 + 2) = piVar3 + 6;
    *param_9 = uVar2 - 1;
    return uVar1;
  }
                    // WARNING: Subroutine does not return
  tmate_decoder_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      param_10,(ulong)uVar2,param_12,param_13,param_14);
}



void unpack_buffer(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  uint *param_9,undefined8 *param_10,ulong *param_11,undefined8 param_12,
                  ulong param_13,undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  uint *puVar3;
  
  uVar1 = *param_9;
  if (uVar1 != 0) {
    puVar3 = *(uint **)(param_9 + 2);
    uVar2 = *puVar3;
    param_13 = (ulong)uVar2;
    if ((uVar2 == 5) || (uVar2 == 8)) {
      *param_11 = (ulong)puVar3[2];
      *param_10 = *(undefined8 *)(puVar3 + 4);
      *(uint **)(param_9 + 2) = puVar3 + 6;
      *param_9 = uVar1 - 1;
      return;
    }
  }
                    // WARNING: Subroutine does not return
  tmate_decoder_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      param_10,param_11,(ulong)uVar1,param_13,param_14);
}



void * unpack_string(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                    ulong param_13,undefined8 param_14)

{
  void *pvVar1;
  undefined8 extraout_RDX;
  void **ppvVar2;
  long in_FS_OFFSET;
  undefined4 uVar3;
  void *local_20;
  size_t local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  ppvVar2 = &local_20;
  uVar3 = unpack_buffer(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        ppvVar2,&local_18,param_12,param_13,param_14);
  pvVar1 = (void *)xmalloc(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           local_18 + 1,ppvVar2,extraout_RDX,param_12,param_13,param_14);
  pvVar1 = memcpy(pvVar1,local_20,local_18);
  *(undefined *)((long)pvVar1 + local_18) = 0;
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return pvVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void unpack_array(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 uint *param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  int *piVar2;
  
  uVar1 = *param_9;
  if (uVar1 != 0) {
    piVar2 = *(int **)(param_9 + 2);
    uVar1 = piVar2[2];
    param_12 = *(undefined8 *)(piVar2 + 4);
    if (*piVar2 == 6) {
      *(undefined8 *)(param_10 + 2) = param_12;
      *param_10 = uVar1;
      *(long *)(param_9 + 2) = *(long *)(param_9 + 2) + 0x18;
      *param_9 = *param_9 - 1;
      return;
    }
  }
                    // WARNING: Subroutine does not return
  tmate_decoder_error(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      param_10,(ulong)uVar1,param_12,param_13,param_14);
}



void tmate_decoder_init(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  char cVar1;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined8 uVar2;
  undefined4 extraout_XMM0_Da;
  
  uVar2 = 0x400;
  cVar1 = msgpack_unpacker_init();
  if (cVar1 != '\0') {
    *(undefined8 *)(param_9 + 0x40) = param_10;
    *(undefined8 *)(param_9 + 0x48) = param_11;
    return;
  }
                    // WARNING: Subroutine does not return
  fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
         "Cannot initialize the unpacker",uVar2,extraout_RDX,param_12,param_13,param_14,unaff_BL);
}



void tmate_decoder_destroy(undefined (*param_1) [16])

{
  msgpack_unpacker_destroy();
  *param_1 = (undefined  [16])0x0;
  param_1[1] = (undefined  [16])0x0;
  param_1[2] = (undefined  [16])0x0;
  param_1[3] = (undefined  [16])0x0;
  param_1[4] = (undefined  [16])0x0;
  return;
}



void tmate_decoder_get_buffer
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,long *param_10,ulong *param_11,undefined8 param_12,undefined8 param_13,
               undefined8 param_14)

{
  char cVar1;
  ulong uVar2;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined8 uVar3;
  undefined4 extraout_XMM0_Da;
  
  uVar2 = param_9[2];
  if (uVar2 < 0x400) {
    uVar3 = 0x400;
    cVar1 = msgpack_unpacker_expand_buffer();
    if (cVar1 == '\0') {
                    // WARNING: Subroutine does not return
      fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "cannot expand decoder buffer",uVar3,extraout_RDX,param_12,param_13,param_14,unaff_BL);
    }
    uVar2 = param_9[2];
  }
  *param_10 = param_9[1] + *param_9;
  *param_11 = uVar2;
  return;
}



void tmate_decoder_commit
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  undefined *puVar2;
  long lVar3;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined4 local_58 [2];
  undefined8 local_50;
  undefined local_48 [16];
  undefined local_38 [24];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  *(long *)(param_9 + 8) = *(long *)(param_9 + 8) + param_10;
  *(long *)(param_9 + 0x10) = *(long *)(param_9 + 0x10) - param_10;
  local_48 = (undefined  [16])0x0;
  local_38._0_16_ = (undefined  [16])0x0;
  while( true ) {
    puVar2 = local_48;
    lVar3 = param_9;
    iVar1 = msgpack_unpacker_next();
    if (iVar1 == 0) break;
    if (local_48._8_4_ != 6) {
                    // WARNING: Subroutine does not return
      tmate_decoder_error(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          lVar3,puVar2,local_38._8_8_,param_12,param_13,param_14);
    }
    local_50 = local_38._8_8_;
    local_58[0] = local_38._0_4_;
    (**(code **)(param_9 + 0x40))(*(undefined8 *)(param_9 + 0x48),local_58);
  }
  if (local_48._0_8_ != 0) {
    msgpack_zone_free();
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_00160ab0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 int param_9,long param_10,undefined8 param_11,undefined *param_12,char *param_13,
                 size_t param_14)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long *plVar4;
  undefined *puVar5;
  char **ppcVar6;
  code *pcVar7;
  undefined8 extraout_RDX;
  ulong uVar8;
  ulong extraout_RDX_00;
  ulong extraout_RDX_01;
  long **pplVar9;
  char **ppcVar10;
  undefined *puVar11;
  char *pcVar12;
  undefined8 uVar13;
  undefined8 *puVar14;
  int iVar15;
  long **pplVar16;
  long lVar17;
  long in_FS_OFFSET;
  undefined4 uVar18;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined auVar19 [16];
  undefined in_stack_ffffffffffffff18;
  undefined *puVar20;
  undefined8 local_d8;
  undefined8 local_d0;
  undefined local_c8 [136];
  long local_40;
  
  ppcVar10 = (char **)&stack0xffffffffffffff18;
  puVar5 = &stack0xffffffffffffff18;
  puVar11 = &stack0xffffffffffffff18;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar13 = evdns_base_free(DAT_001a43c8,0);
  DAT_001a43c8 = 0;
  if (param_9 == 0) {
    uVar18 = tmate_status_message
                       (uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x180401,
                        param_11,extraout_RDX,param_12,param_13,param_14,in_stack_ffffffffffffff18);
    if (param_10 != 0) {
      iVar15 = 0;
      lVar3 = param_10;
      do {
        lVar3 = *(long *)(lVar3 + 0x28);
        lVar17 = (long)iVar15;
        iVar15 = iVar15 + 1;
      } while (lVar3 != 0);
      uVar8 = (long)iVar15 * 8 + 0xf;
      ppcVar6 = (char **)(local_c8 + (-0x20 - (uVar8 & 0xfffffffffffff000)));
      puVar20 = &stack0xffffffffffffff18;
      while (ppcVar10 != ppcVar6) {
        puVar5 = puVar20 + -0x1000;
        *(undefined8 *)(puVar20 + -8) = *(undefined8 *)(puVar20 + -8);
        ppcVar10 = (char **)(puVar20 + -0x1000);
        puVar20 = puVar20 + -0x1000;
      }
      uVar8 = (ulong)((uint)uVar8 & 0xff0);
      lVar2 = -uVar8;
      pplVar9 = (long **)(puVar5 + lVar2);
      puVar11 = puVar5 + lVar2;
      pplVar16 = (long **)(puVar5 + lVar2);
      lVar3 = param_10;
      puVar20 = puVar5 + lVar2;
      if (uVar8 != 0) {
        *(undefined8 *)(puVar5 + -8) = *(undefined8 *)(puVar5 + -8);
        pplVar16 = (long **)(puVar5 + lVar2);
        puVar20 = puVar5 + lVar2;
      }
      do {
        if (*(int *)(lVar3 + 4) == 2) {
          lVar1 = *(long *)(lVar3 + 0x18);
          ppcVar6 = (char **)0x80;
          *(undefined8 *)(puVar5 + lVar2 + -8) = 0x160c24;
          auVar19 = evutil_inet_ntop(2,lVar1 + 4,local_c8);
          uVar18 = extraout_XMM0_Da_00;
        }
        else {
          auVar19._8_8_ = 0;
          auVar19._0_8_ = uVar8;
          auVar19 = auVar19 << 0x40;
          if (*(int *)(lVar3 + 4) == 10) {
            lVar1 = *(long *)(lVar3 + 0x18);
            ppcVar6 = (char **)0x80;
            *(undefined8 *)(puVar5 + lVar2 + -8) = 0x160cce;
            auVar19 = evutil_inet_ntop(10,lVar1 + 8,local_c8);
            uVar18 = extraout_XMM0_Da_03;
          }
        }
        pcVar12 = auVar19._0_8_;
        *(undefined8 *)(puVar5 + lVar2 + -8) = 0x160beb;
        plVar4 = tmate_ssh_client_alloc
                           (uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x1a43c0,
                            pcVar12,auVar19._8_8_,ppcVar6,param_13,param_14);
        uVar13 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
        lVar3 = *(long *)(lVar3 + 0x28);
        *pplVar16 = plVar4;
        uVar8 = extraout_RDX_00;
        pplVar16 = pplVar16 + 1;
        uVar18 = extraout_XMM0_Da;
      } while (lVar3 != 0);
      do {
        plVar4 = *pplVar9;
        pplVar9 = pplVar9 + 1;
        *(undefined8 *)(puVar5 + lVar2 + -8) = 0x160cfc;
        uVar13 = connect_ssh_client(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    plVar4,pcVar12,uVar8,ppcVar6,param_13,param_14);
        uVar8 = extraout_RDX_01;
      } while (pplVar9 != (long **)(puVar20 + lVar17 * 8 + 8));
    }
    *(undefined8 *)(puVar11 + -8) = 0x160d09;
    evutil_freeaddrinfo(param_10);
  }
  else if (_DAT_001a43d0 == 0) {
    puVar14 = &tmate_session;
    uVar13 = 0xffffffff;
    pcVar7 = FUN_00160e50;
    local_d8 = 2;
    local_d0 = 0;
    auVar19 = event_new(tmate_session,0xffffffff,0);
    _DAT_001a43d0 = auVar19._0_8_;
    if (_DAT_001a43d0 == 0) {
                    // WARNING: Subroutine does not return
      fatalx(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "out of memory",uVar13,auVar19._8_8_,pcVar7,puVar14,param_14,in_stack_ffffffffffffff18)
      ;
    }
    event_add(_DAT_001a43d0,&local_d8);
    puVar5 = (undefined *)evutil_gai_strerror(param_9);
    tmate_status_message
              (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,0x1804e8,param_11,2,puVar5,puVar14,param_14,
               in_stack_ffffffffffffff18);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00160d50(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  long lVar1;
  char *pcVar2;
  undefined8 in_RCX;
  undefined8 uVar3;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined auVar4 [16];
  undefined in_stack_ffffffffffffffa8;
  undefined uVar5;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (DAT_001a43c8 != 0) {
                    // WARNING: Subroutine does not return
    __assert_fail("!tmate_session.ev_dnsbase","tmate-session.c",0x5e,"lookup_and_connect");
  }
  uVar3 = 1;
  auVar4 = evdns_base_new(tmate_session);
  DAT_001a43c8 = auVar4._0_8_;
  if (DAT_001a43c8 != 0) {
    uVar5 = 0x20;
    pcVar2 = options_get_string(0,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                global_options,"tmate-server-host",auVar4._8_8_,in_RCX,in_R8,in_R9);
    log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,
             "Looking up %s...",pcVar2,in_RCX,in_R8,in_R9,uVar5);
    evdns_getaddrinfo(DAT_001a43c8,pcVar2,0,&stack0xffffffffffffffa8,FUN_00160ab0,pcVar2);
    if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
                    // WARNING: Subroutine does not return
  fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
         "Cannot initialize the DNS lookup service",uVar3,auVar4._8_8_,in_RCX,in_R8,in_R9,
         in_stack_ffffffffffffffa8);
}



void FUN_00160e50(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,long param_11)

{
  undefined8 uVar1;
  
  if (*(long *)(param_11 + 0x10) != 0) {
    uVar1 = event_free();
    *(undefined8 *)(param_11 + 0x10) = 0;
    FUN_00160d50(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
    return;
  }
                    // WARNING: Subroutine does not return
  __assert_fail("session->ev_dns_retry","tmate-session.c",0x1b,"on_dns_retry");
}



void FUN_00160ea0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined8 param_9,undefined8 param_10,long param_11,char **param_12,char *param_13
                 ,size_t param_14)

{
  long *plVar1;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  char *pcVar2;
  undefined4 extraout_XMM0_Da;
  undefined8 uVar3;
  undefined4 extraout_XMM0_Db;
  
  if (*(long *)(param_11 + 0xd8) == 0) {
                    // WARNING: Subroutine does not return
    __assert_fail("session->ev_connection_retry","tmate-session.c",0xd5,"on_reconnect_retry");
  }
  uVar3 = event_free();
  pcVar2 = *(char **)(param_11 + 0xe0);
  *(undefined8 *)(param_11 + 0xd8) = 0;
  if (pcVar2 != (char *)0x0) {
    plVar1 = tmate_ssh_client_alloc
                       ((int)uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                        pcVar2,extraout_RDX,param_12,param_13,param_14);
    connect_ssh_client(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,plVar1,pcVar2,extraout_RDX_00,param_12,param_13,
                       param_14);
    free(*(void **)(param_11 + 0xe0));
    *(undefined8 *)(param_11 + 0xe0) = 0;
    return;
  }
  FUN_00160d50(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void tmate_session_init(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       undefined8 param_9)

{
  long lVar1;
  undefined8 *puVar2;
  undefined8 in_R9;
  
  puVar2 = &DAT_001a43c8;
  for (lVar1 = 0x1f; lVar1 != 0; lVar1 = lVar1 + -1) {
    *puVar2 = 0;
    puVar2 = puVar2 + 1;
  }
  tmate_session = param_9;
  tmate_encoder_init(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x1a43d8,0,
                     &tmate_session,0,param_9,in_R9);
  _DAT_001a4464 = 0xffffffffffffffff;
  _DAT_001a4470 = 0;
  _DAT_001a4478 = &DAT_001a4470;
  tmate_write_header();
  return;
}



void tmate_session_start(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,undefined8 param_9,undefined8 param_10,undefined8 param_11,char *param_12,
                        undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int iVar2;
  char *pcVar3;
  char *__ptr;
  FILE *__stream;
  uint *__ptr_00;
  long lVar4;
  int *piVar5;
  undefined8 extraout_RDX;
  undefined8 uVar6;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  char *pcVar7;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined8 uVar9;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined4 extraout_XMM0_Db_05;
  undefined in_stack_ffffffffffffffc8;
  undefined7 uStack_37;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if (tmate_foreground == 0) {
    uVar9 = cfg_add_cause(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"%s",
                          "Tip: if you wish to use tmate only for remote access, run: tmate -F",
                          param_11,param_12,param_13,param_14,in_stack_ffffffffffffffc8);
    uVar9 = cfg_add_cause(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"%s",
                          "To see the following messages again, run in a tmate session: tmate show-messages"
                          ,extraout_RDX_01,param_12,param_13,param_14,in_stack_ffffffffffffffc8);
    uVar9 = cfg_add_cause(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"%s",
                          "Press <q> or <ctrl-c> to continue",extraout_RDX_02,param_12,param_13,
                          param_14,in_stack_ffffffffffffffc8);
    uVar9 = cfg_add_cause(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"%s",
                          "---------------------------------------------------------------------",
                          extraout_RDX_03,param_12,param_13,param_14,in_stack_ffffffffffffffc8);
    uVar6 = extraout_RDX_04;
  }
  else {
    uVar8 = tmate_set_val(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          "foreground",&DAT_00180483,param_11,param_12,param_13,param_14);
    uVar9 = log_emit(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
                     "To connect to the session locally, run: tmate -S %s attach",socket_path,
                     param_12,param_13,param_14,in_stack_ffffffffffffffc8);
    uVar6 = extraout_RDX;
  }
  pcVar7 = "tmate-authorized-keys";
  pcVar3 = options_get_string(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              global_options,"tmate-authorized-keys",uVar6,param_12,param_13,
                              param_14);
  uVar8 = extraout_XMM0_Da;
  uVar10 = extraout_XMM0_Db;
  if (*pcVar3 != '\0') {
    uVar8 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                    param_6,param_7,param_8,pcVar3,pcVar7,extraout_RDX_00,param_12,param_13,param_14
                   );
    log_emit(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
             "Using %s for access control",__ptr,param_12,param_13,param_14,
             in_stack_ffffffffffffffc8);
    pcVar3 = __ptr;
    if ((*__ptr == '~') && (__ptr[1] == '/')) {
      lVar4 = find_home();
      if (lVar4 != 0) {
        param_12 = __ptr + 1;
        xasprintf(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,(long *)&stack0xffffffffffffffc8,&DAT_0017fd51,lVar4,
                  param_12,param_13,param_14,in_stack_ffffffffffffffc8);
        free(__ptr);
        pcVar3 = (char *)CONCAT71(uStack_37,in_stack_ffffffffffffffc8);
      }
    }
    __stream = fopen(pcVar3,"r");
    if (__stream == (FILE *)0x0) {
      piVar5 = __errno_location();
      pcVar7 = strerror(*piVar5);
      cfg_add_cause(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_04),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,"%s: %s",pcVar3,pcVar7,param_12,param_13,
                    param_14,in_stack_ffffffffffffffc8);
      free(pcVar3);
      uVar8 = extraout_XMM0_Da_05;
      uVar10 = extraout_XMM0_Db_05;
    }
    else {
      while( true ) {
        uVar6 = 0;
        uVar9 = 0;
        __ptr_00 = fparseln(__stream,(long *)&stack0xffffffffffffffc8,(long *)0x0,(char *)0x0,0);
        if (__ptr_00 == (uint *)0x0) break;
        if (CONCAT71(uStack_37,in_stack_ffffffffffffffc8) != 0) {
          tmate_set_val(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                        param_5,param_6,param_7,param_8,"authorized_keys",__ptr_00,extraout_RDX_05,
                        uVar9,uVar6,param_14);
          free(__ptr_00);
        }
      }
      iVar2 = ferror(__stream);
      if (iVar2 != 0) {
        piVar5 = __errno_location();
        pcVar7 = strerror(*piVar5);
        cfg_add_cause(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_03),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,"%s: %s",pcVar3,pcVar7,uVar9,uVar6,param_14,
                      in_stack_ffffffffffffffc8);
      }
      fclose(__stream);
      free(pcVar3);
      uVar8 = extraout_XMM0_Da_01;
      uVar10 = extraout_XMM0_Db_01;
    }
  }
  tmate_write_uname(CONCAT44(uVar10,uVar8),param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  uVar9 = tmate_write_ready();
  FUN_00160d50(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8);
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tmate_reconnect_session
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 *param_9,long param_10)

{
  long lVar1;
  long lVar2;
  code *pcVar3;
  undefined8 extraout_RDX;
  undefined8 uVar4;
  undefined *puVar5;
  undefined8 *puVar6;
  size_t in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined auVar7 [16];
  undefined uVar8;
  
  puVar5 = &stack0xffffffffffffffc8;
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  uVar8 = 2;
  if (param_9[0x1b] == 0) {
    pcVar3 = FUN_00160ea0;
    uVar4 = 0xffffffff;
    puVar6 = param_9;
    auVar7 = event_new(*param_9,0xffffffff,0);
    lVar2 = auVar7._0_8_;
    param_9[0x1b] = lVar2;
    if (lVar2 == 0) {
                    // WARNING: Subroutine does not return
      fatalx(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             "out of memory",uVar4,auVar7._8_8_,pcVar3,puVar6,in_R9,uVar8);
    }
    uVar4 = event_add(lVar2);
    if ((param_10 == 0) || (tmate_foreground != 0)) {
      tmate_status_message
                (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x1804d4,puVar5,
                 extraout_RDX,pcVar3,puVar6,in_R9,uVar8);
    }
    else {
      tmate_status_message
                (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x1804bf,param_10,
                 extraout_RDX,pcVar3,puVar6,in_R9,uVar8);
    }
    *(undefined *)(param_9 + 0x1a) = 1;
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void usage(void)

{
  __fprintf_chk(stderr,1,
                "Usage: %s [options] [tmux-command [flags]]\n\nBasic options:\n -n <name>    specify the session token instead of getting a random one\n -r <name>    same, but for the read-only token\n -k <key>     specify an api-key, necessary for using named sessions on tmate.io\n -F           set the foreground mode, useful for setting remote access\n -f <path>    set the config file path\n -S <path>    set the socket path, useful to issue commands to a running tmate instance\n -v           set verbosity (can be repeated)\n -V           print version\n"
                ,program_invocation_short_name);
                    // WARNING: Subroutine does not return
  exit(1);
}



bool areshell(char *param_1)

{
  int iVar1;
  char *pcVar2;
  
  pcVar2 = strrchr(param_1,0x2f);
  if (pcVar2 != (char *)0x0) {
    param_1 = pcVar2 + 1;
  }
  iVar1 = strcmp(param_1,program_invocation_short_name + (*program_invocation_short_name == '-'));
  return iVar1 == 0;
}



bool checkshell(char *param_1)

{
  bool bVar1;
  int iVar2;
  undefined7 extraout_var;
  
  if (param_1 == (char *)0x0) {
    return false;
  }
  if (*param_1 == '/') {
    bVar1 = areshell(param_1);
    if ((int)CONCAT71(extraout_var,bVar1) == 0) {
      iVar2 = access(param_1,1);
      return iVar2 == 0;
    }
  }
  return false;
}



char * getshell(void)

{
  bool bVar1;
  __uid_t __uid;
  char *pcVar2;
  undefined7 extraout_var;
  passwd *ppVar3;
  undefined7 extraout_var_00;
  
  pcVar2 = getenv("SHELL");
  bVar1 = checkshell(pcVar2);
  if ((int)CONCAT71(extraout_var,bVar1) != 0) {
    return pcVar2;
  }
  __uid = getuid();
  ppVar3 = getpwuid(__uid);
  if ((ppVar3 != (passwd *)0x0) &&
     (bVar1 = checkshell(ppVar3->pw_shell), (int)CONCAT71(extraout_var_00,bVar1) != 0)) {
    return ppVar3->pw_shell;
  }
  return "/bin/sh";
}



void setblocking(int param_1,int param_2)

{
  uint uVar1;
  ulong uVar2;
  
  uVar1 = fcntl(param_1,3);
  if (uVar1 != 0xffffffff) {
    uVar2 = (ulong)uVar1 | 0x800;
    if (param_2 != 0) {
      uVar2 = (ulong)(uVar1 & 0xfffff7ff);
    }
    fcntl(param_1,4,uVar2);
    return;
  }
  return;
}



void find_home(void)

{
  __uid_t __uid;
  passwd *ppVar1;
  
  if (DAT_001a0bd8 != (char *)0x0) {
    return;
  }
  DAT_001a0bd8 = getenv("HOME");
  if ((DAT_001a0bd8 == (char *)0x0) || (*DAT_001a0bd8 == '\0')) {
    __uid = getuid();
    ppVar1 = getpwuid(__uid);
    if (ppVar1 == (passwd *)0x0) {
      DAT_001a0bd8 = (char *)0x0;
    }
    else {
      DAT_001a0bd8 = ppVar1->pw_dir;
    }
  }
  return;
}



void tmate_load_cli_options
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  char *local_28;
  char *local_20;
  void *local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if (DAT_001a0bf8 != (void *)0x0) {
    local_28 = "set-option";
    local_20 = "tmate-api-key";
    local_18 = DAT_001a0bf8;
    run_headless_command
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,(long)&local_28,1,
               (undefined *)0x0,in_R8,in_R9);
    free(DAT_001a0bf8);
    DAT_001a0bf8 = (void *)0x0;
    param_1 = extraout_XMM0_Da;
  }
  if (DAT_001a0bf0 != (void *)0x0) {
    local_28 = "set-option";
    local_20 = "tmate-session-name";
    local_18 = DAT_001a0bf0;
    run_headless_command
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,(long)&local_28,1,
               (undefined *)0x0,in_R8,in_R9);
    free(DAT_001a0bf0);
    DAT_001a0bf0 = (void *)0x0;
    param_1 = extraout_XMM0_Da_00;
  }
  if (DAT_001a0be8 != (void *)0x0) {
    local_28 = "set-option";
    local_20 = "tmate-session-name-ro";
    local_18 = DAT_001a0be8;
    run_headless_command
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,(long)&local_28,1,
               (undefined *)0x0,in_R8,in_R9);
    free(DAT_001a0be8);
    DAT_001a0be8 = (void *)0x0;
    param_1 = extraout_XMM0_Da_01;
  }
  if (DAT_001a0be0 != (void *)0x0) {
    local_28 = "set-option";
    local_20 = "tmate-authorized-keys";
    local_18 = DAT_001a0be0;
    run_headless_command
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,(long)&local_28,1,
               (undefined *)0x0,in_R8,in_R9);
    free(DAT_001a0be0);
    DAT_001a0be0 = (void *)0x0;
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int tty_acs_cmp(byte *param_1,byte *param_2)

{
  return (uint)*param_1 - (uint)*param_2;
}



long tty_acs_get(long param_1,byte param_2)

{
  ulong uVar1;
  ulong uVar2;
  ulong uVar3;
  
  if ((param_1 != 0) && ((*(byte *)(param_1 + 0xb0) & 8) == 0)) {
    if (*(char *)(*(long *)(param_1 + 0x48) + 0xc + (ulong)param_2 * 2) == '\0') {
      return 0;
    }
    return *(long *)(param_1 + 0x48) + 0xc + (ulong)param_2 * 2;
  }
  uVar2 = 0;
  uVar1 = 0x20;
  do {
    uVar3 = uVar1;
    if (uVar3 <= uVar2) {
      return 0;
    }
    while( true ) {
      uVar1 = uVar3 + uVar2 >> 1;
      if ((int)((uint)param_2 - (uint)(byte)tty_acs_table[uVar1 * 0x10]) < 0) break;
      if ((uint)param_2 == (uint)(byte)tty_acs_table[uVar1 * 0x10]) {
        return *(long *)(tty_acs_table + uVar1 * 0x10 + 8);
      }
      uVar2 = uVar1 + 1;
      if (uVar3 <= uVar2) {
        return 0;
      }
    }
  } while( true );
}



void tty_keys_add1(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  byte **param_9,byte *param_10,ulong param_11,ulong param_12,undefined8 param_13,
                  undefined8 param_14)

{
  byte bVar1;
  byte bVar2;
  char cVar3;
  byte *pbVar4;
  ulong uVar5;
  bool bVar6;
  undefined4 extraout_XMM0_Da;
  
  uVar5 = param_11;
LAB_00161758:
  do {
    pbVar4 = *param_9;
    if (pbVar4 == (byte *)0x0) goto LAB_0016177a;
    while( true ) {
      bVar1 = *pbVar4;
      uVar5 = (ulong)bVar1;
      bVar2 = *param_10;
      param_12 = (ulong)bVar2;
      bVar6 = SBORROW1(bVar2,bVar1);
      cVar3 = bVar2 - bVar1;
      if (bVar2 == bVar1) break;
      while( true ) {
        if (bVar6 == cVar3 < '\0') {
          if ((char)uVar5 < (char)param_12) {
            param_9 = (byte **)(pbVar4 + 0x18);
          }
          goto LAB_00161758;
        }
        param_9 = (byte **)(pbVar4 + 0x10);
        pbVar4 = *param_9;
        if (pbVar4 != (byte *)0x0) break;
LAB_0016177a:
        pbVar4 = (byte *)xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,
                                 0x28,uVar5,param_12,param_13,param_14);
        *param_9 = pbVar4;
        bVar1 = *param_10;
        uVar5 = (ulong)bVar1;
        *(undefined8 *)(pbVar4 + 8) = 0xfffe00000000;
        *pbVar4 = bVar1;
        bVar2 = *param_10;
        param_12 = (ulong)bVar2;
        bVar6 = SBORROW1(bVar2,bVar1);
        cVar3 = bVar2 - bVar1;
        param_1 = extraout_XMM0_Da;
        if (cVar3 == '\0') goto LAB_001617a0;
      }
    }
LAB_001617a0:
    if (param_10[1] == 0) {
      *(ulong *)(pbVar4 + 8) = param_11;
      return;
    }
    param_10 = param_10 + 1;
    param_9 = (byte **)(pbVar4 + 0x20);
  } while( true );
}



void tty_keys_free1(void *param_1)

{
  if (*(void **)((long)param_1 + 0x20) != (void *)0x0) {
    tty_keys_free1(*(void **)((long)param_1 + 0x20));
  }
  if (*(void **)((long)param_1 + 0x10) != (void *)0x0) {
    tty_keys_free1(*(void **)((long)param_1 + 0x10));
  }
  if (*(void **)((long)param_1 + 0x18) != (void *)0x0) {
    tty_keys_free1(*(void **)((long)param_1 + 0x18));
  }
  free(param_1);
  return;
}



void tty_keys_free(long param_1)

{
  tty_keys_free1(*(void **)(param_1 + 400));
  return;
}



char * tty_keys_find1(char *param_1,char *param_2,long param_3,long *param_4)

{
  char *pcVar1;
  char cVar2;
  char cVar3;
  char cVar4;
  bool bVar5;
  
  if (param_1 != (char *)0x0) {
    cVar3 = *param_1;
    cVar4 = *param_2;
LAB_00161840:
    cVar2 = cVar4 - cVar3;
    bVar5 = cVar4 == cVar3;
    while (!bVar5) {
      if (SBORROW1(cVar4,cVar3) == cVar2 < '\0') {
        if (bVar5 || SBORROW1(cVar4,cVar3) != cVar2 < '\0') goto LAB_00161840;
        param_1 = *(char **)(param_1 + 0x18);
      }
      else {
        param_1 = *(char **)(param_1 + 0x10);
      }
      if (param_1 == (char *)0x0) {
        return (char *)0x0;
      }
      cVar3 = *param_1;
      cVar2 = cVar4 - cVar3;
      bVar5 = cVar2 == '\0';
    }
    *param_4 = *param_4 + 1;
    param_3 = param_3 + -1;
    if (param_3 == 0) {
      return param_1;
    }
    pcVar1 = *(char **)(param_1 + 0x20);
    if (pcVar1 != (char *)0x0) {
      cVar4 = param_2[1];
      cVar3 = *pcVar1;
      param_2 = param_2 + 1;
      param_1 = pcVar1;
      goto LAB_00161840;
    }
    if (*(long *)(param_1 + 8) != 0xfffe00000000) {
      return param_1;
    }
  }
  return (char *)0x0;
}



void tty_keys_find(long param_1,char *param_2,long param_3,long *param_4)

{
  *param_4 = 0;
  tty_keys_find1(*(char **)(param_1 + 400),param_2,param_3,param_4);
  return;
}



void tty_keys_add(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,byte *param_10,ulong param_11,undefined8 param_12,undefined8 param_13,
                 undefined8 param_14)

{
  long lVar1;
  char *pcVar2;
  size_t sVar3;
  char *pcVar4;
  ulong uVar5;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  undefined uVar7;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar2 = key_string_lookup_key
                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11);
  sVar3 = strlen((char *)param_10);
  uVar7 = 0;
  pcVar4 = tty_keys_find1(*(char **)(param_9 + 400),(char *)param_10,sVar3,
                          (long *)&stack0xffffffffffffffc8);
  if (pcVar4 == (char *)0x0) {
    uVar5 = param_11;
    uVar6 = log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                     "new key %s: 0x%llx (%s)",param_10,param_11,pcVar2,param_14,uVar7);
    tty_keys_add1(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  (byte **)(param_9 + 400),param_10,param_11,uVar5,pcVar2,param_14);
  }
  else {
    log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
             "replacing key %s: 0x%llx (%s)",param_10,param_11,pcVar2,param_14,uVar7);
    *(ulong *)(pcVar4 + 8) = param_11;
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tty_keys_build(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  ulong *puVar2;
  byte *pbVar3;
  ulong uVar4;
  undefined4 extraout_XMM0_Da;
  
  if (*(void **)(param_9 + 400) != (void *)0x0) {
    param_1 = tty_keys_free1(*(void **)(param_9 + 400));
    param_11 = extraout_RDX;
  }
  bVar1 = 0x1b;
  *(undefined8 *)(param_9 + 400) = 0;
  pbVar3 = &DAT_0017b488;
  puVar2 = (ulong *)(tty_default_raw_keys + 8);
  while( true ) {
    if (bVar1 != 0) {
      param_1 = tty_keys_add(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                             ,pbVar3,*puVar2,param_12,param_13,param_14);
      param_11 = extraout_RDX_00;
    }
    if (puVar2 == (ulong *)(tty_default_raw_keys + 0x5b8)) break;
    pbVar3 = (byte *)puVar2[1];
    bVar1 = *pbVar3;
    puVar2 = puVar2 + 2;
  }
  uVar4 = 0x45;
  puVar2 = (ulong *)(tty_default_code_keys + 8);
  while( true ) {
    pbVar3 = tty_term_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             *(long *)(param_9 + 0x48),uVar4,param_11,param_12,param_13,param_14);
    param_11 = extraout_RDX_01;
    param_1 = extraout_XMM0_Da;
    if (*pbVar3 != 0) {
      param_1 = tty_keys_add(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,param_9,pbVar3,*puVar2,param_12,param_13,param_14);
      param_11 = extraout_RDX_02;
    }
    if (puVar2 == (ulong *)(tty_default_code_keys + 0x858)) break;
    uVar4 = (ulong)*(uint *)(puVar2 + 1);
    puVar2 = puVar2 + 2;
  }
  return;
}



undefined8
tty_keys_mouse(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              long param_9,char *param_10,ulong param_11,ulong *param_12,undefined8 param_13,
              undefined8 param_14)

{
  byte bVar1;
  byte bVar2;
  byte bVar3;
  undefined4 uVar4;
  ulong uVar5;
  ulong uVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  bool bVar12;
  undefined1 in_stack_ffffffffffffffb8;
  
  *param_12 = 0;
  if (*param_10 != '\x1b') {
    return 0xffffffff;
  }
  if (param_11 != 1) {
    if (param_10[1] != '[') {
      return 0xffffffff;
    }
    if (param_11 != 2) {
      if (param_10[2] == 'M') {
        if (param_11 < 4) {
          *param_12 = 3;
          return 1;
        }
        *param_12 = 4;
        bVar1 = param_10[3];
        if (param_11 == 4) {
          return 1;
        }
        *param_12 = 5;
        bVar2 = param_10[4];
        if (param_11 == 5) {
          return 1;
        }
        *param_12 = 6;
        bVar3 = param_10[5];
        log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "mouse input: %.*s",6,param_10,param_13,param_14,in_stack_ffffffffffffffb8);
        if (bVar1 < 0x20) {
          return 0xffffffff;
        }
        uVar7 = bVar1 - 0x20;
        iVar9 = 0x100 - (uint)bVar2;
        if (0x20 < bVar2) {
          iVar9 = bVar2 - 0x21;
        }
        if (bVar3 < 0x21) {
          uVar10 = 0x20;
          iVar11 = 0x100 - (uint)bVar3;
          uVar8 = 0;
        }
        else {
          uVar10 = 0x20;
          uVar8 = 0;
          iVar11 = bVar3 - 0x21;
        }
      }
      else {
        if (param_10[2] != '<') {
          return 0xffffffff;
        }
        *param_12 = 3;
        if (param_11 < 4) {
          return 1;
        }
        uVar8 = 0;
        uVar5 = 4;
        while( true ) {
          *param_12 = uVar5;
          bVar1 = param_10[uVar5 - 1];
          if (bVar1 == 0x3b) break;
          if (9 < (byte)(bVar1 - 0x30)) {
            return 0xffffffff;
          }
          uVar8 = (bVar1 - 0x30) + uVar8 * 10;
          bVar12 = param_11 == uVar5;
          uVar5 = uVar5 + 1;
          if (bVar12) {
            return 1;
          }
        }
        if (param_11 <= uVar5) {
          return 1;
        }
        iVar9 = 0;
        while( true ) {
          uVar6 = uVar5 + 1;
          *param_12 = uVar6;
          bVar1 = param_10[uVar5];
          if (bVar1 == 0x3b) break;
          if (9 < (byte)(bVar1 - 0x30)) {
            return 0xffffffff;
          }
          iVar9 = (bVar1 - 0x30) + iVar9 * 10;
          uVar5 = uVar6;
          if (param_11 == uVar6) {
            return 1;
          }
        }
        if (param_11 <= uVar6) {
          return 1;
        }
        iVar11 = 0;
        uVar5 = uVar5 + 2;
        while( true ) {
          *param_12 = uVar5;
          bVar1 = param_10[uVar5 - 1];
          uVar10 = (uint)bVar1;
          if ((bVar1 & 0xdf) == 0x4d) break;
          if (9 < (byte)(bVar1 - 0x30)) {
            return 0xffffffff;
          }
          iVar11 = (uVar10 - 0x30) + iVar11 * 10;
          bVar12 = param_11 == uVar5;
          uVar5 = uVar5 + 1;
          if (bVar12) {
            return 1;
          }
        }
        log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                 "mouse input (SGR): %.*s",uVar5 & 0xffffffff,param_10,uVar5,param_14,
                 in_stack_ffffffffffffffb8);
        if (iVar9 == 0) {
          return 0xffffffff;
        }
        if (iVar11 == 0) {
          return 0xffffffff;
        }
        iVar9 = iVar9 + -1;
        iVar11 = iVar11 + -1;
        uVar7 = uVar8;
        if (bVar1 == 0x6d) {
          uVar7 = uVar8 | 3;
          if ((uVar8 & 0x40) != 0) {
            return 0xfffffffe;
          }
          uVar10 = 0x6d;
        }
      }
      uVar4 = *(undefined4 *)(param_9 + 0xcc);
      *(uint *)(param_9 + 0xf0) = uVar10;
      *(int *)(param_9 + 0xcc) = iVar9;
      *(undefined4 *)(param_9 + 0xd8) = uVar4;
      *(uint *)(param_9 + 0xf4) = uVar8;
      *(undefined4 *)(param_9 + 0xdc) = *(undefined4 *)(param_9 + 0xd0);
      *(int *)(param_9 + 0xd0) = iVar11;
      *(undefined4 *)(param_9 + 0xe0) = *(undefined4 *)(param_9 + 0xd4);
      *(uint *)(param_9 + 0xd4) = uVar7;
      return 0;
    }
  }
  return 1;
}



undefined8
tty_keys_next(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             long *param_9)

{
  long *plVar1;
  byte bVar2;
  bool bVar3;
  char *pcVar4;
  char cVar5;
  int iVar6;
  char **ppcVar7;
  char *pcVar8;
  undefined8 uVar9;
  char *pcVar10;
  ulong uVar11;
  undefined7 extraout_var;
  char **ppcVar12;
  undefined8 extraout_RDX;
  ulong extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong extraout_RDX_02;
  uint uVar13;
  char **ppcVar14;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar15;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffff78;
  undefined8 local_80;
  char *local_78;
  char *local_70;
  long local_68;
  long local_60;
  undefined8 local_4c;
  byte local_42;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  ppcVar7 = (char **)evbuffer_pullup(*(undefined8 *)(param_9[0xb] + 0x110),0xffffffffffffffff);
  pcVar8 = (char *)evbuffer_get_length(*(undefined8 *)(param_9[0xb] + 0x110));
  if (pcVar8 == (char *)0x0) {
LAB_00161de4:
    local_80 = 0;
    goto LAB_00161de6;
  }
  ppcVar14 = ppcVar7;
  uVar15 = log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                    "keys are %zu (%.*s)",pcVar8,(ulong)pcVar8 & 0xffffffff,ppcVar7,in_R9,
                    in_stack_ffffffffffffff78);
  uVar9 = tty_keys_mouse(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)param_9,(char *)ppcVar7,(ulong)pcVar8,(ulong *)&local_78,ppcVar14,
                         in_R9);
  iVar6 = (int)uVar9;
  if (iVar6 == 0) {
    uVar11 = (ulong)local_78 & 0xffffffff;
    local_70 = (char *)0x100000000002;
    uVar15 = extraout_XMM0_Da_00;
    goto LAB_00161fd3;
  }
  uVar15 = extraout_XMM0_Da_00;
  pcVar4 = local_78;
  if (iVar6 == 1) {
LAB_00161e8c:
    local_78 = pcVar4;
    plVar1 = param_9 + 0x22;
    ppcVar12 = ppcVar7;
    uVar9 = log_emit(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                     "partial key %.*s",(ulong)pcVar8 & 0xffffffff,ppcVar7,ppcVar14,in_R9,
                     in_stack_ffffffffffffff78);
    if ((*(byte *)(param_9 + 0x16) & 4) == 0) {
      pcVar8 = options_get_number(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  global_options,"escape-time",extraout_RDX,ppcVar12,ppcVar14,in_R9)
      ;
      local_68 = (long)((int)pcVar8 / 1000);
      local_60 = (long)((int)pcVar8 % 1000) * 1000;
      iVar6 = event_initialized(plVar1);
      if (iVar6 != 0) {
        event_del(plVar1);
      }
      event_set(plVar1,0xffffffff,0,tty_keys_callback,param_9);
      event_add(plVar1,&local_68);
      *(uint *)(param_9 + 0x16) = *(uint *)(param_9 + 0x16) | 4;
      goto LAB_00161de4;
    }
    iVar6 = event_initialized(plVar1);
    if ((iVar6 == 0) || (iVar6 = event_pending(plVar1,1,0), iVar6 != 0)) goto LAB_00161de4;
    bVar3 = true;
    uVar11 = extraout_RDX_00;
    uVar15 = extraout_XMM0_Da_02;
LAB_00161ee5:
    bVar2 = *(byte *)ppcVar7;
    uVar13 = (uint)bVar2;
    if (((char *)0x1 < pcVar8) && (uVar13 = (uint)bVar2, bVar2 == 0x1b)) {
      if (*(char *)((long)ppcVar7 + 1) != '\x1b') {
        uVar11 = 2;
        local_78 = (char *)0x2;
        local_70 = (char *)((long)*(char *)((long)ppcVar7 + 1) | 0x200000000000);
        goto LAB_00161fd3;
      }
      local_78 = (char *)0x0;
      ppcVar12 = &local_78;
      pcVar10 = tty_keys_find1((char *)param_9[0x32],(char *)((long)ppcVar7 + 1),(long)(pcVar8 + -1)
                               ,(long *)&local_78);
      uVar11 = extraout_RDX_02;
      uVar15 = extraout_XMM0_Da_08;
      if (pcVar10 == (char *)0x0) {
LAB_00162290:
        uVar13 = (uint)*(byte *)ppcVar7;
        goto LAB_00161efa;
      }
      uVar11 = *(ulong *)(pcVar10 + 0x20);
      if (bVar3) {
        if (uVar11 != 0) goto LAB_00162290;
        goto LAB_001622a9;
      }
      pcVar4 = local_78 + 1;
      if (uVar11 == 0) goto LAB_001622a9;
      goto LAB_00161e8c;
    }
LAB_00161efa:
    uVar9 = utf8_open(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_4c,
                      uVar13,uVar11,ppcVar12,ppcVar14,in_R9);
    if ((int)uVar9 != 0) {
      local_70 = (char *)(ulong)*(byte *)ppcVar7;
      uVar11 = 1;
      local_78 = (char *)0x1;
      uVar15 = extraout_XMM0_Da_03;
      if ((*(byte *)((long)param_9 + 0x73) != 0) &&
         (local_70 == (char *)(ulong)*(byte *)((long)param_9 + 0x73))) {
        local_70 = (char *)0x10000000002d;
      }
      goto LAB_00161fd3;
    }
    local_78 = (char *)(ulong)local_42;
    if (pcVar8 < local_78) {
      uVar15 = extraout_XMM0_Da_03;
      pcVar4 = local_78;
      if (bVar3) goto LAB_00161f84;
      goto LAB_00161e8c;
    }
    pcVar8 = (char *)0x1;
    uVar15 = extraout_XMM0_Da_03;
    if (local_78 < (char *)0x2) goto LAB_00162237;
    do {
      uVar11 = utf8_append(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (char *)&local_4c,(ulong)*(byte *)((long)ppcVar7 + (long)pcVar8),local_78
                           ,pcVar8,ppcVar14,in_R9);
      pcVar8 = (char *)(ulong)((int)pcVar8 + 1);
      uVar15 = extraout_XMM0_Da_04;
    } while (pcVar8 < local_78);
    if ((int)uVar11 == 1) {
LAB_00162237:
      cVar5 = utf8_combine((char *)&local_4c,(wchar_t *)&local_68);
      uVar15 = extraout_XMM0_Da_07;
      if ((int)CONCAT71(extraout_var,cVar5) == 1) {
        local_70 = (char *)(long)(int)local_68;
        uVar15 = log_emit(extraout_XMM0_Da_07,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,3,"UTF-8 key %.*s %#llx",(ulong)local_78 & 0xffffffff,ppcVar7,
                          local_70,in_R9,in_stack_ffffffffffffff78);
        uVar11 = (ulong)local_78 & 0xffffffff;
        goto LAB_00161fd3;
      }
    }
  }
  else {
    if (iVar6 != -2) {
      local_78 = (char *)0x0;
      pcVar10 = tty_keys_find1((char *)param_9[0x32],(char *)ppcVar7,(long)pcVar8,(long *)&local_78)
      ;
      if (pcVar10 == (char *)0x0) {
        ppcVar12 = &local_70;
        iVar6 = xterm_keys_find((long)ppcVar7,(ulong)pcVar8,(long *)&local_78,(ulong *)ppcVar12);
        uVar15 = extraout_XMM0_Da_06;
        if (iVar6 == 0) goto LAB_0016222e;
        bVar3 = false;
        uVar11 = extraout_RDX_01;
        pcVar4 = local_78;
        if (iVar6 != 1) goto LAB_00161ee5;
      }
      else {
        uVar15 = extraout_XMM0_Da_01;
        pcVar4 = local_78;
        if (*(long *)(pcVar10 + 0x20) == 0) {
          local_70 = *(char **)(pcVar10 + 8);
          uVar11 = (ulong)local_78 & 0xffffffff;
          goto LAB_00161fd3;
        }
      }
      goto LAB_00161e8c;
    }
    local_70 = (char *)0x100000000002;
  }
LAB_00161f84:
  log_emit(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"discard key %.*s %#llx"
           ,local_78,ppcVar7,local_70,in_R9,in_stack_ffffffffffffff78);
  evbuffer_drain(*(undefined8 *)(param_9[0xb] + 0x110),local_78);
  local_80 = 1;
  goto LAB_00161de6;
LAB_001622a9:
  local_78 = local_78 + 1;
  local_70 = *(char **)(pcVar10 + 8);
  if (local_70 == (char *)0xfffe00000000) {
LAB_0016222e:
    uVar11 = (ulong)local_78 & 0xffffffff;
  }
  else {
    local_70 = (char *)((ulong)local_70 | 0x200000000000);
    uVar11 = (ulong)local_78 & 0xffffffff;
  }
LAB_00161fd3:
  pcVar8 = local_70;
  log_emit(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "complete key %.*s %#llx",uVar11,ppcVar7,local_70,in_R9,in_stack_ffffffffffffff78);
  evbuffer_drain(*(undefined8 *)(param_9[0xb] + 0x110),local_78);
  iVar6 = event_initialized(param_9 + 0x22);
  uVar9 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_05);
  if (iVar6 != 0) {
    uVar9 = event_del(param_9 + 0x22);
  }
  *(uint *)(param_9 + 0x16) = *(uint *)(param_9 + 0x16) & 0xfffffffb;
  if (local_70 == (char *)0x100000000001) {
    *(uint *)(*param_9 + 0x420) = *(uint *)(*param_9 + 0x420) & 0xffff7fff;
    local_80 = 1;
  }
  else if (local_70 == (char *)0x100000000000) {
    *(uint *)(*param_9 + 0x420) = *(uint *)(*param_9 + 0x420) | 0x8000;
    local_80 = 1;
  }
  else {
    local_80 = 1;
    if (local_70 != (char *)0xfffe00000000) {
      local_80 = 1;
      server_client_handle_key
                (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_9,local_70,
                 0xfffe00000000,(char *)ppcVar7,(ulong)pcVar8,in_R9);
    }
  }
LAB_00161de6:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return local_80;
}



void tty_keys_callback(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      undefined8 param_9,undefined8 param_10,long *param_11)

{
  long lVar1;
  undefined8 extraout_XMM0_Qa;
  
  if ((*(byte *)(param_11 + 0x16) & 4) == 0) {
    return;
  }
  do {
    lVar1 = tty_keys_next(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11);
    param_1 = extraout_XMM0_Qa;
  } while (lVar1 != 0);
  return;
}



undefined8 tty_term_ncodes(void)

{
  return 0xca;
}



void tty_term_strip(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   char *param_9,undefined8 param_10,undefined8 param_11,char *param_12,
                   undefined8 param_13,undefined8 param_14)

{
  char cVar1;
  char *pcVar2;
  undefined8 extraout_RDX;
  long lVar3;
  long lVar4;
  char *pcVar5;
  undefined8 extraout_XMM0_Qa;
  
  pcVar5 = (char *)0x24;
  pcVar2 = strchr(param_9,0x24);
  if (pcVar2 == (char *)0x0) {
    xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,pcVar5,
            extraout_RDX,param_12,param_13,param_14);
    return;
  }
  lVar3 = 0;
  cVar1 = *param_9;
  while (lVar4 = lVar3, cVar1 != '\0') {
    if (cVar1 == '$') {
      param_12 = (char *)(ulong)(byte)param_9[1];
      if (param_9[1] == 0x3c) {
        while( true ) {
          pcVar5 = param_9 + 1;
          if ((char)param_12 == '\0') break;
          if ((char)param_12 == '>') {
            cVar1 = param_9[2];
            param_9 = param_9 + 2;
            goto LAB_001623a0;
          }
          param_12 = (char *)(ulong)(byte)param_9[2];
          param_9 = pcVar5;
        }
        cVar1 = *pcVar5;
        param_9 = pcVar5;
        goto LAB_001623a0;
      }
      (&DAT_001a0d20)[lVar3] = 0x24;
    }
    else {
LAB_001623a0:
      (&DAT_001a0d20)[lVar3] = cVar1;
    }
    lVar4 = lVar3 + 1;
    if (lVar3 + 1 == 0x1fff) break;
    lVar3 = lVar3 + 1;
    pcVar2 = param_9 + 1;
    param_9 = param_9 + 1;
    param_12 = param_9;
    cVar1 = *pcVar2;
  }
  (&DAT_001a0d20)[lVar4] = 0;
  xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_001a0d20,
          pcVar5,lVar4,param_12,param_13,param_14);
  return;
}



void tty_term_override(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      char **param_9,char *param_10,undefined8 param_11,char **param_12,
                      byte *param_13,int *param_14)

{
  byte *pbVar1;
  bool bVar2;
  int iVar3;
  char *__ptr;
  char *pcVar4;
  char **__s;
  byte *__ptr_00;
  byte *__ptr_01;
  undefined8 extraout_RAX;
  longlong lVar5;
  size_t sVar6;
  byte *extraout_RAX_00;
  byte *extraout_RAX_01;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  byte *pbVar7;
  undefined8 uVar8;
  byte *pbVar9;
  int *piVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  char *local_58;
  char *local_50;
  char *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  __ptr = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                          param_10,param_11,param_12,param_13,param_14);
  local_58 = __ptr;
  while (pcVar4 = strsep(&local_58,","), pcVar4 != (char *)0x0) {
    local_50 = pcVar4;
    pcVar4 = strsep(&local_50,":");
    if (((pcVar4 != (char *)0x0) && (local_50 != (char *)0x0)) &&
       (iVar3 = fnmatch(pcVar4,*param_9,0), iVar3 == 0)) {
      while (__s = (char **)strsep(&local_50,":"), __s != (char **)0x0) {
        if (*(char *)__s != '\0') {
          uVar8 = 0x3d;
          __ptr_00 = (byte *)strchr((char *)__s,0x3d);
          if (__ptr_00 == (byte *)0x0) {
            sVar6 = strlen((char *)__s);
            pcVar4 = (char *)((long)__s + (sVar6 - 1));
            if (*pcVar4 == '@') {
              *pcVar4 = '\0';
              bVar2 = true;
              pbVar7 = &DAT_00180d78;
              uVar11 = extraout_XMM0_Da_03;
            }
            else {
              bVar2 = false;
              uVar11 = xstrdup(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,
                               param_4,param_5,param_6,param_7,param_8,"",uVar8,extraout_RDX_02,
                               param_12,param_13,param_14);
              pbVar7 = extraout_RAX_00;
              __ptr_00 = extraout_RAX_00;
            }
          }
          else {
            *__ptr_00 = 0;
            pbVar1 = __ptr_00 + 1;
            bVar2 = false;
            xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                    param_6,param_7,param_8,(char *)pbVar1,uVar8,extraout_RDX,param_12,param_13,
                    param_14);
            pbVar9 = pbVar1;
            iVar3 = strunvis(__ptr_01,(char *)pbVar1);
            pbVar7 = __ptr_01;
            uVar11 = extraout_XMM0_Da_00;
            __ptr_00 = __ptr_01;
            if (iVar3 == -1) {
              free(__ptr_01);
              uVar11 = xstrdup(CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04),param_2,param_3,
                               param_4,param_5,param_6,param_7,param_8,(char *)pbVar1,pbVar9,
                               extraout_RDX_03,param_12,param_13,param_14);
              pbVar7 = extraout_RAX_01;
              __ptr_00 = extraout_RAX_01;
            }
          }
          param_12 = __s;
          log_emit(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
                   "%s override: %s %s",*param_9,__s,pbVar7,param_14,(char)__ptr_00);
          pcVar4 = "AX";
          piVar10 = &tty_term_codes;
          while( true ) {
            iVar3 = strcmp((char *)__s,pcVar4);
            if (iVar3 == 0) {
              param_14 = (int *)((long)(piVar10 + -0x67178) + (long)param_9[0x42]);
              if (bVar2) {
                *param_14 = 0;
              }
              else {
                iVar3 = *piVar10;
                if (iVar3 == 2) {
                  param_12 = &local_48;
                  lVar5 = strtonum((char *)__ptr_00,0,0x7fffffff,&local_48);
                  if (local_48 == (char *)0x0) {
                    param_14[2] = (int)lVar5;
                    *param_14 = 2;
                  }
                }
                else if (iVar3 == 3) {
                  param_14[2] = 1;
                  *param_14 = 3;
                }
                else if (iVar3 == 1) {
                  uVar8 = extraout_RDX_00;
                  uVar11 = extraout_XMM0_Da_01;
                  uVar12 = extraout_XMM0_Db_00;
                  if (*param_14 == 1) {
                    free(*(void **)(param_14 + 2));
                    uVar8 = extraout_RDX_01;
                    uVar11 = extraout_XMM0_Da_02;
                    uVar12 = extraout_XMM0_Db_01;
                  }
                  xstrdup(CONCAT44(uVar12,uVar11),param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,(char *)__ptr_00,pcVar4,uVar8,param_12,pbVar7,param_14);
                  *(undefined8 *)(param_14 + 2) = extraout_RAX;
                  *param_14 = 1;
                }
              }
            }
            if (piVar10 == (int *)&UNK_0019d270) break;
            pcVar4 = *(char **)(piVar10 + 6);
            piVar10 = piVar10 + 4;
          }
          free(__ptr_00);
          param_13 = pbVar7;
        }
      }
    }
  }
  free(__ptr);
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tty_term_free(void **param_1)

{
  int *piVar1;
  void **ppvVar2;
  long lVar3;
  void *pvVar4;
  
  ppvVar2 = param_1 + 1;
  *(int *)ppvVar2 = *(int *)ppvVar2 + -1;
  if (*(int *)ppvVar2 != 0) {
    return;
  }
  pvVar4 = param_1[0x44];
  ppvVar2 = (void **)param_1[0x45];
  if (pvVar4 != (void *)0x0) {
    *(void ***)((long)pvVar4 + 0x228) = ppvVar2;
    ppvVar2 = (void **)param_1[0x45];
  }
  *ppvVar2 = pvVar4;
  pvVar4 = param_1[0x42];
  lVar3 = 0;
  do {
    while (piVar1 = (int *)((long)pvVar4 + lVar3), *piVar1 == 1) {
      lVar3 = lVar3 + 0x10;
      free(*(void **)(piVar1 + 2));
      pvVar4 = param_1[0x42];
      if (lVar3 == 0xca0) goto LAB_00162793;
    }
    lVar3 = lVar3 + 0x10;
  } while (lVar3 != 0xca0);
LAB_00162793:
  free(pvVar4);
  free(*param_1);
  free(param_1);
  return;
}



char ** tty_term_find(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     char *param_9,uint param_10,long *param_11,char **param_12,byte *param_13,
                     int *param_14)

{
  int iVar1;
  char **ppcVar2;
  char *extraout_RAX;
  char *pcVar3;
  ulong uVar4;
  undefined8 extraout_RAX_00;
  undefined8 extraout_RAX_01;
  ulong uVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined4 *extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  byte *pbVar6;
  undefined8 extraout_RDX_05;
  undefined4 *puVar7;
  undefined4 *extraout_RDX_06;
  undefined **ppuVar8;
  undefined4 *puVar9;
  char *pcVar10;
  ulong uVar11;
  undefined8 *puVar12;
  ulong uVar13;
  char **ppcVar14;
  long in_FS_OFFSET;
  byte bVar15;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined8 uVar17;
  undefined4 extraout_XMM0_Db_03;
  undefined4 extraout_XMM0_Db_04;
  undefined auVar18 [16];
  undefined auVar19 [16];
  undefined in_stack_ffffffffffffffb8;
  int local_44;
  long local_40;
  
  bVar15 = 0;
  uVar11 = (ulong)param_10;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  ppcVar14 = tty_terms;
  if (tty_terms != (char **)0x0) {
    do {
      iVar1 = strcmp(*ppcVar14,param_9);
      if (iVar1 == 0) {
        *(int *)(ppcVar14 + 1) = *(int *)(ppcVar14 + 1) + 1;
        goto LAB_00162813;
      }
      ppcVar14 = (char **)ppcVar14[0x44];
      param_1 = extraout_XMM0_Da;
    } while (ppcVar14 != (char **)0x0);
  }
  pcVar10 = "new term: %s";
  uVar16 = log_emit(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,"new term: %s"
                    ,param_9,param_12,param_13,param_14,in_stack_ffffffffffffffb8);
  auVar18 = xmalloc(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x230,pcVar10,
                    extraout_RDX,param_12,param_13,param_14);
  ppcVar2 = auVar18._0_8_;
  uVar16 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                   param_6,param_7,param_8,param_9,pcVar10,auVar18._8_8_,param_12,param_13,param_14)
  ;
  *(undefined4 *)(ppcVar2 + 1) = 1;
  *ppcVar2 = extraout_RAX;
  *(undefined4 *)(ppcVar2 + 0x43) = 0;
  pcVar10 = (char *)xcalloc(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0xca,0x10
                            ,extraout_RDX_00,param_12,param_13,param_14);
  ppcVar2[0x42] = pcVar10;
  ppcVar2[0x44] = (char *)tty_terms;
  if (tty_terms != (char **)0x0) {
    tty_terms[0x45] = (char *)(ppcVar2 + 0x44);
  }
  ppcVar2[0x45] = (char *)&tty_terms;
  tty_terms = ppcVar2;
  iVar1 = setupterm(param_9,uVar11,&local_44);
  uVar17 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01);
  if (iVar1 == 0) {
    iVar1 = 3;
    puVar7 = &tty_term_codes;
    ppuVar8 = &PTR_s_AX_0019c5e8;
    while( true ) {
      puVar9 = (undefined4 *)((long)(ppuVar8 + -0x338bd) + (long)ppcVar2[0x42]);
      *puVar9 = 0;
      if (iVar1 == 2) {
        iVar1 = tigetnum(*ppuVar8);
        puVar7 = (undefined4 *)(ulong)(iVar1 + 2U);
        uVar17 = CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04);
        if (1 < iVar1 + 2U) {
          *puVar9 = 2;
          puVar9[2] = iVar1;
          uVar17 = CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_04);
        }
      }
      else if (iVar1 == 3) {
        iVar1 = tigetflag(*ppuVar8);
        puVar7 = extraout_RDX_02;
        uVar17 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02);
        if (iVar1 != -1) {
          *puVar9 = 3;
          puVar9[2] = iVar1;
          uVar17 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_02);
        }
      }
      else if (iVar1 == 1) {
        auVar19 = tigetstr(*ppuVar8);
        puVar7 = auVar19._8_8_;
        uVar17 = CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_05);
        if (auVar19._0_8_ + -1 < (char *)0xfffffffffffffffe) {
          *puVar9 = 1;
          uVar17 = tty_term_strip(CONCAT44(extraout_XMM0_Db_04,extraout_XMM0_Da_05),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,auVar19._0_8_,uVar11,
                                  puVar7,(char *)param_12,param_13,param_14);
          *(undefined8 *)(puVar9 + 2) = extraout_RAX_01;
          puVar7 = extraout_RDX_06;
        }
      }
      if (ppuVar8 == (undefined **)&UNK_0019d278) break;
      iVar1 = *(int *)(ppuVar8 + 1);
      ppuVar8 = ppuVar8 + 2;
    }
    pcVar3 = options_get_string(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                global_options,"terminal-overrides",puVar7,param_12,param_13,
                                param_14);
    tty_term_override(CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_03),param_2,param_3,param_4,
                      param_5,param_6,param_7,param_8,ppcVar2,pcVar3,extraout_RDX_03,param_12,
                      param_13,param_14);
    uVar17 = del_curterm(cur_term);
    uVar16 = (undefined4)uVar17;
    pcVar10 = ppcVar2[0x42];
    if (*(int *)(pcVar10 + 0x70) == 0) {
      xasprintf(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                "terminal does not support clear",extraout_RDX_04,param_12,param_13,param_14,
                in_stack_ffffffffffffffb8);
    }
    else {
      uVar11 = (ulong)*(uint *)(pcVar10 + 0x130);
      if (*(uint *)(pcVar10 + 0x130) == 0) {
        xasprintf(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                  "terminal does not support cup",extraout_RDX_04,param_12,param_13,uVar11,
                  in_stack_ffffffffffffffb8);
      }
      else {
        uVar13 = (ulong)*(uint *)(pcVar10 + 0x100);
        if ((*(uint *)(pcVar10 + 0x100) != 0) || (*(int *)(pcVar10 + 0xf0) != 0)) {
          if (*(int *)(pcVar10 + 0x90) != 0) {
            if (*(int *)(pcVar10 + 0x90) != 2) {
                    // WARNING: Subroutine does not return
              fatalx(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "not a number: %d",9,extraout_RDX_04,param_12,uVar13,uVar11,
                     in_stack_ffffffffffffffb8);
            }
            if (*(int *)(pcVar10 + 0x98) == 0x100) {
              *(uint *)(ppcVar2 + 0x43) = *(uint *)(ppcVar2 + 0x43) | 1;
            }
          }
          if (*(int *)(pcVar10 + 0xc80) == 0) {
LAB_00162a06:
            *(uint *)(ppcVar2 + 0x43) = *(uint *)(ppcVar2 + 0x43) | 2;
          }
          else {
            if (*(int *)(pcVar10 + 0xc80) != 3) {
                    // WARNING: Subroutine does not return
              fatalx(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"not a flag: %d"
                     ,200,extraout_RDX_04,param_12,uVar13,uVar11,in_stack_ffffffffffffffb8);
            }
            pcVar3 = (char *)(ulong)*(uint *)(pcVar10 + 0xc88);
            if (*(uint *)(pcVar10 + 0xc88) == 0) goto LAB_00162a06;
          }
          *(undefined8 *)((long)ppcVar2 + 0xc) = 0;
          *(undefined8 *)((long)ppcVar2 + 0x204) = 0;
          puVar12 = (undefined8 *)((long)ppcVar2 + 0x14U & 0xfffffffffffffff8);
          uVar5 = (ulong)((auVar18._0_4_ - (int)puVar12) + 0x20cU >> 3);
          for (; uVar5 != 0; uVar5 = uVar5 - 1) {
            *puVar12 = 0;
            puVar12 = puVar12 + (ulong)bVar15 * -2 + 1;
          }
          if (*(int *)(pcVar10 + 0x10) == 0) {
            pbVar6 = &DAT_00181ab8;
            uVar4 = 0x61;
            uVar5 = 0x23;
            while ((char)uVar5 != '\0') {
              pbVar6 = pbVar6 + 2;
              *(char *)((long)ppcVar2 + uVar4 * 2 + 0xc) = (char)uVar5;
              bVar15 = *pbVar6;
              if (bVar15 == 0) break;
LAB_00162a70:
              uVar4 = (ulong)bVar15;
              uVar5 = (ulong)pbVar6[1];
            }
          }
          else {
            if (*(int *)(pcVar10 + 0x10) != 1) {
                    // WARNING: Subroutine does not return
              fatalx(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     "not a string: %d",1,extraout_RDX_04,0,uVar13,uVar11,in_stack_ffffffffffffffb8)
              ;
            }
            pbVar6 = *(byte **)(pcVar10 + 0x18);
            bVar15 = *pbVar6;
            if (bVar15 != 0) goto LAB_00162a70;
            uVar5 = 0;
          }
          ppcVar14 = ppcVar2;
          if (*(int *)(pcVar10 + 0xc90) != 0) {
            if (*(int *)(pcVar10 + 0xc90) != 3) {
                    // WARNING: Subroutine does not return
              fatalx(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"not a flag: %d"
                     ,0xc9,pbVar6,uVar5,uVar13,uVar11,in_stack_ffffffffffffffb8);
            }
            uVar5 = (ulong)*(uint *)(pcVar10 + 0xc98);
            if (((*(uint *)(pcVar10 + 0xc98) != 0) && (*(uint *)(pcVar10 + 0xc60) == 0)) &&
               (*(int *)(pcVar10 + 0x210) == 0)) {
              uVar17 = xstrdup(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               "\x1b]0;",pcVar3,(ulong)*(uint *)(pcVar10 + 0xc60),uVar5,uVar13,
                               uVar11);
              *(undefined4 *)(pcVar10 + 0xc60) = 1;
              *(undefined8 *)(pcVar10 + 0xc68) = extraout_RAX_00;
              pcVar10 = ppcVar2[0x42];
              uVar17 = xstrdup(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"\a",
                               pcVar3,extraout_RDX_05,uVar5,uVar13,uVar11);
              *(undefined4 *)(pcVar10 + 0x210) = 1;
              *(undefined8 *)(pcVar10 + 0x218) = uVar17;
            }
          }
          goto LAB_00162813;
        }
        xasprintf(uVar17,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
                  "terminal does not support cud1 or cud",extraout_RDX_04,param_12,uVar13,uVar11,
                  in_stack_ffffffffffffffb8);
      }
    }
  }
  else if (local_44 == 0) {
    xasprintf(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,param_11,"missing or unsuitable terminal: %s",param_9,param_12
              ,param_13,param_14,in_stack_ffffffffffffffb8);
  }
  else if (local_44 == 1) {
    xasprintf(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,param_11,"can\'t use hardcopy terminal: %s",param_9,param_12,
              param_13,param_14,in_stack_ffffffffffffffb8);
  }
  else if (local_44 == -1) {
    xasprintf(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,param_11,"can\'t find terminfo database",extraout_RDX_01,
              param_12,param_13,param_14,in_stack_ffffffffffffffb8);
  }
  else {
    xasprintf(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
              param_6,param_7,param_8,param_11,"unknown error",extraout_RDX_01,param_12,param_13,
              param_14,in_stack_ffffffffffffffb8);
  }
  ppcVar14 = (char **)0x0;
  tty_term_free(ppcVar2);
LAB_00162813:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return ppcVar14;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



bool tty_term_has(long param_1,uint param_2)

{
  return *(int *)((ulong)param_2 * 0x10 + *(long *)(param_1 + 0x210)) != 0;
}



undefined1 *
tty_term_string(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  uint *puVar2;
  
  puVar2 = (uint *)((param_10 & 0xffffffff) * 0x10 + *(long *)(param_9 + 0x210));
  uVar1 = *puVar2;
  if (uVar1 == 0) {
    return &DAT_001816c0;
  }
  if (uVar1 == 1) {
    return *(undefined1 **)(puVar2 + 2);
  }
                    // WARNING: Subroutine does not return
  fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"not a string: %d",param_10
         ,(ulong)uVar1,param_12,param_13,param_14,(char)puVar2);
}



void tty_term_string1(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,ulong param_10,ulong param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  undefined1 *puVar1;
  
  puVar1 = tty_term_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           param_10,param_11,param_12,param_13,param_14);
  tparm(puVar1,param_11 & 0xffffffff,0,0,0,0,0,0,0,0);
  return;
}



void tty_term_string2(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,ulong param_10,ulong param_11,ulong param_12,undefined8 param_13,
                     undefined8 param_14)

{
  undefined1 *puVar1;
  
  puVar1 = tty_term_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           param_10,param_11,param_12,param_13,param_14);
  tparm(puVar1,param_11 & 0xffffffff,param_12 & 0xffffffff,0,0,0,0,0,0,0);
  return;
}



void tty_term_ptr1(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  undefined1 *puVar1;
  
  puVar1 = tty_term_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           param_10,param_11,param_12,param_13,param_14);
  tparm(puVar1,param_11,0,0,0,0,0,0,0,0);
  return;
}



void tty_term_ptr2(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  undefined1 *puVar1;
  
  puVar1 = tty_term_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           param_10,param_11,param_12,param_13,param_14);
  tparm(puVar1,param_11,param_12,0,0,0,0,0,0,0);
  return;
}



uint tty_term_number(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                    undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  uint *puVar2;
  
  puVar2 = (uint *)((param_10 & 0xffffffff) * 0x10 + *(long *)(param_9 + 0x210));
  uVar1 = *puVar2;
  if (uVar1 == 0) {
    return 0;
  }
  if (uVar1 == 2) {
    return puVar2[2];
  }
                    // WARNING: Subroutine does not return
  fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"not a number: %d",param_10
         ,(ulong)uVar1,param_12,param_13,param_14,(char)puVar2);
}



uint tty_term_flag(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  uint *puVar2;
  
  puVar2 = (uint *)((param_10 & 0xffffffff) * 0x10 + *(long *)(param_9 + 0x210));
  uVar1 = *puVar2;
  if (uVar1 == 0) {
    return 0;
  }
  if (uVar1 == 3) {
    return puVar2[2];
  }
                    // WARNING: Subroutine does not return
  fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"not a flag: %d",param_10,
         (ulong)uVar1,param_12,param_13,param_14,(char)puVar2);
}



undefined *
tty_term_describe(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,ulong param_10)

{
  uint uVar1;
  long lVar2;
  uint *puVar3;
  ulong uVar4;
  undefined8 in_R9;
  char *pcVar5;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  byte in_stack_ffffffffffffff58;
  
  uVar4 = param_10 & 0xffffffff;
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  puVar3 = (uint *)(*(long *)(param_9 + 0x210) + uVar4 * 0x10);
  uVar1 = *puVar3;
  if (uVar1 == 2) {
    xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_001a0c20,0x100,
              "%4u: %s: (number) %d",uVar4,(&PTR_s_AX_0019c5e8)[uVar4 * 2],(ulong)puVar3[2],
              in_stack_ffffffffffffff58);
  }
  else if (uVar1 < 3) {
    if (uVar1 == 0) {
      xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_001a0c20,0x100,
                "%4u: %s: [missing]",uVar4,(&PTR_s_AX_0019c5e8)[uVar4 * 2],in_R9,
                in_stack_ffffffffffffff58);
    }
    else {
      strnvis(&stack0xffffffffffffff58,*(byte **)(puVar3 + 2),0x80,0x19);
      xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                &DAT_001a0c20,0x100,"%4u: %s: (string) %s",uVar4,(&PTR_s_AX_0019c5e8)[uVar4 * 2],
                &stack0xffffffffffffff58,in_stack_ffffffffffffff58);
    }
  }
  else if (uVar1 == 3) {
    pcVar5 = "true";
    if (puVar3[2] == 0) {
      pcVar5 = "false";
    }
    xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&DAT_001a0c20,0x100,
              "%4u: %s: (flag) %s",uVar4,(&PTR_s_AX_0019c5e8)[uVar4 * 2],pcVar5,
              in_stack_ffffffffffffff58);
  }
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return &DAT_001a0c20;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tty_error_callback(void)

{
  return;
}



void tty_read_callback(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      undefined8 param_9,long *param_10)

{
  long lVar1;
  undefined8 extraout_XMM0_Qa;
  
  do {
    lVar1 = tty_keys_next(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10);
    param_1 = extraout_XMM0_Qa;
  } while (lVar1 != 0);
  return;
}



bool FUN_00163020(byte *param_1,byte *param_2)

{
  bool bVar1;
  
  bVar1 = false;
  if ((*param_1 & 0x11) == (*param_2 & 0x11)) {
    if ((*param_1 & 0x10) == 0) {
      return param_1[2] == param_2[2];
    }
    bVar1 = false;
    if ((param_1[2] == param_2[2]) && (param_1[3] == param_2[3])) {
      bVar1 = param_1[4] == param_2[4];
    }
  }
  return bVar1;
}



bool FUN_00163080(byte *param_1,byte *param_2)

{
  bool bVar1;
  
  bVar1 = false;
  if ((*param_1 & 0x22) == (*param_2 & 0x22)) {
    if ((*param_1 & 0x20) == 0) {
      return param_1[5] == param_2[5];
    }
    bVar1 = false;
    if ((param_1[5] == param_2[5]) && (param_1[6] == param_2[6])) {
      bVar1 = param_1[7] == param_2[7];
    }
  }
  return bVar1;
}



void FUN_001630e0(long param_1,char *param_2)

{
  int __fd;
  size_t sVar1;
  
  sVar1 = strlen(param_2);
  bufferevent_write(*(undefined8 *)(param_1 + 0x58),param_2,sVar1);
  __fd = DAT_0019e728;
  if (DAT_0019e728 == -1) {
    return;
  }
  sVar1 = strlen(param_2);
  write(__fd,param_2,sVar1);
  return;
}



void FUN_00163140(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,ulong param_10,ulong param_11,undefined8 param_12,undefined8 param_13,
                 undefined8 param_14)

{
  char *pcVar1;
  
  pcVar1 = (char *)tty_term_string1(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    *(long *)(param_9 + 0x48),param_10,param_11,param_12,param_13,
                                    param_14);
  if (*pcVar1 == '\0') {
    return;
  }
  FUN_001630e0(param_9,pcVar1);
  return;
}



void FUN_00163170(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,ulong param_10,ulong param_11,ulong param_12,undefined8 param_13,
                 undefined8 param_14)

{
  char *pcVar1;
  
  pcVar1 = (char *)tty_term_string2(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    *(long *)(param_9 + 0x48),param_10,param_11,param_12,param_13,
                                    param_14);
  if (*pcVar1 == '\0') {
    return;
  }
  FUN_001630e0(param_9,pcVar1);
  return;
}



void FUN_001631a0(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  
  pcVar1 = (char *)tty_term_ptr1(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 *(long *)(param_9 + 0x48),param_10,param_11,param_12,param_13,
                                 param_14);
  if (*pcVar1 == '\0') {
    return;
  }
  FUN_001630e0(param_9,pcVar1);
  return;
}



void FUN_001631d0(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 byte *param_9,long param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  char **ppcVar2;
  char **ppcVar3;
  byte bVar4;
  undefined8 extraout_RDX;
  byte bVar5;
  undefined8 extraout_XMM0_Qa;
  
  ppcVar2 = options_get_style(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(*(long *)(param_10 + 8) + 0x188),"window-active-style",
                              param_11,param_12,param_13,param_14);
  ppcVar3 = options_get_style(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,*(char ***)(*(long *)(param_10 + 8) + 0x188),"window-style",
                              extraout_RDX,param_12,param_13,param_14);
  if ((param_9[2] == 8) && (bVar1 = *param_9, (bVar1 & 1) == 0)) {
    bVar5 = *(byte *)(param_10 + 0x112);
    bVar4 = *(byte *)(param_10 + 0x110);
    if ((bVar5 == 8) && ((bVar4 & 1) == 0)) {
      if (param_10 == *(long *)(*(long *)(param_10 + 8) + 0x138)) {
        bVar5 = *(byte *)((long)ppcVar2 + 2);
        bVar4 = *(byte *)ppcVar2;
        if ((bVar5 != 8) || ((bVar4 & 1) != 0)) goto LAB_0016323c;
      }
      param_9[2] = *(byte *)((long)ppcVar3 + 2);
      *param_9 = *(byte *)ppcVar3 & 1 | bVar1;
      goto LAB_00163211;
    }
LAB_0016323c:
    param_9[2] = bVar5;
    bVar5 = param_9[5];
    *param_9 = bVar4 & 1 | bVar1;
  }
  else {
LAB_00163211:
    bVar5 = param_9[5];
  }
  if ((bVar5 == 8) && (bVar1 = *param_9, (bVar1 & 2) == 0)) {
    bVar5 = *(byte *)(param_10 + 0x115);
    bVar4 = *(byte *)(param_10 + 0x110);
    if ((bVar5 != 8) || ((bVar4 & 2) != 0)) {
LAB_0016326c:
      param_9[5] = bVar5;
      *param_9 = bVar4 & 2 | bVar1;
      return;
    }
    if (param_10 == *(long *)(*(long *)(param_10 + 8) + 0x138)) {
      bVar5 = *(byte *)((long)ppcVar2 + 5);
      bVar4 = *(byte *)ppcVar2;
      if ((bVar5 != 8) || ((bVar4 & 2) != 0)) goto LAB_0016326c;
    }
    param_9[5] = *(byte *)((long)ppcVar3 + 5);
    *param_9 = *(byte *)ppcVar3 & 2 | bVar1;
  }
  return;
}



void tty_create_log(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8)

{
  long lVar1;
  __pid_t _Var2;
  int iVar3;
  long lVar4;
  undefined8 extraout_RDX;
  undefined8 uVar5;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  char in_stack_ffffffffffffffa8;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  _Var2 = getpid();
  lVar4 = (long)_Var2;
  xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
            &stack0xffffffffffffffa8,0x40,"tmate-out-%ld.log",lVar4,in_R8,in_R9,
            in_stack_ffffffffffffffa8);
  DAT_0019e728 = open(&stack0xffffffffffffffa8,0x241,0x1a4);
  if (DAT_0019e728 != -1) {
    uVar5 = 2;
    iVar3 = fcntl(DAT_0019e728,2,1);
    if (iVar3 == -1) {
                    // WARNING: Subroutine does not return
      fatal(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
            "fcntl failed",uVar5,extraout_RDX,lVar4,in_R8,in_R9,in_stack_ffffffffffffffa8);
    }
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
tty_init(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
        undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
        undefined8 *param_9,undefined8 param_10,int param_11,char *param_12,undefined8 param_13,
        undefined8 param_14)

{
  int iVar1;
  undefined8 extraout_RAX;
  char *pcVar2;
  undefined8 extraout_RAX_00;
  undefined8 extraout_RAX_01;
  undefined8 extraout_RAX_02;
  ulong uVar3;
  undefined4 extraout_EDX;
  undefined4 extraout_EDX_00;
  undefined4 extraout_EDX_01;
  undefined4 extraout_var;
  undefined4 extraout_var_00;
  undefined4 extraout_var_01;
  undefined8 uVar4;
  undefined8 *puVar5;
  byte bVar6;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar7;
  
  bVar6 = 0;
  uVar4 = param_10;
  iVar1 = isatty(param_11);
  if (iVar1 != 0) {
    *param_9 = 0;
    param_9[0x32] = 0;
    puVar5 = (undefined8 *)((ulong)(param_9 + 1) & 0xfffffffffffffff8);
    for (uVar3 = (ulong)(((int)param_9 -
                         (int)(undefined8 *)((ulong)(param_9 + 1) & 0xfffffffffffffff8)) + 0x198U >>
                        3); uVar3 != 0; uVar3 = uVar3 - 1) {
      *puVar5 = 0;
      puVar5 = puVar5 + (ulong)bVar6 * -2 + 1;
    }
    if ((param_12 == (char *)0x0) || (*param_12 == '\0')) {
      xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"unknown",
              uVar4,CONCAT44(extraout_var,extraout_EDX),0,param_13,param_14);
      param_9[8] = extraout_RAX;
    }
    else {
      xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_12,
              uVar4,CONCAT44(extraout_var,extraout_EDX),0,param_13,param_14);
      param_9[8] = extraout_RAX_02;
    }
    *(int *)(param_9 + 10) = param_11;
    *param_9 = param_10;
    pcVar2 = ttyname(param_11);
    if (pcVar2 != (char *)0x0) {
      uVar7 = xstrdup(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      pcVar2,uVar4,CONCAT44(extraout_var_00,extraout_EDX_00),uVar3,param_13,param_14
                     );
      *(undefined4 *)(param_9 + 4) = 0;
      param_9[1] = extraout_RAX_00;
      xstrdup(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"",uVar4,
              CONCAT44(extraout_var_01,extraout_EDX_01),uVar3,param_13,param_14);
      param_9[0x16] = 0;
      param_9[5] = extraout_RAX_01;
      return 0;
    }
  }
  return 0xffffffff;
}



undefined8 tty_set_size(long param_1,int param_2,int param_3)

{
  if ((*(int *)(param_1 + 0x10) == param_2) && (*(int *)(param_1 + 0x14) == param_3)) {
    return 0;
  }
  *(int *)(param_1 + 0x10) = param_2;
  *(int *)(param_1 + 0x14) = param_3;
  return 1;
}



void tty_init_termios(int param_1,termios *param_2,long param_3)

{
  int iVar1;
  long in_FS_OFFSET;
  termios local_68;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1 != -1) {
    iVar1 = tcgetattr(param_1,param_2);
    if (iVar1 == 0) {
      setblocking(param_1,0);
      if (param_3 != 0) {
        bufferevent_enable(param_3);
      }
      local_68._48_8_ = *(undefined8 *)(param_2->c_cc + 0x1f);
      local_68.c_cflag = param_2->c_cflag;
      local_68.c_line = param_2->c_line;
      local_68.c_cc[0] = param_2->c_cc[0];
      local_68.c_cc[1] = param_2->c_cc[1];
      local_68.c_cc[2] = param_2->c_cc[2];
      local_68.c_cc._7_4_ = *(undefined4 *)(param_2->c_cc + 7);
      local_68.c_cc._11_4_ = *(undefined4 *)(param_2->c_cc + 0xb);
      local_68.c_cc._15_4_ = *(undefined4 *)(param_2->c_cc + 0xf);
      local_68.c_cc._19_4_ = *(undefined4 *)(param_2->c_cc + 0x13);
      local_68.c_cc._23_4_ = *(undefined4 *)(param_2->c_cc + 0x17);
      local_68.c_cc._27_4_ = *(undefined4 *)(param_2->c_cc + 0x1b);
      local_68.c_iflag = param_2->c_iflag & 0xffffca1f | 1;
      local_68.c_ospeed = param_2->c_ospeed;
      local_68.c_oflag = param_2->c_oflag & 0xffffffd2;
      local_68.c_lflag = param_2->c_lflag & 0xffff71a4;
      local_68.c_cc._3_2_ = (undefined2)*(undefined4 *)(param_2->c_cc + 3);
      local_68.c_cc._5_2_ = 0x100;
      iVar1 = tcsetattr(param_1,0,&local_68);
      if (iVar1 == 0) {
        tcflush(param_1,2);
      }
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tty_raw(long param_1,char *param_2)

{
  size_t __n;
  ssize_t sVar1;
  int *piVar2;
  int iVar3;
  
  iVar3 = 5;
  __n = strlen(param_2);
  do {
    sVar1 = write(*(int *)(param_1 + 0x50),param_2,__n);
    if (sVar1 < 0) {
      if ((sVar1 == -1) && (piVar2 = __errno_location(), *piVar2 != 0xb)) {
        return;
      }
    }
    else {
      param_2 = param_2 + sVar1;
      __n = __n - sVar1;
      if (__n == 0) {
        return;
      }
    }
    usleep(100);
    iVar3 = iVar3 + -1;
    if (iVar3 == 0) {
      return;
    }
  } while( true );
}



void tty_stop_tty(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  char *pcVar4;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  undefined7 extraout_var_02;
  ulong uVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 uVar6;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  undefined8 extraout_RDX_10;
  undefined8 extraout_RDX_11;
  undefined8 extraout_RDX_12;
  long lVar7;
  undefined8 in_R8;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  ushort local_18 [4];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(uint *)(param_9 + 0xb0) & 0x10) != 0) {
    *(uint *)(param_9 + 0xb0) = *(uint *)(param_9 + 0xb0) & 0xffffffef;
    bufferevent_disable(*(undefined8 *)(param_9 + 0x58),6);
    iVar2 = ioctl(*(int *)(param_9 + 0x50),0x5413,local_18);
    if (iVar2 != -1) {
      iVar2 = tcsetattr(*(int *)(param_9 + 0x50),0,(termios *)(param_9 + 0x60));
      if (iVar2 != -1) {
        uVar5 = (ulong)(local_18[0] - 1);
        pcVar4 = (char *)tty_term_string2(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,
                                          param_7,param_8,*(long *)(param_9 + 0x48),0xc,0,uVar5,
                                          in_R8,in_R9);
        tty_raw(param_9,pcVar4);
        bVar1 = tty_term_has(*(long *)(param_9 + 0x48),1);
        lVar7 = *(long *)(param_9 + 0x48);
        uVar6 = extraout_RDX;
        uVar8 = extraout_XMM0_Da_00;
        if (((int)CONCAT71(extraout_var,bVar1) != 0) && ((*(byte *)(param_9 + 0xb0) & 8) == 0)) {
          pcVar4 = tty_term_string(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,
                                   param_7,param_8,lVar7,0xb7,extraout_RDX,uVar5,in_R8,in_R9);
          uVar8 = tty_raw(param_9,pcVar4);
          lVar7 = *(long *)(param_9 + 0x48);
          uVar6 = extraout_RDX_08;
        }
        pcVar4 = tty_term_string(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar7
                                 ,0xbd,uVar6,uVar5,in_R8,in_R9);
        uVar8 = tty_raw(param_9,pcVar4);
        pcVar4 = tty_term_string(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 *(long *)(param_9 + 0x48),0xb9,extraout_RDX_00,uVar5,in_R8,in_R9);
        uVar8 = tty_raw(param_9,pcVar4);
        pcVar4 = tty_term_string(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 *(long *)(param_9 + 0x48),7,extraout_RDX_01,uVar5,in_R8,in_R9);
        tty_raw(param_9,pcVar4);
        bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xc4);
        uVar6 = extraout_RDX_02;
        uVar8 = extraout_XMM0_Da_01;
        if (((int)CONCAT71(extraout_var_00,bVar1) != 0) && (*(int *)(param_9 + 0x20) != 0)) {
          bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xba);
          if ((int)CONCAT71(extraout_var_02,bVar1) == 0) {
            pcVar4 = (char *)tty_term_string1(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,
                                              param_6,param_7,param_8,*(long *)(param_9 + 0x48),0xc4
                                              ,0,uVar5,in_R8,in_R9);
            uVar8 = tty_raw(param_9,pcVar4);
            uVar6 = extraout_RDX_12;
          }
          else {
            pcVar4 = tty_term_string(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,
                                     param_7,param_8,*(long *)(param_9 + 0x48),0xba,extraout_RDX_09,
                                     uVar5,in_R8,in_R9);
            uVar8 = tty_raw(param_9,pcVar4);
            uVar6 = extraout_RDX_10;
          }
        }
        if ((*(byte *)(param_9 + 0x31) & 4) != 0) {
          uVar8 = tty_raw(param_9,"\x1b[?2004l");
          uVar6 = extraout_RDX_07;
        }
        pcVar4 = tty_term_string(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 *(long *)(param_9 + 0x48),10,uVar6,uVar5,in_R8,in_R9);
        uVar8 = tty_raw(param_9,pcVar4);
        pcVar4 = tty_term_string(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 *(long *)(param_9 + 0x48),8,extraout_RDX_03,uVar5,in_R8,in_R9);
        tty_raw(param_9,pcVar4);
        bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0x98);
        uVar6 = extraout_RDX_04;
        uVar8 = extraout_XMM0_Da_02;
        if ((int)CONCAT71(extraout_var_01,bVar1) != 0) {
          uVar8 = tty_raw(param_9,"\x1b[?1000l\x1b[?1002l\x1b[?1006l\x1b[?1005l");
          uVar6 = extraout_RDX_06;
        }
        uVar3 = tty_term_flag(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(long *)(param_9 + 0x48),0xc9,uVar6,uVar5,in_R8,in_R9);
        uVar6 = extraout_RDX_05;
        uVar8 = extraout_XMM0_Da_03;
        if ((uVar3 != 0) && ((*(uint *)(param_9 + 0xb0) & 0x40) != 0)) {
          *(uint *)(param_9 + 0xb0) = *(uint *)(param_9 + 0xb0) & 0xffffffbf;
          uVar8 = tty_raw(param_9,"\x1b[?1004l");
          uVar6 = extraout_RDX_11;
        }
        pcVar4 = tty_term_string(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 *(long *)(param_9 + 0x48),0xb8,uVar6,uVar5,in_R8,in_R9);
        tty_raw(param_9,pcVar4);
        setblocking(*(int *)(param_9 + 0x50),1);
      }
    }
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tty_close(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              long param_9)

{
  int iVar1;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar2;
  
  iVar1 = event_initialized(param_9 + 0x110);
  uVar2 = extraout_XMM0_Qa;
  if (iVar1 != 0) {
    uVar2 = event_del(param_9 + 0x110);
  }
  tty_stop_tty(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  if ((*(byte *)(param_9 + 0xb0) & 0x20) != 0) {
    bufferevent_free(*(undefined8 *)(param_9 + 0x58));
    tty_term_free(*(void ***)(param_9 + 0x48));
    tty_keys_free(param_9);
    *(uint *)(param_9 + 0xb0) = *(uint *)(param_9 + 0xb0) & 0xffffffdf;
  }
  if (*(int *)(param_9 + 0x50) != -1) {
    close(*(int *)(param_9 + 0x50));
    *(undefined4 *)(param_9 + 0x50) = 0xffffffff;
  }
  return;
}



void tty_free(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             long param_9)

{
  tty_close(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  free(*(void **)(param_9 + 0x28));
  free(*(void **)(param_9 + 8));
  free(*(void **)(param_9 + 0x40));
  return;
}



void tty_putcode(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  
  pcVar1 = tty_term_string(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           *(long *)(param_9 + 0x48),param_10,param_11,param_12,param_13,param_14);
  if (*pcVar1 == '\0') {
    return;
  }
  FUN_001630e0(param_9,pcVar1);
  return;
}



void tty_putcode1(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,ulong param_10,ulong param_11,undefined8 param_12,undefined8 param_13,
                 undefined8 param_14)

{
  if (-1 < (int)param_11) {
    FUN_00163140(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                 param_11,param_12,param_13,param_14);
    return;
  }
  return;
}



void tty_putcode2(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,ulong param_10,ulong param_11,ulong param_12,undefined8 param_13,
                 undefined8 param_14)

{
  if ((-1 < (int)param_11) && (-1 < (int)param_12)) {
    FUN_00163170(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                 param_11,param_12,param_13,param_14);
    return;
  }
  return;
}



void tty_putcode_ptr1(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,ulong param_10,long param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  if (param_11 != 0) {
    FUN_001631a0(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                 param_11,param_12,param_13,param_14);
    return;
  }
  return;
}



void tty_putcode_ptr2(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,ulong param_10,long param_11,long param_12,undefined8 param_13,
                     undefined8 param_14)

{
  char *pcVar1;
  
  if ((param_11 != 0) && (param_12 != 0)) {
    pcVar1 = (char *)tty_term_ptr2(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   *(long *)(param_9 + 0x48),param_10,param_11,param_12,param_13,
                                   param_14);
    if (*pcVar1 == '\0') {
      return;
    }
    FUN_001630e0(param_9,pcVar1);
    return;
  }
  return;
}



void tty_puts(long param_1,char *param_2)

{
  if (*param_2 == '\0') {
    return;
  }
  FUN_001630e0(param_1,param_2);
  return;
}



void tty_putc(long param_1,byte param_2)

{
  char *__s;
  size_t sVar1;
  byte local_1c [12];
  
  local_1c[0] = param_2;
  if (*(char *)(param_1 + 0x9d) < '\0') {
    __s = (char *)tty_acs_get(param_1,param_2);
    if (__s != (char *)0x0) {
      sVar1 = strlen(__s);
      bufferevent_write(*(undefined8 *)(param_1 + 0x58),__s,sVar1);
      goto LAB_00163abe;
    }
  }
  bufferevent_write(*(undefined8 *)(param_1 + 0x58),local_1c,1);
LAB_00163abe:
  if ((0x1f < local_1c[0]) && (local_1c[0] != 0x7f)) {
    if (*(uint *)(param_1 + 0x18) <
        *(int *)(param_1 + 0x10) + -1 +
        (uint)((*(uint *)(*(long *)(param_1 + 0x48) + 0x218) & 2) == 0)) {
      *(uint *)(param_1 + 0x18) = *(uint *)(param_1 + 0x18) + 1;
    }
    else {
      *(undefined4 *)(param_1 + 0x18) = 1;
      if (*(int *)(param_1 + 0x1c) != *(int *)(param_1 + 0x34)) {
        *(int *)(param_1 + 0x1c) = *(int *)(param_1 + 0x1c) + 1;
      }
    }
  }
  if (DAT_0019e728 != -1) {
    write(DAT_0019e728,local_1c,1);
  }
  return;
}



void tty_putn(long param_1,void *param_2,size_t param_3,int param_4)

{
  bufferevent_write(*(undefined8 *)(param_1 + 0x58));
  if (DAT_0019e728 != -1) {
    write(DAT_0019e728,param_2,param_3);
  }
  *(int *)(param_1 + 0x18) = *(int *)(param_1 + 0x18) + param_4;
  return;
}



void tty_set_italics(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,undefined8 param_10,undefined8 param_11,long param_12,
                    undefined8 param_13,undefined8 param_14)

{
  bool bVar1;
  undefined7 extraout_var;
  byte *pbVar2;
  char extraout_DL;
  char cVar3;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  undefined7 uVar4;
  byte *pbVar5;
  byte *pbVar6;
  undefined uVar7;
  undefined uVar8;
  bool bVar9;
  byte bVar10;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Db;
  
  bVar10 = 0;
  bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xbe);
  uVar7 = 0;
  uVar8 = (int)CONCAT71(extraout_var,bVar1) == 0;
  cVar3 = extraout_DL;
  uVar4 = extraout_var_00;
  uVar11 = extraout_XMM0_Da;
  if (!(bool)uVar8) {
    pbVar2 = (byte *)options_get_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                        param_4,param_5,param_6,param_7,param_8,global_options,
                                        "default-terminal",CONCAT71(extraout_var_00,extraout_DL),
                                        param_12,param_13,param_14);
    param_12 = 7;
    pbVar5 = pbVar2;
    pbVar6 = (byte *)0x177915;
    do {
      if (param_12 == 0) break;
      param_12 = param_12 + -1;
      uVar7 = *pbVar5 < *pbVar6;
      uVar8 = *pbVar5 == *pbVar6;
      pbVar5 = pbVar5 + (ulong)bVar10 * -2 + 1;
      pbVar6 = pbVar6 + (ulong)bVar10 * -2 + 1;
    } while ((bool)uVar8);
    cVar3 = (!(bool)uVar7 && !(bool)uVar8) - uVar7;
    bVar1 = false;
    bVar9 = cVar3 == '\0';
    uVar4 = extraout_var_01;
    uVar11 = extraout_XMM0_Da_00;
    if (!bVar9) {
      param_12 = 7;
      pbVar5 = (byte *)"screen-";
      do {
        if (param_12 == 0) break;
        param_12 = param_12 + -1;
        bVar1 = *pbVar2 < *pbVar5;
        bVar9 = *pbVar2 == *pbVar5;
        pbVar2 = pbVar2 + (ulong)bVar10 * -2 + 1;
        pbVar5 = pbVar5 + (ulong)bVar10 * -2 + 1;
      } while (bVar9);
      if ((!bVar1 && !bVar9) != bVar1) {
        tty_putcode(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    param_9,0xbe,CONCAT71(extraout_var_01,cVar3),param_12,param_13,param_14);
        return;
      }
    }
  }
  tty_putcode(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xc2,
              CONCAT71(uVar4,cVar3),param_12,param_13,param_14);
  return;
}



void tty_set_title(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  bool bVar1;
  undefined3 extraout_var;
  undefined3 extraout_var_00;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar2;
  undefined8 extraout_RDX_01;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar3;
  
  bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xc6);
  if (CONCAT31(extraout_var,bVar1) != 0) {
    bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0x21);
    if (CONCAT31(extraout_var_00,bVar1) != 0) {
      uVar3 = tty_putcode(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          param_9,0xc6,extraout_RDX,param_12,param_13,param_14);
      uVar2 = extraout_RDX_00;
      if (*param_10 != '\0') {
        uVar3 = FUN_001630e0(param_9,param_10);
        uVar2 = extraout_RDX_01;
      }
      tty_putcode(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0x21,uVar2,
                  param_12,param_13,param_14);
      return;
    }
  }
  return;
}



void tty_force_cursor_colour
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined8 extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 uVar1;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  
  if (*param_10 == '\0') {
    uVar1 = 10;
    tty_putcode(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,10,param_11,
                param_12,param_13,param_14);
  }
  else {
    uVar1 = 0xb;
    FUN_001631a0(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xb,
                 param_10,param_12,param_13,param_14);
  }
  free(*(void **)(param_9 + 0x28));
  xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,param_10,uVar1,extraout_RDX,param_12,param_13,param_14);
  *(undefined8 *)(param_9 + 0x28) = extraout_RAX;
  return;
}



void tty_start_tty(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  bool bVar1;
  uint uVar2;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  char *pcVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 uVar4;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined extraout_XMM0 [16];
  undefined extraout_XMM0_00 [16];
  undefined auVar6 [16];
  undefined8 extraout_XMM0_Qb;
  
  uVar5 = tty_init_termios(*(int *)(param_9 + 0x50),(termios *)(param_9 + 0x60),
                           *(long *)(param_9 + 0x58));
  uVar5 = tty_putcode(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xc0,
                      extraout_RDX,param_12,param_13,param_14);
  tty_putcode(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xbd,
              extraout_RDX_00,param_12,param_13,param_14);
  *(undefined4 *)(param_9 + 0xac) = 0x1010000;
  *(undefined4 *)(param_9 + 0x9c) = 0x80000;
  *(undefined4 *)(param_9 + 0xa0) = 0x800;
  *(undefined4 *)(param_9 + 0xa4) = 0x20;
  *(undefined4 *)(param_9 + 0xa8) = 0;
  tty_putcode(0x80000,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xb9,
              extraout_RDX_01,param_12,param_13,param_14);
  bVar1 = tty_term_has(*(long *)(param_9 + 0x48),1);
  uVar4 = extraout_RDX_02;
  uVar5 = extraout_XMM0_Da;
  if (((int)CONCAT71(extraout_var,bVar1) != 0) && ((*(byte *)(param_9 + 0xb0) & 8) == 0)) {
    uVar5 = tty_putcode(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        param_9,0x20,extraout_RDX_02,param_12,param_13,param_14);
    uVar4 = extraout_RDX_09;
  }
  uVar5 = tty_putcode(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,7,uVar4,
                      param_12,param_13,param_14);
  tty_putcode(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,8,
              extraout_RDX_03,param_12,param_13,param_14);
  bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0x98);
  uVar4 = extraout_RDX_04;
  uVar5 = extraout_XMM0_Da_00;
  if ((int)CONCAT71(extraout_var_00,bVar1) != 0) {
    uVar5 = FUN_001630e0(param_9,"\x1b[?1000l\x1b[?1002l\x1b[?1006l\x1b[?1005l");
    uVar4 = extraout_RDX_08;
  }
  uVar2 = tty_term_flag(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(long *)(param_9 + 0x48),0xc9,uVar4,param_12,param_13,param_14);
  uVar4 = extraout_RDX_05;
  auVar6 = extraout_XMM0;
  if (uVar2 != 0) {
    pcVar3 = options_get_number(extraout_XMM0._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,global_options,"focus-events",extraout_RDX_05,param_12,
                                param_13,param_14);
    uVar4 = extraout_RDX_06;
    auVar6 = extraout_XMM0_00;
    if (pcVar3 != (char *)0x0) {
      *(uint *)(param_9 + 0xb0) = *(uint *)(param_9 + 0xb0) | 0x40;
      auVar6._0_8_ = FUN_001630e0(param_9,"\x1b[?1004h");
      auVar6._8_8_ = extraout_XMM0_Qb;
      uVar4 = extraout_RDX_07;
    }
  }
  *(uint *)(param_9 + 0xb0) = *(uint *)(param_9 + 0xb0) | 0x10;
  *(undefined8 *)(param_9 + 0x18) = 0xffffffffffffffff;
  *(undefined8 *)(param_9 + 0x30) = 0xffffffff00000001;
  *(undefined4 *)(param_9 + 0x38) = 0xffffffff;
  tty_force_cursor_colour
            (auVar6._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,"",uVar4,
             param_12,param_13,param_14);
  *(undefined4 *)(param_9 + 0xf8) = 0;
  *(undefined8 *)(param_9 + 0x100) = 0;
  *(undefined8 *)(param_9 + 0x108) = 0;
  return;
}



undefined8
tty_open(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
        undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
        long *param_10,undefined8 param_11,char **param_12,byte *param_13,int *param_14)

{
  char **ppcVar1;
  code *pcVar2;
  undefined8 extraout_RDX;
  code *pcVar3;
  long lVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined auVar6 [16];
  
  ppcVar1 = tty_term_find(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          *(char **)(param_9 + 0x40),*(uint *)(param_9 + 0x50),param_10,param_12,
                          param_13,param_14);
  *(char ***)(param_9 + 0x48) = ppcVar1;
  if (ppcVar1 != (char **)0x0) {
    pcVar2 = tty_error_callback;
    pcVar3 = tty_read_callback;
    *(uint *)(param_9 + 0xb0) = *(uint *)(param_9 + 0xb0) & 0xfffffff8 | 0x20;
    lVar4 = param_9;
    auVar6 = bufferevent_new(*(undefined4 *)(param_9 + 0x50),tty_read_callback,0);
    *(long *)(param_9 + 0x58) = auVar6._0_8_;
    uVar5 = tty_start_tty(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                          param_5,param_6,param_7,param_8,param_9,pcVar3,auVar6._8_8_,pcVar2,lVar4,
                          param_14);
    tty_keys_build(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,pcVar3,
                   extraout_RDX,pcVar2,lVar4,param_14);
    return 0;
  }
  tty_close(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
            param_7,param_8,param_9);
  return 0xffffffff;
}



void tty_update_mode(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,uint param_10,ulong param_11,undefined8 param_12,
                    undefined8 param_13,undefined8 param_14)

{
  char *__s1;
  bool bVar1;
  int iVar2;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  ulong extraout_RDX;
  ulong extraout_RDX_00;
  undefined8 extraout_RDX_01;
  ulong extraout_RDX_02;
  ulong extraout_RDX_03;
  ulong uVar3;
  ulong extraout_RDX_04;
  ulong extraout_RDX_05;
  ulong extraout_RDX_06;
  ulong extraout_RDX_07;
  ulong extraout_RDX_08;
  ulong extraout_RDX_09;
  undefined8 extraout_RDX_10;
  ulong extraout_RDX_11;
  uint uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  
  uVar3 = param_11;
  if (param_11 != 0) {
    __s1 = *(char **)(param_11 + 0x20);
    iVar2 = strcmp(__s1,*(char **)(param_9 + 0x28));
    uVar3 = extraout_RDX;
    param_1 = extraout_XMM0_Da;
    if (iVar2 != 0) {
      param_1 = tty_force_cursor_colour
                          (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           param_9,__s1,extraout_RDX,param_12,param_13,param_14);
      uVar3 = extraout_RDX_05;
    }
  }
  if ((*(byte *)(param_9 + 0xb0) & 1) != 0) {
    param_10 = param_10 & 0xfffffffe;
  }
  uVar4 = *(uint *)(param_9 + 0x30) ^ param_10;
  if ((uVar4 & 0x80) == 0) {
    if ((uVar4 & 1) != 0) goto LAB_0016402e;
  }
  else {
    bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0x16);
    if ((int)CONCAT71(extraout_var,bVar1) == 0) {
      param_1 = tty_putcode(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,param_9,8,extraout_RDX_01,param_12,param_13,param_14);
      uVar3 = extraout_RDX_02;
    }
    else {
      param_1 = tty_putcode(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,param_9,0x16,extraout_RDX_01,param_12,param_13,param_14);
      uVar3 = extraout_RDX_06;
    }
LAB_0016402e:
    if ((param_10 & 1) == 0) {
      param_1 = tty_putcode(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            6,uVar3,param_12,param_13,param_14);
      uVar3 = extraout_RDX_04;
    }
    else {
      param_1 = tty_putcode(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            8,uVar3,param_12,param_13,param_14);
      uVar3 = extraout_RDX_03;
    }
  }
  if ((param_11 == 0) || (*(int *)(param_9 + 0x20) == *(int *)(param_11 + 0x18))) goto LAB_00163f81;
  bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xc4);
  uVar3 = (ulong)*(uint *)(param_11 + 0x18);
  param_1 = extraout_XMM0_Da_01;
  if ((int)CONCAT71(extraout_var_00,bVar1) != 0) {
    if (*(uint *)(param_11 + 0x18) == 0) {
      bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xba);
      if ((int)CONCAT71(extraout_var_01,bVar1) != 0) {
        param_1 = tty_putcode(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,param_9,0xba,extraout_RDX_10,param_12,param_13,param_14);
        uVar3 = (ulong)*(uint *)(param_11 + 0x18);
        goto LAB_00164083;
      }
      uVar3 = (ulong)*(uint *)(param_11 + 0x18);
      param_1 = extraout_XMM0_Da_02;
    }
    if (-1 < (int)uVar3) {
      param_1 = FUN_00163140(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                             ,0xc4,uVar3,param_12,param_13,param_14);
      uVar3 = (ulong)*(uint *)(param_11 + 0x18);
    }
  }
LAB_00164083:
  *(int *)(param_9 + 0x20) = (int)uVar3;
LAB_00163f81:
  if ((uVar4 & 0x60) != 0) {
    if ((param_10 & 0x60) == 0) {
      if ((*(uint *)(param_9 + 0x30) & 0x40) == 0) {
        if ((*(uint *)(param_9 + 0x30) & 0x20) != 0) {
          FUN_001630e0(param_9,"\x1b[?1000l");
        }
        param_1 = FUN_001630e0(param_9,"\x1b[?1006l");
        uVar3 = extraout_RDX_00;
      }
      else {
        FUN_001630e0(param_9,"\x1b[?1002l");
        param_1 = FUN_001630e0(param_9,"\x1b[?1006l");
        uVar3 = extraout_RDX_09;
      }
    }
    else {
      param_1 = FUN_001630e0(param_9,"\x1b[?1006h");
      if ((param_10 & 0x40) == 0) {
        uVar3 = extraout_RDX_07;
        if ((param_10 & 0x20) != 0) {
          param_1 = FUN_001630e0(param_9,"\x1b[?1000h");
          uVar3 = extraout_RDX_08;
        }
      }
      else {
        param_1 = FUN_001630e0(param_9,"\x1b[?1002h");
        uVar3 = extraout_RDX_11;
      }
    }
  }
  if ((uVar4 & 8) != 0) {
    if ((param_10 & 8) == 0) {
      tty_putcode(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xb9,uVar3
                  ,param_12,param_13,param_14);
    }
    else {
      tty_putcode(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xc1,uVar3
                  ,param_12,param_13,param_14);
    }
  }
  if ((uVar4 & 0x400) != 0) {
    if ((param_10 & 0x400) == 0) {
      FUN_001630e0(param_9,"\x1b[?2004l");
      *(uint *)(param_9 + 0x30) = param_10;
      return;
    }
    FUN_001630e0(param_9,"\x1b[?2004h");
  }
  *(uint *)(param_9 + 0x30) = param_10;
  return;
}



void tty_emulate_repeat(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,uint param_10,uint param_11,ulong param_12,undefined8 param_13,
                       undefined8 param_14)

{
  bool bVar1;
  undefined3 extraout_var;
  ulong uVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  undefined8 extraout_RDX_00;
  int iVar4;
  int iVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  
  uVar2 = param_12;
  bVar1 = tty_term_has(*(long *)(param_9 + 0x48),param_10);
  iVar5 = (int)param_12;
  if (CONCAT31(extraout_var,bVar1) == 0) {
    iVar4 = iVar5 + -1;
    uVar3 = extraout_RDX;
    uVar6 = extraout_XMM0_Da;
    if (iVar5 != 0) {
      do {
        iVar4 = iVar4 + -1;
        uVar6 = tty_putcode(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            (ulong)param_11,uVar3,uVar2,param_13,param_14);
        uVar3 = extraout_RDX_00;
      } while (iVar4 != -1);
    }
  }
  else if (-1 < iVar5) {
    FUN_00163140(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                 (ulong)param_10,param_12 & 0xffffffff,uVar2,param_13,param_14);
    return;
  }
  return;
}



void tty_repeat_space(long param_1,int param_2)

{
  int iVar1;
  
  if (param_2 != 0) {
    iVar1 = param_2 + -1;
    do {
      iVar1 = iVar1 + -1;
      tty_putc(param_1,0x20);
    } while (iVar1 != -1);
    return;
  }
  return;
}



bool tty_large_region(undefined8 param_1,long *param_2)

{
  return *(uint *)(*(long *)(*(long *)(*param_2 + 0x140) + 8) + 8) >> 1 <=
         (uint)(*(int *)((long)param_2 + 0x2c) - *(int *)(param_2 + 5));
}



bool tty_fake_bce(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,long param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  bool bVar2;
  undefined4 uVar3;
  undefined8 local_28;
  undefined8 uStack_20;
  undefined4 local_18;
  long local_10;
  
  uVar3 = 0x80000;
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  local_28 = 0x80000080000;
  uStack_20 = 0x20;
  local_18 = 0x1010000;
  if (param_10 != 0) {
    uVar3 = FUN_001631d0(0x80000080000,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (byte *)&local_28,param_10,param_11,param_12,param_13,param_14);
    param_11 = extraout_RDX;
  }
  if ((local_28._5_1_ != '\b') || (bVar2 = false, (local_28 & 2) != 0)) {
    uVar1 = tty_term_flag(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          *(long *)(param_9 + 0x48),2,param_11,param_12,param_13,param_14);
    bVar2 = uVar1 == 0;
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return bVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



bool tty_client_ready(long param_1,long param_2)

{
  undefined uVar1;
  uint uVar2;
  
  if (((*(long *)(param_1 + 0x598) == 0) || (*(long *)(param_1 + 0x128) == 0)) ||
     (uVar2 = *(uint *)(param_1 + 0x420) & 0x40, uVar1 = (undefined)uVar2, uVar2 != 0)) {
    uVar1 = 0;
  }
  else if ((*(byte *)(param_1 + 400) & 2) == 0) {
    return *(long *)(*(long *)(*(long *)(param_1 + 0x598) + 0xe0) + 8) == *(long *)(param_2 + 8);
  }
  return (bool)uVar1;
}



void tty_write(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              undefined *param_9,long *param_10,undefined8 param_11,undefined8 param_12,
              undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  long lVar2;
  long lVar3;
  bool bVar4;
  int iVar5;
  undefined7 extraout_var;
  long *plVar6;
  undefined8 extraout_XMM0_Qa;
  undefined8 uVar7;
  
  lVar1 = *param_10;
  if ((((lVar1 != 0) && ((*(byte *)(*(long *)(lVar1 + 8) + 0x180) & 4) == 0)) &&
      ((*(byte *)(lVar1 + 0x30) & 1) == 0)) &&
     ((plVar6 = param_10, bVar4 = window_pane_visible(lVar1), (int)CONCAT71(extraout_var,bVar4) != 0
      && (uVar7 = extraout_XMM0_Qa, lVar3 = clients, (*(byte *)(lVar1 + 0x30) & 2) == 0)))) {
    for (; lVar3 != 0; lVar3 = *(long *)(lVar3 + 0x5c0)) {
      if (((*(long *)(lVar3 + 0x598) != 0) && (*(long *)(lVar3 + 0x128) != 0)) &&
         (((*(byte *)(lVar3 + 0x420) & 0x40) == 0 &&
          (((*(byte *)(lVar3 + 400) & 2) == 0 &&
           (lVar2 = *(long *)(lVar1 + 8),
           *(long *)(*(long *)(*(long *)(lVar3 + 0x598) + 0xe0) + 8) == lVar2)))))) {
        *(undefined4 *)(param_10 + 6) = *(undefined4 *)(lVar1 + 0x28);
        *(undefined4 *)((long)param_10 + 0x34) = *(undefined4 *)(lVar1 + 0x2c);
        iVar5 = status_at_line(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,
                               plVar6,lVar2,param_12,param_13,param_14);
        if (iVar5 == 0) {
          *(int *)((long)param_10 + 0x34) = *(int *)((long)param_10 + 0x34) + 1;
        }
        plVar6 = param_10;
        uVar7 = (*(code *)param_9)(lVar3 + 0xe0);
      }
    }
  }
  return;
}



void tty_cmd_setselection
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  bool bVar1;
  undefined7 extraout_var;
  void *__ptr;
  char *pcVar2;
  undefined8 uVar3;
  ulong uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar5;
  
  uVar3 = 0xb3;
  bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xb3);
  if ((int)CONCAT71(extraout_var,bVar1) == 0) {
    return;
  }
  uVar4 = (ulong)(((*(int *)(param_10 + 0x10) + 2U) / 3) * 4 + 1);
  __ptr = (void *)xmalloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          uVar4,uVar3,0xaaaaaaab,param_12,param_13,param_14);
  uVar5 = __b64_ntop(*(undefined8 *)(param_10 + 0x18),*(undefined4 *)(param_10 + 0x10),__ptr,uVar4);
  if (__ptr != (void *)0x0) {
    pcVar2 = (char *)tty_term_ptr2(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   *(long *)(param_9 + 0x48),0xb3,&DAT_001816c0,__ptr,param_13,
                                   param_14);
    if (*pcVar2 != '\0') {
      FUN_001630e0(param_9,pcVar2);
    }
  }
  free(__ptr);
  return;
}



void tty_reset(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
              undefined8 param_13,undefined8 param_14)

{
  bool bVar1;
  undefined7 extraout_var;
  ulong uVar2;
  ulong extraout_RDX;
  ulong extraout_RDX_00;
  undefined4 extraout_XMM0_Da;
  
  uVar2 = *(ulong *)(param_9 + 0xa4) ^ 0x20 | *(ulong *)(param_9 + 0x9c) ^ 0x80000080000;
  if ((uVar2 != 0) || (*(int *)(param_9 + 0xac) != 0x1010000)) {
    if (*(char *)(param_9 + 0x9d) < '\0') {
      bVar1 = tty_term_has(*(long *)(param_9 + 0x48),1);
      uVar2 = extraout_RDX;
      param_1 = extraout_XMM0_Da;
      if (((int)CONCAT71(extraout_var,bVar1) != 0) && ((*(byte *)(param_9 + 0xb0) & 8) == 0)) {
        param_1 = tty_putcode(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,param_9,0xb7,extraout_RDX,param_12,param_13,param_14);
        uVar2 = extraout_RDX_00;
      }
    }
    tty_putcode(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xbd,uVar2,
                param_12,param_13,param_14);
    *(undefined4 *)(param_9 + 0xac) = 0x1010000;
    *(undefined4 *)(param_9 + 0x9c) = 0x80000;
    *(undefined4 *)(param_9 + 0xa0) = 0x800;
    *(undefined4 *)(param_9 + 0xa4) = 0x20;
    *(undefined4 *)(param_9 + 0xa8) = 0;
  }
  return;
}



void tty_cursor(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,uint param_11,undefined8 param_12,undefined8 param_13,
               undefined8 param_14)

{
  long lVar1;
  bool bVar2;
  uint uVar3;
  uint uVar4;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  undefined7 extraout_var_02;
  undefined7 extraout_var_03;
  undefined7 extraout_var_04;
  undefined7 extraout_var_05;
  undefined7 extraout_var_06;
  undefined7 extraout_var_07;
  undefined7 extraout_var_08;
  undefined7 extraout_var_09;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  uint uVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Da_06;
  undefined4 extraout_XMM0_Da_07;
  undefined4 extraout_XMM0_Da_08;
  undefined4 extraout_XMM0_Da_09;
  
  uVar5 = *(uint *)(param_9 + 0x18);
  uVar4 = *(uint *)(param_9 + 0x1c);
  uVar3 = *(int *)(param_9 + 0x10) - 1;
  if (uVar3 <= param_10) {
    param_10 = uVar3;
  }
  if ((uVar5 == param_10) && (uVar4 == param_11)) {
    return;
  }
  if (uVar5 <= uVar3) {
    lVar1 = *(long *)(param_9 + 0x48);
    if ((param_11 | param_10) == 0) {
      bVar2 = tty_term_has(lVar1,0x22);
      param_1 = extraout_XMM0_Da;
      if ((int)CONCAT71(extraout_var,bVar2) != 0) {
        tty_putcode(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                    ,0x22,extraout_RDX,param_12,param_13,param_14);
        goto LAB_001646a3;
      }
LAB_001646d5:
      if ((uVar4 + 1 == param_11) && (*(uint *)(param_9 + 0x34) != uVar4)) {
        tty_putc(param_9,0xd);
        tty_putc(param_9,10);
        goto LAB_001646a3;
      }
      if (uVar4 == param_11) {
        tty_putc(param_9,0xd);
        goto LAB_001646a3;
      }
    }
    else {
      if (param_10 == 0) goto LAB_001646d5;
      if (uVar4 == param_11) {
        if (uVar5 - 1 == param_10) {
          bVar2 = tty_term_has(lVar1,0xe);
          param_1 = extraout_XMM0_Da_08;
          if ((int)CONCAT71(extraout_var_08,bVar2) != 0) {
            tty_putcode(extraout_XMM0_Da_08,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        param_9,0xe,extraout_RDX_02,param_12,param_13,param_14);
            goto LAB_001646a3;
          }
        }
        if (uVar5 + 1 == param_10) {
          bVar2 = tty_term_has(lVar1,0x12);
          param_1 = extraout_XMM0_Da_09;
          if ((int)CONCAT71(extraout_var_09,bVar2) != 0) {
            tty_putcode(extraout_XMM0_Da_09,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        param_9,0x12,extraout_RDX_03,param_12,param_13,param_14);
            goto LAB_001646a3;
          }
        }
        uVar5 = uVar5 - param_10;
        if (param_10 < ((int)uVar5 >> 0x1f ^ uVar5) - ((int)uVar5 >> 0x1f)) {
          bVar2 = tty_term_has(lVar1,0x23);
          param_1 = extraout_XMM0_Da_07;
          if ((int)CONCAT71(extraout_var_07,bVar2) != 0) {
            FUN_00163140(extraout_XMM0_Da_07,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,param_9,0x23,(ulong)param_10,param_12,param_13,param_14);
            goto LAB_001646a3;
          }
        }
        if ((int)uVar5 < 1) {
          if (uVar5 != 0) {
            bVar2 = tty_term_has(lVar1,0x11);
            param_1 = extraout_XMM0_Da_03;
            if ((int)CONCAT71(extraout_var_03,bVar2) != 0) {
              FUN_00163140(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_9,0x11,(ulong)-uVar5,param_12,param_13,param_14);
              goto LAB_001646a3;
            }
          }
        }
        else {
          bVar2 = tty_term_has(lVar1,0xd);
          param_1 = extraout_XMM0_Da_06;
          if ((int)CONCAT71(extraout_var_06,bVar2) != 0) {
            FUN_00163140(extraout_XMM0_Da_06,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,param_9,0xd,(ulong)uVar5,param_12,param_13,param_14);
            goto LAB_001646a3;
          }
        }
        goto LAB_00164688;
      }
    }
    if (uVar5 == param_10) {
      if ((*(uint *)(param_9 + 0x38) != uVar4) && (uVar4 - 1 == param_11)) {
        bVar2 = tty_term_has(lVar1,0x15);
        if ((int)CONCAT71(extraout_var_04,bVar2) != 0) {
          tty_putcode(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      param_9,0x15,extraout_RDX_00,param_12,param_13,param_14);
          goto LAB_001646a3;
        }
      }
      if ((*(uint *)(param_9 + 0x34) != uVar4) && (uVar4 + 1 == param_11)) {
        bVar2 = tty_term_has(lVar1,0x10);
        if ((int)CONCAT71(extraout_var_05,bVar2) != 0) {
          tty_putcode(extraout_XMM0_Da_05,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      param_9,0x10,extraout_RDX_01,param_12,param_13,param_14);
          goto LAB_001646a3;
        }
      }
      uVar5 = uVar4 - param_11;
      if (param_11 < ((int)uVar5 >> 0x1f ^ uVar5) - ((int)uVar5 >> 0x1f)) {
LAB_00164778:
        bVar2 = tty_term_has(lVar1,199);
        param_1 = extraout_XMM0_Da_01;
        if ((int)CONCAT71(extraout_var_01,bVar2) != 0) {
          if (-1 < (int)param_11) {
            FUN_00163140(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,param_9,199,(ulong)param_11,param_12,param_13,param_14);
          }
          goto LAB_001646a3;
        }
      }
      else {
        uVar4 = param_11 * 2 - uVar4;
        if ((int)uVar5 < 0) {
          if (*(uint *)(param_9 + 0x34) < uVar4) goto LAB_00164778;
          bVar2 = tty_term_has(lVar1,0xf);
          param_1 = extraout_XMM0_Da_02;
          if ((int)CONCAT71(extraout_var_02,bVar2) != 0) {
            FUN_00163140(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,param_9,0xf,(ulong)-uVar5,param_12,param_13,param_14);
            goto LAB_001646a3;
          }
        }
        else {
          if (uVar4 < *(uint *)(param_9 + 0x38)) goto LAB_00164778;
          bVar2 = tty_term_has(lVar1,0x14);
          param_1 = extraout_XMM0_Da_00;
          if ((int)CONCAT71(extraout_var_00,bVar2) != 0) {
            FUN_00163140(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,param_9,0x14,(ulong)uVar5,param_12,param_13,param_14);
            goto LAB_001646a3;
          }
        }
      }
    }
  }
LAB_00164688:
  if ((-1 < (int)param_11) && (-1 < (int)param_10)) {
    FUN_00163170(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0x13,
                 (ulong)param_11,(ulong)param_10,param_13,param_14);
  }
LAB_001646a3:
  *(uint *)(param_9 + 0x18) = param_10;
  *(uint *)(param_9 + 0x1c) = param_11;
  return;
}



void tty_region(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,uint param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  bool bVar1;
  undefined7 extraout_var;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar2;
  
  if (((*(uint *)(param_9 + 0x34) == param_11) && (*(uint *)(param_9 + 0x38) == param_10)) ||
     (bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xc), (int)CONCAT71(extraout_var,bVar1) == 0))
  {
    return;
  }
  *(uint *)(param_9 + 0x38) = param_10;
  *(uint *)(param_9 + 0x34) = param_11;
  if (*(uint *)(param_9 + 0x18) < *(uint *)(param_9 + 0x10)) {
    uVar2 = extraout_XMM0_Da;
    if ((int)param_10 < 0) goto LAB_001649db;
  }
  else {
    uVar2 = tty_cursor(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_9,0,*(uint *)(param_9 + 0x1c),param_12,param_13,param_14);
    param_10 = *(uint *)(param_9 + 0x38);
    param_11 = *(uint *)(param_9 + 0x34);
    if ((int)param_10 < 0) goto LAB_001649db;
  }
  if (-1 < (int)param_11) {
    param_12 = (ulong)param_11;
    uVar2 = FUN_00163170(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xc,
                         (ulong)param_10,param_12,param_13,param_14);
  }
LAB_001649db:
  tty_cursor(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,0,param_12,
             param_13,param_14);
  return;
}



void tty_region_pane(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,long param_10,uint param_11,ulong param_12,undefined8 param_13,
                    undefined8 param_14)

{
  tty_region(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
             *(int *)(param_10 + 0x34) + param_11,*(int *)(param_10 + 0x34) + (int)param_12,param_12
             ,(ulong)param_11,param_14);
  return;
}



undefined8
tty_resize(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          undefined8 param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
          undefined8 param_14)

{
  undefined8 uVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  undefined8 uVar6;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  ushort local_28;
  ushort local_26;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar3 = ioctl(*(int *)(param_9 + 0x50),0x5413,&local_28);
  if (iVar3 == -1) {
    uVar5 = 0x18;
    uVar4 = 0x50;
    uVar2 = 0x18;
    if (*(int *)(param_9 + 0x10) == 0x50) goto LAB_00164ae7;
  }
  else {
    uVar4 = (uint)local_26;
    param_12 = 0x18;
    if (local_26 == 0) {
      uVar4 = 0x50;
    }
    uVar5 = (uint)local_28;
    if (local_28 == 0) {
      uVar5 = 0x18;
    }
    uVar2 = uVar5;
    if (uVar4 == *(uint *)(param_9 + 0x10)) {
LAB_00164ae7:
      uVar5 = uVar2;
      uVar6 = 0;
      if (uVar5 == *(uint *)(param_9 + 0x14)) goto LAB_00164aba;
    }
  }
  *(uint *)(param_9 + 0x10) = uVar4;
  uVar6 = 1;
  *(uint *)(param_9 + 0x14) = uVar5;
  *(undefined8 *)(param_9 + 0x18) = 0xffffffffffffffff;
  *(undefined8 *)(param_9 + 0x34) = 0xffffffffffffffff;
  if ((*(byte *)(param_9 + 0xb0) & 0x10) != 0) {
    uVar1 = tty_cursor(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_9,0,0,param_12,param_13,param_14);
    tty_region(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
               *(int *)(param_9 + 0x14) - 1,param_12,param_13,param_14);
  }
LAB_00164aba:
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
}



void tty_cursor_pane(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,long param_10,int param_11,int param_12,undefined8 param_13,
                    undefined8 param_14)

{
  uint uVar1;
  
  uVar1 = param_12 + *(int *)(param_10 + 0x34);
  tty_cursor(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
             param_11 + *(int *)(param_10 + 0x30),uVar1,(ulong)uVar1,param_13,param_14);
  return;
}



void tty_check_fg(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,byte *param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  undefined8 extraout_RDX;
  long lVar4;
  undefined4 extraout_XMM0_Da;
  
  lVar4 = *(long *)(param_9 + 0x48);
  if ((*param_10 & 0x10) != 0) {
    uVar2 = tty_term_flag(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar4,0xc5
                          ,param_11,param_12,param_13,param_14);
    if (uVar2 != 0) {
      return;
    }
    *param_10 = *param_10 & 0xef | 1;
    iVar3 = colour_find_rgb((uint)param_10[2],(uint)param_10[3],param_10[4]);
    lVar4 = *(long *)(param_9 + 0x48);
    param_10[2] = (byte)iVar3;
    param_11 = extraout_RDX;
    param_1 = extraout_XMM0_Da;
  }
  uVar2 = tty_term_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar4,9,
                          param_11,param_12,param_13,param_14);
  if ((*param_10 & 1) == 0) {
    if ((uVar2 < 0x10) && ((byte)(param_10[2] + 0xa6) < 8)) {
      param_10[1] = param_10[1] | 1;
      param_10[2] = param_10[2] + 0xa6;
      return;
    }
  }
  else if (((*(byte *)(*(long *)(param_9 + 0x48) + 0x218) & 1) == 0) &&
          ((*(byte *)(param_9 + 0xb4) & 1) == 0)) {
    bVar1 = colour_256to16(param_10[2]);
    param_10[2] = bVar1;
    if ((bVar1 & 8) == 0) {
      param_10[1] = param_10[1] & 0xfe;
    }
    else {
      param_10[2] = bVar1 & 7;
      if (uVar2 < 0x10) {
        param_10[1] = param_10[1] | 1;
      }
      else {
        param_10[2] = (bVar1 & 7) + 0x5a;
      }
    }
    *param_10 = *param_10 & 0xfe;
  }
  return;
}



void tty_check_bg(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,byte *param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  undefined8 extraout_RDX;
  long lVar4;
  undefined4 extraout_XMM0_Da;
  
  lVar4 = *(long *)(param_9 + 0x48);
  if ((*param_10 & 0x20) != 0) {
    uVar2 = tty_term_flag(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar4,0xc5
                          ,param_11,param_12,param_13,param_14);
    if (uVar2 != 0) {
      return;
    }
    *param_10 = *param_10 & 0xdf | 2;
    iVar3 = colour_find_rgb((uint)param_10[5],(uint)param_10[6],param_10[7]);
    lVar4 = *(long *)(param_9 + 0x48);
    param_10[5] = (byte)iVar3;
    param_11 = extraout_RDX;
    param_1 = extraout_XMM0_Da;
  }
  uVar2 = tty_term_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar4,9,
                          param_11,param_12,param_13,param_14);
  if ((*param_10 & 2) == 0) {
    if ((uVar2 < 0x10) && ((byte)(param_10[5] + 0xa6) < 8)) {
      param_10[5] = param_10[5] + 0xa6;
      return;
    }
  }
  else if (((*(byte *)(*(long *)(param_9 + 0x48) + 0x218) & 1) == 0) &&
          ((*(byte *)(param_9 + 0xb4) & 1) == 0)) {
    bVar1 = colour_256to16(param_10[5]);
    if ((bVar1 & 8) == 0) {
      param_10[5] = bVar1;
    }
    else {
      param_10[5] = bVar1 & 7;
      if (0xf < uVar2) {
        param_10[2] = param_10[2] + 0x5a;
      }
    }
    *param_10 = *param_10 & 0xfd;
  }
  return;
}



undefined4
tty_try_256(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
           undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
           byte param_10,char *param_11,undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined4 uVar4;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  char in_stack_ffffffffffffffa8;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(uint *)(param_9 + 0xb4) & 1) == 0) {
    lVar2 = *(long *)(param_9 + 0x48);
    if ((*(byte *)(lVar2 + 0x218) & 1) == 0) {
      uVar4 = 0xffffffff;
      goto LAB_00164d8c;
    }
    uVar4 = 0;
    if (*param_11 == '3') {
      bVar3 = tty_term_has(lVar2,0xbc);
      param_1 = extraout_XMM0_Da_00;
      if ((int)CONCAT71(extraout_var_00,bVar3) != 0) {
        FUN_00163140(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9,0xbc,(ulong)param_10,param_12,param_13,param_14);
        goto LAB_00164d8c;
      }
    }
    else {
      bVar3 = tty_term_has(lVar2,0xbb);
      param_1 = extraout_XMM0_Da;
      if ((int)CONCAT71(extraout_var,bVar3) != 0) {
        FUN_00163140(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9,0xbb,(ulong)param_10,param_12,param_13,param_14);
        goto LAB_00164d8c;
      }
    }
  }
  uVar4 = 0;
  xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&stack0xffffffffffffffa8
            ,0x20,&DAT_00181bf7,param_11,(ulong)param_10,param_14,in_stack_ffffffffffffffa8);
  if (in_stack_ffffffffffffffa8 != '\0') {
    FUN_001630e0(param_9,&stack0xffffffffffffffa8);
  }
LAB_00164d8c:
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
tty_try_rgb(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
           undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
           byte *param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
           undefined8 param_14)

{
  uint uVar1;
  undefined8 uVar2;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  char local_58 [40];
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = tty_term_flag(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(long *)(param_9 + 0x48),0xc5,param_11,param_12,param_13,param_14);
  if (uVar1 == 0) {
    uVar2 = 0xffffffff;
  }
  else {
    uVar2 = 0;
    xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_58,0x20
              ,&DAT_00181c04,param_11,(ulong)*param_10,(ulong)param_10[1],param_10[2]);
    if (local_58[0] != '\0') {
      FUN_001630e0(param_9,local_58);
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tty_colours_fg(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,byte *param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int iVar2;
  undefined8 uVar3;
  byte bVar4;
  ulong uVar5;
  long in_FS_OFFSET;
  char in_stack_ffffffffffffffa8;
  
  bVar4 = param_10[2];
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  *(byte *)(param_9 + 0x9c) = *(byte *)(param_9 + 0x9c) & 0xee;
  if ((*param_10 & 0x10) == 0) {
    uVar5 = (ulong)bVar4;
    if ((*param_10 & 1) == 0) {
      if ((byte)(bVar4 + 0xa6) < 8) {
        xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  &stack0xffffffffffffffa8,0x20,&DAT_00181c1b,uVar5,uVar5,param_14,
                  in_stack_ffffffffffffffa8);
        if (in_stack_ffffffffffffffa8 != '\0') {
          FUN_001630e0(param_9,&stack0xffffffffffffffa8);
        }
      }
      else {
        FUN_00163140(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xbc,
                     uVar5,param_12,uVar5,param_14);
      }
      goto LAB_00164f1d;
    }
    iVar2 = tty_try_256(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        bVar4,"38",param_12,uVar5,param_14);
    if (iVar2 != 0) goto LAB_00164f49;
    if ((*param_10 & 0x10) != 0) goto LAB_00164f90;
LAB_00164f23:
    *(byte *)(param_9 + 0x9e) = bVar4;
  }
  else {
    uVar3 = tty_try_rgb(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        param_10 + 2,&DAT_001818bd,param_12,param_13,param_14);
    if ((int)uVar3 != 0) goto LAB_00164f49;
LAB_00164f1d:
    if ((*param_10 & 0x10) == 0) goto LAB_00164f23;
LAB_00164f90:
    *(undefined2 *)(param_9 + 0x9e) = *(undefined2 *)(param_10 + 2);
    *(byte *)(param_9 + 0xa0) = param_10[4];
  }
  bVar4 = *(byte *)(param_9 + 0x9c) & 0xee;
  *(byte *)(param_9 + 0x9c) = bVar4;
  *(byte *)(param_9 + 0x9c) = *param_10 & 0x11 | bVar4;
LAB_00164f49:
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void tty_colours_bg(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,byte *param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int iVar2;
  undefined8 uVar3;
  byte bVar4;
  long in_FS_OFFSET;
  char in_stack_ffffffffffffffa8;
  
  bVar4 = param_10[5];
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*param_10 & 0x20) == 0) {
    if ((*param_10 & 2) == 0) {
      if ((byte)(bVar4 + 0xa6) < 8) {
        xsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  &stack0xffffffffffffffa8,0x20,&DAT_00181c1b,(ulong)(bVar4 + 10),param_13,param_14,
                  in_stack_ffffffffffffffa8);
        if (in_stack_ffffffffffffffa8 != '\0') {
          FUN_001630e0(param_9,&stack0xffffffffffffffa8);
        }
      }
      else {
        FUN_00163140(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xbb,
                     (ulong)bVar4,param_12,param_13,param_14);
      }
      goto LAB_00165062;
    }
    iVar2 = tty_try_256(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        bVar4,"48",param_12,param_13,param_14);
    if (iVar2 != 0) goto LAB_00165093;
    if ((*param_10 & 0x20) != 0) goto LAB_001650d0;
LAB_00165067:
    *(byte *)(param_9 + 0xa1) = bVar4;
  }
  else {
    uVar3 = tty_try_rgb(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        param_10 + 5,&DAT_001818f3,param_12,param_13,param_14);
    if ((int)uVar3 != 0) goto LAB_00165093;
LAB_00165062:
    if ((*param_10 & 0x20) == 0) goto LAB_00165067;
LAB_001650d0:
    *(undefined2 *)(param_9 + 0xa1) = *(undefined2 *)(param_10 + 5);
    *(byte *)(param_9 + 0xa3) = param_10[7];
  }
  bVar4 = *(byte *)(param_9 + 0x9c) & 0xdd;
  *(byte *)(param_9 + 0x9c) = bVar4;
  *(byte *)(param_9 + 0x9c) = *param_10 & 0x22 | bVar4;
LAB_00165093:
  if (lVar1 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void tty_colours(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,byte *param_10,undefined8 param_11,ulong param_12,undefined8 param_13)

{
  byte *pbVar1;
  bool bVar2;
  byte bVar3;
  bool bVar4;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  undefined7 extraout_var_02;
  undefined7 extraout_var_03;
  uint uVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  byte *pbVar6;
  undefined8 uVar7;
  byte *pbVar8;
  ulong uVar9;
  bool bVar10;
  bool bVar11;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  
  pbVar1 = (byte *)(param_9 + 0x9c);
  pbVar6 = pbVar1;
  pbVar8 = param_10;
  bVar2 = FUN_00163020(param_10,pbVar1);
  uVar9 = CONCAT71(extraout_var,bVar2) & 0xffffffff;
  uVar12 = extraout_XMM0_Da;
  if (((int)CONCAT71(extraout_var,bVar2) != 0) &&
     (bVar2 = FUN_00163080(pbVar8,pbVar6), uVar12 = extraout_XMM0_Da_00,
     (int)CONCAT71(extraout_var_00,bVar2) != 0)) {
    return;
  }
  uVar5 = *param_10 & 0x22;
  if ((*param_10 & 0x11) == 0) {
    bVar10 = param_10[2] == 8;
    bVar2 = bVar10;
    if ((char)uVar5 == '\0') {
LAB_001651be:
      bVar11 = param_10[5] == 8;
      bVar10 = (bool)(bVar11 | bVar2);
    }
    else {
      bVar11 = false;
    }
    if (bVar10) {
      uVar5 = tty_term_flag(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            *(long *)(param_9 + 0x48),0,(ulong)uVar5,param_12,param_13,uVar9);
      uVar12 = extraout_XMM0_Da_02;
      if (uVar5 == 0) {
        uVar7 = 0xb4;
        bVar4 = tty_term_has(*(long *)(param_9 + 0x48),0xb4);
        param_12 = 0;
        uVar12 = extraout_XMM0_Da_04;
        if ((int)CONCAT71(extraout_var_03,bVar4) == 0) goto LAB_00165226;
        tty_reset(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  param_9,uVar7,extraout_RDX_01,0,param_13,uVar9);
        bVar10 = bVar11;
        if (!bVar2) goto LAB_001652f9;
      }
      else {
LAB_00165226:
        param_12 = (ulong)uVar5;
        bVar3 = *(byte *)(param_9 + 0x9c);
        if (bVar2) {
          if ((bVar3 & 0x11) == 0) {
            if (*(char *)(param_9 + 0x9e) != '\b') {
              if (uVar5 != 0) goto LAB_001653c0;
              if (*(char *)(param_9 + 0x9e) != '\a') goto LAB_00165256;
              goto LAB_00165279;
            }
          }
          else {
            if (uVar5 == 0) {
LAB_00165256:
              uVar12 = FUN_00163140(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                    param_9,0xbc,7,param_12,param_13,uVar9);
              bVar3 = *(byte *)(param_9 + 0x9c);
            }
            else {
LAB_001653c0:
              uVar12 = FUN_001630e0(param_9,"\x1b[39m");
              bVar3 = *(byte *)(param_9 + 0x9c);
            }
LAB_00165279:
            *(undefined *)(param_9 + 0x9e) = 8;
            *(byte *)(param_9 + 0x9c) = bVar3 & 0xee;
          }
          if (!bVar11) goto LAB_001651dd;
          bVar3 = *(byte *)(param_9 + 0x9c);
        }
        if ((bVar3 & 0x22) == 0) {
          if (*(char *)(param_9 + 0xa1) != '\b') {
            if (uVar5 != 0) goto LAB_00165398;
            if (*(char *)(param_9 + 0xa1) != '\0') goto LAB_001652c2;
            goto LAB_001652da;
          }
        }
        else {
          if (uVar5 == 0) {
LAB_001652c2:
            FUN_00163140(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xbb
                         ,0,param_12,param_13,uVar9);
            bVar3 = *(byte *)(param_9 + 0x9c);
          }
          else {
LAB_00165398:
            FUN_001630e0(param_9,"\x1b[49m");
            bVar3 = *(byte *)(param_9 + 0x9c);
          }
LAB_001652da:
          *(undefined *)(param_9 + 0xa1) = 8;
          *(byte *)(param_9 + 0x9c) = bVar3 & 0xdd;
        }
        if (bVar2) {
          return;
        }
LAB_001652f9:
        bVar2 = FUN_00163020(param_10,pbVar1);
        if ((int)CONCAT71(extraout_var_02,bVar2) != 0) {
          return;
        }
        tty_colours_fg(extraout_XMM0_Da_03,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_9,param_10,extraout_RDX_00,param_12,param_13,uVar9);
        bVar11 = bVar10;
      }
      if (bVar11) {
        return;
      }
      goto LAB_001651dd;
    }
  }
  else {
    bVar2 = false;
    if ((char)uVar5 == '\0') goto LAB_001651be;
  }
  if ((int)uVar9 == 0) {
    tty_colours_fg(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                   (ulong)uVar5,param_12,param_13,uVar9);
  }
LAB_001651dd:
  bVar2 = FUN_00163080(param_10,pbVar1);
  if ((int)CONCAT71(extraout_var_01,bVar2) != 0) {
    return;
  }
  tty_colours_bg(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                 ,param_10,extraout_RDX,param_12,param_13,uVar9);
  return;
}



void tty_attributes(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long param_9,ulong *param_10,long param_11,ulong param_12,undefined8 param_13,
                   undefined8 param_14)

{
  bool bVar1;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  undefined7 extraout_var_02;
  ulong extraout_RDX;
  ulong uVar2;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  undefined8 extraout_RDX_05;
  undefined8 extraout_RDX_06;
  undefined8 extraout_RDX_07;
  undefined8 extraout_RDX_08;
  undefined8 extraout_RDX_09;
  undefined8 extraout_RDX_10;
  ulong extraout_RDX_11;
  undefined8 extraout_RDX_12;
  byte bVar3;
  undefined8 *puVar4;
  undefined8 *puVar5;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined8 uVar7;
  undefined8 uVar8;
  undefined8 local_38;
  ulong uStack_30;
  undefined4 local_28;
  long local_20;
  
  puVar4 = &local_38;
  puVar5 = &local_38;
  local_38 = *param_10;
  uStack_30 = param_10[1];
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_28 = *(undefined4 *)(param_10 + 2);
  if (param_11 != 0) {
    FUN_001631d0(local_38,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(byte *)&local_38,
                 param_11,param_11,param_12,param_13,param_14);
  }
  bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xbb);
  uVar2 = extraout_RDX;
  if ((int)CONCAT71(extraout_var,bVar1) == 0) {
    if ((local_38 & 0x1000) == 0) {
      if ((local_38 & 0xf70000000000) != 0) {
        local_38 = local_38 | 0x1000;
      }
    }
    else {
      param_12 = (ulong)local_38._2_1_;
      uVar2 = (ulong)(local_38._2_1_ - 7);
      if (1 < (byte)(local_38._2_1_ - 7)) {
        local_38 = local_38 & 0xffffffffffffefff;
      }
    }
  }
  uVar6 = tty_check_fg(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_9,(byte *)&local_38,uVar2,param_12,param_13,param_14);
  uVar7 = tty_check_bg(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       (byte *)&local_38,extraout_RDX_00,param_12,param_13,param_14);
  uVar2 = (ulong)*(byte *)(param_9 + 0x9d);
  if ((~local_38._1_1_ & *(byte *)(param_9 + 0x9d)) != 0) {
    uVar7 = tty_reset((int)uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      puVar4,uVar2,param_12,param_13,param_14);
    uVar2 = extraout_RDX_11;
  }
  uVar8 = tty_colours(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      (byte *)&local_38,uVar2,param_12,param_13);
  bVar3 = *(byte *)(param_9 + 0x9d);
  *(byte *)(param_9 + 0x9d) = local_38._1_1_;
  bVar3 = ~bVar3 & local_38._1_1_;
  uVar7 = extraout_RDX_01;
  if ((bVar3 & 1) != 0) {
    puVar5 = (undefined8 *)0x5;
    uVar8 = tty_putcode((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,5
                        ,extraout_RDX_01,param_12,param_13,param_14);
    uVar7 = extraout_RDX_10;
  }
  if ((bVar3 & 2) != 0) {
    puVar5 = (undefined8 *)0x19;
    uVar8 = tty_putcode((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        0x19,uVar7,param_12,param_13,param_14);
    uVar7 = extraout_RDX_09;
  }
  if ((bVar3 & 0x40) != 0) {
    uVar8 = tty_set_italics(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            puVar5,uVar7,param_12,param_13,param_14);
    uVar7 = extraout_RDX_08;
  }
  uVar6 = (undefined4)uVar8;
  if ((bVar3 & 4) != 0) {
    uVar6 = tty_putcode(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xc3,
                        uVar7,param_12,param_13,param_14);
    uVar7 = extraout_RDX_07;
  }
  if ((bVar3 & 8) != 0) {
    uVar6 = tty_putcode(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,4,
                        uVar7,param_12,param_13,param_14);
    uVar7 = extraout_RDX_06;
  }
  if ((bVar3 & 0x10) != 0) {
    bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xb5);
    if ((int)CONCAT71(extraout_var_01,bVar1) == 0) {
      bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0xc2);
      uVar7 = extraout_RDX_04;
      uVar6 = extraout_XMM0_Da_02;
      if ((int)CONCAT71(extraout_var_02,bVar1) != 0) {
        uVar6 = tty_putcode(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,
                            param_8,param_9,0xc2,extraout_RDX_04,param_12,param_13,param_14);
        uVar7 = extraout_RDX_05;
      }
    }
    else {
      uVar6 = tty_putcode(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,
                          param_8,param_9,0xb5,extraout_RDX_03,param_12,param_13,param_14);
      uVar7 = extraout_RDX_12;
    }
  }
  if ((bVar3 & 0x20) != 0) {
    tty_putcode(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0x28,uVar7,
                param_12,param_13,param_14);
  }
  if ((((char)bVar3 < '\0') &&
      (bVar1 = tty_term_has(*(long *)(param_9 + 0x48),1), (int)CONCAT71(extraout_var_00,bVar1) != 0)
      ) && ((*(byte *)(param_9 + 0xb0) & 8) == 0)) {
    tty_putcode(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                0xbf,extraout_RDX_02,param_12,param_13,param_14);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void tty_cmd_clearcharacter
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  bool bVar1;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined8 extraout_RDX;
  uint uVar2;
  undefined4 uVar3;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  
  uVar3 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)grid_default_cell,*param_10,param_12,param_13,param_14);
  tty_cursor(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
             *(int *)(param_10 + 6) + *(int *)(param_10 + 4),
             *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),param_12,param_13,
             param_14);
  bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0x1d);
  if (((int)CONCAT71(extraout_var,bVar1) != 0) &&
     (bVar1 = tty_fake_bce(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_9,*param_10,extraout_RDX,param_12,
                           param_13,param_14), (int)CONCAT71(extraout_var_00,bVar1) == 0)) {
    if ((int)*(uint *)(param_10 + 2) < 0) {
      return;
    }
    FUN_00163140(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                 ,0x1d,(ulong)*(uint *)(param_10 + 2),param_12,param_13,param_14);
    return;
  }
  uVar2 = 0;
  if (*(int *)(param_10 + 2) != 0) {
    do {
      uVar2 = uVar2 + 1;
      tty_putc(param_9,0x20);
    } while (uVar2 < *(uint *)(param_10 + 2));
  }
  return;
}



void tty_cmd_clearline(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,long *param_10,undefined8 param_11,ulong param_12,
                      undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  bool bVar5;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  ulong uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  int iVar7;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da;
  
  lVar2 = *param_10;
  lVar3 = *(long *)(lVar2 + 0x140);
  uVar8 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)grid_default_cell,lVar2,param_12,param_13,param_14);
  uVar4 = tty_cursor(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(uint *)(param_10 + 6),
                     *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),param_12,
                     param_13,param_14);
  if ((((*(int *)(param_10 + 6) == 0) &&
       (uVar6 = (ulong)*(uint *)(param_9 + 0x10),
       *(uint *)(param_9 + 0x10) <= *(uint *)(*(long *)(*(long *)(*param_10 + 0x140) + 8) + 4))) &&
      (bVar5 = tty_fake_bce(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            lVar2,extraout_RDX,uVar6,param_13,param_14),
      (int)CONCAT71(extraout_var,bVar5) == 0)) &&
     (bVar5 = tty_term_has(*(long *)(param_9 + 0x48),0x1e),
     (int)CONCAT71(extraout_var_00,bVar5) != 0)) {
    tty_putcode(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                0x1e,extraout_RDX_00,uVar6,param_13,param_14);
    return;
  }
  iVar1 = *(int *)(*(long *)(lVar3 + 8) + 4);
  iVar7 = iVar1 + -1;
  if (iVar1 != 0) {
    do {
      iVar7 = iVar7 + -1;
      tty_putc(param_9,0x20);
    } while (iVar7 != -1);
  }
  return;
}



void tty_cmd_clearendofline
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  int iVar4;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  ulong uVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  int iVar6;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  
  lVar1 = *param_10;
  lVar2 = *(long *)(lVar1 + 0x140);
  uVar7 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)grid_default_cell,lVar1,param_12,param_13,param_14);
  tty_cursor(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
             *(int *)(param_10 + 6) + *(int *)(param_10 + 4),
             *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),param_12,param_13,
             param_14);
  if ((*(int *)(param_10 + 6) == 0) &&
     (uVar5 = (ulong)*(uint *)(param_9 + 0x10),
     *(uint *)(param_9 + 0x10) <= *(uint *)(*(long *)(*(long *)(*param_10 + 0x140) + 8) + 4))) {
    bVar3 = tty_term_has(*(long *)(param_9 + 0x48),0x1e);
    if ((int)CONCAT71(extraout_var,bVar3) != 0) {
      bVar3 = tty_fake_bce(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_9,lVar1,extraout_RDX,uVar5,param_13
                           ,param_14);
      if ((int)CONCAT71(extraout_var_00,bVar3) == 0) {
        tty_putcode(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    param_9,0x1e,extraout_RDX_00,uVar5,param_13,param_14);
        return;
      }
    }
  }
  iVar4 = *(int *)(*(long *)(lVar2 + 8) + 4) - *(int *)(param_10 + 4);
  iVar6 = iVar4 + -1;
  if (iVar4 != 0) {
    do {
      iVar6 = iVar6 + -1;
      tty_putc(param_9,0x20);
    } while (iVar6 != -1);
  }
  return;
}



void tty_cmd_clearstartofline
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  bool bVar1;
  undefined3 extraout_var;
  undefined3 extraout_var_00;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  
  uVar4 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)grid_default_cell,*param_10,param_12,param_13,param_14);
  uVar3 = *(uint *)(param_10 + 6);
  if (uVar3 == 0) {
    bVar1 = tty_term_has(*(long *)(param_9 + 0x48),0x1f);
    uVar4 = extraout_XMM0_Da;
    if ((CONCAT31(extraout_var,bVar1) != 0) &&
       (bVar1 = tty_fake_bce(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                             param_5,param_6,param_7,param_8,param_9,*param_10,extraout_RDX,param_12
                             ,param_13,param_14), uVar4 = extraout_XMM0_Da_00,
       CONCAT31(extraout_var_00,bVar1) == 0)) {
      uVar4 = tty_cursor(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,param_9,*(int *)(param_10 + 6) + *(int *)(param_10 + 4),
                         *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),param_12,
                         param_13,param_14);
      tty_putcode(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0x1f,
                  extraout_RDX_00,param_12,param_13,param_14);
      return;
    }
    uVar3 = *(uint *)(param_10 + 6);
  }
  tty_cursor(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar3,
             *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),param_12,param_13,
             param_14);
  for (iVar2 = *(int *)(param_10 + 4); iVar2 != -1; iVar2 = iVar2 + -1) {
    tty_putc(param_9,0x20);
  }
  return;
}



void tty_cmd_clearendofscreen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  long lVar1;
  bool bVar2;
  int iVar3;
  uint uVar4;
  long lVar5;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong uVar6;
  ulong extraout_RDX_02;
  int iVar7;
  uint uVar8;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar10;
  
  lVar5 = *param_10;
  lVar1 = *(long *)(lVar5 + 0x140);
  uVar10 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          (ulong *)grid_default_cell,lVar5,param_12,param_13,param_14);
  uVar9 = tty_region(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(uint *)((long)param_10 + 0x34),
                     (*(uint *)((long)param_10 + 0x34) - 1) + *(int *)(*(long *)(lVar1 + 8) + 8),
                     param_12,param_13,param_14);
  uVar9 = tty_cursor(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(int *)(param_10 + 6) + *(int *)(param_10 + 4),
                     *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),param_12,
                     param_13,param_14);
  if ((((*(int *)(param_10 + 6) == 0) &&
       (param_12 = (ulong)*(uint *)(param_9 + 0x10),
       *(uint *)(param_9 + 0x10) <= *(uint *)(*(long *)(*(long *)(*param_10 + 0x140) + 8) + 4))) &&
      (bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0x1e), uVar9 = extraout_XMM0_Da,
      (int)CONCAT71(extraout_var,bVar2) != 0)) &&
     (bVar2 = tty_fake_bce(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_9,lVar5,extraout_RDX,param_12,
                           param_13,param_14), uVar9 = extraout_XMM0_Da_00,
     (int)CONCAT71(extraout_var_00,bVar2) == 0)) {
    uVar9 = tty_putcode(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        param_9,0x1e,extraout_RDX_00,param_12,param_13,param_14);
    if (*(int *)((long)param_10 + 0x24) != *(int *)(*(long *)(lVar1 + 8) + 8) + -1) {
      uVar9 = tty_cursor(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         *(uint *)(param_10 + 6),
                         *(int *)((long)param_10 + 0x24) + *(int *)((long)param_10 + 0x34) + 1,
                         param_12,param_13,param_14);
      uVar8 = *(int *)((long)param_10 + 0x24) + 1;
      uVar6 = extraout_RDX_01;
      if (uVar8 < *(uint *)(*(long *)(lVar1 + 8) + 8)) {
        do {
          uVar10 = tty_putcode(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,0x1e,uVar6,param_12,param_13,param_14);
          uVar9 = (undefined4)uVar10;
          uVar4 = *(uint *)(*(long *)(lVar1 + 8) + 8);
          uVar6 = (ulong)(uVar4 - 1);
          if (uVar4 - 1 != uVar8) {
            param_12 = 1;
            uVar9 = tty_emulate_repeat(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,
                                       param_8,param_9,0xf,0x10,1,param_13,param_14);
            lVar5 = *(long *)(lVar1 + 8);
            *(int *)(param_9 + 0x1c) = *(int *)(param_9 + 0x1c) + 1;
            uVar4 = *(uint *)(lVar5 + 8);
            uVar6 = extraout_RDX_02;
          }
          uVar8 = uVar8 + 1;
        } while (uVar8 < uVar4);
      }
    }
  }
  else {
    lVar5 = *(long *)(lVar1 + 8);
    iVar3 = *(int *)(lVar5 + 4) - *(int *)(param_10 + 4);
    iVar7 = iVar3 + -1;
    if (iVar3 != 0) {
      do {
        iVar7 = iVar7 + -1;
        uVar9 = tty_putc(param_9,0x20);
      } while (iVar7 != -1);
      lVar5 = *(long *)(lVar1 + 8);
    }
    uVar8 = *(int *)((long)param_10 + 0x24) + 1;
    if (uVar8 < *(uint *)(lVar5 + 8)) {
      do {
        uVar9 = tty_cursor(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           *(uint *)(param_10 + 6),*(int *)((long)param_10 + 0x34) + uVar8,param_12,
                           param_13,param_14);
        lVar5 = *(long *)(lVar1 + 8);
        iVar7 = *(int *)(lVar5 + 4) + -1;
        if (*(int *)(lVar5 + 4) != 0) {
          do {
            iVar7 = iVar7 + -1;
            uVar9 = tty_putc(param_9,0x20);
          } while (iVar7 != -1);
          lVar5 = *(long *)(lVar1 + 8);
        }
        uVar8 = uVar8 + 1;
      } while (uVar8 < *(uint *)(lVar5 + 8));
    }
  }
  return;
}



void tty_cmd_clearstartofscreen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  int iVar1;
  long lVar2;
  long lVar3;
  bool bVar4;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 uVar5;
  undefined8 extraout_RDX_01;
  int iVar6;
  uint uVar7;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  
  lVar2 = *param_10;
  lVar3 = *(long *)(lVar2 + 0x140);
  uVar5 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)grid_default_cell,lVar2,param_12,param_13,param_14);
  uVar8 = tty_region(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(uint *)((long)param_10 + 0x34),
                     (*(uint *)((long)param_10 + 0x34) - 1) + *(int *)(*(long *)(lVar3 + 8) + 8),
                     param_12,param_13,param_14);
  uVar8 = tty_cursor(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(uint *)(param_10 + 6),*(uint *)((long)param_10 + 0x34),param_12,param_13,
                     param_14);
  if ((((*(int *)(param_10 + 6) == 0) &&
       (param_12 = (ulong)*(uint *)(param_9 + 0x10),
       *(uint *)(param_9 + 0x10) <= *(uint *)(*(long *)(*(long *)(*param_10 + 0x140) + 8) + 4))) &&
      (bVar4 = tty_term_has(*(long *)(param_9 + 0x48),0x1e), uVar8 = extraout_XMM0_Da,
      (int)CONCAT71(extraout_var,bVar4) != 0)) &&
     (bVar4 = tty_fake_bce(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_9,lVar2,extraout_RDX,param_12,
                           param_13,param_14), uVar8 = extraout_XMM0_Da_00,
     (int)CONCAT71(extraout_var_00,bVar4) == 0)) {
    uVar7 = 0;
    uVar5 = extraout_RDX_00;
    if (*(int *)((long)param_10 + 0x24) != 0) {
      do {
        uVar7 = uVar7 + 1;
        uVar5 = tty_putcode(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            0x1e,uVar5,param_12,param_13,param_14);
        param_12 = 1;
        uVar8 = tty_emulate_repeat(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                   param_9,0xf,0x10,1,param_13,param_14);
        *(int *)(param_9 + 0x1c) = *(int *)(param_9 + 0x1c) + 1;
        uVar5 = extraout_RDX_01;
      } while (uVar7 < *(uint *)((long)param_10 + 0x24));
    }
  }
  else {
    uVar7 = 0;
    if (*(int *)((long)param_10 + 0x24) != 0) {
      do {
        uVar8 = tty_cursor(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           *(uint *)(param_10 + 6),*(int *)((long)param_10 + 0x34) + uVar7,param_12,
                           param_13,param_14);
        iVar1 = *(int *)(*(long *)(lVar3 + 8) + 4);
        iVar6 = iVar1 + -1;
        if (iVar1 != 0) {
          do {
            iVar6 = iVar6 + -1;
            uVar8 = tty_putc(param_9,0x20);
          } while (iVar6 != -1);
        }
        uVar7 = uVar7 + 1;
      } while (uVar7 < *(uint *)((long)param_10 + 0x24));
    }
  }
  for (iVar6 = *(int *)(param_10 + 4); iVar6 != -1; iVar6 = iVar6 + -1) {
    tty_putc(param_9,0x20);
  }
  return;
}



void tty_cmd_clearscreen(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,long *param_10,undefined8 param_11,ulong param_12,
                        undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  bool bVar2;
  uint uVar3;
  long lVar4;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined8 extraout_RDX;
  ulong extraout_RDX_00;
  ulong uVar5;
  ulong extraout_RDX_01;
  int iVar6;
  uint uVar7;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar9;
  
  lVar4 = *param_10;
  lVar1 = *(long *)(lVar4 + 0x140);
  uVar9 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)grid_default_cell,lVar4,param_12,param_13,param_14);
  uVar8 = tty_region(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(uint *)((long)param_10 + 0x34),
                     (*(uint *)((long)param_10 + 0x34) - 1) + *(int *)(*(long *)(lVar1 + 8) + 8),
                     param_12,param_13,param_14);
  uVar8 = tty_cursor(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(uint *)(param_10 + 6),*(uint *)((long)param_10 + 0x34),param_12,param_13,
                     param_14);
  if ((((*(int *)(param_10 + 6) == 0) &&
       (param_12 = (ulong)*(uint *)(param_9 + 0x10),
       *(uint *)(param_9 + 0x10) <= *(uint *)(*(long *)(*(long *)(*param_10 + 0x140) + 8) + 4))) &&
      (bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0x1e), uVar8 = extraout_XMM0_Da,
      (int)CONCAT71(extraout_var,bVar2) != 0)) &&
     (bVar2 = tty_fake_bce(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_9,lVar4,extraout_RDX,param_12,
                           param_13,param_14), uVar8 = extraout_XMM0_Da_00,
     (int)CONCAT71(extraout_var_00,bVar2) == 0)) {
    uVar7 = 0;
    uVar5 = extraout_RDX_00;
    if (*(int *)(*(long *)(lVar1 + 8) + 8) != 0) {
      do {
        uVar9 = tty_putcode(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            0x1e,uVar5,param_12,param_13,param_14);
        uVar8 = (undefined4)uVar9;
        uVar3 = *(uint *)(*(long *)(lVar1 + 8) + 8);
        uVar5 = (ulong)(uVar3 - 1);
        if (uVar3 - 1 != uVar7) {
          param_12 = 1;
          uVar8 = tty_emulate_repeat(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                     param_9,0xf,0x10,1,param_13,param_14);
          lVar4 = *(long *)(lVar1 + 8);
          *(int *)(param_9 + 0x1c) = *(int *)(param_9 + 0x1c) + 1;
          uVar3 = *(uint *)(lVar4 + 8);
          uVar5 = extraout_RDX_01;
        }
        uVar7 = uVar7 + 1;
      } while (uVar7 < uVar3);
    }
  }
  else {
    uVar7 = 0;
    if (*(int *)(*(long *)(lVar1 + 8) + 8) != 0) {
      do {
        uVar8 = tty_cursor(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           *(uint *)(param_10 + 6),*(int *)((long)param_10 + 0x34) + uVar7,param_12,
                           param_13,param_14);
        lVar4 = *(long *)(lVar1 + 8);
        iVar6 = *(int *)(lVar4 + 4) + -1;
        if (*(int *)(lVar4 + 4) != 0) {
          do {
            iVar6 = iVar6 + -1;
            uVar8 = tty_putc(param_9,0x20);
          } while (iVar6 != -1);
          lVar4 = *(long *)(lVar1 + 8);
        }
        uVar7 = uVar7 + 1;
      } while (uVar7 < *(uint *)(lVar4 + 8));
    }
  }
  return;
}



void tty_cmd_alignmenttest
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10,undefined8 param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  ulong uVar4;
  uint uVar5;
  uint uVar6;
  undefined4 uVar7;
  
  lVar1 = *(long *)(*param_10 + 0x140);
  uVar2 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)grid_default_cell,*param_10,param_12,param_13,param_14);
  uVar7 = tty_region(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(uint *)((long)param_10 + 0x34),
                     (*(uint *)((long)param_10 + 0x34) - 1) + *(int *)(*(long *)(lVar1 + 8) + 8),
                     param_12,param_13,param_14);
  uVar6 = *(uint *)(*(long *)(lVar1 + 8) + 8);
  uVar4 = (ulong)uVar6;
  if (uVar6 != 0) {
    uVar6 = 0;
    do {
      uVar7 = tty_cursor(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         *(uint *)(param_10 + 6),*(int *)((long)param_10 + 0x34) + uVar6,uVar4,
                         param_13,param_14);
      lVar3 = *(long *)(lVar1 + 8);
      if (*(int *)(lVar3 + 4) != 0) {
        uVar5 = 0;
        do {
          uVar5 = uVar5 + 1;
          uVar7 = tty_putc(param_9,0x45);
          lVar3 = *(long *)(lVar1 + 8);
        } while (uVar5 < *(uint *)(lVar3 + 4));
      }
      uVar6 = uVar6 + 1;
    } while (uVar6 < *(uint *)(lVar3 + 8));
  }
  return;
}



void tty_cmd_rawstring(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,long *param_10,undefined8 param_11,ulong param_12,
                      undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  ulong uVar3;
  undefined4 uVar4;
  
  lVar1 = param_10[3];
  if (*(int *)(param_10 + 2) != 0) {
    uVar3 = 0;
    do {
      uVar2 = (int)uVar3 + 1;
      param_1 = tty_putc(param_9,*(byte *)(lVar1 + uVar3));
      uVar3 = (ulong)uVar2;
    } while (uVar2 < *(uint *)(param_10 + 2));
  }
  *(undefined8 *)(param_9 + 0x18) = 0xffffffffffffffff;
  lVar1 = *param_10;
  *(undefined8 *)(param_9 + 0x34) = 0xffffffffffffffff;
  uVar4 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)grid_default_cell,lVar1,param_12,param_13,param_14);
  tty_cursor(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,0,param_12,
             param_13,param_14);
  return;
}



void tty_cell(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             long param_9,ulong *param_10,long param_11,ulong param_12,undefined8 param_13,
             undefined8 param_14)

{
  byte bVar1;
  uint uVar2;
  
  if (((*(byte *)(*(long *)(param_9 + 0x48) + 0x218) & 2) == 0) ||
     (*(int *)(param_9 + 0x1c) != *(int *)(param_9 + 0x14) + -1)) {
    bVar1 = *(byte *)param_10;
  }
  else {
    if (*(int *)(param_9 + 0x18) == *(int *)(param_9 + 0x10) + -1) {
      return;
    }
    bVar1 = *(byte *)param_10;
  }
  if ((bVar1 & 4) == 0) {
    tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                   param_11,param_12,param_13,param_14);
    if (*(byte *)((long)param_10 + 0x12) == 1) {
      bVar1 = *(byte *)(param_10 + 1);
      if ((0x1f < bVar1) && (bVar1 != 0x7f)) {
        tty_putc(param_9,bVar1);
        return;
      }
    }
    else {
      if ((*(byte *)(param_9 + 0xb0) & 8) != 0) {
        tty_putn(param_9,param_10 + 1,(ulong)*(byte *)((long)param_10 + 0x12),
                 (uint)*(byte *)((long)param_10 + 0x13));
        return;
      }
      if (*(byte *)((long)param_10 + 0x13) != 0) {
        uVar2 = 0;
        do {
          uVar2 = uVar2 + 1;
          tty_putc(param_9,0x5f);
        } while (uVar2 < *(byte *)((long)param_10 + 0x13));
        return;
      }
    }
  }
  return;
}



void tty_cmd_cell(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,long *param_10,undefined8 param_11,ulong param_12,ulong param_13,
                 undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  uint uVar6;
  ulong *puVar7;
  undefined4 uVar8;
  undefined8 uVar9;
  
  lVar3 = *param_10;
  lVar4 = *(long *)(lVar3 + 0x140);
  uVar9 = tty_region(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(int *)((long)param_10 + 0x34) + *(int *)(param_10 + 5),
                     *(int *)((long)param_10 + 0x2c) + *(int *)((long)param_10 + 0x34),param_12,
                     param_13,param_14);
  uVar8 = (undefined4)uVar9;
  puVar7 = (ulong *)param_10[1];
  uVar1 = *(uint *)(lVar3 + 0x20);
  uVar5 = (ulong)*(byte *)((long)puVar7 + 0x13);
  if (uVar1 - *(byte *)((long)puVar7 + 0x13) < *(uint *)(param_10 + 4)) {
    uVar2 = *(uint *)(param_10 + 6);
    param_13 = (ulong)uVar2;
    if ((uVar2 == 0) && (uVar1 == *(uint *)(param_9 + 0x10))) {
      if (*(uint *)(param_9 + 0x18) < uVar1) {
        uVar5 = *(ulong *)(lVar4 + 8);
        uVar9 = tty_cursor(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           *(int *)(uVar5 + 4) - (uint)*(byte *)((long)param_10 + 0x4b),
                           *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),uVar5,
                           param_13,param_14);
        uVar9 = tty_cell(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)(param_10 + 7),lVar3,uVar5,param_13,param_14);
        puVar7 = (ulong *)param_10[1];
      }
    }
    else {
      uVar1 = *(uint *)((long)param_10 + 0x24);
      uVar5 = (ulong)uVar1;
      uVar6 = *(int *)((long)param_10 + 0x34) + uVar1;
      if (uVar1 == *(int *)(lVar3 + 0x2c) + *(int *)(*(long *)(lVar3 + 0x140) + 0x2c)) {
        uVar9 = tty_cursor(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           uVar2,uVar6,uVar5,param_13,param_14);
        puVar7 = (ulong *)param_10[1];
      }
      else {
        uVar9 = tty_cursor(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           uVar2,uVar6 + 1,uVar5,param_13,param_14);
        puVar7 = (ulong *)param_10[1];
      }
    }
  }
  else {
    uVar9 = tty_cursor(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       *(uint *)(param_10 + 4) + *(int *)(param_10 + 6),
                       *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),uVar5,
                       param_13,param_14);
    puVar7 = (ulong *)param_10[1];
  }
  tty_cell(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,puVar7,lVar3,uVar5,
           param_13,param_14);
  return;
}



void tty_draw_line(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,long param_10,ulong param_11,uint param_12,ulong param_13,
                  undefined8 param_14)

{
  uint *puVar1;
  uint uVar2;
  long lVar3;
  bool bVar4;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  uint uVar5;
  uint uVar6;
  ulong *puVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint uVar8;
  uint uVar9;
  int iVar10;
  ulong uVar11;
  uint uVar12;
  undefined8 uVar13;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar14;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined8 uVar15;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  uint local_64;
  byte local_58;
  long local_40;
  
  uVar12 = (uint)param_13;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar5 = *(uint *)(param_9 + 0xb0);
  *(uint *)(param_9 + 0xb0) = uVar5 | 1;
  uVar5 = uVar5 & 1;
  uVar13 = param_14;
  uVar15 = tty_update_mode(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           *(uint *)(param_9 + 0x30),param_11,(ulong)uVar5,param_13,param_14);
  lVar3 = *(long *)(param_11 + 8);
  uVar9 = *(uint *)(param_9 + 0x10);
  uVar6 = *(int *)(lVar3 + 0xc) + param_12;
  uVar11 = (ulong)uVar6;
  uVar2 = uVar9;
  if (*(uint *)(lVar3 + 4) <= uVar9) {
    uVar2 = *(uint *)(lVar3 + 4);
  }
  puVar1 = (uint *)(*(long *)(lVar3 + 0x18) + uVar11 * 0x1c);
  if (*puVar1 <= uVar2) {
    uVar2 = *puVar1;
  }
  puVar7 = (ulong *)(ulong)uVar2;
  uVar8 = (uint)param_14;
  local_64 = uVar8;
  if ((param_12 == 0) || (local_64 = param_12 + uVar8, param_13 = uVar11, local_64 == 0)) {
LAB_001661e0:
    uVar11 = param_13;
    uVar15 = tty_cursor((int)uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        uVar12,local_64,puVar7,uVar11,uVar13);
  }
  else {
    puVar7 = (ulong *)(ulong)(uVar6 - 1);
    lVar3 = *(long *)(lVar3 + 0x18) + (long)puVar7 * 0x1c;
    if ((lVar3 == 0) ||
       (((((*(byte *)(lVar3 + 0x18) & 1) == 0 || (*(uint *)(param_9 + 0x18) < uVar9)) ||
         (uVar12 != 0)) ||
        ((local_64 != *(int *)(param_9 + 0x1c) + 1U &&
         (*(int *)(param_9 + 0x1c) != uVar8 + *(int *)(param_11 + 0x2c))))))) goto LAB_001661e0;
  }
  uVar14 = (undefined4)uVar15;
  uVar9 = 0;
  if (uVar2 != 0) {
    do {
      puVar7 = (ulong *)&local_58;
      grid_view_get_cell(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         *(long *)(param_11 + 8),(ulong)uVar9,param_12,(undefined4 *)&local_58,
                         uVar11,uVar13);
      bVar4 = screen_check_selection(param_11,uVar9,param_12);
      if ((int)CONCAT71(extraout_var,bVar4) != 0) {
        local_58 = local_58 & 0xfc | *(byte *)(param_11 + 0x60) & 3;
      }
      uVar9 = uVar9 + 1;
      uVar15 = tty_cell(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                        param_6,param_7,param_8,param_9,(ulong *)&local_58,param_10,(ulong)puVar7,
                        uVar11,uVar13);
      uVar14 = (undefined4)uVar15;
    } while (uVar2 != uVar9);
  }
  uVar14 = (undefined4)uVar15;
  if (*(uint *)(param_9 + 0x10) <= uVar2) goto LAB_00166258;
  uVar14 = tty_attributes(uVar15,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          (ulong *)grid_default_cell,param_10,(ulong)puVar7,uVar11,uVar13);
  uVar14 = tty_cursor(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      uVar2 + uVar12,local_64,puVar7,uVar11,uVar13);
  uVar9 = *(uint *)(*(long *)(param_11 + 8) + 4);
  if (uVar2 == uVar9) {
LAB_00166334:
    iVar10 = (uVar9 - uVar2) + -1;
    if (uVar9 - uVar2 == 0) goto LAB_00166258;
  }
  else {
    uVar11 = (ulong)(uVar12 + uVar9);
    iVar10 = (uVar9 - uVar2) + -1;
    if (*(uint *)(param_9 + 0x10) <= uVar12 + uVar9) {
      bVar4 = tty_term_has(*(long *)(param_9 + 0x48),0x1e);
      uVar14 = extraout_XMM0_Da_00;
      if (((int)CONCAT71(extraout_var_00,bVar4) != 0) &&
         (bVar4 = tty_fake_bce(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                               param_4,param_5,param_6,param_7,param_8,param_9,param_10,extraout_RDX
                               ,puVar7,uVar11,uVar13), uVar14 = extraout_XMM0_Da_01,
         (int)CONCAT71(extraout_var_01,bVar4) == 0)) {
        uVar14 = tty_putcode(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,param_9,0x1e,extraout_RDX_00,puVar7,uVar11,uVar13);
        goto LAB_00166258;
      }
      uVar9 = *(uint *)(*(long *)(param_11 + 8) + 4);
      goto LAB_00166334;
    }
  }
  do {
    iVar10 = iVar10 + -1;
    uVar14 = tty_putc(param_9,0x20);
  } while (iVar10 != -1);
LAB_00166258:
  *(uint *)(param_9 + 0xb0) = *(uint *)(param_9 + 0xb0) & 0xfffffffe | uVar5;
  tty_update_mode(uVar14,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                  *(uint *)(param_9 + 0x30),param_11,puVar7,uVar11,uVar13);
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void tty_draw_pane(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,long param_10,uint param_11,uint param_12,uint param_13)

{
  tty_draw_line(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                *(ulong *)(param_10 + 0x140),param_11,(ulong)param_12,(ulong)param_13);
  return;
}



void tty_redraw_region(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,long *param_10)

{
  uint uVar1;
  long lVar2;
  ulong uVar3;
  uint uVar4;
  ulong uVar5;
  uint uVar6;
  
  lVar2 = *param_10;
  uVar6 = *(uint *)(param_10 + 5);
  uVar5 = *(ulong *)(lVar2 + 0x140);
  uVar1 = *(uint *)(*(long *)(uVar5 + 8) + 8);
  if (uVar1 >> 1 <= *(uint *)((long)param_10 + 0x2c) - uVar6) {
    *(uint *)(lVar2 + 0x30) = *(uint *)(lVar2 + 0x30) | 1;
    return;
  }
  uVar4 = *(uint *)((long)param_10 + 0x24);
  if ((uVar6 <= uVar4) && (uVar4 <= *(uint *)((long)param_10 + 0x2c))) {
    while( true ) {
      param_1 = tty_draw_line(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              param_9,lVar2,uVar5,uVar6,(ulong)*(uint *)(param_10 + 6),
                              (ulong)*(uint *)((long)param_10 + 0x34));
      if (*(uint *)((long)param_10 + 0x2c) < uVar6 + 1) break;
      uVar5 = *(ulong *)(lVar2 + 0x140);
      uVar6 = uVar6 + 1;
    }
    return;
  }
  uVar3 = uVar5;
  if (uVar4 < uVar1) {
    while( true ) {
      param_1 = tty_draw_line(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              param_9,lVar2,uVar3,uVar4,(ulong)*(uint *)(param_10 + 6),
                              (ulong)*(uint *)((long)param_10 + 0x34));
      if (*(uint *)(*(long *)(uVar5 + 8) + 8) <= uVar4 + 1) break;
      uVar3 = *(ulong *)(lVar2 + 0x140);
      uVar4 = uVar4 + 1;
    }
  }
  return;
}



void tty_cmd_utf8character
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10)

{
  tty_draw_line(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,*param_10,
                *(ulong *)(*param_10 + 0x140),*(uint *)((long)param_10 + 0x24),
                (ulong)*(uint *)(param_10 + 6),(ulong)*(uint *)((long)param_10 + 0x34));
  return;
}



void tty_cmd_insertline(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,long *param_10,undefined8 param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  bool bVar2;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  ulong uVar3;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Db;
  
  uVar4 = (undefined4)param_1;
  if (*(int *)(param_10 + 6) == 0) {
    uVar3 = (ulong)*(uint *)(param_9 + 0x10);
    if (*(uint *)(param_9 + 0x10) <= *(uint *)(*(long *)(*(long *)(*param_10 + 0x140) + 8) + 4)) {
      bVar2 = tty_fake_bce(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           *param_10,param_11,uVar3,param_13,param_14);
      uVar4 = extraout_XMM0_Da;
      if ((int)CONCAT71(extraout_var,bVar2) == 0) {
        bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0xc);
        uVar4 = extraout_XMM0_Da_00;
        if ((int)CONCAT71(extraout_var_00,bVar2) != 0) {
          bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0x27);
          uVar4 = extraout_XMM0_Da_01;
          if ((int)CONCAT71(extraout_var_01,bVar2) != 0) {
            uVar1 = tty_attributes(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,
                                   param_4,param_5,param_6,param_7,param_8,param_9,
                                   (ulong *)grid_default_cell,*param_10,uVar3,param_13,param_14);
            uVar4 = tty_region(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,*(int *)((long)param_10 + 0x34) + *(int *)(param_10 + 5),
                               *(int *)((long)param_10 + 0x2c) + *(int *)((long)param_10 + 0x34),
                               uVar3,param_13,param_14);
            uVar1 = tty_cursor(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,*(int *)(param_10 + 6) + *(int *)(param_10 + 4),
                               *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),
                               uVar3,param_13,param_14);
            tty_emulate_repeat(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,0x26,0x27,(ulong)*(uint *)(param_10 + 2),param_13,param_14);
            return;
          }
        }
      }
    }
  }
  tty_redraw_region(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10);
  return;
}



void tty_cmd_deleteline(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,long *param_10,undefined8 param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  bool bVar2;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  ulong uVar3;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Db;
  
  uVar4 = (undefined4)param_1;
  if (*(int *)(param_10 + 6) == 0) {
    uVar3 = (ulong)*(uint *)(param_9 + 0x10);
    if (*(uint *)(param_9 + 0x10) <= *(uint *)(*(long *)(*(long *)(*param_10 + 0x140) + 8) + 4)) {
      bVar2 = tty_fake_bce(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           *param_10,param_11,uVar3,param_13,param_14);
      uVar4 = extraout_XMM0_Da;
      if ((int)CONCAT71(extraout_var,bVar2) == 0) {
        bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0xc);
        uVar4 = extraout_XMM0_Da_00;
        if ((int)CONCAT71(extraout_var_00,bVar2) != 0) {
          bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0x1b);
          uVar4 = extraout_XMM0_Da_01;
          if ((int)CONCAT71(extraout_var_01,bVar2) != 0) {
            uVar1 = tty_attributes(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,
                                   param_4,param_5,param_6,param_7,param_8,param_9,
                                   (ulong *)grid_default_cell,*param_10,uVar3,param_13,param_14);
            uVar4 = tty_region(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,*(int *)((long)param_10 + 0x34) + *(int *)(param_10 + 5),
                               *(int *)((long)param_10 + 0x2c) + *(int *)((long)param_10 + 0x34),
                               uVar3,param_13,param_14);
            uVar1 = tty_cursor(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,*(int *)(param_10 + 6) + *(int *)(param_10 + 4),
                               *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),
                               uVar3,param_13,param_14);
            tty_emulate_repeat(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,0x1a,0x1b,(ulong)*(uint *)(param_10 + 2),param_13,param_14);
            return;
          }
        }
      }
    }
  }
  tty_redraw_region(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10);
  return;
}



void tty_cmd_reverseindex
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined8 uVar1;
  bool bVar2;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  ulong uVar3;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Db;
  
  uVar4 = (undefined4)param_1;
  if (*(int *)((long)param_10 + 0x24) != *(int *)(param_10 + 5)) {
    return;
  }
  if (*(int *)(param_10 + 6) == 0) {
    uVar3 = (ulong)*(uint *)(param_9 + 0x10);
    if (*(uint *)(param_9 + 0x10) <= *(uint *)(*(long *)(*(long *)(*param_10 + 0x140) + 8) + 4)) {
      bVar2 = tty_fake_bce(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           *param_10,param_11,uVar3,param_13,param_14);
      uVar4 = extraout_XMM0_Da;
      if ((int)CONCAT71(extraout_var,bVar2) == 0) {
        bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0xc);
        uVar4 = extraout_XMM0_Da_00;
        if ((int)CONCAT71(extraout_var_00,bVar2) != 0) {
          bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0xb6);
          uVar4 = extraout_XMM0_Da_01;
          if ((int)CONCAT71(extraout_var_01,bVar2) != 0) {
            uVar1 = tty_attributes(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,
                                   param_4,param_5,param_6,param_7,param_8,param_9,
                                   (ulong *)grid_default_cell,*param_10,uVar3,param_13,param_14);
            uVar4 = tty_region(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,*(int *)((long)param_10 + 0x34) + *(int *)(param_10 + 5),
                               *(int *)((long)param_10 + 0x2c) + *(int *)((long)param_10 + 0x34),
                               uVar3,param_13,param_14);
            uVar4 = tty_cursor(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,*(int *)(param_10 + 6) + *(int *)(param_10 + 4),
                               *(int *)((long)param_10 + 0x34) + *(int *)(param_10 + 5),uVar3,
                               param_13,param_14);
            tty_putcode(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0xb6,
                        extraout_RDX,uVar3,param_13,param_14);
            return;
          }
        }
      }
    }
  }
  tty_redraw_region(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10);
  return;
}



void tty_cmd_linefeed(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     long param_9,long *param_10,undefined8 param_11,undefined8 param_12,
                     undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  bool bVar3;
  int iVar4;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  ulong uVar5;
  long lVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar7;
  undefined4 extraout_XMM0_Db;
  
  uVar7 = (undefined4)param_1;
  iVar4 = *(int *)((long)param_10 + 0x2c);
  if (*(int *)((long)param_10 + 0x24) != iVar4) {
    return;
  }
  lVar1 = *param_10;
  lVar6 = *(long *)(*(long *)(lVar1 + 0x140) + 8);
  if ((*(int *)(param_10 + 6) == 0) &&
     (uVar5 = (ulong)*(uint *)(param_9 + 0x10), *(uint *)(param_9 + 0x10) <= *(uint *)(lVar6 + 4)))
  {
    bVar3 = tty_fake_bce(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         lVar1,lVar6,uVar5,param_13,param_14);
    uVar7 = extraout_XMM0_Da;
    if (((int)CONCAT71(extraout_var,bVar3) == 0) &&
       (bVar3 = tty_term_has(*(long *)(param_9 + 0x48),0xc), uVar7 = extraout_XMM0_Da_00,
       (int)CONCAT71(extraout_var_00,bVar3) != 0)) {
      if ((*(int *)(param_10 + 2) != 0) && ((*(byte *)(*(long *)(param_9 + 0x48) + 0x218) & 2) == 0)
         ) {
        return;
      }
      uVar2 = tty_attributes(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                             param_5,param_6,param_7,param_8,param_9,(ulong *)grid_default_cell,
                             lVar1,uVar5,param_13,param_14);
      uVar7 = tty_region(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         *(int *)((long)param_10 + 0x34) + *(int *)(param_10 + 5),
                         *(int *)((long)param_10 + 0x2c) + *(int *)((long)param_10 + 0x34),uVar5,
                         param_13,param_14);
      tty_cursor(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                 *(int *)(param_10 + 6) + *(int *)(param_10 + 4),
                 *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),uVar5,param_13,
                 param_14);
      tty_putc(param_9,10);
      return;
    }
    iVar4 = *(int *)((long)param_10 + 0x2c);
    lVar6 = *(long *)(*(long *)(*param_10 + 0x140) + 8);
  }
  if (*(uint *)(lVar6 + 8) >> 1 <= (uint)(iVar4 - *(int *)(param_10 + 5))) {
    *(uint *)(lVar1 + 0x30) = *(uint *)(lVar1 + 0x30) | 1;
    return;
  }
  tty_redraw_region(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10);
  return;
}



void tty_cmd_insertcharacter
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10)

{
  long lVar1;
  undefined8 uVar2;
  bool bVar3;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  ulong uVar4;
  undefined8 extraout_RDX;
  ulong uVar5;
  undefined8 in_R9;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar7;
  
  lVar1 = *param_10;
  uVar5 = (ulong)*(uint *)(param_10 + 6);
  if ((*(uint *)(param_10 + 6) != 0) ||
     (uVar4 = (ulong)*(uint *)(param_9 + 0x10),
     *(uint *)(*(long *)(*(ulong *)(lVar1 + 0x140) + 8) + 4) < *(uint *)(param_9 + 0x10))) {
    tty_draw_line((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,lVar1
                  ,*(ulong *)(lVar1 + 0x140),*(uint *)((long)param_10 + 0x24),uVar5,
                  (ulong)*(uint *)((long)param_10 + 0x34));
    return;
  }
  uVar6 = tty_attributes(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong *)grid_default_cell,lVar1,uVar4,uVar5,in_R9);
  uVar2 = tty_cursor(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     *(int *)(param_10 + 6) + *(int *)(param_10 + 4),
                     *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),uVar4,uVar5,
                     in_R9);
  bVar3 = tty_fake_bce(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,lVar1,
                       extraout_RDX,uVar4,uVar5,in_R9);
  uVar6 = extraout_XMM0_Da;
  if ((int)CONCAT71(extraout_var,bVar3) == 0) {
    bVar3 = tty_term_has(*(long *)(param_9 + 0x48),0x24);
    uVar6 = extraout_XMM0_Da_00;
    uVar7 = extraout_XMM0_Db;
    if ((int)CONCAT71(extraout_var_00,bVar3) == 0) {
      bVar3 = tty_term_has(*(long *)(param_9 + 0x48),0x25);
      uVar6 = extraout_XMM0_Da_01;
      uVar7 = extraout_XMM0_Db_00;
      if ((int)CONCAT71(extraout_var_01,bVar3) == 0) goto LAB_00166910;
    }
    tty_emulate_repeat(CONCAT44(uVar7,uVar6),param_2,param_3,param_4,param_5,param_6,param_7,param_8
                       ,param_9,0x24,0x25,(ulong)*(uint *)(param_10 + 2),uVar5,in_R9);
    return;
  }
LAB_00166910:
  tty_draw_line(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,lVar1,
                *(ulong *)(lVar1 + 0x140),*(uint *)((long)param_10 + 0x24),
                (ulong)*(uint *)(param_10 + 6),(ulong)*(uint *)((long)param_10 + 0x34));
  return;
}



void tty_cmd_deletecharacter
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10)

{
  long lVar1;
  bool bVar2;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  undefined7 extraout_var_02;
  undefined7 extraout_var_03;
  ulong uVar3;
  ulong uVar4;
  ulong uVar5;
  undefined8 in_R9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 uVar7;
  
  uVar6 = (undefined4)param_1;
  lVar1 = *param_10;
  uVar5 = (ulong)*(uint *)(param_10 + 6);
  uVar4 = *(ulong *)(lVar1 + 0x140);
  if ((*(uint *)(param_10 + 6) == 0) &&
     (uVar3 = (ulong)*(uint *)(param_9 + 0x10),
     *(uint *)(param_9 + 0x10) <= *(uint *)(*(long *)(uVar4 + 8) + 4))) {
    bVar2 = tty_fake_bce(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         lVar1,uVar4,uVar3,uVar5,in_R9);
    uVar6 = extraout_XMM0_Da;
    if ((int)CONCAT71(extraout_var,bVar2) == 0) {
      bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0x17);
      uVar6 = extraout_XMM0_Da_00;
      uVar7 = extraout_XMM0_Db;
      if ((int)CONCAT71(extraout_var_00,bVar2) != 0) {
LAB_001669ce:
        uVar6 = tty_attributes(CONCAT44(uVar7,uVar6),param_2,param_3,param_4,param_5,param_6,param_7
                               ,param_8,param_9,(ulong *)grid_default_cell,lVar1,uVar3,uVar5,in_R9);
        tty_cursor(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                   *(int *)(param_10 + 6) + *(int *)(param_10 + 4),
                   *(int *)((long)param_10 + 0x34) + *(int *)((long)param_10 + 0x24),uVar3,uVar5,
                   in_R9);
        bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0x17);
        uVar6 = extraout_XMM0_Da_02;
        uVar7 = extraout_XMM0_Db_01;
        if ((int)CONCAT71(extraout_var_02,bVar2) == 0) {
          bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0x18);
          uVar6 = extraout_XMM0_Da_03;
          uVar7 = extraout_XMM0_Db_02;
          if ((int)CONCAT71(extraout_var_03,bVar2) == 0) {
            return;
          }
        }
        tty_emulate_repeat(CONCAT44(uVar7,uVar6),param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_9,0x17,0x18,(ulong)*(uint *)(param_10 + 2),uVar5,in_R9);
        return;
      }
      bVar2 = tty_term_has(*(long *)(param_9 + 0x48),0x18);
      uVar6 = extraout_XMM0_Da_01;
      uVar7 = extraout_XMM0_Db_00;
      if ((int)CONCAT71(extraout_var_01,bVar2) != 0) goto LAB_001669ce;
    }
    uVar5 = (ulong)*(uint *)(param_10 + 6);
    uVar4 = *(ulong *)(lVar1 + 0x140);
  }
  tty_draw_line(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,lVar1,uVar4,
                *(uint *)((long)param_10 + 0x24),uVar5,(ulong)*(uint *)((long)param_10 + 0x34));
  return;
}



void tty_default_colours(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,byte *param_9,long param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  if (param_10 != 0) {
    FUN_001631d0(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                 param_11,param_12,param_13,param_14);
    return;
  }
  return;
}



void utf8_set(undefined *param_1,undefined param_2)

{
  *param_1 = param_2;
  *(undefined8 *)(param_1 + 1) = 0;
  *(undefined2 *)(param_1 + 9) = 0x101;
  param_1[0xb] = 1;
  return;
}



void utf8_copy(undefined8 *param_1,undefined8 *param_2)

{
  uint uVar1;
  ulong uVar2;
  
  *param_1 = *param_2;
  uVar1 = *(uint *)(param_2 + 1);
  *(uint *)(param_1 + 1) = uVar1;
  if ((byte)(uVar1 >> 0x10) < 9) {
    uVar2 = (ulong)(uVar1 >> 0x10 & 0xff);
    do {
      *(undefined *)((long)param_1 + uVar2) = 0;
      uVar2 = uVar2 + 1;
    } while ((uint)uVar2 < 9);
  }
  return;
}



char utf8_combine(char *param_1,wchar_t *param_2)

{
  int iVar1;
  size_t __n;
  
  iVar1 = mbtowc(param_2,param_1,(ulong)(byte)param_1[10]);
  if (iVar1 != -1) {
    return (iVar1 == 0) + '\x01';
  }
  __n = __ctype_get_mb_cur_max();
  mbtowc((wchar_t *)0x0,(char *)0x0,__n);
  return '\x02';
}



ulong utf8_append(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 char *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  byte bVar2;
  char cVar3;
  uint uVar4;
  undefined7 extraout_var;
  ulong uVar5;
  long in_FS_OFFSET;
  undefined1 in_stack_ffffffffffffffd8;
  wchar_t local_24;
  long local_20;
  
  bVar1 = param_9[10];
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  bVar2 = param_9[9];
  if (bVar1 <= bVar2) {
                    // WARNING: Subroutine does not return
    fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "UTF-8 character overflow",param_10,(ulong)bVar1,param_12,param_13,param_14,
           in_stack_ffffffffffffffd8);
  }
  if (9 < bVar1) {
                    // WARNING: Subroutine does not return
    fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "UTF-8 character size too large",param_10,(ulong)bVar1,param_12,param_13,param_14,
           in_stack_ffffffffffffffd8);
  }
  if ((bVar2 != 0) && (((byte)param_10 & 0xc0) != 0x80)) {
    param_9[0xb] = -1;
  }
  uVar5 = 0;
  param_9[9] = bVar2 + 1;
  param_9[bVar2] = (byte)param_10;
  if ((bVar1 == (byte)(bVar2 + 1)) && (uVar5 = 2, param_9[0xb] != -1)) {
    cVar3 = utf8_combine(param_9,&local_24);
    uVar5 = CONCAT71(extraout_var,cVar3) & 0xffffffff;
    if ((int)CONCAT71(extraout_var,cVar3) == 1) {
      uVar4 = wcwidth(local_24);
      if (uVar4 < 0x100) {
        param_9[0xb] = (char)uVar4;
        goto LAB_00166b81;
      }
    }
    uVar5 = 2;
  }
LAB_00166b81:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
utf8_open(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
         undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
         undefined8 *param_9,uint param_10,ulong param_11,undefined8 param_12,undefined8 param_13,
         undefined8 param_14)

{
  byte bVar1;
  
  bVar1 = (byte)param_10;
  *param_9 = 0;
  *(undefined4 *)(param_9 + 1) = 0;
  if ((byte)(bVar1 + 0x3e) < 0x1e) {
    *(undefined *)((long)param_9 + 10) = 2;
  }
  else if ((byte)(bVar1 + 0x20) < 0x10) {
    *(undefined *)((long)param_9 + 10) = 3;
  }
  else {
    param_11 = (ulong)(param_10 + 0x10);
    if (4 < (byte)(param_10 + 0x10)) {
      return 2;
    }
    *(undefined *)((long)param_9 + 10) = 4;
  }
  utf8_append(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(char *)param_9,
              (ulong)bVar1,param_11,param_12,param_13,param_14);
  return 0;
}



undefined8 utf8_split(wchar_t param_1,undefined8 *param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  long lVar4;
  ulong uVar5;
  undefined8 uVar6;
  long in_FS_OFFSET;
  undefined8 uStack_40;
  undefined4 local_38;
  undefined4 uStack_34;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uStack_40 = (Alignment *)0x166c6e;
  uVar1 = wctomb((char *)&local_38,param_1);
  uVar6 = 2;
  if (uVar1 - 1 < 9) {
    if (uVar1 < 8) {
      if ((uVar1 & 4) == 0) {
        if ((uVar1 != 0) && (*(undefined *)param_2 = (undefined)local_38, (uVar1 & 2) != 0)) {
          *(undefined2 *)((long)param_2 + ((ulong)uVar1 - 2)) =
               *(undefined2 *)((long)&uStack_40 + (ulong)uVar1 + 6);
        }
      }
      else {
        *(undefined4 *)param_2 = local_38;
        *(undefined4 *)((long)param_2 + ((ulong)uVar1 - 4)) =
             *(undefined4 *)((long)&uStack_40 + (ulong)uVar1 + 4);
      }
    }
    else {
      *param_2 = CONCAT44(uStack_34,local_38);
      *(undefined8 *)((long)param_2 + ((ulong)uVar1 - 8)) =
           *(undefined8 *)((long)&uStack_40 + (ulong)uVar1);
      lVar4 = (long)param_2 - ((ulong)(param_2 + 1) & 0xfffffffffffffff8);
      uVar3 = (int)lVar4 + uVar1 & 0xfffffff8;
      if (7 < uVar3) {
        uVar2 = 0;
        do {
          uVar5 = (ulong)uVar2;
          uVar2 = uVar2 + 8;
          *(undefined8 *)(((ulong)(param_2 + 1) & 0xfffffffffffffff8) + uVar5) =
               *(undefined8 *)((long)&local_38 + (uVar5 - lVar4));
        } while (uVar2 < uVar3);
      }
    }
    *(char *)((long)param_2 + 10) = (char)uVar1;
    uStack_40 = (Alignment *)0x166ccf;
    uVar1 = wcwidth(param_1);
    if (0xff < uVar1) {
      uVar1 = 0xff;
    }
    *(char *)((long)param_2 + 0xb) = (char)uVar1;
    uVar6 = 1;
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar6;
  }
                    // WARNING: Subroutine does not return
  uStack_40 = &UNK_00166d47;
  __stack_chk_fail();
}



int utf8_strvis(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined2 *param_9,byte *param_10,ulong param_11,ulong param_12,undefined8 param_13,
               undefined8 param_14)

{
  byte *pbVar1;
  undefined *puVar2;
  byte bVar3;
  undefined8 uVar4;
  undefined2 *puVar5;
  ulong uVar6;
  ulong uVar7;
  ulong uVar8;
  ulong extraout_RDX;
  ulong extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong extraout_RDX_02;
  undefined2 *puVar9;
  byte *pbVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  int local_60;
  undefined8 local_4c;
  byte local_43;
  byte local_42;
  long local_40;
  
  pbVar1 = param_10 + param_11;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_10 < pbVar1) {
    uVar8 = param_12;
    puVar5 = param_9;
    do {
      while( true ) {
        pbVar10 = param_10 + 1;
        uVar4 = utf8_open(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_4c,
                          (uint)*param_10,param_11,uVar8,param_13,param_14);
        param_11 = extraout_RDX;
        param_1 = extraout_XMM0_Da;
        if ((int)uVar4 != 0) break;
        uVar7 = extraout_RDX;
        uVar11 = extraout_XMM0_Da;
        if (pbVar1 <= pbVar10) {
LAB_00166e4f:
          param_10 = pbVar10 + -(ulong)local_43;
          pbVar10 = param_10 + 1;
          break;
        }
        do {
          bVar3 = *pbVar10;
          pbVar10 = pbVar10 + 1;
          uVar6 = utf8_append(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (char *)&local_4c,(ulong)bVar3,uVar7,uVar8,param_13,param_14);
          if ((int)uVar6 != 0) break;
          uVar7 = extraout_RDX_01;
          uVar11 = extraout_XMM0_Da_01;
        } while (pbVar10 < pbVar1);
        param_11 = extraout_RDX_01;
        param_1 = extraout_XMM0_Da_01;
        if ((int)uVar6 != 1) goto LAB_00166e4f;
        if (local_42 != 0) {
          uVar7 = 0;
          puVar9 = puVar5;
          do {
            puVar2 = (undefined *)((long)&local_4c + uVar7);
            uVar7 = uVar7 + 1;
            puVar5 = (undefined2 *)((long)puVar9 + 1);
            *(undefined *)puVar9 = *puVar2;
            param_11 = (ulong)local_42;
            puVar9 = puVar5;
          } while (uVar7 < param_11);
        }
LAB_00166da9:
        param_10 = pbVar10;
        if (pbVar1 <= pbVar10) goto LAB_00166dea;
      }
      if (pbVar1 + -1 <= param_10) {
        if (param_10 < pbVar1) {
          uVar8 = 0;
          puVar5 = vis(puVar5,(int)(char)*param_10,(uint)param_12,'\0');
          param_11 = extraout_RDX_02;
          param_1 = extraout_XMM0_Da_02;
        }
        goto LAB_00166da9;
      }
      uVar8 = (ulong)(uint)(int)(char)param_10[1];
      puVar5 = vis(puVar5,(int)(char)*param_10,(uint)param_12,param_10[1]);
      param_11 = extraout_RDX_00;
      param_10 = pbVar10;
      param_1 = extraout_XMM0_Da_00;
    } while (pbVar10 < pbVar1);
LAB_00166dea:
    local_60 = (int)param_9;
    local_60 = (int)puVar5 - local_60;
    param_9 = puVar5;
  }
  else {
    local_60 = 0;
  }
  *(undefined *)param_9 = 0;
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return local_60;
}



void utf8_sanitize(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  byte *param_9,undefined8 param_10,undefined8 param_11,ulong param_12,
                  undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  undefined8 uVar2;
  ulong uVar3;
  long lVar4;
  long lVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  long lVar6;
  long lVar7;
  byte *pbVar8;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined auVar10 [16];
  uint local_5c;
  undefined8 local_4c;
  byte local_43;
  byte local_41;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (*param_9 == 0) {
    lVar4 = 1;
    lVar6 = 0;
    lVar5 = 0;
  }
  else {
    lVar6 = 0;
    lVar5 = 0;
    do {
      lVar4 = lVar6 + 1;
      pbVar8 = param_9 + 1;
      auVar10 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar5,
                              lVar4,1,param_12,param_13,param_14);
      lVar5 = auVar10._0_8_;
      uVar2 = utf8_open(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        &local_4c,(uint)*param_9,auVar10._8_8_,param_12,param_13,param_14);
      param_1 = extraout_XMM0_Da_00;
      if ((int)uVar2 == 0) {
        bVar1 = param_9[1];
        uVar2 = extraout_RDX;
        uVar9 = extraout_XMM0_Da_00;
        if (bVar1 == 0) {
LAB_00166f9f:
          param_9 = pbVar8 + -(ulong)local_43;
          pbVar8 = param_9 + 1;
          goto LAB_00166f10;
        }
        do {
          pbVar8 = pbVar8 + 1;
          uVar3 = utf8_append(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (char *)&local_4c,(ulong)bVar1,uVar2,param_12,param_13,param_14);
          bVar1 = *pbVar8;
          if ((int)uVar3 != 0) break;
          uVar2 = extraout_RDX_00;
          uVar9 = extraout_XMM0_Da_01;
        } while (bVar1 != 0);
        param_1 = extraout_XMM0_Da_01;
        if ((int)uVar3 != 1) goto LAB_00166f9f;
        lVar5 = xreallocarray(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,lVar5,(ulong)local_41 + lVar6,1,param_12,param_13,param_14);
        local_5c = 0;
        lVar7 = lVar6;
        param_1 = extraout_XMM0_Da_02;
        if (local_41 != 0) {
          while( true ) {
            lVar6 = lVar4;
            local_5c = local_5c + 1;
            param_12 = (ulong)local_5c;
            *(undefined *)(lVar5 + -1 + lVar6) = 0x5f;
            if (local_41 <= local_5c) break;
            lVar7 = lVar6;
            lVar4 = lVar6 + 1;
          }
          lVar4 = lVar7 + 2;
        }
      }
      else {
LAB_00166f10:
        bVar1 = *param_9;
        param_12 = 0x5f;
        lVar7 = lVar6 + 2;
        if (0x5e < (byte)(bVar1 - 0x20)) {
          bVar1 = 0x5f;
        }
        *(byte *)(lVar5 + lVar6) = bVar1;
        lVar6 = lVar4;
        lVar4 = lVar7;
      }
      param_9 = pbVar8;
    } while (*pbVar8 != 0);
  }
  lVar4 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar5,lVar4,
                        1,param_12,param_13,param_14);
  *(undefined *)(lVar4 + lVar6) = 0;
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void utf8_fromcstr(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  byte *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  undefined8 *puVar1;
  undefined8 uVar2;
  ulong uVar3;
  long lVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  long lVar5;
  byte bVar6;
  long lVar7;
  long lVar8;
  byte *pbVar9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Da_01;
  undefined auVar11 [16];
  
  if (*param_9 == 0) {
    lVar5 = 0;
    lVar7 = 1;
    lVar4 = 0;
  }
  else {
    lVar8 = 0;
    lVar4 = 0;
    lVar5 = 0;
    do {
      lVar7 = lVar5;
      lVar5 = lVar7 + 1;
      pbVar9 = param_9 + 1;
      auVar11 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar4,
                              lVar5,0xc,param_12,param_13,param_14);
      lVar4 = auVar11._0_8_;
      puVar1 = (undefined8 *)(lVar4 + lVar8);
      uVar2 = utf8_open(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        puVar1,(uint)*param_9,auVar11._8_8_,param_12,param_13,param_14);
      param_1 = extraout_XMM0_Da_00;
      if ((int)uVar2 == 0) {
        bVar6 = param_9[1];
        uVar2 = extraout_RDX;
        uVar10 = extraout_XMM0_Da_00;
        if (bVar6 == 0) {
LAB_001670f1:
          param_9 = pbVar9 + -(ulong)*(byte *)((long)puVar1 + 9);
          pbVar9 = param_9 + 1;
          goto LAB_00167100;
        }
        do {
          pbVar9 = pbVar9 + 1;
          uVar3 = utf8_append(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (char *)puVar1,(ulong)bVar6,uVar2,param_12,param_13,param_14);
          bVar6 = *pbVar9;
          if (bVar6 == 0) break;
          uVar2 = extraout_RDX_00;
          uVar10 = extraout_XMM0_Da_01;
        } while ((int)uVar3 == 0);
        param_1 = extraout_XMM0_Da_01;
        if ((int)uVar3 != 1) goto LAB_001670f1;
      }
      else {
LAB_00167100:
        bVar6 = *param_9;
        *(undefined8 *)((long)puVar1 + 1) = 0;
        *(undefined *)((long)puVar1 + 0xb) = 1;
        *(byte *)puVar1 = bVar6;
        *(undefined2 *)((long)puVar1 + 9) = 0x101;
        bVar6 = param_9[1];
      }
      lVar8 = lVar8 + 0xc;
      param_9 = pbVar9;
    } while (bVar6 != 0);
    lVar5 = lVar5 * 0xc;
    lVar7 = lVar7 + 2;
  }
  lVar4 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar4,lVar7,
                        0xc,param_12,param_13,param_14);
  *(undefined *)(lVar4 + 10 + lVar5) = 0;
  return;
}



void utf8_tocstr(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                undefined8 *param_9,undefined8 param_10,undefined8 param_11,ulong param_12,
                undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  long lVar2;
  long lVar3;
  uint uVar4;
  ulong uVar5;
  long lVar6;
  undefined8 *puVar7;
  undefined8 *puVar8;
  byte bVar9;
  undefined4 extraout_XMM0_Da;
  
  bVar9 = 0;
  bVar1 = *(byte *)((long)param_9 + 10);
  if (bVar1 == 0) {
    lVar3 = 1;
    lVar6 = 0;
    lVar2 = 0;
  }
  else {
    lVar6 = 0;
    lVar2 = 0;
    do {
      lVar2 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,
                            (ulong)bVar1 + lVar6,1,param_12,lVar2,param_14);
      bVar1 = *(byte *)((long)param_9 + 10);
      uVar4 = (uint)bVar1;
      param_12 = (ulong)uVar4;
      puVar8 = (undefined8 *)(lVar2 + lVar6);
      if (uVar4 < 8) {
        if ((bVar1 & 4) == 0) {
          if (uVar4 != 0) {
            *(undefined *)puVar8 = *(undefined *)param_9;
            if ((bVar1 & 2) == 0) goto LAB_001671c3;
            *(undefined2 *)((long)puVar8 + (param_12 - 2)) =
                 *(undefined2 *)((long)param_9 + (param_12 - 2));
            param_12 = (ulong)*(byte *)((long)param_9 + 10);
          }
        }
        else {
          *(undefined4 *)puVar8 = *(undefined4 *)param_9;
          *(undefined4 *)((long)puVar8 + (param_12 - 4)) =
               *(undefined4 *)((long)param_9 + (param_12 - 4));
          param_12 = (ulong)*(byte *)((long)param_9 + 10);
        }
      }
      else {
        *puVar8 = *param_9;
        *(undefined8 *)((long)puVar8 + (param_12 - 8)) =
             *(undefined8 *)((long)param_9 + (param_12 - 8));
        lVar3 = (long)puVar8 - (long)(undefined8 *)((ulong)(puVar8 + 1) & 0xfffffffffffffff8);
        puVar7 = (undefined8 *)((long)param_9 - lVar3);
        puVar8 = (undefined8 *)((ulong)(puVar8 + 1) & 0xfffffffffffffff8);
        for (uVar5 = (ulong)(uVar4 + (int)lVar3 >> 3); uVar5 != 0; uVar5 = uVar5 - 1) {
          *puVar8 = *puVar7;
          puVar7 = puVar7 + (ulong)bVar9 * -2 + 1;
          puVar8 = puVar8 + (ulong)bVar9 * -2 + 1;
        }
LAB_001671c3:
        param_12 = (ulong)*(byte *)((long)param_9 + 10);
      }
      bVar1 = *(byte *)((long)param_9 + 0x16);
      param_9 = (undefined8 *)((long)param_9 + 0xc);
      lVar6 = lVar6 + param_12;
      param_1 = extraout_XMM0_Da;
    } while (bVar1 != 0);
    lVar3 = lVar6 + 1;
  }
  lVar3 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,lVar3,
                        1,param_12,lVar2,param_14);
  *(undefined *)(lVar3 + lVar6) = 0;
  return;
}



int utf8_cstrwidth(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  byte *param_9,undefined8 param_10,ulong param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  byte bVar1;
  undefined8 uVar2;
  ulong uVar3;
  ulong extraout_RDX;
  ulong uVar4;
  ulong extraout_RDX_00;
  byte *pbVar5;
  ulong uVar6;
  int iVar7;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_00;
  undefined8 local_3c;
  byte local_33;
  byte local_31;
  long local_30;
  
  uVar6 = (ulong)*param_9;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (*param_9 == 0) {
    iVar7 = 0;
  }
  else {
    iVar7 = 0;
    do {
      pbVar5 = param_9 + 1;
      uVar2 = utf8_open(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_3c,
                        (uint)uVar6,param_11,param_12,param_13,param_14);
      param_11 = extraout_RDX;
      param_1 = extraout_XMM0_Da;
      if ((int)uVar2 == 0) {
        uVar6 = (ulong)param_9[1];
        uVar4 = extraout_RDX;
        uVar8 = extraout_XMM0_Da;
        if (param_9[1] == 0) {
LAB_0016731e:
          param_9 = pbVar5 + -(ulong)local_33;
          pbVar5 = param_9 + 1;
          goto LAB_001672c8;
        }
        do {
          pbVar5 = pbVar5 + 1;
          uVar3 = utf8_append(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              (char *)&local_3c,uVar6,uVar4,param_12,param_13,param_14);
          uVar6 = (ulong)*pbVar5;
          if ((int)uVar3 != 0) break;
          uVar4 = extraout_RDX_00;
          uVar8 = extraout_XMM0_Da_00;
        } while (*pbVar5 != 0);
        param_11 = extraout_RDX_00;
        param_1 = extraout_XMM0_Da_00;
        bVar1 = local_31;
        if ((int)uVar3 != 1) goto LAB_0016731e;
      }
      else {
LAB_001672c8:
        uVar6 = (ulong)param_9[1];
        bVar1 = (byte)(*param_9 - 0x20) < 0x5f;
      }
      iVar7 = iVar7 + (uint)bVar1;
      param_9 = pbVar5;
    } while ((char)uVar6 != '\0');
  }
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar7;
}



undefined8
utf8_trimcstr(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             byte *param_9,undefined8 param_10,undefined8 param_11,ulong param_12,
             undefined8 param_13,undefined8 param_14)

{
  undefined8 *puVar1;
  undefined8 *__ptr;
  undefined8 uVar2;
  uint uVar3;
  ulong uVar4;
  uint uVar5;
  undefined4 extraout_XMM0_Da;
  undefined auVar6 [16];
  
  uVar5 = (uint)param_10;
  auVar6 = utf8_fromcstr(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,param_13,param_14);
  uVar4 = auVar6._8_8_;
  __ptr = auVar6._0_8_;
  if (*(char *)((long)__ptr + 10) != '\0') {
    uVar4 = (ulong)*(byte *)((long)__ptr + 0xb);
    uVar3 = (uint)*(byte *)((long)__ptr + 0xb);
    puVar1 = __ptr;
    while (uVar3 <= uVar5) {
      if (*(char *)((long)puVar1 + 0x16) == '\0') goto LAB_001673bc;
      param_12 = (ulong)*(byte *)((long)puVar1 + 0x17);
      uVar3 = (int)uVar4 + (uint)*(byte *)((long)puVar1 + 0x17);
      uVar4 = (ulong)uVar3;
      puVar1 = (undefined8 *)((long)puVar1 + 0xc);
    }
    *(undefined *)((long)puVar1 + 10) = 0;
  }
LAB_001673bc:
  uVar2 = utf8_tocstr(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__ptr
                      ,param_10,uVar4,param_12,param_13,param_14);
  free(__ptr);
  return uVar2;
}



undefined8
utf8_rtrimcstr(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              byte *param_9,undefined8 param_10,undefined8 param_11,ulong param_12,
              undefined8 param_13,undefined8 param_14)

{
  undefined8 *__ptr;
  undefined8 *puVar1;
  undefined8 uVar2;
  undefined8 extraout_RAX;
  uint uVar3;
  ulong uVar4;
  undefined8 extraout_RDX;
  uint uVar5;
  undefined8 *puVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  
  uVar5 = (uint)param_10;
  __ptr = (undefined8 *)
          utf8_fromcstr(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        param_10,param_11,param_12,param_13,param_14);
  puVar6 = __ptr;
  if (*(char *)((long)__ptr + 10) != '\0') {
    do {
      puVar1 = puVar6;
      puVar6 = (undefined8 *)((long)puVar1 + 0xc);
    } while (*(char *)((long)puVar1 + 0x16) != '\0');
    if (__ptr != puVar6) {
      uVar4 = (ulong)*(byte *)((long)puVar1 + 0xb);
      uVar3 = (uint)*(byte *)((long)puVar1 + 0xb);
      for (; (uVar3 <= uVar5 && (puVar6 = puVar1, __ptr != puVar1));
          puVar1 = (undefined8 *)((long)puVar1 + -0xc)) {
        param_12 = (ulong)*(byte *)((long)puVar1 + -1);
        uVar3 = (int)uVar4 + (uint)*(byte *)((long)puVar1 + -1);
        uVar4 = (ulong)uVar3;
      }
      uVar2 = utf8_tocstr(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          puVar6,param_10,uVar4,param_12,param_13,param_14);
      free(__ptr);
      return uVar2;
    }
  }
  free(__ptr);
  xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,"",param_10,extraout_RDX,param_12,param_13,param_14);
  return extraout_RAX;
}



void * utf8_padcstr(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   byte *param_9,undefined8 param_10,ulong param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  size_t __n;
  void *pvVar3;
  undefined *puVar4;
  void *extraout_RAX;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint uVar5;
  undefined8 uVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  
  uVar6 = param_10;
  uVar2 = utf8_cstrwidth(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         param_10,param_11,param_12,param_13,param_14);
  uVar5 = (uint)param_10;
  if (uVar2 < uVar5) {
    __n = strlen((char *)param_9);
    pvVar3 = (void *)xmalloc(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                             param_8,__n + 1 + (ulong)(uVar5 - uVar2),uVar6,extraout_RDX_00,param_12
                             ,param_13,param_14);
    pvVar3 = memcpy(pvVar3,param_9,__n);
    lVar1 = __n + 1 + (ulong)((uVar5 - 1) - uVar2);
    puVar4 = (undefined *)((long)pvVar3 + __n);
    do {
      *puVar4 = 0x20;
      puVar4 = puVar4 + 1;
    } while (puVar4 != (undefined *)((long)pvVar3 + lVar1));
    *(undefined *)((long)pvVar3 + lVar1) = 0;
    return pvVar3;
  }
  xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
          param_7,param_8,(char *)param_9,uVar6,extraout_RDX,param_12,param_13,param_14);
  return extraout_RAX;
}



undefined8 *
window_choose_init(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  undefined4 uVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 *puVar5;
  undefined8 extraout_RAX;
  char *pcVar6;
  undefined8 uVar7;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Db;
  undefined auVar9 [16];
  
  auVar9 = xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0xe0,param_10,
                   param_11,param_12,param_13,param_14);
  puVar5 = auVar9._0_8_;
  *(undefined8 **)(param_9 + 0x1f0) = puVar5;
  puVar5[0x1b] = 0;
  *(undefined4 *)((long)puVar5 + 0xc4) = 0xffffffff;
  uVar8 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,"",param_10,auVar9._8_8_,param_12,param_13,param_14);
  uVar7 = 0;
  puVar5[0x19] = 0;
  puVar5[0x1a] = extraout_RAX;
  lVar3 = *(long *)(param_9 + 0x150);
  *(undefined4 *)(puVar5 + 0x12) = 0;
  puVar5[0x11] = 0;
  uVar1 = *(uint *)(lVar3 + 8);
  puVar5[0x13] = 0;
  uVar2 = *(undefined4 *)(lVar3 + 4);
  *(undefined4 *)(puVar5 + 0x15) = 0;
  puVar5[0x14] = 0;
  puVar5[0x16] = 0;
  *(undefined4 *)((long)puVar5 + 0xbc) = 0;
  uVar4 = screen_init(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar5,uVar2,
                      uVar1,0,param_13,param_14);
  lVar3 = *(long *)(param_9 + 8);
  *(uint *)(puVar5 + 6) = *(uint *)(puVar5 + 6) & 0xfffffffe;
  pcVar6 = options_get_number(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(lVar3 + 0x188),"mode-keys",extraout_RDX,uVar7,param_13,
                              param_14);
  if ((int)pcVar6 == 0) {
    mode_key_init(puVar5 + 0xf,&mode_key_tree_emacs_choice);
    return puVar5;
  }
  mode_key_init(puVar5 + 0xf,&mode_key_tree_vi_choice);
  return puVar5;
}



void window_choose_add(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      long param_9,long param_10,undefined8 param_11,undefined8 param_12,
                      long *param_13,char **param_14)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  uint uVar4;
  undefined4 uVar5;
  long lVar6;
  char *pcVar7;
  ulong uVar8;
  ulong uVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined in_stack_ffffffffffffffc8;
  undefined local_2a [10];
  long local_20;
  
  lVar3 = *(long *)(param_9 + 0x1f0);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar8 = (ulong)*(uint *)(lVar3 + 0x90);
  if (*(uint *)(lVar3 + 0x90) == 0xffffffff) {
                    // WARNING: Subroutine does not return
    fatalx((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"number too big",
           param_10,param_11,uVar8,param_13,param_14,in_stack_ffffffffffffffc8);
  }
  uVar9 = *(ulong *)(lVar3 + 0x98);
  lVar6 = *(long *)(lVar3 + 0x88);
  if (uVar9 == 0) {
    *(undefined8 *)(lVar3 + 0x98) = 0xf0;
    lVar6 = xrealloc((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar6,0xf0
                     ,0,uVar8,param_13,param_14);
    param_1 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01);
    uVar9 = *(ulong *)(lVar3 + 0x98);
    uVar8 = (ulong)*(uint *)(lVar3 + 0x90);
    *(long *)(lVar3 + 0x88) = lVar6;
  }
  uVar5 = (undefined4)param_1;
  uVar4 = (int)uVar8 + 1;
  if (uVar9 <= (ulong)uVar4 * 0x18) {
    do {
      lVar6 = xreallocarray(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar6,2,
                            uVar9,uVar8,param_13,param_14);
      param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
      uVar8 = (ulong)*(uint *)(lVar3 + 0x90);
      *(long *)(lVar3 + 0x88) = lVar6;
      uVar9 = *(long *)(lVar3 + 0x98) * 2;
      uVar4 = *(uint *)(lVar3 + 0x90) + 1;
      *(ulong *)(lVar3 + 0x98) = uVar9;
      uVar5 = extraout_XMM0_Da;
    } while (uVar9 <= (ulong)uVar4 * 0x18);
  }
  *(uint *)(lVar3 + 0x90) = uVar4;
  plVar1 = (long *)(lVar6 + uVar8 * 0x18);
  pcVar7 = format_expand(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         *(long **)(param_10 + 0x38),*(char **)(param_10 + 0x30),uVar9,uVar8,
                         param_13,param_14);
  *plVar1 = param_10;
  plVar1[1] = (long)pcVar7;
  iVar2 = *(int *)(lVar3 + 0x90);
  *(undefined4 *)((long)plVar1 + 0x14) = 0;
  uVar4 = iVar2 - 1;
  *(uint *)(plVar1 + 2) = uVar4;
  uVar5 = xsnprintf(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    local_2a,10,"%d",(ulong)uVar4,param_13,param_14,in_stack_ffffffffffffffc8);
  *(undefined4 *)(lVar3 + 0xb8) = uVar5;
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long * window_choose_data_create
                 (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 undefined4 param_9,long param_10,long param_11,undefined *param_12,
                 undefined8 param_13,undefined8 param_14)

{
  long *plVar1;
  long lVar2;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  undefined auVar3 [16];
  
  auVar3 = xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x48,param_10,
                   param_11,param_12,param_13,param_14);
  plVar1 = auVar3._0_8_;
  *(undefined4 *)((long)plVar1 + 0x14) = param_9;
  lVar2 = format_create(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                        param_6,param_7,param_8,0,0,auVar3._8_8_,param_12,param_13,param_14);
  *plVar1 = param_10;
  plVar1[7] = lVar2;
  plVar1[6] = 0;
  plVar1[8] = 0;
  plVar1[4] = 0;
  *(undefined4 *)(plVar1 + 5) = 0xffffffff;
  *(undefined4 *)(plVar1 + 2) = 0xffffffff;
  plVar1[3] = 0;
  *(int *)(param_10 + 0x5b8) = *(int *)(param_10 + 0x5b8) + 1;
  plVar1[1] = param_11;
  *(int *)(param_11 + 0x128) = *(int *)(param_11 + 0x128) + 1;
  return plVar1;
}



void window_choose_data_free
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  undefined4 uVar1;
  
  uVar1 = server_client_unref(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *param_9);
  uVar1 = session_unref(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9[1]);
  if (param_9[3] != 0) {
    session_unref(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9[3]);
  }
  free((void *)param_9[6]);
  format_free((void *)param_9[7]);
  free((void *)param_9[8]);
  free(param_9);
  return;
}



void FUN_00167890(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 void **param_9)

{
  long **pplVar1;
  uint uVar2;
  ulong uVar3;
  undefined4 extraout_XMM0_Da;
  
  if (*(int *)(param_9 + 0x15) != 0) {
    uVar3 = 0;
    do {
      uVar2 = (int)uVar3 + 1;
      pplVar1 = (long **)((long)param_9[0x14] + uVar3 * 0x18);
      window_choose_data_free
                (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*pplVar1);
      free(pplVar1[1]);
      uVar3 = (ulong)uVar2;
      param_1 = extraout_XMM0_Da;
    } while (uVar2 < *(uint *)(param_9 + 0x15));
  }
  free(param_9[0x11]);
  *(undefined4 *)(param_9 + 0x12) = 0;
  param_9[0x11] = (void *)0x0;
  param_9[0x13] = (void *)0x0;
  free(param_9[0x14]);
  *(undefined4 *)(param_9 + 0x15) = 0;
  param_9[0x14] = (void *)0x0;
  param_9[0x16] = (void *)0x0;
  free(param_9[0x1a]);
  screen_free(param_9);
  free(param_9);
  return;
}



void window_choose_free(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9)

{
  if (*(void ***)(param_9 + 0x1f0) != (void **)0x0) {
    FUN_00167890(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                 *(void ***)(param_9 + 0x1f0));
    return;
  }
  return;
}



void window_choose_data_run
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  byte *pbVar1;
  int iVar2;
  __int32_t **pp_Var3;
  undefined8 uVar4;
  byte **ppbVar5;
  undefined8 in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffc8;
  int *local_30;
  byte *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if ((char *)param_9[8] != (char *)0x0) {
    uVar4 = 0;
    ppbVar5 = &local_28;
    iVar2 = cmd_string_parse(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (char *)param_9[8],&local_30,(char *)0x0,(byte *)0x0,(long *)ppbVar5,
                             in_R9);
    pbVar1 = local_28;
    if (iVar2 == 0) {
      cmdq_run(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               *(int **)(*param_9 + 0x5b0),local_30,(undefined4 *)0x0,uVar4,ppbVar5,in_R9);
      cmd_list_free(local_30);
    }
    else if (local_28 != (byte *)0x0) {
      pp_Var3 = __ctype_toupper_loc();
      *pbVar1 = (byte)(*pp_Var3)[*pbVar1];
      status_message_set(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                         param_5,param_6,param_7,param_8,*param_9,"%s",local_28,uVar4,(long)ppbVar5,
                         in_R9,in_stack_ffffffffffffffc8);
      free(local_28);
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_choose_default_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9)

{
  if ((param_9 != (long *)0x0) && ((*(byte *)(*param_9 + 0x421) & 2) == 0)) {
    window_choose_data_run(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
    return;
  }
  return;
}



void window_choose_free1(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,void **param_9)

{
  if (param_9 != (void **)0x0) {
    FUN_00167890(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
    return;
  }
  return;
}



void window_choose_fire_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9,undefined8 param_10)

{
  void **ppvVar1;
  undefined4 uVar2;
  
  ppvVar1 = *(void ***)(param_9 + 0x7c);
  *(undefined8 *)(param_9 + 0x7c) = 0;
  window_pane_reset_mode(param_9);
  uVar2 = (*(code *)ppvVar1[0x1b])(param_10);
  FUN_00167890(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppvVar1);
  return;
}


/*
Unable to decompile 'window_choose_collapse'
Cause: 
Low-level Error: Overlapping input varnodes
*/

/*
Unable to decompile 'window_choose_expand'
Cause: 
Low-level Error: Overlapping input varnodes
*/


long window_choose_get_item(long param_1,ulong param_2,long param_3)

{
  uint uVar1;
  undefined8 uVar2;
  long lVar3;
  long in_FS_OFFSET;
  int iStack_18;
  int local_14;
  long local_10;
  
  lVar3 = *(long *)(param_1 + 0x1f0);
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_2 & 0xffff1fffffffffff) - 0x100000000002 < 0x2b) {
    uVar2 = cmd_mouse_at(param_1,param_3,&iStack_18,&local_14,0);
    if (((int)uVar2 == 0) &&
       (uVar1 = local_14 + *(int *)(lVar3 + 0xbc), uVar1 < *(uint *)(lVar3 + 0x90))) {
      lVar3 = *(long *)(lVar3 + 0x88) + (ulong)uVar1 * 0x18;
    }
    else {
      lVar3 = 0;
    }
  }
  else {
    lVar3 = *(long *)(lVar3 + 0x88) + (ulong)*(uint *)(lVar3 + 0xc0) * 0x18;
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int window_choose_key_index(long param_1,int param_2)

{
  char *pcVar1;
  uint uVar2;
  char *pcVar3;
  ulong uVar4;
  bool bVar5;
  
  uVar4 = 0x30;
  pcVar3 = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
  while ((uVar2 = mode_key_lookup((undefined8 *)(param_1 + 0x78),uVar4,(undefined8 *)0x0), 1 < uVar2
         || (bVar5 = param_2 != 0, param_2 = param_2 + -1, bVar5))) {
    pcVar1 = pcVar3 + 1;
    uVar4 = (ulong)*pcVar1;
    pcVar3 = pcVar3 + 1;
    if (*pcVar1 == '\0') {
      return -1;
    }
  }
  return (int)*pcVar3;
}



void window_choose_write_line
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,char *param_12,ulong param_13,
               undefined *param_14)

{
  long *plVar1;
  int iVar2;
  long lVar3;
  char **ppcVar4;
  undefined uVar5;
  uint uVar6;
  char *pcVar7;
  uint uVar8;
  long in_FS_OFFSET;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da;
  undefined8 uVar10;
  undefined8 uVar11;
  undefined in_stack_ffffffffffffff48;
  ulong local_a8;
  undefined8 uStack_a0;
  undefined4 local_98;
  undefined local_88 [32];
  undefined local_68 [40];
  long local_40;
  
  lVar3 = *(long *)(param_9 + 0x1f0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  ppcVar4 = *(char ***)(*(long *)(param_9 + 8) + 0x188);
  if (*(long *)(lVar3 + 0xd8) == 0) {
                    // WARNING: Subroutine does not return
    fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
           "called before callback assigned",param_10,param_11,param_12,param_13,param_14,
           in_stack_ffffffffffffff48);
  }
  uVar6 = (uint)param_11;
  iVar2 = *(int *)(*(long *)(lVar3 + 8) + 8);
  local_a8 = 0x80000080000;
  uStack_a0 = 0x20;
  local_98 = 0x1010000;
  if (*(int *)(lVar3 + 0xc0) == *(int *)(lVar3 + 0xbc) + uVar6) {
    style_apply(0x80000080000,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_a8,
                ppcVar4,"mode-style",param_12,param_13,param_14);
  }
  uVar10 = screen_write_cursormove(param_10,0,uVar6);
  uVar8 = *(int *)(lVar3 + 0xbc) + uVar6;
  if (uVar8 < *(uint *)(lVar3 + 0x90)) {
    plVar1 = (long *)(*(long *)(lVar3 + 0x88) + (ulong)uVar8 * 0x18);
    if ((*(long *)(*plVar1 + 0x20) != 0) && ((*(byte *)(*(long *)(*plVar1 + 0x20) + 0x38) & 7) != 0)
       ) {
      local_a8 = local_a8 | 0x100;
    }
    uVar8 = window_choose_key_index(lVar3,uVar8);
    pcVar7 = "(%c)";
    if (uVar8 == 0xffffffff) {
      uVar8 = *(uint *)(plVar1 + 2);
      pcVar7 = "(%d)";
    }
    param_14 = local_68;
    uVar10 = xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_14,0x20,pcVar7,(ulong)uVar8,param_13,param_14,in_stack_ffffffffffffff48
                      );
    uVar5 = 0xc0;
    if (((*(byte *)(*plVar1 + 0x14) & 2) != 0) &&
       (uVar5 = 0x8a, (*(byte *)((long)plVar1 + 0x14) & 1) == 0)) {
      uVar5 = 0x13;
    }
    param_13 = (ulong)(*(int *)(lVar3 + 0xb8) + 2);
    param_12 = "%*s %s %s";
    uVar10 = screen_write_nputs(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                param_10,(ulong)(*(int *)(*(long *)(lVar3 + 8) + 4) - 1),
                                (long)&local_a8,"%*s %s %s",param_13,(size_t)param_14,uVar5);
  }
  if (*(uint *)(lVar3 + 0x10) < *(int *)(*(long *)(lVar3 + 8) + 4) - 1U) {
    do {
      uVar10 = screen_write_putc(param_10,(long)&local_a8,0x20);
    } while (*(uint *)(lVar3 + 0x10) < *(int *)(*(long *)(lVar3 + 8) + 4) - 1U);
  }
  if (*(int *)(lVar3 + 0xc4) != -1) {
    uVar9 = style_apply(uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_a8,
                        ppcVar4,"mode-style",param_12,param_13,param_14);
    uVar10 = *(undefined8 *)(lVar3 + 0xd0);
    uVar8 = xsnprintf(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_88,0x20,
                      "%s: %s",*(undefined8 *)(lVar3 + 200),uVar10,local_88,
                      in_stack_ffffffffffffff48);
    uVar11 = screen_write_cursormove(param_10,0,iVar2 - 1);
    screen_write_puts(uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                      (long)&local_a8,"%s",local_88,uVar10,(size_t)local_88,
                      in_stack_ffffffffffffff48);
    screen_write_cursormove(param_10,uVar8,uVar6);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int window_choose_index_key(long param_1,long param_2)

{
  char *pcVar1;
  uint uVar2;
  char *pcVar3;
  int iVar4;
  ulong uVar5;
  
  uVar5 = 0x30;
  iVar4 = 0;
  pcVar3 = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
  do {
    uVar2 = mode_key_lookup((undefined8 *)(param_1 + 0x78),uVar5,(undefined8 *)0x0);
    if (uVar2 < 2) {
      if (*pcVar3 == param_2) {
        return iVar4;
      }
      iVar4 = iVar4 + 1;
    }
    pcVar1 = pcVar3 + 1;
    uVar5 = (ulong)*pcVar1;
    pcVar3 = pcVar3 + 1;
  } while (*pcVar1 != '\0');
  return -1;
}



void window_choose_redraw_screen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,char *param_12,ulong param_13,
               undefined *param_14)

{
  long lVar1;
  uint uVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  undefined4 uVar4;
  long alStack_48 [3];
  long local_30;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar4 = screen_write_start(alStack_48,param_9,0);
  if (*(int *)(*(long *)(lVar1 + 8) + 8) != 0) {
    uVar3 = 0;
    do {
      uVar2 = (int)uVar3 + 1;
      uVar4 = window_choose_write_line
                        (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (long)alStack_48,uVar3,param_12,param_13,param_14);
      uVar3 = (ulong)uVar2;
    } while (uVar2 < *(uint *)(*(long *)(lVar1 + 8) + 8));
  }
  screen_write_stop();
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_choose_reset_top
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  undefined *in_R9;
  
  uVar3 = (int)param_10 - 1;
  uVar1 = *(uint *)(*(long *)(param_9 + 0x1f0) + 0xc0);
  uVar2 = (uVar1 - (int)param_10) + 1;
  if (uVar1 <= uVar3) {
    uVar2 = 0;
  }
  *(uint *)(*(long *)(param_9 + 0x1f0) + 0xbc) = uVar2;
  window_choose_redraw_screen
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             (ulong)uVar2,(char *)0x0,(ulong)uVar3,in_R9);
  return;
}



void window_choose_set_current
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined4 param_10)

{
  long lVar1;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  *(undefined4 *)(lVar1 + 0xc0) = param_10;
  window_choose_reset_top
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
             (ulong)*(uint *)(*(long *)(lVar1 + 8) + 8));
  return;
}



void window_choose_collapse_all
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  int iVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  int iVar5;
  long lVar6;
  long *plVar7;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  lVar2 = *(long *)(param_9 + 0x1f0);
  lVar3 = *(long *)(*(long *)(*(long *)(lVar2 + 0x88) + (ulong)*(uint *)(lVar2 + 0xc0) * 0x18) + 8);
  lVar6 = sessions_RB_MINMAX(&sessions,-1);
  uVar4 = extraout_XMM0_Qa;
  while (lVar6 != 0) {
    window_choose_collapse(param_9,lVar6,*(undefined4 *)(lVar2 + 0xc0));
    lVar6 = sessions_RB_NEXT(lVar6);
    uVar4 = extraout_XMM0_Qa_00;
  }
  iVar1 = *(int *)(lVar2 + 0x90);
  if (iVar1 != 0) {
    plVar7 = *(long **)(lVar2 + 0x88);
    iVar5 = 0;
    do {
      while ((*(long *)(*plVar7 + 0x18) == lVar3 && ((*(byte *)(*plVar7 + 0x14) & 2) != 0))) {
        *(int *)(lVar2 + 0xc0) = iVar5;
        iVar5 = iVar5 + 1;
        plVar7 = plVar7 + 3;
        if (iVar5 == iVar1) goto LAB_0016867d;
      }
      iVar5 = iVar5 + 1;
      plVar7 = plVar7 + 3;
    } while (iVar5 != iVar1);
  }
LAB_0016867d:
  window_choose_reset_top
            (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
             (ulong)*(uint *)(*(long *)(lVar2 + 8) + 8));
  return;
}



void window_choose_ready(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,undefined4 param_10,undefined *param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  long lVar3;
  ulong uVar4;
  ulong uVar5;
  undefined1 unaff_BL;
  ulong uVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  
  if (param_11 == (undefined *)0x0) {
    param_11 = window_choose_default_callback;
  }
  lVar1 = *(long *)(param_9 + 0x1f0);
  uVar4 = (ulong)*(uint *)(lVar1 + 0x90);
  uVar6 = (ulong)*(uint *)(lVar1 + 0xa8);
  *(undefined **)(lVar1 + 0xd8) = param_11;
  if (*(uint *)(lVar1 + 0xa8) <= ~*(uint *)(lVar1 + 0x90)) {
    uVar5 = *(ulong *)(lVar1 + 0xb0);
    lVar3 = *(long *)(lVar1 + 0xa0);
    if (uVar5 == 0) {
      *(undefined8 *)(lVar1 + 0xb0) = 0xf0;
      lVar3 = xrealloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,0xf0,0,
                       uVar4,param_13,param_14);
      uVar5 = *(ulong *)(lVar1 + 0xb0);
      uVar6 = (ulong)*(uint *)(lVar1 + 0xa8);
      *(long *)(lVar1 + 0xa0) = lVar3;
      uVar4 = (ulong)*(uint *)(lVar1 + 0x90);
      param_1 = extraout_XMM0_Da_01;
    }
    if (uVar5 <= (ulong)(uint)((int)uVar6 + (int)uVar4) * 0x18) {
      do {
        lVar3 = xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar3,
                              2,uVar5,uVar4,param_13,param_14);
        uVar6 = (ulong)*(uint *)(lVar1 + 0xa8);
        uVar4 = (ulong)*(uint *)(lVar1 + 0x90);
        *(long *)(lVar1 + 0xa0) = lVar3;
        uVar5 = *(long *)(lVar1 + 0xb0) * 2;
        *(ulong *)(lVar1 + 0xb0) = uVar5;
        param_1 = extraout_XMM0_Da;
      } while (uVar5 <= (ulong)(*(uint *)(lVar1 + 0xa8) + *(uint *)(lVar1 + 0x90)) * 0x18);
    }
    memcpy((void *)(lVar3 + uVar6 * 0x18),*(void **)(lVar1 + 0x88),uVar4 * 0x18);
    *(int *)(lVar1 + 0xa8) = *(int *)(lVar1 + 0xa8) + *(int *)(lVar1 + 0x90);
    lVar1 = *(long *)(param_9 + 0x1f0);
    *(undefined4 *)(lVar1 + 0xc0) = param_10;
    uVar2 = window_choose_reset_top
                      (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,param_9,
                       (ulong)*(uint *)(*(long *)(lVar1 + 8) + 8));
    window_choose_collapse_all
              (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
    return;
  }
                    // WARNING: Subroutine does not return
  fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"number too big",uVar6,
         param_11,uVar4,param_13,param_14,unaff_BL);
}



void window_choose_expand_all
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  long lVar4;
  uint uVar5;
  ulong uVar6;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  lVar4 = sessions_RB_MINMAX(&sessions,-1);
  uVar3 = extraout_XMM0_Qa;
  do {
    if (lVar4 == 0) {
      window_choose_reset_top
                (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                 (ulong)*(uint *)(*(long *)(lVar1 + 8) + 8));
      return;
    }
    uVar6 = 0;
    if (*(int *)(lVar1 + 0x90) != 0) {
      do {
        while( true ) {
          lVar2 = *(long *)(*(long *)(lVar1 + 0x88) + uVar6 * 0x18);
          if ((*(long *)(lVar2 + 0x18) != lVar4) || ((*(byte *)(lVar2 + 0x14) & 2) == 0)) break;
          uVar5 = (int)uVar6 + 1;
          window_choose_expand(param_9,lVar4,uVar6);
          uVar6 = (ulong)uVar5;
          if (*(uint *)(lVar1 + 0x90) <= uVar5) goto LAB_00168890;
        }
        uVar5 = (int)uVar6 + 1;
        uVar6 = (ulong)uVar5;
      } while (uVar5 < *(uint *)(lVar1 + 0x90));
    }
LAB_00168890:
    lVar4 = sessions_RB_NEXT(lVar4);
    uVar3 = extraout_XMM0_Qa_00;
  } while( true );
}



void window_choose_resize
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,uint param_11,undefined8 param_12,ulong param_13,
               undefined *param_14)

{
  long lVar1;
  char *pcVar2;
  undefined8 extraout_RDX;
  ulong uVar3;
  undefined8 uVar4;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  uVar4 = window_choose_reset_top
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)param_11);
  uVar3 = (ulong)param_10;
  pcVar2 = (char *)0x0;
  uVar4 = screen_resize(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,param_10
                        ,(ulong)param_11,0,param_13,param_14);
  window_choose_redraw_screen
            (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar3,
             extraout_RDX,pcVar2,param_13,param_14);
  return;
}



void window_choose_prompt_input
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined4 param_9,undefined8 param_10,long param_11,char *param_12,ulong param_13,
               undefined *param_14)

{
  long lVar1;
  char *__s;
  size_t sVar2;
  char *pcVar3;
  undefined8 extraout_RDX;
  long lVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined auVar5 [16];
  
  lVar1 = *(long *)(param_11 + 0x1f0);
  *(undefined4 *)(lVar1 + 0xc4) = param_9;
  __s = *(char **)(lVar1 + 0xd0);
  *(undefined8 *)(lVar1 + 200) = param_10;
  pcVar3 = param_12;
  sVar2 = strlen(__s);
  lVar4 = sVar2 + 2;
  auVar5 = xrealloc(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,__s,
                    lVar4,extraout_RDX,pcVar3,param_13,param_14);
  *(long *)(lVar1 + 0xd0) = auVar5._0_8_;
  *(char *)(auVar5._0_8_ + sVar2) = (char)param_12;
  *(undefined *)(*(long *)(lVar1 + 0xd0) + 1 + sVar2) = 0;
  window_choose_redraw_screen
            (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,param_6,
             param_7,param_8,param_11,lVar4,auVar5._8_8_,pcVar3,param_13,param_14);
  return;
}



void window_choose_scroll_up
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,char *param_12,ulong param_13,
               undefined *param_14)

{
  long lVar1;
  undefined8 uVar2;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined4 uVar3;
  long alStack_38 [3];
  long local_20;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(int *)(lVar1 + 0xbc) != 0) {
    *(int *)(lVar1 + 0xbc) = *(int *)(lVar1 + 0xbc) + -1;
    screen_write_start(alStack_38,param_9,0);
    uVar2 = screen_write_cursormove((long)alStack_38,0,0);
    uVar3 = screen_write_insertline
                      (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long)alStack_38,1,extraout_RDX,(ulong)param_12,param_13,param_14);
    uVar3 = window_choose_write_line
                      (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       (long)alStack_38,0,param_12,param_13,param_14);
    if (1 < *(uint *)(*(long *)(lVar1 + 8) + 8)) {
      window_choose_write_line
                (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                 (long)alStack_38,1,param_12,param_13,param_14);
    }
    screen_write_stop();
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_choose_scroll_down
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,char *param_12,ulong param_13,
               undefined *param_14)

{
  uint uVar1;
  long lVar2;
  undefined8 uVar3;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined4 uVar4;
  long alStack_38 [3];
  long local_20;
  
  lVar2 = *(long *)(param_9 + 0x1f0);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(uint *)(lVar2 + 0xbc) < *(uint *)(lVar2 + 0x90)) {
    *(uint *)(lVar2 + 0xbc) = *(uint *)(lVar2 + 0xbc) + 1;
    screen_write_start(alStack_38,param_9,0);
    uVar3 = screen_write_cursormove((long)alStack_38,0,0);
    uVar4 = screen_write_deleteline
                      (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long)alStack_38,1,extraout_RDX,(ulong)param_12,param_13,param_14);
    uVar4 = window_choose_write_line
                      (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       (long)alStack_38,(ulong)(*(int *)(*(long *)(lVar2 + 8) + 8) - 1),param_12,
                       param_13,param_14);
    uVar1 = *(uint *)(*(long *)(lVar2 + 8) + 8);
    if (1 < uVar1) {
      window_choose_write_line
                (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                 (long)alStack_38,(ulong)(uVar1 - 2),param_12,param_13,param_14);
    }
    screen_write_stop();
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_choose_key(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      uint *param_9,undefined8 param_10,undefined8 param_11,char *param_12,
                      ulong param_13,undefined *param_14)

{
  long lVar1;
  char *__s;
  undefined8 uVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  size_t sVar7;
  longlong lVar8;
  char **ppcVar9;
  long *plVar10;
  undefined8 *puVar11;
  uint uVar12;
  char *pcVar13;
  uint *puVar14;
  undefined8 extraout_RDX;
  ulong extraout_RDX_00;
  undefined8 extraout_RDX_01;
  ulong extraout_RDX_02;
  ulong uVar15;
  ulong extraout_RDX_03;
  undefined8 extraout_RDX_04;
  char *pcVar16;
  ulong uVar17;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 uVar18;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  undefined4 uVar20;
  undefined8 uVar19;
  undefined4 extraout_XMM0_Db_04;
  long alStack_48 [3];
  long local_30;
  
  lVar1 = *(long *)(param_9 + 0x7c);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar13 = (char *)(ulong)*(uint *)(lVar1 + 0xc4);
  uVar6 = *(uint *)(lVar1 + 0x90);
  pcVar16 = param_12;
  if (*(uint *)(lVar1 + 0xc4) == 0) {
    uVar3 = mode_key_lookup((undefined8 *)(lVar1 + 0x78),(ulong)param_12,(undefined8 *)0x0);
    uVar19 = extraout_RDX;
    uVar18 = extraout_XMM0_Da_00;
    uVar20 = extraout_XMM0_Db_00;
    if (uVar3 != 0x21) {
      if (uVar3 != 0x22) {
        uVar17 = param_13;
        if (uVar3 != 0x1f) {
          if (param_12 + -0x30 < (char *)0xa) {
            window_choose_prompt_input
                      (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                       param_5,param_6,param_7,param_8,0,"Goto Item",(long)param_9,param_12,param_13
                       ,param_14);
          }
          goto LAB_00168bb0;
        }
        goto switchD_00168b79_caseD_1f;
      }
      pcVar13 = (char *)0x0;
      pcVar16 = (char *)0x0;
      lVar8 = strtonum(*(char **)(lVar1 + 0xd0),0,0x7fffffff,(char **)0x0);
      uVar3 = (uint)lVar8;
      uVar19 = extraout_RDX_01;
      uVar18 = extraout_XMM0_Da_02;
      uVar20 = extraout_XMM0_Db_02;
      if (uVar3 <= uVar6 - 1) goto LAB_00168c60;
    }
    *(undefined4 *)(lVar1 + 0xc4) = 0xffffffff;
    window_choose_redraw_screen
              (CONCAT44(uVar20,uVar18),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               (long)param_9,pcVar16,uVar19,pcVar13,param_13,param_14);
    goto LAB_00168bb0;
  }
  uVar17 = param_13;
  uVar3 = mode_key_lookup((undefined8 *)(lVar1 + 0x78),(ulong)param_12,(undefined8 *)0x0);
  uVar19 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  if (0x12 < uVar3 - 0x1f) {
    uVar3 = window_choose_index_key(lVar1,(long)param_12);
    if (((int)uVar3 < 0) || (*(uint *)(lVar1 + 0x90) <= uVar3)) goto LAB_00168bb0;
    *(uint *)(lVar1 + 0xc0) = uVar3;
    uVar18 = extraout_XMM0_Da_03;
    uVar20 = extraout_XMM0_Db_03;
LAB_00168c60:
    puVar11 = (undefined8 *)(*(long *)(lVar1 + 0x88) + (ulong)uVar3 * 0x18);
LAB_00168c71:
    window_choose_fire_callback
              (CONCAT44(uVar20,uVar18),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               param_9,*puVar11);
    goto LAB_00168bb0;
  }
  puVar14 = &switchD_00168b79::switchdataD_00181ce0;
  switch(uVar3) {
  case 0x1f:
switchD_00168b79_caseD_1f:
    __s = *(char **)(lVar1 + 0xd0);
    sVar7 = strlen(__s);
    uVar15 = extraout_RDX_00;
    uVar19 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
    if (sVar7 != 0) {
      __s[sVar7 - 1] = '\0';
      uVar19 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
    }
    goto LAB_00168bf1;
  case 0x20:
    uVar15 = (ulong)*(uint *)(lVar1 + 0xbc);
    uVar4 = (*(uint *)(lVar1 + 0xbc) - 1) + *(int *)(*(long *)(lVar1 + 8) + 8);
    uVar3 = uVar6 - 1;
    if (uVar4 <= uVar6 - 1) {
      uVar3 = uVar4;
    }
    *(uint *)(lVar1 + 0xc0) = uVar3;
    goto LAB_00168bf1;
  case 0x21:
    window_choose_fire_callback
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,param_9,0);
    break;
  case 0x22:
    puVar11 = (undefined8 *)window_choose_get_item((long)param_9,(ulong)param_12,param_13);
    uVar18 = extraout_XMM0_Da_04;
    uVar20 = extraout_XMM0_Db_04;
    if (puVar11 == (undefined8 *)0x0) break;
    goto LAB_00168c71;
  case 0x23:
    if (uVar6 == 0) break;
    if (*(int *)(lVar1 + 0xc0) == uVar6 - 1) goto switchD_00168b79_caseD_2a;
    pcVar13 = *(char **)(lVar1 + 8);
    uVar6 = *(int *)(lVar1 + 0xc0) + 1;
    *(uint *)(lVar1 + 0xc0) = uVar6;
    uVar3 = *(int *)(lVar1 + 0xbc) + *(int *)(pcVar13 + 8);
    uVar15 = (ulong)uVar3;
    if (uVar3 <= uVar6) {
LAB_00168d1d:
      window_choose_scroll_down
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,(long)param_9,pcVar16,uVar15,pcVar13,uVar17,param_14);
      break;
    }
    uVar18 = screen_write_start(alStack_48,(long)param_9,0);
    uVar18 = window_choose_write_line
                       (uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9
                        ,(long)alStack_48,
                        (ulong)(uint)(*(int *)(lVar1 + 0xc0) - *(int *)(lVar1 + 0xbc)),pcVar13,
                        uVar17,param_14);
    iVar5 = *(int *)(lVar1 + 0xc0) + -1;
LAB_0016900a:
    uVar15 = (ulong)(uint)(iVar5 - *(int *)(lVar1 + 0xbc));
    goto LAB_00169010;
  case 0x24:
    *(uint *)(lVar1 + 0xc0) = uVar6 - 1;
    uVar3 = *(uint *)(*(long *)(lVar1 + 8) + 8);
    iVar5 = uVar6 - uVar3;
    if (uVar6 <= uVar3) {
      iVar5 = 0;
    }
    *(int *)(lVar1 + 0xbc) = iVar5;
    window_choose_redraw_screen
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,(long)param_9,pcVar16,0,pcVar13,uVar17,param_14);
    break;
  case 0x25:
    uVar3 = *(uint *)(*(long *)(lVar1 + 8) + 8);
    uVar15 = (ulong)uVar3;
    uVar12 = *(int *)(lVar1 + 0xc0) + uVar3;
    pcVar13 = (char *)(ulong)uVar12;
    uVar4 = uVar6 - 1;
    if (uVar12 <= uVar6 - 1) {
      uVar4 = uVar12;
    }
    *(uint *)(lVar1 + 0xc0) = uVar4;
    if (uVar3 < uVar6) {
      uVar4 = *(int *)(lVar1 + 0xbc) + uVar3;
      pcVar13 = (char *)(ulong)(uVar3 + uVar4);
      if (uVar6 < uVar3 + uVar4) {
        uVar4 = uVar6 - uVar3;
        *(uint *)(lVar1 + 0xbc) = uVar4;
      }
      else {
        *(uint *)(lVar1 + 0xbc) = uVar4;
      }
      uVar6 = *(uint *)(lVar1 + 0xc0);
      uVar15 = (ulong)uVar6;
      uVar19 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
      if (uVar6 < uVar4) {
        *(uint *)(lVar1 + 0xbc) = uVar6;
        uVar19 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
      }
    }
    else {
      *(undefined4 *)(lVar1 + 0xbc) = 0;
      uVar19 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    }
    goto LAB_00168bf1;
  case 0x26:
    uVar6 = *(uint *)(lVar1 + 0xc0);
    uVar15 = (ulong)uVar6;
    uVar3 = *(uint *)(*(long *)(lVar1 + 8) + 8);
    if (uVar6 < uVar3) {
      *(undefined8 *)(lVar1 + 0xbc) = 0;
      uVar19 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    }
    else {
      *(uint *)(lVar1 + 0xc0) = uVar6 - uVar3;
      uVar6 = *(uint *)(lVar1 + 0xbc);
      uVar15 = (ulong)uVar6;
      pcVar13 = (char *)(ulong)(uVar6 - uVar3);
      uVar4 = 0;
      if (uVar3 <= uVar6) {
        uVar4 = uVar6 - uVar3;
      }
      *(uint *)(lVar1 + 0xbc) = uVar4;
      uVar19 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    }
    goto LAB_00168bf1;
  case 0x27:
    if (uVar6 == 0) break;
    uVar15 = *(ulong *)(lVar1 + 8);
    iVar5 = *(int *)(lVar1 + 0xbc);
    uVar3 = *(int *)(uVar15 + 8) + iVar5;
    pcVar16 = (char *)(ulong)uVar3;
    if (uVar6 <= uVar3) break;
    if (iVar5 != *(int *)(lVar1 + 0xc0)) goto LAB_00168d1d;
    *(int *)(lVar1 + 0xc0) = iVar5 + 1;
    window_choose_scroll_down
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,(long)param_9,pcVar16,uVar15,pcVar13,uVar17,param_14);
    uVar18 = screen_write_start(alStack_48,(long)param_9,0);
    uVar15 = 0;
    goto LAB_00169010;
  case 0x28:
    if ((uVar6 == 0) || (*(int *)(lVar1 + 0xbc) == 0)) break;
    uVar6 = *(uint *)(lVar1 + 0xc0);
    puVar14 = (uint *)(ulong)uVar6;
    uVar3 = *(uint *)(*(long *)(lVar1 + 8) + 8);
    pcVar13 = (char *)(ulong)uVar3;
    if (uVar6 != *(int *)(lVar1 + 0xbc) + -1 + uVar3) {
LAB_00168e80:
      window_choose_scroll_up
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,(long)param_9,pcVar16,puVar14,pcVar13,uVar17,param_14);
      break;
    }
    *(uint *)(lVar1 + 0xc0) = uVar6 - 1;
    window_choose_scroll_up
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,(long)param_9,pcVar16,(ulong)(uVar6 - 1),pcVar13,uVar17,param_14);
    uVar18 = screen_write_start(alStack_48,(long)param_9,0);
    uVar15 = (ulong)(*(int *)(*(long *)(lVar1 + 8) + 8) - 1);
LAB_00169010:
    window_choose_write_line
              (uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
               (long)alStack_48,uVar15,pcVar13,uVar17,param_14);
    screen_write_stop();
    break;
  case 0x29:
    if ((char *)((ulong)param_12 & 0xffff1fffffffffff) + -0x30 < (char *)0xa) {
      window_choose_prompt_input
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,0,"Goto Item",(long)param_9,
                 (char *)((ulong)param_12 & 0xffff1fffffffffff),uVar17,param_14);
    }
    break;
  case 0x2a:
switchD_00168b79_caseD_2a:
    *(undefined8 *)(lVar1 + 0xbc) = 0;
    window_choose_redraw_screen
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,(long)param_9,pcVar16,&switchD_00168b79::switchdataD_00181ce0,pcVar13
               ,uVar17,param_14);
    break;
  case 0x2b:
    *(undefined4 *)(lVar1 + 0xc0) = *(undefined4 *)(lVar1 + 0xbc);
    window_choose_redraw_screen
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,(long)param_9,pcVar16,&switchD_00168b79::switchdataD_00181ce0,pcVar13
               ,uVar17,param_14);
    break;
  case 0x2c:
    plVar10 = (long *)window_choose_get_item((long)param_9,(ulong)param_12,param_13);
    if ((plVar10 == (long *)0x0) || ((*(byte *)((long)plVar10 + 0x14) & 1) == 0)) break;
    uVar18 = *(undefined4 *)(lVar1 + 0xc0);
    pcVar16 = *(char **)(*plVar10 + 0x18);
LAB_00168ce1:
    uVar19 = window_choose_collapse(param_9,pcVar16,uVar18);
    uVar15 = extraout_RDX_02;
    goto LAB_00168bf1;
  case 0x2d:
    window_choose_collapse_all
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,(long)param_9);
    break;
  case 0x2e:
    plVar10 = (long *)window_choose_get_item((long)param_9,(ulong)param_12,param_13);
    if ((plVar10 != (long *)0x0) && ((*(byte *)((long)plVar10 + 0x14) & 1) == 0)) {
      uVar19 = *(undefined8 *)(*plVar10 + 0x18);
      uVar2 = window_choose_expand(param_9,uVar19,*(undefined4 *)(lVar1 + 0xc0));
      window_choose_redraw_screen
                (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,uVar19,
                 extraout_RDX_04,pcVar13,uVar17,param_14);
    }
    break;
  case 0x2f:
    window_choose_expand_all
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,(long)param_9);
    break;
  case 0x30:
    ppcVar9 = (char **)window_choose_get_item((long)param_9,(ulong)param_12,param_13);
    if (ppcVar9 == (char **)0x0) break;
    pcVar13 = *ppcVar9;
    uVar18 = *(undefined4 *)(lVar1 + 0xc0);
    pcVar16 = *(char **)(pcVar13 + 0x18);
    if ((*(byte *)((long)ppcVar9 + 0x14) & 1) != 0) goto LAB_00168ce1;
    uVar19 = window_choose_expand(param_9,pcVar16,uVar18);
    uVar15 = extraout_RDX_03;
    goto LAB_00168bf1;
  case 0x31:
    if (uVar6 == 0) break;
    if (*(int *)(lVar1 + 0xc0) != 0) {
      uVar6 = *(int *)(lVar1 + 0xc0) - 1;
      *(uint *)(lVar1 + 0xc0) = uVar6;
      if (uVar6 < *(uint *)(lVar1 + 0xbc)) goto LAB_00168e80;
      uVar18 = screen_write_start(alStack_48,(long)param_9,0);
      uVar18 = window_choose_write_line
                         (uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_9,(long)alStack_48,
                          (ulong)(uint)(*(int *)(lVar1 + 0xc0) - *(int *)(lVar1 + 0xbc)),pcVar13,
                          uVar17,param_14);
      iVar5 = *(int *)(lVar1 + 0xc0) + 1;
      goto LAB_0016900a;
    }
    *(uint *)(lVar1 + 0xc0) = uVar6 - 1;
    uVar3 = *(uint *)(*(long *)(lVar1 + 8) + 8);
    uVar15 = (ulong)uVar3;
    pcVar13 = (char *)(ulong)(uVar3 - 1);
    uVar19 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    if (uVar3 - 1 < uVar6 - 1) {
      *(uint *)(lVar1 + 0xbc) = uVar6 - uVar3;
      uVar19 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    }
LAB_00168bf1:
    window_choose_redraw_screen
              (uVar19,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,pcVar16,
               uVar15,pcVar13,uVar17,param_14);
  }
LAB_00168bb0:
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



long * window_choose_add_session
                 (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,long param_10,uint *param_11,char *param_12,char *param_13,
                 ulong param_14)

{
  uint uVar1;
  undefined8 uVar2;
  long *plVar3;
  long extraout_RAX;
  char *pcVar4;
  undefined8 uVar5;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  char *pcVar6;
  long *plVar7;
  ulong uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined in_stack_ffffffffffffffc8;
  
  uVar8 = param_14 & 0xffffffff;
  pcVar4 = param_12;
  pcVar6 = param_13;
  plVar3 = window_choose_data_create
                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,2,param_10,
                      *(long *)(param_10 + 0x598),param_12,param_13,param_14);
  uVar1 = *param_11;
  plVar3[3] = (long)param_11;
  *(uint *)(plVar3 + 2) = uVar1;
  param_11[0x4a] = param_11[0x4a] + 1;
  uVar2 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,param_12,param_10,extraout_RDX,pcVar4,pcVar6,param_14);
  plVar3[6] = extraout_RAX;
  uVar2 = format_add(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar3[7],"line",
                     "%u",uVar8,pcVar6,param_14,in_stack_ffffffffffffffc8);
  plVar7 = (long *)0x0;
  uVar5 = 0;
  uVar2 = format_defaults(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (uint **)plVar3[7],0,param_11,(uint *)0x0,(uint *)0x0,param_14);
  pcVar4 = cmd_template_replace
                     (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_13,
                      *(char **)(param_11 + 2),1,uVar5,plVar7,param_14);
  plVar3[8] = (long)pcVar4;
  window_choose_add(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,param_9,(long)plVar3,extraout_RDX_00,uVar5,
                    plVar7,(char **)param_14);
  return plVar3;
}



long * window_choose_add_window
                 (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,long param_10,uint *param_11,uint *param_12,char *param_13,
                 char **param_14,uint param_15)

{
  uint uVar1;
  long lVar2;
  undefined8 uVar3;
  long *plVar4;
  long extraout_RAX;
  char *pcVar5;
  uint *puVar6;
  ulong uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  long *plVar8;
  char **ppcVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined in_stack_ffffffffffffffb8;
  undefined7 uStack_47;
  
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  puVar6 = param_12;
  pcVar5 = param_13;
  ppcVar9 = param_14;
  plVar4 = window_choose_data_create
                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,param_10,
                      *(long *)(param_10 + 0x598),(undefined *)param_12,param_13,param_14);
  uVar1 = *param_12;
  plVar4[4] = (long)param_12;
  *(uint *)(plVar4 + 2) = uVar1;
  plVar4[3] = (long)param_11;
  param_11[0x4a] = param_11[0x4a] + 1;
  uVar3 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,param_13,param_10,extraout_RDX,puVar6,pcVar5,ppcVar9);
  plVar4[6] = extraout_RAX;
  uVar3 = format_add(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,plVar4[7],"line",
                     "%u",(ulong)param_15,pcVar5,ppcVar9,in_stack_ffffffffffffffb8);
  plVar8 = (long *)0x0;
  uVar3 = format_defaults(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (uint **)plVar4[7],0,param_11,param_12,(uint *)0x0,ppcVar9);
  uVar7 = (ulong)*param_12;
  uVar3 = xasprintf(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                    (long *)&stack0xffffffffffffffb8,"%s:%d",*(undefined8 *)(param_11 + 2),uVar7,
                    plVar8,ppcVar9,in_stack_ffffffffffffffb8);
  pcVar5 = cmd_template_replace
                     (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(char *)param_14
                      ,(char *)CONCAT71(uStack_47,in_stack_ffffffffffffffb8),1,uVar7,plVar8,ppcVar9)
  ;
  plVar4[8] = (long)pcVar5;
  free((void *)CONCAT71(uStack_47,in_stack_ffffffffffffffb8));
  window_choose_add(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,
                    param_5,param_6,param_7,param_8,param_9,(long)plVar4,extraout_RDX_00,uVar7,
                    plVar8,ppcVar9);
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return plVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_clock_free(long param_1)

{
  void **__ptr;
  
  __ptr = *(void ***)(param_1 + 0x1f0);
  event_del(__ptr + 0x10);
  screen_free(__ptr);
  free(__ptr);
  return;
}



void window_clock_key(uint *param_1)

{
  window_pane_reset_mode(param_1);
  return;
}



void window_clock_draw_screen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               ulong param_13,size_t param_14)

{
  long lVar1;
  uint uVar2;
  uint uVar3;
  char *pcVar4;
  char *pcVar5;
  tm *__tp;
  tm *__tp_00;
  ulong uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint *puVar7;
  uint *puVar8;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  uint uVar9;
  undefined *puVar10;
  uint uVar11;
  long in_FS_OFFSET;
  bool bVar12;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined8 uVar13;
  undefined8 extraout_XMM0_Qa_01;
  undefined8 uVar14;
  undefined8 extraout_XMM0_Qa_02;
  undefined auVar15 [16];
  undefined in_stack_ffffffffffffff18;
  byte *pbVar16;
  uint *local_d8;
  time_t local_c0;
  long local_b8 [2];
  undefined local_a8 [12];
  undefined4 uStack_9c;
  undefined4 local_98;
  uint local_88 [18];
  long local_40;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar4 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(*(long *)(param_9 + 8) + 0x188),"clock-mode-colour",
                              param_11,param_12,param_13,param_14);
  pcVar5 = options_get_number(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,*(char ***)(*(long *)(param_9 + 8) + 0x188),"clock-mode-style"
                              ,extraout_RDX,param_12,param_13,param_14);
  screen_write_start(local_b8,0,lVar1);
  local_c0 = time((time_t *)0x0);
  __tp = localtime(&local_c0);
  if ((int)pcVar5 == 0) {
    __tp_00 = localtime(&local_c0);
    strftime((char *)local_88,0x40,"%l:%M ",__tp_00);
    if (__tp->tm_hour < 0xc) {
      puVar10 = &DAT_00181dc9;
      strlcat((char *)local_88,"AM",0x40);
      __tp = __tp_00;
      uVar14 = extraout_RDX_00;
      uVar13 = extraout_XMM0_Qa_00;
    }
    else {
      puVar10 = &DAT_00181dc6;
      strlcat((char *)local_88,"PM",0x40);
      __tp = __tp_00;
      uVar14 = extraout_RDX_01;
      uVar13 = extraout_XMM0_Qa_01;
    }
  }
  else {
    puVar10 = (undefined *)0x40;
    strftime((char *)local_88,0x40,"%H:%M",__tp);
    uVar14 = extraout_RDX_02;
    uVar13 = extraout_XMM0_Qa_02;
  }
  local_d8 = local_88;
  screen_write_clearscreen
            (uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)local_b8,puVar10,
             uVar14,(ulong)__tp,param_13,param_14);
  lVar1 = *(long *)(lVar1 + 8);
  uVar11 = *(uint *)(lVar1 + 4);
  puVar8 = local_d8;
  do {
    puVar7 = puVar8;
    uVar2 = *puVar7 + 0xfefefeff & ~*puVar7;
    uVar3 = uVar2 & 0x80808080;
    puVar8 = puVar7 + 1;
  } while (uVar3 == 0);
  bVar12 = (uVar2 & 0x8080) == 0;
  if (bVar12) {
    uVar3 = uVar3 >> 0x10;
  }
  if (bVar12) {
    puVar8 = (uint *)((long)puVar7 + 6);
  }
  pcVar5 = (char *)((long)puVar8 + ((-3 - (ulong)CARRY1((byte)uVar3,(byte)uVar3)) - (long)local_d8))
  ;
  if (((char *)(ulong)uVar11 < (char *)((long)pcVar5 * 6)) ||
     (uVar3 = *(uint *)(lVar1 + 8), uVar3 < 6)) {
    if ((pcVar5 <= (char *)(ulong)uVar11) && (*(uint *)(lVar1 + 8) != 0)) {
      screen_write_cursormove
                ((long)local_b8,(uVar11 >> 1) - (int)((ulong)pcVar5 >> 1),*(uint *)(lVar1 + 8) >> 1)
      ;
      local_98 = 0x1010000;
      _local_a8 = grid_default_cell._0_16_;
      auVar15 = grid_default_cell._0_16_;
      uVar14 = colour_set_fg(local_a8,(uint)pcVar4);
      screen_write_puts(uVar14,auVar15._0_4_,param_3,param_4,param_5,param_6,param_7,param_8,
                        local_b8,(long)local_a8,"%s",local_d8,param_13,param_14,
                        in_stack_ffffffffffffff18);
    }
  }
  else {
    local_a8._8_4_ = 0x20;
    local_a8._0_8_ = 0x80000080000;
    uStack_9c = 0;
    local_98 = 0x1010000;
    pbVar16 = local_a8;
    colour_set_bg(pbVar16,(uint)pcVar4);
    if ((char)local_88[0] != '\0') {
      uVar11 = (uVar11 >> 1) + 5 + (int)pcVar5 * -3;
      do {
        if ((byte)((char)local_88[0] - 0x30U) < 10) {
          uVar6 = (ulong)((int)(char)local_88[0] - 0x30);
LAB_0016956e:
          pcVar4 = window_clock_table + uVar6 * 0x19;
          uVar2 = uVar11 - 5;
          pcVar5 = pcVar4;
          uVar9 = (uVar3 >> 1) - 3;
          do {
            do {
              screen_write_cursormove((long)local_b8,uVar2,uVar9);
              if (*pcVar4 != '\0') {
                screen_write_putc(local_b8,(long)pbVar16,0x20);
              }
              uVar2 = uVar2 + 1;
              pcVar4 = pcVar4 + 1;
            } while (uVar2 != uVar11);
            pcVar4 = pcVar5 + 5;
            uVar9 = uVar9 + 1;
            uVar2 = uVar11 - 5;
            pcVar5 = pcVar4;
          } while (pcVar4 != window_clock_table + uVar6 * 0x19 + 0x19);
        }
        else {
          if ((char)local_88[0] == ':') {
            uVar6 = 10;
            goto LAB_0016956e;
          }
          if ((char)local_88[0] == 'A') {
            uVar6 = 0xb;
            goto LAB_0016956e;
          }
          if ((char)local_88[0] == 'P') {
            uVar6 = 0xc;
            goto LAB_0016956e;
          }
          if ((char)local_88[0] == 'M') {
            uVar6 = 0xd;
            goto LAB_0016956e;
          }
        }
        local_d8 = (uint *)((long)local_d8 + 1);
        uVar11 = uVar11 + 6;
        local_88[0]._0_1_ = *(char *)local_d8;
      } while ((char)local_88[0] != '\0');
    }
  }
  screen_write_stop();
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void window_clock_timer_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,long param_11,undefined8 param_12,
               ulong param_13,size_t param_14)

{
  long lVar1;
  undefined8 extraout_RDX;
  tm *__tp;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  time_t local_b0;
  undefined8 local_a8;
  undefined8 local_a0;
  tm local_98;
  tm local_58;
  long local_20;
  
  lVar1 = *(long *)(param_11 + 0x1f0);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_a0 = 0;
  local_a8 = 1;
  event_del(lVar1 + 0x80);
  event_add(lVar1 + 0x80,&local_a8);
  local_b0 = time((time_t *)0x0);
  gmtime_r(&local_b0,&local_98);
  __tp = &local_58;
  gmtime_r((time_t *)(lVar1 + 0x78),__tp);
  if (local_98.tm_min != local_58.tm_min) {
    *(time_t *)(lVar1 + 0x78) = local_b0;
    window_clock_draw_screen
              (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,
               __tp,extraout_RDX,param_12,param_13,param_14);
    server_redraw_window(*(long *)(param_11 + 8));
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 *
window_clock_init(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 ulong param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,size_t param_14)

{
  uint uVar1;
  undefined8 uVar2;
  undefined8 *puVar3;
  time_t tVar4;
  undefined8 uVar5;
  undefined8 extraout_RDX;
  ulong uVar6;
  ulong uVar7;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined8 local_38;
  undefined8 local_30;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_38 = 1;
  local_30 = 0;
  puVar3 = (undefined8 *)
           xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x100,param_10,
                   param_11,param_12,param_13,param_14);
  *(undefined8 **)(param_9 + 0x1f0) = puVar3;
  tVar4 = time((time_t *)0x0);
  puVar3[0xf] = tVar4;
  uVar7 = param_9;
  event_set(puVar3 + 0x10,0xffffffff,0);
  uVar8 = event_add(puVar3 + 0x10,&local_38);
  uVar5 = 0;
  uVar1 = *(uint *)(*(long *)(param_9 + 0x150) + 4);
  uVar6 = (ulong)uVar1;
  uVar2 = screen_init(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar3,uVar1,
                      *(uint *)(*(long *)(param_9 + 0x150) + 8),0,uVar7,param_14);
  *(uint *)(puVar3 + 6) = *(uint *)(puVar3 + 6) & 0xfffffffe;
  window_clock_draw_screen
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar6,
             extraout_RDX,uVar5,uVar7,param_14);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_clock_resize(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9,undefined8 param_10,ulong param_11,undefined8 param_12,
                        ulong param_13,size_t param_14)

{
  undefined8 uVar1;
  undefined8 extraout_RDX;
  undefined8 uVar2;
  
  uVar1 = 0;
  uVar2 = screen_resize(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        *(long *)(param_9 + 0x1f0),(uint)param_10,param_11,0,param_13,param_14);
  window_clock_draw_screen
            (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             extraout_RDX,uVar1,param_13,param_14);
  return;
}



undefined8 *
window_copy_init(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 uVar2;
  undefined8 *puVar3;
  undefined8 extraout_RAX;
  char *pcVar4;
  undefined8 uVar5;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Db;
  undefined auVar7 [16];
  
  auVar7 = xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x100,param_10,
                   param_11,param_12,param_13,param_14);
  puVar3 = auVar7._0_8_;
  *(undefined8 **)(param_9 + 0x1f0) = puVar3;
  *(undefined4 *)(puVar3 + 0x13) = 0;
  *(undefined4 *)(puVar3 + 0x10) = 0;
  *(undefined4 *)((long)puVar3 + 0xa4) = 0;
  puVar3[0x15] = 0;
  puVar3[0x16] = 0;
  puVar3[0x17] = 0;
  puVar3[0x18] = 0;
  uVar6 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,"",param_10,auVar7._8_8_,param_12,param_13,param_14);
  puVar3[0x1c] = 0;
  puVar3[0x19] = extraout_RAX;
  *(undefined8 *)((long)puVar3 + 0xd4) = 0xffffffff;
  if (*(int *)(param_9 + 0x78) != -1) {
    uVar6 = bufferevent_disable(*(undefined8 *)(param_9 + 0x80),6);
  }
  *(undefined *)((long)puVar3 + 0xec) = 0;
  lVar1 = *(long *)(param_9 + 0x150);
  uVar5 = 0;
  *(undefined4 *)(puVar3 + 0x1d) = 0;
  uVar2 = screen_init(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar3,
                      *(undefined4 *)(lVar1 + 4),*(uint *)(lVar1 + 8),0,param_13,param_14);
  pcVar4 = options_get_number(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(*(long *)(param_9 + 8) + 0x188),"mode-keys",extraout_RDX,
                              uVar5,param_13,param_14);
  if ((int)pcVar4 == 0) {
    mode_key_init(puVar3 + 0x11,&mode_key_tree_emacs_copy);
  }
  else {
    mode_key_init(puVar3 + 0x11,&mode_key_tree_vi_copy);
  }
  *(int *)((long)puVar3 + 0x4c) = (int)pcVar4;
  puVar3[0xf] = 0;
  puVar3[0x1e] = 0;
  return puVar3;
}



void window_copy_free(long param_1)

{
  void **__ptr;
  
  __ptr = *(void ***)(param_1 + 0x1f0);
  if (*(int *)(param_1 + 0x78) != -1) {
    bufferevent_enable(*(undefined8 *)(param_1 + 0x80),6);
  }
  free(__ptr[0x1c]);
  free(__ptr[0x19]);
  if ((void **)__ptr[0xf] != (void **)(param_1 + 0x148)) {
    screen_free((void **)__ptr[0xf]);
    free(__ptr[0xf]);
  }
  screen_free(__ptr);
  free(__ptr);
  return;
}



void window_copy_init_for_output
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  undefined8 *puVar2;
  undefined4 extraout_XMM0_Da;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  puVar2 = (undefined8 *)
           xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0x78,param_10,
                   param_11,param_12,param_13,param_14);
  *(undefined8 **)(lVar1 + 0x78) = puVar2;
  screen_init(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar2,
              *(undefined4 *)(*(long *)(param_9 + 0x150) + 4),
              *(uint *)(*(long *)(param_9 + 0x150) + 8),0xffffffff,param_13,param_14);
  return;
}



bool window_copy_search_compare
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,ulong param_10,ulong param_11,long param_12,ulong param_13,
               undefined8 param_14)

{
  int iVar1;
  __int32_t **pp_Var2;
  ulong uVar3;
  long in_FS_OFFSET;
  bool bVar4;
  undefined4 uVar5;
  undefined4 auStack_58 [2];
  byte local_50 [10];
  byte local_46;
  char local_45;
  undefined4 local_38 [2];
  byte local_30 [10];
  byte local_26;
  char local_25;
  long local_20;
  
  iVar1 = (int)param_14;
  uVar3 = param_13 & 0xffffffff;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar5 = grid_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        param_10,param_11,auStack_58,param_13,param_14);
  grid_get_cell(uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_12,uVar3,0,
                local_38,param_13,param_14);
  bVar4 = false;
  if ((local_46 == local_26) && (local_45 == local_25)) {
    if ((iVar1 == 0) || (local_46 != 1)) {
      iVar1 = memcmp(local_50,local_30,(ulong)local_46);
      bVar4 = iVar1 == 0;
    }
    else {
      pp_Var2 = __ctype_tolower_loc();
      bVar4 = (*pp_Var2)[local_50[0]] == (uint)local_30[0];
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return bVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
window_copy_search_lr
          (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,uint *param_11,uint param_12,uint param_13,uint param_14,uint param_15)

{
  bool bVar1;
  uint uVar2;
  undefined7 extraout_var;
  uint uVar3;
  ulong uVar4;
  undefined4 extraout_XMM0_Da;
  
  if (param_13 < param_14) {
    uVar2 = *(uint *)(param_10 + 4);
    do {
      if (*(uint *)(param_9 + 4) <= uVar2 + param_13) {
        return 0;
      }
      if (uVar2 == 0) {
LAB_00169c2c:
        *param_11 = param_13;
        return 1;
      }
      uVar4 = 0;
      do {
        uVar3 = (uint)uVar4;
        bVar1 = window_copy_search_compare
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           (ulong)(uVar3 + param_13),(ulong)param_12,param_10,uVar4,(ulong)param_15)
        ;
        param_1 = extraout_XMM0_Da;
        if ((int)CONCAT71(extraout_var,bVar1) == 0) {
          uVar2 = *(uint *)(param_10 + 4);
          break;
        }
        uVar2 = *(uint *)(param_10 + 4);
        uVar3 = uVar3 + 1;
        uVar4 = (ulong)uVar3;
      } while (uVar3 < uVar2);
      if (uVar2 == uVar3) goto LAB_00169c2c;
      param_13 = param_13 + 1;
    } while (param_14 != param_13);
  }
  return 0;
}



undefined8
window_copy_search_rl
          (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long param_10,uint *param_11,uint param_12,uint param_13,int param_14,uint param_15)

{
  bool bVar1;
  uint uVar2;
  undefined7 extraout_var;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  ulong uVar6;
  undefined4 extraout_XMM0_Da;
  
  if (param_13 < param_14 + 1U) {
    uVar2 = *(uint *)(param_10 + 4);
    uVar3 = param_14 + 1U;
    do {
      uVar4 = uVar3 - 1;
      if (uVar2 <= (*(int *)(param_9 + 4) + 1) - uVar3) {
        if (uVar2 == 0) {
LAB_00169cf1:
          *param_11 = uVar4;
          return 1;
        }
        uVar6 = 0;
        do {
          bVar1 = window_copy_search_compare
                            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                             ,(ulong)((uVar3 - 1) + (int)uVar6),(ulong)param_12,param_10,uVar6,
                             (ulong)param_15);
          param_1 = extraout_XMM0_Da;
          if ((int)CONCAT71(extraout_var,bVar1) == 0) {
            uVar2 = *(uint *)(param_10 + 4);
            break;
          }
          uVar2 = *(uint *)(param_10 + 4);
          uVar5 = (int)uVar6 + 1;
          uVar6 = (ulong)uVar5;
        } while (uVar5 < uVar2);
        if ((uint)uVar6 == uVar2) goto LAB_00169cf1;
      }
      uVar3 = uVar4;
    } while (param_13 < uVar4);
  }
  return 0;
}



void window_copy_write_line
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,uint param_11,undefined8 param_12,char *param_13,
               size_t param_14)

{
  long lVar1;
  long lVar2;
  int iVar3;
  size_t sVar4;
  uint uVar5;
  ulong uVar6;
  ulong uVar7;
  long in_FS_OFFSET;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da;
  undefined8 uVar9;
  undefined in_stack_fffffffffffffd88;
  undefined4 local_268;
  undefined4 uStack_264;
  undefined4 uStack_260;
  undefined4 uStack_25c;
  undefined4 local_258;
  undefined local_248 [520];
  long local_40;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar8 = style_apply(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      (undefined8 *)&local_268,*(char ***)(*(long *)(param_9 + 8) + 0x188),
                      "mode-style",param_12,param_13,param_14);
  lVar2 = *(long *)(lVar1 + 8);
  if (param_11 == 0) {
    if (*(int *)(lVar1 + 0xbc) == 10) {
      uVar6 = (ulong)*(uint *)(lVar2 + 4);
      uVar7 = 0;
      goto LAB_00169da3;
    }
    uVar6 = (ulong)*(uint *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc);
    iVar3 = xsnprintf(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_248,0x200,
                      "[%u/%u]",(ulong)*(uint *)(lVar1 + 0x98),uVar6,param_14,
                      in_stack_fffffffffffffd88);
    uVar5 = *(uint *)(*(long *)(lVar1 + 8) + 4);
    uVar7 = (ulong)uVar5;
    if ((ulong)(long)iVar3 < (ulong)uVar5) {
      uVar7 = (long)iVar3;
    }
    uVar9 = screen_write_cursormove(param_10,uVar5 - (int)uVar7,0);
    uVar5 = 0;
    screen_write_puts(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                      (long)&local_268,"%s",local_248,uVar6,param_14,in_stack_fffffffffffffd88);
    if (uVar7 < *(uint *)(*(long *)(lVar1 + 8) + 4)) goto LAB_00169f00;
  }
  else {
    uVar6 = (ulong)*(uint *)(lVar2 + 4);
    uVar7 = 0;
    if ((*(int *)(lVar2 + 8) - 1U == param_11) && (iVar3 = *(int *)(lVar1 + 0xbc), iVar3 != 0)) {
      uVar5 = *(uint *)(lVar2 + 4) + 1;
      uVar7 = (ulong)uVar5;
      if (0x1ff < uVar5) {
        uVar7 = 0x200;
      }
      if (iVar3 == 2) {
        iVar3 = xsnprintf(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_248,
                          uVar7,"Repeat: %d",(ulong)*(uint *)(lVar1 + 0xd4),param_13,param_14,
                          in_stack_fffffffffffffd88);
        uVar7 = (ulong)iVar3;
      }
      else {
        param_13 = *(char **)(lVar1 + 200);
        if (iVar3 == 10) {
          sVar4 = strlen(param_13);
          iVar3 = xsnprintf(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                            ,local_248,0x200,&DAT_00181f51,*(undefined8 *)(lVar1 + 0xc0),param_13,
                            param_14,in_stack_fffffffffffffd88);
          memset(local_248 + iVar3,0x2a,(long)(int)sVar4);
          uVar7 = (long)(int)sVar4 + (long)iVar3;
          local_248[uVar7] = 0;
        }
        else {
          iVar3 = xsnprintf(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_248,
                            uVar7,"%s: %s",*(undefined8 *)(lVar1 + 0xc0),param_13,param_14,
                            in_stack_fffffffffffffd88);
          uVar7 = (ulong)iVar3;
        }
      }
      uVar9 = screen_write_cursormove(param_10,0,param_11);
      screen_write_puts(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                        (long)&local_268,"%s",local_248,param_13,param_14,in_stack_fffffffffffffd88)
      ;
      uVar6 = (ulong)*(uint *)(*(long *)(lVar1 + 8) + 4);
    }
LAB_00169da3:
    uVar5 = (uint)uVar7;
    if (uVar7 < uVar6) {
LAB_00169f00:
      uVar9 = screen_write_cursormove(param_10,uVar5,param_11);
      screen_write_copy(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,
                        *(long *)(lVar1 + 0x78),uVar5,
                        (param_11 - *(int *)(lVar1 + 0x98)) +
                        *(int *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc),
                        *(int *)(*(long *)(lVar1 + 8) + 4) - (int)uVar7,1);
      uVar5 = *(uint *)(lVar1 + 0xb0);
      goto joined_r0x00169f45;
    }
  }
  uVar5 = *(uint *)(lVar1 + 0xb0);
joined_r0x00169f45:
  if ((uVar5 == param_11) &&
     (iVar3 = *(int *)(*(long *)(lVar1 + 8) + 4), *(int *)(lVar1 + 0xac) == iVar3)) {
    local_258 = 0x1010000;
    local_268 = 0x80000;
    uStack_264 = 0x800;
    uStack_260 = 0x20;
    uStack_25c = 0;
    screen_write_cursormove(param_10,iVar3 - 1,param_11);
    screen_write_putc(param_10,(long)&local_268,0x24);
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void window_copy_init_from_pane
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               char *param_13,size_t param_14)

{
  long lVar1;
  long lVar2;
  uint uVar3;
  uint uVar4;
  long in_FS_OFFSET;
  undefined8 uVar5;
  undefined1 in_stack_ffffffffffffffb8;
  
  lVar1 = *(long *)(param_9 + 0x7c);
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  if (*(undefined1 **)(param_9 + 0x7a) != window_copy_mode) {
                    // WARNING: Subroutine does not return
    fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"not in copy mode",
           param_10,param_11,param_12,param_13,param_14,in_stack_ffffffffffffffb8);
  }
  uVar3 = param_9[0x56];
  *(uint **)(lVar1 + 0x78) = param_9 + 0x52;
  uVar4 = param_9[0x57];
  *(uint *)(lVar1 + 0xac) = uVar3;
  *(uint *)(lVar1 + 0xb0) = uVar4;
  *(int *)(lVar1 + 0xa8) = (int)param_10;
  *(uint *)(lVar1 + 0x10) = uVar3;
  *(uint *)(lVar1 + 0x14) = uVar4;
  uVar5 = screen_write_start((long *)&stack0xffffffffffffffb8,0,lVar1);
  if (*(int *)(*(long *)(lVar1 + 8) + 8) != 0) {
    uVar3 = 0;
    do {
      uVar4 = uVar3 + 1;
      uVar5 = window_copy_write_line
                        (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9
                         ,(long)&stack0xffffffffffffffb8,uVar3,param_12,param_13,param_14);
      uVar3 = uVar4;
    } while (uVar4 < *(uint *)(*(long *)(lVar1 + 8) + 8));
  }
  screen_write_cursormove
            ((long)&stack0xffffffffffffffb8,*(uint *)(lVar1 + 0xac),*(uint *)(lVar1 + 0xb0));
  screen_write_stop();
  tmate_sync_copy_mode(param_9);
  if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_write_lines
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,uint param_11,undefined8 param_12,char *param_13,
               size_t param_14)

{
  uint uVar1;
  uint uVar2;
  
  uVar2 = param_11 + (int)param_12;
  uVar1 = param_11;
  if (param_11 < uVar2) {
    do {
      uVar1 = uVar1 + 1;
      param_1 = window_copy_write_line
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           param_10,param_11,param_12,param_13,param_14);
    } while (uVar1 != uVar2);
  }
  return;
}



void window_copy_redraw_lines
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,int param_11,undefined8 param_12,char *param_13,
               size_t param_14)

{
  long lVar1;
  uint uVar2;
  uint uVar3;
  long in_FS_OFFSET;
  undefined8 uVar4;
  long alStack_48 [3];
  long local_30;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar4 = screen_write_start(alStack_48,param_9,0);
  uVar2 = param_10;
  if (param_10 < param_11 + param_10) {
    do {
      uVar3 = uVar2 + 1;
      uVar4 = window_copy_write_line
                        (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (long)alStack_48,uVar2,param_12,param_13,param_14);
      uVar2 = uVar3;
    } while (uVar3 != param_11 + param_10);
  }
  screen_write_cursormove((long)alStack_48,*(uint *)(lVar1 + 0xac),*(uint *)(lVar1 + 0xb0));
  screen_write_stop();
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_vadd(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                     undefined8 param_13,size_t param_14)

{
  int iVar1;
  uint uVar2;
  long lVar3;
  uint *puVar4;
  char *pcVar5;
  undefined8 extraout_RDX;
  char *pcVar6;
  long in_FS_OFFSET;
  undefined8 uVar7;
  undefined8 uVar8;
  char *local_80;
  long local_78 [2];
  long local_68 [2];
  undefined4 local_58;
  undefined4 uStack_54;
  undefined4 uStack_50;
  undefined4 uStack_4c;
  undefined4 local_48;
  long local_40;
  
  lVar3 = *(long *)(param_9 + 0x7c);
  puVar4 = *(uint **)(lVar3 + 0x78);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (puVar4 != param_9 + 0x52) {
    local_48 = 0x1010000;
    local_58 = 0x80000;
    uStack_54 = 0x800;
    uStack_50 = 0x20;
    uStack_4c = 0;
    iVar1 = *(int *)(*(long *)(puVar4 + 2) + 0xc);
    uVar7 = screen_write_start(local_78,0,(long)puVar4);
    uVar8 = param_11;
    if (*(int *)(lVar3 + 0x80) == 0) {
      *(undefined4 *)(lVar3 + 0x80) = 1;
    }
    else {
      uVar7 = screen_write_carriagereturn((long)local_78);
      uVar7 = screen_write_linefeed
                        (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)local_78,0,extraout_RDX,param_12,param_11,param_14);
    }
    uVar2 = puVar4[5];
    uVar7 = xvasprintf(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long *)&local_80,param_10,uVar8,param_12,uVar8,param_14);
    pcVar5 = "%s";
    pcVar6 = local_80;
    screen_write_nputs(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_78,0,
                       (long)&local_58,"%s",local_80,param_14,(char)uVar8);
    tmate_write_copy_mode(param_9,local_80);
    free(local_80);
    screen_write_stop();
    *(int *)(lVar3 + 0x98) =
         (*(int *)(lVar3 + 0x98) + *(int *)(*(long *)(*(long *)(lVar3 + 0x78) + 8) + 0xc)) - iVar1;
    uVar8 = screen_write_start(local_68,(long)param_9,lVar3);
    if (*(int *)(*(long *)(*(long *)(lVar3 + 0x78) + 8) + 0xc) != 0) {
      uVar8 = window_copy_redraw_lines
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9
                         ,0,1,pcVar5,pcVar6,param_14);
    }
    window_copy_redraw_lines
              (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,uVar2,
               (puVar4[5] + 1) - uVar2,pcVar5,pcVar6,param_14);
    screen_write_stop();
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_add(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                    undefined8 param_13,size_t param_14,undefined param_15)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [16];
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  size_t local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._8_8_ = in_XMM0_Qb;
    local_88._0_8_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_d8 = 0x10;
  local_c8 = local_b8;
  local_d4 = 0x30;
  local_a8 = param_11;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  window_copy_vadd(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
                   &local_d8,param_12,param_13,param_14);
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
window_copy_key_numeric_prefix
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          ulong param_10,undefined8 param_11,undefined8 param_12,char *param_13,size_t param_14)

{
  long lVar1;
  undefined8 uVar2;
  
  uVar2 = 1;
  if ((param_10 & 0xffff1fffffffffff) - 0x30 < 10) {
    lVar1 = *(long *)(param_9 + 0x1f0);
    uVar2 = 0;
    if (*(int *)(lVar1 + 0xd4) < 100) {
      *(int *)(lVar1 + 0xd4) =
           (int)(param_10 & 0xffff1fffffffffff) + -0x30 + *(int *)(lVar1 + 0xd4) * 10;
      window_copy_redraw_lines
                (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                 *(int *)(*(long *)(lVar1 + 8) + 8) - 1,1,param_12,param_13,param_14);
      return 0;
    }
  }
  return uVar2;
}



void window_copy_redraw_selection
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,undefined8 param_11,undefined8 param_12,char *param_13,
               size_t param_14)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = *(uint *)(*(long *)(param_9 + 0x1f0) + 0xb0);
  uVar2 = uVar1;
  if (uVar1 < param_10) {
    uVar2 = param_10;
    param_10 = uVar1;
  }
  window_copy_redraw_lines
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             (uVar2 + 1) - param_10,param_12,param_13,param_14);
  return;
}



void window_copy_redraw_screen
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               char *param_13,size_t param_14)

{
  window_copy_redraw_lines
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
             *(int *)(*(long *)(*(long *)(param_9 + 0x1f0) + 8) + 8),param_12,param_13,param_14);
  return;
}



void window_copy_update_cursor
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,uint param_11,undefined8 param_12)

{
  int iVar1;
  uint uVar2;
  long lVar3;
  int iVar4;
  char *pcVar5;
  size_t sVar6;
  long in_FS_OFFSET;
  long alStack_38 [3];
  long local_20;
  
  pcVar5 = (char *)(ulong)param_11;
  lVar3 = *(long *)(param_9 + 0x1f0);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  iVar1 = *(int *)(lVar3 + 0xac);
  *(int *)(lVar3 + 0xac) = param_10;
  uVar2 = *(uint *)(lVar3 + 0xb0);
  sVar6 = (size_t)uVar2;
  *(uint *)(lVar3 + 0xb0) = param_11;
  iVar4 = *(int *)(*(long *)(lVar3 + 8) + 4);
  if (iVar4 == iVar1) {
    param_1 = window_copy_redraw_lines
                        (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         uVar2,1,param_12,pcVar5,sVar6);
    param_10 = *(int *)(lVar3 + 0xac);
    iVar4 = *(int *)(*(long *)(lVar3 + 8) + 4);
  }
  if (param_10 == iVar4) {
    window_copy_redraw_lines
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               *(uint *)(lVar3 + 0xb0),1,param_12,pcVar5,sVar6);
  }
  else {
    screen_write_start(alStack_38,param_9,0);
    screen_write_cursormove((long)alStack_38,*(uint *)(lVar3 + 0xac),*(uint *)(lVar3 + 0xb0));
    screen_write_stop();
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4
window_copy_update_selection
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          int param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  long lVar4;
  undefined4 uVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  long lVar9;
  char *pcVar10;
  size_t sVar11;
  long in_FS_OFFSET;
  undefined8 uVar12;
  undefined8 auStack_48 [3];
  long local_30;
  
  lVar4 = *(long *)(param_9 + 0x1f0);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*(int *)(lVar4 + 0x40) != 0) || (uVar5 = 0, *(int *)(lVar4 + 0x48) != 0)) {
    style_apply(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,auStack_48,
                *(char ***)(*(long *)(param_9 + 8) + 0x188),"mode-style",param_12,param_13,param_14)
    ;
    uVar1 = *(uint *)(lVar4 + 0xa0);
    iVar8 = *(int *)(lVar4 + 0x9c);
    iVar2 = *(int *)(*(long *)(*(long *)(lVar4 + 0x78) + 8) + 0xc);
    uVar7 = iVar2 - *(int *)(lVar4 + 0x98);
    if (uVar1 < uVar7) {
      sVar11 = (size_t)*(uint *)(lVar4 + 0xa4);
      lVar9 = *(long *)(lVar4 + 8);
      iVar6 = 0;
      if (*(uint *)(lVar4 + 0xa4) == 0) {
        iVar8 = 0;
        iVar6 = 0;
      }
    }
    else {
      lVar9 = *(long *)(lVar4 + 8);
      sVar11 = (size_t)*(uint *)(lVar4 + 0xa4);
      iVar6 = *(int *)(lVar9 + 8) + -1;
      if (uVar7 + iVar6 < uVar1) {
        if (*(uint *)(lVar4 + 0xa4) == 0) {
          iVar8 = *(int *)(lVar9 + 4) + -1;
        }
      }
      else {
        iVar6 = (*(int *)(lVar4 + 0x98) + uVar1) - iVar2;
      }
    }
    uVar1 = *(int *)(lVar9 + 0xc) + iVar6;
    uVar7 = *(int *)(lVar9 + 0xc) + *(int *)(lVar4 + 0xb0);
    pcVar10 = (char *)(ulong)uVar7;
    uVar12 = screen_set_selection
                       (lVar4,iVar8,uVar1,*(undefined4 *)(lVar4 + 0xac),uVar7,(int)sVar11,
                        (undefined4 *)auStack_48);
    uVar7 = *(uint *)(lVar4 + 0xa4);
    if ((uVar7 == 0) || (param_10 == 0)) {
      uVar5 = 1;
    }
    else {
      uVar3 = *(uint *)(lVar4 + 0xb0);
      if (uVar1 < uVar3) {
        window_copy_redraw_lines
                  (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar1,
                   (uVar3 + 1) - uVar1,(ulong)uVar7,pcVar10,sVar11);
        uVar5 = 1;
      }
      else {
        window_copy_redraw_lines
                  (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar3,
                   (uVar1 - uVar3) + 1,(ulong)uVar7,pcVar10,sVar11);
        uVar5 = 1;
      }
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_scroll_to
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined4 param_10,ulong param_11,undefined8 param_12,char *param_13,
               size_t param_14)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  ulong uVar5;
  uint uVar6;
  uint uVar7;
  undefined8 extraout_XMM0_Qa;
  
  lVar3 = *(long *)(param_9 + 0x1f0);
  lVar4 = *(long *)(*(long *)(lVar3 + 0x78) + 8);
  *(undefined4 *)(lVar3 + 0xac) = param_10;
  uVar1 = *(uint *)(lVar4 + 8);
  uVar2 = *(uint *)(lVar4 + 0xc);
  uVar5 = (ulong)uVar2;
  uVar6 = (uint)param_11;
  if (uVar6 < uVar1) {
    *(uint *)(lVar3 + 0xb0) = uVar6;
  }
  else {
    uVar7 = uVar1 >> 2;
    param_13 = (char *)(ulong)uVar7;
    if ((uVar1 + uVar2) - uVar7 < uVar6) {
      param_11 = (ulong)(uVar6 - uVar2);
      uVar5 = 0;
      *(uint *)(lVar3 + 0xb0) = uVar6 - uVar2;
    }
    else {
      *(uint *)(lVar3 + 0xb0) = uVar1 - uVar7;
      uVar5 = (ulong)(((uVar2 - uVar6) - uVar7) + uVar1);
    }
  }
  *(int *)(lVar3 + 0x98) = (int)uVar5;
  window_copy_update_selection
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,param_11,
             uVar5,param_13,param_14);
  window_copy_redraw_lines
            (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
             *(int *)(*(long *)(*(long *)(param_9 + 0x1f0) + 8) + 8),uVar5,param_13,param_14);
  return;
}



void window_copy_search_up
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,byte *param_10,undefined8 param_11,undefined8 param_12,size_t param_13,
               size_t param_14)

{
  int iVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  long lVar5;
  bool bVar6;
  uint uVar7;
  char *pcVar8;
  long lVar9;
  __int32_t **pp_Var10;
  ulong uVar11;
  undefined8 uVar12;
  undefined8 extraout_RDX;
  int iVar13;
  char *pcVar14;
  size_t sVar15;
  byte bVar16;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined8 extraout_XMM0_Qa;
  undefined auVar17 [16];
  undefined extraout_XMM0 [16];
  undefined extraout_XMM0_00 [16];
  undefined in_stack_fffffffffffffee8;
  uint uVar18;
  uint local_114;
  uint local_ec;
  long local_e8 [2];
  undefined8 local_d8;
  undefined8 uStack_d0;
  undefined4 local_c8;
  void *local_b8;
  long local_b0;
  long local_40;
  undefined8 extraout_XMM0_Qb;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_10 != (byte *)0x0) && (*param_10 != 0)) {
    lVar3 = *(long *)(param_9 + 0x1f0);
    lVar4 = *(long *)(lVar3 + 0x78);
    lVar5 = *(long *)(lVar4 + 8);
    pcVar8 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(*(long *)(param_9 + 8) + 0x188),"wrap-search",param_11,
                                param_12,param_13,param_14);
    lVar9 = screen_write_strlen(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,"%s",param_10,extraout_RDX,param_12,param_13,param_14,
                                in_stack_fffffffffffffee8);
    screen_init(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_b8,
                (int)lVar9,1,0,param_13,param_14);
    screen_write_start(local_e8,0,(long)&local_b8);
    local_c8 = 0x1010000;
    local_d8 = 0x80000080000;
    uStack_d0 = 0x20;
    screen_write_nputs(0x80000080000,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       local_e8,0xffffffffffffffff,(long)&local_d8,"%s",param_10,param_14,
                       in_stack_fffffffffffffee8);
    auVar17._0_8_ = screen_write_stop();
    auVar17._8_8_ = extraout_XMM0_Qb;
    iVar1 = *(int *)(lVar3 + 0xac);
    iVar13 = (*(int *)(lVar3 + 0xb0) - *(int *)(lVar3 + 0x98)) + *(int *)(lVar5 + 0xc);
    if (iVar1 == 0) {
      if (iVar13 == 0) goto LAB_0016a86a;
      iVar1 = *(int *)(lVar5 + 4);
      iVar13 = iVar13 + -1;
    }
    bVar16 = *param_10;
    if (bVar16 != 0) {
      pp_Var10 = __ctype_tolower_loc();
      do {
        auVar17 = extraout_XMM0;
        if ((int)(char)bVar16 != (*pp_Var10)[bVar16]) {
          local_114 = 0;
          goto LAB_0016a9c8;
        }
        bVar16 = param_10[1];
        param_10 = param_10 + 1;
      } while (bVar16 != 0);
    }
    local_114 = 1;
LAB_0016a9c8:
    bVar6 = false;
    while( true ) {
      lVar3 = local_b0;
      uVar7 = iVar13 + 1;
      uVar18 = uVar7;
      while (uVar7 != 0) {
        uVar2 = iVar1 - 1;
        if (uVar7 != uVar18) {
          uVar2 = *(uint *)(*(long *)(lVar4 + 8) + 4);
        }
        sVar15 = (size_t)uVar2;
        uVar7 = uVar7 - 1;
        pcVar14 = (char *)0x0;
        uVar11 = (ulong)local_114;
        uVar12 = window_copy_search_rl
                           (auVar17._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            lVar5,lVar3,&local_ec,uVar7,0,uVar2,local_114);
        auVar17 = extraout_XMM0_00;
        if ((int)uVar12 != 0) {
          window_copy_scroll_to
                    (extraout_XMM0_00._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9,local_ec,(ulong)uVar7,uVar11,pcVar14,sVar15);
          goto LAB_0016aa91;
        }
      }
      if ((bVar6) || ((int)pcVar8 == 0)) break;
      iVar1 = *(int *)(lVar5 + 4);
      bVar6 = true;
      iVar13 = *(int *)(lVar5 + 8) + *(int *)(lVar5 + 0xc) + -1;
    }
LAB_0016aa91:
    screen_free(&local_b8);
  }
LAB_0016a86a:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void window_copy_search_down
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,byte *param_10,undefined8 param_11,undefined8 param_12,size_t param_13,
               size_t param_14)

{
  long lVar1;
  long lVar2;
  uint uVar3;
  bool bVar4;
  int iVar5;
  uint uVar6;
  char *pcVar7;
  long lVar8;
  __int32_t **pp_Var9;
  undefined8 uVar10;
  uint uVar11;
  int iVar12;
  undefined8 extraout_RDX;
  uint uVar13;
  char *pcVar14;
  size_t sVar15;
  byte bVar16;
  int iVar17;
  long in_FS_OFFSET;
  bool bVar18;
  undefined4 extraout_XMM0_Da;
  undefined8 extraout_XMM0_Qa;
  undefined auVar19 [16];
  undefined extraout_XMM0 [16];
  undefined extraout_XMM0_00 [16];
  undefined8 uStack_120;
  undefined in_stack_fffffffffffffee8;
  uint local_114;
  uint local_ec;
  long local_e8 [2];
  undefined8 local_d8;
  undefined8 uStack_d0;
  undefined4 local_c8;
  void *local_b8;
  long local_b0;
  long local_40;
  undefined8 extraout_XMM0_Qb;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if ((param_10 != (byte *)0x0) && (*param_10 != 0)) {
    lVar1 = *(long *)(param_9 + 0x1f0);
    lVar2 = *(long *)(*(long *)(lVar1 + 0x78) + 8);
    pcVar7 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(*(long *)(param_9 + 8) + 0x188),"wrap-search",param_11,
                                param_12,param_13,param_14);
    lVar8 = screen_write_strlen(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                                param_8,"%s",param_10,extraout_RDX,param_12,param_13,param_14,
                                in_stack_fffffffffffffee8);
    screen_init(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,&local_b8,
                (int)lVar8,1,0,param_13,param_14);
    screen_write_start(local_e8,0,(long)&local_b8);
    local_c8 = 0x1010000;
    local_d8 = 0x80000080000;
    uStack_d0 = 0x20;
    screen_write_nputs(0x80000080000,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       local_e8,0xffffffffffffffff,(long)&local_d8,"%s",param_10,param_14,
                       in_stack_fffffffffffffee8);
    uStack_120 = 0x16abd3;
    auVar19._0_8_ = screen_write_stop();
    auVar19._8_8_ = extraout_XMM0_Qb;
    iVar12 = *(int *)(lVar2 + 0xc);
    iVar5 = *(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98);
    uVar11 = iVar12 + iVar5;
    if (*(int *)(lVar2 + 4) + -1 == *(int *)(lVar1 + 0xac)) {
      iVar17 = *(int *)(lVar2 + 8);
      if (iVar5 == iVar17) goto LAB_0016aafa;
      uVar11 = uVar11 + 1;
      local_114 = 0;
    }
    else {
      local_114 = *(int *)(lVar1 + 0xac) + 1;
      iVar17 = *(int *)(lVar2 + 8);
    }
    bVar16 = *param_10;
    if (bVar16 != 0) {
      uStack_120 = 0x16ac20;
      pp_Var9 = __ctype_tolower_loc();
      do {
        auVar19 = extraout_XMM0;
        if ((int)(char)bVar16 != (*pp_Var9)[bVar16]) {
          uVar13 = 0;
          goto LAB_0016ac52;
        }
        bVar16 = param_10[1];
        param_10 = param_10 + 1;
      } while (bVar16 != 0);
    }
    uVar13 = 1;
LAB_0016ac52:
    bVar4 = false;
    while( true ) {
      lVar1 = local_b0;
      pcVar14 = (char *)(ulong)local_114;
      uVar3 = uVar11 + 1;
      if (uVar11 + 1 < (uint)(iVar17 + 1 + iVar12)) {
        while( true ) {
          sVar15 = (size_t)*(uint *)(lVar2 + 4);
          uVar10 = window_copy_search_lr
                             (auVar19._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              lVar2,lVar1,&local_ec,uVar3 - 1,(uint)pcVar14,*(uint *)(lVar2 + 4),
                              uVar13);
          if ((int)uVar10 != 0) {
            window_copy_scroll_to
                      (extraout_XMM0_00._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,
                       param_8,param_9,local_ec,(ulong)(uVar3 - 1),uStack_120,pcVar14,sVar15);
            goto LAB_0016ace8;
          }
          iVar12 = *(int *)(lVar2 + 0xc);
          iVar17 = *(int *)(lVar2 + 8);
          uVar6 = uVar3 + 1;
          auVar19 = extraout_XMM0_00;
          if ((uint)(iVar17 + 1 + iVar12) <= uVar6) break;
          bVar18 = uVar3 == uVar11;
          pcVar14 = (char *)0x0;
          uVar3 = uVar6;
          if (bVar18) {
            pcVar14 = (char *)(ulong)local_114;
          }
        }
      }
      if ((bVar4) || ((int)pcVar7 == 0)) break;
      bVar4 = true;
      uVar11 = 0;
      local_114 = 0;
    }
LAB_0016ace8:
    screen_free(&local_b8);
  }
LAB_0016aafa:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void window_copy_goto_line
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,undefined8 param_12,char *param_13,
               size_t param_14)

{
  long lVar1;
  longlong lVar2;
  char **ppcVar3;
  undefined8 extraout_RDX;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  char *local_28;
  long local_20;
  
  ppcVar3 = &local_28;
  lVar1 = *(long *)(param_9 + 0x1f0);
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = strtonum(param_10,0,(ulong)*(uint *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc),
                   &local_28);
  if (local_28 == (char *)0x0) {
    *(int *)(lVar1 + 0x98) = (int)lVar2;
    window_copy_update_selection
              (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
               extraout_RDX,ppcVar3,param_13,param_14);
    window_copy_redraw_lines
              (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0
               ,*(int *)(*(long *)(*(long *)(param_9 + 0x1f0) + 8) + 8),ppcVar3,param_13,param_14);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_start_selection
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  long lVar1;
  long lVar2;
  uint uVar3;
  undefined8 in_R8;
  undefined8 in_R9;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  *(undefined4 *)(lVar1 + 0x9c) = *(undefined4 *)(lVar1 + 0xac);
  lVar2 = *(long *)(*(long *)(lVar1 + 0x78) + 8);
  uVar3 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) + *(int *)(lVar2 + 0xc);
  *(undefined4 *)(lVar1 + 0x40) = 1;
  *(uint *)(lVar1 + 0xa0) = uVar3;
  window_copy_update_selection
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,(ulong)uVar3,
             lVar2,in_R8,in_R9);
  return;
}



void window_copy_drag_update
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,int *param_10)

{
  uint uVar1;
  long lVar2;
  int iVar3;
  uint uVar4;
  long lVar5;
  undefined8 uVar6;
  uint *puVar7;
  undefined8 extraout_RDX;
  char *pcVar8;
  size_t in_R9;
  uint uVar9;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  int local_28;
  uint local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  lVar5 = cmd_mouse_pane(param_10,(int **)0x0,(long *)0x0);
  if ((lVar5 != 0) && (*(undefined1 **)(lVar5 + 0x1e8) == window_copy_mode)) {
    pcVar8 = (char *)0x0;
    puVar7 = &local_24;
    lVar2 = *(long *)(lVar5 + 0x1f0);
    uVar6 = cmd_mouse_at(lVar5,(long)param_10,&local_28,(int *)puVar7,0);
    if ((int)uVar6 == 0) {
      uVar1 = *(uint *)(lVar2 + 0xb0);
      uVar6 = window_copy_update_cursor
                        (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         lVar5,local_28,local_24,puVar7);
      iVar3 = window_copy_update_selection
                        (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar5,1,
                         extraout_RDX,puVar7,pcVar8,in_R9);
      if (iVar3 != 0) {
        uVar4 = *(uint *)(*(long *)(lVar5 + 0x1f0) + 0xb0);
        uVar9 = uVar1;
        if (uVar4 < uVar1) {
          uVar9 = uVar4;
          uVar4 = uVar1;
        }
        window_copy_redraw_lines
                  (extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar5
                   ,uVar9,(uVar4 + 1) - uVar9,puVar7,pcVar8,in_R9);
      }
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_copy_buffer
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,void *param_11,void *param_12,undefined8 param_13,
               void **param_14)

{
  char *pcVar1;
  undefined8 uVar2;
  void *pvVar3;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  long alStack_48 [3];
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  pvVar3 = param_12;
  pcVar1 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              global_options,"set-clipboard",param_11,param_12,param_13,param_14);
  uVar2 = extraout_XMM0_Qa;
  if (pcVar1 != (char *)0x0) {
    uVar2 = screen_write_start(alStack_48,param_9,0);
    screen_write_setselection
              (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,alStack_48,param_11,
               (int)param_12,pvVar3,param_13,param_14);
    uVar2 = screen_write_stop();
  }
  uVar2 = paste_set(uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,param_12,
                    param_10,(undefined8 *)0x0,param_13,param_14);
  if ((int)uVar2 == 0) {
    if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
      return;
    }
  }
  else if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    free(param_11);
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



bool window_copy_in_set(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,ulong param_10,ulong param_11,char *param_12,undefined8 param_13
                       ,undefined8 param_14)

{
  char *pcVar1;
  long in_FS_OFFSET;
  bool bVar2;
  byte local_28;
  byte local_20;
  char local_16;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  grid_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                *(long *)(*(long *)(*(long *)(param_9 + 0x1f0) + 0x78) + 8),param_10,param_11,
                (undefined4 *)&local_28,param_13,param_14);
  bVar2 = false;
  if ((local_16 == '\x01') && (bVar2 = false, (local_28 & 4) == 0)) {
    if ((local_20 == 0) || (local_20 == 0x7f)) {
      bVar2 = false;
    }
    else {
      pcVar1 = strchr(param_12,(uint)local_20);
      bVar2 = pcVar1 != (char *)0x0;
    }
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return bVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



uint window_copy_find_length
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  uint uVar4;
  long in_FS_OFFSET;
  undefined4 auStack_48 [2];
  char local_40;
  char local_36;
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  lVar2 = *(long *)(*(long *)(param_9 + 0x1f0) + 0x78);
  lVar3 = *(long *)(lVar2 + 8);
  uVar1 = *(uint *)(*(long *)(lVar3 + 0x18) + (param_10 & 0xffffffff) * 0x1c);
  if (*(uint *)(lVar3 + 4) <= uVar1) {
    uVar1 = *(uint *)(lVar3 + 4);
  }
  while (uVar4 = uVar1, uVar4 != 0) {
    param_1 = grid_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            *(long *)(lVar2 + 8),(ulong)(uVar4 - 1),param_10 & 0xffffffff,auStack_48
                            ,param_13,param_14);
    if ((local_36 != '\x01') || (uVar1 = uVar4 - 1, local_40 != ' ')) break;
  }
  if (local_30 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar4;
}



void window_copy_copy_line
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long *param_10,long *param_11,undefined4 *param_12,ulong param_13,
               ulong param_14)

{
  uint *puVar1;
  ushort uVar2;
  long lVar3;
  bool bVar4;
  uint uVar5;
  long lVar6;
  undefined8 *puVar7;
  char *__s;
  size_t sVar8;
  uint uVar9;
  ulong uVar10;
  long *plVar11;
  long *extraout_RDX;
  long *extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 uVar12;
  undefined8 extraout_RDX_04;
  ulong uVar13;
  undefined8 *puVar14;
  uint uVar15;
  ulong uVar16;
  long in_FS_OFFSET;
  byte bVar17;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar18;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  uint local_78;
  undefined local_70 [8];
  undefined4 uStack_68;
  undefined4 local_64;
  undefined4 uStack_60;
  byte local_5a;
  byte local_58;
  char local_57;
  undefined8 local_50 [2];
  long local_40;
  
  uVar15 = (uint)param_14;
  uVar9 = (uint)param_13;
  bVar17 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (uVar15 < uVar9) goto LAB_0016b1f0;
  uVar13 = (ulong)param_12 & 0xffffffff;
  uVar16 = param_13 & 0xffffffff;
  lVar3 = *(long *)(*(long *)(*(long *)(param_9 + 0x1f0) + 0x78) + 8);
  puVar1 = (uint *)(*(long *)(lVar3 + 0x18) + ((ulong)param_12 & 0xffffffff) * 0x1c);
  uVar10 = param_13;
  if (((*(byte *)(puVar1 + 6) & 1) == 0) || (uVar5 = *puVar1, *(uint *)(lVar3 + 4) < uVar5)) {
    uVar5 = window_copy_find_length
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       uVar13,*(long *)(lVar3 + 0x18),param_12,param_13,param_14);
    bVar4 = true;
    local_78 = uVar15;
    if (uVar5 < uVar15) {
      local_78 = uVar5;
    }
    uVar16 = param_13 & 0xffffffff;
    if (uVar5 < uVar9) {
      uVar16 = (ulong)uVar5;
    }
    plVar11 = extraout_RDX;
    param_1 = extraout_XMM0_Da;
    if ((uint)uVar16 < local_78) goto LAB_0016b268;
  }
  else {
    plVar11 = (long *)(param_14 & 0xffffffff);
    if (uVar5 <= uVar15) {
      plVar11 = (long *)(ulong)uVar5;
    }
    if (uVar5 <= uVar9) {
      uVar16 = (ulong)uVar5;
    }
    local_78 = (uint)plVar11;
    bVar4 = uVar15 < uVar5;
    if ((uint)uVar16 < local_78) {
LAB_0016b268:
      param_13 = uVar10;
      do {
        param_12 = (undefined4 *)&local_58;
        param_1 = grid_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                lVar3,uVar16,uVar13,(undefined4 *)&local_58,param_13,param_14);
        plVar11 = extraout_RDX_00;
        if ((local_58 & 4) == 0) {
          uVar18 = utf8_copy((undefined8 *)&local_64,local_50);
          uVar10 = (ulong)local_5a;
          uVar12 = extraout_RDX_01;
          if ((local_5a == 1) && (local_57 < '\0')) {
            __s = (char *)tty_acs_get(0,(byte)local_64);
            uVar12 = extraout_RDX_02;
            uVar18 = extraout_XMM0_Da_01;
            if ((__s != (char *)0x0) &&
               (local_70 = (undefined  [8])__s, sVar8 = strlen(__s), uVar12 = extraout_RDX_03,
               uVar18 = extraout_XMM0_Da_02, sVar8 < 10)) {
              param_12 = (undefined4 *)0xc;
              local_5a = (byte)sVar8;
              uVar18 = __memcpy_chk(&local_64,local_70,sVar8);
              uVar12 = extraout_RDX_04;
            }
            uVar10 = (ulong)local_5a;
          }
          lVar6 = xrealloc(uVar18,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_10,
                           uVar10 + *param_11,uVar12,param_12,param_13,param_14);
          uVar9 = (uint)local_5a;
          param_12 = (undefined4 *)(ulong)uVar9;
          *param_10 = lVar6;
          puVar7 = (undefined8 *)(lVar6 + *param_11);
          if (uVar9 < 8) {
            if ((local_5a & 4) == 0) {
              plVar11 = param_10;
              if (uVar9 != 0) {
                plVar11 = (long *)(ulong)(byte)local_64;
                *(byte *)puVar7 = (byte)local_64;
                if ((local_5a & 2) == 0) goto LAB_0016b29d;
                uVar2 = *(ushort *)((long)&uStack_68 + 2 + (long)param_12);
                plVar11 = (long *)(ulong)uVar2;
                *(ushort *)((long)puVar7 + -2 + (long)param_12) = uVar2;
                param_12 = (undefined4 *)(ulong)local_5a;
              }
            }
            else {
              *(undefined4 *)puVar7 = local_64;
              plVar11 = (long *)(ulong)*(uint *)((long)&uStack_68 + (long)param_12);
              *(uint *)((long)puVar7 + -4 + (long)param_12) =
                   *(uint *)((long)&uStack_68 + (long)param_12);
              param_12 = (undefined4 *)(ulong)local_5a;
            }
          }
          else {
            *puVar7 = CONCAT44(uStack_60,local_64);
            plVar11 = *(long **)(local_70 + 4 + (long)param_12);
            *(long **)((long)(puVar7 + -1) + (long)param_12) = plVar11;
            lVar6 = (long)puVar7 - (long)(undefined8 *)((ulong)(puVar7 + 1) & 0xfffffffffffffff8);
            puVar14 = (undefined8 *)((long)&local_64 - lVar6);
            puVar7 = (undefined8 *)((ulong)(puVar7 + 1) & 0xfffffffffffffff8);
            for (uVar10 = (ulong)((int)lVar6 + uVar9 >> 3); uVar10 != 0; uVar10 = uVar10 - 1) {
              *puVar7 = *puVar14;
              puVar14 = puVar14 + (ulong)bVar17 * -2 + 1;
              puVar7 = puVar7 + (ulong)bVar17 * -2 + 1;
            }
LAB_0016b29d:
            param_12 = (undefined4 *)(ulong)local_5a;
          }
          *param_11 = *param_11 + (long)param_12;
          param_1 = extraout_XMM0_Da_00;
        }
        uVar9 = (int)uVar16 + 1;
        uVar16 = (ulong)uVar9;
      } while (uVar9 < local_78);
    }
    uVar10 = param_13;
    if (!bVar4) goto LAB_0016b1f0;
  }
  lVar6 = xrealloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*param_10,
                   *param_11 + 1,plVar11,param_12,uVar10,param_14);
  lVar3 = *param_11;
  *param_10 = lVar6;
  *param_11 = lVar3 + 1;
  *(undefined *)(lVar6 + lVar3) = 10;
LAB_0016b1f0:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



undefined *
window_copy_get_selection
          (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9,
          long *param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
          undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  char *pcVar4;
  long lVar5;
  undefined8 extraout_RDX;
  uint uVar6;
  uint uVar7;
  long *plVar8;
  undefined *__ptr;
  uint uVar9;
  uint uVar10;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar11;
  undefined4 extraout_XMM0_Db;
  undefined auVar12 [16];
  uint local_7c;
  uint local_78;
  uint local_74;
  uint local_68;
  undefined *local_50;
  long local_48;
  long local_40;
  
  lVar5 = *(long *)(param_9 + 0x1f0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  plVar8 = param_10;
  if ((*(int *)(lVar5 + 0x40) == 0) &&
     (plVar8 = (long *)(ulong)*(uint *)(lVar5 + 0x48), *(uint *)(lVar5 + 0x48) == 0)) {
    __ptr = (undefined *)0x0;
  }
  else {
    auVar12 = xmalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,plVar8,
                      param_11,param_12,param_13,param_14);
    local_50 = auVar12._0_8_;
    local_48 = 0;
    *local_50 = 0;
    uVar2 = *(uint *)(lVar5 + 0xa0);
    uVar7 = *(uint *)(lVar5 + 0xac);
    uVar9 = (*(int *)(lVar5 + 0xb0) - *(int *)(lVar5 + 0x98)) +
            *(int *)(*(long *)(*(long *)(lVar5 + 0x78) + 8) + 0xc);
    local_7c = *(uint *)(lVar5 + 0x9c);
    if ((uVar9 < uVar2) || ((uVar10 = uVar2, uVar6 = uVar7, uVar2 == uVar9 && (uVar7 < local_7c))))
    {
      uVar10 = uVar9;
      uVar6 = local_7c;
      uVar9 = uVar2;
      local_7c = uVar7;
    }
    uVar2 = window_copy_find_length
                      (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_9,(ulong)uVar9,auVar12._8_8_,param_12,param_13,param_14);
    local_74 = *(uint *)(*(long *)(lVar5 + 8) + 4);
    pcVar4 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,
                                param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(*(long *)(param_9 + 8) + 0x188),"mode-keys",extraout_RDX
                                ,param_12,param_13,param_14);
    iVar3 = (int)pcVar4;
    if (*(int *)(lVar5 + 0xa4) == 0) {
      local_68 = 0;
      if (uVar2 < uVar6) {
        uVar6 = uVar2;
      }
      local_78 = (uVar6 + 1) - (uint)(iVar3 == 0);
    }
    else {
      local_7c = *(uint *)(lVar5 + 0x9c);
      uVar7 = *(uint *)(lVar5 + 0xac);
      if (local_7c < uVar7) {
        local_78 = uVar7;
        local_74 = uVar7;
        local_68 = local_7c;
        if (iVar3 != 0) {
          local_78 = uVar7 + 1;
          local_74 = uVar7 + 1;
          local_68 = local_7c;
        }
      }
      else {
        local_78 = local_7c + 1;
        local_7c = uVar7;
        local_74 = local_78;
        local_68 = uVar7;
      }
    }
    uVar11 = extraout_XMM0_Da_01;
    __ptr = local_50;
    for (uVar7 = uVar10; local_50 = __ptr, uVar7 <= uVar9; uVar7 = uVar7 + 1) {
      uVar6 = local_74;
      if (uVar9 == uVar7) {
        uVar6 = local_78;
      }
      uVar1 = local_68;
      if (uVar10 == uVar7) {
        uVar1 = local_7c;
      }
      uVar11 = window_copy_copy_line
                         (uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          (long *)&local_50,&local_48,(undefined4 *)(ulong)uVar7,(ulong)uVar1,
                          (ulong)uVar6);
      __ptr = local_50;
    }
    if (local_48 == 0) {
      free(__ptr);
      __ptr = (undefined *)0x0;
    }
    else {
      if ((iVar3 == 0) || (lVar5 = local_48, local_78 <= uVar2)) {
        lVar5 = local_48 + -1;
      }
      *param_10 = lVar5;
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return __ptr;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_copy_pipe
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,uint *param_10,char *param_11,char *param_12,undefined8 param_13,
               char **param_14)

{
  undefined8 uVar1;
  undefined *puVar2;
  uint **ppuVar3;
  char *pcVar4;
  undefined4 *puVar5;
  undefined8 uVar6;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  long *plVar7;
  void **ppvVar8;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  void *local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pcVar4 = param_12;
  puVar2 = window_copy_get_selection
                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                      (long *)&local_48,param_11,param_12,param_13,param_14);
  if (puVar2 != (undefined *)0x0) {
    ppuVar3 = (uint **)format_create(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,
                                     param_4,param_5,param_6,param_7,param_8,0,0,extraout_RDX,pcVar4
                                     ,param_13,param_14);
    uVar6 = 0;
    plVar7 = param_9;
    uVar1 = format_defaults(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,ppuVar3,0,param_10,(uint *)0x0,
                            (uint *)param_9,param_14);
    pcVar4 = format_expand(uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long *)ppuVar3,param_12,extraout_RDX_00,uVar6,plVar7,param_14);
    ppvVar8 = (void **)0x0;
    uVar6 = 0;
    puVar5 = job_run(CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,
                     param_5,param_6,param_7,param_8,pcVar4,param_10,(char *)0x0,0,0,0);
    bufferevent_write(*(undefined8 *)(puVar5 + 8),puVar2,local_48);
    free(pcVar4);
    uVar1 = format_free(ppuVar3);
    window_copy_copy_buffer
              (uVar1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,param_11,
               puVar2,local_48,uVar6,ppvVar8);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_copy_selection
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,void **param_14)

{
  undefined *puVar1;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  void *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  puVar1 = window_copy_get_selection
                     (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      (long *)&local_28,param_11,param_12,param_13,param_14);
  if (puVar1 != (undefined *)0x0) {
    window_copy_copy_buffer
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,param_9,param_10,puVar1,local_28,param_13,param_14);
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_append_selection
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,void **param_14)

{
  undefined *__src;
  char *pcVar1;
  undefined8 *puVar2;
  void *__src_00;
  undefined8 uVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 uVar4;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Db_02;
  char *local_50;
  void *local_48;
  size_t local_40;
  long local_38 [3];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_50 = param_10;
  __src = window_copy_get_selection
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (long *)&local_48,param_11,param_12,param_13,param_14);
  if (__src != (undefined *)0x0) {
    pcVar1 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,global_options,"set-clipboard",
                                extraout_RDX,param_12,param_13,param_14);
    if (pcVar1 != (char *)0x0) {
      uVar3 = screen_write_start(local_38,param_9,0);
      screen_write_setselection
                (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_38,__src,
                 local_48._0_4_,param_12,param_13,param_14);
      screen_write_stop();
    }
    if ((local_50 == (char *)0x0) || (*local_50 == '\0')) {
      puVar2 = (undefined8 *)paste_get_top(&local_50);
      uVar4 = extraout_XMM0_Da_00;
      uVar5 = extraout_XMM0_Db_00;
    }
    else {
      puVar2 = (undefined8 *)paste_get_name(local_50);
      uVar4 = extraout_XMM0_Da_03;
      uVar5 = extraout_XMM0_Db_02;
    }
    if (puVar2 != (undefined8 *)0x0) {
      __src_00 = (void *)paste_buffer_data(puVar2,&local_40);
      __src = (undefined *)
              xrealloc(extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       __src,local_40 + (long)local_48,extraout_RDX_00,param_12,param_13,param_14);
      memmove(__src + local_40,__src,(size_t)local_48);
      memcpy(__src,__src_00,local_40);
      local_48 = (void *)(local_40 + (long)local_48);
      uVar4 = extraout_XMM0_Da_02;
      uVar5 = extraout_XMM0_Db_01;
    }
    uVar3 = paste_set(CONCAT44(uVar5,uVar4),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      __src,local_48,local_50,(undefined8 *)0x0,param_13,param_14);
    if ((int)uVar3 != 0) {
      free(__src);
    }
  }
  if (local_20 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void window_copy_clear_selection
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  uint uVar2;
  undefined8 extraout_RDX;
  undefined4 uVar3;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  uVar3 = screen_clear_selection(lVar1);
  uVar2 = window_copy_find_length
                    (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)(uint)((*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) +
                                  *(int *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc)),
                     extraout_RDX,param_12,param_13,param_14);
  if (*(uint *)(lVar1 + 0xac) <= uVar2) {
    return;
  }
  window_copy_update_cursor
            (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
             param_7,param_8,param_9,uVar2,*(uint *)(lVar1 + 0xb0),param_12);
  return;
}



void window_copy_resize(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,ulong param_10,ulong param_11,undefined8 param_12,char *param_13
                       ,size_t param_14)

{
  int iVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  int iVar5;
  uint uVar6;
  ulong uVar7;
  uint uVar8;
  long in_FS_OFFSET;
  undefined8 uVar9;
  undefined8 uVar10;
  long alStack_48 [3];
  long local_30;
  
  uVar4 = 1;
  uVar6 = (uint)param_10;
  uVar7 = param_10 & 0xffffffff;
  lVar2 = *(long *)(param_9 + 0x1f0);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar9 = screen_resize(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar2,uVar6,
                        param_11,1,param_13,param_14);
  lVar3 = param_9 + 0x148;
  uVar10 = extraout_RDX;
  if (*(long *)(lVar2 + 0x78) != lVar3) {
    uVar4 = 1;
    uVar9 = screen_resize(uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          *(long *)(lVar2 + 0x78),uVar6,param_11 & 0xffffffff,1,param_13,param_14);
    lVar3 = *(long *)(lVar2 + 0x78);
    uVar10 = extraout_RDX_00;
    param_10 = uVar7;
  }
  uVar8 = (int)param_11 - 1;
  if (uVar8 < *(uint *)(lVar2 + 0xb0)) {
    *(uint *)(lVar2 + 0xb0) = uVar8;
  }
  if (uVar6 < *(uint *)(lVar2 + 0xac)) {
    *(uint *)(lVar2 + 0xac) = uVar6;
  }
  uVar6 = *(uint *)(*(long *)(lVar3 + 8) + 0xc);
  if (uVar6 < *(uint *)(lVar2 + 0x98)) {
    *(uint *)(lVar2 + 0x98) = uVar6;
  }
  window_copy_clear_selection
            (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,uVar10,
             uVar4,param_13,param_14);
  uVar10 = screen_write_start(alStack_48,0,lVar2);
  iVar5 = 0;
  iVar1 = *(int *)(*(long *)(lVar2 + 8) + 8);
  if (iVar1 != 1) {
    do {
      iVar5 = iVar5 + 1;
      uVar10 = window_copy_write_line
                         (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          (long)alStack_48,0,uVar4,param_13,param_14);
    } while (iVar1 + -1 != iVar5);
  }
  uVar10 = screen_write_stop();
  window_copy_redraw_lines
            (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
             *(int *)(*(long *)(*(long *)(param_9 + 0x1f0) + 8) + 8),uVar4,param_13,param_14);
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8
window_copy_key_input
          (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,uint *param_9,
          ulong param_10,undefined8 param_11,undefined8 param_12,char *param_13,void **param_14)

{
  long lVar1;
  uint uVar2;
  size_t sVar3;
  undefined8 *puVar4;
  void *__src;
  size_t sVar5;
  long lVar6;
  undefined8 extraout_RAX;
  undefined8 uVar7;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint *puVar8;
  uint *extraout_RDX_01;
  uint *extraout_RDX_02;
  undefined8 extraout_RDX_03;
  byte *pbVar9;
  char *pcVar10;
  int iVar11;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 uVar13;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  size_t local_48;
  long local_40;
  
  lVar1 = *(long *)(param_9 + 0x7c);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar2 = mode_key_lookup((undefined8 *)(lVar1 + 0x88),param_10,(undefined8 *)0x0);
  uVar7 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  uVar12 = extraout_XMM0_Da;
  uVar13 = extraout_XMM0_Db;
  switch(uVar2) {
  case 1:
    if (param_10 - 0x20 < 0x5f) {
      pcVar10 = *(char **)(lVar1 + 200);
      sVar3 = strlen(pcVar10);
      lVar6 = xrealloc(extraout_XMM0_Da_04,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       pcVar10,sVar3 + 2,extraout_RDX_00,param_12,param_13,param_14);
      *(long *)(lVar1 + 200) = lVar6;
      *(char *)(lVar6 + sVar3) = (char)param_10;
      *(undefined *)(*(long *)(lVar1 + 200) + 1 + sVar3) = 0;
      uVar12 = extraout_XMM0_Da_05;
      uVar13 = extraout_XMM0_Db_03;
    }
    break;
  case 2:
    pcVar10 = *(char **)(lVar1 + 200);
    sVar3 = strlen(pcVar10);
    uVar12 = extraout_XMM0_Da_00;
    uVar13 = extraout_XMM0_Db_00;
    if (sVar3 != 0) {
      pcVar10[sVar3 - 1] = '\0';
    }
    break;
  case 3:
    *(undefined4 *)(lVar1 + 0xd4) = 0xffffffff;
    uVar7 = 0xffffffff;
    goto LAB_0016bb31;
  case 8:
    **(undefined **)(lVar1 + 200) = 0;
    break;
  case 0xc:
    iVar11 = *(int *)(lVar1 + 0xd4);
    if (iVar11 < 1) {
      iVar11 = 1;
    }
    puVar8 = &switchD_0016bca0::switchdataD_0018200c;
    switch(*(undefined4 *)(lVar1 + 0xbc)) {
    case 1:
      pcVar10 = *(char **)(lVar1 + 200);
      uVar7 = window_copy_copy_selection
                        (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)param_9,pcVar10,&switchD_0016bca0::switchdataD_0018200c,param_12,
                         param_13,param_14);
      **(undefined **)(lVar1 + 200) = 0;
      if (*(int *)(lVar1 + 0xd0) != 0) goto LAB_0016bd2c;
      uVar7 = window_copy_clear_selection
                        (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9
                         ,pcVar10,extraout_RDX_03,param_12,param_13,param_14);
      window_copy_redraw_lines
                (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,0,
                 *(int *)(*(long *)(*(long *)(param_9 + 0x7c) + 8) + 8),param_12,param_13,
                 (size_t)param_14);
      break;
    case 3:
      do {
        pbVar9 = *(byte **)(lVar1 + 200);
        uVar7 = window_copy_search_up
                          (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)param_9,pbVar9,puVar8,param_12,(size_t)param_13,(size_t)param_14);
        iVar11 = iVar11 + -1;
        puVar8 = extraout_RDX_01;
      } while (iVar11 != 0);
      goto LAB_0016bcbd;
    case 4:
      do {
        pbVar9 = *(byte **)(lVar1 + 200);
        uVar7 = window_copy_search_down
                          (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)param_9,pbVar9,puVar8,param_12,(size_t)param_13,(size_t)param_14);
        iVar11 = iVar11 + -1;
        puVar8 = extraout_RDX_02;
      } while (iVar11 != 0);
LAB_0016bcbd:
      *(undefined4 *)(lVar1 + 0xd8) = *(undefined4 *)(lVar1 + 0xbc);
      xstrdup(uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,*(char **)(lVar1 + 200),
              pbVar9,puVar8,param_12,param_13,param_14);
      *(undefined8 *)(lVar1 + 0xe0) = extraout_RAX;
      break;
    case 9:
      window_copy_goto_line
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,(long)param_9,*(char **)(lVar1 + 200),
                 &switchD_0016bca0::switchdataD_0018200c,param_12,param_13,(size_t)param_14);
      **(undefined **)(lVar1 + 200) = 0;
      break;
    case 10:
      if (*(code **)(lVar1 + 0xf0) != (code *)0x0) {
        (**(code **)(lVar1 + 0xf0))(*(undefined8 *)(lVar1 + 200),*(undefined8 *)(lVar1 + 0xf8));
      }
LAB_0016bd2c:
      window_pane_reset_mode(param_9);
      uVar7 = 0;
      goto LAB_0016bb31;
    }
    *(undefined4 *)(lVar1 + 0xd4) = 0xffffffff;
    uVar7 = 1;
    goto LAB_0016bb31;
  case 0x13:
    puVar4 = (undefined8 *)paste_get_top((undefined8 *)0x0);
    uVar12 = extraout_XMM0_Da_01;
    uVar13 = extraout_XMM0_Db_01;
    if (puVar4 != (undefined8 *)0x0) {
      __src = (void *)paste_buffer_data(puVar4,&local_48);
      sVar3 = local_48;
      if (local_48 != 0) {
        sVar5 = 0;
        do {
          sVar3 = sVar5;
          if ((*(byte *)((long)__src + sVar5) < 0x20) || (*(byte *)((long)__src + sVar5) == 0x7f))
          break;
          sVar5 = sVar5 + 1;
          sVar3 = local_48;
        } while (sVar5 != local_48);
      }
      pcVar10 = *(char **)(lVar1 + 200);
      sVar5 = strlen(pcVar10);
      lVar6 = xrealloc(extraout_XMM0_Da_02,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       pcVar10,sVar5 + sVar3 + 1,extraout_RDX,param_12,param_13,param_14);
      *(long *)(lVar1 + 200) = lVar6;
      memcpy((void *)(lVar6 + sVar5),__src,sVar3);
      *(undefined *)(*(long *)(lVar1 + 200) + sVar5 + sVar3) = 0;
      uVar12 = extraout_XMM0_Da_03;
      uVar13 = extraout_XMM0_Db_02;
    }
  }
  window_copy_redraw_lines
            (CONCAT44(uVar13,uVar12),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             (long)param_9,*(int *)(*(long *)(lVar1 + 8) + 8) - 1,1,param_12,param_13,
             (size_t)param_14);
  uVar7 = 0;
LAB_0016bb31:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar7;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_cursor_back_to_indentation
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined4 *param_12,
               char *param_13,size_t param_14)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  undefined8 extraout_RDX;
  uint uVar4;
  uint uVar5;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar7;
  undefined4 extraout_XMM0_Db_00;
  undefined4 auStack_58 [2];
  char local_50;
  char local_46;
  long local_40;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar4 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) +
          *(int *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc);
  uVar2 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)uVar4,param_11,param_12,param_13,param_14);
  uVar7 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  if (uVar2 == 0) {
    uVar5 = 0;
  }
  else {
    uVar5 = 0;
    uVar6 = extraout_XMM0_Da;
    do {
      param_12 = auStack_58;
      uVar7 = grid_get_cell(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            *(long *)(*(long *)(lVar1 + 0x78) + 8),(ulong)uVar5,(ulong)uVar4,
                            auStack_58,param_13,param_14);
      uVar6 = (undefined4)uVar7;
      if ((local_46 != '\x01') || (local_50 != ' ')) break;
      uVar5 = uVar5 + 1;
    } while (uVar2 != uVar5);
  }
  uVar7 = window_copy_update_cursor
                    (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar5,
                     *(uint *)(lVar1 + 0xb0),param_12);
  iVar3 = window_copy_update_selection
                    (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                     extraout_RDX,param_12,param_13,param_14);
  if (iVar3 != 0) {
    window_copy_redraw_lines
              (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_9,*(uint *)(lVar1 + 0xb0),1,param_12,param_13,param_14)
    ;
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_other_end
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  uint uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  long lVar6;
  char *pcVar7;
  ulong uVar8;
  int iVar9;
  
  lVar6 = *(long *)(param_9 + 0x1f0);
  uVar1 = *(uint *)(lVar6 + 0x48);
  if ((uVar1 | *(uint *)(lVar6 + 0x40)) == 0) {
    return;
  }
  if (uVar1 == 1) {
    *(undefined4 *)(lVar6 + 0x48) = 2;
  }
  else if (uVar1 == 2) {
    *(undefined4 *)(lVar6 + 0x48) = 1;
  }
  uVar1 = *(uint *)(lVar6 + 0x98);
  pcVar7 = (char *)(ulong)uVar1;
  uVar2 = *(undefined4 *)(lVar6 + 0x9c);
  uVar3 = *(uint *)(lVar6 + 0xa0);
  uVar4 = *(uint *)(*(long *)(*(long *)(lVar6 + 0x78) + 8) + 0xc);
  *(undefined4 *)(lVar6 + 0x9c) = *(undefined4 *)(lVar6 + 0xac);
  *(undefined4 *)(lVar6 + 0xac) = uVar2;
  iVar9 = uVar4 + *(int *)(lVar6 + 0xb0);
  *(uint *)(lVar6 + 0xa0) = iVar9 - uVar1;
  uVar5 = *(uint *)(*(long *)(lVar6 + 8) + 8);
  uVar8 = (ulong)uVar5;
  if (uVar4 - uVar1 <= uVar3) {
    if ((uVar4 - uVar1) + uVar5 < uVar3) {
      *(uint *)(lVar6 + 0x98) = (uVar4 - 1) + (uVar5 - uVar3);
      *(uint *)(lVar6 + 0xb0) = uVar5 - 1;
      window_copy_redraw_lines
                (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,uVar5,
                 (ulong)uVar4,pcVar7,uVar8);
      return;
    }
    *(uint *)(lVar6 + 0xb0) = (uVar3 + *(int *)(lVar6 + 0xb0) + uVar1) - iVar9;
    window_copy_redraw_lines
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,uVar5,
               (ulong)uVar4,pcVar7,uVar8);
    return;
  }
  *(undefined4 *)(lVar6 + 0xb0) = 0;
  *(uint *)(lVar6 + 0x98) = uVar4 - uVar3;
  window_copy_redraw_lines
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,uVar5,
             (ulong)(uVar4 - uVar3),pcVar7,uVar8);
  return;
}



void window_copy_cursor_jump
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               char *param_13,size_t param_14)

{
  long lVar1;
  long lVar2;
  uint uVar3;
  int iVar4;
  undefined4 *puVar5;
  undefined8 extraout_RDX;
  uint uVar6;
  uint uVar7;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_00;
  undefined8 uVar9;
  undefined4 extraout_XMM0_Db;
  byte local_58;
  byte local_50;
  char local_46;
  long local_40;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  lVar2 = *(long *)(lVar1 + 0x78);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar7 = *(int *)(lVar1 + 0xac) + 1;
  uVar6 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) + *(int *)(*(long *)(lVar2 + 8) + 0xc);
  uVar3 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)uVar6,param_11,param_12,param_13,param_14);
  if (uVar7 < uVar3) {
    uVar8 = extraout_XMM0_Da;
    do {
      puVar5 = (undefined4 *)&local_58;
      uVar9 = grid_get_cell(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            *(long *)(lVar2 + 8),(ulong)uVar7,(ulong)uVar6,(undefined4 *)&local_58,
                            param_13,param_14);
      uVar8 = (undefined4)uVar9;
      if ((((local_58 & 4) == 0) && (local_46 == '\x01')) &&
         ((uint)local_50 == (int)*(char *)(lVar1 + 0xec))) {
        uVar9 = window_copy_update_cursor
                          (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           uVar7,*(uint *)(lVar1 + 0xb0),puVar5);
        iVar4 = window_copy_update_selection
                          (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                           extraout_RDX,puVar5,param_13,param_14);
        if (iVar4 != 0) {
          window_copy_redraw_lines
                    (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                     param_6,param_7,param_8,param_9,*(uint *)(lVar1 + 0xb0),1,puVar5,param_13,
                     param_14);
        }
        break;
      }
      uVar7 = uVar7 + 1;
    } while (uVar7 < uVar3);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_cursor_jump_back
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  int iVar1;
  int iVar2;
  long lVar3;
  long lVar4;
  int iVar5;
  undefined4 *puVar6;
  undefined8 extraout_RDX;
  uint uVar7;
  long lVar8;
  char *in_R8;
  size_t in_R9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined8 uVar9;
  undefined4 extraout_XMM0_Db;
  byte local_58;
  byte local_50;
  char local_46;
  long local_40;
  
  lVar3 = *(long *)(param_9 + 0x1f0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar4 = *(long *)(lVar3 + 0x78);
  iVar5 = *(int *)(lVar3 + 0xb0);
  iVar1 = *(int *)(lVar3 + 0x98);
  lVar8 = *(long *)(lVar4 + 8);
  iVar2 = *(int *)(lVar8 + 0xc);
  uVar7 = *(int *)(lVar3 + 0xac) + -1 + (uint)(*(int *)(lVar3 + 0xac) == 0);
  while( true ) {
    puVar6 = (undefined4 *)&local_58;
    uVar9 = grid_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar8,
                          (ulong)uVar7,(ulong)(uint)((iVar5 - iVar1) + iVar2),
                          (undefined4 *)&local_58,in_R8,in_R9);
    param_1 = (undefined4)uVar9;
    if ((((local_58 & 4) == 0) && (local_46 == '\x01')) &&
       ((uint)local_50 == (int)*(char *)(lVar3 + 0xec))) break;
    if (uVar7 == 0) goto LAB_0016c1a0;
    lVar8 = *(long *)(lVar4 + 8);
    uVar7 = uVar7 - 1;
  }
  uVar9 = window_copy_update_cursor
                    (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar7,
                     *(uint *)(lVar3 + 0xb0),puVar6);
  iVar5 = window_copy_update_selection
                    (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                     extraout_RDX,puVar6,in_R8,in_R9);
  if (iVar5 != 0) {
    window_copy_redraw_lines
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,param_9,*(uint *)(lVar3 + 0xb0),1,puVar6,in_R8,in_R9);
  }
LAB_0016c1a0:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void window_copy_cursor_jump_to
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,undefined8 param_11,undefined8 param_12,char *param_13,
               size_t param_14)

{
  long lVar1;
  long lVar2;
  uint uVar3;
  int iVar4;
  undefined4 *puVar5;
  undefined8 extraout_RDX;
  uint uVar6;
  uint uVar7;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da_00;
  undefined8 uVar9;
  undefined4 extraout_XMM0_Db;
  byte local_58;
  byte local_50;
  char local_46;
  long local_40;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  lVar2 = *(long *)(lVar1 + 0x78);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar6 = *(int *)(lVar1 + 0xac) + 1 + param_10;
  uVar7 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) + *(int *)(*(long *)(lVar2 + 8) + 0xc);
  uVar3 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)uVar7,param_11,param_12,param_13,param_14);
  if (uVar6 < uVar3) {
    uVar8 = extraout_XMM0_Da;
    do {
      puVar5 = (undefined4 *)&local_58;
      uVar9 = grid_get_cell(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            *(long *)(lVar2 + 8),(ulong)uVar6,(ulong)uVar7,(undefined4 *)&local_58,
                            param_13,param_14);
      uVar8 = (undefined4)uVar9;
      if ((((local_58 & 4) == 0) && (local_46 == '\x01')) &&
         ((uint)local_50 == (int)*(char *)(lVar1 + 0xec))) {
        uVar9 = window_copy_update_cursor
                          (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           uVar6 - 1,*(uint *)(lVar1 + 0xb0),puVar5);
        iVar4 = window_copy_update_selection
                          (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                           extraout_RDX,puVar5,param_13,param_14);
        if (iVar4 != 0) {
          window_copy_redraw_lines
                    (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                     param_6,param_7,param_8,param_9,*(uint *)(lVar1 + 0xb0),1,puVar5,param_13,
                     param_14);
        }
        break;
      }
      uVar6 = uVar6 + 1;
    } while (uVar3 != uVar6);
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_cursor_jump_to_back
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,undefined8 param_11,undefined8 param_12,char *param_13,
               size_t param_14)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  long lVar4;
  long lVar5;
  int iVar6;
  undefined4 *puVar7;
  undefined8 extraout_RDX;
  uint uVar8;
  long lVar9;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined8 uVar10;
  undefined4 extraout_XMM0_Db;
  byte local_58;
  byte local_50;
  char local_46;
  long local_40;
  
  lVar4 = *(long *)(param_9 + 0x1f0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  lVar5 = *(long *)(lVar4 + 0x78);
  uVar1 = *(uint *)(lVar4 + 0xac);
  iVar6 = *(int *)(lVar4 + 0xb0);
  iVar2 = *(int *)(lVar4 + 0x98);
  lVar9 = *(long *)(lVar5 + 8);
  iVar3 = *(int *)(lVar9 + 0xc);
  uVar8 = uVar1;
  if (((uVar1 != 0) && (uVar8 = uVar1 - 1, param_10 != 0)) && (uVar8 != 0)) {
    uVar8 = uVar1 - 2;
  }
  while( true ) {
    puVar7 = (undefined4 *)&local_58;
    uVar10 = grid_get_cell(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar9,
                           (ulong)uVar8,(ulong)(uint)((iVar6 - iVar2) + iVar3),
                           (undefined4 *)&local_58,param_13,param_14);
    param_1 = (undefined4)uVar10;
    if ((((local_58 & 4) == 0) && (local_46 == '\x01')) &&
       ((uint)local_50 == (int)*(char *)(lVar4 + 0xec))) break;
    if (uVar8 == 0) goto LAB_0016c3c0;
    lVar9 = *(long *)(lVar5 + 8);
    uVar8 = uVar8 - 1;
  }
  uVar10 = window_copy_update_cursor
                     (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                      uVar8 + 1,*(uint *)(lVar4 + 0xb0),puVar7);
  iVar6 = window_copy_update_selection
                    (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                     extraout_RDX,puVar7,param_13,param_14);
  if (iVar6 != 0) {
    window_copy_redraw_lines
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,param_9,*(uint *)(lVar4 + 0xb0),1,puVar7,param_13,param_14);
  }
LAB_0016c3c0:
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void window_copy_scroll_up
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,undefined8 param_11,ulong param_12,char *param_13,
               size_t param_14)

{
  uint uVar1;
  long lVar2;
  undefined8 extraout_RDX;
  uint uVar3;
  uint uVar4;
  long in_FS_OFFSET;
  undefined8 uVar5;
  long local_58 [3];
  long local_40;
  
  lVar2 = *(long *)(param_9 + 0x1f0);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = *(uint *)(lVar2 + 0x98);
  if (uVar1 <= param_10) {
    param_10 = uVar1;
  }
  if (param_10 != 0) {
    *(uint *)(lVar2 + 0x98) = uVar1 - param_10;
    window_copy_update_selection
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,param_11,
               param_12,param_13,param_14);
    screen_write_start(local_58,param_9,0);
    uVar5 = screen_write_cursormove((long)local_58,0,0);
    uVar5 = screen_write_deleteline
                      (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)local_58,
                       param_10,extraout_RDX,param_12,(ulong)param_13,param_14);
    uVar1 = *(uint *)(*(long *)(lVar2 + 8) + 8);
    uVar4 = uVar1 - param_10;
    uVar3 = uVar4;
    if (uVar4 < uVar1) {
      do {
        uVar3 = uVar3 + 1;
        uVar5 = window_copy_write_line
                          (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           (long)local_58,uVar4,param_12,param_13,param_14);
      } while (uVar1 != uVar3);
    }
    uVar5 = window_copy_write_line
                      (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       (long)local_58,0,param_12,param_13,param_14);
    if (1 < *(uint *)(*(long *)(lVar2 + 8) + 8)) {
      uVar5 = window_copy_write_line
                        (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (long)local_58,1,param_12,param_13,param_14);
      uVar1 = *(uint *)(*(long *)(lVar2 + 8) + 8);
      if (3 < uVar1) {
        uVar5 = window_copy_write_line
                          (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           (long)local_58,uVar1 - 2,param_12,param_13,param_14);
      }
    }
    if ((*(int *)(lVar2 + 0x40) != 0) &&
       (uVar1 = *(uint *)(*(long *)(lVar2 + 8) + 8), param_10 < uVar1)) {
      window_copy_write_line
                (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                 (long)local_58,(uVar1 - 1) - param_10,param_12,param_13,param_14);
    }
    screen_write_cursormove((long)local_58,*(uint *)(lVar2 + 0xac),*(uint *)(lVar2 + 0xb0));
    screen_write_stop();
  }
  if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void window_copy_scroll_down
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,undefined8 param_11,undefined8 param_12,char *param_13,
               size_t param_14)

{
  uint uVar1;
  long lVar2;
  ulong uVar3;
  undefined8 extraout_RDX;
  uint uVar4;
  long in_FS_OFFSET;
  undefined8 uVar5;
  long alStack_48 [3];
  long local_30;
  
  lVar2 = *(long *)(param_9 + 0x1f0);
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  uVar4 = *(uint *)(*(long *)(*(long *)(lVar2 + 0x78) + 8) + 0xc);
  if (param_10 <= uVar4) {
    uVar1 = *(uint *)(lVar2 + 0x98);
    uVar3 = (ulong)(uVar4 - param_10);
    if (uVar4 - param_10 < uVar1) {
      param_10 = uVar4 - uVar1;
    }
    if (param_10 != 0) {
      *(uint *)(lVar2 + 0x98) = uVar1 + param_10;
      uVar4 = 0;
      window_copy_update_selection
                (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
                 (ulong)(uVar1 + param_10),uVar3,param_13,param_14);
      screen_write_start(alStack_48,param_9,0);
      uVar5 = screen_write_cursormove((long)alStack_48,0,0);
      uVar5 = screen_write_insertline
                        (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)alStack_48,param_10,extraout_RDX,uVar3,(ulong)param_13,param_14);
      do {
        uVar4 = uVar4 + 1;
        uVar5 = window_copy_write_line
                          (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                           (long)alStack_48,0,uVar3,param_13,param_14);
      } while (param_10 != uVar4);
      if ((*(int *)(lVar2 + 0x40) == 0) || (*(uint *)(*(long *)(lVar2 + 8) + 8) <= param_10)) {
        if (uVar4 == 1) {
          window_copy_write_line
                    (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (long)alStack_48,1,uVar3,param_13,param_14);
        }
      }
      else {
        window_copy_write_line
                  (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                   (long)alStack_48,param_10,uVar3,param_13,param_14);
      }
      screen_write_cursormove((long)alStack_48,*(uint *)(lVar2 + 0xac),*(uint *)(lVar2 + 0xb0));
      screen_write_stop();
    }
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_cursor_up
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,undefined8 param_11,ulong param_12,char *param_13,
               size_t param_14)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  int iVar4;
  ulong uVar5;
  ulong extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong uVar6;
  uint uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar8;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  
  lVar2 = *(long *)(param_9 + 0x1f0);
  uVar7 = (*(int *)(lVar2 + 0xb0) - *(int *)(lVar2 + 0x98)) +
          *(int *)(*(long *)(*(long *)(lVar2 + 0x78) + 8) + 0xc);
  uVar3 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)uVar7,param_11,param_12,param_13,param_14);
  uVar1 = *(uint *)(lVar2 + 0xac);
  uVar6 = (ulong)uVar1;
  if (uVar1 != uVar3) {
    *(uint *)(lVar2 + 0xb4) = uVar1;
    *(uint *)(lVar2 + 0xb8) = uVar3;
  }
  uVar8 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  if ((*(int *)(lVar2 + 0x48) == 1) &&
     (uVar8 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da), *(uint *)(lVar2 + 0xa0) == uVar7)) {
    uVar8 = window_copy_other_end
                      (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,param_9);
    uVar6 = extraout_RDX_01;
  }
  *(int *)(lVar2 + 0xac) = *(int *)(lVar2 + 0xb4);
  if (param_10 == 0) {
    uVar1 = *(uint *)(lVar2 + 0xb0);
    if (uVar1 == 0) {
      uVar6 = 1;
      uVar8 = window_copy_scroll_down
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                         (ulong)uVar1,param_12,param_13,param_14);
    }
    else {
      uVar8 = window_copy_update_cursor
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         *(int *)(lVar2 + 0xb4),uVar1 - 1,param_12);
      uVar6 = 1;
      iVar4 = window_copy_update_selection
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                         extraout_RDX_00,param_12,param_13,param_14);
      uVar8 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
      if (iVar4 != 0) goto LAB_0016c7e0;
    }
  }
  else {
    uVar8 = window_copy_scroll_down
                      (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,uVar6
                       ,param_12,param_13,param_14);
LAB_0016c7e0:
    uVar1 = *(uint *)(lVar2 + 0xb0);
    uVar6 = (ulong)uVar1;
    if (uVar1 == *(int *)(*(long *)(lVar2 + 8) + 8) - 1U) {
      uVar8 = window_copy_redraw_lines
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar1
                         ,1,param_12,param_13,param_14);
    }
    else {
      uVar8 = window_copy_redraw_lines
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar1
                         ,2,param_12,param_13,param_14);
    }
  }
  uVar5 = (ulong)*(uint *)(lVar2 + 0x40);
  if ((*(uint *)(lVar2 + 0x40) == 0) || (*(int *)(lVar2 + 0xa4) == 0)) {
    uVar6 = (ulong)(uint)((*(int *)(lVar2 + 0xb0) - *(int *)(lVar2 + 0x98)) +
                         *(int *)(*(long *)(*(long *)(lVar2 + 0x78) + 8) + 0xc));
    uVar3 = window_copy_find_length
                      ((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       uVar6,uVar5,param_12,param_13,param_14);
    uVar8 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
    uVar1 = *(uint *)(lVar2 + 0xac);
    uVar5 = (ulong)uVar1;
    if (uVar1 < *(uint *)(lVar2 + 0xb8)) {
      if (uVar1 <= uVar3) {
        iVar4 = *(int *)(lVar2 + 0x48);
        goto joined_r0x0016c84e;
      }
    }
    else if (uVar1 == uVar3) goto LAB_0016c79b;
    uVar8 = window_copy_cursor_end_of_line
                      (extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_9,uVar6,uVar5,param_12,param_13,param_14);
    uVar5 = extraout_RDX;
  }
LAB_0016c79b:
  iVar4 = *(int *)(lVar2 + 0x48);
joined_r0x0016c84e:
  if (iVar4 == 1) {
    window_copy_cursor_end_of_line
              ((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar6,
               uVar5,param_12,param_13,param_14);
    return;
  }
  if (iVar4 == 2) {
    window_copy_cursor_start_of_line
              (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar6,uVar5,
               param_12,param_13,param_14);
    return;
  }
  return;
}



void window_copy_cursor_start_of_line
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,
               undefined8 param_13,size_t param_14)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  undefined8 uVar5;
  int iVar6;
  undefined8 extraout_RDX;
  char *pcVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Db;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  pcVar7 = (char *)(ulong)*(uint *)(lVar1 + 0xb0);
  if ((*(int *)(lVar1 + 0xac) == 0) &&
     (param_12 = (ulong)*(uint *)(lVar1 + 0x48), *(uint *)(lVar1 + 0x48) == 0)) {
    lVar2 = *(long *)(lVar1 + 0x78);
    lVar3 = *(long *)(lVar2 + 8);
    iVar6 = (*(uint *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) + *(int *)(lVar3 + 0xc);
    while (iVar6 != 0) {
      lVar4 = *(long *)(lVar3 + 0x18);
      if ((*(byte *)(lVar4 + (ulong)(iVar6 - 1) * 0x1c + 0x18) & 1) == 0) break;
      param_1 = window_copy_cursor_up
                          ((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           param_9,0,lVar4,param_12,pcVar7,param_14);
      pcVar7 = (char *)(ulong)*(uint *)(lVar1 + 0xb0);
      iVar6 = (*(uint *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) +
              *(int *)(*(long *)(lVar2 + 8) + 0xc);
    }
  }
  uVar5 = window_copy_update_cursor
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
                     (uint)pcVar7,param_12);
  iVar6 = window_copy_update_selection
                    (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                     extraout_RDX,param_12,pcVar7,param_14);
  if (iVar6 == 0) {
    return;
  }
  window_copy_redraw_lines
            (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
             param_7,param_8,param_9,*(uint *)(lVar1 + 0xb0),1,param_12,pcVar7,param_14);
  return;
}



void window_copy_cursor_down
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int param_10,undefined8 param_11,ulong param_12,char *param_13,
               size_t param_14)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  int iVar4;
  ulong uVar5;
  ulong extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong extraout_RDX_01;
  ulong uVar6;
  uint uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar8;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  
  lVar2 = *(long *)(param_9 + 0x1f0);
  uVar7 = (*(int *)(lVar2 + 0xb0) - *(int *)(lVar2 + 0x98)) +
          *(int *)(*(long *)(*(long *)(lVar2 + 0x78) + 8) + 0xc);
  uVar3 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)uVar7,param_11,param_12,param_13,param_14);
  uVar1 = *(uint *)(lVar2 + 0xac);
  uVar6 = (ulong)uVar1;
  if (uVar1 != uVar3) {
    *(uint *)(lVar2 + 0xb4) = uVar1;
    *(uint *)(lVar2 + 0xb8) = uVar3;
  }
  uVar8 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  if ((*(int *)(lVar2 + 0x48) == 2) &&
     (uVar8 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da), *(uint *)(lVar2 + 0xa0) == uVar7)) {
    uVar8 = window_copy_other_end
                      (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,param_9);
    uVar6 = extraout_RDX_01;
  }
  *(int *)(lVar2 + 0xac) = *(int *)(lVar2 + 0xb4);
  if (param_10 == 0) {
    uVar1 = *(uint *)(lVar2 + 0xb0);
    if (uVar1 == *(int *)(*(long *)(lVar2 + 8) + 8) - 1U) {
      uVar6 = 1;
      uVar8 = window_copy_scroll_up
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                         (ulong)uVar1,param_12,param_13,param_14);
    }
    else {
      uVar8 = window_copy_update_cursor
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         *(int *)(lVar2 + 0xb4),uVar1 + 1,param_12);
      uVar6 = 1;
      iVar4 = window_copy_update_selection
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                         extraout_RDX_00,param_12,param_13,param_14);
      uVar8 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
      if (iVar4 != 0) {
        uVar1 = *(int *)(lVar2 + 0xb0) - 1;
        uVar6 = (ulong)uVar1;
        uVar8 = window_copy_redraw_lines
                          (CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4
                           ,param_5,param_6,param_7,param_8,param_9,uVar1,2,param_12,param_13,
                           param_14);
      }
    }
  }
  else {
    uVar8 = window_copy_scroll_up
                      (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,uVar6
                       ,param_12,param_13,param_14);
    uVar1 = *(uint *)(lVar2 + 0xb0);
    uVar6 = (ulong)uVar1;
    if (uVar1 != 0) {
      uVar6 = (ulong)(uVar1 - 1);
      uVar8 = window_copy_redraw_lines
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         uVar1 - 1,2,param_12,param_13,param_14);
    }
  }
  uVar5 = (ulong)*(uint *)(lVar2 + 0x40);
  if ((*(uint *)(lVar2 + 0x40) == 0) || (*(int *)(lVar2 + 0xa4) == 0)) {
    uVar6 = (ulong)(uint)((*(int *)(lVar2 + 0xb0) - *(int *)(lVar2 + 0x98)) +
                         *(int *)(*(long *)(*(long *)(lVar2 + 0x78) + 8) + 0xc));
    uVar3 = window_copy_find_length
                      ((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       uVar6,uVar5,param_12,param_13,param_14);
    uVar8 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
    uVar1 = *(uint *)(lVar2 + 0xac);
    uVar5 = (ulong)uVar1;
    if (uVar1 < *(uint *)(lVar2 + 0xb8)) {
      if (uVar1 <= uVar3) {
        iVar4 = *(int *)(lVar2 + 0x48);
        goto joined_r0x0016cb2e;
      }
    }
    else if (uVar1 == uVar3) goto LAB_0016ca65;
    uVar8 = window_copy_cursor_end_of_line
                      (extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_9,uVar6,uVar5,param_12,param_13,param_14);
    uVar5 = extraout_RDX;
  }
LAB_0016ca65:
  iVar4 = *(int *)(lVar2 + 0x48);
joined_r0x0016cb2e:
  if (iVar4 == 1) {
    window_copy_cursor_end_of_line
              ((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar6,
               uVar5,param_12,param_13,param_14);
    return;
  }
  if (iVar4 == 2) {
    window_copy_cursor_start_of_line
              (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar6,uVar5,
               param_12,param_13,param_14);
    return;
  }
  return;
}



void window_copy_cursor_end_of_line
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,char *param_13,
               size_t param_14)

{
  long lVar1;
  long lVar2;
  long lVar3;
  undefined8 uVar4;
  uint uVar5;
  int iVar6;
  undefined8 extraout_RDX;
  ulong uVar7;
  ulong extraout_RDX_00;
  uint uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  lVar2 = *(long *)(lVar1 + 0x78);
  lVar3 = *(long *)(lVar2 + 8);
  uVar8 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) + *(int *)(lVar3 + 0xc);
  uVar5 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)uVar8,param_11,param_12,param_13,param_14);
  uVar9 = extraout_XMM0_Da;
  uVar10 = extraout_XMM0_Db;
  if ((*(uint *)(lVar1 + 0xac) == uVar5) &&
     (param_14 = (size_t)*(uint *)(lVar1 + 0x48), *(uint *)(lVar1 + 0x48) == 0)) {
    param_13 = (char *)(ulong)*(uint *)(lVar1 + 0x40);
    if ((*(uint *)(lVar1 + 0x40) != 0) && (*(int *)(lVar1 + 0xa4) != 0)) {
      uVar5 = *(uint *)(*(long *)(lVar2 + 8) + 4);
    }
    uVar7 = (ulong)uVar8;
    param_12 = *(ulong *)(lVar3 + 0x18);
    if ((*(byte *)(param_12 + uVar7 * 0x1c + 0x18) & 1) != 0) {
      if (uVar8 < (uint)(*(int *)(lVar3 + 0xc) + *(int *)(lVar3 + 8))) {
        do {
          uVar9 = window_copy_cursor_down
                            (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0
                             ,uVar7,param_12,param_13,param_14);
          uVar8 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) +
                  *(int *)(*(long *)(lVar2 + 8) + 0xc);
          uVar7 = extraout_RDX_00;
          if ((uint)(*(int *)(lVar3 + 0xc) + *(int *)(lVar3 + 8)) <= uVar8) break;
          uVar7 = *(ulong *)(lVar3 + 0x18);
        } while ((*(byte *)(uVar7 + (ulong)uVar8 * 0x1c + 0x18) & 1) != 0);
      }
      uVar5 = window_copy_find_length
                        (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong)uVar8,uVar7,param_12,param_13,param_14);
      uVar9 = extraout_XMM0_Da_01;
      uVar10 = extraout_XMM0_Db_01;
    }
  }
  uVar4 = window_copy_update_cursor
                    (CONCAT44(uVar10,uVar9),param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                     param_9,uVar5,*(uint *)(lVar1 + 0xb0),param_12);
  iVar6 = window_copy_update_selection
                    (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                     extraout_RDX,param_12,param_13,param_14);
  if (iVar6 != 0) {
    window_copy_redraw_lines
              (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,param_9,*(uint *)(lVar1 + 0xb0),1,param_12,param_13,param_14)
    ;
    return;
  }
  return;
}



void window_copy_pageup(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                       char *param_13,size_t param_14)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  ulong uVar4;
  ulong uVar5;
  ulong extraout_RDX;
  ulong uVar6;
  uint uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 uVar8;
  undefined4 extraout_XMM0_Db_01;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  uVar7 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) +
          *(int *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc);
  uVar2 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)uVar7,param_11,param_12,param_13,param_14);
  uVar8 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  if ((*(int *)(lVar1 + 0x48) == 1) &&
     (uVar8 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da), *(uint *)(lVar1 + 0xa0) == uVar7)) {
    uVar8 = window_copy_other_end
                      (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,param_9);
  }
  uVar7 = *(uint *)(lVar1 + 0xac);
  if (uVar7 == uVar2) {
    uVar7 = *(uint *)(lVar1 + 0xb4);
  }
  else {
    *(uint *)(lVar1 + 0xb4) = uVar7;
    *(uint *)(lVar1 + 0xb8) = uVar2;
  }
  *(uint *)(lVar1 + 0xac) = uVar7;
  uVar4 = (ulong)*(uint *)(lVar1 + 0x40);
  uVar2 = *(uint *)(*(long *)(lVar1 + 8) + 8);
  iVar3 = uVar2 - 2;
  if (uVar2 < 3) {
    iVar3 = 1;
  }
  uVar7 = iVar3 + *(int *)(lVar1 + 0x98);
  uVar5 = *(ulong *)(*(long *)(lVar1 + 0x78) + 8);
  uVar2 = *(uint *)(uVar5 + 0xc);
  if (uVar2 < uVar7) {
    uVar7 = uVar2;
  }
  *(uint *)(lVar1 + 0x98) = uVar7;
  if ((*(uint *)(lVar1 + 0x40) == 0) ||
     (uVar5 = (ulong)*(uint *)(lVar1 + 0xa4), *(uint *)(lVar1 + 0xa4) == 0)) {
    uVar6 = (ulong)((uVar2 + *(int *)(lVar1 + 0xb0)) - uVar7);
    uVar7 = window_copy_find_length
                      ((int)uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       uVar6,uVar5,uVar4,param_13,param_14);
    uVar8 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
    uVar2 = *(uint *)(lVar1 + 0xac);
    uVar5 = (ulong)uVar2;
    if (uVar2 < *(uint *)(lVar1 + 0xb8)) {
      uVar8 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
      if (uVar2 <= uVar7) goto LAB_0016cd85;
    }
    else if (uVar2 == uVar7) goto LAB_0016cd85;
    uVar8 = window_copy_cursor_end_of_line
                      (extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       param_9,uVar6,uVar5,uVar4,param_13,param_14);
    uVar5 = extraout_RDX;
  }
LAB_0016cd85:
  window_copy_update_selection
            (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,uVar5,uVar4,
             param_13,param_14);
  window_copy_redraw_lines
            (CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
             param_6,param_7,param_8,param_9,0,
             *(int *)(*(long *)(*(long *)(param_9 + 0x1f0) + 8) + 8),uVar4,param_13,param_14);
  return;
}



void window_copy_pagedown
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               char *param_13,size_t param_14)

{
  uint uVar1;
  long lVar2;
  long lVar3;
  uint uVar4;
  int iVar5;
  ulong uVar6;
  ulong uVar7;
  uint uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined8 uVar9;
  
  lVar2 = *(long *)(param_9 + 0x7c);
  uVar8 = (*(int *)(lVar2 + 0xb0) - *(int *)(lVar2 + 0x98)) +
          *(int *)(*(long *)(*(long *)(lVar2 + 0x78) + 8) + 0xc);
  uVar4 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                     (ulong)uVar8,param_11,param_12,param_13,param_14);
  uVar9 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  if ((*(int *)(lVar2 + 0x48) == 2) &&
     (uVar9 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da), *(uint *)(lVar2 + 0xa0) == uVar8)) {
    uVar9 = window_copy_other_end
                      (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,(long)param_9);
  }
  uVar8 = *(uint *)(lVar2 + 0xac);
  if (uVar8 == uVar4) {
    uVar8 = *(uint *)(lVar2 + 0xb4);
  }
  else {
    *(uint *)(lVar2 + 0xb4) = uVar8;
    *(uint *)(lVar2 + 0xb8) = uVar4;
  }
  uVar1 = *(uint *)(lVar2 + 0x98);
  uVar6 = (ulong)uVar1;
  *(uint *)(lVar2 + 0xac) = uVar8;
  uVar8 = *(uint *)(*(long *)(lVar2 + 8) + 8);
  uVar4 = uVar8 - 2;
  if (uVar8 < 3) {
    uVar4 = 1;
  }
  iVar5 = 0;
  if (uVar4 <= uVar1) {
    iVar5 = uVar1 - uVar4;
  }
  *(int *)(lVar2 + 0x98) = iVar5;
  if ((*(int *)(lVar2 + 0x40) == 0) ||
     (uVar6 = (ulong)*(uint *)(lVar2 + 0xa4), *(uint *)(lVar2 + 0xa4) == 0)) {
    lVar3 = *(long *)(*(long *)(lVar2 + 0x78) + 8);
    uVar7 = (ulong)(uint)((*(int *)(lVar2 + 0xb0) + *(int *)(lVar3 + 0xc)) - iVar5);
    uVar8 = window_copy_find_length
                      ((int)uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long)param_9,uVar7,lVar3,uVar6,param_13,param_14);
    uVar9 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
    uVar4 = *(uint *)(lVar2 + 0xac);
    if (uVar4 < *(uint *)(lVar2 + 0xb8)) {
      uVar9 = CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01);
      if (uVar4 <= uVar8) goto LAB_0016ce99;
    }
    else if (uVar4 == uVar8) goto LAB_0016ce99;
    uVar9 = window_copy_cursor_end_of_line
                      (extraout_XMM0_Da_01,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (long)param_9,uVar7,(ulong)uVar4,uVar6,param_13,param_14);
  }
LAB_0016ce99:
  if ((*(uint *)(lVar2 + 0xa8) != 0) && (*(int *)(lVar2 + 0x98) == 0)) {
    window_pane_reset_mode(param_9);
    return;
  }
  window_copy_update_selection
            (uVar9,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,1,
             (ulong)*(uint *)(lVar2 + 0xa8),uVar6,param_13,param_14);
  window_copy_redraw_lines
            (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
             param_6,param_7,param_8,(long)param_9,0,
             *(int *)(*(long *)(*(long *)(param_9 + 0x7c) + 8) + 8),uVar6,param_13,param_14);
  return;
}



void window_copy_cursor_next_word
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,char *param_12,char *param_13,
               undefined8 param_14)

{
  long lVar1;
  long lVar2;
  undefined8 uVar3;
  bool bVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  undefined7 extraout_var;
  ulong uVar8;
  undefined8 extraout_RDX;
  ulong extraout_RDX_00;
  undefined8 extraout_RDX_01;
  uint uVar9;
  size_t sVar10;
  uint uVar11;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar12;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  iVar7 = 0;
  lVar1 = *(long *)(param_9 + 0x1f0);
  lVar2 = *(long *)(lVar1 + 0x78);
  uVar11 = *(uint *)(lVar1 + 0xac);
  uVar9 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) + *(int *)(*(long *)(lVar2 + 8) + 0xc);
  uVar5 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)uVar9,param_11,param_12,param_13,param_14);
  sVar10 = (size_t)uVar5;
  uVar5 = *(int *)(*(long *)(lVar2 + 8) + 8) + *(int *)(*(long *)(lVar2 + 8) + 0xc);
  uVar8 = (ulong)uVar5;
  uVar12 = extraout_XMM0_Da;
LAB_0016cfe0:
  if (uVar11 <= (uint)sVar10) goto LAB_0016d018;
  do {
    if (uVar9 == uVar5 - 1) {
      return;
    }
    uVar11 = 0;
    uVar12 = window_copy_cursor_down
                       (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
                        uVar8,(ulong)param_12,param_13,sVar10);
    uVar9 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) + *(int *)(*(long *)(lVar2 + 8) + 0xc)
    ;
    uVar6 = window_copy_find_length
                      (uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       (ulong)uVar9,extraout_RDX,param_12,param_13,sVar10);
    sVar10 = (size_t)uVar6;
    uVar12 = extraout_XMM0_Da_00;
LAB_0016d018:
    do {
      param_12 = param_10;
      bVar4 = window_copy_in_set(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 param_9,(ulong)uVar11,(ulong)uVar9,param_10,param_13,sVar10);
      uVar8 = extraout_RDX_00;
      uVar12 = extraout_XMM0_Da_01;
      if ((int)CONCAT71(extraout_var,bVar4) == iVar7) {
        uVar11 = uVar11 + 1;
        goto LAB_0016cfe0;
      }
      if (iVar7 != 0) {
        uVar3 = window_copy_update_cursor
                          (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,param_4,
                           param_5,param_6,param_7,param_8,param_9,uVar11,*(uint *)(lVar1 + 0xb0),
                           param_12);
        iVar7 = window_copy_update_selection
                          (uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                           extraout_RDX_01,param_12,param_13,sVar10);
        if (iVar7 == 0) {
          return;
        }
        window_copy_redraw_lines
                  (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_9,*(uint *)(lVar1 + 0xb0),1,param_12,param_13,
                   sVar10);
        return;
      }
      iVar7 = 1;
    } while (uVar11 <= (uint)sVar10);
  } while( true );
}



void window_copy_cursor_next_word_end
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,char *param_12,char *param_13,
               size_t param_14)

{
  long lVar1;
  long lVar2;
  char **ppcVar3;
  bool bVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  char *pcVar8;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  uint uVar9;
  uint uVar10;
  undefined8 extraout_RDX;
  undefined8 uVar11;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  uint uVar12;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar13;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  lVar2 = *(long *)(lVar1 + 0x78);
  ppcVar3 = *(char ***)(*(long *)(param_9 + 8) + 0x188);
  uVar12 = *(uint *)(lVar1 + 0xac);
  uVar9 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) + *(int *)(*(long *)(lVar2 + 8) + 0xc);
  uVar5 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)uVar9,(ulong)uVar9,param_12,param_13,param_14);
  uVar10 = *(int *)(*(long *)(lVar2 + 8) + 8) + *(int *)(*(long *)(lVar2 + 8) + 0xc);
  pcVar8 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                              param_5,param_6,param_7,param_8,ppcVar3,"mode-keys",(ulong)uVar10,
                              param_12,param_13,param_14);
  uVar11 = extraout_RDX;
  uVar13 = extraout_XMM0_Da_00;
  if ((int)pcVar8 == 1) {
    param_12 = param_10;
    bVar4 = window_copy_in_set(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,
                               param_8,param_9,(ulong)uVar12,(ulong)uVar9,param_10,param_13,param_14
                              );
    uVar12 = uVar12 + ((int)CONCAT71(extraout_var_00,bVar4) == 0);
    uVar11 = extraout_RDX_02;
    uVar13 = extraout_XMM0_Da_04;
  }
  uVar6 = 1;
LAB_0016d158:
  if (uVar12 <= uVar5) goto LAB_0016d194;
  do {
    if (uVar9 == uVar10 - 1) {
      return;
    }
    uVar12 = 0;
    uVar13 = window_copy_cursor_down
                       (uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
                        uVar11,(ulong)param_12,param_13,param_14);
    uVar9 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) + *(int *)(*(long *)(lVar2 + 8) + 0xc)
    ;
    uVar5 = window_copy_find_length
                      (uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       (ulong)uVar9,(ulong)uVar9,param_12,param_13,param_14);
    uVar13 = extraout_XMM0_Da_01;
LAB_0016d194:
    do {
      param_12 = param_10;
      bVar4 = window_copy_in_set(uVar13,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                 param_9,(ulong)uVar12,(ulong)uVar9,param_10,param_13,param_14);
      uVar11 = extraout_RDX_00;
      uVar13 = extraout_XMM0_Da_02;
      if ((uint)CONCAT71(extraout_var,bVar4) == uVar6) {
        uVar12 = uVar12 + 1;
        goto LAB_0016d158;
      }
      if (uVar6 == 0) {
        if ((int)pcVar8 == 1) {
          uVar12 = (uVar12 - 1) + (uint)(uVar12 == 0);
        }
        uVar11 = window_copy_update_cursor
                           (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_02),param_2,param_3,
                            param_4,param_5,param_6,param_7,param_8,param_9,uVar12,
                            *(uint *)(lVar1 + 0xb0),param_12);
        iVar7 = window_copy_update_selection
                          (uVar11,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                           extraout_RDX_01,param_12,param_13,param_14);
        if (iVar7 == 0) {
          return;
        }
        window_copy_redraw_lines
                  (CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_03),param_2,param_3,param_4,param_5
                   ,param_6,param_7,param_8,param_9,*(uint *)(lVar1 + 0xb0),1,param_12,param_13,
                   param_14);
        return;
      }
      uVar6 = (uint)(uVar6 == 0);
    } while (uVar12 <= uVar5);
  } while( true );
}



void window_copy_cursor_right
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,char *param_13,
               size_t param_14)

{
  int iVar1;
  uint uVar2;
  long lVar3;
  long lVar4;
  undefined8 uVar5;
  uint uVar6;
  int iVar7;
  ulong uVar8;
  ulong extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  uint uVar9;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar10;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  
  lVar3 = *(long *)(param_9 + 0x1f0);
  uVar8 = (ulong)*(uint *)(lVar3 + 0x40);
  lVar4 = *(long *)(*(long *)(lVar3 + 0x78) + 8);
  iVar7 = *(int *)(lVar4 + 0xc);
  iVar1 = *(int *)(lVar4 + 8);
  uVar9 = (*(int *)(lVar3 + 0xb0) + iVar7) - *(int *)(lVar3 + 0x98);
  if ((*(uint *)(lVar3 + 0x40) == 0) || (*(int *)(lVar3 + 0xa4) == 0)) {
    uVar6 = window_copy_find_length
                      ((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       (ulong)uVar9,uVar8,param_12,param_13,param_14);
    param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    uVar8 = extraout_RDX;
  }
  else {
    uVar6 = *(uint *)(*(long *)(lVar3 + 8) + 4);
  }
  uVar2 = *(uint *)(lVar3 + 0xac);
  if (uVar2 < uVar6) {
    uVar5 = window_copy_update_cursor
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       uVar2 + 1,*(uint *)(lVar3 + 0xb0),param_12);
    iVar7 = window_copy_update_selection
                      (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                       extraout_RDX_00,param_12,param_13,param_14);
    if (iVar7 != 0) {
      window_copy_redraw_lines
                (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
                 param_6,param_7,param_8,param_9,*(uint *)(lVar3 + 0xb0),1,param_12,param_13,
                 param_14);
      return;
    }
  }
  else if (uVar9 < (uint)(iVar7 + -1 + iVar1)) {
    uVar10 = window_copy_cursor_start_of_line
                       (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        (ulong)uVar2,uVar8,param_12,param_13,param_14);
    window_copy_cursor_down
              (uVar10,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,0,
               extraout_RDX_01,param_12,param_13,param_14);
    return;
  }
  return;
}



void window_copy_cursor_left
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,ulong param_12,char *param_13,
               size_t param_14)

{
  long lVar1;
  undefined8 uVar2;
  int iVar3;
  uint uVar4;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong uVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Db;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  uVar4 = *(uint *)(lVar1 + 0xac);
  uVar5 = (ulong)uVar4;
  if (uVar4 == 0) {
    uVar4 = *(uint *)(lVar1 + 0xb0) + *(int *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc);
    if (uVar4 != *(uint *)(lVar1 + 0x98)) {
      uVar6 = window_copy_cursor_up
                        ((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         param_9,0,(ulong)uVar4,param_12,param_13,param_14);
      window_copy_cursor_end_of_line
                (uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar5,
                 extraout_RDX_00,param_12,param_13,param_14);
      return;
    }
  }
  else {
    uVar2 = window_copy_update_cursor
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                       uVar4 - 1,*(uint *)(lVar1 + 0xb0),param_12);
    iVar3 = window_copy_update_selection
                      (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                       extraout_RDX,param_12,param_13,param_14);
    if (iVar3 != 0) {
      window_copy_redraw_lines
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,param_9,*(uint *)(lVar1 + 0xb0),1,param_12,param_13,param_14);
      return;
    }
  }
  return;
}



void window_copy_cursor_previous_word
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,char *param_10,undefined8 param_11,char *param_12,char *param_13,
               size_t param_14)

{
  long lVar1;
  undefined8 uVar2;
  bool bVar3;
  uint uVar4;
  int iVar5;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  uint uVar6;
  uint uVar7;
  undefined4 uVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 uVar9;
  undefined4 extraout_XMM0_Db_02;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  uVar4 = *(uint *)(lVar1 + 0xac);
  uVar6 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) +
          *(int *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc);
  do {
    uVar8 = (undefined4)param_1;
    while (uVar4 == 0) {
      if (*(uint *)(lVar1 + 0xb0) == 0) {
        iVar5 = *(int *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc);
        if (iVar5 == 0) {
          uVar7 = 0;
          uVar4 = 0;
          goto LAB_0016d4d6;
        }
        if (iVar5 - 1U <= *(uint *)(lVar1 + 0x98)) {
          uVar7 = 0;
          uVar4 = 0;
          goto LAB_0016d4d6;
        }
      }
      uVar8 = window_copy_cursor_up
                        ((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         param_9,0,(ulong)*(uint *)(lVar1 + 0xb0),(ulong)param_12,param_13,param_14)
      ;
      uVar6 = (*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) +
              *(int *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc);
      uVar4 = window_copy_find_length
                        (uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                         (ulong)uVar6,extraout_RDX,param_12,param_13,param_14);
      param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
      uVar8 = extraout_XMM0_Da;
    }
    uVar4 = uVar4 - 1;
    param_12 = param_10;
    bVar3 = window_copy_in_set(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,(ulong)uVar4,(ulong)uVar6,param_10,param_13,param_14);
    param_1 = CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00);
    uVar8 = extraout_XMM0_Da_00;
    uVar9 = extraout_XMM0_Db_00;
  } while ((int)CONCAT71(extraout_var,bVar3) != 0);
  do {
    uVar7 = uVar4;
    if (uVar7 == 0) break;
    param_12 = param_10;
    bVar3 = window_copy_in_set(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9
                               ,(ulong)(uVar7 - 1),(ulong)uVar6,param_10,param_13,param_14);
    uVar8 = extraout_XMM0_Da_01;
    uVar9 = extraout_XMM0_Db_01;
    uVar4 = uVar7 - 1;
  } while ((int)CONCAT71(extraout_var_00,bVar3) == 0);
  param_1 = CONCAT44(uVar9,uVar8);
  uVar4 = *(uint *)(lVar1 + 0xb0);
LAB_0016d4d6:
  uVar2 = window_copy_update_cursor
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,uVar7,
                     uVar4,param_12);
  iVar5 = window_copy_update_selection
                    (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,
                     extraout_RDX_00,param_12,param_13,param_14);
  if (iVar5 == 0) {
    return;
  }
  window_copy_redraw_lines
            (CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02),param_2,param_3,param_4,param_5,
             param_6,param_7,param_8,param_9,*(uint *)(lVar1 + 0xb0),1,param_12,param_13,param_14);
  return;
}



undefined4 window_copy_scroll_position(long param_1)

{
  if (*(undefined1 **)(param_1 + 0x1e8) == window_copy_mode) {
    return *(undefined4 *)(*(long *)(param_1 + 0x1f0) + 0x98);
  }
  return 0xffffffff;
}



void window_copy_rectangle_toggle
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               char *param_13,size_t param_14)

{
  long lVar1;
  uint uVar2;
  undefined8 extraout_RDX;
  undefined8 uVar3;
  undefined8 extraout_RDX_00;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined8 uVar4;
  
  lVar1 = *(long *)(param_9 + 0x1f0);
  uVar2 = *(uint *)(lVar1 + 0xa4);
  *(uint *)(lVar1 + 0xa4) = (uint)(uVar2 == 0);
  uVar2 = window_copy_find_length
                    (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                     (ulong)(uint)((*(int *)(lVar1 + 0xb0) - *(int *)(lVar1 + 0x98)) +
                                  *(int *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc)),
                     (ulong)uVar2,param_12,param_13,param_14);
  uVar4 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  uVar3 = extraout_RDX;
  if (uVar2 < *(uint *)(lVar1 + 0xac)) {
    uVar4 = window_copy_update_cursor
                      (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                       param_6,param_7,param_8,param_9,uVar2,*(uint *)(lVar1 + 0xb0),param_12);
    uVar3 = extraout_RDX_00;
  }
  window_copy_update_selection
            (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,uVar3,param_12,
             param_13,param_14);
  window_copy_redraw_lines
            (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
             param_6,param_7,param_8,param_9,0,
             *(int *)(*(long *)(*(long *)(param_9 + 0x1f0) + 8) + 8),param_12,param_13,param_14);
  return;
}



void window_copy_start_drag
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,int *param_10)

{
  long lVar1;
  undefined8 uVar2;
  uint *puVar3;
  char *pcVar4;
  size_t in_R9;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  int local_28;
  uint local_24;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  lVar1 = cmd_mouse_pane(param_10,(int **)0x0,(long *)0x0);
  if ((lVar1 != 0) && (*(undefined1 **)(lVar1 + 0x1e8) == window_copy_mode)) {
    puVar3 = &local_24;
    pcVar4 = (char *)0x1;
    uVar2 = cmd_mouse_at(lVar1,(long)param_10,&local_28,(int *)puVar3,1);
    if ((int)uVar2 == 0) {
      *(code **)(param_9 + 0x1e0) = window_copy_drag_update;
      *(undefined8 *)(param_9 + 0x1e8) = 0;
      uVar2 = window_copy_update_cursor
                        (extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         lVar1,local_28,local_24,puVar3);
      uVar2 = window_copy_start_selection
                        (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1);
      window_copy_redraw_lines
                (uVar2,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar1,0,
                 *(int *)(*(long *)(*(long *)(lVar1 + 0x1f0) + 8) + 8),puVar3,pcVar4,in_R9);
    }
  }
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_copy_key(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long *param_9,long param_10,uint *param_11,undefined4 *param_12,
                    undefined8 *param_13,char **param_14)

{
  long lVar1;
  byte *pbVar2;
  bool bVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  undefined8 uVar7;
  char *pcVar8;
  uint uVar9;
  undefined4 *puVar10;
  ulong uVar11;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  undefined8 extraout_RDX_01;
  undefined8 extraout_RDX_02;
  undefined8 extraout_RDX_03;
  undefined8 extraout_RDX_04;
  ulong extraout_RDX_05;
  ulong extraout_RDX_06;
  ulong extraout_RDX_07;
  ulong extraout_RDX_08;
  ulong extraout_RDX_09;
  ulong extraout_RDX_10;
  ulong extraout_RDX_11;
  ulong extraout_RDX_12;
  ulong extraout_RDX_13;
  undefined8 extraout_RDX_14;
  undefined8 extraout_RDX_15;
  undefined8 extraout_RDX_16;
  ulong extraout_RDX_17;
  ulong extraout_RDX_18;
  ulong extraout_RDX_19;
  ulong extraout_RDX_20;
  ulong extraout_RDX_21;
  ulong extraout_RDX_22;
  ulong extraout_RDX_23;
  ulong extraout_RDX_24;
  ulong extraout_RDX_25;
  ulong extraout_RDX_26;
  ulong extraout_RDX_27;
  undefined8 extraout_RDX_28;
  undefined8 uVar12;
  undefined8 extraout_RDX_29;
  undefined8 extraout_RDX_30;
  undefined8 extraout_RDX_31;
  undefined8 extraout_RDX_32;
  undefined8 extraout_RDX_33;
  ulong extraout_RDX_34;
  ulong extraout_RDX_35;
  ulong extraout_RDX_36;
  uint uVar13;
  uint *puVar14;
  undefined8 *puVar15;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 uVar16;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Da_02;
  undefined4 extraout_XMM0_Da_03;
  undefined4 extraout_XMM0_Da_04;
  undefined4 extraout_XMM0_Da_05;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined4 extraout_XMM0_Db_01;
  undefined4 extraout_XMM0_Db_02;
  undefined4 extraout_XMM0_Db_03;
  char *local_48;
  long local_40;
  
  uVar16 = (undefined4)param_1;
  lVar1 = param_9[0x3e];
  uVar6 = *(uint *)(lVar1 + 0xd4);
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  iVar5 = *(int *)(lVar1 + 0xbc);
  uVar13 = 1;
  if (0 < (int)uVar6) {
    uVar13 = uVar6;
  }
  uVar4 = iVar5 - 5;
  puVar10 = param_12;
  if (uVar4 < 4) {
    uVar7 = 0xe00000000000;
    puVar15 = param_13;
    if (((ulong)param_12 & 0xe00000000000) == 0) {
      *(char *)(lVar1 + 0xec) = (char)param_12;
      if (iVar5 == 5) {
        do {
          param_1 = window_copy_cursor_jump
                              (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9,param_10,uVar7,param_12,(char *)param_13,
                               (size_t)param_14);
          if (uVar13 == 1) break;
          param_1 = window_copy_cursor_jump
                              ((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9,param_10,extraout_RDX_03,param_12,(char *)param_13,
                               (size_t)param_14);
          uVar16 = (undefined4)param_1;
          uVar13 = uVar13 - 2;
          uVar7 = extraout_RDX_04;
        } while (uVar13 != 0);
      }
      else if (iVar5 == 6) {
        do {
          param_1 = window_copy_cursor_jump_back
                              (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9);
          if (uVar13 == 1) break;
          param_1 = window_copy_cursor_jump_back
                              ((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9);
          uVar16 = (undefined4)param_1;
          uVar13 = uVar13 - 2;
        } while (uVar13 != 0);
      }
      else if (iVar5 == 7) {
        do {
          param_1 = window_copy_cursor_jump_to
                              (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9,0,uVar7,param_12,(char *)param_13,(size_t)param_14);
          if (uVar13 == 1) break;
          param_1 = window_copy_cursor_jump_to
                              ((int)param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9,0,extraout_RDX_01,param_12,(char *)param_13,
                               (size_t)param_14);
          uVar16 = (undefined4)param_1;
          uVar13 = uVar13 - 2;
          uVar7 = extraout_RDX_02;
        } while (uVar13 != 0);
      }
      else {
        do {
          param_1 = window_copy_cursor_jump_to_back
                              (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9,0,uVar7,param_12,(char *)param_13,(size_t)param_14);
          uVar16 = (undefined4)param_1;
          uVar13 = uVar13 - 1;
          uVar7 = extraout_RDX_00;
        } while (uVar13 != 0);
      }
      iVar5 = *(int *)(lVar1 + 0xbc);
      puVar10 = param_12;
      puVar15 = param_13;
    }
    *(int *)(lVar1 + 0xe8) = iVar5;
    *(undefined4 *)(lVar1 + 0xbc) = 0;
    goto LAB_0016d7e7;
  }
  if (iVar5 == 2) {
    puVar15 = param_13;
    uVar7 = window_copy_key_numeric_prefix
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9
                       ,(ulong)param_12,(ulong)uVar4,param_12,(char *)param_13,(size_t)param_14);
    if ((int)uVar7 == 0) goto LAB_0016d7ff;
    *(undefined4 *)(lVar1 + 0xbc) = 0;
    window_copy_redraw_lines
              (CONCAT44(extraout_XMM0_Db_01,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,(long)param_9,*(int *)(*(long *)(lVar1 + 8) + 8) - 1,1,
               puVar10,(char *)puVar15,(size_t)param_14);
  }
  else if (iVar5 != 0) {
    uVar7 = window_copy_key_input
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       (uint *)param_9,(ulong)param_12,(ulong)uVar4,param_12,(char *)param_13,
                       param_14);
    if ((int)uVar7 == 0) goto LAB_0016d7ff;
    pcVar8 = options_get_number(CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_00),param_2,param_3,
                                param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(param_9[1] + 0x188),"mode-keys",extraout_RDX,param_12,
                                param_13,param_14);
    if ((int)pcVar8 == 0) {
      param_1 = mode_key_init((undefined8 *)(lVar1 + 0x88),&mode_key_tree_emacs_copy);
      puVar10 = param_12;
      puVar15 = param_13;
    }
    else {
      param_1 = mode_key_init((undefined8 *)(lVar1 + 0x88),&mode_key_tree_vi_copy);
      puVar10 = param_12;
      puVar15 = param_13;
    }
    *(undefined4 *)(lVar1 + 0xbc) = 0;
    *(undefined8 *)(lVar1 + 0xc0) = 0;
    goto LAB_0016d7e7;
  }
  puVar15 = (undefined8 *)(lVar1 + 0x88);
  uVar4 = mode_key_lookup(puVar15,(ulong)param_12,&local_48);
  param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
  if ((0x18 < uVar4 - 0x3e) || ((0x1841003UL >> ((ulong)(uVar4 - 0x3e) & 0x3f) & 1) == 0)) {
    *(undefined4 *)(lVar1 + 0xa8) = 0;
  }
  if (0x2f < uVar4 - 0x32) goto switchD_0016d7b6_caseD_30;
  puVar14 = &switchD_0016d7b6::switchdataD_00182038;
  uVar11 = (long)&switchD_0016d7b6::switchdataD_00182038 +
           (long)(int)(&switchD_0016d7b6::switchdataD_00182038)[uVar4 - 0x32];
  uVar16 = extraout_XMM0_Da;
  switch(uVar4) {
  case 0x32:
    if (param_11 == (uint *)0x0) break;
    puVar14 = (uint *)0x0;
    param_1 = window_copy_append_selection
                        (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         (long)param_9,(char *)0x0,uVar11,puVar10,puVar15,param_14);
    uVar11 = extraout_RDX_24;
joined_r0x0016dbd7:
    if (local_48 != (char *)0x0) goto switchD_0016d7b6_caseD_36;
    goto switchD_0016d7b6_caseD_35;
  case 0x33:
    window_copy_cursor_back_to_indentation
              (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               (long)param_9,&switchD_0016d7b6::switchdataD_00182038,uVar11,puVar10,(char *)puVar15,
               (size_t)param_14);
    break;
  case 0x34:
    *(undefined4 *)(lVar1 + 0xac) = 0;
    *(int *)(lVar1 + 0xb0) = *(int *)(*(long *)(lVar1 + 8) + 8) + -1;
    goto LAB_0016dc50;
  case 0x35:
    goto switchD_0016d7b6_caseD_35;
  case 0x36:
switchD_0016d7b6_caseD_36:
    uVar7 = window_copy_clear_selection
                      (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9
                       ,puVar14,uVar11,puVar10,puVar15,param_14);
    goto LAB_0016dbe5;
  case 0x37:
    if (param_11 == (uint *)0x0) break;
    window_copy_copy_pipe
              (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
               param_11,(char *)0x0,local_48,puVar15,param_14);
    goto switchD_0016d7b6_caseD_35;
  case 0x38:
    goto switchD_0016d7b6_caseD_38;
  case 0x39:
    goto switchD_0016d7b6_caseD_39;
  case 0x3a:
    if (param_11 != (uint *)0x0) {
      puVar14 = (uint *)0x0;
      param_1 = window_copy_copy_selection
                          (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)param_9,(char *)0x0,uVar11,puVar10,puVar15,param_14);
      uVar11 = extraout_RDX_17;
      goto joined_r0x0016dbd7;
    }
    break;
  case 0x3b:
    do {
      uVar16 = window_copy_cursor_down
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_9,0,uVar11,(ulong)puVar10,(char *)puVar15,(size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_11;
    } while (uVar13 != 0);
    break;
  case 0x3c:
    window_copy_cursor_end_of_line
              (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               (long)param_9,&switchD_0016d7b6::switchdataD_00182038,uVar11,(ulong)puVar10,
               (char *)puVar15,(size_t)param_14);
    break;
  case 0x3d:
    *(undefined4 *)(lVar1 + 0xbc) = 9;
    *(char **)(lVar1 + 0xc0) = "Goto Line";
    **(undefined **)(lVar1 + 200) = 0;
    goto LAB_0016df5a;
  case 0x3e:
    uVar6 = *(uint *)(lVar1 + 0x98);
    uVar4 = *(uint *)(*(long *)(lVar1 + 8) + 8) >> 1;
    do {
      uVar9 = uVar6 - uVar4;
      puVar10 = (undefined4 *)(ulong)uVar9;
      bVar3 = uVar6 < uVar4;
      uVar6 = uVar9;
      if (bVar3) {
        uVar6 = 0;
      }
      uVar13 = uVar13 - 1;
    } while (uVar13 != 0);
    uVar11 = (ulong)*(uint *)(lVar1 + 0xa8);
    *(uint *)(lVar1 + 0x98) = uVar6;
    if ((*(uint *)(lVar1 + 0xa8) == 0) || (uVar6 != 0)) goto LAB_0016dc50;
    goto switchD_0016d7b6_caseD_35;
  case 0x3f:
    uVar6 = *(uint *)(lVar1 + 0x98);
    uVar4 = *(uint *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc);
    uVar11 = (ulong)uVar4;
    uVar9 = *(uint *)(*(long *)(lVar1 + 8) + 8) >> 1;
    puVar10 = (undefined4 *)(ulong)uVar9;
    do {
      uVar6 = uVar6 + uVar9;
      if (uVar4 < uVar6) {
        uVar6 = uVar4;
      }
      uVar13 = uVar13 - 1;
    } while (uVar13 != 0);
    goto LAB_0016dc8c;
  case 0x40:
    *(undefined4 *)(lVar1 + 0xac) = 0;
    iVar5 = *(int *)(*(long *)(lVar1 + 8) + 8);
    *(undefined4 *)(lVar1 + 0x98) = 0;
    *(int *)(lVar1 + 0xb0) = iVar5 + -1;
    goto LAB_0016dc50;
  case 0x41:
    *(undefined8 *)(lVar1 + 0xac) = 0;
    uVar6 = *(uint *)(*(long *)(*(long *)(lVar1 + 0x78) + 8) + 0xc);
LAB_0016dc8c:
    *(uint *)(lVar1 + 0x98) = uVar6;
    goto LAB_0016dc50;
  case 0x42:
    *(undefined4 *)(lVar1 + 0xbc) = 5;
    *(char **)(lVar1 + 0xc0) = "Jump Forward";
    **(undefined **)(lVar1 + 200) = 0;
    goto LAB_0016d7e7;
  case 0x43:
    iVar5 = *(int *)(lVar1 + 0xe8);
    uVar16 = extraout_XMM0_Da;
    if (iVar5 == 5) {
      do {
        uVar16 = window_copy_cursor_jump
                           (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9,puVar14,uVar11,puVar10,(char *)puVar15,(size_t)param_14);
        uVar13 = uVar13 - 1;
        uVar11 = extraout_RDX_19;
      } while (uVar13 != 0);
    }
    else if (iVar5 == 6) {
      do {
        uVar16 = window_copy_cursor_jump_back
                           (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9);
        uVar13 = uVar13 - 1;
      } while (uVar13 != 0);
    }
    else if (iVar5 == 7) {
      do {
        uVar16 = window_copy_cursor_jump_to
                           (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9,1,uVar11,puVar10,(char *)puVar15,(size_t)param_14);
        uVar13 = uVar13 - 1;
        uVar11 = extraout_RDX_20;
      } while (uVar13 != 0);
    }
    else if (iVar5 == 8) {
      do {
        uVar16 = window_copy_cursor_jump_to_back
                           (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9,1,uVar11,puVar10,(char *)puVar15,(size_t)param_14);
        uVar13 = uVar13 - 1;
        uVar11 = extraout_RDX_18;
      } while (uVar13 != 0);
    }
    break;
  case 0x44:
    iVar5 = *(int *)(lVar1 + 0xe8);
    uVar16 = extraout_XMM0_Da;
    if (iVar5 == 5) {
      do {
        uVar16 = window_copy_cursor_jump_back
                           (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9);
        uVar13 = uVar13 - 1;
      } while (uVar13 != 0);
    }
    else if (iVar5 == 6) {
      do {
        uVar16 = window_copy_cursor_jump
                           (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9,puVar14,uVar11,puVar10,(char *)puVar15,(size_t)param_14);
        uVar13 = uVar13 - 1;
        uVar11 = extraout_RDX_22;
      } while (uVar13 != 0);
    }
    else if (iVar5 == 7) {
      do {
        uVar16 = window_copy_cursor_jump_to_back
                           (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9,1,uVar11,puVar10,(char *)puVar15,(size_t)param_14);
        uVar13 = uVar13 - 1;
        uVar11 = extraout_RDX_23;
      } while (uVar13 != 0);
    }
    else if (iVar5 == 8) {
      do {
        uVar16 = window_copy_cursor_jump_to
                           (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9,1,uVar11,puVar10,(char *)puVar15,(size_t)param_14);
        uVar13 = uVar13 - 1;
        uVar11 = extraout_RDX_21;
      } while (uVar13 != 0);
    }
    break;
  case 0x45:
    *(undefined4 *)(lVar1 + 0xbc) = 6;
    *(char **)(lVar1 + 0xc0) = "Jump Back";
    **(undefined **)(lVar1 + 200) = 0;
    param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    goto LAB_0016d7e7;
  case 0x46:
    *(undefined4 *)(lVar1 + 0xbc) = 7;
    *(char **)(lVar1 + 0xc0) = "Jump To";
    **(undefined **)(lVar1 + 200) = 0;
    param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    goto LAB_0016d7e7;
  case 0x47:
    *(undefined4 *)(lVar1 + 0xbc) = 8;
    *(char **)(lVar1 + 0xc0) = "Jump To Back";
    **(undefined **)(lVar1 + 200) = 0;
    param_1 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da);
    goto LAB_0016d7e7;
  case 0x48:
    do {
      param_1 = window_copy_cursor_left
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)param_9,puVar14,uVar11,(ulong)puVar10,(char *)puVar15,
                           (size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_10;
    } while (uVar13 != 0);
    break;
  case 0x49:
    *(undefined4 *)(lVar1 + 0xac) = 0;
    *(uint *)(lVar1 + 0xb0) = *(int *)(*(long *)(lVar1 + 8) + 8) - 1U >> 1;
    goto LAB_0016dc50;
  case 0x4a:
    do {
      uVar16 = window_copy_pagedown
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (uint *)param_9,puVar14,uVar11,puVar10,(char *)puVar15,(size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_09;
    } while (uVar13 != 0);
    break;
  case 0x4b:
    uVar16 = extraout_XMM0_Da;
    do {
      uVar16 = window_copy_cursor_next_word
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_9," ",uVar11,(char *)puVar10,(char *)puVar15,param_14);
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_26;
    } while (uVar13 != 0);
    break;
  case 0x4c:
    uVar16 = extraout_XMM0_Da;
    do {
      uVar16 = window_copy_cursor_next_word_end
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_9," ",uVar11,(char *)puVar10,(char *)puVar15,(size_t)param_14)
      ;
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_25;
    } while (uVar13 != 0);
    break;
  case 0x4d:
    pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,*(char ***)(param_11 + 0x42),
                                "word-separators",uVar11,puVar10,puVar15,param_14);
    uVar7 = extraout_RDX_32;
    uVar16 = extraout_XMM0_Da_05;
    do {
      uVar16 = window_copy_cursor_next_word
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_9,pcVar8,uVar7,(char *)puVar10,(char *)puVar15,param_14);
      uVar13 = uVar13 - 1;
      uVar7 = extraout_RDX_33;
    } while (uVar13 != 0);
    break;
  case 0x4e:
    pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,*(char ***)(param_11 + 0x42),
                                "word-separators",uVar11,puVar10,puVar15,param_14);
    uVar7 = extraout_RDX_30;
    uVar16 = extraout_XMM0_Da_04;
    do {
      uVar16 = window_copy_cursor_next_word_end
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_9,pcVar8,uVar7,(char *)puVar10,(char *)puVar15,
                          (size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar7 = extraout_RDX_31;
    } while (uVar13 != 0);
    break;
  case 0x4f:
    if ((uVar13 & 1) != 0) {
      window_copy_other_end
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,(long)param_9);
    }
    break;
  case 0x50:
    do {
      uVar16 = window_copy_pageup(uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  (long)param_9,puVar14,uVar11,puVar10,(char *)puVar15,
                                  (size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_08;
    } while (uVar13 != 0);
    break;
  case 0x51:
    do {
      param_1 = window_copy_cursor_previous_word
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)param_9," ",uVar11,(char *)puVar10,(char *)puVar15,(size_t)param_14
                          );
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_27;
    } while (uVar13 != 0);
    break;
  case 0x52:
    pcVar8 = options_get_string(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,*(char ***)(param_11 + 0x42),
                                "word-separators",uVar11,puVar10,puVar15,param_14);
    uVar7 = CONCAT44(extraout_XMM0_Db_03,extraout_XMM0_Da_03);
    uVar12 = extraout_RDX_28;
    do {
      uVar7 = window_copy_cursor_previous_word
                        (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9
                         ,pcVar8,uVar12,(char *)puVar10,(char *)puVar15,(size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar12 = extraout_RDX_29;
    } while (uVar13 != 0);
    break;
  case 0x53:
    *(undefined4 *)(lVar1 + 0x48) = 0;
    window_copy_rectangle_toggle
              (extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
               (long)param_9,&switchD_0016d7b6::switchdataD_00182038,uVar11,puVar10,(char *)puVar15,
               (size_t)param_14);
    break;
  case 0x54:
    do {
      param_1 = window_copy_cursor_right
                          (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)param_9,puVar14,uVar11,(ulong)puVar10,(char *)puVar15,
                           (size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_07;
    } while (uVar13 != 0);
    break;
  case 0x55:
    do {
      uVar16 = window_copy_cursor_down
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_9,1,uVar11,(ulong)puVar10,(char *)puVar15,(size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_06;
    } while (uVar13 != 0);
    if ((*(int *)(lVar1 + 0xa8) == 0) || (*(int *)(lVar1 + 0x98) != 0)) break;
switchD_0016d7b6_caseD_35:
    window_pane_reset_mode((uint *)param_9);
    goto LAB_0016d7ff;
  case 0x56:
    do {
      uVar16 = window_copy_cursor_up
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_9,1,uVar11,(ulong)puVar10,(char *)puVar15,(size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_05;
    } while (uVar13 != 0);
    break;
  default:
    uVar6 = *(uint *)(lVar1 + 0xd8);
    uVar11 = (ulong)uVar6;
    if (uVar6 == 4) {
      pbVar2 = *(byte **)(lVar1 + 0xe0);
      if (uVar4 == 0x57) {
        do {
          param_1 = window_copy_search_down
                              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9,pbVar2,uVar11,puVar10,(size_t)puVar15,(size_t)param_14)
          ;
          uVar13 = uVar13 - 1;
          uVar11 = extraout_RDX_36;
        } while (uVar13 != 0);
      }
      else {
        do {
          param_1 = window_copy_search_up
                              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9,pbVar2,uVar11,puVar10,(size_t)puVar15,(size_t)param_14)
          ;
          uVar13 = uVar13 - 1;
          uVar11 = extraout_RDX_35;
        } while (uVar13 != 0);
      }
    }
    else if ((uVar6 < 5) || (uVar11 = (ulong)(uVar6 - 5), uVar6 - 5 < 5)) {
      pbVar2 = *(byte **)(lVar1 + 0xe0);
      if (uVar4 == 0x57) {
        do {
          param_1 = window_copy_search_up
                              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9,pbVar2,uVar11,puVar10,(size_t)puVar15,(size_t)param_14)
          ;
          uVar13 = uVar13 - 1;
          uVar11 = extraout_RDX_34;
        } while (uVar13 != 0);
      }
      else {
        do {
          param_1 = window_copy_search_down
                              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                               (long)param_9,pbVar2,uVar11,puVar10,(size_t)puVar15,(size_t)param_14)
          ;
          uVar13 = uVar13 - 1;
          uVar11 = extraout_RDX_13;
        } while (uVar13 != 0);
      }
    }
    break;
  case 0x58:
    *(undefined4 *)(lVar1 + 0xbc) = 4;
    *(char **)(lVar1 + 0xc0) = "Search Down";
    goto LAB_0016df5a;
  case 0x5a:
    *(undefined4 *)(lVar1 + 0xbc) = 3;
    *(char **)(lVar1 + 0xc0) = "Search Up";
    goto LAB_0016df5a;
  case 0x5b:
    *(undefined4 *)(lVar1 + 0x48) = 1;
    *(undefined4 *)(lVar1 + 0xa4) = 0;
switchD_0016d7b6_caseD_38:
    param_1 = window_copy_cursor_start_of_line
                        (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,(long)param_9,
                         &switchD_0016d7b6::switchdataD_00182038,uVar11,(ulong)puVar10,puVar15,
                         (size_t)param_14);
switchD_0016d7b6_caseD_39:
    uVar16 = window_copy_start_selection
                       (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                        (long)param_9);
    uVar7 = extraout_RDX_14;
    if (1 < (int)uVar6) {
      do {
        puVar14 = (uint *)0x0;
        uVar13 = uVar13 - 1;
        uVar16 = window_copy_cursor_down
                           (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (long)param_9,0,uVar7,(ulong)puVar10,(char *)puVar15,(size_t)param_14);
        uVar7 = extraout_RDX_15;
      } while (uVar13 != 1);
    }
    uVar7 = window_copy_cursor_end_of_line
                      (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                       puVar14,uVar7,(ulong)puVar10,(char *)puVar15,(size_t)param_14);
    uVar16 = window_copy_redraw_lines
                       (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                        0,*(int *)(*(long *)(param_9[0x3e] + 8) + 8),puVar10,(char *)puVar15,
                        (size_t)param_14);
    if ((param_11 != (uint *)0x0) && (uVar4 - 0x38 < 2)) {
      window_copy_copy_selection
                (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
                 (char *)0x0,extraout_RDX_16,puVar10,puVar15,param_14);
      window_pane_reset_mode((uint *)param_9);
      goto LAB_0016d7ff;
    }
    break;
  case 0x5c:
    *(undefined4 *)(lVar1 + 0xbc) = 1;
    *(uint *)(lVar1 + 0xd0) = (uint)(local_48 == (char *)0x0);
    *(char **)(lVar1 + 0xc0) = "Buffer";
    **(undefined **)(lVar1 + 200) = 0;
LAB_0016df5a:
    pcVar8 = options_get_number(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,
                                param_5,param_6,param_7,param_8,*(char ***)(param_9[1] + 0x188),
                                "mode-keys",uVar11,puVar10,puVar15,param_14);
    if ((int)pcVar8 == 0) {
      param_1 = mode_key_init(puVar15,&mode_key_tree_emacs_edit);
    }
    else {
      param_1 = mode_key_init(puVar15,&mode_key_tree_vi_edit);
    }
LAB_0016d7e7:
    window_copy_redraw_lines
              (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,
               *(int *)(*(long *)(lVar1 + 8) + 8) - 1,1,puVar10,(char *)puVar15,(size_t)param_14);
    goto LAB_0016d7ff;
  case 0x5d:
    if (((ulong)param_12 & 0xffff1fffffffffff) - 0x30 < 10) {
      *(undefined4 *)(lVar1 + 0xbc) = 2;
      *(undefined4 *)(lVar1 + 0xd4) = 0;
      window_copy_key_numeric_prefix
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,(long)param_9,(ulong)param_12 & 0xffff1fffffffffff,uVar11,puVar10,
                 (char *)puVar15,(size_t)param_14);
      goto LAB_0016d7ff;
    }
    break;
  case 0x5e:
    window_copy_cursor_start_of_line
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,(long)param_9,&switchD_0016d7b6::switchdataD_00182038,uVar11,
               (ulong)puVar10,puVar15,(size_t)param_14);
    break;
  case 0x5f:
    param_14 = (char **)((ulong)param_12 & 0xffff1fffffffffff);
    if (0x2a < (long)param_14 - 0x100000000002U) {
      *(undefined4 *)(lVar1 + 0x48) = 0;
      uVar7 = window_copy_start_selection
                        (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5
                         ,param_6,param_7,param_8,(long)param_9);
      goto LAB_0016dbe5;
    }
    if (param_10 != 0) {
      window_copy_start_drag
                (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6
                 ,param_7,param_8,param_10,(int *)param_13);
    }
    break;
  case 0x60:
    *(undefined8 *)(lVar1 + 0xac) = 0;
LAB_0016dc50:
    window_copy_update_selection
              (CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
               param_7,param_8,(long)param_9,1,uVar11,puVar10,puVar15,param_14);
    uVar7 = CONCAT44(extraout_XMM0_Db_02,extraout_XMM0_Da_02);
LAB_0016dbe5:
    window_copy_redraw_lines
              (uVar7,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)param_9,0,
               *(int *)(*(long *)(param_9[0x3e] + 8) + 8),puVar10,(char *)puVar15,(size_t)param_14);
    break;
  case 0x61:
    do {
      uVar16 = window_copy_cursor_up
                         (uVar16,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (long)param_9,0,uVar11,(ulong)puVar10,(char *)puVar15,(size_t)param_14);
      uVar13 = uVar13 - 1;
      uVar11 = extraout_RDX_12;
    } while (uVar13 != 0);
  }
switchD_0016d7b6_caseD_30:
  *(undefined4 *)(lVar1 + 0xd4) = 0xffffffff;
LAB_0016d7ff:
  tmate_sync_copy_mode((uint *)param_9);
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_pane_read_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,uint *param_10,undefined8 param_11,undefined8 param_12,
               uint *param_13,undefined8 param_14)

{
  uint *puVar1;
  long lVar2;
  long lVar3;
  bool bVar4;
  int iVar5;
  undefined8 uVar6;
  undefined7 extraout_var;
  ulong uVar7;
  long lVar8;
  undefined8 uVar9;
  undefined8 uVar10;
  undefined8 extraout_RDX;
  long lVar11;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined8 uVar12;
  undefined auVar13 [16];
  undefined8 in_stack_ffffffffffffffb8;
  
  puVar1 = param_10 + 0x22;
  lVar2 = *(long *)(in_FS_OFFSET + 0x28);
  uVar9 = *(undefined8 *)(*(long *)(param_10 + 0x20) + 0x110);
  iVar5 = event_initialized(puVar1);
  if (iVar5 != 0) {
    event_del(puVar1);
  }
  uVar6 = evbuffer_get_length(uVar9);
  log_emit(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
           "%%%u has %zu bytes",(ulong)*param_10,uVar6,param_13,param_14,
           (char)in_stack_ffffffffffffffb8);
  lVar3 = clients;
  do {
    if (lVar3 == 0) {
      lVar8 = evbuffer_get_length(uVar9);
      lVar3 = *(long *)(param_10 + 0x4c);
      if ((param_10[0x49] != 0xffffffff) && (lVar8 - lVar3 != 0)) {
        lVar11 = evbuffer_pullup(uVar9,0xffffffffffffffff);
        bufferevent_write(*(undefined8 *)(param_10 + 0x4a),lVar11 + *(long *)(param_10 + 0x4c),
                          lVar8 - lVar3);
      }
      lVar8 = evbuffer_get_length(*(undefined8 *)(*(long *)(param_10 + 0x20) + 0x110));
      lVar3 = *(long *)(param_10 + 0x4e);
      lVar11 = -1;
      auVar13 = evbuffer_pullup(*(undefined8 *)(*(long *)(param_10 + 0x20) + 0x110));
      uVar12 = CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01);
      uVar10 = auVar13._8_8_;
      if (lVar8 - lVar3 != 0) {
        lVar11 = auVar13._0_8_ + *(long *)(param_10 + 0x4e);
        uVar12 = tmate_pty_data(param_10,lVar11,lVar8 - lVar3);
        uVar10 = extraout_RDX;
      }
      input_parse(uVar12,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_10,lVar11,
                  uVar10,uVar6,param_13,param_14);
      uVar6 = evbuffer_get_length(uVar9);
      *(undefined8 *)(param_10 + 0x4c) = uVar6;
      uVar9 = evbuffer_get_length(uVar9);
      *(undefined8 *)(param_10 + 0x4e) = uVar9;
LAB_0016e368:
      if (lVar2 == *(long *)(in_FS_OFFSET + 0x28)) {
        return;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    bVar4 = tty_client_ready(lVar3,(long)param_10);
    if (((int)CONCAT71(extraout_var,bVar4) != 0) &&
       (uVar7 = evbuffer_get_length(*(undefined8 *)(*(long *)(lVar3 + 0x138) + 0x118)),
       0x200 < uVar7)) {
      log_emit(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,3,
               "%%%u backing off (%s %zu > %d)",(ulong)*param_10,*(undefined8 *)(lVar3 + 0xd8),uVar7
               ,0x200,(char)in_stack_ffffffffffffffb8);
      event_set(puVar1,0xffffffff,0,window_pane_timer_callback,param_10);
      event_add(puVar1,&stack0xffffffffffffffb8);
      goto LAB_0016e368;
    }
    lVar3 = *(long *)(lVar3 + 0x5c0);
  } while( true );
}



void window_pane_timer_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,uint *param_11,undefined8 param_12,
               uint *param_13,undefined8 param_14)

{
  window_pane_read_callback
            (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,0,param_11,param_11,
             param_12,param_13,param_14);
  return;
}



void window_pane_error_callback
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,undefined8 param_10,uint *param_11,char *param_12,long *param_13,
               char **param_14)

{
  server_destroy_pane(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_11,1,
                      param_11,param_12,param_13,param_14);
  return;
}



undefined8 FUN_0016e490(long param_1,long param_2)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  
  lVar3 = *(long *)(param_1 + 0x138);
  do {
    if (*(long *)(lVar3 + 0x10) != 0) {
      uVar1 = *(uint *)(*(long *)(lVar3 + 8) + 0x178);
      if (*(uint *)(lVar3 + 0x28) < uVar1) {
        uVar2 = *(uint *)(*(long *)(lVar3 + 8) + 0x17c);
        if (((*(uint *)(lVar3 + 0x2c) < uVar2) &&
            (*(uint *)(lVar3 + 0x28) + *(int *)(lVar3 + 0x20) <= uVar1)) &&
           (*(uint *)(lVar3 + 0x2c) + *(int *)(lVar3 + 0x24) <= uVar2)) {
          *(uint *)(lVar3 + 0x30) = *(uint *)(lVar3 + 0x30) | 0x40;
          *(int *)(lVar3 + 4) = next_active_point;
          next_active_point = next_active_point + 1;
          return 1;
        }
      }
    }
    lVar3 = **(long **)(*(long *)(lVar3 + 0x200) + 8);
    *(long *)(param_1 + 0x138) = lVar3;
    if (lVar3 == 0) {
      lVar3 = **(long **)(*(long *)(param_1 + 0x150) + 8);
      *(long *)(param_1 + 0x138) = lVar3;
    }
  } while (param_2 != lVar3);
  return 1;
}



void windows_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_0016e538:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x1a8);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x1b0) != 1)) {
        *(undefined4 *)(*param_1 + 0x1b0) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x1a8);
      lVar3 = *(long *)(lVar2 + 0x198);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x1a0);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x1b0) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x1a0) == param_2) {
          lVar3 = *(long *)(param_2 + 0x198);
          *(long *)(lVar1 + 0x1a0) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x1a8) = lVar2;
            lVar3 = lVar2;
LAB_0016e81a:
            *(long *)(lVar3 + 0x198) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x1a8) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x1a8);
            *(long *)(param_2 + 0x1a8) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x198) == lVar1) goto LAB_0016e81a;
              *(long *)(lVar3 + 0x1a0) = param_2;
            }
          }
          *(long *)(param_2 + 0x198) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x198);
          *(long *)(lVar1 + 0x1a8) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x1b0) = 0;
        lVar1 = *(long *)(lVar3 + 0x1a0);
        *(undefined4 *)(lVar2 + 0x1b0) = 1;
        *(long *)(lVar2 + 0x198) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x1a8) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x1a8);
        *(long *)(lVar3 + 0x1a8) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x198) == lVar2) {
          *(long *)(lVar1 + 0x198) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x1a0) = lVar3;
        }
        *(long *)(lVar3 + 0x1a0) = lVar2;
        *(long *)(lVar2 + 0x1a8) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x1b0) = 0;
        *(undefined4 *)(lVar1 + 0x1b0) = 0;
        *(undefined4 *)(lVar2 + 0x1b0) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x1b0) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x198) == param_2) {
        lVar3 = *(long *)(param_2 + 0x1a0);
        *(long *)(lVar1 + 0x198) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x1a8) = lVar2;
          lVar3 = lVar2;
LAB_0016e6cd:
          if (*(long *)(lVar3 + 0x198) == lVar1) {
            *(long *)(lVar3 + 0x198) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x1a0) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x1a8) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x1a8);
          *(long *)(param_2 + 0x1a8) = lVar3;
          if (lVar3 != 0) goto LAB_0016e6cd;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x1a0) = lVar1;
        *(long *)(lVar1 + 0x1a8) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x1b0) = 0;
      lVar1 = *(long *)(lVar2 + 0x1a0);
      *(undefined4 *)(lVar2 + 0x1b0) = 1;
      lVar3 = *(long *)(lVar1 + 0x198);
      *(long *)(lVar2 + 0x1a0) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x1a8) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x1a8);
      *(long *)(lVar1 + 0x1a8) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x198) == lVar2) {
        *(long *)(lVar3 + 0x198) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x1a0) = lVar1;
      }
      *(long *)(lVar1 + 0x198) = lVar2;
      *(long *)(lVar2 + 0x1a8) = lVar1;
      goto LAB_0016e538;
    }
    *(undefined4 *)(lVar3 + 0x1b0) = 0;
    *(undefined4 *)(lVar1 + 0x1b0) = 0;
    *(undefined4 *)(lVar2 + 0x1b0) = 1;
    param_2 = lVar2;
  } while( true );
}



void windows_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_0016e8ea(param_1,param_2,param_3);
  return;
}



void FUN_0016e8ea(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x1b0) != 0)) goto LAB_0016e9ee;
    if (*param_1 == param_3) goto joined_r0x0016ebd5;
    lVar2 = *(long *)(param_2 + 0x198);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x1b0) == 1) {
        lVar1 = *(long *)(lVar2 + 0x1a0);
        *(undefined4 *)(lVar2 + 0x1b0) = 0;
        *(undefined4 *)(param_2 + 0x1b0) = 1;
        *(long *)(param_2 + 0x198) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x1a8) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x1a8);
        *(long *)(lVar2 + 0x1a8) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x1a8) + 0x198) == param_2) {
          *(long *)(lVar3 + 0x198) = lVar2;
          lVar1 = *(long *)(param_2 + 0x198);
        }
        else {
          *(long *)(lVar3 + 0x1a0) = lVar2;
        }
        *(long *)(lVar2 + 0x1a0) = param_2;
        *(long *)(param_2 + 0x1a8) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x198);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x1b0) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x1a0);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x1b0) == 0)) goto LAB_0016e8d3;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x1b0) != 0)) goto LAB_0016eb4c;
        lVar2 = *(long *)(lVar3 + 0x198);
        *(undefined4 *)(lVar3 + 0x1b0) = 0;
        *(undefined4 *)(lVar1 + 0x1b0) = 1;
        *(long *)(lVar1 + 0x1a0) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x1a8) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x1a8);
        *(long *)(lVar3 + 0x1a8) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x198) == lVar1) {
          *(long *)(lVar2 + 0x198) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x1a0) = lVar3;
        }
        *(long *)(lVar3 + 0x198) = lVar1;
        *(long *)(lVar1 + 0x1a8) = lVar3;
        lVar3 = *(long *)(param_2 + 0x198);
        lVar2 = *(long *)(lVar3 + 0x198);
        *(undefined4 *)(lVar3 + 0x1b0) = *(undefined4 *)(param_2 + 0x1b0);
        *(undefined4 *)(param_2 + 0x1b0) = 0;
        if (lVar2 != 0) goto LAB_0016eb6b;
      }
      else {
LAB_0016eb4c:
        lVar3 = *(long *)(param_2 + 0x198);
        *(undefined4 *)(lVar1 + 0x1b0) = *(undefined4 *)(param_2 + 0x1b0);
        *(undefined4 *)(param_2 + 0x1b0) = 0;
LAB_0016eb6b:
        *(undefined4 *)(lVar2 + 0x1b0) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x1a0);
      *(long *)(param_2 + 0x198) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x1a8) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x1a8);
      *(long *)(lVar3 + 0x1a8) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x1a8) + 0x198) == param_2) {
        *(long *)(lVar2 + 0x198) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x1a0) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x1a0) = param_2;
      *(long *)(param_2 + 0x1a8) = lVar3;
      goto joined_r0x0016ebd5;
    }
    lVar2 = *(long *)(param_2 + 0x1a0);
    lVar3 = *(long *)(lVar2 + 0x198);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x1b0) == 1) {
      *(undefined4 *)(lVar2 + 0x1b0) = 0;
      *(undefined4 *)(param_2 + 0x1b0) = 1;
      *(long *)(param_2 + 0x1a0) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x1a8) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x1a8);
      *(long *)(lVar2 + 0x1a8) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x198) == param_2) {
        *(long *)(lVar4 + 0x198) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x1a0) = lVar2;
        lVar1 = *(long *)(param_2 + 0x1a0);
      }
      *(long *)(lVar2 + 0x198) = param_2;
      lVar3 = *(long *)(lVar1 + 0x198);
      *(long *)(param_2 + 0x1a8) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x1b0) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x1a0);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x1b0) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x1a0);
        *(undefined4 *)(lVar3 + 0x1b0) = 0;
        *(undefined4 *)(lVar1 + 0x1b0) = 1;
        *(long *)(lVar1 + 0x198) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x1a8) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x1a8);
        *(long *)(lVar3 + 0x1a8) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x198) == lVar1) {
          *(long *)(lVar2 + 0x198) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x1a0) = lVar3;
        }
        *(long *)(lVar3 + 0x1a0) = lVar1;
        lVar4 = *(long *)(param_2 + 0x1a0);
        *(long *)(lVar1 + 0x1a8) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x1a0);
        *(undefined4 *)(lVar4 + 0x1b0) = *(undefined4 *)(param_2 + 0x1b0);
        *(undefined4 *)(param_2 + 0x1b0) = 0;
        if (lVar2 != 0) goto LAB_0016e985;
        goto LAB_0016e98f;
      }
LAB_0016e968:
      lVar4 = *(long *)(param_2 + 0x1a0);
      *(undefined4 *)(lVar1 + 0x1b0) = *(undefined4 *)(param_2 + 0x1b0);
      *(undefined4 *)(param_2 + 0x1b0) = 0;
LAB_0016e985:
      *(undefined4 *)(lVar2 + 0x1b0) = 0;
LAB_0016e98f:
      lVar2 = *(long *)(lVar4 + 0x198);
      *(long *)(param_2 + 0x1a0) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x1a8) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x1a8);
      *(long *)(lVar4 + 0x1a8) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x198) == param_2) {
        *(long *)(lVar2 + 0x198) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x1a0) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x198) = param_2;
      *(long *)(param_2 + 0x1a8) = lVar4;
joined_r0x0016ebd5:
      if (param_3 == 0) {
        return;
      }
LAB_0016e9ee:
      *(undefined4 *)(param_3 + 0x1b0) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x1a0);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x1b0) != 0)) goto LAB_0016e968;
LAB_0016e8d3:
    *(undefined4 *)(lVar1 + 0x1b0) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x1a8);
  } while( true );
}



long windows_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x1a0);
  if (*(long *)(param_2 + 0x198) == 0) {
    lVar7 = *(long *)(param_2 + 0x1a8);
    iVar4 = *(int *)(param_2 + 0x1b0);
    if (lVar6 != 0) goto LAB_0016eec2;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x198);
      } while (*(long *)(lVar5 + 0x198) != 0);
      lVar7 = *(long *)(lVar5 + 0x1a8);
      lVar6 = *(long *)(lVar5 + 0x1a0);
      iVar4 = *(int *)(lVar5 + 0x1b0);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x1a8) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x1a8);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x198) == lVar5) {
        *(long *)(lVar7 + 0x198) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x1a0) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x19c);
      uVar2 = *(undefined4 *)(param_2 + 0x1a0);
      uVar3 = *(undefined4 *)(param_2 + 0x1a4);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x198) = *(undefined4 *)(param_2 + 0x198);
      *(undefined4 *)(lVar5 + 0x19c) = uVar1;
      *(undefined4 *)(lVar5 + 0x1a0) = uVar2;
      *(undefined4 *)(lVar5 + 0x1a4) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x1ac);
      uVar2 = *(undefined4 *)(param_2 + 0x1b0);
      uVar3 = *(undefined4 *)(param_2 + 0x1b4);
      *(undefined4 *)(lVar5 + 0x1a8) = *(undefined4 *)(param_2 + 0x1a8);
      *(undefined4 *)(lVar5 + 0x1ac) = uVar1;
      *(undefined4 *)(lVar5 + 0x1b0) = uVar2;
      *(undefined4 *)(lVar5 + 0x1b4) = uVar3;
      lVar8 = *(long *)(param_2 + 0x1a8);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x198) == param_2) {
        *(long *)(lVar8 + 0x198) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x1a0) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x198) + 0x1a8) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x1a0) != 0) {
        *(long *)(*(long *)(param_2 + 0x1a0) + 0x1a8) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x1a8)) {
      }
      goto joined_r0x0016eee0;
    }
    lVar7 = *(long *)(param_2 + 0x1a8);
    iVar4 = *(int *)(param_2 + 0x1b0);
    lVar6 = *(long *)(param_2 + 0x198);
LAB_0016eec2:
    *(long *)(lVar6 + 0x1a8) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x198) == param_2) {
    *(long *)(lVar7 + 0x198) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x1a0) = lVar6;
  }
joined_r0x0016eee0:
  if (iVar4 == 0) {
    windows_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



int * windows_RB_INSERT(int **param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  if (*param_1 == (int *)0x0) {
    *(undefined8 *)(param_2 + 0x6a) = 0;
    *(undefined8 *)(param_2 + 0x68) = 0;
    *(undefined8 *)(param_2 + 0x66) = 0;
    param_2[0x6c] = 1;
    *param_1 = param_2;
  }
  else {
    piVar1 = *param_1;
    do {
      piVar2 = piVar1;
      iVar3 = *param_2 - *piVar2;
      if (iVar3 < 0) {
        piVar1 = *(int **)(piVar2 + 0x66);
      }
      else {
        if (*param_2 == *piVar2) {
          return piVar2;
        }
        piVar1 = *(int **)(piVar2 + 0x68);
      }
    } while (piVar1 != (int *)0x0);
    *(int **)(param_2 + 0x6a) = piVar2;
    *(undefined8 *)(param_2 + 0x68) = 0;
    *(undefined8 *)(param_2 + 0x66) = 0;
    param_2[0x6c] = 1;
    if (iVar3 < 0) {
      *(int **)(piVar2 + 0x66) = param_2;
    }
    else {
      *(int **)(piVar2 + 0x68) = param_2;
    }
  }
  windows_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (int *)0x0;
}



void windows_RB_FIND(int **param_1,int *param_2)

{
  int *piVar1;
  
  piVar1 = *param_1;
  if (piVar1 != (int *)0x0) {
    do {
      while (-1 < *param_2 - *piVar1) {
        if (*param_2 == *piVar1) {
          return;
        }
        piVar1 = *(int **)(piVar1 + 0x68);
        if (piVar1 == (int *)0x0) {
          return;
        }
      }
      piVar1 = *(int **)(piVar1 + 0x66);
    } while (piVar1 != (int *)0x0);
  }
  return;
}



int * windows_RB_NFIND(int **param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  
  if (*param_1 == (int *)0x0) {
    piVar3 = (int *)0x0;
  }
  else {
    piVar1 = *param_1;
    piVar3 = (int *)0x0;
    do {
      while (piVar2 = piVar1, *param_2 - *piVar2 < 0) {
        piVar1 = *(int **)(piVar2 + 0x66);
        piVar3 = piVar2;
        if (*(int **)(piVar2 + 0x66) == (int *)0x0) {
          return piVar2;
        }
      }
      if (*param_2 == *piVar2) {
        return piVar2;
      }
      piVar1 = *(int **)(piVar2 + 0x68);
    } while (*(int **)(piVar2 + 0x68) != (int *)0x0);
  }
  return piVar3;
}



long windows_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x1a0);
  if (*(long *)(param_1 + 0x1a0) == 0) {
    lVar2 = *(long *)(param_1 + 0x1a8);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x198) != param_1)) &&
       (*(long *)(lVar2 + 0x1a0) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x1a8), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x1a0) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x198);
    } while (*(long *)(lVar2 + 0x198) != 0);
  }
  return lVar2;
}



long windows_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x198);
  if (*(long *)(param_1 + 0x198) == 0) {
    lVar2 = *(long *)(param_1 + 0x1a8);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x1a0) != param_1)) &&
       (*(long *)(lVar2 + 0x198) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x1a8), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x198) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x1a0);
    } while (*(long *)(lVar2 + 0x1a0) != 0);
  }
  return lVar2;
}



long windows_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x1a0);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x198);
    }
  }
  return lVar2;
}



int window_cmp(int *param_1,int *param_2)

{
  return *param_1 - *param_2;
}



void winlinks_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_0016f1d8:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x50);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x58) != 1)) {
        *(undefined4 *)(*param_1 + 0x58) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x50);
      lVar3 = *(long *)(lVar2 + 0x40);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x48);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x58) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x48) == param_2) {
          lVar3 = *(long *)(param_2 + 0x40);
          *(long *)(lVar1 + 0x48) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x50) = lVar2;
            lVar3 = lVar2;
LAB_0016f3f7:
            *(long *)(lVar3 + 0x40) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x50) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x50);
            *(long *)(param_2 + 0x50) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x40) == lVar1) goto LAB_0016f3f7;
              *(long *)(lVar3 + 0x48) = param_2;
            }
          }
          *(long *)(param_2 + 0x40) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x40);
          *(long *)(lVar1 + 0x50) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x58) = 0;
        lVar1 = *(long *)(lVar3 + 0x48);
        *(undefined4 *)(lVar2 + 0x58) = 1;
        *(long *)(lVar2 + 0x40) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x50) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x50);
        *(long *)(lVar3 + 0x50) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x40) == lVar2) {
          *(long *)(lVar1 + 0x40) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x48) = lVar3;
        }
        *(long *)(lVar3 + 0x48) = lVar2;
        *(long *)(lVar2 + 0x50) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x58) = 0;
        *(undefined4 *)(lVar1 + 0x58) = 0;
        *(undefined4 *)(lVar2 + 0x58) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x58) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x40) == param_2) {
        lVar3 = *(long *)(param_2 + 0x48);
        *(long *)(lVar1 + 0x40) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x50) = lVar2;
          lVar3 = lVar2;
LAB_0016f2fe:
          if (*(long *)(lVar3 + 0x40) == lVar1) {
            *(long *)(lVar3 + 0x40) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x48) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x50) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x50);
          *(long *)(param_2 + 0x50) = lVar3;
          if (lVar3 != 0) goto LAB_0016f2fe;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x48) = lVar1;
        *(long *)(lVar1 + 0x50) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x58) = 0;
      lVar1 = *(long *)(lVar2 + 0x48);
      *(undefined4 *)(lVar2 + 0x58) = 1;
      lVar3 = *(long *)(lVar1 + 0x40);
      *(long *)(lVar2 + 0x48) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x50) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x50);
      *(long *)(lVar1 + 0x50) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x40) == lVar2) {
        *(long *)(lVar3 + 0x40) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x48) = lVar1;
      }
      *(long *)(lVar1 + 0x40) = lVar2;
      *(long *)(lVar2 + 0x50) = lVar1;
      goto LAB_0016f1d8;
    }
    *(undefined4 *)(lVar3 + 0x58) = 0;
    *(undefined4 *)(lVar1 + 0x58) = 0;
    *(undefined4 *)(lVar2 + 0x58) = 1;
    param_2 = lVar2;
  } while( true );
}



void winlinks_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_0016f4a5(param_1,param_2,param_3);
  return;
}



void FUN_0016f4a5(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x58) != 0)) goto LAB_0016f55b;
    if (*param_1 == param_3) goto joined_r0x0016f69e;
    lVar2 = *(long *)(param_2 + 0x40);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x58) == 1) {
        lVar1 = *(long *)(lVar2 + 0x48);
        *(undefined4 *)(lVar2 + 0x58) = 0;
        *(undefined4 *)(param_2 + 0x58) = 1;
        *(long *)(param_2 + 0x40) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x50) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x50);
        *(long *)(lVar2 + 0x50) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x50) + 0x40) == param_2) {
          *(long *)(lVar3 + 0x40) = lVar2;
          lVar1 = *(long *)(param_2 + 0x40);
        }
        else {
          *(long *)(lVar3 + 0x48) = lVar2;
        }
        *(long *)(lVar2 + 0x48) = param_2;
        *(long *)(param_2 + 0x50) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x40);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x58) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x48);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x58) == 0)) goto LAB_0016f494;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x58) != 0)) goto LAB_0016f642;
        lVar2 = *(long *)(lVar3 + 0x40);
        *(undefined4 *)(lVar3 + 0x58) = 0;
        *(undefined4 *)(lVar1 + 0x58) = 1;
        *(long *)(lVar1 + 0x48) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x50) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x50);
        *(long *)(lVar3 + 0x50) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x40) == lVar1) {
          *(long *)(lVar2 + 0x40) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x48) = lVar3;
        }
        *(long *)(lVar3 + 0x40) = lVar1;
        *(long *)(lVar1 + 0x50) = lVar3;
        lVar3 = *(long *)(param_2 + 0x40);
        lVar2 = *(long *)(lVar3 + 0x40);
        *(undefined4 *)(lVar3 + 0x58) = *(undefined4 *)(param_2 + 0x58);
        *(undefined4 *)(param_2 + 0x58) = 0;
        if (lVar2 != 0) goto LAB_0016f655;
      }
      else {
LAB_0016f642:
        lVar3 = *(long *)(param_2 + 0x40);
        *(undefined4 *)(lVar1 + 0x58) = *(undefined4 *)(param_2 + 0x58);
        *(undefined4 *)(param_2 + 0x58) = 0;
LAB_0016f655:
        *(undefined4 *)(lVar2 + 0x58) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x48);
      *(long *)(param_2 + 0x40) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x50) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x50);
      *(long *)(lVar3 + 0x50) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x50) + 0x40) == param_2) {
        *(long *)(lVar2 + 0x40) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x48) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x48) = param_2;
      *(long *)(param_2 + 0x50) = lVar3;
      goto joined_r0x0016f69e;
    }
    lVar2 = *(long *)(param_2 + 0x48);
    lVar3 = *(long *)(lVar2 + 0x40);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x58) == 1) {
      *(undefined4 *)(lVar2 + 0x58) = 0;
      *(undefined4 *)(param_2 + 0x58) = 1;
      *(long *)(param_2 + 0x48) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x50) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x50);
      *(long *)(lVar2 + 0x50) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x40) == param_2) {
        *(long *)(lVar4 + 0x40) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x48) = lVar2;
        lVar1 = *(long *)(param_2 + 0x48);
      }
      *(long *)(lVar2 + 0x40) = param_2;
      lVar3 = *(long *)(lVar1 + 0x40);
      *(long *)(param_2 + 0x50) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x58) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x48);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x58) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x48);
        *(undefined4 *)(lVar3 + 0x58) = 0;
        *(undefined4 *)(lVar1 + 0x58) = 1;
        *(long *)(lVar1 + 0x40) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x50) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x50);
        *(long *)(lVar3 + 0x50) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x40) == lVar1) {
          *(long *)(lVar2 + 0x40) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x48) = lVar3;
        }
        *(long *)(lVar3 + 0x48) = lVar1;
        lVar4 = *(long *)(param_2 + 0x48);
        *(long *)(lVar1 + 0x50) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x48);
        *(undefined4 *)(lVar4 + 0x58) = *(undefined4 *)(param_2 + 0x58);
        *(undefined4 *)(param_2 + 0x58) = 0;
        if (lVar2 != 0) goto LAB_0016f510;
        goto LAB_0016f517;
      }
LAB_0016f4ff:
      lVar4 = *(long *)(param_2 + 0x48);
      *(undefined4 *)(lVar1 + 0x58) = *(undefined4 *)(param_2 + 0x58);
      *(undefined4 *)(param_2 + 0x58) = 0;
LAB_0016f510:
      *(undefined4 *)(lVar2 + 0x58) = 0;
LAB_0016f517:
      lVar2 = *(long *)(lVar4 + 0x40);
      *(long *)(param_2 + 0x48) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x50) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x50);
      *(long *)(lVar4 + 0x50) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x40) == param_2) {
        *(long *)(lVar2 + 0x40) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x48) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x40) = param_2;
      *(long *)(param_2 + 0x50) = lVar4;
joined_r0x0016f69e:
      if (param_3 == 0) {
        return;
      }
LAB_0016f55b:
      *(undefined4 *)(param_3 + 0x58) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x48);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x58) != 0)) goto LAB_0016f4ff;
LAB_0016f494:
    *(undefined4 *)(lVar1 + 0x58) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x50);
  } while( true );
}



long winlinks_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x48);
  if (*(long *)(param_2 + 0x40) == 0) {
    lVar7 = *(long *)(param_2 + 0x50);
    iVar4 = *(int *)(param_2 + 0x58);
    if (lVar6 != 0) goto LAB_0016f8cc;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x40);
      } while (*(long *)(lVar5 + 0x40) != 0);
      lVar7 = *(long *)(lVar5 + 0x50);
      lVar6 = *(long *)(lVar5 + 0x48);
      iVar4 = *(int *)(lVar5 + 0x58);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x50) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x50);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x40) == lVar5) {
        *(long *)(lVar7 + 0x40) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x48) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x44);
      uVar2 = *(undefined4 *)(param_2 + 0x48);
      uVar3 = *(undefined4 *)(param_2 + 0x4c);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x40) = *(undefined4 *)(param_2 + 0x40);
      *(undefined4 *)(lVar5 + 0x44) = uVar1;
      *(undefined4 *)(lVar5 + 0x48) = uVar2;
      *(undefined4 *)(lVar5 + 0x4c) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x54);
      uVar2 = *(undefined4 *)(param_2 + 0x58);
      uVar3 = *(undefined4 *)(param_2 + 0x5c);
      *(undefined4 *)(lVar5 + 0x50) = *(undefined4 *)(param_2 + 0x50);
      *(undefined4 *)(lVar5 + 0x54) = uVar1;
      *(undefined4 *)(lVar5 + 0x58) = uVar2;
      *(undefined4 *)(lVar5 + 0x5c) = uVar3;
      lVar8 = *(long *)(param_2 + 0x50);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x40) == param_2) {
        *(long *)(lVar8 + 0x40) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x48) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x40) + 0x50) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x48) != 0) {
        *(long *)(*(long *)(param_2 + 0x48) + 0x50) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x50)) {
      }
      goto joined_r0x0016f8e1;
    }
    lVar7 = *(long *)(param_2 + 0x50);
    iVar4 = *(int *)(param_2 + 0x58);
    lVar6 = *(long *)(param_2 + 0x40);
LAB_0016f8cc:
    *(long *)(lVar6 + 0x50) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x40) == param_2) {
    *(long *)(lVar7 + 0x40) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x48) = lVar6;
  }
joined_r0x0016f8e1:
  if (iVar4 == 0) {
    winlinks_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



int * winlinks_RB_INSERT(int **param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  if (*param_1 == (int *)0x0) {
    *(undefined8 *)(param_2 + 0x14) = 0;
    *(undefined8 *)(param_2 + 0x12) = 0;
    *(undefined8 *)(param_2 + 0x10) = 0;
    param_2[0x16] = 1;
    *param_1 = param_2;
  }
  else {
    piVar1 = *param_1;
    do {
      piVar2 = piVar1;
      iVar3 = *param_2 - *piVar2;
      if (iVar3 < 0) {
        piVar1 = *(int **)(piVar2 + 0x10);
      }
      else {
        if (*param_2 == *piVar2) {
          return piVar2;
        }
        piVar1 = *(int **)(piVar2 + 0x12);
      }
    } while (piVar1 != (int *)0x0);
    *(int **)(param_2 + 0x14) = piVar2;
    *(undefined8 *)(param_2 + 0x12) = 0;
    *(undefined8 *)(param_2 + 0x10) = 0;
    param_2[0x16] = 1;
    if (iVar3 < 0) {
      *(int **)(piVar2 + 0x10) = param_2;
    }
    else {
      *(int **)(piVar2 + 0x12) = param_2;
    }
  }
  winlinks_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (int *)0x0;
}



void winlinks_RB_FIND(int **param_1,int *param_2)

{
  int *piVar1;
  
  piVar1 = *param_1;
  if (piVar1 != (int *)0x0) {
    do {
      while (-1 < *param_2 - *piVar1) {
        if (*param_2 == *piVar1) {
          return;
        }
        piVar1 = *(int **)(piVar1 + 0x12);
        if (piVar1 == (int *)0x0) {
          return;
        }
      }
      piVar1 = *(int **)(piVar1 + 0x10);
    } while (piVar1 != (int *)0x0);
  }
  return;
}



int * winlinks_RB_NFIND(int **param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  
  if (*param_1 == (int *)0x0) {
    piVar3 = (int *)0x0;
  }
  else {
    piVar1 = *param_1;
    piVar3 = (int *)0x0;
    do {
      while (piVar2 = piVar1, *param_2 - *piVar2 < 0) {
        piVar1 = *(int **)(piVar2 + 0x10);
        piVar3 = piVar2;
        if (*(int **)(piVar2 + 0x10) == (int *)0x0) {
          return piVar2;
        }
      }
      if (*param_2 == *piVar2) {
        return piVar2;
      }
      piVar1 = *(int **)(piVar2 + 0x12);
    } while (*(int **)(piVar2 + 0x12) != (int *)0x0);
  }
  return piVar3;
}



long winlinks_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x48);
  if (*(long *)(param_1 + 0x48) == 0) {
    lVar2 = *(long *)(param_1 + 0x50);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x40) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x48))) {
      while (lVar1 = *(long *)(lVar2 + 0x50), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x48);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x40);
    } while (*(long *)(lVar2 + 0x40) != 0);
  }
  return lVar2;
}



long winlinks_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x40);
  if (*(long *)(param_1 + 0x40) == 0) {
    lVar2 = *(long *)(param_1 + 0x50);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x48) != param_1)) &&
       (param_1 == *(long *)(lVar2 + 0x40))) {
      while (lVar1 = *(long *)(lVar2 + 0x50), lVar1 != 0) {
        bVar3 = lVar2 != *(long *)(lVar1 + 0x40);
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x48);
    } while (*(long *)(lVar2 + 0x48) != 0);
  }
  return lVar2;
}



long winlinks_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x48);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x40);
    }
  }
  return lVar2;
}



int winlink_cmp(int *param_1,int *param_2)

{
  return *param_1 - *param_2;
}



void window_pane_tree_RB_INSERT_COLOR(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
LAB_0016fb78:
  do {
    while( true ) {
      lVar1 = *(long *)(param_2 + 0x218);
      if ((lVar1 == 0) || (*(int *)(lVar1 + 0x220) != 1)) {
        *(undefined4 *)(*param_1 + 0x220) = 0;
        return;
      }
      lVar2 = *(long *)(lVar1 + 0x218);
      lVar3 = *(long *)(lVar2 + 0x208);
      if (lVar3 != lVar1) break;
      lVar3 = *(long *)(lVar2 + 0x210);
      if ((lVar3 == 0) || (*(int *)(lVar3 + 0x220) != 1)) {
        lVar4 = lVar1;
        lVar3 = lVar1;
        if (*(long *)(lVar1 + 0x210) == param_2) {
          lVar3 = *(long *)(param_2 + 0x208);
          *(long *)(lVar1 + 0x210) = lVar3;
          if (lVar3 == 0) {
            *(long *)(param_2 + 0x218) = lVar2;
            lVar3 = lVar2;
LAB_0016fe5a:
            *(long *)(lVar3 + 0x208) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x218) = lVar1;
            lVar3 = *(long *)(lVar1 + 0x218);
            *(long *)(param_2 + 0x218) = lVar3;
            if (lVar3 == 0) {
              *param_1 = param_2;
            }
            else {
              if (*(long *)(lVar3 + 0x208) == lVar1) goto LAB_0016fe5a;
              *(long *)(lVar3 + 0x210) = param_2;
            }
          }
          *(long *)(param_2 + 0x208) = lVar1;
          lVar3 = *(long *)(lVar2 + 0x208);
          *(long *)(lVar1 + 0x218) = param_2;
          lVar4 = param_2;
          param_2 = lVar1;
        }
        *(undefined4 *)(lVar4 + 0x220) = 0;
        lVar1 = *(long *)(lVar3 + 0x210);
        *(undefined4 *)(lVar2 + 0x220) = 1;
        *(long *)(lVar2 + 0x208) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x218) = lVar2;
        }
        lVar1 = *(long *)(lVar2 + 0x218);
        *(long *)(lVar3 + 0x218) = lVar1;
        if (lVar1 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar1 + 0x208) == lVar2) {
          *(long *)(lVar1 + 0x208) = lVar3;
        }
        else {
          *(long *)(lVar1 + 0x210) = lVar3;
        }
        *(long *)(lVar3 + 0x210) = lVar2;
        *(long *)(lVar2 + 0x218) = lVar3;
      }
      else {
        *(undefined4 *)(lVar3 + 0x220) = 0;
        *(undefined4 *)(lVar1 + 0x220) = 0;
        *(undefined4 *)(lVar2 + 0x220) = 1;
        param_2 = lVar2;
      }
    }
    if ((lVar3 == 0) || (*(int *)(lVar3 + 0x220) != 1)) {
      lVar3 = lVar1;
      if (*(long *)(lVar1 + 0x208) == param_2) {
        lVar3 = *(long *)(param_2 + 0x210);
        *(long *)(lVar1 + 0x208) = lVar3;
        if (lVar3 == 0) {
          *(long *)(param_2 + 0x218) = lVar2;
          lVar3 = lVar2;
LAB_0016fd0d:
          if (*(long *)(lVar3 + 0x208) == lVar1) {
            *(long *)(lVar3 + 0x208) = param_2;
          }
          else {
            *(long *)(lVar3 + 0x210) = param_2;
          }
        }
        else {
          *(long *)(lVar3 + 0x218) = lVar1;
          lVar3 = *(long *)(lVar1 + 0x218);
          *(long *)(param_2 + 0x218) = lVar3;
          if (lVar3 != 0) goto LAB_0016fd0d;
          *param_1 = param_2;
        }
        *(long *)(param_2 + 0x210) = lVar1;
        *(long *)(lVar1 + 0x218) = param_2;
        lVar3 = param_2;
        param_2 = lVar1;
      }
      *(undefined4 *)(lVar3 + 0x220) = 0;
      lVar1 = *(long *)(lVar2 + 0x210);
      *(undefined4 *)(lVar2 + 0x220) = 1;
      lVar3 = *(long *)(lVar1 + 0x208);
      *(long *)(lVar2 + 0x210) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x218) = lVar2;
      }
      lVar3 = *(long *)(lVar2 + 0x218);
      *(long *)(lVar1 + 0x218) = lVar3;
      if (lVar3 == 0) {
        *param_1 = lVar1;
      }
      else if (*(long *)(lVar3 + 0x208) == lVar2) {
        *(long *)(lVar3 + 0x208) = lVar1;
      }
      else {
        *(long *)(lVar3 + 0x210) = lVar1;
      }
      *(long *)(lVar1 + 0x208) = lVar2;
      *(long *)(lVar2 + 0x218) = lVar1;
      goto LAB_0016fb78;
    }
    *(undefined4 *)(lVar3 + 0x220) = 0;
    *(undefined4 *)(lVar1 + 0x220) = 0;
    *(undefined4 *)(lVar2 + 0x220) = 1;
    param_2 = lVar2;
  } while( true );
}



void window_pane_tree_RB_REMOVE_COLOR(long *param_1,long param_2,long param_3)

{
  FUN_0016ff2a(param_1,param_2,param_3);
  return;
}



void FUN_0016ff2a(long *param_1,long param_2,long param_3)

{
  long lVar1;
  long lVar2;
  long lVar3;
  long lVar4;
  
  do {
    if ((param_3 != 0) && (*(int *)(param_3 + 0x220) != 0)) goto LAB_0017002e;
    if (*param_1 == param_3) goto joined_r0x00170215;
    lVar2 = *(long *)(param_2 + 0x208);
    if (lVar2 != param_3) {
      lVar1 = lVar2;
      if (*(int *)(lVar2 + 0x220) == 1) {
        lVar1 = *(long *)(lVar2 + 0x210);
        *(undefined4 *)(lVar2 + 0x220) = 0;
        *(undefined4 *)(param_2 + 0x220) = 1;
        *(long *)(param_2 + 0x208) = lVar1;
        if (lVar1 != 0) {
          *(long *)(lVar1 + 0x218) = param_2;
        }
        lVar3 = *(long *)(param_2 + 0x218);
        *(long *)(lVar2 + 0x218) = lVar3;
        if (lVar3 == 0) {
          *param_1 = lVar2;
        }
        else if (*(long *)(*(long *)(param_2 + 0x218) + 0x208) == param_2) {
          *(long *)(lVar3 + 0x208) = lVar2;
          lVar1 = *(long *)(param_2 + 0x208);
        }
        else {
          *(long *)(lVar3 + 0x210) = lVar2;
        }
        *(long *)(lVar2 + 0x210) = param_2;
        *(long *)(param_2 + 0x218) = lVar2;
      }
      lVar2 = *(long *)(lVar1 + 0x208);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x220) == 0)) {
        lVar3 = *(long *)(lVar1 + 0x210);
        if ((lVar3 == 0) || (*(int *)(lVar3 + 0x220) == 0)) goto LAB_0016ff13;
        if ((lVar2 != 0) && (*(int *)(lVar2 + 0x220) != 0)) goto LAB_0017018c;
        lVar2 = *(long *)(lVar3 + 0x208);
        *(undefined4 *)(lVar3 + 0x220) = 0;
        *(undefined4 *)(lVar1 + 0x220) = 1;
        *(long *)(lVar1 + 0x210) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x218) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x218);
        *(long *)(lVar3 + 0x218) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x208) == lVar1) {
          *(long *)(lVar2 + 0x208) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x210) = lVar3;
        }
        *(long *)(lVar3 + 0x208) = lVar1;
        *(long *)(lVar1 + 0x218) = lVar3;
        lVar3 = *(long *)(param_2 + 0x208);
        lVar2 = *(long *)(lVar3 + 0x208);
        *(undefined4 *)(lVar3 + 0x220) = *(undefined4 *)(param_2 + 0x220);
        *(undefined4 *)(param_2 + 0x220) = 0;
        if (lVar2 != 0) goto LAB_001701ab;
      }
      else {
LAB_0017018c:
        lVar3 = *(long *)(param_2 + 0x208);
        *(undefined4 *)(lVar1 + 0x220) = *(undefined4 *)(param_2 + 0x220);
        *(undefined4 *)(param_2 + 0x220) = 0;
LAB_001701ab:
        *(undefined4 *)(lVar2 + 0x220) = 0;
      }
      lVar2 = *(long *)(lVar3 + 0x210);
      *(long *)(param_2 + 0x208) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x218) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x218);
      *(long *)(lVar3 + 0x218) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar3;
        param_3 = lVar3;
      }
      else if (*(long *)(*(long *)(param_2 + 0x218) + 0x208) == param_2) {
        *(long *)(lVar2 + 0x208) = lVar3;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x210) = lVar3;
        param_3 = *param_1;
      }
      *(long *)(lVar3 + 0x210) = param_2;
      *(long *)(param_2 + 0x218) = lVar3;
      goto joined_r0x00170215;
    }
    lVar2 = *(long *)(param_2 + 0x210);
    lVar3 = *(long *)(lVar2 + 0x208);
    lVar1 = lVar2;
    if (*(int *)(lVar2 + 0x220) == 1) {
      *(undefined4 *)(lVar2 + 0x220) = 0;
      *(undefined4 *)(param_2 + 0x220) = 1;
      *(long *)(param_2 + 0x210) = lVar3;
      if (lVar3 != 0) {
        *(long *)(lVar3 + 0x218) = param_2;
      }
      lVar4 = *(long *)(param_2 + 0x218);
      *(long *)(lVar2 + 0x218) = lVar4;
      lVar1 = lVar3;
      if (lVar4 == 0) {
        *param_1 = lVar2;
      }
      else if (*(long *)(lVar4 + 0x208) == param_2) {
        *(long *)(lVar4 + 0x208) = lVar2;
      }
      else {
        *(long *)(lVar4 + 0x210) = lVar2;
        lVar1 = *(long *)(param_2 + 0x210);
      }
      *(long *)(lVar2 + 0x208) = param_2;
      lVar3 = *(long *)(lVar1 + 0x208);
      *(long *)(param_2 + 0x218) = lVar2;
    }
    if ((lVar3 != 0) && (*(int *)(lVar3 + 0x220) != 0)) {
      lVar2 = *(long *)(lVar1 + 0x210);
      if ((lVar2 == 0) || (*(int *)(lVar2 + 0x220) == 0)) {
        lVar2 = *(long *)(lVar3 + 0x210);
        *(undefined4 *)(lVar3 + 0x220) = 0;
        *(undefined4 *)(lVar1 + 0x220) = 1;
        *(long *)(lVar1 + 0x208) = lVar2;
        if (lVar2 != 0) {
          *(long *)(lVar2 + 0x218) = lVar1;
        }
        lVar2 = *(long *)(lVar1 + 0x218);
        *(long *)(lVar3 + 0x218) = lVar2;
        if (lVar2 == 0) {
          *param_1 = lVar3;
        }
        else if (*(long *)(lVar2 + 0x208) == lVar1) {
          *(long *)(lVar2 + 0x208) = lVar3;
        }
        else {
          *(long *)(lVar2 + 0x210) = lVar3;
        }
        *(long *)(lVar3 + 0x210) = lVar1;
        lVar4 = *(long *)(param_2 + 0x210);
        *(long *)(lVar1 + 0x218) = lVar3;
        lVar2 = *(long *)(lVar4 + 0x210);
        *(undefined4 *)(lVar4 + 0x220) = *(undefined4 *)(param_2 + 0x220);
        *(undefined4 *)(param_2 + 0x220) = 0;
        if (lVar2 != 0) goto LAB_0016ffc5;
        goto LAB_0016ffcf;
      }
LAB_0016ffa8:
      lVar4 = *(long *)(param_2 + 0x210);
      *(undefined4 *)(lVar1 + 0x220) = *(undefined4 *)(param_2 + 0x220);
      *(undefined4 *)(param_2 + 0x220) = 0;
LAB_0016ffc5:
      *(undefined4 *)(lVar2 + 0x220) = 0;
LAB_0016ffcf:
      lVar2 = *(long *)(lVar4 + 0x208);
      *(long *)(param_2 + 0x210) = lVar2;
      if (lVar2 != 0) {
        *(long *)(lVar2 + 0x218) = param_2;
      }
      lVar2 = *(long *)(param_2 + 0x218);
      *(long *)(lVar4 + 0x218) = lVar2;
      if (lVar2 == 0) {
        *param_1 = lVar4;
        param_3 = lVar4;
      }
      else if (*(long *)(lVar2 + 0x208) == param_2) {
        *(long *)(lVar2 + 0x208) = lVar4;
        param_3 = *param_1;
      }
      else {
        *(long *)(lVar2 + 0x210) = lVar4;
        param_3 = *param_1;
      }
      *(long *)(lVar4 + 0x208) = param_2;
      *(long *)(param_2 + 0x218) = lVar4;
joined_r0x00170215:
      if (param_3 == 0) {
        return;
      }
LAB_0017002e:
      *(undefined4 *)(param_3 + 0x220) = 0;
      return;
    }
    lVar2 = *(long *)(lVar1 + 0x210);
    if ((lVar2 != 0) && (*(int *)(lVar2 + 0x220) != 0)) goto LAB_0016ffa8;
LAB_0016ff13:
    *(undefined4 *)(lVar1 + 0x220) = 1;
    param_3 = param_2;
    param_2 = *(long *)(param_2 + 0x218);
  } while( true );
}



long window_pane_tree_RB_REMOVE(long *param_1,long param_2)

{
  undefined4 uVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int iVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long lVar8;
  
  lVar6 = *(long *)(param_2 + 0x210);
  if (*(long *)(param_2 + 0x208) == 0) {
    lVar7 = *(long *)(param_2 + 0x218);
    iVar4 = *(int *)(param_2 + 0x220);
    if (lVar6 != 0) goto LAB_00170502;
  }
  else {
    if (lVar6 != 0) {
      do {
        lVar5 = lVar6;
        lVar6 = *(long *)(lVar5 + 0x208);
      } while (*(long *)(lVar5 + 0x208) != 0);
      lVar7 = *(long *)(lVar5 + 0x218);
      lVar6 = *(long *)(lVar5 + 0x210);
      iVar4 = *(int *)(lVar5 + 0x220);
      lVar8 = lVar7;
      if (lVar6 != 0) {
        *(long *)(lVar6 + 0x218) = lVar7;
        lVar8 = *(long *)(lVar5 + 0x218);
      }
      if (lVar7 == 0) {
        *param_1 = lVar6;
      }
      else if (*(long *)(lVar7 + 0x208) == lVar5) {
        *(long *)(lVar7 + 0x208) = lVar6;
      }
      else {
        *(long *)(lVar7 + 0x210) = lVar6;
      }
      uVar1 = *(undefined4 *)(param_2 + 0x20c);
      uVar2 = *(undefined4 *)(param_2 + 0x210);
      uVar3 = *(undefined4 *)(param_2 + 0x214);
      if (lVar8 == param_2) {
        lVar7 = lVar5;
      }
      *(undefined4 *)(lVar5 + 0x208) = *(undefined4 *)(param_2 + 0x208);
      *(undefined4 *)(lVar5 + 0x20c) = uVar1;
      *(undefined4 *)(lVar5 + 0x210) = uVar2;
      *(undefined4 *)(lVar5 + 0x214) = uVar3;
      uVar1 = *(undefined4 *)(param_2 + 0x21c);
      uVar2 = *(undefined4 *)(param_2 + 0x220);
      uVar3 = *(undefined4 *)(param_2 + 0x224);
      *(undefined4 *)(lVar5 + 0x218) = *(undefined4 *)(param_2 + 0x218);
      *(undefined4 *)(lVar5 + 0x21c) = uVar1;
      *(undefined4 *)(lVar5 + 0x220) = uVar2;
      *(undefined4 *)(lVar5 + 0x224) = uVar3;
      lVar8 = *(long *)(param_2 + 0x218);
      if (lVar8 == 0) {
        *param_1 = lVar5;
      }
      else if (*(long *)(lVar8 + 0x208) == param_2) {
        *(long *)(lVar8 + 0x208) = lVar5;
      }
      else {
        *(long *)(lVar8 + 0x210) = lVar5;
      }
      *(long *)(*(long *)(param_2 + 0x208) + 0x218) = lVar5;
      lVar8 = lVar7;
      if (*(long *)(param_2 + 0x210) != 0) {
        *(long *)(*(long *)(param_2 + 0x210) + 0x218) = lVar5;
      }
      for (; lVar8 != 0; lVar8 = *(long *)(lVar8 + 0x218)) {
      }
      goto joined_r0x00170520;
    }
    lVar7 = *(long *)(param_2 + 0x218);
    iVar4 = *(int *)(param_2 + 0x220);
    lVar6 = *(long *)(param_2 + 0x208);
LAB_00170502:
    *(long *)(lVar6 + 0x218) = lVar7;
  }
  if (lVar7 == 0) {
    *param_1 = lVar6;
  }
  else if (*(long *)(lVar7 + 0x208) == param_2) {
    *(long *)(lVar7 + 0x208) = lVar6;
  }
  else {
    *(long *)(lVar7 + 0x210) = lVar6;
  }
joined_r0x00170520:
  if (iVar4 == 0) {
    window_pane_tree_RB_REMOVE_COLOR(param_1,lVar7,lVar6);
    return param_2;
  }
  return param_2;
}



int * window_pane_tree_RB_INSERT(int **param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  
  if (*param_1 == (int *)0x0) {
    *(undefined8 *)(param_2 + 0x86) = 0;
    *(undefined8 *)(param_2 + 0x84) = 0;
    *(undefined8 *)(param_2 + 0x82) = 0;
    param_2[0x88] = 1;
    *param_1 = param_2;
  }
  else {
    piVar1 = *param_1;
    do {
      piVar2 = piVar1;
      iVar3 = *param_2 - *piVar2;
      if (iVar3 < 0) {
        piVar1 = *(int **)(piVar2 + 0x82);
      }
      else {
        if (*param_2 == *piVar2) {
          return piVar2;
        }
        piVar1 = *(int **)(piVar2 + 0x84);
      }
    } while (piVar1 != (int *)0x0);
    *(int **)(param_2 + 0x86) = piVar2;
    *(undefined8 *)(param_2 + 0x84) = 0;
    *(undefined8 *)(param_2 + 0x82) = 0;
    param_2[0x88] = 1;
    if (iVar3 < 0) {
      *(int **)(piVar2 + 0x82) = param_2;
    }
    else {
      *(int **)(piVar2 + 0x84) = param_2;
    }
  }
  window_pane_tree_RB_INSERT_COLOR((long *)param_1,(long)param_2);
  return (int *)0x0;
}



void window_pane_tree_RB_FIND(int **param_1,int *param_2)

{
  int *piVar1;
  
  piVar1 = *param_1;
  if (piVar1 != (int *)0x0) {
    do {
      while (-1 < *param_2 - *piVar1) {
        if (*param_2 == *piVar1) {
          return;
        }
        piVar1 = *(int **)(piVar1 + 0x84);
        if (piVar1 == (int *)0x0) {
          return;
        }
      }
      piVar1 = *(int **)(piVar1 + 0x82);
    } while (piVar1 != (int *)0x0);
  }
  return;
}



int * window_pane_tree_RB_NFIND(int **param_1,int *param_2)

{
  int *piVar1;
  int *piVar2;
  int *piVar3;
  
  if (*param_1 == (int *)0x0) {
    piVar3 = (int *)0x0;
  }
  else {
    piVar1 = *param_1;
    piVar3 = (int *)0x0;
    do {
      while (piVar2 = piVar1, *param_2 - *piVar2 < 0) {
        piVar1 = *(int **)(piVar2 + 0x82);
        piVar3 = piVar2;
        if (*(int **)(piVar2 + 0x82) == (int *)0x0) {
          return piVar2;
        }
      }
      if (*param_2 == *piVar2) {
        return piVar2;
      }
      piVar1 = *(int **)(piVar2 + 0x84);
    } while (*(int **)(piVar2 + 0x84) != (int *)0x0);
  }
  return piVar3;
}



long window_pane_tree_RB_NEXT(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x210);
  if (*(long *)(param_1 + 0x210) == 0) {
    lVar2 = *(long *)(param_1 + 0x218);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x208) != param_1)) &&
       (*(long *)(lVar2 + 0x210) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x218), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x210) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x208);
    } while (*(long *)(lVar2 + 0x208) != 0);
  }
  return lVar2;
}



long window_pane_tree_RB_PREV(long param_1)

{
  long lVar1;
  long lVar2;
  bool bVar3;
  
  lVar1 = *(long *)(param_1 + 0x208);
  if (*(long *)(param_1 + 0x208) == 0) {
    lVar2 = *(long *)(param_1 + 0x218);
    if (((lVar2 != 0) && (*(long *)(lVar2 + 0x210) != param_1)) &&
       (*(long *)(lVar2 + 0x208) == param_1)) {
      while (lVar1 = *(long *)(lVar2 + 0x218), lVar1 != 0) {
        bVar3 = *(long *)(lVar1 + 0x208) != lVar2;
        lVar2 = lVar1;
        if (bVar3) {
          return lVar1;
        }
      }
      lVar2 = 0;
    }
  }
  else {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x210);
    } while (*(long *)(lVar2 + 0x210) != 0);
  }
  return lVar2;
}



long window_pane_tree_RB_MINMAX(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar3 = *param_1;
  lVar2 = *param_1;
  while (lVar1 = lVar3, lVar1 != 0) {
    lVar3 = *(long *)(lVar1 + 0x210);
    lVar2 = lVar1;
    if (param_2 < 0) {
      lVar3 = *(long *)(lVar1 + 0x208);
    }
  }
  return lVar2;
}



int window_pane_cmp(int *param_1,int *param_2)

{
  return *param_1 - *param_2;
}



long winlink_find_by_window(long *param_1,long param_2)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *param_1;
  if (*param_1 == 0) {
    return 0;
  }
  do {
    lVar2 = lVar1;
    lVar1 = *(long *)(lVar2 + 0x40);
  } while (*(long *)(lVar2 + 0x40) != 0);
  if (*(long *)(lVar2 + 8) != param_2) {
    do {
      lVar2 = winlinks_RB_NEXT(lVar2);
      if (lVar2 == 0) {
        return 0;
      }
    } while (*(long *)(lVar2 + 8) != param_2);
  }
  return lVar2;
}



void winlink_find_by_index
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               int **param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  undefined1 in_AL;
  int *piVar1;
  int iVar2;
  
  iVar2 = (int)param_10;
  if (iVar2 < 0) {
                    // WARNING: Subroutine does not return
    fatalx(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad index",param_10,
           param_11,param_12,param_13,param_14,in_AL);
  }
  piVar1 = *param_9;
  do {
    if (piVar1 == (int *)0x0) {
      return;
    }
    while (-1 < iVar2 - *piVar1) {
      if (iVar2 == *piVar1) {
        return;
      }
      piVar1 = *(int **)(piVar1 + 0x12);
      if (piVar1 == (int *)0x0) {
        return;
      }
    }
    piVar1 = *(int **)(piVar1 + 0x10);
  } while( true );
}



long winlink_find_by_window_id(long *param_1,int param_2)

{
  long lVar1;
  long lVar2;
  
  lVar1 = *param_1;
  if (*param_1 == 0) {
    return 0;
  }
  do {
    lVar2 = lVar1;
    lVar1 = *(long *)(lVar2 + 0x40);
  } while (*(long *)(lVar2 + 0x40) != 0);
  if (**(int **)(lVar2 + 8) != param_2) {
    do {
      lVar2 = winlinks_RB_NEXT(lVar2);
      if (lVar2 == 0) {
        return 0;
      }
    } while (**(int **)(lVar2 + 8) != param_2);
  }
  return lVar2;
}



ulong winlink_next_index(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,int **param_9,uint param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  bool bVar2;
  undefined4 extraout_XMM0_Da;
  undefined auVar3 [16];
  
  uVar1 = param_10;
  do {
    auVar3 = winlink_find_by_index
                       (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        (ulong)uVar1,param_11,param_12,param_13,param_14);
    param_11 = auVar3._8_8_;
    if (auVar3._0_8_ == 0) {
      return (ulong)uVar1;
    }
    bVar2 = uVar1 == 0x7fffffff;
    uVar1 = uVar1 + 1;
    if (bVar2) {
      uVar1 = 0;
    }
    param_1 = extraout_XMM0_Da;
  } while (uVar1 != param_10);
  return 0xffffffff;
}



ulong winlink_count(long *param_1)

{
  long lVar1;
  long lVar2;
  ulong uVar3;
  
  lVar1 = *param_1;
  if (*param_1 != 0) {
    do {
      lVar2 = lVar1;
      lVar1 = *(long *)(lVar2 + 0x40);
    } while (*(long *)(lVar2 + 0x40) != 0);
    uVar3 = 0;
    do {
      uVar3 = (ulong)((int)uVar3 + 1);
      lVar2 = winlinks_RB_NEXT(lVar2);
    } while (lVar2 != 0);
    return uVar3 & 0xffffffff;
  }
  return 0;
}



uint * winlink_add(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  int **param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  uint *puVar2;
  undefined8 uVar3;
  uint uVar4;
  uint uVar5;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  undefined4 extraout_XMM0_Da_00;
  undefined auVar7 [16];
  
  auVar7._8_8_ = param_11;
  auVar7._0_8_ = param_14;
  uVar5 = (uint)param_10;
  if ((int)uVar5 < 0) {
    uVar4 = ~uVar5;
    uVar5 = uVar4;
    while( true ) {
      auVar7 = winlink_find_by_index
                         (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                          (ulong)uVar5,auVar7._8_8_,param_12,param_13,auVar7._0_8_);
      uVar3 = auVar7._8_8_;
      if (auVar7._0_8_ == 0) break;
      uVar1 = uVar5 + 1;
      if (uVar5 == 0x7fffffff) {
        uVar1 = 0;
      }
      param_1 = extraout_XMM0_Da;
      uVar5 = uVar1;
      if (uVar4 == uVar1) {
        return (uint *)0x0;
      }
    }
    uVar6 = extraout_XMM0_Da;
    if (uVar5 == 0xffffffff) {
      return (uint *)0x0;
    }
  }
  else {
    auVar7 = winlink_find_by_index
                       (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                        param_10,param_11,param_12,param_13,param_14);
    uVar3 = auVar7._8_8_;
    uVar6 = extraout_XMM0_Da_00;
    if (auVar7._0_8_ != 0) {
      return (uint *)0x0;
    }
  }
  puVar2 = (uint *)xcalloc(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x70,
                           uVar3,param_12,param_13,0);
  *puVar2 = uVar5;
  winlinks_RB_INSERT(param_9,(int *)puVar2);
  return puVar2;
}



void winlink_set_window(long param_1,long param_2)

{
  *(long *)(param_1 + 8) = param_2;
  *(int *)(param_2 + 400) = *(int *)(param_2 + 400) + 1;
  return;
}



long winlink_next(long param_1)

{
  long lVar1;
  
  lVar1 = winlinks_RB_NEXT(param_1);
  return lVar1;
}



long winlink_previous(long param_1)

{
  long lVar1;
  
  lVar1 = winlinks_RB_PREV(param_1);
  return lVar1;
}



long winlink_next_by_number(long param_1,long param_2,int param_3)

{
  long lVar1;
  int extraout_EDX;
  
  if (0 < param_3) {
    do {
      while ((param_1 = winlinks_RB_NEXT(param_1), param_1 == 0 &&
             (lVar1 = *(long *)(param_2 + 0xf8), *(long *)(param_2 + 0xf8) != 0))) {
        do {
          param_1 = lVar1;
          lVar1 = *(long *)(param_1 + 0x40);
        } while (*(long *)(param_1 + 0x40) != 0);
        if (extraout_EDX == 1) {
          return param_1;
        }
      }
    } while (extraout_EDX != 1);
  }
  return param_1;
}



long winlink_previous_by_number(long param_1,long param_2,int param_3)

{
  long lVar1;
  int extraout_EDX;
  
  if (0 < param_3) {
    do {
      while ((param_1 = winlinks_RB_PREV(param_1), param_1 == 0 &&
             (lVar1 = *(long *)(param_2 + 0xf8), *(long *)(param_2 + 0xf8) != 0))) {
        do {
          param_1 = lVar1;
          lVar1 = *(long *)(param_1 + 0x48);
        } while (*(long *)(param_1 + 0x48) != 0);
        if (extraout_EDX == 1) {
          return param_1;
        }
      }
    } while (extraout_EDX != 1);
  }
  return param_1;
}



void winlink_stack_remove(long *param_1,long param_2)

{
  long lVar1;
  undefined8 *puVar2;
  
  if (param_2 != 0) {
    for (lVar1 = *param_1; lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x60)) {
      if (param_2 == lVar1) {
        lVar1 = *(long *)(param_2 + 0x60);
        puVar2 = *(undefined8 **)(param_2 + 0x68);
        if (lVar1 != 0) {
          *(undefined8 **)(lVar1 + 0x68) = puVar2;
          **(long **)(param_2 + 0x68) = lVar1;
          return;
        }
        param_1[1] = (long)puVar2;
        *puVar2 = 0;
        return;
      }
    }
  }
  return;
}



void winlink_stack_push(long *param_1,long param_2)

{
  long lVar1;
  
  if (param_2 != 0) {
    winlink_stack_remove(param_1,param_2);
    lVar1 = *param_1;
    *(long *)(param_2 + 0x60) = lVar1;
    if (lVar1 == 0) {
      param_1[1] = param_2 + 0x60;
    }
    else {
      *(long *)(lVar1 + 0x68) = param_2 + 0x60;
    }
    *param_1 = param_2;
    *(long **)(param_2 + 0x68) = param_1;
  }
  return;
}



int * window_find_by_id_str(char *param_1)

{
  longlong lVar1;
  int *piVar2;
  long in_FS_OFFSET;
  char *local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*param_1 == '@') &&
     (lVar1 = strtonum(param_1 + 1,0,0xffffffff,&local_18), piVar2 = windows,
     local_18 == (char *)0x0)) {
    for (; piVar2 != (int *)0x0; piVar2 = *(int **)(piVar2 + 0x66)) {
      while (-1 < (int)lVar1 - *piVar2) {
        if ((int)lVar1 == *piVar2) goto LAB_00170c22;
        piVar2 = *(int **)(piVar2 + 0x68);
        if (piVar2 == (int *)0x0) goto LAB_00170c20;
      }
    }
  }
LAB_00170c20:
  piVar2 = (int *)0x0;
LAB_00170c22:
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return piVar2;
}



void window_find_by_id(int param_1)

{
  int *piVar1;
  
  piVar1 = windows;
  do {
    if (piVar1 == (int *)0x0) {
      return;
    }
    while (-1 < param_1 - *piVar1) {
      if (param_1 == *piVar1) {
        return;
      }
      piVar1 = *(int **)(piVar1 + 0x68);
      if (piVar1 == (int *)0x0) {
        return;
      }
    }
    piVar1 = *(int **)(piVar1 + 0x66);
  } while( true );
}



void window_update_activity
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               uint *param_13,undefined8 param_14)

{
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  gettimeofday((timeval *)(param_9 + 0x48),(__timezone_ptr_t)0x0);
  alerts_queue(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,2,
               extraout_RDX,param_12,param_13,param_14);
  return;
}



uint * window_create1(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                     undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                     uint param_9,uint param_10,undefined8 param_11,undefined8 param_12,
                     uint *param_13,undefined8 param_14)

{
  int iVar1;
  uint *puVar2;
  undefined8 uVar3;
  undefined8 extraout_RDX;
  undefined8 uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined auVar5 [16];
  
  uVar4 = 0x1b8;
  auVar5 = xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x1b8,param_11,
                   param_12,param_13,param_14);
  uVar3 = global_w_options;
  puVar2 = auVar5._0_8_;
  *(undefined8 *)(puVar2 + 2) = 0;
  puVar2[0x60] = 0;
  *(undefined8 *)(puVar2 + 0x52) = 0;
  puVar2[0x5e] = param_9;
  puVar2[0x5f] = param_10;
  *(uint **)(puVar2 + 0x54) = puVar2 + 0x52;
  *(undefined8 *)(puVar2 + 0x4e) = 0;
  *(undefined8 *)(puVar2 + 0x4c) = 0;
  puVar2[0x56] = 0xffffffff;
  *(undefined8 *)(puVar2 + 0x58) = 0;
  uVar3 = options_create(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         uVar3,uVar4,auVar5._8_8_,param_12,param_13,param_14);
  puVar2[100] = 0;
  *(undefined8 *)(puVar2 + 0x62) = uVar3;
  iVar1 = next_window_id + 1;
  *puVar2 = next_window_id;
  next_window_id = iVar1;
  windows_RB_INSERT((int **)&windows,(int *)puVar2);
  gettimeofday((timeval *)(puVar2 + 0x48),(__timezone_ptr_t)0x0);
  alerts_queue(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,param_5,
               param_6,param_7,param_8,puVar2,2,extraout_RDX,param_12,param_13,param_14);
  return puVar2;
}



void window_set_name(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    uint *param_9,char *param_10,undefined8 param_11,undefined8 param_12,
                    undefined8 param_13,undefined8 param_14)

{
  char *__s1;
  int iVar1;
  undefined4 extraout_EAX;
  undefined4 extraout_var;
  undefined8 extraout_RDX;
  char *pcVar2;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar3;
  undefined4 extraout_XMM0_Db;
  
  __s1 = *(char **)(param_9 + 2);
  pcVar2 = param_10;
  iVar1 = strcmp(__s1,param_10);
  if (iVar1 == 0) {
    return;
  }
  free(__s1);
  uVar3 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,
                  param_6,param_7,param_8,param_10,pcVar2,extraout_RDX,param_12,param_13,param_14);
  *(ulong *)(param_9 + 2) = CONCAT44(extraout_var,extraout_EAX);
  notify_window_renamed(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
  tmate_sync_layout();
  return;
}



void window_resize(long param_1,undefined4 param_2,undefined4 param_3)

{
  *(undefined4 *)(param_1 + 0x178) = param_2;
  *(undefined4 *)(param_1 + 0x17c) = param_3;
  return;
}



long window_has_pane(long param_1,long param_2)

{
  long lVar1;
  
  lVar1 = *(long *)(param_1 + 0x148);
  if (lVar1 == 0) {
    return 0;
  }
  do {
    if (lVar1 == param_2) {
      return 1;
    }
    lVar1 = *(long *)(lVar1 + 0x1f8);
  } while (lVar1 != 0);
  return lVar1;
}



undefined8 window_set_active_pane(long param_1,long param_2)

{
  undefined8 uVar1;
  
  if (*(long *)(param_1 + 0x138) != param_2) {
    *(long *)(param_1 + 0x140) = *(long *)(param_1 + 0x138);
    *(long *)(param_1 + 0x138) = param_2;
    uVar1 = FUN_0016e490(param_1,param_2);
    return uVar1;
  }
  return 0;
}



void window_redraw_active_switch
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  uint *puVar1;
  bool bVar2;
  char **ppcVar3;
  char **ppcVar4;
  undefined7 extraout_var;
  undefined7 extraout_var_00;
  undefined7 extraout_var_01;
  undefined8 extraout_RDX;
  undefined8 extraout_XMM0_Qa;
  
  if (*(long *)(param_9 + 0x138) == param_10) {
    return;
  }
  ppcVar3 = options_get_style(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(param_9 + 0x188),"window-active-style",param_11,param_12,
                              param_13,param_14);
  ppcVar4 = options_get_style(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,
                              param_8,*(char ***)(param_9 + 0x188),"window-style",extraout_RDX,
                              param_12,param_13,param_14);
  bVar2 = style_equal((byte *)ppcVar3,(byte *)ppcVar4);
  if ((int)CONCAT71(extraout_var,bVar2) == 0) {
    bVar2 = style_equal(grid_default_cell,(byte *)(*(long *)(param_9 + 0x138) + 0x110));
    if ((int)CONCAT71(extraout_var_00,bVar2) != 0) {
      puVar1 = (uint *)(*(long *)(param_9 + 0x138) + 0x30);
      *puVar1 = *puVar1 | 1;
    }
    bVar2 = style_equal(grid_default_cell,(byte *)(param_10 + 0x110));
    if ((int)CONCAT71(extraout_var_01,bVar2) != 0) {
      *(uint *)(param_10 + 0x30) = *(uint *)(param_10 + 0x30) | 1;
      return;
    }
  }
  return;
}



void window_get_active_at(long param_1,uint param_2,uint param_3)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  long lVar4;
  uint uVar5;
  uint uVar6;
  
  lVar4 = *(long *)(param_1 + 0x148);
  do {
    if (lVar4 == 0) {
      return;
    }
    if (*(long *)(lVar4 + 0x10) != 0) {
      uVar1 = *(uint *)(lVar4 + 0x28);
      uVar5 = *(uint *)(*(long *)(lVar4 + 8) + 0x178);
      if (uVar1 < uVar5) {
        uVar2 = *(uint *)(lVar4 + 0x2c);
        uVar3 = *(uint *)(*(long *)(lVar4 + 8) + 0x17c);
        if ((((uVar2 < uVar3) && (uVar6 = *(int *)(lVar4 + 0x20) + uVar1, uVar6 <= uVar5)) &&
            (uVar5 = *(int *)(lVar4 + 0x24) + uVar2,
            ((uVar1 <= param_2 && uVar2 <= param_3) && uVar5 <= uVar3) && param_2 <= uVar6)) &&
           (param_3 <= uVar5)) {
          return;
        }
      }
    }
    lVar4 = *(long *)(lVar4 + 0x1f8);
  } while( true );
}



undefined8 window_find_string(long param_1,char *param_2)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  undefined8 uVar4;
  uint uVar5;
  uint uVar6;
  
  uVar1 = *(uint *)(param_1 + 0x178);
  uVar2 = *(uint *)(param_1 + 0x17c);
  uVar6 = uVar1 >> 1;
  uVar5 = uVar2 >> 1;
  iVar3 = strcasecmp(param_2,"top");
  if (iVar3 == 0) {
    uVar5 = 0;
    goto LAB_0017104f;
  }
  iVar3 = strcasecmp(param_2,"bottom");
  if (iVar3 == 0) {
LAB_0017104b:
    uVar5 = uVar2 - 1;
  }
  else {
    iVar3 = strcasecmp(param_2,"left");
    if (iVar3 != 0) {
      uVar6 = uVar1 - 1;
      iVar3 = strcasecmp(param_2,"right");
      if (iVar3 == 0) goto LAB_0017104f;
      iVar3 = strcasecmp(param_2,"top-left");
      if (iVar3 != 0) {
        iVar3 = strcasecmp(param_2,"top-right");
        if (iVar3 == 0) {
          uVar6 = uVar1 - 1;
          uVar5 = 0;
          goto LAB_0017104f;
        }
        iVar3 = strcasecmp(param_2,"bottom-left");
        if (iVar3 == 0) {
          uVar5 = uVar2 - 1;
          uVar6 = 0;
          goto LAB_0017104f;
        }
        iVar3 = strcasecmp(param_2,"bottom-right");
        if (iVar3 != 0) {
          return 0;
        }
        uVar6 = uVar1 - 1;
        goto LAB_0017104b;
      }
      uVar5 = 0;
    }
    uVar6 = 0;
  }
LAB_0017104f:
  uVar4 = window_get_active_at(param_1,uVar6,uVar5);
  return uVar4;
}



undefined8
window_zoom(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
           undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,long param_9)

{
  uint *puVar1;
  long lVar2;
  uint uVar3;
  long lVar5;
  long extraout_RDX;
  ulong in_R8;
  undefined8 in_R9;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar6;
  ulong uVar4;
  
  puVar1 = *(uint **)(param_9 + 8);
  if (((puVar1[0x60] & 0x1000) != 0) || (*(long *)(param_9 + 0x10) == 0)) {
    return 0xffffffff;
  }
  if (puVar1[0x5e] <= *(uint *)(param_9 + 0x28)) {
    return 0xffffffff;
  }
  if (puVar1[0x5f] <= *(uint *)(param_9 + 0x2c)) {
    return 0xffffffff;
  }
  if (puVar1[0x5e] < *(uint *)(param_9 + 0x28) + *(int *)(param_9 + 0x20)) {
    return 0xffffffff;
  }
  uVar3 = *(uint *)(param_9 + 0x2c) + *(int *)(param_9 + 0x24);
  uVar4 = (ulong)uVar3;
  if (puVar1[0x5f] < uVar3) {
    return 0xffffffff;
  }
  lVar2 = *(long *)(puVar1 + 0x52);
  if (lVar2 == 0) {
    lVar5 = *(long *)(puVar1 + 0x4e);
    if (param_9 == lVar5) goto LAB_0017122c;
LAB_001711e4:
    *(long *)(puVar1 + 0x50) = lVar5;
    *(long *)(puVar1 + 0x4e) = param_9;
    FUN_0016e490((long)puVar1,param_9);
    lVar2 = *(long *)(puVar1 + 0x52);
    lVar5 = extraout_RDX;
    param_1 = extraout_XMM0_Da;
    if (lVar2 == 0) goto LAB_0017122c;
  }
  else {
    uVar4 = 0;
    lVar5 = lVar2;
    do {
      lVar5 = *(long *)(lVar5 + 0x1f8);
      uVar3 = (int)uVar4 + 1;
      uVar4 = (ulong)uVar3;
    } while (lVar5 != 0);
    if (uVar3 == 1) {
      return 0xffffffff;
    }
    lVar5 = *(long *)(puVar1 + 0x4e);
    if (param_9 != lVar5) goto LAB_001711e4;
  }
  do {
    lVar5 = *(long *)(lVar2 + 0x10);
    *(undefined8 *)(lVar2 + 0x10) = 0;
    *(long *)(lVar2 + 0x18) = lVar5;
    lVar2 = *(long *)(lVar2 + 0x1f8);
  } while (lVar2 != 0);
LAB_0017122c:
  *(undefined8 *)(puVar1 + 0x5a) = *(undefined8 *)(puVar1 + 0x58);
  uVar6 = layout_init(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(long)puVar1,
                      param_9,lVar5,uVar4,in_R8,in_R9);
  puVar1[0x60] = puVar1[0x60] | 0x1000;
  notify_window_layout_changed(uVar6,param_2,param_3,param_4,param_5,param_6,param_7,param_8,puVar1)
  ;
  return 0;
}



undefined8
window_unzoom(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             uint *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
             ulong param_13,undefined8 param_14)

{
  undefined8 uVar1;
  long lVar2;
  undefined8 uVar3;
  undefined4 uVar4;
  
  if ((param_9[0x60] & 0x1000) != 0) {
    param_9[0x60] = param_9[0x60] & 0xffffefff;
    uVar3 = layout_free((long)param_9);
    uVar1 = *(undefined8 *)(param_9 + 0x5a);
    *(undefined8 *)(param_9 + 0x5a) = 0;
    *(undefined8 *)(param_9 + 0x58) = uVar1;
    for (lVar2 = *(long *)(param_9 + 0x52); lVar2 != 0; lVar2 = *(long *)(lVar2 + 0x1f8)) {
      uVar1 = *(undefined8 *)(lVar2 + 0x18);
      *(undefined8 *)(lVar2 + 0x18) = 0;
      *(undefined8 *)(lVar2 + 0x10) = uVar1;
    }
    uVar4 = layout_fix_panes(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                             (long)param_9,param_9[0x5e],param_9[0x5f],param_12,param_13,param_14);
    notify_window_layout_changed
              (uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9);
    return 0;
  }
  return 0xffffffff;
}



void window_lost_pane(long param_1,long param_2)

{
  long lVar1;
  
  if (marked_pane._48_8_ == param_2) {
    server_clear_marked();
  }
  lVar1 = *(long *)(param_1 + 0x140);
  if (*(long *)(param_1 + 0x138) != param_2) {
    if (lVar1 != param_2) {
      return;
    }
    *(undefined8 *)(param_1 + 0x140) = 0;
    return;
  }
  *(long *)(param_1 + 0x138) = lVar1;
  *(undefined8 *)(param_1 + 0x140) = 0;
  if (lVar1 == 0) {
    lVar1 = **(long **)(*(long *)(param_2 + 0x200) + 8);
    *(long *)(param_1 + 0x138) = lVar1;
    if (lVar1 == 0) {
      lVar1 = *(long *)(param_2 + 0x1f8);
      *(long *)(param_1 + 0x138) = lVar1;
      if (lVar1 == 0) {
        return;
      }
    }
  }
  *(uint *)(lVar1 + 0x30) = *(uint *)(lVar1 + 0x30) | 0x40;
  return;
}



void window_pane_at_index
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,uint param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  char *pcVar2;
  uint uVar3;
  ulong uVar4;
  
  pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(param_9 + 0x188),"pane-base-index",param_11,param_12,
                              param_13,param_14);
  uVar4 = (ulong)pcVar2 & 0xffffffff;
  lVar1 = *(long *)(param_9 + 0x148);
  if (lVar1 != 0) {
    uVar3 = (uint)pcVar2;
    do {
      if (uVar3 == param_10) {
        return;
      }
      lVar1 = *(long *)(lVar1 + 0x1f8);
      uVar3 = (int)uVar4 + 1;
      uVar4 = (ulong)uVar3;
    } while (lVar1 != 0);
  }
  return;
}



void window_pane_next_by_number(long param_1,long param_2,int param_3)

{
  if (param_3 != 0) {
    do {
      while (param_2 = *(long *)(param_2 + 0x1f8), param_2 != 0) {
        param_3 = param_3 + -1;
        if (param_3 == 0) {
          return;
        }
      }
      param_2 = *(long *)(param_1 + 0x148);
      param_3 = param_3 + -1;
    } while (param_3 != 0);
  }
  return;
}



void window_pane_previous_by_number(long param_1,long param_2,int param_3)

{
  if (param_3 != 0) {
    do {
      while (param_2 = **(long **)(*(long *)(param_2 + 0x200) + 8), param_2 != 0) {
        param_3 = param_3 + -1;
        if (param_3 == 0) {
          return;
        }
      }
      param_2 = **(long **)(*(long *)(param_1 + 0x150) + 8);
      param_3 = param_3 + -1;
    } while (param_3 != 0);
  }
  return;
}



undefined8
window_pane_index(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                 long param_9,int *param_10,undefined8 param_11,undefined8 param_12,
                 undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  char *pcVar2;
  undefined8 uVar3;
  long lVar4;
  
  lVar4 = *(long *)(param_9 + 8);
  pcVar2 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(lVar4 + 0x188),"pane-base-index",param_11,param_12,
                              param_13,param_14);
  lVar4 = *(long *)(lVar4 + 0x148);
  iVar1 = (int)pcVar2;
  *param_10 = iVar1;
  if (lVar4 == 0) {
    uVar3 = 0xffffffff;
  }
  else if (param_9 == lVar4) {
    uVar3 = 0;
  }
  else {
    while( true ) {
      iVar1 = iVar1 + 1;
      lVar4 = *(long *)(lVar4 + 0x1f8);
      if (lVar4 == 0) break;
      if (param_9 == lVar4) {
        *param_10 = iVar1;
        return 0;
      }
    }
    *param_10 = iVar1;
    uVar3 = 0xffffffff;
  }
  return uVar3;
}



int window_count_panes(long param_1)

{
  long lVar1;
  int iVar2;
  
  iVar2 = 0;
  for (lVar1 = *(long *)(param_1 + 0x148); lVar1 != 0; lVar1 = *(long *)(lVar1 + 0x1f8)) {
    iVar2 = iVar2 + 1;
  }
  return iVar2;
}



void window_printable_flags
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,long param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  int iVar2;
  long lVar3;
  long lVar4;
  undefined8 extraout_RDX;
  uint uVar5;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  char local_48 [40];
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  uVar1 = *(uint *)(param_10 + 0x38);
  uVar5 = uVar1 & 2;
  if (uVar5 != 0) {
    local_48[0] = '#';
    uVar5 = 1;
  }
  if ((uVar1 & 1) != 0) {
    lVar4 = (long)(int)uVar5;
    uVar5 = uVar5 + 1;
    local_48[lVar4] = '!';
  }
  if ((uVar1 & 4) != 0) {
    lVar4 = (long)(int)uVar5;
    uVar5 = uVar5 + 1;
    local_48[lVar4] = '~';
  }
  if (*(long *)(param_9 + 0xe0) == param_10) {
    lVar4 = (long)(int)uVar5;
    uVar5 = uVar5 + 1;
    local_48[lVar4] = '*';
  }
  if (*(long *)(param_9 + 0xe8) == param_10) {
    lVar4 = (long)(int)uVar5;
    uVar5 = uVar5 + 1;
    local_48[lVar4] = '-';
  }
  lVar4 = param_10;
  iVar2 = server_check_marked();
  if ((iVar2 != 0) && (marked_pane._32_8_ == param_10)) {
    lVar3 = (long)(int)uVar5;
    uVar5 = uVar5 + 1;
    local_48[lVar3] = 'M';
  }
  if ((*(byte *)(*(long *)(param_10 + 8) + 0x181) & 0x10) != 0) {
    lVar3 = (long)(int)uVar5;
    uVar5 = uVar5 + 1;
    local_48[lVar3] = 'Z';
  }
  local_48[(int)uVar5] = '\0';
  xstrdup(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,local_48,lVar4,
          extraout_RDX,param_12,param_13,param_14);
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int * window_pane_find_by_id_str(char *param_1)

{
  longlong lVar1;
  int *piVar2;
  long in_FS_OFFSET;
  char *local_18;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if ((*param_1 == '%') &&
     (lVar1 = strtonum(param_1 + 1,0,0xffffffff,&local_18), piVar2 = all_window_panes,
     local_18 == (char *)0x0)) {
    for (; piVar2 != (int *)0x0; piVar2 = *(int **)(piVar2 + 0x82)) {
      while (-1 < (int)lVar1 - *piVar2) {
        if ((int)lVar1 == *piVar2) goto LAB_001716b2;
        piVar2 = *(int **)(piVar2 + 0x84);
        if (piVar2 == (int *)0x0) goto LAB_001716b0;
      }
    }
  }
LAB_001716b0:
  piVar2 = (int *)0x0;
LAB_001716b2:
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return piVar2;
}



void window_pane_find_by_id(int param_1)

{
  int *piVar1;
  
  piVar1 = all_window_panes;
  do {
    if (piVar1 == (int *)0x0) {
      return;
    }
    while (-1 < param_1 - *piVar1) {
      if (param_1 == *piVar1) {
        return;
      }
      piVar1 = *(int **)(piVar1 + 0x84);
      if (piVar1 == (int *)0x0) {
        return;
      }
    }
    piVar1 = *(int **)(piVar1 + 0x82);
  } while( true );
}



int * window_pane_create(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,undefined8 param_9,int param_10,undefined8 param_11,ulong param_12,
                        undefined8 param_13,undefined8 param_14)

{
  void **ppvVar1;
  int iVar2;
  int *piVar3;
  ulong uVar4;
  undefined8 extraout_RDX;
  undefined8 uVar5;
  undefined8 extraout_RDX_00;
  undefined *puVar6;
  char *pcVar7;
  long in_FS_OFFSET;
  undefined extraout_XMM0 [16];
  undefined auVar8 [16];
  char acStack_88 [72];
  long local_40;
  undefined8 extraout_XMM0_Qb;
  
  uVar4 = param_12 & 0xffffffff;
  pcVar7 = acStack_88;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  piVar3 = (int *)xcalloc(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,1,0x228,
                          param_11,param_12,param_13,param_14);
  *(undefined8 *)(piVar3 + 2) = param_9;
  ppvVar1 = (void **)(piVar3 + 0x52);
  iVar2 = next_window_pane_id + 1;
  *piVar3 = next_window_pane_id;
  next_window_pane_id = iVar2;
  window_pane_tree_RB_INSERT((int **)&all_window_panes,piVar3);
  piVar3[8] = param_10;
  piVar3[0xd] = 0;
  *(undefined8 *)(piVar3 + 0xe) = 0;
  *(undefined8 *)(piVar3 + 0x10) = 0;
  *(undefined8 *)(piVar3 + 0x12) = 0;
  piVar3[0x1e] = -1;
  *(undefined8 *)(piVar3 + 0x20) = 0;
  *(undefined8 *)(piVar3 + 0x7a) = 0;
  *(undefined8 *)(piVar3 + 4) = 0;
  *(undefined8 *)(piVar3 + 10) = 0;
  piVar3[9] = (uint)param_11;
  piVar3[0x49] = -1;
  *(undefined8 *)(piVar3 + 0x4c) = 0;
  *(undefined8 *)(piVar3 + 0x4a) = 0;
  *(undefined8 *)(piVar3 + 0x4e) = 0;
  *(undefined8 *)(piVar3 + 0x72) = 0;
  piVar3[0x48] = 0x1010000;
  piVar3[0x44] = 0x80000;
  piVar3[0x45] = 0x800;
  piVar3[0x46] = 0x20;
  piVar3[0x47] = 0;
  screen_init(0x80000,param_2,param_3,param_4,param_5,param_6,param_7,param_8,ppvVar1,param_10,
              (uint)param_11,uVar4,param_13,param_14);
  *(void ***)(piVar3 + 0x50) = ppvVar1;
  puVar6 = (undefined *)0x41;
  iVar2 = gethostname(acStack_88,0x41);
  uVar5 = extraout_RDX;
  auVar8 = extraout_XMM0;
  if (iVar2 == 0) {
    auVar8._0_8_ = screen_set_title(extraout_XMM0._0_8_,param_2,param_3,param_4,param_5,param_6,
                                    param_7,param_8,ppvVar1,acStack_88,extraout_RDX,uVar4,param_13,
                                    param_14);
    auVar8._8_8_ = extraout_XMM0_Qb;
    uVar5 = extraout_RDX_00;
    puVar6 = pcVar7;
  }
  input_init(auVar8._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,(ulong)piVar3,
             puVar6,uVar5,uVar4,param_13,param_14);
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return piVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void window_add_pane(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    long param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
                    undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  long lVar2;
  int *piVar3;
  
  piVar3 = window_pane_create(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              param_9,*(int *)(param_9 + 0x178),(ulong)*(uint *)(param_9 + 0x17c),
                              param_10 & 0xffffffff,param_13,param_14);
  if (*(long *)(param_9 + 0x148) != 0) {
    lVar1 = *(long *)(param_9 + 0x138);
    lVar2 = *(long *)(lVar1 + 0x1f8);
    *(long *)(piVar3 + 0x7e) = lVar2;
    if (lVar2 == 0) {
      *(int **)(param_9 + 0x150) = piVar3 + 0x7e;
    }
    else {
      *(int **)(lVar2 + 0x200) = piVar3 + 0x7e;
    }
    *(int **)(lVar1 + 0x1f8) = piVar3;
    *(long *)(piVar3 + 0x80) = lVar1 + 0x1f8;
    return;
  }
  *(undefined8 *)(piVar3 + 0x7e) = 0;
  *(int **)(param_9 + 0x150) = piVar3 + 0x7e;
  *(int **)(param_9 + 0x148) = piVar3;
  *(int ***)(piVar3 + 0x80) = (int **)(param_9 + 0x148);
  return;
}


/*
Unable to decompile 'window_pane_spawn'
Cause: 
Low-level Error: Overlapping input varnodes
*/


void window_pane_resize(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,uint param_10,uint param_11,undefined8 param_12,
                       undefined8 param_13,undefined8 param_14)

{
  if ((*(uint *)(param_9 + 0x20) != param_10) || (*(uint *)(param_9 + 0x24) != param_11)) {
    *(uint *)(param_9 + 0x20) = param_10;
    *(uint *)(param_9 + 0x24) = param_11;
    screen_resize(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9 + 0x148,
                  param_10,(ulong)param_11,(ulong)(*(long *)(param_9 + 0x1c8) == 0),param_13,
                  param_14);
    if (*(long *)(param_9 + 0x1e8) != 0) {
      (**(code **)(*(long *)(param_9 + 0x1e8) + 0x10))(param_9,param_10,param_11);
    }
    *(uint *)(param_9 + 0x30) = *(uint *)(param_9 + 0x30) | 8;
  }
  return;
}



void window_pane_alternate_on
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined4 *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  char *pcVar7;
  undefined4 *puVar8;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  
  if (*(long *)(param_9 + 0x1c8) != 0) {
    return;
  }
  pcVar7 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                              *(char ***)(*(long *)(param_9 + 8) + 0x188),"alternate-screen",
                              param_11,param_12,param_13,param_14);
  if (pcVar7 == (char *)0x0) {
    return;
  }
  uVar1 = *(uint *)(*(long *)(param_9 + 0x150) + 8);
  uVar2 = *(uint *)(*(long *)(param_9 + 0x150) + 4);
  puVar8 = grid_create(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                       uVar2,(ulong)uVar1,0,param_12,param_13,param_14);
  *(undefined4 **)(param_9 + 0x1c8) = puVar8;
  grid_duplicate_lines
            (extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
             (long)puVar8,0,*(long *)(param_9 + 0x150),*(uint *)(*(long *)(param_9 + 0x150) + 0xc),
             (ulong)uVar1);
  if ((int)param_11 != 0) {
    *(undefined8 *)(param_9 + 0x1c0) = *(undefined8 *)(param_9 + 0x158);
  }
  uVar3 = *param_10;
  uVar4 = param_10[1];
  uVar5 = param_10[2];
  uVar6 = param_10[3];
  *(undefined4 *)(param_9 + 0x1d0) = uVar3;
  *(undefined4 *)(param_9 + 0x1d4) = uVar4;
  *(undefined4 *)(param_9 + 0x1d8) = uVar5;
  *(undefined4 *)(param_9 + 0x1dc) = uVar6;
  *(undefined4 *)(param_9 + 0x1e0) = param_10[4];
  grid_view_clear(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                  *(long *)(param_9 + 0x150),0,0,(ulong)uVar2,(ulong)uVar1,param_14);
  **(uint **)(param_9 + 0x150) = **(uint **)(param_9 + 0x150) & 0xfffffffe;
  *(uint *)(param_9 + 0x30) = *(uint *)(param_9 + 0x30) | 1;
  return;
}



void window_pane_alternate_off
               (undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9,undefined8 *param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  undefined8 uVar3;
  undefined8 uVar4;
  char *pcVar5;
  long lVar6;
  uint uVar7;
  uint uVar8;
  long lVar9;
  void *pvVar10;
  ulong uVar11;
  undefined extraout_XMM0 [16];
  undefined auVar12 [16];
  undefined8 extraout_XMM0_Qb;
  
  if (*(long *)(param_9 + 0x1c8) != 0) {
    pcVar5 = options_get_number(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                *(char ***)(*(long *)(param_9 + 8) + 0x188),"alternate-screen",
                                param_11,param_12,param_13,param_14);
    if (pcVar5 != (char *)0x0) {
      lVar6 = *(long *)(param_9 + 0x150);
      lVar9 = *(long *)(param_9 + 0x1c8);
      uVar1 = *(uint *)(lVar6 + 8);
      uVar8 = *(uint *)(lVar9 + 8);
      uVar2 = *(uint *)(lVar6 + 4);
      auVar12 = extraout_XMM0;
      if (uVar8 < uVar1) {
        auVar12._0_8_ =
             screen_resize(extraout_XMM0._0_8_,param_2,param_3,param_4,param_5,param_6,param_7,
                           param_8,param_9 + 0x148,uVar2,(ulong)uVar8,1,(ulong)uVar8,param_14);
        auVar12._8_8_ = extraout_XMM0_Qb;
        lVar9 = *(long *)(param_9 + 0x1c8);
        lVar6 = *(long *)(param_9 + 0x150);
      }
      uVar11 = (ulong)uVar1;
      grid_duplicate_lines
                (auVar12._0_4_,param_2,param_3,param_4,param_5,param_6,param_7,param_8,lVar6,
                 (ulong)*(uint *)(lVar6 + 0xc),lVar9,0,uVar11);
      if ((int)param_11 == 0) {
        lVar6 = *(long *)(param_9 + 0x150);
        uVar8 = *(uint *)(param_9 + 0x15c);
        uVar7 = *(int *)(lVar6 + 4) - 1;
        if (uVar7 < *(uint *)(param_9 + 0x158)) {
          *(uint *)(param_9 + 0x158) = uVar7;
        }
      }
      else {
        lVar6 = *(long *)(param_9 + 0x150);
        uVar7 = *(int *)(lVar6 + 4) - 1;
        uVar8 = *(uint *)(param_9 + 0x1c0);
        if (uVar7 < *(uint *)(param_9 + 0x1c0)) {
          uVar8 = uVar7;
        }
        *(uint *)(param_9 + 0x158) = uVar8;
        uVar8 = *(uint *)(param_9 + 0x1c4);
        *(uint *)(param_9 + 0x15c) = uVar8;
      }
      uVar7 = *(int *)(lVar6 + 8) - 1;
      if (uVar7 < uVar8) {
        *(uint *)(param_9 + 0x15c) = uVar7;
      }
      uVar3 = *(undefined8 *)(param_9 + 0x1d0);
      uVar4 = *(undefined8 *)(param_9 + 0x1d8);
      *param_10 = uVar3;
      param_10[1] = uVar4;
      *(undefined4 *)(param_10 + 2) = *(undefined4 *)(param_9 + 0x1e0);
      pvVar10 = *(void **)(param_9 + 0x1c8);
      **(uint **)(param_9 + 0x150) = **(uint **)(param_9 + 0x150) | 1;
      if ((*(uint *)((long)pvVar10 + 8) < uVar1) || (*(uint *)((long)pvVar10 + 4) != uVar2)) {
        screen_resize(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9 + 0x148,
                      uVar2,(ulong)uVar1,1,uVar11,param_14);
        pvVar10 = *(void **)(param_9 + 0x1c8);
      }
      grid_destroy(pvVar10);
      *(uint *)(param_9 + 0x30) = *(uint *)(param_9 + 0x30) | 1;
      *(undefined8 *)(param_9 + 0x1c8) = 0;
    }
    return;
  }
  return;
}



undefined8 window_pane_set_mode(long param_1,undefined **param_2)

{
  long lVar1;
  
  if (*(long *)(param_1 + 0x1e8) != 0) {
    return 1;
  }
  *(undefined ***)(param_1 + 0x1e8) = param_2;
  lVar1 = (*(code *)*param_2)();
  if (lVar1 != 0) {
    *(long *)(param_1 + 0x140) = lVar1;
  }
  *(uint *)(param_1 + 0x30) = *(uint *)(param_1 + 0x30) | 0x41;
  server_status_window(*(long *)(param_1 + 8));
  return 0;
}



void window_pane_reset_mode(uint *param_1)

{
  if (*(long *)(param_1 + 0x7a) != 0) {
    (**(code **)(*(long *)(param_1 + 0x7a) + 8))();
    param_1[0xc] = param_1[0xc] | 0x41;
    *(undefined8 *)(param_1 + 0x7a) = 0;
    *(uint **)(param_1 + 0x50) = param_1 + 0x52;
    server_status_window(*(long *)(param_1 + 2));
    tmate_sync_copy_mode(param_1);
    return;
  }
  return;
}



void window_pane_destroy(uint *param_1)

{
  int iVar1;
  
  window_pane_reset_mode(param_1);
  iVar1 = event_initialized(param_1 + 0x22);
  if (iVar1 != 0) {
    event_del(param_1 + 0x22);
  }
  if (param_1[0x1e] != 0xffffffff) {
    bufferevent_free(*(undefined8 *)(param_1 + 0x20));
    close(param_1[0x1e]);
  }
  input_free((long)param_1);
  screen_free((void **)(param_1 + 0x52));
  if (*(void **)(param_1 + 0x72) != (void *)0x0) {
    grid_destroy(*(void **)(param_1 + 0x72));
  }
  if (param_1[0x49] != 0xffffffff) {
    bufferevent_free(*(undefined8 *)(param_1 + 0x4a));
    close(param_1[0x49]);
  }
  window_pane_tree_RB_REMOVE(&all_window_panes,(long)param_1);
  free(*(void **)(param_1 + 0x12));
  free(*(void **)(param_1 + 0x10));
  cmd_free_argv(param_1[0xd],*(void ***)(param_1 + 0xe));
  free(param_1);
  return;
}



void window_remove_pane(long param_1,uint *param_2)

{
  long lVar1;
  long *plVar2;
  
  window_lost_pane(param_1,(long)param_2);
  lVar1 = *(long *)(param_2 + 0x7e);
  plVar2 = *(long **)(param_2 + 0x80);
  if (lVar1 == 0) {
    *(long **)(param_1 + 0x150) = plVar2;
  }
  else {
    *(long **)(lVar1 + 0x200) = plVar2;
    plVar2 = *(long **)(param_2 + 0x80);
  }
  *plVar2 = lVar1;
  window_pane_destroy(param_2);
  return;
}



void window_destroy_panes(long param_1)

{
  uint *puVar1;
  long lVar2;
  long *plVar3;
  
  puVar1 = *(uint **)(param_1 + 0x148);
  while (puVar1 != (uint *)0x0) {
    lVar2 = *(long *)(puVar1 + 0x7e);
    plVar3 = *(long **)(puVar1 + 0x80);
    if (lVar2 == 0) {
      *(long **)(param_1 + 0x150) = plVar3;
    }
    else {
      *(long **)(lVar2 + 0x200) = plVar3;
      plVar3 = *(long **)(puVar1 + 0x80);
    }
    *plVar3 = lVar2;
    window_pane_destroy(puVar1);
    puVar1 = *(uint **)(param_1 + 0x148);
  }
  return;
}



void window_destroy(void *param_1)

{
  int iVar1;
  
  windows_RB_REMOVE(&windows,(long)param_1);
  if (*(uint **)((long)param_1 + 0x160) != (uint *)0x0) {
    layout_free_cell(*(uint **)((long)param_1 + 0x160));
  }
  if (*(uint **)((long)param_1 + 0x168) != (uint *)0x0) {
    layout_free_cell(*(uint **)((long)param_1 + 0x168));
  }
  free(*(void **)((long)param_1 + 0x170));
  iVar1 = event_initialized((long)param_1 + 0x10);
  if (iVar1 != 0) {
    event_del((long)param_1 + 0x10);
  }
  iVar1 = event_initialized((long)param_1 + 0xa0);
  if (iVar1 != 0) {
    event_del((long)param_1 + 0xa0);
  }
  options_free(*(long **)((long)param_1 + 0x188));
  window_destroy_panes((long)param_1);
  free(*(void **)((long)param_1 + 8));
  free(param_1);
  return;
}



uint * window_create(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    char *param_9,uint param_10,undefined8 param_11,undefined8 param_12,
                    uint *param_13,undefined8 param_14,undefined8 param_15,undefined8 param_16,
                    uint param_17,uint param_18,uint param_19)

{
  int iVar1;
  uint *puVar2;
  undefined8 extraout_RAX;
  undefined8 uVar3;
  undefined8 extraout_RDX;
  undefined8 extraout_RDX_00;
  ulong uVar4;
  uint *puVar5;
  undefined8 uVar6;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 extraout_XMM0_Db;
  undefined auVar7 [16];
  
  uVar3 = param_12;
  puVar5 = param_13;
  uVar6 = param_14;
  puVar2 = window_create1(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_17,
                          param_18,param_11,param_12,param_13,param_14);
  auVar7 = window_add_pane(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                           (long)puVar2,(ulong)param_19,extraout_RDX,uVar3,puVar5,uVar6);
  layout_init(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              (long)puVar2,auVar7._0_8_,auVar7._8_8_,uVar3,(ulong)puVar5,uVar6);
  uVar4 = (ulong)param_10;
  iVar1 = window_pane_spawn(auVar7._0_8_,uVar4,param_11);
  if (iVar1 == 0) {
    *(undefined8 *)(puVar2 + 0x4e) = *(undefined8 *)(puVar2 + 0x52);
    puVar5 = puVar2;
    if (param_9 == (char *)0x0) {
      uVar3 = default_window_name(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,
                                  param_4,param_5,param_6,param_7,param_8,(long)puVar2,uVar4,
                                  extraout_RDX_00,param_12,param_13,param_14);
      *(undefined8 *)(puVar2 + 2) = uVar3;
    }
    else {
      uVar3 = xstrdup(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_01),param_2,param_3,param_4,param_5
                      ,param_6,param_7,param_8,param_9,uVar4,extraout_RDX_00,param_12,param_13,
                      param_14);
      *(undefined8 *)(puVar2 + 2) = extraout_RAX;
      options_set_number(uVar3,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                         *(char ***)(puVar2 + 0x62),"automatic-rename",(char *)0x0,param_12,param_13
                         ,param_14);
    }
  }
  else {
    puVar5 = (uint *)0x0;
    window_destroy(puVar2);
  }
  return puVar5;
}



void window_remove_ref(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                      undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                      void *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                      undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  
  if (*(int *)((long)param_9 + 400) == 0) {
                    // WARNING: Subroutine does not return
    fatal(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"bad reference count",
          param_10,param_11,param_12,param_13,param_14,(char)param_11);
  }
  iVar1 = *(int *)((long)param_9 + 400) + -1;
  *(int *)((long)param_9 + 400) = iVar1;
  if (iVar1 != 0) {
    return;
  }
  window_destroy(param_9);
  return;
}



void winlink_remove(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   long *param_9,void *param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  void *pvVar1;
  undefined8 extraout_RDX;
  void *pvVar2;
  undefined4 extraout_XMM0_Da;
  
  pvVar1 = *(void **)((long)param_10 + 8);
  pvVar2 = param_10;
  winlinks_RB_REMOVE(param_9,(long)param_10);
  free(*(void **)((long)param_10 + 0x30));
  free(param_10);
  if (pvVar1 != (void *)0x0) {
    window_remove_ref(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                      pvVar1,pvVar2,extraout_RDX,param_12,param_13,param_14);
    return;
  }
  return;
}



void window_pane_key(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                    undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                    uint *param_9,undefined8 param_10,undefined8 param_11,ulong param_12,
                    long param_13,undefined8 param_14)

{
  uint uVar1;
  uint uVar2;
  code *UNRECOVERED_JUMPTABLE;
  uint *puVar3;
  undefined8 uVar4;
  char *pcVar5;
  ulong uVar6;
  undefined8 extraout_RDX;
  ulong uVar7;
  undefined4 extraout_XMM0_Da;
  undefined4 uVar8;
  
  uVar7 = (param_12 & 0xffff1fffffffffff) - 0x100000000002;
  if ((0x2a < uVar7) || (param_13 != 0)) {
    if (*(long *)(param_9 + 0x7a) == 0) {
      if ((((param_9[0x1e] != 0xffffffff) && ((*(byte *)(param_9 + 0xc) & 0x20) == 0)) &&
          (uVar6 = param_12,
          uVar4 = input_key(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,
                            param_12,param_13,param_12,param_13,param_14), 0x2a < uVar7)) &&
         (pcVar5 = options_get_number(uVar4,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                      *(char ***)(*(long *)(param_9 + 2) + 0x188),
                                      "synchronize-panes",extraout_RDX,uVar6,param_13,param_14),
         pcVar5 != (char *)0x0)) {
        uVar8 = extraout_XMM0_Da;
        for (puVar3 = *(uint **)(*(long *)(param_9 + 2) + 0x148); puVar3 != (uint *)0x0;
            puVar3 = *(uint **)(puVar3 + 0x7e)) {
          if (((param_9 != puVar3) && (*(long *)(puVar3 + 0x7a) == 0)) &&
             ((puVar3[0x1e] != 0xffffffff &&
              (((*(byte *)(puVar3 + 0xc) & 0x20) == 0 && (*(long *)(puVar3 + 4) != 0)))))) {
            uVar1 = *(uint *)(*(long *)(puVar3 + 2) + 0x178);
            if (puVar3[10] < uVar1) {
              uVar2 = *(uint *)(*(long *)(puVar3 + 2) + 0x17c);
              if (((puVar3[0xb] < uVar2) && (puVar3[10] + puVar3[8] <= uVar1)) &&
                 (puVar3[0xb] + puVar3[9] <= uVar2)) {
                uVar8 = input_key(uVar8,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                  puVar3,param_12,0,(ulong)uVar1,param_13,param_14);
              }
            }
          }
        }
      }
    }
    else {
      UNRECOVERED_JUMPTABLE = *(code **)(*(long *)(param_9 + 0x7a) + 0x18);
      if (UNRECOVERED_JUMPTABLE != (code *)0x0) {
                    // WARNING: Could not recover jumptable at 0x001725d2. Too many branches
                    // WARNING: Treating indirect jump as call
        (*UNRECOVERED_JUMPTABLE)(param_9,param_10,param_11,param_12);
        return;
      }
    }
  }
  return;
}



bool window_pane_visible(long param_1)

{
  uint uVar1;
  uint uVar2;
  bool bVar3;
  
  if (*(long *)(param_1 + 0x10) != 0) {
    uVar1 = *(uint *)(*(long *)(param_1 + 8) + 0x178);
    bVar3 = false;
    if (*(uint *)(param_1 + 0x28) < uVar1) {
      uVar2 = *(uint *)(*(long *)(param_1 + 8) + 0x17c);
      bVar3 = false;
      if ((*(uint *)(param_1 + 0x2c) < uVar2) &&
         (*(uint *)(param_1 + 0x28) + *(int *)(param_1 + 0x20) <= uVar1)) {
        bVar3 = *(uint *)(param_1 + 0x2c) + *(int *)(param_1 + 0x24) <= uVar2;
      }
    }
    return bVar3;
  }
  return false;
}



char * window_pane_search(undefined8 param_1,undefined4 param_2,undefined4 param_3,
                         undefined4 param_4,undefined4 param_5,undefined4 param_6,undefined4 param_7
                         ,undefined4 param_8,long param_9,undefined8 param_10,uint *param_11,
                         undefined8 param_12,undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int iVar2;
  char *__name;
  uint uVar3;
  long lVar4;
  long in_FS_OFFSET;
  undefined in_stack_ffffffffffffffc8;
  undefined7 uStack_37;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  xasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
            (long *)&stack0xffffffffffffffc8,&DAT_00178433,param_10,param_12,param_13,param_14,
            in_stack_ffffffffffffffc8);
  lVar4 = *(long *)(param_9 + 0x150);
  if (*(int *)(lVar4 + 8) != 0) {
    uVar3 = 0;
    do {
      __name = (char *)grid_view_string_cells(lVar4,0,uVar3,(ulong)*(uint *)(lVar4 + 4));
      iVar2 = fnmatch((char *)CONCAT71(uStack_37,in_stack_ffffffffffffffc8),__name,0);
      if (iVar2 == 0) {
        if (param_11 != (uint *)0x0) {
          *param_11 = uVar3;
        }
        goto LAB_0017279a;
      }
      uVar3 = uVar3 + 1;
      free(__name);
      lVar4 = *(long *)(param_9 + 0x150);
    } while (uVar3 < *(uint *)(lVar4 + 8));
  }
  __name = (char *)0x0;
LAB_0017279a:
  free((void *)CONCAT71(uStack_37,in_stack_ffffffffffffffc8));
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return __name;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long window_pane_choose_best(long *param_1,uint param_2)

{
  long *plVar1;
  long lVar2;
  
  if (param_2 != 0) {
    lVar2 = *param_1;
    if (1 < param_2) {
      plVar1 = param_1 + 1;
      do {
        if (*(uint *)(lVar2 + 4) < *(uint *)(*plVar1 + 4)) {
          lVar2 = *plVar1;
        }
        plVar1 = plVar1 + 1;
      } while (plVar1 != param_1 + (ulong)(param_2 - 2) + 2);
    }
    return lVar2;
  }
  return 0;
}



long window_pane_find_up(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,long param_9)

{
  uint uVar1;
  uint uVar2;
  long lVar3;
  long *__ptr;
  uint uVar4;
  long *plVar5;
  uint uVar6;
  uint uVar7;
  undefined8 in_R9;
  long lVar8;
  uint uVar9;
  uint uVar10;
  ulong uVar11;
  undefined4 extraout_XMM0_Da;
  
  if (param_9 == 0) {
    lVar8 = 0;
  }
  else {
    lVar8 = *(long *)(param_9 + 0x10);
    if (*(long *)(param_9 + 0x10) != 0) {
      lVar3 = *(long *)(param_9 + 8);
      uVar10 = *(uint *)(param_9 + 0x28);
      lVar8 = 0;
      if (uVar10 < *(uint *)(lVar3 + 0x178)) {
        uVar1 = *(uint *)(param_9 + 0x2c);
        uVar6 = *(uint *)(lVar3 + 0x17c);
        if (((uVar1 < uVar6) &&
            (uVar9 = *(int *)(param_9 + 0x20) + uVar10, lVar8 = 0, uVar9 <= *(uint *)(lVar3 + 0x178)
            )) && (*(int *)(param_9 + 0x24) + uVar1 <= uVar6)) {
          lVar8 = *(long *)(lVar3 + 0x148);
          if (uVar1 == 0) {
            uVar1 = uVar6 + 1;
          }
          if (lVar8 == 0) {
            __ptr = (long *)0x0;
            lVar8 = 0;
          }
          else {
            uVar11 = 0;
            __ptr = (long *)0x0;
            do {
              if ((param_9 != lVar8) && (*(long *)(lVar8 + 0x10) != 0)) {
                uVar6 = *(uint *)(lVar8 + 0x28);
                uVar4 = *(uint *)(*(long *)(lVar8 + 8) + 0x178);
                if (uVar6 < uVar4) {
                  uVar2 = *(uint *)(*(long *)(lVar8 + 8) + 0x17c);
                  if (((*(uint *)(lVar8 + 0x2c) < uVar2) &&
                      (uVar7 = *(int *)(lVar8 + 0x20) + uVar6, uVar7 <= uVar4)) &&
                     ((uVar4 = *(uint *)(lVar8 + 0x2c) + *(int *)(lVar8 + 0x24), uVar4 <= uVar2 &&
                      (uVar4 + 1 == uVar1)))) {
                    uVar7 = uVar7 - 1;
                    if (uVar9 < uVar7) {
                      if (uVar10 <= uVar6) {
LAB_0017291f:
                        if (uVar9 < uVar6) goto LAB_00172924;
                      }
                    }
                    else {
                      if (uVar10 <= uVar6) goto LAB_0017291f;
LAB_00172924:
                      if ((uVar7 < uVar10) || (uVar9 < uVar7)) goto LAB_00172950;
                    }
                    uVar6 = (int)uVar11 + 1;
                    __ptr = (long *)xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,
                                                  param_7,param_8,__ptr,(ulong)uVar6,8,(ulong)uVar2,
                                                  (ulong)uVar7,in_R9);
                    __ptr[uVar11] = lVar8;
                    uVar11 = (ulong)uVar6;
                    param_1 = extraout_XMM0_Da;
                  }
                }
              }
LAB_00172950:
              lVar8 = *(long *)(lVar8 + 0x1f8);
            } while (lVar8 != 0);
            uVar10 = (uint)uVar11;
            lVar8 = 0;
            if ((uVar10 != 0) && (lVar8 = *__ptr, 1 < uVar10)) {
              plVar5 = __ptr + 1;
              do {
                if (*(uint *)(lVar8 + 4) < *(uint *)(*plVar5 + 4)) {
                  lVar8 = *plVar5;
                }
                plVar5 = plVar5 + 1;
              } while (plVar5 != __ptr + (ulong)(uVar10 - 2) + 2);
            }
          }
          free(__ptr);
        }
      }
    }
  }
  return lVar8;
}



long window_pane_find_down
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  long lVar4;
  long *__ptr;
  uint uVar5;
  uint uVar6;
  long *plVar7;
  uint uVar8;
  undefined8 in_R9;
  long lVar9;
  uint uVar10;
  uint uVar11;
  ulong uVar12;
  undefined4 extraout_XMM0_Da;
  
  if (param_9 == 0) {
    lVar9 = 0;
  }
  else {
    lVar9 = *(long *)(param_9 + 0x10);
    if (*(long *)(param_9 + 0x10) != 0) {
      lVar4 = *(long *)(param_9 + 8);
      uVar11 = *(uint *)(param_9 + 0x28);
      lVar9 = 0;
      if (uVar11 < *(uint *)(lVar4 + 0x178)) {
        uVar1 = *(uint *)(lVar4 + 0x17c);
        if (((*(uint *)(param_9 + 0x2c) < uVar1) &&
            (uVar10 = *(int *)(param_9 + 0x20) + uVar11, lVar9 = 0,
            uVar10 <= *(uint *)(lVar4 + 0x178))) &&
           (uVar5 = *(uint *)(param_9 + 0x2c) + *(int *)(param_9 + 0x24), uVar5 <= uVar1)) {
          uVar5 = uVar5 + 1;
          lVar9 = *(long *)(lVar4 + 0x148);
          if (uVar1 <= uVar5) {
            uVar5 = 0;
          }
          if (lVar9 == 0) {
            __ptr = (long *)0x0;
            lVar9 = 0;
          }
          else {
            uVar12 = 0;
            __ptr = (long *)0x0;
            do {
              if ((param_9 != lVar9) && (*(long *)(lVar9 + 0x10) != 0)) {
                uVar1 = *(uint *)(lVar9 + 0x28);
                uVar8 = *(uint *)(*(long *)(lVar9 + 8) + 0x178);
                if (uVar1 < uVar8) {
                  uVar2 = *(uint *)(lVar9 + 0x2c);
                  uVar3 = *(uint *)(*(long *)(lVar9 + 8) + 0x17c);
                  if (((uVar2 < uVar3) && (uVar6 = *(int *)(lVar9 + 0x20) + uVar1, uVar6 <= uVar8))
                     && ((*(int *)(lVar9 + 0x24) + uVar2 <= uVar3 && (uVar5 == uVar2)))) {
                    uVar6 = uVar6 - 1;
                    if (uVar1 < uVar11) {
                      if (uVar6 <= uVar10) {
                        if (uVar11 <= uVar1) goto LAB_00172b78;
                        goto LAB_00172ad4;
                      }
                    }
                    else {
LAB_00172b78:
                      if (uVar10 < uVar1) {
LAB_00172ad4:
                        if ((uVar6 < uVar11) || (uVar10 < uVar6)) goto LAB_00172b08;
                      }
                    }
                    uVar8 = (int)uVar12 + 1;
                    __ptr = (long *)xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,
                                                  param_7,param_8,__ptr,(ulong)uVar8,8,(ulong)uVar1,
                                                  __ptr,in_R9);
                    __ptr[uVar12] = lVar9;
                    uVar12 = (ulong)uVar8;
                    param_1 = extraout_XMM0_Da;
                  }
                }
              }
LAB_00172b08:
              lVar9 = *(long *)(lVar9 + 0x1f8);
            } while (lVar9 != 0);
            uVar11 = (uint)uVar12;
            lVar9 = 0;
            if ((uVar11 != 0) && (lVar9 = *__ptr, 1 < uVar11)) {
              plVar7 = __ptr + 1;
              do {
                if (*(uint *)(lVar9 + 4) < *(uint *)(*plVar7 + 4)) {
                  lVar9 = *plVar7;
                }
                plVar7 = plVar7 + 1;
              } while (plVar7 != __ptr + (ulong)(uVar11 - 2) + 2);
            }
          }
          free(__ptr);
        }
      }
    }
  }
  return lVar9;
}



long window_pane_find_left
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  long lVar4;
  uint uVar5;
  long *__ptr;
  uint uVar6;
  long *plVar7;
  undefined8 in_R8;
  undefined8 in_R9;
  long lVar8;
  uint uVar9;
  uint uVar10;
  ulong uVar11;
  undefined4 extraout_XMM0_Da;
  
  if (param_9 == 0) {
    lVar8 = 0;
  }
  else {
    lVar8 = *(long *)(param_9 + 0x10);
    if (*(long *)(param_9 + 0x10) != 0) {
      lVar4 = *(long *)(param_9 + 8);
      uVar10 = *(uint *)(param_9 + 0x28);
      uVar5 = *(uint *)(lVar4 + 0x178);
      lVar8 = 0;
      if (uVar10 < uVar5) {
        uVar1 = *(uint *)(param_9 + 0x2c);
        if (((uVar1 < *(uint *)(lVar4 + 0x17c)) &&
            (lVar8 = 0, *(int *)(param_9 + 0x20) + uVar10 <= uVar5)) &&
           (uVar9 = *(int *)(param_9 + 0x24) + uVar1, uVar9 <= *(uint *)(lVar4 + 0x17c))) {
          lVar8 = *(long *)(lVar4 + 0x148);
          if (uVar10 == 0) {
            uVar10 = uVar5 + 1;
          }
          if (lVar8 == 0) {
            __ptr = (long *)0x0;
            lVar8 = 0;
          }
          else {
            uVar11 = 0;
            __ptr = (long *)0x0;
            do {
              if ((param_9 != lVar8) && (*(long *)(lVar8 + 0x10) != 0)) {
                uVar5 = *(uint *)(*(long *)(lVar8 + 8) + 0x178);
                if (*(uint *)(lVar8 + 0x28) < uVar5) {
                  uVar2 = *(uint *)(lVar8 + 0x2c);
                  uVar3 = *(uint *)(*(long *)(lVar8 + 8) + 0x17c);
                  if (((uVar2 < uVar3) &&
                      (uVar6 = *(uint *)(lVar8 + 0x28) + *(int *)(lVar8 + 0x20), uVar6 <= uVar5)) &&
                     ((uVar5 = *(int *)(lVar8 + 0x24) + uVar2, uVar5 <= uVar3 &&
                      (uVar6 + 1 == uVar10)))) {
                    uVar5 = uVar5 - 1;
                    if (uVar9 < uVar5) {
                      if (uVar1 <= uVar2) {
LAB_00172c90:
                        if (uVar9 < uVar2) goto LAB_00172c95;
                      }
                    }
                    else {
                      if (uVar1 <= uVar2) goto LAB_00172c90;
LAB_00172c95:
                      if ((uVar5 < uVar1) || (uVar9 < uVar5)) goto LAB_00172cc0;
                    }
                    uVar5 = (int)uVar11 + 1;
                    __ptr = (long *)xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,
                                                  param_7,param_8,__ptr,(ulong)uVar5,8,(ulong)uVar3,
                                                  in_R8,in_R9);
                    __ptr[uVar11] = lVar8;
                    uVar11 = (ulong)uVar5;
                    param_1 = extraout_XMM0_Da;
                  }
                }
              }
LAB_00172cc0:
              lVar8 = *(long *)(lVar8 + 0x1f8);
            } while (lVar8 != 0);
            uVar10 = (uint)uVar11;
            lVar8 = 0;
            if ((uVar10 != 0) && (lVar8 = *__ptr, 1 < uVar10)) {
              plVar7 = __ptr + 1;
              do {
                if (*(uint *)(lVar8 + 4) < *(uint *)(*plVar7 + 4)) {
                  lVar8 = *plVar7;
                }
                plVar7 = plVar7 + 1;
              } while (plVar7 != __ptr + (ulong)(uVar10 - 2) + 2);
            }
          }
          free(__ptr);
        }
      }
    }
  }
  return lVar8;
}



long window_pane_find_right
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long param_9)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  long lVar4;
  uint uVar5;
  long *__ptr;
  uint uVar6;
  long *plVar7;
  uint uVar8;
  undefined8 in_R9;
  long lVar9;
  uint uVar10;
  ulong uVar11;
  undefined4 extraout_XMM0_Da;
  
  if (param_9 == 0) {
    lVar9 = 0;
  }
  else {
    lVar9 = *(long *)(param_9 + 0x10);
    if (*(long *)(param_9 + 0x10) != 0) {
      lVar4 = *(long *)(param_9 + 8);
      uVar8 = *(uint *)(lVar4 + 0x178);
      lVar9 = 0;
      if (*(uint *)(param_9 + 0x28) < uVar8) {
        uVar1 = *(uint *)(param_9 + 0x2c);
        if (((uVar1 < *(uint *)(lVar4 + 0x17c)) &&
            (uVar5 = *(uint *)(param_9 + 0x28) + *(int *)(param_9 + 0x20), lVar9 = 0, uVar5 <= uVar8
            )) && (uVar10 = *(int *)(param_9 + 0x24) + uVar1, uVar10 <= *(uint *)(lVar4 + 0x17c))) {
          uVar5 = uVar5 + 1;
          lVar9 = *(long *)(lVar4 + 0x148);
          if (uVar8 <= uVar5) {
            uVar5 = 0;
          }
          if (lVar9 == 0) {
            __ptr = (long *)0x0;
            lVar9 = 0;
          }
          else {
            uVar11 = 0;
            __ptr = (long *)0x0;
            do {
              if ((param_9 != lVar9) && (*(long *)(lVar9 + 0x10) != 0)) {
                uVar8 = *(uint *)(lVar9 + 0x28);
                uVar6 = *(uint *)(*(long *)(lVar9 + 8) + 0x178);
                if (uVar8 < uVar6) {
                  uVar2 = *(uint *)(lVar9 + 0x2c);
                  uVar3 = *(uint *)(*(long *)(lVar9 + 8) + 0x17c);
                  if (((uVar2 < uVar3) && (*(int *)(lVar9 + 0x20) + uVar8 <= uVar6)) &&
                     ((uVar6 = *(int *)(lVar9 + 0x24) + uVar2, uVar5 == uVar8 && (uVar6 <= uVar3))))
                  {
                    uVar6 = uVar6 - 1;
                    if (uVar2 < uVar1) {
                      if (uVar6 <= uVar10) {
                        if (uVar1 <= uVar2) goto LAB_00172ef8;
                        goto LAB_00172e54;
                      }
                    }
                    else {
LAB_00172ef8:
                      if (uVar10 < uVar2) {
LAB_00172e54:
                        if ((uVar6 < uVar1) || (uVar10 < uVar6)) goto LAB_00172e88;
                      }
                    }
                    uVar8 = (int)uVar11 + 1;
                    __ptr = (long *)xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,
                                                  param_7,param_8,__ptr,(ulong)uVar8,8,(ulong)uVar6,
                                                  __ptr,in_R9);
                    __ptr[uVar11] = lVar9;
                    uVar11 = (ulong)uVar8;
                    param_1 = extraout_XMM0_Da;
                  }
                }
              }
LAB_00172e88:
              lVar9 = *(long *)(lVar9 + 0x1f8);
            } while (lVar9 != 0);
            uVar8 = (uint)uVar11;
            lVar9 = 0;
            if ((uVar8 != 0) && (lVar9 = *__ptr, 1 < uVar8)) {
              plVar7 = __ptr + 1;
              do {
                if (*(uint *)(lVar9 + 4) < *(uint *)(*plVar7 + 4)) {
                  lVar9 = *plVar7;
                }
                plVar7 = plVar7 + 1;
              } while (plVar7 != __ptr + (ulong)(uVar8 - 2) + 2);
            }
          }
          free(__ptr);
        }
      }
    }
  }
  return lVar9;
}



void winlink_clear_flags(long param_1)

{
  long lVar1;
  long lVar2;
  long lVar3;
  
  lVar1 = sessions_RB_MINMAX(&sessions,-1);
  do {
    if (lVar1 == 0) {
      return;
    }
    lVar3 = *(long *)(lVar1 + 0xf8);
    if (*(long *)(lVar1 + 0xf8) != 0) {
      do {
        lVar2 = lVar3;
        lVar3 = *(long *)(lVar2 + 0x40);
      } while (*(long *)(lVar2 + 0x40) != 0);
      lVar3 = *(long *)(lVar2 + 8);
      if (lVar3 == *(long *)(param_1 + 8)) goto LAB_00172f9a;
LAB_00172f80:
      lVar2 = winlinks_RB_NEXT(lVar2);
      if (lVar2 != 0) {
        while (lVar3 = *(long *)(lVar2 + 8), lVar3 == *(long *)(param_1 + 8)) {
LAB_00172f9a:
          if ((*(uint *)(lVar2 + 0x38) & 7) == 0) break;
          *(uint *)(lVar2 + 0x38) = *(uint *)(lVar2 + 0x38) & 0xfffffff8;
          *(uint *)(lVar3 + 0x180) = *(uint *)(lVar3 + 0x180) & 0xfffffff4;
          server_status_session(lVar1);
          lVar2 = winlinks_RB_NEXT(lVar2);
          if (lVar2 == 0) goto LAB_00172fc7;
        }
        goto LAB_00172f80;
      }
    }
LAB_00172fc7:
    lVar1 = sessions_RB_NEXT(lVar1);
  } while( true );
}



uint winlink_shuffle_up(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                       undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                       long param_9,int *param_10,undefined8 param_11,undefined *param_12,
                       long *param_13,char **param_14)

{
  void *pvVar1;
  undefined *puVar2;
  undefined8 extraout_RDX;
  uint uVar3;
  uint uVar4;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Da_01;
  undefined4 uVar5;
  undefined4 extraout_XMM0_Db;
  undefined4 extraout_XMM0_Db_00;
  undefined auVar6 [16];
  undefined8 uStack_50;
  
  uVar4 = *param_10 + 1;
  if (uVar4 != 0x7fffffff) {
    uVar3 = uVar4;
    do {
      auVar6 = winlink_find_by_index
                         (param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                          (int **)(param_9 + 0xf8),(ulong)uVar3,param_11,param_12,param_13,param_14)
      ;
      param_11 = auVar6._8_8_;
      if (auVar6._0_8_ == 0) {
        uVar5 = extraout_XMM0_Da;
        if ((int)uVar3 <= (int)uVar4) {
          return uVar4;
        }
        do {
          puVar2 = (undefined *)(ulong)uVar3;
          uVar3 = uVar3 - 1;
          uStack_50 = 0x173050;
          pvVar1 = (void *)winlink_find_by_index
                                     (uVar5,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                                      (int **)(param_9 + 0xf8),(ulong)uVar3,param_11,param_12,
                                      param_13,param_14);
          param_14 = (char **)0x0;
          param_13 = (long *)0x0;
          server_link_window(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da_00),param_2,param_3,param_4,
                             param_5,param_6,param_7,param_8,param_9,(long)pvVar1,param_9,
                             (ulong)puVar2,(int **)0x0,(char **)0x0,(long *)0x0);
          uVar5 = server_unlink_window
                            (CONCAT44(extraout_XMM0_Db_00,extraout_XMM0_Da_01),param_2,param_3,
                             param_4,param_5,param_6,param_7,param_8,param_9,pvVar1,extraout_RDX,
                             puVar2,param_13,param_14);
          param_12 = puVar2;
          param_11 = uStack_50;
        } while (uVar3 != uVar4);
        return uVar4;
      }
      uVar3 = uVar3 + 1;
      param_1 = extraout_XMM0_Da;
    } while (uVar3 != 0x7fffffff);
  }
  return 0xffffffff;
}



void xmalloc(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
            size_t param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
            undefined8 param_13,undefined8 param_14)

{
  void *pvVar1;
  int *piVar2;
  char *pcVar3;
  undefined unaff_BPL;
  undefined4 extraout_XMM0_Da;
  
  if (param_9 == 0) {
                    // WARNING: Subroutine does not return
    fatal(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"xmalloc: zero size",
          param_10,param_11,param_12,param_13,param_14,unaff_BPL);
  }
  pvVar1 = malloc(param_9);
  if (pvVar1 != (void *)0x0) {
    return;
  }
  piVar2 = __errno_location();
  pcVar3 = strerror(*piVar2);
                    // WARNING: Subroutine does not return
  fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
        "xmalloc: allocating %zu bytes: %s",param_9,pcVar3,param_12,param_13,param_14,unaff_BPL);
}



void xcalloc(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
            size_t param_9,size_t param_10,undefined8 param_11,undefined8 param_12,
            undefined8 param_13,undefined8 param_14)

{
  void *pvVar1;
  int *piVar2;
  char *pcVar3;
  undefined4 extraout_XMM0_Da;
  undefined in_stack_ffffffffffffffe8;
  
  if ((param_10 != 0) && (param_9 != 0)) {
    pvVar1 = calloc(param_9,param_10);
    if (pvVar1 != (void *)0x0) {
      return;
    }
    piVar2 = __errno_location();
    pcVar3 = strerror(*piVar2);
                    // WARNING: Subroutine does not return
    fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
          "xcalloc: allocating %zu * %zu bytes: %s",param_9,param_10,pcVar3,param_13,param_14,
          in_stack_ffffffffffffffe8);
  }
                    // WARNING: Subroutine does not return
  fatal(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"xcalloc: zero size",
        param_10,param_11,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
}



void xreallocarray(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                  undefined8 param_9,long param_10,long param_11,undefined8 param_12,
                  undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  int *piVar2;
  char *pcVar3;
  undefined4 extraout_XMM0_Da;
  undefined in_stack_ffffffffffffffe8;
  
  if ((param_10 != 0) && (param_11 != 0)) {
    lVar1 = reallocarray();
    if (lVar1 != 0) {
      return;
    }
    piVar2 = __errno_location();
    pcVar3 = strerror(*piVar2);
                    // WARNING: Subroutine does not return
    fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
          "xreallocarray: allocating %zu * %zu bytes: %s",param_10,param_11,pcVar3,param_13,param_14
          ,in_stack_ffffffffffffffe8);
  }
                    // WARNING: Subroutine does not return
  fatal(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"xreallocarray: zero size",
        param_10,param_11,param_12,param_13,param_14,in_stack_ffffffffffffffe8);
}



void xrealloc(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
             undefined8 param_9,long param_10,undefined8 param_11,undefined8 param_12,
             undefined8 param_13,undefined8 param_14)

{
  xreallocarray(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,1,param_10,
                param_12,param_13,param_14);
  return;
}



void xstrdup(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
            undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
            char *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
            undefined8 param_13,undefined8 param_14)

{
  char *pcVar1;
  int *piVar2;
  undefined8 extraout_RDX;
  undefined4 extraout_XMM0_Da;
  undefined in_stack_fffffffffffffff8;
  
  pcVar1 = strdup(param_9);
  if (pcVar1 != (char *)0x0) {
    return;
  }
  piVar2 = __errno_location();
  pcVar1 = strerror(*piVar2);
                    // WARNING: Subroutine does not return
  fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"xstrdup: %s",
        pcVar1,extraout_RDX,param_12,param_13,param_14,in_stack_fffffffffffffff8);
}



void xvasprintf(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  int *piVar2;
  char *pcVar3;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  undefined4 extraout_XMM0_Da;
  
  iVar1 = __vasprintf_chk(param_9,1,param_10);
  if ((-1 < iVar1) && (*param_9 != 0)) {
    return;
  }
  piVar2 = __errno_location();
  pcVar3 = strerror(*piVar2);
                    // WARNING: Subroutine does not return
  fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"xasprintf: %s",
        pcVar3,extraout_RDX,param_11,param_13,param_14,unaff_BL);
}



void xasprintf(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              long *param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
              undefined8 param_13,undefined8 param_14,undefined param_15)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined8 in_XMM0_Qb;
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [16];
  undefined8 local_a8;
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._8_8_ = in_XMM0_Qb;
    local_88._0_8_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_d8 = 0x10;
  local_c8 = local_b8;
  local_d4 = 0x30;
  local_a8 = param_11;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  xvasprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             &local_d8,param_12,param_13,param_14);
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void xvsnprintf(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
               undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
               undefined8 param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
               undefined8 param_13,undefined8 param_14)

{
  int iVar1;
  undefined8 uVar2;
  undefined8 extraout_RDX;
  undefined unaff_BL;
  ulong uVar3;
  undefined4 extraout_XMM0_Da;
  
  if (0x7fffffff < param_10) {
                    // WARNING: Subroutine does not return
    fatal(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,"xsnprintf: len > INT_MAX"
          ,param_10,param_11,param_12,param_13,param_14,unaff_BL);
  }
  uVar2 = 0xffffffffffffffff;
  uVar3 = param_10;
  iVar1 = __vsnprintf_chk(param_9,param_10,1);
  if ((-1 < iVar1) && (iVar1 < (int)param_10)) {
    return;
  }
                    // WARNING: Subroutine does not return
  fatal(extraout_XMM0_Da,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
        "xsnprintf: overflow",uVar3,extraout_RDX,uVar2,param_11,param_12,unaff_BL);
}



void xsnprintf(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
              undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
              undefined8 param_9,ulong param_10,undefined8 param_11,undefined8 param_12,
              undefined8 param_13,undefined8 param_14,undefined param_15)

{
  char in_AL;
  long in_FS_OFFSET;
  undefined in_register_00001204 [12];
  undefined in_register_00001224 [12];
  undefined in_register_00001244 [12];
  undefined in_register_00001264 [12];
  undefined in_register_00001284 [12];
  undefined in_register_000012a4 [12];
  undefined in_register_000012c4 [12];
  undefined in_register_000012e4 [12];
  undefined4 local_d8;
  undefined4 local_d4;
  undefined *local_d0;
  undefined *local_c8;
  long local_c0;
  undefined local_b8 [24];
  undefined8 local_a0;
  undefined8 local_98;
  undefined8 local_90;
  undefined local_88 [16];
  undefined local_78 [16];
  undefined local_68 [16];
  undefined local_58 [16];
  undefined local_48 [16];
  undefined local_38 [16];
  undefined local_28 [16];
  undefined local_18 [16];
  
  if (in_AL != '\0') {
    local_88._4_12_ = in_register_00001204;
    local_88._0_4_ = param_1;
    local_78._4_12_ = in_register_00001224;
    local_78._0_4_ = param_2;
    local_68._4_12_ = in_register_00001244;
    local_68._0_4_ = param_3;
    local_58._4_12_ = in_register_00001264;
    local_58._0_4_ = param_4;
    local_48._4_12_ = in_register_00001284;
    local_48._0_4_ = param_5;
    local_38._4_12_ = in_register_000012a4;
    local_38._0_4_ = param_6;
    local_28._4_12_ = in_register_000012c4;
    local_28._0_4_ = param_7;
    local_18._4_12_ = in_register_000012e4;
    local_18._0_4_ = param_8;
  }
  local_c0 = *(long *)(in_FS_OFFSET + 0x28);
  local_d0 = &param_15;
  local_d8 = 0x18;
  local_c8 = local_b8;
  local_d4 = 0x30;
  local_a0 = param_12;
  local_98 = param_13;
  local_90 = param_14;
  xvsnprintf(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,param_9,param_10,
             param_11,&local_d8,param_13,param_14);
  if (local_c0 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4 xterm_keys_modifiers(long param_1,long param_2,long *param_3,ulong *param_4)

{
  uint uVar1;
  long lVar2;
  ulong uVar3;
  uint uVar4;
  char *pcVar5;
  undefined4 uVar6;
  
  lVar2 = *param_3;
  uVar6 = 1;
  if (1 < (ulong)(param_2 - lVar2)) {
    uVar6 = 0xffffffff;
    if ((byte)(*(char *)(param_1 + lVar2) - 0x30U) < 10) {
      pcVar5 = (char *)(param_1 + lVar2 + 1);
      *param_3 = lVar2 + 1;
      uVar4 = (int)*(char *)(param_1 + lVar2) - 0x30;
      if ((byte)(*pcVar5 - 0x30U) < 10) {
        *param_3 = lVar2 + 2;
        uVar4 = *pcVar5 + -0x30 + uVar4 * 10;
      }
      uVar1 = uVar4 - 1;
      uVar3 = (ulong)((uVar4 & 1) == 0) << 0x2f;
      if ((uVar1 & 2) != 0) {
        uVar3 = uVar3 | 0x200000000000;
      }
      *param_4 = uVar3;
      if ((uVar1 & 4) != 0) {
        *param_4 = *param_4 | 0x400000000000;
      }
      uVar6 = 0;
      if ((uVar1 & 8) != 0) {
        *param_4 = *param_4 | 0x200000000000;
      }
    }
  }
  return uVar6;
}



int FUN_001734c0(char *param_1,long param_2,long param_3,long *param_4,ulong *param_5)

{
  int iVar1;
  char cVar2;
  long in_FS_OFFSET;
  long local_38;
  long local_30;
  
  cVar2 = *param_1;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  local_38 = 0;
  do {
    if (cVar2 != '_') {
      if (*(char *)(param_2 + local_38) == cVar2) {
        cVar2 = param_1[1];
        local_38 = local_38 + 1;
        if (cVar2 != '\0') goto LAB_00173523;
LAB_00173550:
        *param_4 = local_38;
        iVar1 = 0;
      }
      else {
        iVar1 = -1;
      }
      goto LAB_00173560;
    }
    iVar1 = xterm_keys_modifiers(param_2,param_3,&local_38,param_5);
    if (iVar1 != 0) goto LAB_00173560;
    cVar2 = param_1[1];
    if (cVar2 == '\0') goto LAB_00173550;
LAB_00173523:
    param_1 = param_1 + 1;
  } while (param_3 != local_38);
  iVar1 = 1;
LAB_00173560:
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int xterm_keys_match(char *param_1,long param_2,long param_3,long *param_4,ulong *param_5)

{
  int iVar1;
  
  *param_5 = 0;
  if (param_3 != 0) {
    iVar1 = FUN_001734c0(param_1,param_2,param_3,param_4,param_5);
    return iVar1;
  }
  return 0;
}



int xterm_keys_find(long param_1,ulong param_2,long *param_3,ulong *param_4)

{
  int iVar1;
  char *pcVar2;
  ulong uVar3;
  long in_FS_OFFSET;
  ulong local_48;
  long local_40;
  
  pcVar2 = "\x1b[1;_P";
  uVar3 = 0;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  do {
    local_48 = 0;
    if (param_2 == 0) {
LAB_0017364c:
      iVar1 = 0;
      *param_4 = param_2 | (&xterm_keys_table)[(uVar3 & 0xffffffff) * 2];
LAB_00173622:
      if (local_40 != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
        __stack_chk_fail();
      }
      return iVar1;
    }
    iVar1 = FUN_001734c0(pcVar2,param_1,param_2,param_3,&local_48);
    if (iVar1 != -1) {
      param_2 = local_48;
      if (iVar1 != 0) goto LAB_00173622;
      goto LAB_0017364c;
    }
    uVar3 = uVar3 + 1;
    if (uVar3 == 0x39) goto LAB_00173622;
    pcVar2 = (&PTR_DAT_0019d2e8)[uVar3 * 2];
  } while( true );
}



char * xterm_keys_lookup(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4
                        ,undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8
                        ,ulong param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                        undefined8 param_13,undefined8 param_14)

{
  uint uVar1;
  ulong uVar2;
  char *__s;
  size_t sVar3;
  ulong uVar4;
  ulong *puVar5;
  char cVar6;
  
  uVar4 = param_9 & 0x400000000000;
  if ((param_9 >> 0x2f & 1) == 0) {
    if ((param_9 & 0x200000000000) == 0) {
      if (uVar4 == 0) {
        return (char *)0x0;
      }
      cVar6 = '\x05';
      goto LAB_001736f8;
    }
    cVar6 = '\x03';
  }
  else {
    if ((param_9 & 0x200000000000) == 0) {
      cVar6 = (-(uVar4 == 0) & 0xfcU) + 6;
      goto LAB_001736f8;
    }
    cVar6 = '\x04';
  }
  if (uVar4 != 0) {
    cVar6 = cVar6 + '\x04';
  }
LAB_001736f8:
  puVar5 = &DAT_0019d2f0;
  uVar4 = 0x10000000002e;
  uVar2 = 0;
  while( true ) {
    if ((param_9 & 0xffff1fffffffffff) == uVar4) {
      __s = (char *)xstrdup(param_1,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                            (&PTR_DAT_0019d2e8)[uVar2 * 2],param_10,&xterm_keys_table,uVar4,param_13
                            ,param_14);
      sVar3 = strcspn(__s,"_");
      __s[sVar3] = cVar6 + '0';
      return __s;
    }
    uVar1 = (int)uVar2 + 1;
    uVar2 = (ulong)uVar1;
    if (uVar1 == 0x39) break;
    uVar4 = *puVar5;
    puVar5 = puVar5 + 2;
  }
  return (char *)0x0;
}



long osdep_get_name(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,
                   int param_9,undefined8 param_10,undefined8 param_11,undefined8 param_12,
                   undefined8 param_13,undefined8 param_14)

{
  long lVar1;
  __pid_t _Var2;
  int iVar3;
  FILE *__stream;
  long lVar4;
  undefined8 extraout_RDX;
  long lVar5;
  long in_FS_OFFSET;
  undefined4 extraout_XMM0_Da;
  undefined4 extraout_XMM0_Da_00;
  undefined4 extraout_XMM0_Db;
  undefined in_stack_ffffffffffffffc8;
  undefined7 uStack_37;
  
  lVar1 = *(long *)(in_FS_OFFSET + 0x28);
  _Var2 = tcgetpgrp(param_9);
  if (_Var2 == -1) {
    lVar4 = 0;
  }
  else {
    xasprintf(CONCAT44(extraout_XMM0_Db,extraout_XMM0_Da),param_2,param_3,param_4,param_5,param_6,
              param_7,param_8,(long *)&stack0xffffffffffffffc8,"/proc/%lld/cmdline",(long)_Var2,
              param_12,param_13,param_14,in_stack_ffffffffffffffc8);
    __stream = fopen((char *)CONCAT71(uStack_37,in_stack_ffffffffffffffc8),"r");
    if (__stream == (FILE *)0x0) {
      free((void *)CONCAT71(uStack_37,in_stack_ffffffffffffffc8));
      lVar4 = 0;
    }
    else {
      free((void *)CONCAT71(uStack_37,in_stack_ffffffffffffffc8));
      lVar5 = 0;
      lVar4 = 0;
      while( true ) {
        iVar3 = fgetc(__stream);
        if (iVar3 + 1U < 2) break;
        lVar4 = xrealloc(extraout_XMM0_Da_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8
                         ,lVar4,lVar5 + 2,extraout_RDX,param_12,param_13,param_14);
        *(char *)(lVar4 + lVar5) = (char)iVar3;
        lVar5 = lVar5 + 1;
      }
      if (lVar4 != 0) {
        *(undefined *)(lVar4 + lVar5) = 0;
      }
      fclose(__stream);
    }
  }
  if (lVar1 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined *
osdep_get_cwd(undefined8 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
             undefined4 param_5,undefined4 param_6,undefined4 param_7,undefined4 param_8,int param_9
             ,undefined8 param_10,undefined8 param_11,undefined8 param_12,undefined8 param_13,
             undefined8 param_14)

{
  __pid_t _Var1;
  int iVar2;
  ssize_t sVar3;
  undefined *puVar4;
  long in_FS_OFFSET;
  undefined8 extraout_XMM0_Qa;
  undefined8 extraout_XMM0_Qa_00;
  undefined in_stack_ffffffffffffffc8;
  int local_2c;
  char *local_28;
  long local_20;
  
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  _Var1 = tcgetpgrp(param_9);
  if (_Var1 != -1) {
    xasprintf(extraout_XMM0_Qa,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
              (long *)&local_28,"/proc/%lld/cwd",(long)_Var1,param_12,param_13,param_14,
              in_stack_ffffffffffffffc8);
    sVar3 = readlink(local_28,&DAT_001a2d20,0x1000);
    free(local_28);
    if (sVar3 == -1) {
      iVar2 = ioctl(param_9,0x5429,&local_2c);
      if (iVar2 == -1) goto LAB_00173928;
      xasprintf(extraout_XMM0_Qa_00,param_2,param_3,param_4,param_5,param_6,param_7,param_8,
                (long *)&local_28,"/proc/%lld/cwd",(long)local_2c,param_12,param_13,param_14,
                in_stack_ffffffffffffffc8);
      sVar3 = readlink(local_28,&DAT_001a2d20,0x1000);
      free(local_28);
    }
    if (0 < sVar3) {
      puVar4 = &DAT_001a2d20;
      (&DAT_001a2d20)[sVar3] = 0;
      goto LAB_0017390a;
    }
  }
LAB_00173928:
  puVar4 = (undefined *)0x0;
LAB_0017390a:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return puVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void osdep_event_init(void)

{
  setenv("EVENT_NOEPOLL","1",1);
  event_init();
  return;
}



undefined8 FUN_001739c0(int param_1)

{
  int *piVar1;
  int iVar2;
  int *piVar3;
  int *piVar4;
  int *piVar5;
  undefined8 uVar6;
  long in_FS_OFFSET;
  int local_438 [258];
  long local_30;
  
  piVar4 = local_438;
  piVar5 = local_438;
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_1 == 0) {
    uVar6 = 0;
  }
  else {
    piVar1 = local_438 + (ulong)(param_1 - 1) + 1;
LAB_00173a0d:
    do {
      iVar2 = socket(2,2,0);
      *piVar4 = iVar2;
      if (iVar2 < 0) {
        piVar3 = __errno_location();
        if ((*piVar3 - 0x5dU & 0xfffffffb) == 0) {
          iVar2 = socket(10,2,0);
          *piVar4 = iVar2;
          if (-1 < iVar2) {
            piVar4 = piVar4 + 1;
            if (piVar4 == piVar1) break;
            goto LAB_00173a0d;
          }
        }
        uVar6 = 1;
        piVar5 = local_438;
        goto LAB_00173a4e;
      }
      piVar4 = piVar4 + 1;
    } while (piVar4 != piVar1);
    uVar6 = 0;
LAB_00173a4e:
    do {
      if (*piVar5 < 0) break;
      close(*piVar5);
      piVar5 = piVar5 + 1;
    } while (piVar5 != piVar1);
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return uVar6;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined8 available_fds(uint param_1)

{
  undefined8 uVar1;
  
  if (param_1 < 0x101) {
    uVar1 = FUN_001739c0(param_1);
    return uVar1;
  }
  return 1;
}



void imsg_init(undefined8 *param_1,undefined4 param_2)

{
  __pid_t _Var1;
  
  msgbuf_init(param_1 + 0x2004);
  memset(param_1 + 2,0,0x10010);
  *(undefined4 *)(param_1 + 0x2007) = param_2;
  *(undefined4 *)((long)param_1 + 0x10034) = param_2;
  _Var1 = getpid();
  *param_1 = 0;
  *(__pid_t *)((long)param_1 + 0x1003c) = _Var1;
  param_1[1] = param_1;
  return;
}



ssize_t imsg_read(long param_1)

{
  undefined8 *puVar1;
  undefined8 *__ptr;
  undefined8 uVar2;
  ssize_t sVar3;
  int *piVar4;
  ulong uVar5;
  int iVar6;
  ulong *puVar7;
  int __fd;
  ulong *puVar8;
  long in_FS_OFFSET;
  iovec local_a8;
  undefined local_98 [16];
  iovec *local_88;
  size_t local_80;
  ulong *local_78;
  ulong local_70;
  undefined8 local_68;
  undefined local_58 [16];
  undefined8 local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  local_78 = (ulong *)local_58;
  local_98 = (undefined  [16])0x0;
  local_a8.iov_base = (void *)(param_1 + 0x10 + *(long *)(param_1 + 0x10018));
  local_68._0_4_ = 0;
  local_68._4_4_ = 0;
  local_a8.iov_len = 0xffff - *(long *)(param_1 + 0x10018);
  local_88 = &local_a8;
  local_48 = 0;
  local_80 = 1;
  local_70 = 0x18;
  local_58 = (undefined  [16])0x0;
  __ptr = (undefined8 *)calloc(1,0x18);
  if (__ptr == (undefined8 *)0x0) {
    sVar3 = -1;
    goto LAB_00173c62;
  }
  while( true ) {
    if ((0x100 < imsg_fd_overhead + 2U) ||
       (uVar2 = FUN_001739c0(imsg_fd_overhead + 2U), (int)uVar2 != 0)) {
      piVar4 = __errno_location();
      sVar3 = -1;
      *piVar4 = 0xb;
      free(__ptr);
      goto LAB_00173c62;
    }
    sVar3 = recvmsg(*(int *)(param_1 + 0x10038),(msghdr *)local_98,0);
    if (sVar3 != -1) break;
    piVar4 = __errno_location();
    iVar6 = *piVar4;
    if ((iVar6 == 0x5a) || ((iVar6 != 4 && (iVar6 != 0xb)))) goto LAB_00173c38;
  }
  *(long *)(param_1 + 0x10018) = *(long *)(param_1 + 0x10018) + sVar3;
  puVar7 = local_78;
  if (0xf < local_70) goto LAB_00173ce2;
  goto LAB_00173c38;
LAB_00173ce2:
  if (puVar7 == (ulong *)0x0) goto LAB_00173cf7;
  uVar5 = *puVar7;
  if (puVar7[1] == 0x100000001) {
    puVar8 = puVar7 + 2;
    iVar6 = (int)(uVar5 - 0x10 >> 2);
    if (0 < iVar6) {
      __fd = *(int *)(puVar7 + 2);
      if (__ptr == (undefined8 *)0x0) goto LAB_00173d4f;
      puVar1 = *(undefined8 **)(param_1 + 8);
      *(int *)(__ptr + 2) = __fd;
      *__ptr = 0;
      __ptr[1] = puVar1;
      *puVar1 = __ptr;
      *(undefined8 **)(param_1 + 8) = __ptr;
      for (puVar8 = (ulong *)((long)puVar7 + 0x14);
          puVar8 != (ulong *)((long)puVar7 + (ulong)(iVar6 - 1) * 4 + 0x14);
          puVar8 = (ulong *)((long)puVar8 + 4)) {
        __fd = *(int *)puVar8;
LAB_00173d4f:
        close(__fd);
      }
      uVar5 = *puVar7;
      __ptr = (undefined8 *)0x0;
    }
  }
  if (uVar5 < 0x10) goto LAB_00173cf7;
  puVar7 = (ulong *)((long)puVar7 + (uVar5 + 7 & 0xfffffffffffffff8));
  if (((ulong *)(local_70 + (long)local_78) < puVar7 + 2) ||
     ((ulong *)(local_70 + (long)local_78) <
      (ulong *)((*puVar7 + 7 & 0xfffffffffffffff8) + (long)puVar7))) goto LAB_00173cf7;
  goto LAB_00173ce2;
LAB_00173cf7:
  if (__ptr == (undefined8 *)0x0) goto LAB_00173c62;
LAB_00173c38:
  free(__ptr);
LAB_00173c62:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return sVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void * imsg_create(long param_1,undefined4 param_2,undefined4 param_3,int param_4,short param_5)

{
  void *pvVar1;
  undefined8 uVar2;
  int *piVar3;
  void *pvVar4;
  long in_FS_OFFSET;
  undefined4 local_28;
  undefined2 local_22;
  undefined4 local_20;
  int local_1c;
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  if ((ushort)(param_5 + 0x10U) < 0x4001) {
    local_22 = 0;
    local_1c = param_4;
    if (param_4 == 0) {
      local_1c = *(int *)(param_1 + 0x1003c);
    }
    local_28 = param_2;
    local_20 = param_3;
    pvVar1 = ibuf_dynamic((ulong)(ushort)(param_5 + 0x10U),0x4000);
    pvVar4 = pvVar1;
    if (pvVar1 != (void *)0x0) {
      uVar2 = ibuf_add((long)pvVar1,&local_28,0x10);
      if ((int)uVar2 == -1) {
        pvVar4 = (void *)0x0;
        ibuf_free(pvVar1);
      }
    }
  }
  else {
    piVar3 = __errno_location();
    pvVar4 = (void *)0x0;
    *piVar3 = 0x22;
  }
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return pvVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



uint imsg_add(void *param_1,void *param_2,ushort param_3)

{
  undefined8 uVar1;
  
  if ((param_3 != 0) && (uVar1 = ibuf_add((long)param_1,param_2,(ulong)param_3), (int)uVar1 == -1))
  {
    ibuf_free(param_1);
    return 0xffffffff;
  }
  return (uint)param_3;
}



void imsg_close(long param_1,undefined8 *param_2)

{
  int iVar1;
  long lVar2;
  ushort uVar3;
  
  lVar2 = param_2[2];
  uVar3 = *(ushort *)(lVar2 + 6) & 0xfffe;
  iVar1 = *(int *)(param_2 + 7);
  *(ushort *)(lVar2 + 6) = uVar3;
  if (iVar1 != -1) {
    *(ushort *)(lVar2 + 6) = uVar3 | 1;
  }
  *(short *)(lVar2 + 4) = (short)param_2[5];
  ibuf_close(param_1 + 0x10020,param_2);
  return;
}



undefined8
imsg_compose(long param_1,undefined4 param_2,undefined4 param_3,int param_4,undefined4 param_5,
            void *param_6,ushort param_7)

{
  uint uVar1;
  undefined8 *puVar2;
  
  puVar2 = (undefined8 *)imsg_create(param_1,param_2,param_3,param_4,param_7);
  if (puVar2 != (undefined8 *)0x0) {
    uVar1 = imsg_add(puVar2,param_6,param_7);
    if (uVar1 != 0xffffffff) {
      *(undefined4 *)(puVar2 + 7) = param_5;
      imsg_close(param_1,puVar2);
      return 1;
    }
  }
  return 0xffffffff;
}



undefined8
imsg_composev(long param_1,undefined4 param_2,undefined4 param_3,int param_4,undefined4 param_5,
             void **param_6,int param_7)

{
  uint uVar1;
  void **ppvVar2;
  undefined8 *puVar3;
  int iVar4;
  
  if (param_7 < 1) {
    puVar3 = (undefined8 *)imsg_create(param_1,param_2,param_3,param_4,0);
    if (puVar3 != (undefined8 *)0x0) goto LAB_0017400b;
  }
  else {
    ppvVar2 = param_6 + 1;
    iVar4 = 0;
    do {
      iVar4 = iVar4 + *(int *)ppvVar2;
      ppvVar2 = ppvVar2 + 2;
    } while (ppvVar2 != param_6 + (ulong)(param_7 - 1) * 2 + 3);
    ppvVar2 = param_6 + (ulong)(param_7 - 1) * 2 + 2;
    puVar3 = (undefined8 *)imsg_create(param_1,param_2,param_3,param_4,(short)iVar4);
    if (puVar3 != (undefined8 *)0x0) {
      do {
        uVar1 = imsg_add(puVar3,*param_6,*(ushort *)(param_6 + 1));
        if (uVar1 == 0xffffffff) {
          return 0xffffffff;
        }
        param_6 = param_6 + 2;
      } while (ppvVar2 != param_6);
LAB_0017400b:
      *(undefined4 *)(puVar3 + 7) = param_5;
      imsg_close(param_1,puVar3);
      return 1;
    }
  }
  return 0xffffffff;
}



void imsg_free(long param_1)

{
  free(*(void **)(param_1 + 0x18));
  return;
}



undefined4 imsg_get_fd(long **param_1)

{
  long *__ptr;
  long lVar1;
  long *plVar2;
  undefined4 uVar3;
  
  __ptr = *param_1;
  if (__ptr == (long *)0x0) {
    uVar3 = 0xffffffff;
  }
  else {
    lVar1 = *__ptr;
    uVar3 = *(undefined4 *)(__ptr + 2);
    plVar2 = (long *)__ptr[1];
    if (lVar1 == 0) {
      param_1[1] = plVar2;
    }
    else {
      *(long **)(lVar1 + 8) = plVar2;
      plVar2 = (long *)__ptr[1];
    }
    *plVar2 = lVar1;
    free(__ptr);
  }
  return uVar3;
}



long * imsg_get(long **param_1,undefined4 *param_2)

{
  long *plVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  void *__dest;
  int *piVar5;
  long *plVar6;
  long *plVar7;
  long **__src;
  
  plVar1 = param_1[0x2003];
  if ((long *)0xf < plVar1) {
    uVar4 = *(undefined4 *)((long)param_1 + 0x14);
    uVar2 = *(undefined4 *)(param_1 + 3);
    uVar3 = *(undefined4 *)((long)param_1 + 0x1c);
    *param_2 = *(undefined4 *)(param_1 + 2);
    param_2[1] = uVar4;
    param_2[2] = uVar2;
    param_2[3] = uVar3;
    if (0x3ff0 < (ushort)(*(ushort *)(param_2 + 1) - 0x10)) {
      piVar5 = __errno_location();
      *piVar5 = 0x22;
      return (long *)0xffffffffffffffff;
    }
    plVar7 = (long *)(ulong)*(ushort *)(param_2 + 1);
    if (plVar7 <= plVar1) {
      __src = param_1 + 4;
      param_1[0x2002] = (long *)__src;
      __dest = malloc((size_t)(plVar7 + -2));
      *(void **)(param_2 + 6) = __dest;
      if (__dest == (void *)0x0) {
        return (long *)0xffffffffffffffff;
      }
      if ((*(byte *)((long)param_2 + 6) & 1) == 0) {
        param_2[4] = 0xffffffff;
      }
      else {
        uVar4 = imsg_get_fd(param_1);
        __src = (long **)param_1[0x2002];
        __dest = *(void **)(param_2 + 6);
        param_2[4] = uVar4;
      }
      memcpy(__dest,__src,(size_t)(plVar7 + -2));
      plVar6 = (long *)(ulong)*(ushort *)(param_2 + 1);
      if (plVar6 < plVar1) {
        memmove(param_1 + 2,(void *)((long)plVar6 + (long)(param_1 + 2)),
                (size_t)(long *)((long)plVar1 - (long)plVar6));
        param_1[0x2003] = (long *)((long)plVar1 - (long)plVar6);
      }
      else {
        param_1[0x2003] = (long *)0x0;
      }
      return plVar7;
    }
  }
  return (long *)0x0;
}



undefined8 imsg_flush(long param_1)

{
  undefined8 uVar1;
  
  do {
    if (*(int *)(param_1 + 0x10030) == 0) {
      return 0;
    }
    uVar1 = msgbuf_write((long **)(param_1 + 0x10020));
  } while (0 < (int)uVar1);
  return 0xffffffff;
}



void imsg_clear(long **param_1)

{
  int __fd;
  
  msgbuf_clear(param_1 + 0x2004);
  while( true ) {
    __fd = imsg_get_fd(param_1);
    if (__fd == -1) break;
    close(__fd);
  }
  return;
}



void * ibuf_open(size_t param_1)

{
  void *__ptr;
  void *pvVar1;
  void *pvVar2;
  
  __ptr = calloc(1,0x40);
  pvVar2 = __ptr;
  if (__ptr != (void *)0x0) {
    pvVar1 = malloc(param_1);
    *(void **)((long)__ptr + 0x10) = pvVar1;
    if (pvVar1 == (void *)0x0) {
      pvVar2 = (void *)0x0;
      free(__ptr);
    }
    else {
      *(size_t *)((long)__ptr + 0x20) = param_1;
      *(size_t *)((long)__ptr + 0x18) = param_1;
      *(undefined4 *)((long)__ptr + 0x38) = 0xffffffff;
    }
  }
  return pvVar2;
}



void * ibuf_dynamic(ulong param_1,ulong param_2)

{
  void *pvVar1;
  
  if (param_2 < param_1) {
    return (void *)0x0;
  }
  pvVar1 = ibuf_open(param_1);
  if (pvVar1 != (void *)0x0) {
    if (param_2 != 0) {
      *(ulong *)((long)pvVar1 + 0x20) = param_2;
    }
    return pvVar1;
  }
  return (void *)0x0;
}



undefined8 ibuf_realloc(long param_1,long param_2)

{
  void *pvVar1;
  int *piVar2;
  undefined8 uVar3;
  size_t __size;
  
  __size = param_2 + *(long *)(param_1 + 0x28);
  if (*(ulong *)(param_1 + 0x20) < __size) {
    piVar2 = __errno_location();
    *piVar2 = 0x22;
    uVar3 = 0xffffffff;
  }
  else {
    pvVar1 = realloc(*(void **)(param_1 + 0x10),__size);
    if (pvVar1 == (void *)0x0) {
      uVar3 = 0xffffffff;
    }
    else {
      *(void **)(param_1 + 0x10) = pvVar1;
      uVar3 = 0;
      *(long *)(param_1 + 0x18) = param_2 + *(long *)(param_1 + 0x28);
    }
  }
  return uVar3;
}



undefined8 ibuf_add(long param_1,void *param_2,size_t param_3)

{
  undefined8 uVar1;
  long lVar2;
  
  lVar2 = *(long *)(param_1 + 0x28);
  if (*(ulong *)(param_1 + 0x18) < lVar2 + param_3) {
    uVar1 = ibuf_realloc(param_1,param_3);
    if ((int)uVar1 == -1) {
      return uVar1;
    }
    lVar2 = *(long *)(param_1 + 0x28);
  }
  memcpy((void *)(lVar2 + *(long *)(param_1 + 0x10)),param_2,param_3);
  *(long *)(param_1 + 0x28) = *(long *)(param_1 + 0x28) + param_3;
  return 0;
}



long ibuf_reserve(long param_1,long param_2)

{
  long lVar1;
  undefined8 uVar2;
  ulong uVar3;
  
  lVar1 = *(long *)(param_1 + 0x28);
  uVar3 = lVar1 + param_2;
  if (*(ulong *)(param_1 + 0x18) < uVar3) {
    uVar2 = ibuf_realloc(param_1,param_2);
    if ((int)uVar2 == -1) {
      return 0;
    }
    lVar1 = *(long *)(param_1 + 0x28);
    uVar3 = param_2 + lVar1;
  }
  *(ulong *)(param_1 + 0x28) = uVar3;
  return lVar1 + *(long *)(param_1 + 0x10);
}



long ibuf_seek(long param_1,long param_2,long param_3)

{
  if ((ulong)(param_3 + param_2) <= *(ulong *)(param_1 + 0x28)) {
    return *(long *)(param_1 + 0x10) + param_2;
  }
  return 0;
}



undefined8 ibuf_size(long param_1)

{
  return *(undefined8 *)(param_1 + 0x28);
}



long ibuf_left(long param_1)

{
  return *(long *)(param_1 + 0x20) - *(long *)(param_1 + 0x28);
}



void ibuf_close(long param_1,undefined8 *param_2)

{
  undefined8 *puVar1;
  
  puVar1 = *(undefined8 **)(param_1 + 8);
  *param_2 = 0;
  param_2[1] = puVar1;
  *puVar1 = param_2;
  *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + 1;
  *(undefined8 **)(param_1 + 8) = param_2;
  return;
}



void ibuf_free(void *param_1)

{
  free(*(void **)((long)param_1 + 0x10));
  free(param_1);
  return;
}



void msgbuf_init(undefined8 *param_1)

{
  *param_1 = 0;
  param_1[2] = 0xffffffff00000000;
  param_1[1] = param_1;
  return;
}



void ibuf_enqueue(long param_1,undefined8 *param_2)

{
  ibuf_close(param_1,param_2);
  return;
}



void ibuf_dequeue(long param_1,long *param_2)

{
  int __fd;
  long lVar1;
  long *plVar2;
  
  lVar1 = *param_2;
  plVar2 = (long *)param_2[1];
  if (lVar1 == 0) {
    *(long **)(param_1 + 8) = plVar2;
  }
  else {
    *(long **)(lVar1 + 8) = plVar2;
    plVar2 = (long *)param_2[1];
  }
  __fd = *(int *)(param_2 + 7);
  *plVar2 = lVar1;
  if (__fd != -1) {
    close(__fd);
  }
  *(int *)(param_1 + 0x10) = *(int *)(param_1 + 0x10) + -1;
  free((void *)param_2[2]);
  free(param_2);
  return;
}



void msgbuf_drain(long **param_1,long param_2)

{
  ulong uVar1;
  long *plVar2;
  long **pplVar3;
  
  pplVar3 = (long **)*param_1;
  while( true ) {
    if (pplVar3 == (long **)0x0) {
      return;
    }
    if (param_2 == 0) break;
    plVar2 = *pplVar3;
    uVar1 = (long)pplVar3[6] + param_2;
    if (uVar1 < pplVar3[5]) {
      pplVar3[6] = (long *)uVar1;
      return;
    }
    param_2 = (long)pplVar3[6] + (param_2 - (long)pplVar3[5]);
    ibuf_dequeue((long)param_1,(long *)pplVar3);
    pplVar3 = (long **)plVar2;
  }
  return;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/imsg-buffer.c#L611
undefined8 ibuf_write(long **param_1)

{
  long *plVar1;
  int __fd;
  long lVar2;
  undefined *puVar3;
  long *plVar4;
  ssize_t sVar5;
  int *piVar6;
  long *plVar7;
  undefined *puVar8;
  int __count;
  undefined8 uVar9;
  long in_FS_OFFSET;
  undefined local_4018 [16384];
  
  puVar3 = &stack0xffffffffffffffe8;
  do {
    puVar8 = puVar3;
    *(undefined8 *)(puVar8 + -0x1000) = *(undefined8 *)(puVar8 + -0x1000);
    puVar3 = puVar8 + -0x1000;
  } while (puVar8 + -0x1000 != local_4018);
  plVar7 = (long *)(puVar8 + -0x1010);
  *(undefined8 *)(puVar8 + 0x2ff8) = *(undefined8 *)(in_FS_OFFSET + 0x28);
  *(undefined8 *)(puVar8 + -0x1018) = 0x1745cd;
  memset(puVar8 + -0x1010,0,0x4000);
  plVar4 = *param_1;
  if (plVar4 == (long *)0x0) {
    __count = 0;
  }
  else {
    __count = 0;
    do {
      lVar2 = plVar4[6];
      __count = __count + 1;
      *plVar7 = plVar4[2] + lVar2;
      plVar1 = plVar4 + 5;
      plVar4 = (long *)*plVar4;
      plVar7[1] = *plVar1 - lVar2;
      if (plVar4 == (long *)0x0) goto LAB_00174634;
      plVar7 = plVar7 + 2;
    } while (__count != 0x400);
    __count = 0x400;
  }
LAB_00174634:
  do {
    __fd = *(int *)((long)param_1 + 0x14);
    *(undefined8 *)(puVar8 + -0x1018) = 0x174642;
    sVar5 = writev(__fd,(iovec *)(puVar8 + -0x1010),__count);
    if (sVar5 != -1) {
      if (sVar5 == 0) {
        *(undefined8 *)(puVar8 + -0x1018) = 0x174652;
        piVar6 = __errno_location();
        uVar9 = 0;
        *piVar6 = 0;
      }
      else {
        *(undefined8 *)(puVar8 + -0x1018) = 0x17468b;
        msgbuf_drain(param_1,sVar5);
        uVar9 = 1;
      }
      goto LAB_0017465b;
    }
    *(undefined8 *)(puVar8 + -0x1018) = 0x17462d;
    piVar6 = __errno_location();
  } while (*piVar6 == 4);
  uVar9 = 0xffffffff;
  if (*piVar6 == 0x69) {
    *piVar6 = 0xb;
  }
LAB_0017465b:
  if (*(long *)(puVar8 + 0x2ff8) != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    *(Alignment **)(puVar8 + -0x1018) = &UNK_001746c7;
    __stack_chk_fail();
  }
  return uVar9;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/imsg-buffer.c#L611
undefined8 msgbuf_write(long **param_1)

{
  long lVar1;
  undefined *puVar2;
  int iVar3;
  long *plVar4;
  ssize_t sVar5;
  int *piVar6;
  uint uVar7;
  ulong uVar8;
  long *plVar9;
  long *plVar10;
  undefined *puVar11;
  undefined8 uVar12;
  long in_FS_OFFSET;
  undefined local_4020 [16384];
  
  puVar2 = &stack0xffffffffffffffe0;
  do {
    puVar11 = puVar2;
    *(undefined8 *)(puVar11 + -0x1000) = *(undefined8 *)(puVar11 + -0x1000);
    puVar2 = puVar11 + -0x1000;
  } while (puVar11 + -0x1000 != local_4020);
  *(undefined8 *)(puVar11 + 0x2ff0) = *(undefined8 *)(in_FS_OFFSET + 0x28);
  *(undefined8 *)(puVar11 + -0x1080) = 0x17471e;
  plVar4 = (long *)memset(puVar11 + -0x1018,0,0x4000);
  plVar10 = *param_1;
  *(undefined8 *)(puVar11 + -0x1048) = 0;
  *(undefined8 *)(puVar11 + -0x1028) = 0;
  *(undefined (*) [16])(puVar11 + -0x1078) = (undefined  [16])0x0;
  *(undefined (*) [16])(puVar11 + -0x1068) = (undefined  [16])0x0;
  *(undefined (*) [16])(puVar11 + -0x1058) = (undefined  [16])0x0;
  *(undefined (*) [16])(puVar11 + -0x1038) = (undefined  [16])0x0;
  if (plVar10 == (long *)0x0) {
    uVar8 = 0;
LAB_00174878:
    *(long **)(puVar11 + -0x1068) = plVar4;
    plVar10 = (long *)0x0;
    *(ulong *)(puVar11 + -0x1060) = uVar8;
  }
  else {
    uVar8 = 0;
    plVar9 = plVar4;
    do {
      lVar1 = plVar10[6];
      uVar7 = (int)uVar8 + 1;
      uVar8 = (ulong)uVar7;
      *plVar9 = plVar10[2] + lVar1;
      iVar3 = *(int *)(plVar10 + 7);
      plVar9[1] = plVar10[5] - lVar1;
      if (iVar3 != -1) {
        *(long **)(puVar11 + -0x1068) = plVar4;
        *(ulong *)(puVar11 + -0x1060) = uVar8;
        goto LAB_001747aa;
      }
      plVar10 = (long *)*plVar10;
      if (plVar10 == (long *)0x0) goto LAB_00174878;
      plVar9 = plVar9 + 2;
    } while (uVar7 != 0x400);
    iVar3 = *(int *)(plVar10 + 7);
    *(long **)(puVar11 + -0x1068) = plVar4;
    *(undefined8 *)(puVar11 + -0x1060) = 0x400;
    if (iVar3 != -1) {
LAB_001747aa:
      *(int *)(puVar11 + -0x1028) = iVar3;
      *(undefined **)(puVar11 + -0x1058) = puVar11 + -0x1038;
      *(undefined8 *)(puVar11 + -0x1050) = 0x18;
      *(undefined8 *)(puVar11 + -0x1038) = 0x14;
      *(undefined8 *)(puVar11 + -0x1030) = 0x100000001;
    }
  }
  do {
    iVar3 = *(int *)((long)param_1 + 0x14);
    *(undefined8 *)(puVar11 + -0x1080) = 0x1747fb;
    sVar5 = sendmsg(iVar3,(msghdr *)(puVar11 + -0x1078),0);
    if (sVar5 != -1) {
      if (sVar5 == 0) {
        *(undefined8 *)(puVar11 + -0x1080) = 0x1748c5;
        piVar6 = __errno_location();
        uVar12 = 0;
        *piVar6 = 0;
      }
      else {
        if ((plVar10 != (long *)0x0) && (iVar3 = *(int *)(plVar10 + 7), iVar3 != -1)) {
          *(undefined8 *)(puVar11 + -0x1080) = 0x1748ad;
          close(iVar3);
          *(undefined4 *)(plVar10 + 7) = 0xffffffff;
        }
        *(undefined8 *)(puVar11 + -0x1080) = 0x174829;
        msgbuf_drain(param_1,sVar5);
        uVar12 = 1;
      }
      goto LAB_0017482f;
    }
    *(undefined8 *)(puVar11 + -0x1080) = 0x1747e5;
    piVar6 = __errno_location();
  } while (*piVar6 == 4);
  uVar12 = 0xffffffff;
  if (*piVar6 == 0x69) {
    *piVar6 = 0xb;
  }
LAB_0017482f:
  if (*(long *)(puVar11 + 0x2ff0) != *(long *)(in_FS_OFFSET + 0x28)) {
                    // WARNING: Subroutine does not return
    *(undefined **)(puVar11 + -0x1080) = &UNK_001748d8;
    __stack_chk_fail();
  }
  return uVar12;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/imsg-buffer.c#L611
void msgbuf_clear(long **param_1)

{
  long *plVar1;
  
  plVar1 = *param_1;
  if (plVar1 == (long *)0x0) {
    return;
  }
  do {
    ibuf_dequeue((long)param_1,plVar1);
    plVar1 = *param_1;
  } while (plVar1 != (long *)0x0);
  return;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/closefrom.c#L134 
void closefrom(int param_1)

{
  __pid_t _Var1;
  int iVar2;
  DIR *__dirp;
  dirent *pdVar3;
  ulong uVar4;
  long lVar5;
  long lVar6;
  long lVar7;
  long in_FS_OFFSET;
  char *local_1040;
  char local_1038 [4104];
  long local_30;
  
  local_30 = *(long *)(in_FS_OFFSET + 0x28);
  _Var1 = getpid();
  __snprintf_chk(local_1038,0x1000,1,0x1000,"/proc/%ld/fd",(long)_Var1);
  __dirp = opendir(local_1038);
  if (__dirp == (DIR *)0x0) {
    lVar5 = sysconf(4);
    if (lVar5 < 0) {
      lVar5 = 0x100;
    }
    lVar6 = (long)param_1;
    if (param_1 < lVar5) {
      do {
        lVar7 = lVar6 + 1;
        close((int)lVar6);
        lVar6 = lVar7;
      } while (lVar5 != lVar7);
    }
  }
  else {
    while( true ) {
      pdVar3 = readdir(__dirp);
      if (pdVar3 == (dirent *)0x0) break;
      uVar4 = strtol(pdVar3->d_name,&local_1040,10);
      if ((((pdVar3->d_name != local_1040) && (*local_1040 == '\0')) && (uVar4 < 0x7fffffff)) &&
         ((long)param_1 <= (long)uVar4)) {
        iVar2 = dirfd(__dirp);
        if ((long)iVar2 != uVar4) {
          close((int)uVar4);
        }
      }
    }
    closedir(__dirp);
  }
  if (local_30 == *(long *)(in_FS_OFFSET + 0x28)) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char * strlcat(char *param_1,char *param_2,long param_3)

{
  char *pcVar1;
  size_t sVar2;
  char *pcVar3;
  long lVar4;
  char cVar5;
  char *pcVar6;
  
  if (param_3 == 0) {
    pcVar6 = (char *)0x0;
  }
  else {
    pcVar1 = param_1;
    do {
      if (*pcVar1 == '\0') break;
      pcVar1 = pcVar1 + 1;
    } while (pcVar1 != param_1 + param_3);
    pcVar6 = pcVar1 + -(long)param_1;
    lVar4 = param_3 - (long)pcVar6;
    if (lVar4 != 0) {
      cVar5 = *param_2;
      pcVar3 = param_2;
      if (cVar5 != '\0') {
        do {
          if (lVar4 != 1) {
            *pcVar1 = cVar5;
            lVar4 = lVar4 + -1;
            pcVar1 = pcVar1 + 1;
          }
          cVar5 = pcVar3[1];
          pcVar3 = pcVar3 + 1;
        } while (cVar5 != '\0');
        pcVar6 = pcVar6 + ((long)pcVar3 - (long)param_2);
      }
      *pcVar1 = '\0';
      return pcVar6;
    }
  }
  sVar2 = strlen(param_2);
  return pcVar6 + sVar2;
}



char * strlcpy(char *param_1,char *param_2,long param_3)

{
  char cVar1;
  char *pcVar2;
  char *pcVar3;
  char *pcVar4;
  
  pcVar3 = param_2;
  if (param_3 != 0) {
    pcVar2 = param_2;
    pcVar3 = param_1;
    pcVar4 = param_1;
    if (param_3 != 1) {
      do {
        cVar1 = *pcVar2;
        pcVar2 = pcVar2 + 1;
        pcVar4 = pcVar3 + 1;
        *pcVar3 = cVar1;
        if (cVar1 == '\0') goto LAB_00174b33;
        pcVar3 = pcVar4;
      } while (param_1 + ~(ulong)pcVar4 + param_3 != (char *)0x0);
    }
    *pcVar4 = '\0';
    pcVar3 = pcVar2;
  }
  do {
    pcVar2 = pcVar3 + 1;
    if (*pcVar3 == '\0') break;
    pcVar2 = pcVar3 + 2;
    pcVar4 = pcVar3 + 1;
    pcVar3 = pcVar2;
  } while (*pcVar4 != '\0');
LAB_00174b33:
  return pcVar2 + (-1 - (long)param_2);
}



void * fgetln(FILE *param_1,long *param_2)

{
  long lVar1;
  void *__ptr;
  int iVar2;
  void *pvVar3;
  int *piVar4;
  long lVar5;
  long lVar6;
  
  if ((param_1 == (FILE *)0x0) || (param_2 == (long *)0x0)) {
    piVar4 = __errno_location();
    *piVar4 = 0x16;
    return (void *)0x0;
  }
  if (DAT_001a3d30 == (void *)0x0) {
    DAT_001a3d30 = calloc(1,0x2000);
    if (DAT_001a3d30 == (void *)0x0) {
      return (void *)0x0;
    }
    DAT_001a3d28 = 0x2000;
  }
  lVar5 = 0;
  do {
    while( true ) {
      iVar2 = getc(param_1);
      __ptr = DAT_001a3d30;
      lVar1 = DAT_001a3d28;
      lVar6 = lVar5;
      if (iVar2 == -1) goto LAB_00174c18;
      lVar6 = lVar5 + 1;
      *(char *)((long)DAT_001a3d30 + lVar5) = (char)iVar2;
      lVar5 = lVar6;
      if (lVar1 != lVar6) break;
      pvVar3 = (void *)reallocarray(__ptr,2);
      if (pvVar3 == (void *)0x0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        free(__ptr);
        DAT_001a3d30 = (void *)0x0;
        *piVar4 = iVar2;
        DAT_001a3d28 = 0;
        return (void *)0x0;
      }
      DAT_001a3d28 = lVar6 * 2;
      DAT_001a3d30 = pvVar3;
      if (iVar2 == 10) goto LAB_00174c18;
    }
  } while (iVar2 != 10);
LAB_00174c18:
  *param_2 = lVar6;
  if (lVar6 == 0) {
    return (void *)0x0;
  }
  return DAT_001a3d30;
}



uint * fparseln(FILE *param_1,long *param_2,long *param_3,char *param_4,uint param_5)

{
  char *pcVar1;
  long lVar2;
  size_t __n;
  uint *puVar3;
  char cVar4;
  uint uVar5;
  char *pcVar6;
  uint *puVar7;
  char *pcVar8;
  uint *puVar9;
  char *pcVar10;
  ulong uVar11;
  uint *puVar12;
  long lVar13;
  char cVar14;
  uint uVar15;
  char cVar16;
  uint *__s;
  long in_FS_OFFSET;
  bool bVar17;
  char local_56;
  char local_55;
  ulong local_48;
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  if (param_4 == (char *)0x0) {
    local_56 = '\\';
    cVar14 = '#';
    local_55 = '\\';
  }
  else {
    local_55 = *param_4;
    cVar14 = param_4[2];
    local_56 = param_4[1];
  }
  lVar13 = 0;
  __s = (uint *)0x0;
LAB_00174d52:
  do {
    if (param_3 != (long *)0x0) {
      *param_3 = *param_3 + 1;
    }
    pcVar6 = (char *)fgetln(param_1,(long *)&local_48);
    if (pcVar6 == (char *)0x0) goto LAB_00174e29;
    if ((local_48 == 0) || (cVar14 == '\0')) {
      bVar17 = false;
LAB_00174d8d:
      if (local_48 != 0) goto LAB_00174d92;
LAB_00174d40:
      if (__s == (uint *)0x0) goto LAB_00174dd2;
    }
    else {
      if (pcVar6 < pcVar6 + local_48) {
        pcVar8 = pcVar6;
        do {
          if ((*pcVar8 == cVar14) && (local_55 != '\0')) {
            pcVar1 = pcVar8 + -1;
            pcVar10 = pcVar1;
            if (pcVar6 <= pcVar1) {
              do {
                uVar15 = (int)pcVar1 - (int)pcVar10;
                if (local_55 != *pcVar10) break;
                uVar15 = (int)pcVar8 - (int)pcVar10;
                pcVar10 = pcVar10 + -1;
              } while (pcVar6 + -1 != pcVar10);
              if ((uVar15 & 1) != 0) goto LAB_00174eb0;
            }
            local_48 = (long)pcVar8 - (long)pcVar6;
            bVar17 = ((ulong)__s | local_48) == 0;
            goto LAB_00174d8d;
          }
LAB_00174eb0:
          pcVar8 = pcVar8 + 1;
        } while (pcVar8 != pcVar6 + local_48);
      }
      bVar17 = false;
LAB_00174d92:
      uVar11 = local_48 - 1;
      if (pcVar6[uVar11] == '\n') {
        local_48 = uVar11;
        if (uVar11 != 0) {
          if (local_56 != '\0') goto LAB_00174db7;
          if (uVar11 != 0) goto LAB_00174dd2;
        }
        goto LAB_00174d40;
      }
      if ((local_48 != 0) && (local_56 != '\0')) {
LAB_00174db7:
        uVar11 = local_48 - 1;
        pcVar8 = pcVar6 + uVar11;
        if ((*pcVar8 == local_56) && (local_55 != '\0')) {
          pcVar1 = pcVar8 + -1;
          if (pcVar6 <= pcVar1) {
            pcVar10 = pcVar1;
            do {
              uVar15 = (int)pcVar1 - (int)pcVar10;
              if (local_55 != *pcVar10) break;
              uVar15 = (int)pcVar8 - (int)pcVar10;
              pcVar10 = pcVar10 + -1;
            } while (pcVar10 != pcVar6 + -1);
            if ((uVar15 & 1) != 0) goto LAB_00174dd2;
          }
          local_48 = uVar11;
          if ((uVar11 == 0) && (__s != (uint *)0x0)) goto LAB_00174d52;
          bVar17 = true;
        }
      }
LAB_00174dd2:
      __n = local_48;
      lVar2 = local_48 + lVar13;
      puVar7 = (uint *)realloc(__s,lVar2 + 1);
      if (puVar7 == (uint *)0x0) {
        puVar7 = (uint *)0x0;
        free(__s);
        goto LAB_00174e45;
      }
      memcpy((void *)((long)puVar7 + lVar13),pcVar6,__n);
      *(undefined *)((long)puVar7 + lVar2) = 0;
      lVar13 = lVar2;
      __s = puVar7;
    }
    if (!bVar17) {
LAB_00174e29:
      if (((((param_5 & 0xf) != 0) && (local_55 != '\0')) && (__s != (uint *)0x0)) &&
         (pcVar6 = strchr((char *)__s,(int)local_55), pcVar6 != (char *)0x0)) {
        cVar4 = *(char *)__s;
        puVar12 = __s;
        puVar7 = __s;
        while (cVar4 != '\0') {
          while (local_55 == cVar4) {
            cVar16 = *(char *)((long)puVar12 + 1);
            if (cVar16 == '\0') goto LAB_00175060;
            if (cVar16 == cVar14) {
              uVar15 = param_5 & 4;
              if (cVar14 == local_56) goto LAB_001750e2;
              if (cVar14 != local_55) goto LAB_0017502e;
LAB_001750d4:
              uVar15 = uVar15 + (param_5 & 1);
            }
            else if (cVar16 == local_56) {
              uVar15 = 0;
LAB_001750e2:
              uVar15 = uVar15 + (param_5 & 2);
              if (cVar16 == cVar4) goto LAB_001750d4;
              if (cVar16 != cVar14 && cVar16 != local_56) goto LAB_00175028;
            }
            else {
              uVar15 = param_5 & 1;
              if (cVar16 != local_55) {
LAB_00175028:
                uVar15 = param_5 & 8;
              }
            }
LAB_0017502e:
            puVar9 = puVar7;
            puVar3 = (uint *)((long)puVar7 + 1);
            if (uVar15 == 0) {
              *(char *)puVar7 = cVar4;
              cVar16 = *(char *)((long)puVar12 + 1);
              puVar9 = (uint *)((long)puVar7 + 1);
              puVar3 = (uint *)((long)puVar7 + 2);
            }
            puVar7 = puVar3;
            *(char *)puVar9 = cVar16;
            cVar4 = *(char *)((long)puVar12 + 2);
            puVar12 = (uint *)((long)puVar12 + 2);
            if (cVar4 == '\0') goto LAB_00175060;
          }
          *(char *)puVar7 = cVar4;
          pcVar6 = (char *)((long)puVar12 + 1);
          puVar12 = (uint *)((long)puVar12 + 1);
          puVar7 = (uint *)((long)puVar7 + 1);
          cVar4 = *pcVar6;
        }
LAB_00175060:
        *(char *)puVar7 = '\0';
        puVar7 = __s;
        do {
          puVar12 = puVar7;
          uVar5 = *puVar12 + 0xfefefeff & ~*puVar12;
          uVar15 = uVar5 & 0x80808080;
          puVar7 = puVar12 + 1;
        } while (uVar15 == 0);
        bVar17 = (uVar5 & 0x8080) == 0;
        if (bVar17) {
          uVar15 = uVar15 >> 0x10;
        }
        if (bVar17) {
          puVar7 = (uint *)((long)puVar12 + 6);
        }
        lVar13 = (long)puVar7 + ((-3 - (ulong)CARRY1((byte)uVar15,(byte)uVar15)) - (long)__s);
      }
      puVar7 = __s;
      if (param_2 != (long *)0x0) {
        *param_2 = lVar13;
      }
LAB_00174e45:
      if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
        return puVar7;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
  } while( true );
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/getopt.c#L53
int BSDgetopt(int param_1,long param_2,char *param_3)

{
  char *pcVar1;
  char cVar2;
  int iVar3;
  char *pcVar4;
  long lVar5;
  char *pcVar6;
  char *pcVar7;
  int __c;
  
  if (param_3 == (char *)0x0) {
    return -1;
  }
  if ((BSDoptreset == 0) && (cVar2 = *PTR_DAT_0019e738, cVar2 != '\0')) {
    pcVar6 = PTR_DAT_0019e738 + 1;
    pcVar1 = PTR_DAT_0019e738;
LAB_00175182:
    pcVar7 = pcVar1;
    __c = (int)cVar2;
    PTR_DAT_0019e738 = pcVar6;
    BSDoptopt = __c;
    if (__c != 0x3a) {
      pcVar4 = strchr(param_3,__c);
      if (pcVar4 != (char *)0x0) goto LAB_0017524c;
      if (__c == 0x2d) {
        return -1;
      }
    }
    if (pcVar7[1] == '\0') {
      BSDoptind = BSDoptind + 1;
    }
    if (BSDopterr == 0) {
      return 0x3f;
    }
    if (*param_3 == ':') {
      return 0x3f;
    }
    pcVar7 = "%s: unknown option -- %c\n";
LAB_001752d1:
    __fprintf_chk(stderr,1,pcVar7,program_invocation_short_name,__c);
    return 0x3f;
  }
  BSDoptreset = 0;
  if ((param_1 <= BSDoptind) || (pcVar7 = *(char **)(param_2 + (long)BSDoptind * 8), *pcVar7 != '-')
     ) {
    PTR_DAT_0019e738 = &DAT_001816c0;
    BSDoptreset = 0;
    return -1;
  }
  cVar2 = pcVar7[1];
  pcVar1 = pcVar7 + 1;
  if (cVar2 != '\0') {
    pcVar6 = pcVar7 + 2;
    if (cVar2 == '-') {
      if (pcVar7[2] != '\0') {
        PTR_DAT_0019e738 = pcVar1;
        BSDoptreset = 0;
        return 0x3f;
      }
      PTR_DAT_0019e738 = &DAT_001816c0;
      BSDoptind = BSDoptind + 1;
      BSDoptreset = 0;
      return -1;
    }
    goto LAB_00175182;
  }
  BSDoptopt = 0x2d;
  PTR_DAT_0019e738 = pcVar1;
  pcVar4 = strchr(param_3,0x2d);
  if (pcVar4 == (char *)0x0) {
    return -1;
  }
  __c = 0x2d;
  pcVar6 = pcVar1;
LAB_0017524c:
  if (pcVar4[1] != ':') {
    if (pcVar7[1] != '\0') {
      BSDoptarg = (char *)0x0;
      return __c;
    }
    BSDoptind = BSDoptind + 1;
    BSDoptarg = (char *)0x0;
    return __c;
  }
  iVar3 = BSDoptind + 1;
  if (pcVar7[1] == '\0') {
    if (param_1 <= iVar3) {
      PTR_DAT_0019e738 = &DAT_001816c0;
      if (*param_3 == ':') {
        BSDoptind = iVar3;
        return 0x3a;
      }
      if (BSDopterr == 0) {
        BSDoptind = iVar3;
        return 0x3f;
      }
      pcVar7 = "%s: option requires an argument -- %c\n";
      BSDoptind = iVar3;
      goto LAB_001752d1;
    }
    lVar5 = (long)iVar3;
    iVar3 = BSDoptind + 2;
    pcVar6 = *(char **)(param_2 + lVar5 * 8);
  }
  BSDoptarg = pcVar6;
  PTR_DAT_0019e738 = &DAT_001816c0;
  BSDoptind = iVar3;
  return __c;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/vis.c#L229
undefined2 * vis(undefined2 *param_1,uint param_2,uint param_3,char param_4)

{
  ushort **ppuVar1;
  undefined2 *puVar2;
  char cVar3;
  byte bVar4;
  uint uVar5;
  
  if (param_2 == 0x5c) {
    uVar5 = 0x5c;
LAB_00175586:
    ppuVar1 = __ctype_b_loc();
    if (-1 < (short)(*ppuVar1)[(int)param_2]) goto LAB_00175433;
LAB_0017559f:
    if (param_2 == 0x22) {
      if ((param_3 & 0x200) == 0) goto LAB_001755b5;
    }
    else if ((param_2 != 0x5c) || ((param_3 & 0x40) != 0)) goto LAB_001755b5;
    *(undefined *)param_1 = 0x5c;
    param_1 = (undefined2 *)((long)param_1 + 1);
LAB_001755b5:
    *(byte *)param_1 = (byte)param_2;
    *(byte *)((long)param_1 + 1) = 0;
    return (undefined2 *)((long)param_1 + 1);
  }
  if ((param_3 & 0x400) == 0) {
    uVar5 = param_2;
    if ((param_2 < 0x100) && ((param_2 & 0x80) == 0)) {
      if (0x38 < param_2 - 0x23) goto LAB_00175586;
      if (((0x100000010000081U >> ((ulong)(param_2 - 0x23) & 0x3f) & 1) == 0) ||
         ((param_3 & 0x100) == 0)) {
        ppuVar1 = __ctype_b_loc();
        if ((short)(*ppuVar1)[(int)param_2] < 0) goto LAB_001755b5;
        goto LAB_00175433;
      }
    }
    else {
LAB_00175433:
      if (((param_3 & 4) == 0) && (param_2 == 0x20)) goto LAB_001755b5;
    }
    if ((((param_3 & 8) == 0) && (param_2 == 9)) || (((param_3 & 0x10) == 0 && (param_2 == 10))))
    goto LAB_001755b5;
    if (((param_3 & 0x20) != 0) &&
       (((uVar5 - 7 < 2 || (param_2 == 0xd)) ||
        (ppuVar1 = __ctype_b_loc(), (short)(*ppuVar1)[(ulong)param_2 & 0xff] < 0))))
    goto LAB_0017559f;
  }
  if ((param_3 & 2) != 0) {
    switch((ulong)param_2) {
    case 0:
      puVar2 = param_1 + 1;
      *param_1 = 0x305c;
      if ((byte)(param_4 - 0x30U) < 8) {
        puVar2 = param_1 + 2;
        param_1[1] = 0x3030;
      }
      break;
    default:
      goto switchD_001754bb_caseD_1;
    case 7:
      puVar2 = param_1 + 1;
      *param_1 = 0x615c;
      break;
    case 8:
      puVar2 = param_1 + 1;
      *param_1 = 0x625c;
      break;
    case 9:
      puVar2 = param_1 + 1;
      *param_1 = 0x745c;
      break;
    case 10:
      puVar2 = param_1 + 1;
      *param_1 = 0x6e5c;
      break;
    case 0xb:
      puVar2 = param_1 + 1;
      *param_1 = 0x765c;
      break;
    case 0xc:
      puVar2 = param_1 + 1;
      *param_1 = 0x665c;
      break;
    case 0xd:
      puVar2 = param_1 + 1;
      *param_1 = 0x725c;
      break;
    case 0x20:
      puVar2 = param_1 + 1;
      *param_1 = 0x735c;
    }
    goto LAB_00175572;
  }
switchD_001754bb_caseD_1:
  if (((param_2 & 0x7f) == 0x20) || ((param_3 & 1) != 0)) {
LAB_00175540:
    *(undefined *)param_1 = 0x5c;
    *(byte *)((long)param_1 + 1) = ((byte)(param_2 >> 6) & 3) + 0x30;
    *(byte *)((long)param_1 + 3) = ((byte)param_2 & 7) + 0x30;
    *(byte *)(param_1 + 1) = ((byte)(param_2 >> 3) & 7) + 0x30;
    puVar2 = param_1 + 2;
  }
  else {
    if (((param_3 & 0x100) == 0) || (0x38 < param_2 - 0x23)) {
      if ((param_3 & 0x40) == 0) {
LAB_001754e7:
        *(undefined *)param_1 = 0x5c;
        param_1 = (undefined2 *)((long)param_1 + 1);
      }
      if ((param_2 & 0x80) != 0) {
        *(undefined *)param_1 = 0x4d;
        param_1 = (undefined2 *)((long)param_1 + 1);
        param_2 = param_2 & 0x7f;
      }
    }
    else {
      if ((0x100000010000081U >> ((ulong)(param_2 - 0x23) & 0x3f) & 1) != 0) goto LAB_00175540;
      if ((param_3 & 0x40) == 0) goto LAB_001754e7;
    }
    ppuVar1 = __ctype_b_loc();
    bVar4 = (byte)param_2;
    puVar2 = param_1 + 1;
    if ((*(byte *)(*ppuVar1 + bVar4) & 2) == 0) {
      *(undefined *)param_1 = 0x2d;
      *(byte *)((long)param_1 + 1) = bVar4;
    }
    else {
      cVar3 = bVar4 + 0x40;
      *(undefined *)param_1 = 0x5e;
      if (param_2 == 0x7f) {
        cVar3 = '?';
      }
      *(char *)((long)param_1 + 1) = cVar3;
    }
  }
LAB_00175572:
  *(undefined *)puVar2 = 0;
  return puVar2;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/vis.c#L229
int strvis(undefined2 *param_1,char *param_2,uint param_3)

{
  char *pcVar1;
  char cVar2;
  undefined2 *puVar3;
  
  cVar2 = *param_2;
  puVar3 = param_1;
  if (cVar2 == '\0') {
    *(undefined *)param_1 = 0;
    return 0;
  }
  do {
    pcVar1 = param_2 + 1;
    param_2 = param_2 + 1;
    puVar3 = vis(puVar3,(int)cVar2,param_3,*pcVar1);
    cVar2 = *param_2;
  } while (cVar2 != '\0');
  *(undefined *)puVar3 = 0;
  return (int)puVar3 - (int)param_1;
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/vis.c#L229
long strnvis(byte *param_1,byte *param_2,long param_3,uint param_4)

{
  byte *pbVar1;
  byte bVar2;
  ushort **ppuVar3;
  undefined2 *puVar4;
  uint uVar5;
  byte *pbVar6;
  byte *__dest;
  long in_FS_OFFSET;
  int local_60;
  undefined2 local_45 [2];
  long local_40;
  
  bVar2 = *param_2;
  pbVar1 = param_1 + param_3 + -1;
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  pbVar6 = param_1;
  __dest = param_1;
  if ((bVar2 != 0) && (param_1 < pbVar1)) {
    do {
      uVar5 = (uint)(char)bVar2;
      if (uVar5 == 0x5c) {
LAB_0017582c:
        if ((uVar5 & 0x80) == 0) {
          if (uVar5 - 0x23 < 0x39) {
            if (((0x100000010000081U >> ((ulong)(uVar5 - 0x23) & 0x3f) & 1) != 0) &&
               ((param_4 & 0x100) != 0)) goto LAB_00175881;
            ppuVar3 = __ctype_b_loc();
            if (-1 < (short)(*ppuVar3)[bVar2]) goto LAB_00175872;
          }
          else {
            ppuVar3 = __ctype_b_loc();
            if (-1 < (short)(*ppuVar3)[bVar2]) goto LAB_00175a20;
LAB_001759e6:
            if (uVar5 == 0x22) {
              if ((param_4 & 0x200) != 0) {
LAB_001759f1:
                if (pbVar1 <= __dest + 1) {
                  pbVar6 = __dest + 2;
                  goto LAB_0017593d;
                }
                *__dest = 0x5c;
                __dest = __dest + 1;
              }
            }
            else if ((uVar5 == 0x5c) && ((param_4 & 0x40) == 0)) goto LAB_001759f1;
          }
        }
        else {
LAB_00175a20:
          if (((param_4 & 4) != 0) || (uVar5 != 0x20)) {
LAB_00175872:
            if (((param_4 & 8) != 0) || (uVar5 != 9)) {
LAB_00175881:
              if (((((byte)(param_4 >> 4) ^ 1) & 1) == 0) || (uVar5 != 10)) {
                if (((param_4 & 0x20) == 0) ||
                   (((1 < uVar5 - 7 && (uVar5 != 0xd)) &&
                    (ppuVar3 = __ctype_b_loc(), -1 < (short)(*ppuVar3)[bVar2])))) goto LAB_001758d0;
                goto LAB_001759e6;
              }
            }
          }
        }
        *__dest = bVar2;
        __dest = __dest + 1;
        local_60 = 1;
      }
      else {
        if ((param_4 & 0x400) == 0) {
          if (uVar5 < 0x100) goto LAB_0017582c;
          goto LAB_00175a20;
        }
LAB_001758d0:
        puVar4 = vis(local_45,uVar5,param_4,param_2[1]);
        local_60 = (int)puVar4 - (int)local_45;
        pbVar6 = __dest + local_60;
        if (pbVar1 < pbVar6) {
          if (param_3 != 0) goto LAB_0017598b;
          goto LAB_00175996;
        }
        memcpy(__dest,local_45,(long)local_60);
        __dest = pbVar6;
      }
      param_2 = param_2 + 1;
      bVar2 = *param_2;
    } while ((bVar2 != 0) && (__dest < pbVar1));
    pbVar6 = __dest + local_60;
  }
LAB_0017593d:
  if (param_3 != 0) {
LAB_0017598b:
    *__dest = 0;
  }
  if (pbVar1 < pbVar6) {
LAB_00175996:
    bVar2 = *param_2;
    if (bVar2 != 0) {
      do {
        pbVar6 = param_2 + 1;
        param_2 = param_2 + 1;
        puVar4 = vis(local_45,(int)(char)bVar2,param_4,*pbVar6);
        bVar2 = *param_2;
        __dest = __dest + ((long)puVar4 - (long)local_45);
      } while (bVar2 != 0);
    }
  }
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return (long)__dest - (long)param_1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}


//https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/vis.c#L229
int stravis(void **param_1,char *param_2,uint param_3)

{
  int iVar1;
  int iVar2;
  size_t sVar3;
  undefined2 *__ptr;
  int *piVar4;
  void *pvVar5;
  
  sVar3 = strlen(param_2);
  __ptr = (undefined2 *)calloc(4,sVar3 + 1);
  if (__ptr == (undefined2 *)0x0) {
    iVar2 = -1;
  }
  else {
    iVar2 = strvis(__ptr,param_2,param_3);
    piVar4 = __errno_location();
    iVar1 = *piVar4;
    pvVar5 = realloc(__ptr,(long)(iVar2 + 1));
    *param_1 = pvVar5;
    if (pvVar5 == (void *)0x0) {
      *param_1 = __ptr;
      *piVar4 = iVar1;
    }
  }
  return iVar2;
}


https://github.com/tmux/tmux/blob/fc204bb5e5e6ef4e48f6d6d2b087d2881ad9cf6e/compat/vis.c#L229
int strvisx(undefined2 *param_1,char *param_2,ulong param_3,uint param_4)

{
  char *pcVar1;
  char cVar2;
  undefined2 *puVar3;
  char *pcVar4;
  
  puVar3 = param_1;
  if (param_3 < 2) {
    pcVar4 = param_2;
    if (param_3 == 0) {
      *(undefined *)param_1 = 0;
      return 0;
    }
  }
  else {
    pcVar4 = param_2 + (param_3 - 1);
    do {
      cVar2 = *param_2;
      pcVar1 = param_2 + 1;
      param_2 = param_2 + 1;
      puVar3 = vis(puVar3,(int)cVar2,param_4,*pcVar1);
    } while (pcVar4 != param_2);
  }
  puVar3 = vis(puVar3,(int)*pcVar4,param_4,'\0');
  *(undefined *)puVar3 = 0;
  return (int)puVar3 - (int)param_1;
}



undefined4 FUN_00175b90(byte *param_1,byte param_2,undefined4 *param_3)

{
  byte bVar1;
  undefined4 uVar2;
  
  uVar2 = *param_3;
  switch(uVar2) {
  case 0:
    *param_1 = 0;
    if (param_2 != 0x5c) {
LAB_00175c6b:
      *param_1 = param_2;
      return 1;
    }
    *param_3 = 1;
    break;
  case 1:
    switch(param_2) {
    case 10:
    case 0x24:
      *param_3 = 0;
      uVar2 = 3;
      break;
    default:
      goto switchD_00175baa_caseD_7;
    case 0x30:
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
      uVar2 = 0;
      *param_1 = param_2 - 0x30;
      *param_3 = 5;
      break;
    case 0x45:
      *param_1 = 0x1b;
      *param_3 = 0;
      break;
    case 0x4d:
      *param_1 = 0x80;
      uVar2 = 0;
      *param_3 = 2;
      break;
    case 0x5c:
      *param_1 = 0x5c;
      *param_3 = 0;
      break;
    case 0x5e:
switchD_00175bc8_caseD_5e:
      *param_3 = 4;
      uVar2 = 0;
      break;
    case 0x61:
      *param_1 = 7;
      *param_3 = 0;
      break;
    case 0x62:
      *param_1 = 8;
      *param_3 = 0;
      break;
    case 0x66:
      *param_1 = 0xc;
      *param_3 = 0;
      break;
    case 0x6e:
      *param_1 = 10;
      *param_3 = 0;
      break;
    case 0x72:
      *param_1 = 0xd;
      *param_3 = 0;
      break;
    case 0x73:
      *param_1 = 0x20;
      *param_3 = 0;
      break;
    case 0x74:
      *param_1 = 9;
      *param_3 = 0;
      break;
    case 0x76:
      *param_1 = 0xb;
      *param_3 = 0;
    }
    break;
  case 2:
    if (param_2 == 0x2d) {
      *param_3 = 3;
      return 0;
    }
    if (param_2 == 0x5e) goto switchD_00175bc8_caseD_5e;
  default:
switchD_00175baa_caseD_7:
    *param_3 = 0;
    uVar2 = 0xffffffff;
    break;
  case 3:
    *param_3 = 0;
    *param_1 = *param_1 | param_2;
    return 1;
  case 4:
    bVar1 = param_2 & 0x1f | *param_1;
    if (param_2 == 0x3f) {
      bVar1 = *param_1 | 0x7f;
    }
    *param_1 = bVar1;
    *param_3 = 0;
    return 1;
  case 5:
    if ((byte)(param_2 - 0x30) < 8) {
      uVar2 = 0;
      *param_1 = (param_2 - 0x30) + *param_1 * '\b';
      *param_3 = 6;
    }
    else {
      *param_3 = 0;
      uVar2 = 2;
    }
    break;
  case 6:
    *param_3 = 0;
    uVar2 = 2;
    if ((byte)(param_2 - 0x30) < 8) {
      param_2 = (param_2 - 0x30) + *param_1 * '\b';
      goto LAB_00175c6b;
    }
  }
  return uVar2;
}



uint unvis(byte *param_1,byte param_2,int *param_3,uint param_4)

{
  uint uVar1;
  
  if ((param_4 & 1) == 0) {
    uVar1 = FUN_00175b90(param_1,param_2,param_3);
    return uVar1;
  }
  if (1 < *param_3 - 5U) {
    return (-(uint)(*param_3 == 0) & 4) - 1;
  }
  *param_3 = 0;
  return param_4 & 1;
}



int strunvis(byte *param_1,char *param_2)

{
  char cVar1;
  int iVar2;
  int *piVar3;
  int *extraout_RDX;
  byte *pbVar4;
  ulong uVar5;
  char *pcVar6;
  long in_FS_OFFSET;
  int local_14;
  long local_10;
  
  pcVar6 = param_2 + 1;
  local_10 = *(long *)(in_FS_OFFSET + 0x28);
  cVar1 = *param_2;
  piVar3 = &local_14;
  local_14 = 0;
  pbVar4 = param_1;
  if (cVar1 == '\0') {
    iVar2 = 0;
  }
  else {
    do {
      uVar5 = (ulong)(uint)(int)cVar1;
      while( true ) {
        iVar2 = FUN_00175b90(pbVar4,(byte)uVar5,piVar3);
        piVar3 = extraout_RDX;
        if (iVar2 != 2) break;
        pbVar4 = pbVar4 + 1;
      }
      if (iVar2 < 3) {
        if (iVar2 != 0) {
          if (iVar2 != 1) goto LAB_00175e65;
          pbVar4 = pbVar4 + 1;
        }
      }
      else if (iVar2 != 3) {
LAB_00175e65:
        *pbVar4 = 0;
        iVar2 = -1;
        goto LAB_00175e6d;
      }
      cVar1 = *pcVar6;
      pcVar6 = pcVar6 + 1;
    } while (cVar1 != '\0');
    if (local_14 - 5U < 2) {
      pbVar4 = pbVar4 + 1;
    }
    iVar2 = (int)pbVar4 - (int)param_1;
    param_1 = pbVar4;
  }
  *param_1 = 0;
LAB_00175e6d:
  if (local_10 == *(long *)(in_FS_OFFSET + 0x28)) {
    return iVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



long strnunvis(byte *param_1,char *param_2,long param_3)

{
  byte *pbVar1;
  char cVar2;
  int iVar3;
  long lVar4;
  int *piVar5;
  int *extraout_RDX;
  byte *pbVar6;
  ulong uVar7;
  char *pcVar8;
  byte *pbVar9;
  long in_FS_OFFSET;
  byte local_25;
  int local_24;
  long local_20;
  
  pbVar1 = param_1 + param_3 + -1;
  local_20 = *(long *)(in_FS_OFFSET + 0x28);
  local_24 = 0;
  if (param_3 != 0) {
    *pbVar1 = 0;
  }
  cVar2 = *param_2;
  pcVar8 = param_2 + 1;
  piVar5 = &local_24;
  pbVar6 = &local_25;
  pbVar9 = param_1;
  if (cVar2 == '\0') {
    lVar4 = 0;
  }
  else {
    do {
      uVar7 = (ulong)(uint)(int)cVar2;
      while( true ) {
        iVar3 = FUN_00175b90(pbVar6,(byte)uVar7,piVar5);
        piVar5 = extraout_RDX;
        if (iVar3 != 2) break;
        if (pbVar9 < pbVar1) {
          *pbVar9 = local_25;
        }
        pbVar9 = pbVar9 + 1;
      }
      if (iVar3 < 3) {
        if (iVar3 != 0) {
          if (iVar3 != 1) goto LAB_00175f7d;
          if (pbVar9 < pbVar1) {
            *pbVar9 = local_25;
          }
          pbVar9 = pbVar9 + 1;
        }
      }
      else if (iVar3 != 3) {
LAB_00175f7d:
        lVar4 = -1;
        if (pbVar9 <= pbVar1) {
          *pbVar9 = 0;
        }
        goto LAB_00175f58;
      }
      cVar2 = *pcVar8;
      pcVar8 = pcVar8 + 1;
    } while (cVar2 != '\0');
    if (local_24 - 5U < 2) {
      if (pbVar9 < pbVar1) {
        *pbVar9 = local_25;
      }
      pbVar9 = pbVar9 + 1;
    }
    lVar4 = (long)pbVar9 - (long)param_1;
    param_1 = pbVar9;
  }
  if (param_1 <= pbVar1) {
    *param_1 = 0;
  }
LAB_00175f58:
  if (local_20 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar4;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



longlong strtonum(char *param_1,long param_2,long param_3,char **param_4)

{
  int iVar1;
  int *piVar2;
  longlong lVar3;
  int iVar4;
  long lVar5;
  long in_FS_OFFSET;
  char *local_90;
  char *apcStack_88 [9];
  long local_40;
  
  local_40 = *(long *)(in_FS_OFFSET + 0x28);
  apcStack_88[2] = "invalid";
  apcStack_88[4] = "too small";
  apcStack_88[6] = "too large";
  piVar2 = __errno_location();
  iVar1 = *piVar2;
  *piVar2 = 0;
  if (param_3 < param_2) {
LAB_00176048:
    iVar4 = 0x16;
    lVar5 = 1;
  }
  else {
    lVar3 = strtoll(param_1,&local_90,10);
    if ((local_90 == param_1) || (*local_90 != '\0')) goto LAB_00176048;
    if (lVar3 == -0x8000000000000000) {
      iVar4 = *piVar2;
      if (iVar4 != 0x22) {
        if (param_2 == -0x8000000000000000) {
LAB_001760e7:
          if (param_4 == (char **)0x0) {
            *piVar2 = iVar1;
          }
          else {
            *param_4 = (char *)0x0;
            *piVar2 = iVar1;
          }
          goto LAB_0017606c;
        }
        goto LAB_0017611c;
      }
LAB_00176121:
      lVar5 = 2;
    }
    else {
      if (lVar3 < param_2) {
LAB_0017611c:
        iVar4 = 0x22;
        goto LAB_00176121;
      }
      if ((lVar3 == 0x7fffffffffffffff) && (*piVar2 == 0x22)) {
        lVar5 = 3;
        iVar4 = 0x22;
      }
      else {
        iVar4 = 0x22;
        lVar5 = 3;
        if (lVar3 <= param_3) goto LAB_001760e7;
      }
    }
  }
  if (param_4 == (char **)0x0) {
    *piVar2 = iVar4;
    lVar3 = 0;
  }
  else {
    *param_4 = apcStack_88[lVar5 * 2];
    lVar3 = 0;
    *piVar2 = iVar4;
  }
LAB_0017606c:
  if (local_40 == *(long *)(in_FS_OFFSET + 0x28)) {
    return lVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void __libc_csu_init(undefined4 param_1,undefined8 param_2,undefined8 param_3)

{
  long lVar1;
  
  _DT_INIT();
  lVar1 = 0;
  do {
    (*(code *)(&__DT_INIT_ARRAY)[lVar1])(param_1,param_2,param_3);
    lVar1 = lVar1 + 1;
  } while (lVar1 != 1);
  return;
}



void __libc_csu_fini(void)

{
  return;
}



void _DT_FINI(void)

{
  return;
}

  
